<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google OR-Tools: operations_research::math_opt::SparseMatrix&lt; RowId, ColumnId &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="orLogo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Google OR-Tools<span id="projectnumber">&#160;v9.10</span>
   </div>
   <div id="projectbrief">a fast and portable software suite for combinatorial optimization</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classoperations__research_1_1math__opt_1_1SparseMatrix.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classoperations__research_1_1math__opt_1_1SparseMatrix-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">operations_research::math_opt::SparseMatrix&lt; RowId, ColumnId &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a269439079ec09fdd9ab5c5dc587278f5" id="r_a269439079ec09fdd9ab5c5dc587278f5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a269439079ec09fdd9ab5c5dc587278f5">set</a> (RowId <a class="el" href="#a35c2edd872d547e250e828a62e65ce71">row</a>, ColumnId <a class="el" href="#a1ef6c0a7d0962256e329df83b34a3668">column</a>, double <a class="el" href="demon__profiler_8cc.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a>)</td></tr>
<tr class="separator:a269439079ec09fdd9ab5c5dc587278f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a526fff91ea9218e58071003d0fb96e58" id="r_a526fff91ea9218e58071003d0fb96e58"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a526fff91ea9218e58071003d0fb96e58">get</a> (RowId <a class="el" href="#a35c2edd872d547e250e828a62e65ce71">row</a>, ColumnId <a class="el" href="#a1ef6c0a7d0962256e329df83b34a3668">column</a>) const</td></tr>
<tr class="memdesc:a526fff91ea9218e58071003d0fb96e58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zero is returned if the value is not present.  <br /></td></tr>
<tr class="separator:a526fff91ea9218e58071003d0fb96e58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaed7f234bc74ad8639a36abb42a92f8" id="r_acaed7f234bc74ad8639a36abb42a92f8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acaed7f234bc74ad8639a36abb42a92f8">contains</a> (RowId <a class="el" href="#a35c2edd872d547e250e828a62e65ce71">row</a>, ColumnId <a class="el" href="#a1ef6c0a7d0962256e329df83b34a3668">column</a>) const</td></tr>
<tr class="memdesc:acaed7f234bc74ad8639a36abb42a92f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the value is present (nonzero).  <br /></td></tr>
<tr class="separator:acaed7f234bc74ad8639a36abb42a92f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac797ad4b7977f079fb66ba7de60d0c97" id="r_ac797ad4b7977f079fb66ba7de60d0c97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac797ad4b7977f079fb66ba7de60d0c97">DeleteRow</a> (RowId <a class="el" href="#a35c2edd872d547e250e828a62e65ce71">row</a>)</td></tr>
<tr class="memdesc:ac797ad4b7977f079fb66ba7de60d0c97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zeros out all coefficients for this variable.  <br /></td></tr>
<tr class="separator:ac797ad4b7977f079fb66ba7de60d0c97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a6c9552e38b517c64473e13e43ea229" id="r_a6a6c9552e38b517c64473e13e43ea229"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a6c9552e38b517c64473e13e43ea229">DeleteColumn</a> (ColumnId <a class="el" href="#a1ef6c0a7d0962256e329df83b34a3668">column</a>)</td></tr>
<tr class="memdesc:a6a6c9552e38b517c64473e13e43ea229"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zeros out all coefficients for this variable.  <br /></td></tr>
<tr class="separator:a6a6c9552e38b517c64473e13e43ea229"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35c2edd872d547e250e828a62e65ce71" id="r_a35c2edd872d547e250e828a62e65ce71"><td class="memItemLeft" align="right" valign="top">std::vector&lt; ColumnId &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a35c2edd872d547e250e828a62e65ce71">row</a> (RowId row_id) const</td></tr>
<tr class="separator:a35c2edd872d547e250e828a62e65ce71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ef6c0a7d0962256e329df83b34a3668" id="r_a1ef6c0a7d0962256e329df83b34a3668"><td class="memItemLeft" align="right" valign="top">std::vector&lt; RowId &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1ef6c0a7d0962256e329df83b34a3668">column</a> (ColumnId column_id) const</td></tr>
<tr class="separator:a1ef6c0a7d0962256e329df83b34a3668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af45684890602a0abd734552aef5b53eb" id="r_af45684890602a0abd734552aef5b53eb"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; ColumnId, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af45684890602a0abd734552aef5b53eb">RowTerms</a> (RowId row_id) const</td></tr>
<tr class="separator:af45684890602a0abd734552aef5b53eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b93353672b48d531e16f26eeb6c1238" id="r_a5b93353672b48d531e16f26eeb6c1238"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::pair&lt; RowId, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5b93353672b48d531e16f26eeb6c1238">ColumnTerms</a> (ColumnId col_id) const</td></tr>
<tr class="separator:a5b93353672b48d531e16f26eeb6c1238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aca40055cfa8c9e5767ce467f5c89ae" id="r_a6aca40055cfa8c9e5767ce467f5c89ae"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::tuple&lt; RowId, ColumnId, double &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6aca40055cfa8c9e5767ce467f5c89ae">Terms</a> () const</td></tr>
<tr class="separator:a6aca40055cfa8c9e5767ce467f5c89ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f40b2a5f2cdcd5c73636002c94fa1c2" id="r_a4f40b2a5f2cdcd5c73636002c94fa1c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f40b2a5f2cdcd5c73636002c94fa1c2">Clear</a> ()</td></tr>
<tr class="memdesc:a4f40b2a5f2cdcd5c73636002c94fa1c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all terms from the matrix.  <br /></td></tr>
<tr class="separator:a4f40b2a5f2cdcd5c73636002c94fa1c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3a335bc6bae39a68532135dacbc89b4" id="r_ae3a335bc6bae39a68532135dacbc89b4"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae3a335bc6bae39a68532135dacbc89b4">nonzeros</a> () const</td></tr>
<tr class="memdesc:ae3a335bc6bae39a68532135dacbc89b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of (row, column) keys with nonzero value.  <br /></td></tr>
<tr class="separator:ae3a335bc6bae39a68532135dacbc89b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81320b3767a7f3a59488d88cca32304d" id="r_a81320b3767a7f3a59488d88cca32304d"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a81320b3767a7f3a59488d88cca32304d">impl_detail_matrix_storage_size</a> () const</td></tr>
<tr class="separator:a81320b3767a7f3a59488d88cca32304d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6ec08b306ff47886a9e7d7f69de4e44" id="r_ad6ec08b306ff47886a9e7d7f69de4e44"><td class="memItemLeft" align="right" valign="top">SparseDoubleMatrixProto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad6ec08b306ff47886a9e7d7f69de4e44">Proto</a> () const</td></tr>
<tr class="separator:ad6ec08b306ff47886a9e7d7f69de4e44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a346f0dd1bc945b8a3f6acce2f868b0f3" id="r_a346f0dd1bc945b8a3f6acce2f868b0f3"><td class="memItemLeft" align="right" valign="top">SparseDoubleMatrixProto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a346f0dd1bc945b8a3f6acce2f868b0f3">Update</a> (const absl::flat_hash_set&lt; RowId &gt; &amp;deleted_rows, absl::Span&lt; const RowId &gt; new_rows, const absl::flat_hash_set&lt; ColumnId &gt; &amp;deleted_columns, absl::Span&lt; const ColumnId &gt; new_columns, const absl::flat_hash_set&lt; std::pair&lt; RowId, ColumnId &gt; &gt; &amp;dirty) const</td></tr>
<tr class="separator:a346f0dd1bc945b8a3f6acce2f868b0f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename RowId, typename ColumnId&gt;<br />
class operations_research::math_opt::SparseMatrix&lt; RowId, ColumnId &gt;</div><p>A sparse double valued matrix over int-like rows and columns.</p>
<dl class="section note"><dt>Note</dt><dd>the matrix is sparse in both:<ul>
<li>The IDs of the rows/columns, stored as flat_hash_map.</li>
<li>The entries with nonzero value.</li>
</ul>
</dd></dl>
<p>Getting/setting/clearing entries are O(1) operations. Getting a row of the matrix runs in O(size of the row) if nothing has been deleted, and getting all the rows runs in O(number of nonzero entries), even with deletions (with deletions, accessing a particular row or columns with many deletions may be slow).</p>
<p>Implementation: The entries are stored in a flat_hash_map&lt;pair&lt;RowId, ColumnId&gt;, double&gt; <code>values_</code>. Additionally, we maintain a flat_hash_map&lt;RowId, vector&lt;ColumnId&gt;&gt; <code>rows_</code> and a flat_hash_map&lt;ColumnId, vector&lt;RowID&gt;&gt; <code>columns_</code> that enable efficient queries of the nonzeros in any row or column. When a coefficient is set to zero or a variable is deleted, we do not immediately delete the data from <code>values_</code>, <code>rows_</code>, or <code>columns_</code>, we simply set the coefficient to zero in <code>values_</code>. We track how many zeros are in <code>values_</code>, and when more than some constant fraction of all entries are zero (see <code><a class="el" href="namespaceoperations__research_1_1math__opt_1_1internal.html#a0fd3be09e822d758e8abe91deb04dd7a">internal::kZerosCleanup</a></code>), we clean up <code>rows_</code>, <code>columns_</code>, and <code>values_</code> to remove all the zeros. Iteration over the rows or total entries of the matrix must check for zeros in values_ and skip these terms.</p>
<p>Memory use:</p><ul>
<li>3*8 bytes per nonzero plus hash capacity overhead for values_.</li>
<li>2*8 bytes per nonzero plus vector capacity overhead for rows_ and columns_.</li>
<li>~5*8 bytes and one heap allocation per unique row and unique column. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00175">175</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a4f40b2a5f2cdcd5c73636002c94fa1c2" name="a4f40b2a5f2cdcd5c73636002c94fa1c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f40b2a5f2cdcd5c73636002c94fa1c2">&#9670;&#160;</a></span>Clear()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::Clear </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes all terms from the matrix. </p>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00505">505</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<a id="a1ef6c0a7d0962256e329df83b34a3668" name="a1ef6c0a7d0962256e329df83b34a3668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ef6c0a7d0962256e329df83b34a3668">&#9670;&#160;</a></span>column()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; RowId &gt; <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::column </td>
          <td>(</td>
          <td class="paramtype">ColumnId</td>          <td class="paramname"><span class="paramname"><em>column_id</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the variables that have nonzero entries with <code>variable</code>. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo001006">Todo</a></b></dt><dd>(b/233630053): expose an iterator based API to avoid making a copy. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00445">445</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<a id="a5b93353672b48d531e16f26eeb6c1238" name="a5b93353672b48d531e16f26eeb6c1238"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b93353672b48d531e16f26eeb6c1238">&#9670;&#160;</a></span>ColumnTerms()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::pair&lt; RowId, double &gt; &gt; <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::ColumnTerms </td>
          <td>(</td>
          <td class="paramtype">ColumnId</td>          <td class="paramname"><span class="paramname"><em>col_id</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the variable value pairs (x, c) where <code>variable</code> and x have nonzero coefficient c.</p>
<p>The return order is deterministic but not defined. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo001008">Todo</a></b></dt><dd>(b/233630053): expose an iterator based API to avoid making a copy. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00477">477</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<a id="acaed7f234bc74ad8639a36abb42a92f8" name="acaed7f234bc74ad8639a36abb42a92f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaed7f234bc74ad8639a36abb42a92f8">&#9670;&#160;</a></span>contains()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::contains </td>
          <td>(</td>
          <td class="paramtype">RowId</td>          <td class="paramname"><span class="paramname"><em>row</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColumnId</td>          <td class="paramname"><span class="paramname"><em>column</em></span>&#160;) const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if the value is present (nonzero). </p>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00391">391</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<a id="a6a6c9552e38b517c64473e13e43ea229" name="a6a6c9552e38b517c64473e13e43ea229"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a6c9552e38b517c64473e13e43ea229">&#9670;&#160;</a></span>DeleteColumn()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::DeleteColumn </td>
          <td>(</td>
          <td class="paramtype">ColumnId</td>          <td class="paramname"><span class="paramname"><em>column</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Zeros out all coefficients for this variable. </p>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00414">414</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<a id="ac797ad4b7977f079fb66ba7de60d0c97" name="ac797ad4b7977f079fb66ba7de60d0c97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac797ad4b7977f079fb66ba7de60d0c97">&#9670;&#160;</a></span>DeleteRow()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::DeleteRow </td>
          <td>(</td>
          <td class="paramtype">RowId</td>          <td class="paramname"><span class="paramname"><em>row</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Zeros out all coefficients for this variable. </p>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00398">398</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<a id="a526fff91ea9218e58071003d0fb96e58" name="a526fff91ea9218e58071003d0fb96e58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a526fff91ea9218e58071003d0fb96e58">&#9670;&#160;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">double <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::get </td>
          <td>(</td>
          <td class="paramtype">RowId</td>          <td class="paramname"><span class="paramname"><em>row</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColumnId</td>          <td class="paramname"><span class="paramname"><em>column</em></span>&#160;) const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Zero is returned if the value is not present. </p>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00382">382</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<a id="a81320b3767a7f3a59488d88cca32304d" name="a81320b3767a7f3a59488d88cca32304d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81320b3767a7f3a59488d88cca32304d">&#9670;&#160;</a></span>impl_detail_matrix_storage_size()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::impl_detail_matrix_storage_size </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For testing/debugging only, do not depend on this value, behavior may change based on implementation. </p>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00230">230</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<a id="ae3a335bc6bae39a68532135dacbc89b4" name="ae3a335bc6bae39a68532135dacbc89b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3a335bc6bae39a68532135dacbc89b4">&#9670;&#160;</a></span>nonzeros()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">int64_t <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::nonzeros </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of (row, column) keys with nonzero value. </p>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00512">512</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<a id="ad6ec08b306ff47886a9e7d7f69de4e44" name="ad6ec08b306ff47886a9e7d7f69de4e44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6ec08b306ff47886a9e7d7f69de4e44">&#9670;&#160;</a></span>Proto()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">SparseDoubleMatrixProto <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::Proto </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00517">517</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<a id="a35c2edd872d547e250e828a62e65ce71" name="a35c2edd872d547e250e828a62e65ce71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35c2edd872d547e250e828a62e65ce71">&#9670;&#160;</a></span>row()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; ColumnId &gt; <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::row </td>
          <td>(</td>
          <td class="paramtype">RowId</td>          <td class="paramname"><span class="paramname"><em>row_id</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the variables that have nonzero entries with <code>variable</code>. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo001005">Todo</a></b></dt><dd>(b/233630053): expose an iterator based API to avoid making a copy. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00430">430</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<a id="af45684890602a0abd734552aef5b53eb" name="af45684890602a0abd734552aef5b53eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af45684890602a0abd734552aef5b53eb">&#9670;&#160;</a></span>RowTerms()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::pair&lt; ColumnId, double &gt; &gt; <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::RowTerms </td>
          <td>(</td>
          <td class="paramtype">RowId</td>          <td class="paramname"><span class="paramname"><em>row_id</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the variable value pairs (x, c) where <code>variable</code> and x have nonzero coefficient c.</p>
<p>The return order is deterministic but not defined. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo001007">Todo</a></b></dt><dd>(b/233630053): expose an iterator based API to avoid making a copy. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00461">461</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<a id="a269439079ec09fdd9ab5c5dc587278f5" name="a269439079ec09fdd9ab5c5dc587278f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a269439079ec09fdd9ab5c5dc587278f5">&#9670;&#160;</a></span>set()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::set </td>
          <td>(</td>
          <td class="paramtype">RowId</td>          <td class="paramname"><span class="paramname"><em>row</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColumnId</td>          <td class="paramname"><span class="paramname"><em>column</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>value</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Setting <code>value</code> to zero removes the value from the matrix. Returns true if <code>value</code> is different from the existing value in the matrix.</p>
<p><a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">SparseMatrix</a> </p>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00352">352</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<a id="a6aca40055cfa8c9e5767ce467f5c89ae" name="a6aca40055cfa8c9e5767ce467f5c89ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6aca40055cfa8c9e5767ce467f5c89ae">&#9670;&#160;</a></span>Terms()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; std::tuple&lt; RowId, ColumnId, double &gt; &gt; <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::Terms </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns (x, y, c) tuples where variables x and y have nonzero coefficient c, and x &lt;= y.</p>
<p>The return order is non-deterministic and not defined. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo001009">Todo</a></b></dt><dd>(b/233630053): expose an iterator based API to avoid making a copy. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00493">493</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<a id="a346f0dd1bc945b8a3f6acce2f868b0f3" name="a346f0dd1bc945b8a3f6acce2f868b0f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a346f0dd1bc945b8a3f6acce2f868b0f3">&#9670;&#160;</a></span>Update()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename RowId , typename ColumnId &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">SparseDoubleMatrixProto <a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">operations_research::math_opt::SparseMatrix</a>&lt; RowId, ColumnId &gt;::Update </td>
          <td>(</td>
          <td class="paramtype">const absl::flat_hash_set&lt; RowId &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>deleted_rows</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">absl::Span&lt; const RowId &gt;</td>          <td class="paramname"><span class="paramname"><em>new_rows</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const absl::flat_hash_set&lt; ColumnId &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>deleted_columns</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">absl::Span&lt; const ColumnId &gt;</td>          <td class="paramname"><span class="paramname"><em>new_columns</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const absl::flat_hash_set&lt; std::pair&lt; RowId, ColumnId &gt; &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>dirty</em></span>&#160;) const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Extract changes to the matrix of linear constraint coefficients</p>
<dl class="section note"><dt>Note</dt><dd>it is important that we check for deleted constraints and variables here. While we generally try to remove elements from matrix_keys_ when either their variable or constraint is deleted, if a coefficient is set to zero and then the variable/constraint is deleted, we will miss it.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000998">Todo</a></b></dt><dd>(b/233630053): use iterator API. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000999">Todo</a></b></dt><dd>(b/233630053) use iterator API. </dd></dl>
<p>NOTE(user): we already have the columns above the checkpoint from the loop above, but we will do at most twice as much as needed here.</p>

<p class="definition">Definition at line <a class="el" href="sparse__matrix_8h_source.html#l00530">530</a> of file <a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>ortools/math_opt/storage/<a class="el" href="sparse__matrix_8h_source.html">sparse_matrix.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceoperations__research.html">operations_research</a></li><li class="navelem"><a class="el" href="namespaceoperations__research_1_1math__opt.html">math_opt</a></li><li class="navelem"><a class="el" href="classoperations__research_1_1math__opt_1_1SparseMatrix.html">SparseMatrix</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
