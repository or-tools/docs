<!-- HTML header for doxygen 1.8.18-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OR-Tools: logging.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="styleSheet.tmp.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="orLogo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OR-Tools
   &#160;<span id="projectnumber">9.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('base_2logging_8cc_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">base/logging.cc</div></div>
</div><!--header-->
<div class="contents">
<a href="base_2logging_8cc.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright 2010-2021 Google LLC</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// you may not use this file except in compliance with the License.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">// You may obtain a copy of the License at</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">//</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">//     http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">//</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">// Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">// See the License for the specific language governing permissions and</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">// limitations under the License.</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="base_2logging_8h.html">ortools/base/logging.h</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span> </div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a369266c24eacffb87046522897a570d5">   16</a></span><span class="preprocessor">#define _GNU_SOURCE 1  </span><span class="comment">// needed for O_NOFOLLOW and pread()/pwrite()</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;iomanip&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &lt;mutex&gt;</span>  <span class="comment">// for std::call_once and std::once_flag.  // NOLINT</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#if defined(_MSC_VER)</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &lt;<a class="code" href="io_8h.html">io.h</a>&gt;</span>     <span class="comment">// lseek</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &lt;string.h&gt;</span> <span class="comment">/* for _strnicmp(), strerror_s() */</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &lt;time.h&gt;</span>   <span class="comment">/* for localtime_s() */</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &lt;windows.h&gt;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &lt;pwd.h&gt;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &lt;sys/utsname.h&gt;</span>  <span class="comment">// For uname.</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &lt;syslog.h&gt;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &lt;unistd.h&gt;</span>  <span class="comment">// For _exit.</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &lt;errno.h&gt;</span>  <span class="comment">// for errno</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &lt;fcntl.h&gt;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &lt;stdarg.h&gt;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &lt;climits&gt;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="preprocessor">#include &quot;absl/debugging/stacktrace.h&quot;</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#include &quot;absl/time/time.h&quot;</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="preprocessor">#include &quot;<a class="code" href="commandlineflags_8h.html">ortools/base/commandlineflags.h</a>&quot;</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#include &quot;<a class="code" href="logging__utilities_8h.html">ortools/base/logging_utilities.h</a>&quot;</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="preprocessor">#include &quot;<a class="code" href="raw__logging_8h.html">ortools/base/raw_logging.h</a>&quot;</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a31902dd802cefb2e7082b1f31fc0ab8b">   54</a></span><a class="code hl_function" href="base_2logging_8cc.html#a31902dd802cefb2e7082b1f31fc0ab8b">ABSL_DECLARE_FLAG</a>(<span class="keywordtype">bool</span>, log_prefix);</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a91d8109fffffbada5fcaba8d25e322b7">   55</a></span><a class="code hl_function" href="base_2logging_8cc.html#a31902dd802cefb2e7082b1f31fc0ab8b">ABSL_DECLARE_FLAG</a>(<span class="keywordtype">bool</span>, logtostderr);</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>std::once_flag init_done;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span> </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#adc29f16e0cd8a868b42ac92d5fc437b9">   61</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="base_2logging_8cc.html#adc29f16e0cd8a868b42ac92d5fc437b9">FixFlagsAndEnvironmentForSwig</a>() {</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>  std::call_once(init_done, [] { <a class="code hl_function" href="namespacegoogle.html#a1749056ff206ebc4f581e6bc0bae841d">google::InitGoogleLogging</a>(<span class="stringliteral">&quot;swig_helper&quot;</span>); });</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>  absl::SetFlag(&amp;FLAGS_logtostderr, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>  absl::SetFlag(&amp;FLAGS_log_prefix, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>}</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="keyword">using</span> std::dec;</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="keyword">using</span> std::hex;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="keyword">using</span> <a class="code hl_variable" href="alldiff__cst_8cc.html#ad10edae0a852d72fb76afb1c77735045">std::min</a>;</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="keyword">using</span> std::ostream;</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="keyword">using</span> std::ostringstream;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="keyword">using</span> std::setfill;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="keyword">using</span> std::setw;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="keyword">using</span> std::string;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="keyword">using</span> std::vector;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="keyword">using</span> std::fclose;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="keyword">using</span> std::fflush;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="keyword">using</span> std::FILE;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="keyword">using</span> std::fprintf;</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="keyword">using</span> std::fwrite;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="keyword">using</span> std::perror;</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span> </div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span><span class="preprocessor">#define fdopen _fdopen</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="preprocessor">#define strcasecmp _stricmp</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span><span class="preprocessor">#if defined(_MSC_VER)</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="preprocessor">#ifndef __MINGW32__</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span><span class="keyword">enum</span> { STDIN_FILENO = 0, STDOUT_FILENO = 1, STDERR_FILENO = 2 };</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span> </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="keyword">inline</span> <span class="keywordtype">char</span>* strerror_r(<span class="keywordtype">int</span> errnum, <span class="keywordtype">char</span>* buf, <span class="keywordtype">size_t</span> buflen) {</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>  strerror_s(buf, buflen, errnum);</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>  <span class="keywordflow">return</span> buf;</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>}</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span> </div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="keyword">inline</span> <span class="keyword">struct </span>tm* localtime_r(<span class="keyword">const</span> time_t* timep, <span class="keyword">struct</span> tm* result) {</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>  localtime_s(result, timep);</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>  <span class="keywordflow">return</span> result;</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>}</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">  105</a></span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">bool</span>, logtostderr, <span class="keyword">false</span>,</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>          <span class="stringliteral">&quot;log messages go to stderr instead of logfiles&quot;</span>);</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#af748fa06f99da43059ff4f1f9e5f87d7">  107</a></span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">bool</span>, alsologtostderr, <span class="keyword">false</span>,</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>          <span class="stringliteral">&quot;log messages go to stderr in addition to logfiles&quot;</span>);</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#ae73f7a06dba2e8443c55b470716ef78a">  109</a></span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">bool</span>, colorlogtostderr, <span class="keyword">false</span>,</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>          <span class="stringliteral">&quot;color messages logged to stderr (if supported by terminal)&quot;</span>);</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span><span class="preprocessor">#if defined(__linux__)</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">bool</span>, drop_log_memory, <span class="keyword">true</span>,</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>          <span class="stringliteral">&quot;Drop in-memory buffers of log contents. &quot;</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>          <span class="stringliteral">&quot;Logs can grow very quickly and they are rarely read before they &quot;</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>          <span class="stringliteral">&quot;need to be evicted from memory. Instead, drop them from memory &quot;</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>          <span class="stringliteral">&quot;as soon as they are flushed to disk.&quot;</span>);</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span><span class="comment">// By default, errors (including fatal errors) get logged to stderr as</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span><span class="comment">// well as the file.</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span><span class="comment">//</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span><span class="comment">// The default is ERROR instead of FATAL so that users can see problems</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span><span class="comment">// when they run a program without having to look in another file.</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a7f698d43657d30b829367e7e9f8e4ce0">  124</a></span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">int</span>, stderrthreshold, <a class="code hl_variable" href="namespacegoogle.html#aec61ff6c741224bbf1d230d40449aa30">google::GLOG_ERROR</a>,</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>          <span class="stringliteral">&quot;log messages at or above this level are copied to stderr in &quot;</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>          <span class="stringliteral">&quot;addition to logfiles.  This flag obsoletes --alsologtostderr.&quot;</span>);</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#ab32c96d135bd6375832b1bde39fb07c3">  128</a></span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">bool</span>, log_prefix, <span class="keyword">true</span>,</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>          <span class="stringliteral">&quot;Prepend the log prefix to the start of each log line&quot;</span>);</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#abd0901c80bbf70ef4bb7a89707c016d3">  130</a></span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">int</span>, minloglevel, 0,</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>          <span class="stringliteral">&quot;Messages logged at a lower level than this don&#39;t &quot;</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>          <span class="stringliteral">&quot;actually get logged anywhere&quot;</span>);</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#ad9134cb530048c0b14d1bae9f5bf218f">  133</a></span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">int</span>, logbuflevel, 0,</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>          <span class="stringliteral">&quot;Buffer log messages logged at this level or lower&quot;</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>          <span class="stringliteral">&quot; (-1 means don&#39;t buffer; 0 means buffer INFO only;&quot;</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>          <span class="stringliteral">&quot; ...)&quot;</span>);</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a047c07c564f0212855be100f319acec3">  137</a></span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">int</span>, logbufsecs, 30,</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>          <span class="stringliteral">&quot;Buffer log messages for at most this many seconds&quot;</span>);</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span><span class="comment">// Compute the default value for --log_dir</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a33ba791d9435fed28cc5340f3da2902f">  141</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_function" href="base_2logging_8cc.html#a33ba791d9435fed28cc5340f3da2902f">DefaultLogDir</a>() {</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>  <span class="keyword">const</span> <span class="keywordtype">char</span>* env;</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>  env = getenv(<span class="stringliteral">&quot;GOOGLE_LOG_DIR&quot;</span>);</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>  <span class="keywordflow">if</span> (env != <span class="keyword">nullptr</span> &amp;&amp; env[0] != <span class="charliteral">&#39;\0&#39;</span>) {</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="keywordflow">return</span> env;</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>  }</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>  env = getenv(<span class="stringliteral">&quot;TEST_TMPDIR&quot;</span>);</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>  <span class="keywordflow">if</span> (env != <span class="keyword">nullptr</span> &amp;&amp; env[0] != <span class="charliteral">&#39;\0&#39;</span>) {</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <span class="keywordflow">return</span> env;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>  }</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>  <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>}</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span> </div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a1bbf1e269a092c7c082b7b0e1d736dac">  154</a></span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">int</span>, logfile_mode, 0664, <span class="stringliteral">&quot;Log file mode/permissions.&quot;</span>);</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span> </div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#ab6899e1368d8416fae8e78b0976cb6ce">  156</a></span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(std::string, log_dir, <a class="code hl_function" href="base_2logging_8cc.html#a33ba791d9435fed28cc5340f3da2902f">DefaultLogDir</a>(),</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>          <span class="stringliteral">&quot;If specified, logfiles are written into this directory instead &quot;</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>          <span class="stringliteral">&quot;of the default logging directory.&quot;</span>);</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a166358cb10135382971460d435a93490">  159</a></span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(std::string, log_link, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>          <span class="stringliteral">&quot;Put additional links to the log &quot;</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>          <span class="stringliteral">&quot;files in this directory&quot;</span>);</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a0ab6d3396cbfc7dfdd882ff9a79cff12">  163</a></span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">int</span>, max_log_size, 1800,</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>          <span class="stringliteral">&quot;approx. maximum log file size (in MB). A value of 0 will &quot;</span></div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>          <span class="stringliteral">&quot;be silently overridden to 1.&quot;</span>);</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#abc37370b87c536ce0b297792a8549401">  167</a></span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(<span class="keywordtype">bool</span>, stop_logging_if_full_disk, <span class="keyword">false</span>,</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>          <span class="stringliteral">&quot;Stop attempting to log to disk if the disk is full.&quot;</span>);</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a8d5b74b1ab42dbad518b4428872c3b44">  170</a></span><a class="code hl_function" href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a>(std::string, log_backtrace_at, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>          <span class="stringliteral">&quot;Emit a backtrace when logging at file:linenum.&quot;</span>);</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span><span class="preprocessor">#if defined(_MSC_VER)</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span><span class="preprocessor">#define PATH_SEPARATOR &#39;\\&#39;</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a256a5721249aa3309437212cc21a9fe4">  176</a></span><span class="preprocessor">#define PATH_SEPARATOR &#39;/&#39;</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span><span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span><span class="preprocessor">#include &lt;basetsd.h&gt;</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span><span class="preprocessor">#define ssize_t SSIZE_T</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span><span class="keyword">static</span> ssize_t pread(<span class="keywordtype">int</span> fd, <span class="keywordtype">void</span>* buf, <span class="keywordtype">size_t</span> count, off_t offset) {</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>  off_t orig_offset = lseek(fd, 0, SEEK_CUR);</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  <span class="keywordflow">if</span> (orig_offset == (off_t)-1) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>  <span class="keywordflow">if</span> (lseek(fd, offset, SEEK_CUR) == (off_t)-1) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>  ssize_t len = read(fd, buf, count);</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>  <span class="keywordflow">if</span> (len &lt; 0) <span class="keywordflow">return</span> len;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>  <span class="keywordflow">if</span> (lseek(fd, orig_offset, SEEK_SET) == (off_t)-1) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>  <span class="keywordflow">return</span> len;</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>}</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span> </div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span><span class="keyword">static</span> ssize_t pwrite(<span class="keywordtype">int</span> fd, <span class="keywordtype">void</span>* buf, <span class="keywordtype">size_t</span> count, off_t offset) {</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>  off_t orig_offset = lseek(fd, 0, SEEK_CUR);</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>  <span class="keywordflow">if</span> (orig_offset == (off_t)-1) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  <span class="keywordflow">if</span> (lseek(fd, offset, SEEK_CUR) == (off_t)-1) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>  ssize_t len = write(fd, buf, count);</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>  <span class="keywordflow">if</span> (len &lt; 0) <span class="keywordflow">return</span> len;</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>  <span class="keywordflow">if</span> (lseek(fd, orig_offset, SEEK_SET) == (off_t)-1) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>  <span class="keywordflow">return</span> len;</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>}</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span><span class="preprocessor">#endif  </span><span class="comment">// _MSC_VER</span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span> </div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a569b19919e8d89c64fbe5d5209466b1a">  203</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="base_2logging_8cc.html#a569b19919e8d89c64fbe5d5209466b1a">GetHostName</a>(<span class="keywordtype">string</span>* hostname) {</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span><span class="preprocessor">#if !defined(_MSC_VER)</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>  <span class="keyword">struct </span>utsname buf;</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>  <span class="keywordflow">if</span> (0 != uname(&amp;buf)) {</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    <span class="comment">// ensure null termination on failure</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    *buf.nodename = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>  }</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>  *hostname = buf.nodename;</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span><span class="preprocessor">#else   </span><span class="comment">// _MSC_VER</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>  <span class="keywordtype">char</span> buf[MAX_COMPUTERNAME_LENGTH + 1];</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>  DWORD len = MAX_COMPUTERNAME_LENGTH + 1;</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>  <span class="keywordflow">if</span> (GetComputerNameA(buf, &amp;len)) {</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    *hostname = buf;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    hostname-&gt;clear();</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>  }</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span><span class="preprocessor">#endif  </span><span class="comment">// _MSC_VER</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>}</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span><span class="comment">// Returns true iff terminal supports using colors in output.</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#aafcef7778dce8f10842b9fa8f1266639">  223</a></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="base_2logging_8cc.html#aafcef7778dce8f10842b9fa8f1266639">TerminalSupportsColor</a>() {</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>  <span class="keywordtype">bool</span> term_supports_color = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span><span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>  <span class="comment">// on Windows TERM variable is usually not set, but the console does</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>  <span class="comment">// support colors.</span></div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>  term_supports_color = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>  <span class="comment">// On non-Windows platforms, we rely on the TERM variable.</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>  <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> term = getenv(<span class="stringliteral">&quot;TERM&quot;</span>);</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>  <span class="keywordflow">if</span> (term != <span class="keyword">nullptr</span> &amp;&amp; term[0] != <span class="charliteral">&#39;\0&#39;</span>) {</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    term_supports_color =</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>        !strcmp(term, <span class="stringliteral">&quot;xterm&quot;</span>) || !strcmp(term, <span class="stringliteral">&quot;xterm-color&quot;</span>) ||</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        !strcmp(term, <span class="stringliteral">&quot;xterm-256color&quot;</span>) || !strcmp(term, <span class="stringliteral">&quot;screen-256color&quot;</span>) ||</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        !strcmp(term, <span class="stringliteral">&quot;konsole&quot;</span>) || !strcmp(term, <span class="stringliteral">&quot;konsole-16color&quot;</span>) ||</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>        !strcmp(term, <span class="stringliteral">&quot;konsole-256color&quot;</span>) || !strcmp(term, <span class="stringliteral">&quot;screen&quot;</span>) ||</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>        !strcmp(term, <span class="stringliteral">&quot;linux&quot;</span>) || !strcmp(term, <span class="stringliteral">&quot;cygwin&quot;</span>);</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>  }</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>  <span class="keywordflow">return</span> term_supports_color;</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>}</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span> </div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacegoogle.html">google</a> {</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno"><a class="line" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">  246</a></span><span class="keyword">enum</span> <a class="code hl_enumeration" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">GLogColor</a> { <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">COLOR_DEFAULT</a>, <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a592503b9434c1e751a92f3fc536d7950">COLOR_RED</a>, <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81acfa9d8bbffc418447ed826f286abca02">COLOR_GREEN</a>, <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81ab03862907066c68204ee9df1ee04aa29">COLOR_YELLOW</a> };</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span> </div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a1d1a2cfb1e7c80c14baccc762df3df3f">  248</a></span><span class="keyword">static</span> <a class="code hl_enumeration" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">GLogColor</a> <a class="code hl_function" href="namespacegoogle.html#a1d1a2cfb1e7c80c14baccc762df3df3f">SeverityToColor</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity) {</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>  assert(severity &gt;= 0 &amp;&amp; severity &lt; <a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>);</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>  <a class="code hl_enumeration" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">GLogColor</a> color = <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">COLOR_DEFAULT</a>;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>  <span class="keywordflow">switch</span> (severity) {</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    <span class="keywordflow">case</span> <a class="code hl_variable" href="namespacegoogle.html#af3c2db675e75f2074724f754d3cf7885">GLOG_INFO</a>:</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>      color = <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">COLOR_DEFAULT</a>;</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <span class="keywordflow">case</span> <a class="code hl_variable" href="namespacegoogle.html#a060366d0d0ff85fce6de37e905fea54c">GLOG_WARNING</a>:</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>      color = <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81ab03862907066c68204ee9df1ee04aa29">COLOR_YELLOW</a>;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    <span class="keywordflow">case</span> <a class="code hl_variable" href="namespacegoogle.html#aec61ff6c741224bbf1d230d40449aa30">GLOG_ERROR</a>:</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    <span class="keywordflow">case</span> <a class="code hl_variable" href="namespacegoogle.html#ac452c4c8ec1cbc24dd074e260aa0b617">GLOG_FATAL</a>:</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>      color = <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a592503b9434c1e751a92f3fc536d7950">COLOR_RED</a>;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>      <span class="comment">// should never get here.</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>      assert(<span class="keyword">false</span>);</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>  }</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>  <span class="keywordflow">return</span> color;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>}</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span> </div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span><span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span> </div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span><span class="comment">// Returns the character attribute for the given color.</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span><span class="keyword">static</span> WORD GetColorAttribute(<a class="code hl_enumeration" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">GLogColor</a> color) {</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>  <span class="keywordflow">switch</span> (color) {</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a592503b9434c1e751a92f3fc536d7950">COLOR_RED</a>:</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>      <span class="keywordflow">return</span> FOREGROUND_RED;</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81acfa9d8bbffc418447ed826f286abca02">COLOR_GREEN</a>:</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>      <span class="keywordflow">return</span> FOREGROUND_GREEN;</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81ab03862907066c68204ee9df1ee04aa29">COLOR_YELLOW</a>:</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>      <span class="keywordflow">return</span> FOREGROUND_RED | FOREGROUND_GREEN;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>  }</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>}</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span><span class="preprocessor">#else  </span><span class="comment">// _MSC_VER</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span><span class="comment">// Returns the ANSI color code for the given color.</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a81ebea6ae08028ef54b3df0d8bd6b0af">  288</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_function" href="namespacegoogle.html#a81ebea6ae08028ef54b3df0d8bd6b0af">GetAnsiColorCode</a>(<a class="code hl_enumeration" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">GLogColor</a> color) {</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>  <span class="keywordflow">switch</span> (color) {</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a592503b9434c1e751a92f3fc536d7950">COLOR_RED</a>:</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;1&quot;</span>;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81acfa9d8bbffc418447ed826f286abca02">COLOR_GREEN</a>:</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;2&quot;</span>;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81ab03862907066c68204ee9df1ee04aa29">COLOR_YELLOW</a>:</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;3&quot;</span>;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">COLOR_DEFAULT</a>:</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>  }</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;  <span class="comment">// stop warning about return type.</span></div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>}</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span> </div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span><span class="preprocessor">#endif  </span><span class="comment">// !_MSC_VER</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span> </div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span><span class="comment">// Safely get max_log_size, overriding to 1 if it somehow gets defined as 0</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno"><a class="line" href="namespacegoogle.html#aab2b99122a259ede199e6872c7f367bf">  305</a></span><span class="keyword">static</span> int32_t <a class="code hl_function" href="namespacegoogle.html#aab2b99122a259ede199e6872c7f367bf">MaxLogSize</a>() {</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>  <span class="keywordflow">return</span> (absl::GetFlag(FLAGS_max_log_size) &gt; 0</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>              ? absl::GetFlag(FLAGS_max_log_size)</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>              : 1);</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>}</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span> </div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span><span class="comment">// An arbitrary limit on the length of a single log message.  This</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span><span class="comment">// is so that streaming can be done more efficiently.</span></div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span><span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="classgoogle_1_1_log_message.html#ab56904740774e794fb63d946debb899f">LogMessage::kMaxLogMessageLen</a> = 30000;</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html">  315</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structgoogle_1_1_log_message_1_1_log_message_data.html">LogMessage::LogMessageData</a> {</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>  <a class="code hl_function" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aefae0ad3d1d866302a3d246ad4f03a32">LogMessageData</a>();</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span> </div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a689d7ba2721c7e7935b5501a83948154">  318</a></span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a689d7ba2721c7e7935b5501a83948154">preserved_errno_</a>;  <span class="comment">// preserved errno</span></div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>  <span class="comment">// Buffer space; contains complete message text.</span></div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">  320</a></span>  <span class="keywordtype">char</span> <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[<a class="code hl_variable" href="classgoogle_1_1_log_message.html#ab56904740774e794fb63d946debb899f">LogMessage::kMaxLogMessageLen</a> + 1];</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad619d07eb80a509b28505be39cc07532">  321</a></span>  <a class="code hl_class" href="classgoogle_1_1_log_message_1_1_log_stream.html">LogStream</a> <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad619d07eb80a509b28505be39cc07532">stream_</a>;</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">  322</a></span>  <span class="keywordtype">char</span> <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>;  <span class="comment">// What level is this LogMessage logged at?</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">  323</a></span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">line_</a>;       <span class="comment">// line number where logging call is.</span></div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a9d8241f1d596b53f65ba985cc108a013">  324</a></span>  void (<a class="code hl_class" href="classgoogle_1_1_log_message.html">LogMessage</a>::*<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a9d8241f1d596b53f65ba985cc108a013">send_method_</a>)();  <span class="comment">// Call this in destructor to send</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>  <span class="keyword">union </span>{  <span class="comment">// At most one of these is used: union to keep the size low.</span></div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a583ab3eb7226577fd24179c256425f98">  326</a></span>    <a class="code hl_class" href="classgoogle_1_1_log_sink.html">LogSink</a>* <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a583ab3eb7226577fd24179c256425f98">sink_</a>;                     <span class="comment">// null or sink to send message to</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#abfdae073349de1c469785d4be5d262a6">  327</a></span>    std::vector&lt;std::string&gt;* <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#abfdae073349de1c469785d4be5d262a6">outvec_</a>;  <span class="comment">// null or vector to push message onto</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a28966ba90809d1189db93cf6d8d7b3c2">  328</a></span>    std::string* <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a28966ba90809d1189db93cf6d8d7b3c2">message_</a>;              <span class="comment">// null or string to write message into</span></div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>  };</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1b911b3abca8051fd7441126a95a0254">  330</a></span>  time_t <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1b911b3abca8051fd7441126a95a0254">timestamp_</a>;            <span class="comment">// Time of creation of LogMessage</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88d5e4f1bf38dcfa744f181b569552d8">  331</a></span>  struct ::tm <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88d5e4f1bf38dcfa744f181b569552d8">tm_time_</a>;         <span class="comment">// Time of creation of LogMessage</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">  332</a></span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>;     <span class="comment">// # of chars of prefix in this message</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">  333</a></span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a>;     <span class="comment">// # of chars of msg to send to log</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#af7f329ac8ea043562147dbaa396d4255">  334</a></span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#af7f329ac8ea043562147dbaa396d4255">num_chars_to_syslog_</a>;  <span class="comment">// # of chars of msg to send to syslog</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">  335</a></span>  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">basename_</a>;        <span class="comment">// basename of file that called LOG</span></div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">  336</a></span>  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">fullname_</a>;        <span class="comment">// fullname of file that called LOG</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa0c333addf51e66c448c4be972b8974f">  337</a></span>  <span class="keywordtype">bool</span> <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa0c333addf51e66c448c4be972b8974f">has_been_flushed_</a>;       <span class="comment">// false =&gt; data has not been flushed</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88e3e7b14a7388ff3771f7181732570c">  338</a></span>  <span class="keywordtype">bool</span> <a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88e3e7b14a7388ff3771f7181732570c">first_fatal_</a>;            <span class="comment">// true =&gt; this was first fatal msg</span></div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span> </div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>  <a class="code hl_function" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aefae0ad3d1d866302a3d246ad4f03a32">LogMessageData</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structgoogle_1_1_log_message_1_1_log_message_data.html">LogMessageData</a>&amp;);</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>  <span class="keywordtype">void</span> operator=(<span class="keyword">const</span> <a class="code hl_struct" href="structgoogle_1_1_log_message_1_1_log_message_data.html">LogMessageData</a>&amp;);</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>};</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span> </div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span><span class="comment">// A absl::Mutex that allows only one thread to log at a time, to keep things</span></div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span><span class="comment">// from getting jumbled.  Some other very uncommon logging operations (like</span></div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span><span class="comment">// changing the destination file for log messages of a given severity) also</span></div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span><span class="comment">// lock this absl::Mutex.  Please be sure that anybody who might possibly need</span></div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span><span class="comment">// to lock it does so.</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">  350</a></span><span class="keyword">static</span> absl::Mutex <a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span> </div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span><span class="comment">// Number of messages sent at each severity.  Under log_mutex.</span></div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>int64_t LogMessage::num_messages_[<a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>] = {0, 0, 0, 0};</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span> </div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span><span class="comment">// Globally disable log writing (if disk is full)</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno"><a class="line" href="namespacegoogle.html#adec21a5ba9511e6a6b2c09b0dbdf5fb8">  356</a></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="namespacegoogle.html#adec21a5ba9511e6a6b2c09b0dbdf5fb8">stop_writing</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span> </div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">  358</a></span><span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> <a class="code hl_variable" href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">LogSeverityNames</a>[<a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>] = {<span class="stringliteral">&quot;INFO&quot;</span>, <span class="stringliteral">&quot;WARNING&quot;</span>,</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>                                                      <span class="stringliteral">&quot;ERROR&quot;</span>, <span class="stringliteral">&quot;FATAL&quot;</span>};</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span> </div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span><span class="comment">// Has the user called SetExitOnDFatal(true)?</span></div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a5093faa29d594a5fe593decdd4de8427">  362</a></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="namespacegoogle.html#a5093faa29d594a5fe593decdd4de8427">exit_on_dfatal</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a60193b592b1a0e1d930682ade407ad63">  364</a></span><span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_function" href="namespacegoogle.html#a60193b592b1a0e1d930682ade407ad63">GetLogSeverityName</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity) {</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">LogSeverityNames</a>[severity];</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>}</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span> </div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno"><a class="line" href="classgoogle_1_1base_1_1_logger.html#a0d77f27eb95c246d555904aaf08018eb">  368</a></span><a class="code hl_function" href="classgoogle_1_1base_1_1_logger.html#a0d77f27eb95c246d555904aaf08018eb">base::Logger::~Logger</a>() {}</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span> </div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span> </div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span><span class="comment">// Encapsulates all file-system related state</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span><span class="keyword">class </span>LogFileObject : <span class="keyword">public</span> <a class="code hl_class" href="classgoogle_1_1base_1_1_logger.html">base::Logger</a> {</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>  LogFileObject(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename);</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>  ~LogFileObject();</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span> </div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> Write(<span class="keywordtype">bool</span> force_flush,  <span class="comment">// Should we force a flush here?</span></div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>                     time_t timestamp,  <span class="comment">// Timestamp for this entry</span></div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>                     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">int</span> message_len);</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span> </div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>  <span class="comment">// Configuration options</span></div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>  <span class="keywordtype">void</span> SetBasename(<span class="keyword">const</span> <span class="keywordtype">char</span>* basename);</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>  <span class="keywordtype">void</span> SetExtension(<span class="keyword">const</span> <span class="keywordtype">char</span>* ext);</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>  <span class="keywordtype">void</span> SetSymlinkBasename(<span class="keyword">const</span> <span class="keywordtype">char</span>* symlink_basename);</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span> </div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>  <span class="comment">// Normal flushing routine</span></div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> Flush();</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span> </div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>  <span class="comment">// It is the actual file length for the system loggers,</span></div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>  <span class="comment">// i.e., INFO, ERROR, etc.</span></div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>  <span class="keyword">virtual</span> uint32_t LogSize() {</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>    absl::MutexLock l(&amp;lock_);</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <span class="keywordflow">return</span> file_length_;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>  }</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span> </div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>  <span class="comment">// Internal flush routine.  Exposed so that FlushLogFilesUnsafe()</span></div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>  <span class="comment">// can avoid grabbing a lock.  Usually Flush() calls it after</span></div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>  <span class="comment">// acquiring lock_.</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>  <span class="keywordtype">void</span> FlushUnlocked();</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span> </div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>  <span class="keyword">static</span> <span class="keyword">const</span> uint32_t kRolloverAttemptFrequency = 0x20;</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span> </div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>  absl::Mutex lock_;</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>  <span class="keywordtype">bool</span> base_filename_selected_;</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>  <span class="keywordtype">string</span> base_filename_;</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>  <span class="keywordtype">string</span> symlink_basename_;</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>  <span class="keywordtype">string</span> filename_extension_;  <span class="comment">// option users can specify (eg to add port#)</span></div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>  FILE* file_;</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>  <a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity_;</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>  uint32_t bytes_since_flush_;</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>  uint32_t dropped_mem_length_;</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>  uint32_t file_length_;</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rollover_attempt_;</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>  int64_t next_flush_time_;  <span class="comment">// cycle count at which to flush log</span></div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span> </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>  <span class="comment">// Actually create a logfile using the value of base_filename_ and the</span></div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>  <span class="comment">// supplied argument time_pid_string</span></div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>  <span class="comment">// REQUIRES: lock_ is held</span></div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>  <span class="keywordtype">bool</span> CreateLogfile(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; time_pid_string);</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>};</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span> </div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span> </div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html">  426</a></span><span class="keyword">class </span><a class="code hl_class" href="classgoogle_1_1_log_destination.html">LogDestination</a> {</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a5f3880ffd53f58af933af4f226389744">  428</a></span>  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code hl_class" href="classgoogle_1_1_log_message.html">LogMessage</a>;</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>  <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#afe9db80601fc823372a09c832a802529">ReprintFatalMessage</a>();</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a23a86cce53e6acd575c79014d8de7c96">  430</a></span>  <span class="keyword">friend</span> <a class="code hl_class" href="classgoogle_1_1base_1_1_logger.html">base::Logger</a>* <a class="code hl_function" href="namespacegoogle_1_1base.html#a50d33a682377552803e3bda0568358ad">base::GetLogger</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a>);</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a276f8876567420ce2cc575bf2f6bad46">  431</a></span>  <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle_1_1base.html#a754a333359f5c02714711bb4e01417b0">base::SetLogger</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a>, <a class="code hl_class" href="classgoogle_1_1base_1_1_logger.html">base::Logger</a>*);</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span> </div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>  <span class="comment">// These methods are just forwarded to by their global versions.</span></div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a52b012381ca169c60f696aeeb54a9d77">SetLogDestination</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>                                <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename);</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a9800270f9c517ac3c4f1a69d2d79d1ff">SetLogSymlink</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* symlink_basename);</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#aac637fad473b5677c3f94fb8372257b0">AddLogSink</a>(<a class="code hl_class" href="classgoogle_1_1_log_sink.html">LogSink</a>* destination);</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#afb08de7bff9aaa916db76a47bcd9077a">RemoveLogSink</a>(<a class="code hl_class" href="classgoogle_1_1_log_sink.html">LogSink</a>* destination);</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a45f04ff1beb3af3882c99d3b63616dde">SetLogFilenameExtension</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* filename_extension);</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a57ac69eb66761ee6406d5e4a3f33ff87">SetStderrLogging</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> min_severity);</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#ab90a343a65dff8ffc12a5133fd8dcbaf">LogToStderr</a>();</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>  <span class="comment">// Flush all log files that are at least at the given severity level</span></div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#ad0cffd6498cbf357c5f3c1b7c3683c84">FlushLogFiles</a>(<span class="keywordtype">int</span> min_severity);</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a27fd092cfd7530a45451a8e0b0fcdf8e">FlushLogFilesUnsafe</a>(<span class="keywordtype">int</span> min_severity);</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span> </div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>  <span class="comment">// we set the maximum size of our packet to be 1400, the logic being</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>  <span class="comment">// to prevent fragmentation.</span></div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>  <span class="comment">// Really this number is arbitrary.</span></div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a522dcf1d8b631c3910fb1d594b9093ee">  449</a></span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kNetworkBytes = 1400;</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span> </div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; hostname();</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#ad432ed153c840101edfd4af74510c846">  452</a></span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span>&amp; <a class="code hl_function" href="classgoogle_1_1_log_destination.html#ad432ed153c840101edfd4af74510c846">terminal_supports_color</a>() {</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    <span class="keywordflow">return</span> terminal_supports_color_;</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>  }</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span> </div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> DeleteLogDestinations();</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span> </div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>  <a class="code hl_class" href="classgoogle_1_1_log_destination.html">LogDestination</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename);</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>  <a class="code hl_class" href="classgoogle_1_1_log_destination.html">~LogDestination</a>() {}</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span> </div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>  <span class="comment">// Take a log message of a particular severity and log it to stderr</span></div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>  <span class="comment">// iff it&#39;s of a high enough severity to deserve it.</span></div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> MaybeLogToStderr(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>,</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>                               <span class="keywordtype">size_t</span> len);</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span> </div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>  <span class="comment">// Take a log message of a particular severity and log it to a file</span></div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>  <span class="comment">// iff the base filename is not &quot;&quot; (which means &quot;don&#39;t log to me&quot;)</span></div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> MaybeLogToLogfile(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, time_t timestamp,</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>                                <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">size_t</span> len);</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>  <span class="comment">// Take a log message of a particular severity and log it to the file</span></div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>  <span class="comment">// for that severity and also for all files with severity less than</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>  <span class="comment">// this severity.</span></div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> LogToAllLogfiles(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, time_t timestamp,</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>                               <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">size_t</span> len);</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span> </div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>  <span class="comment">// Send logging info to all registered sinks.</span></div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> LogToSinks(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* full_filename,</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>                         <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename, <span class="keywordtype">int</span> line,</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>                         <span class="keyword">const</span> struct ::tm* tm_time, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>,</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>                         <span class="keywordtype">size_t</span> message_len);</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span> </div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>  <span class="comment">// Wait for all registered sinks via WaitTillSent</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>  <span class="comment">// including the optional one in &quot;data&quot;.</span></div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>  <span class="keyword">static</span> <span class="keywordtype">void</span> WaitForSinks(LogMessage::LogMessageData* data);</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span> </div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>  <span class="keyword">static</span> LogDestination* log_destination(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity);</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span> </div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>  LogFileObject fileobject_;</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>  base::Logger* logger_;  <span class="comment">// Either &amp;fileobject_, or wrapper around it</span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span> </div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>  <span class="keyword">static</span> LogDestination* log_destinations_[<a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>];</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>  <span class="keyword">static</span> <span class="keywordtype">string</span> addresses_;</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>  <span class="keyword">static</span> <span class="keywordtype">string</span> hostname_;</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>  <span class="keyword">static</span> <span class="keywordtype">bool</span> terminal_supports_color_;</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span> </div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>  <span class="comment">// arbitrary global logging destinations.</span></div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>  <span class="keyword">static</span> vector&lt;LogSink*&gt;* sinks_;</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span> </div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>  <span class="comment">// Protects the vector sinks_,</span></div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>  <span class="comment">// but not the LogSink objects its elements reference.</span></div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>  <span class="keyword">static</span> absl::Mutex sink_mutex_;</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span> </div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>  <span class="comment">// Disallow</span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>  LogDestination(<span class="keyword">const</span> LogDestination&amp;);</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>  LogDestination&amp; operator=(<span class="keyword">const</span> LogDestination&amp;);</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>};</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span> </div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span><span class="keywordtype">string</span> LogDestination::addresses_;  <span class="comment">// NOLINT</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span><span class="keywordtype">string</span> LogDestination::hostname_;   <span class="comment">// NOLINT</span></div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span> </div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>vector&lt;LogSink*&gt;* LogDestination::sinks_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>absl::Mutex LogDestination::sink_mutex_;</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span><span class="keywordtype">bool</span> LogDestination::terminal_supports_color_ = <a class="code hl_function" href="base_2logging_8cc.html#aafcef7778dce8f10842b9fa8f1266639">TerminalSupportsColor</a>();</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span> </div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span><span class="comment">/* static */</span></div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#ae015332540cd90572adfe5e5588227c6">  517</a></span><span class="keyword">const</span> <span class="keywordtype">string</span>&amp; <a class="code hl_function" href="classgoogle_1_1_log_destination.html#ae015332540cd90572adfe5e5588227c6">LogDestination::hostname</a>() {</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>  <span class="keywordflow">if</span> (hostname_.empty()) {</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    <a class="code hl_function" href="base_2logging_8cc.html#a569b19919e8d89c64fbe5d5209466b1a">GetHostName</a>(&amp;hostname_);</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>    <span class="keywordflow">if</span> (hostname_.empty()) {</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>      hostname_ = <span class="stringliteral">&quot;(unknown)&quot;</span>;</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>    }</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>  }</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>  <span class="keywordflow">return</span> hostname_;</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>}</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span> </div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>LogDestination::LogDestination(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename)</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>    : fileobject_(severity, base_filename), logger_(&amp;fileobject_) {}</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span> </div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a1bc1ccffe41da1564b1bec29b08fc4e1">  530</a></span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a1bc1ccffe41da1564b1bec29b08fc4e1">LogDestination::FlushLogFilesUnsafe</a>(<span class="keywordtype">int</span> min_severity) {</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>  <span class="comment">// assume we have the log_mutex or we simply don&#39;t care</span></div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>  <span class="comment">// about it</span></div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = min_severity; i &lt; <a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>; i++) {</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>    <a class="code hl_class" href="classgoogle_1_1_log_destination.html">LogDestination</a>* log = log_destinations_[i];</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    <span class="keywordflow">if</span> (log != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>      <span class="comment">// Flush the base fileobject_ logger directly instead of going</span></div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>      <span class="comment">// through any wrappers to reduce chance of deadlock.</span></div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>      log-&gt;fileobject_.FlushUnlocked();</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    }</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>  }</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>}</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span> </div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#ae0bab6f35a5369aef2554e5569fffea6">  543</a></span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_destination.html#ae0bab6f35a5369aef2554e5569fffea6">LogDestination::FlushLogFiles</a>(<span class="keywordtype">int</span> min_severity) {</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>  <span class="comment">// Prevent any subtle race conditions by wrapping a absl::Mutex lock around</span></div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>  <span class="comment">// all this stuff.</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>  absl::MutexLock l(&amp;<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = min_severity; i &lt; <a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>; i++) {</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>    <a class="code hl_class" href="classgoogle_1_1_log_destination.html">LogDestination</a>* log = log_destination(i);</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>    <span class="keywordflow">if</span> (log != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>      log-&gt;logger_-&gt;<a class="code hl_function" href="classgoogle_1_1base_1_1_logger.html#aff3353d816df11999ea7a0804b76e0c1">Flush</a>();</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    }</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>  }</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>}</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span> </div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a985aad81e2a79fbd14719099bf9f788d">  555</a></span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a985aad81e2a79fbd14719099bf9f788d">LogDestination::SetLogDestination</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>                                              <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename) {</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>  assert(severity &gt;= 0 &amp;&amp; severity &lt; <a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>);</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>  <span class="comment">// Prevent any subtle race conditions by wrapping a absl::Mutex lock around</span></div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>  <span class="comment">// all this stuff.</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>  absl::MutexLock l(&amp;<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>  log_destination(severity)-&gt;fileobject_.SetBasename(base_filename);</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>}</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span> </div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a67f05b74958c4c9f2a0b39df9581bf1c">  564</a></span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a67f05b74958c4c9f2a0b39df9581bf1c">LogDestination::SetLogSymlink</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>                                          <span class="keyword">const</span> <span class="keywordtype">char</span>* symlink_basename) {</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>  <a class="code hl_define" href="base_2logging_8h.html#a7cc25402ecd7591b4c39934dd656b1f9">CHECK_GE</a>(severity, 0);</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>  <a class="code hl_define" href="base_2logging_8h.html#a4bd2e815ca2f702a4b6aa744b1ff3b82">CHECK_LT</a>(severity, <a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>);</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>  absl::MutexLock l(&amp;<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>  log_destination(severity)-&gt;fileobject_.SetSymlinkBasename(symlink_basename);</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>}</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span> </div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a043cd6b97be276f99eea8f0ea3ece475">  572</a></span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a043cd6b97be276f99eea8f0ea3ece475">LogDestination::AddLogSink</a>(<a class="code hl_class" href="classgoogle_1_1_log_sink.html">LogSink</a>* destination) {</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>  <span class="comment">// Prevent any subtle race conditions by wrapping a absl::Mutex lock around</span></div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>  <span class="comment">// all this stuff.</span></div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>  absl::MutexLock l(&amp;sink_mutex_);</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>  <span class="keywordflow">if</span> (!sinks_) sinks_ = <span class="keyword">new</span> vector&lt;LogSink*&gt;;</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>  sinks_-&gt;push_back(destination);</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>}</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span> </div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a141a4160dcfa07d47161821c7e143236">  580</a></span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a141a4160dcfa07d47161821c7e143236">LogDestination::RemoveLogSink</a>(<a class="code hl_class" href="classgoogle_1_1_log_sink.html">LogSink</a>* destination) {</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>  <span class="comment">// Prevent any subtle race conditions by wrapping a absl::Mutex lock around</span></div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>  <span class="comment">// all this stuff.</span></div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>  absl::MutexLock l(&amp;sink_mutex_);</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>  <span class="comment">// This doesn&#39;t keep the sinks in order, but who cares?</span></div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>  <span class="keywordflow">if</span> (sinks_) {</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = sinks_-&gt;size() - 1; i &gt;= 0; i--) {</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>      <span class="keywordflow">if</span> ((*sinks_)[i] == destination) {</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>        (*sinks_)[i] = (*sinks_)[sinks_-&gt;size() - 1];</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>        sinks_-&gt;pop_back();</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>      }</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>    }</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>  }</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>}</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span> </div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a799e2628a1c44ccc1c3017ece67f41e7">  596</a></span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a799e2628a1c44ccc1c3017ece67f41e7">LogDestination::SetLogFilenameExtension</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* ext) {</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>  <span class="comment">// Prevent any subtle race conditions by wrapping a absl::Mutex lock around</span></div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>  <span class="comment">// all this stuff.</span></div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>  absl::MutexLock l(&amp;<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> severity = 0; severity &lt; <a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>; ++severity) {</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>    log_destination(severity)-&gt;fileobject_.SetExtension(ext);</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>  }</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>}</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span> </div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a189879d36ceaa7e619dcdf55c16f98b2">  605</a></span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a189879d36ceaa7e619dcdf55c16f98b2">LogDestination::SetStderrLogging</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> min_severity) {</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>  assert(min_severity &gt;= 0 &amp;&amp; min_severity &lt; <a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>);</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>  <span class="comment">// Prevent any subtle race conditions by wrapping a absl::Mutex lock around</span></div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>  <span class="comment">// all this stuff.</span></div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>  absl::MutexLock l(&amp;<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>  absl::SetFlag(&amp;FLAGS_stderrthreshold, min_severity);</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>}</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span> </div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a7d7631cb9c19962577211ac1a7a85c58">  613</a></span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a7d7631cb9c19962577211ac1a7a85c58">LogDestination::LogToStderr</a>() {</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>  <span class="comment">// *Don&#39;t* put this stuff in a absl::Mutex lock, since SetStderrLogging &amp;</span></div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>  <span class="comment">// SetLogDestination already do the locking!</span></div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>  <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a189879d36ceaa7e619dcdf55c16f98b2">SetStderrLogging</a>(0);  <span class="comment">// thus everything is &quot;also&quot; logged to stderr</span></div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>; ++i) {</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a985aad81e2a79fbd14719099bf9f788d">SetLogDestination</a>(i, <span class="stringliteral">&quot;&quot;</span>);  <span class="comment">// &quot;&quot; turns off logging to a logfile</span></div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>  }</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>}</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span> </div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a4f56829b020851f8919bdb557b6c10cf">  622</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a4f56829b020851f8919bdb557b6c10cf">ColoredWriteToStderr</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>,</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>                                 <span class="keywordtype">size_t</span> len) {</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>  <span class="keyword">const</span> <a class="code hl_enumeration" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">GLogColor</a> color = (<a class="code hl_function" href="classgoogle_1_1_log_destination.html#ad432ed153c840101edfd4af74510c846">LogDestination::terminal_supports_color</a>() &amp;&amp;</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>                           absl::GetFlag(FLAGS_colorlogtostderr))</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>                              ? <a class="code hl_function" href="namespacegoogle.html#a1d1a2cfb1e7c80c14baccc762df3df3f">SeverityToColor</a>(severity)</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>                              : <a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">COLOR_DEFAULT</a>;</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span> </div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>  <span class="comment">// Avoid using cerr from this module since we may get called during</span></div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>  <span class="comment">// exit code, and cerr may be partially or fully destroyed by then.</span></div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>  <span class="keywordflow">if</span> (<a class="code hl_enumvalue" href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">COLOR_DEFAULT</a> == color) {</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    fwrite(<a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len, 1, stderr);</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>  }</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span><span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>  <span class="keyword">const</span> HANDLE stderr_handle = GetStdHandle(STD_ERROR_HANDLE);</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span> </div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>  <span class="comment">// Gets the current text color.</span></div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>  CONSOLE_SCREEN_BUFFER_INFO buffer_info;</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>  GetConsoleScreenBufferInfo(stderr_handle, &amp;buffer_info);</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>  <span class="keyword">const</span> WORD old_color_attrs = buffer_info.wAttributes;</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span> </div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>  <span class="comment">// We need to flush the stream buffers into the console before each</span></div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>  <span class="comment">// SetConsoleTextAttribute call lest it affect the text that is already</span></div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>  <span class="comment">// printed but has not yet reached the console.</span></div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>  fflush(stderr);</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>  SetConsoleTextAttribute(stderr_handle,</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>                          GetColorAttribute(color) | FOREGROUND_INTENSITY);</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>  fwrite(<a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len, 1, stderr);</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>  fflush(stderr);</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>  <span class="comment">// Restores the text color.</span></div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>  SetConsoleTextAttribute(stderr_handle, old_color_attrs);</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span><span class="preprocessor">#else   </span><span class="comment">// !_MSC_VER</span></div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>  fprintf(stderr, <span class="stringliteral">&quot;\033[0;3%sm&quot;</span>, <a class="code hl_function" href="namespacegoogle.html#a81ebea6ae08028ef54b3df0d8bd6b0af">GetAnsiColorCode</a>(color));</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>  fwrite(<a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len, 1, stderr);</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>  fprintf(stderr, <span class="stringliteral">&quot;\033[m&quot;</span>);  <span class="comment">// Resets the terminal to default.</span></div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span><span class="preprocessor">#endif  </span><span class="comment">// !_MSC_VER</span></div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>}</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span> </div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno"><a class="line" href="namespacegoogle.html#ae4e2c48deea609dcb515b027460c3f5e">  660</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#ae4e2c48deea609dcb515b027460c3f5e">WriteToStderr</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">size_t</span> len) {</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>  <span class="comment">// Avoid using cerr from this module since we may get called during</span></div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>  <span class="comment">// exit code, and cerr may be partially or fully destroyed by then.</span></div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>  fwrite(<a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len, 1, stderr);</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>}</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span> </div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span><span class="keyword">inline</span> <span class="keywordtype">void</span> LogDestination::MaybeLogToStderr(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>                                             <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">size_t</span> len) {</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>  <span class="keywordflow">if</span> ((severity &gt;= absl::GetFlag(FLAGS_stderrthreshold)) ||</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>      absl::GetFlag(FLAGS_alsologtostderr)) {</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>    <a class="code hl_function" href="namespacegoogle.html#a4f56829b020851f8919bdb557b6c10cf">ColoredWriteToStderr</a>(severity, <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len);</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span><span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>    <span class="comment">// On Windows, also output to the debugger</span></div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>    ::OutputDebugStringA(<span class="keywordtype">string</span>(<a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len).c_str());</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>  }</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>}</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span> </div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span><span class="keyword">inline</span> <span class="keywordtype">void</span> LogDestination::MaybeLogToLogfile(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>                                              time_t timestamp,</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>                                              <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">size_t</span> len) {</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> should_flush = severity &gt; absl::GetFlag(FLAGS_logbuflevel);</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>  LogDestination* destination = log_destination(severity);</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>  destination-&gt;logger_-&gt;Write(should_flush, timestamp, <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len);</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>}</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span> </div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span><span class="keyword">inline</span> <span class="keywordtype">void</span> LogDestination::LogToAllLogfiles(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>                                             time_t timestamp,</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>                                             <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">size_t</span> len) {</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>  <span class="keywordflow">if</span> (absl::GetFlag(FLAGS_logtostderr)) {  <span class="comment">// global flag: never log to file</span></div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>    <a class="code hl_function" href="namespacegoogle.html#a4f56829b020851f8919bdb557b6c10cf">ColoredWriteToStderr</a>(severity, <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len);</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = severity; i &gt;= 0; --i)</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>      LogDestination::MaybeLogToLogfile(i, timestamp, <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, len);</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>  }</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>}</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span> </div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span><span class="keyword">inline</span> <span class="keywordtype">void</span> LogDestination::LogToSinks(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>                                       <span class="keyword">const</span> <span class="keywordtype">char</span>* full_filename,</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>                                       <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename, <span class="keywordtype">int</span> line,</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>                                       <span class="keyword">const</span> struct ::tm* tm_time,</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>                                       <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>,</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>                                       <span class="keywordtype">size_t</span> message_len) {</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>  absl::ReaderMutexLock l(&amp;sink_mutex_);</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>  <span class="keywordflow">if</span> (sinks_) {</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = sinks_-&gt;size() - 1; i &gt;= 0; i--) {</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>      (*sinks_)[i]-&gt;send(severity, full_filename, base_filename, line, tm_time,</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>                         <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, message_len);</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>    }</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>  }</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>}</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span> </div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span><span class="keyword">inline</span> <span class="keywordtype">void</span> LogDestination::WaitForSinks(LogMessage::LogMessageData* data) {</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>  absl::ReaderMutexLock l(&amp;sink_mutex_);</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>  <span class="keywordflow">if</span> (sinks_) {</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = sinks_-&gt;size() - 1; i &gt;= 0; i--) {</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>      (*sinks_)[i]-&gt;WaitTillSent();</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>    }</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>  }</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>  <span class="keyword">const</span> <span class="keywordtype">bool</span> send_to_sink =</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>      (data-&gt;send_method_ == &amp;LogMessage::SendToSink) ||</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>      (data-&gt;send_method_ == &amp;LogMessage::SendToSinkAndLog);</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>  <span class="keywordflow">if</span> (send_to_sink &amp;&amp; data-&gt;sink_ != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>    data-&gt;sink_-&gt;WaitTillSent();</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>  }</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>}</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span> </div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>LogDestination* LogDestination::log_destinations_[<a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>];</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span> </div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span><span class="keyword">inline</span> LogDestination* LogDestination::log_destination(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity) {</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>  assert(severity &gt;= 0 &amp;&amp; severity &lt; <a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>);</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>  <span class="keywordflow">if</span> (!log_destinations_[severity]) {</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>    log_destinations_[severity] = <span class="keyword">new</span> LogDestination(severity, <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>  }</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>  <span class="keywordflow">return</span> log_destinations_[severity];</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>}</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span> </div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#acf47431892ab03fd10d35def7d129a1a">  737</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_destination.html#acf47431892ab03fd10d35def7d129a1a">LogDestination::DeleteLogDestinations</a>() {</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> severity = 0; severity &lt; <a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>; ++severity) {</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>    <span class="keyword">delete</span> log_destinations_[severity];</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>    log_destinations_[severity] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>  }</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>  absl::MutexLock l(&amp;sink_mutex_);</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>  <span class="keyword">delete</span> sinks_;</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>  sinks_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>}</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span> </div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span><span class="keyword">namespace </span>{</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span> </div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>LogFileObject::LogFileObject(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename)</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>    : base_filename_selected_(base_filename != nullptr),</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>      base_filename_((base_filename != nullptr) ? base_filename : <span class="stringliteral">&quot;&quot;</span>),</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>      symlink_basename_(logging_internal::<a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#a43adca49683a5766aecb000c340e988c">ProgramInvocationShortName</a>()),</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>      filename_extension_(),</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>      file_(nullptr),</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>      severity_(severity),</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>      bytes_since_flush_(0),</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>      dropped_mem_length_(0),</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>      file_length_(0),</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>      rollover_attempt_(kRolloverAttemptFrequency - 1),</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>      next_flush_time_(0) {</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>  assert(severity &gt;= 0);</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>  assert(severity &lt; <a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>);</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>}</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span> </div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>LogFileObject::~LogFileObject() {</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>  absl::MutexLock l(&amp;lock_);</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>  <span class="keywordflow">if</span> (file_ != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>    fclose(file_);</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>    file_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>  }</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>}</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span> </div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span><span class="keywordtype">void</span> LogFileObject::SetBasename(<span class="keyword">const</span> <span class="keywordtype">char</span>* basename) {</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>  absl::MutexLock l(&amp;lock_);</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>  base_filename_selected_ = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>  <span class="keywordflow">if</span> (base_filename_ != basename) {</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>    <span class="comment">// Get rid of old log file since we are changing names</span></div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>    <span class="keywordflow">if</span> (file_ != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>      fclose(file_);</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>      file_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>      rollover_attempt_ = kRolloverAttemptFrequency - 1;</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>    }</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>    base_filename_ = basename;</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>  }</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>}</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span> </div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span><span class="keywordtype">void</span> LogFileObject::SetExtension(<span class="keyword">const</span> <span class="keywordtype">char</span>* ext) {</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>  absl::MutexLock l(&amp;lock_);</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>  <span class="keywordflow">if</span> (filename_extension_ != ext) {</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>    <span class="comment">// Get rid of old log file since we are changing names</span></div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>    <span class="keywordflow">if</span> (file_ != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>      fclose(file_);</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>      file_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>      rollover_attempt_ = kRolloverAttemptFrequency - 1;</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>    }</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>    filename_extension_ = ext;</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>  }</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>}</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span> </div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span><span class="keywordtype">void</span> LogFileObject::SetSymlinkBasename(<span class="keyword">const</span> <span class="keywordtype">char</span>* symlink_basename) {</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>  absl::MutexLock l(&amp;lock_);</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>  symlink_basename_ = symlink_basename;</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>}</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span> </div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span><span class="keywordtype">void</span> LogFileObject::Flush() {</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>  absl::MutexLock l(&amp;lock_);</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>  FlushUnlocked();</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>}</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span> </div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span><span class="keywordtype">void</span> LogFileObject::FlushUnlocked() {</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>  <span class="keywordflow">if</span> (file_ != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>    fflush(file_);</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>    bytes_since_flush_ = 0;</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>  }</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>  <span class="comment">// Figure out when we are due for another flush.</span></div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>  <span class="keyword">const</span> int64_t <a class="code hl_variable" href="constraint__solver_8cc.html#a395f613555f398dd389670bb4c2a4599">next</a> = (absl::GetFlag(FLAGS_logbufsecs) *</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>                        <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(1000000));  <span class="comment">// in usec</span></div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>  next_flush_time_ =</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>      <a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#af8454039845aad804abcbabf98b68b23">logging_internal::CycleClock_Now</a>() + <a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#aedfcd190e296797088cd453c4d6796a0">logging_internal::UsecToCycles</a>(<a class="code hl_variable" href="constraint__solver_8cc.html#a395f613555f398dd389670bb4c2a4599">next</a>);</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>}</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span> </div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span><span class="keywordtype">bool</span> LogFileObject::CreateLogfile(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; time_pid_string) {</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>  <span class="keywordtype">string</span> string_filename =</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>      base_filename_ + filename_extension_ + time_pid_string;</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>  <span class="keyword">const</span> <span class="keywordtype">char</span>* filename = string_filename.c_str();</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>  <span class="keywordtype">int</span> fd = open(filename, O_WRONLY | O_CREAT | O_EXCL,</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>                absl::GetFlag(FLAGS_logfile_mode));</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>  <span class="keywordflow">if</span> (fd == -1) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span><span class="preprocessor">#if !defined(_MSC_VER)</span></div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>  <span class="comment">// Mark the file close-on-exec. We don&#39;t really care if this fails</span></div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>  fcntl(fd, F_SETFD, FD_CLOEXEC);</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span> </div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>  file_ = fdopen(fd, <span class="stringliteral">&quot;a&quot;</span>);  <span class="comment">// Make a FILE*.</span></div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>  <span class="keywordflow">if</span> (file_ == <span class="keyword">nullptr</span>) {   <span class="comment">// Man, we&#39;re screwed!</span></div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>    close(fd);</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>    unlink(filename);  <span class="comment">// Erase the half-baked evidence: an unusable log file</span></div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>  }</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span> </div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>  <span class="comment">// We try to create a symlink called &lt;program_name&gt;.&lt;severity&gt;,</span></div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>  <span class="comment">// which is easier to use.  (Every time we create a new logfile,</span></div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>  <span class="comment">// we destroy the old symlink and create a new one, so it always</span></div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>  <span class="comment">// points to the latest logfile.)  If it fails, we&#39;re sad but it&#39;s</span></div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>  <span class="comment">// no error.</span></div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>  <span class="keywordflow">if</span> (!symlink_basename_.empty()) {</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>    <span class="comment">// take directory from filename</span></div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* slash = strrchr(filename, <a class="code hl_define" href="base_2logging_8cc.html#a256a5721249aa3309437212cc21a9fe4">PATH_SEPARATOR</a>);</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>    <span class="keyword">const</span> <span class="keywordtype">string</span> linkname =</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>        symlink_basename_ + <span class="charliteral">&#39;.&#39;</span> + <a class="code hl_variable" href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">LogSeverityNames</a>[severity_];</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>    <span class="keywordtype">string</span> linkpath;</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>    <span class="keywordflow">if</span> (slash)</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>      linkpath = string(filename, slash - filename + 1);  <span class="comment">// get dirname</span></div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>    linkpath += linkname;</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>    unlink(linkpath.c_str());  <span class="comment">// delete old one if it exists</span></div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span> </div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span><span class="preprocessor">#if !defined(_MSC_VER)</span></div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>    <span class="comment">// We must have unistd.h.</span></div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>    <span class="comment">// Make the symlink be relative (in the same dir) so that if the</span></div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    <span class="comment">// entire log directory gets relocated the link is still valid.</span></div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* linkdest = slash ? (slash + 1) : filename;</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>    <span class="keywordflow">if</span> (symlink(linkdest, linkpath.c_str()) != 0) {</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>      <span class="comment">// silently ignore failures</span></div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>    }</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span> </div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>    <span class="comment">// Make an additional link to the log file in a place specified by</span></div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>    <span class="comment">// absl::GetFlag(FLAGS_log_link), if indicated</span></div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>    <span class="keywordflow">if</span> (!absl::GetFlag(FLAGS_log_link).empty()) {</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>      linkpath = absl::GetFlag(FLAGS_log_link) + <span class="stringliteral">&quot;/&quot;</span> + linkname;</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>      unlink(linkpath.c_str());  <span class="comment">// delete old one if it exists</span></div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>      <span class="keywordflow">if</span> (symlink(filename, linkpath.c_str()) != 0) {</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>        <span class="comment">// silently ignore failures</span></div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>      }</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>    }</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span><span class="preprocessor">#endif  </span><span class="comment">// !_MSC_VER</span></div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>  }</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span> </div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// Everything worked</span></div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>}</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span> </div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span><span class="keywordtype">void</span> LogFileObject::Write(<span class="keywordtype">bool</span> force_flush, time_t timestamp,</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>                          <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, <span class="keywordtype">int</span> message_len) {</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>  absl::MutexLock l(&amp;lock_);</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span> </div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>  <span class="comment">// We don&#39;t log if the base_name_ is &quot;&quot; (which means &quot;don&#39;t write&quot;)</span></div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>  <span class="keywordflow">if</span> (base_filename_selected_ &amp;&amp; base_filename_.empty()) {</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>  }</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span> </div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>  <span class="keywordflow">if</span> (<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(file_length_ &gt;&gt; 20) &gt;= <a class="code hl_function" href="namespacegoogle.html#aab2b99122a259ede199e6872c7f367bf">MaxLogSize</a>()) {</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>    <span class="keywordflow">if</span> (file_ != <span class="keyword">nullptr</span>) fclose(file_);</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>    file_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>    file_length_ = bytes_since_flush_ = dropped_mem_length_ = 0;</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>    rollover_attempt_ = kRolloverAttemptFrequency - 1;</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>  }</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span> </div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>  <span class="comment">// If there&#39;s no destination file, make one before outputting</span></div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>  <span class="keywordflow">if</span> (file_ == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>    <span class="comment">// Try to rollover the log file every 32 log messages.  The only time</span></div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>    <span class="comment">// this could matter would be when we have trouble creating the log</span></div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>    <span class="comment">// file.  If that happens, we&#39;ll lose lots of log messages, of course!</span></div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>    <span class="keywordflow">if</span> (++rollover_attempt_ != kRolloverAttemptFrequency) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>    rollover_attempt_ = 0;</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span> </div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>    struct ::tm tm_time;</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>    localtime_r(&amp;timestamp, &amp;tm_time);</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span> </div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>    <span class="comment">// The logfile&#39;s filename will have the date/time &amp; pid in it</span></div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>    ostringstream time_pid_stream;</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>    time_pid_stream.fill(<span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>    time_pid_stream &lt;&lt; 1900 + tm_time.tm_year &lt;&lt; setw(2) &lt;&lt; 1 + tm_time.tm_mon</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>                    &lt;&lt; setw(2) &lt;&lt; tm_time.tm_mday &lt;&lt; <span class="charliteral">&#39;-&#39;</span> &lt;&lt; setw(2)</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>                    &lt;&lt; tm_time.tm_hour &lt;&lt; setw(2) &lt;&lt; tm_time.tm_min &lt;&lt; setw(2)</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>                    &lt;&lt; tm_time.tm_sec &lt;&lt; <span class="charliteral">&#39;.&#39;</span></div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>                    &lt;&lt; <a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#ac6be87e218241680245d9fac1b530ad4">logging_internal::GetMainThreadPid</a>();</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>    <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; time_pid_string = time_pid_stream.str();</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span> </div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>    <span class="keywordflow">if</span> (base_filename_selected_) {</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>      <span class="keywordflow">if</span> (!CreateLogfile(time_pid_string)) {</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>        perror(<span class="stringliteral">&quot;Could not create log file&quot;</span>);</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>        fprintf(stderr, <span class="stringliteral">&quot;COULD NOT CREATE LOGFILE &#39;%s&#39;!\n&quot;</span>,</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>                time_pid_string.c_str());</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>      }</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>      <span class="comment">// If no base filename for logs of this severity has been set, use a</span></div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>      <span class="comment">// default base filename of</span></div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>      <span class="comment">// &quot;&lt;program name&gt;.&lt;hostname&gt;.&lt;user name&gt;.log.&lt;severity level&gt;.&quot;.  So</span></div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>      <span class="comment">// logfiles will have names like</span></div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>      <span class="comment">// webserver.examplehost.root.log.INFO.19990817-150000.4354, where</span></div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>      <span class="comment">// 19990817 is a date (1999 August 17), 150000 is a time (15:00:00),</span></div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>      <span class="comment">// and 4354 is the pid of the logging process.  The date &amp; time reflect</span></div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>      <span class="comment">// when the file was created for output.</span></div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>      <span class="comment">//</span></div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>      <span class="comment">// Where does the file get put?  Successively try the directories</span></div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>      <span class="comment">// &quot;/tmp&quot;, and &quot;.&quot;</span></div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>      <span class="keywordtype">string</span> stripped_filename(<a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#a43adca49683a5766aecb000c340e988c">logging_internal::ProgramInvocationShortName</a>());</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>      <span class="keywordtype">string</span> hostname;</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>      <a class="code hl_function" href="base_2logging_8cc.html#a569b19919e8d89c64fbe5d5209466b1a">GetHostName</a>(&amp;hostname);</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span> </div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>      <span class="keywordtype">string</span> uidname = <a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#a524ba2b8ce15ad01369c230545fc3ec6">logging_internal::MyUserName</a>();</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>      <span class="comment">// We should not call CHECK() here because this function can be</span></div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>      <span class="comment">// called after holding on to log_mutex. We don&#39;t want to</span></div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>      <span class="comment">// attempt to hold on to the same absl::Mutex, and get into a</span></div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>      <span class="comment">// deadlock. Simply use a name like invalid-user.</span></div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>      <span class="keywordflow">if</span> (uidname.empty()) uidname = <span class="stringliteral">&quot;invalid-user&quot;</span>;</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span> </div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>      stripped_filename = stripped_filename + <span class="charliteral">&#39;.&#39;</span> + hostname + <span class="charliteral">&#39;.&#39;</span> + uidname +</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>                          <span class="stringliteral">&quot;.log.&quot;</span> + <a class="code hl_variable" href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">LogSeverityNames</a>[severity_] + <span class="charliteral">&#39;.&#39;</span>;</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>      <span class="comment">// We&#39;re going to (potentially) try to put logs in several different dirs</span></div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>      <span class="keyword">const</span> vector&lt;string&gt;&amp; log_dirs = <a class="code hl_function" href="namespacegoogle.html#a9145952db85676dbaf27080ab7173b97">GetLoggingDirectories</a>();</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span> </div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>      <span class="comment">// Go through the list of dirs, and try to create the log file in each</span></div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>      <span class="comment">// until we succeed or run out of options</span></div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>      <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>      <span class="keywordflow">for</span> (vector&lt;string&gt;::const_iterator dir = log_dirs.begin();</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>           dir != log_dirs.end(); ++dir) {</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>        base_filename_ = *dir + <span class="stringliteral">&quot;/&quot;</span> + stripped_filename;</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>        <span class="keywordflow">if</span> (CreateLogfile(time_pid_string)) {</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>          success = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>        }</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>      }</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>      <span class="comment">// If we never succeeded, we have to give up</span></div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>      <span class="keywordflow">if</span> (success == <span class="keyword">false</span>) {</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>        perror(<span class="stringliteral">&quot;Could not create logging file&quot;</span>);</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>        fprintf(stderr, <span class="stringliteral">&quot;COULD NOT CREATE A LOGGINGFILE %s!&quot;</span>,</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>                time_pid_string.c_str());</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>      }</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    }</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span> </div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>    <span class="comment">// Write a header message into the log file</span></div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>    ostringstream file_header_stream;</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>    file_header_stream.fill(<span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>    file_header_stream &lt;&lt; <span class="stringliteral">&quot;Log file created at: &quot;</span> &lt;&lt; 1900 + tm_time.tm_year</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>                       &lt;&lt; <span class="charliteral">&#39;/&#39;</span> &lt;&lt; setw(2) &lt;&lt; 1 + tm_time.tm_mon &lt;&lt; <span class="charliteral">&#39;/&#39;</span> &lt;&lt; setw(2)</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>                       &lt;&lt; tm_time.tm_mday &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; setw(2) &lt;&lt; tm_time.tm_hour</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>                       &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; setw(2) &lt;&lt; tm_time.tm_min &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; setw(2)</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>                       &lt;&lt; tm_time.tm_sec &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>                       &lt;&lt; <span class="stringliteral">&quot;Running on machine: &quot;</span> &lt;&lt; <a class="code hl_function" href="classgoogle_1_1_log_destination.html#ae015332540cd90572adfe5e5588227c6">LogDestination::hostname</a>()</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>                       &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>                       &lt;&lt; <span class="stringliteral">&quot;Log line format: [IWEF]mmdd hh:mm:ss.uuuuuu &quot;</span></div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>                       &lt;&lt; <span class="stringliteral">&quot;threadid file:line] msg&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>    <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; file_header_string = file_header_stream.str();</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span> </div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> header_len = file_header_string.size();</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>    fwrite(file_header_string.data(), 1, header_len, file_);</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>    file_length_ += header_len;</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>    bytes_since_flush_ += header_len;</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>  }</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span> </div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>  <span class="comment">// Write to LOG file</span></div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="namespacegoogle.html#adec21a5ba9511e6a6b2c09b0dbdf5fb8">stop_writing</a>) {</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>    <span class="comment">// fwrite() doesn&#39;t return an error when the disk is full, for</span></div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>    <span class="comment">// messages that are less than 4096 bytes. When the disk is full,</span></div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>    <span class="comment">// it returns the message length for messages that are less than</span></div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>    <span class="comment">// 4096 bytes. fwrite() returns 4096 for message lengths that are</span></div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>    <span class="comment">// greater than 4096, thereby indicating an error.</span></div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>    errno = 0;</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>    fwrite(<a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, 1, message_len, file_);</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>    <span class="keywordflow">if</span> (absl::GetFlag(FLAGS_stop_logging_if_full_disk) &amp;&amp;</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>        errno == ENOSPC) {  <span class="comment">// disk full, stop writing to disk</span></div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>      <a class="code hl_variable" href="namespacegoogle.html#adec21a5ba9511e6a6b2c09b0dbdf5fb8">stop_writing</a> = <span class="keyword">true</span>;  <span class="comment">// until the disk is</span></div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>      file_length_ += message_len;</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>      bytes_since_flush_ += message_len;</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>    }</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#af8454039845aad804abcbabf98b68b23">logging_internal::CycleClock_Now</a>() &gt;= next_flush_time_)</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>      <a class="code hl_variable" href="namespacegoogle.html#adec21a5ba9511e6a6b2c09b0dbdf5fb8">stop_writing</a> = <span class="keyword">false</span>;  <span class="comment">// check to see if disk has free space.</span></div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>    <span class="keywordflow">return</span>;                  <span class="comment">// no need to flush</span></div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>  }</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span> </div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>  <span class="comment">// See important msgs *now*.  Also, flush logs at least every 10^6 chars,</span></div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>  <span class="comment">// or every &quot;absl::GetFlag(FLAGS_logbufsecs)&quot; seconds.</span></div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>  <span class="keywordflow">if</span> (force_flush || (bytes_since_flush_ &gt;= 1000000) ||</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>      (<a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#af8454039845aad804abcbabf98b68b23">logging_internal::CycleClock_Now</a>() &gt;= next_flush_time_)) {</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>    FlushUnlocked();</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span><span class="preprocessor">#if defined(__linux__)</span></div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>    <span class="comment">// Only consider files &gt;= 3MiB</span></div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>    <span class="keywordflow">if</span> (absl::GetFlag(FLAGS_drop_log_memory) &amp;&amp; file_length_ &gt;= (3 &lt;&lt; 20)) {</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>      <span class="comment">// Don&#39;t evict the most recent 1-2MiB so as not to impact a tailer</span></div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>      <span class="comment">// of the log file and to avoid page rounding issue on linux &lt; 4.7</span></div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>      uint32_t total_drop_length =</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>          (file_length_ &amp; ~((1 &lt;&lt; 20) - 1)) - (1 &lt;&lt; 20);</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>      uint32_t this_drop_length = total_drop_length - dropped_mem_length_;</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>      <span class="keywordflow">if</span> (this_drop_length &gt;= (2 &lt;&lt; 20)) {</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>        <span class="comment">// Only advise when &gt;= 2MiB to drop</span></div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>        posix_fadvise(fileno(file_), dropped_mem_length_, this_drop_length,</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>                      POSIX_FADV_DONTNEED);</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>        dropped_mem_length_ = total_drop_length;</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>      }</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>    }</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>  }</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>}</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span> </div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>}  <span class="comment">// namespace</span></div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span> </div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span><span class="comment">// Static log data space to avoid alloc failures in a LOG(FATAL)</span></div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span><span class="comment">//</span></div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span><span class="comment">// Since multiple threads may call LOG(FATAL), and we want to preserve</span></div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span><span class="comment">// the data from the first call, we allocate two sets of space.  One</span></div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span><span class="comment">// for exclusive use by the first thread, and one for shared use by</span></div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span><span class="comment">// all other threads.</span></div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a407c4496d81fae1029e8800dd42ac68e"> 1048</a></span><span class="keyword">static</span> absl::Mutex <a class="code hl_variable" href="namespacegoogle.html#a407c4496d81fae1029e8800dd42ac68e">fatal_msg_lock</a>;</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"><a class="line" href="namespacegoogle.html#ada71130f5f3b55dbec713c608b9e5447"> 1049</a></span><span class="keyword">static</span> <a class="code hl_struct" href="structgoogle_1_1logging__internal_1_1_crash_reason.html">logging_internal::CrashReason</a> <a class="code hl_variable" href="namespacegoogle.html#ada71130f5f3b55dbec713c608b9e5447">crash_reason</a>;</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a7b8269d76dce27d5f880ba2dbf35382c"> 1050</a></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="namespacegoogle.html#a7b8269d76dce27d5f880ba2dbf35382c">fatal_msg_exclusive</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee"> 1051</a></span><span class="keyword">static</span> <a class="code hl_struct" href="structgoogle_1_1_log_message_1_1_log_message_data.html">LogMessage::LogMessageData</a> <a class="code hl_variable" href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee">fatal_msg_data_exclusive</a>;</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a861f0c066ef30bb3d7b4e442f55f93af"> 1052</a></span><span class="keyword">static</span> <a class="code hl_struct" href="structgoogle_1_1_log_message_1_1_log_message_data.html">LogMessage::LogMessageData</a> <a class="code hl_variable" href="namespacegoogle.html#a861f0c066ef30bb3d7b4e442f55f93af">fatal_msg_data_shared</a>;</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span> </div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span><span class="comment">// Static thread-local log data space to use, because typically at most one</span></div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span><span class="comment">// LogMessageData object exists (in this case glog makes zero heap memory</span></div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span><span class="comment">// allocations).</span></div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a0069c3deacbf0c307a0af6a7fa6c212e"> 1057</a></span><span class="keyword">static</span> <span class="keyword">thread_local</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="namespacegoogle.html#a0069c3deacbf0c307a0af6a7fa6c212e">thread_data_available</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span> </div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span><span class="keyword">static</span> <span class="keyword">thread_local</span> std::aligned_storage&lt;</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>    <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structgoogle_1_1_log_message_1_1_log_message_data.html">LogMessage::LogMessageData</a>),</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a1eaea9f78c8357c77772089fd6304dbd"> 1061</a></span>    <span class="keyword">alignof</span>(<a class="code hl_struct" href="structgoogle_1_1_log_message_1_1_log_message_data.html">LogMessage::LogMessageData</a>)&gt;::type <a class="code hl_variable" href="namespacegoogle.html#a1eaea9f78c8357c77772089fd6304dbd">thread_msg_data</a>;</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span> </div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"><a class="line" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aefae0ad3d1d866302a3d246ad4f03a32"> 1063</a></span>LogMessage::LogMessageData::LogMessageData()</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>    : stream_(message_text_, <a class="code hl_class" href="classgoogle_1_1_log_message.html">LogMessage</a>::kMaxLogMessageLen, 0) {}</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span> </div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9"> 1066</a></span><a class="code hl_function" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">LogMessage::LogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_namespace" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line, <a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>                       <span class="keywordtype">int</span> ctr, <span class="keywordtype">void</span> (<a class="code hl_class" href="classgoogle_1_1_log_message.html">LogMessage</a>::*send_method)())</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>    : allocated_(nullptr) {</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>  Init(<a class="code hl_namespace" href="namespacefile.html">file</a>, line, severity, send_method);</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad619d07eb80a509b28505be39cc07532">stream_</a>.<a class="code hl_function" href="classgoogle_1_1_log_message_1_1_log_stream.html#ae8ceb65aeef61f5cebbd0e2860c6d7c3">set_ctr</a>(ctr);</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>}</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span> </div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#ab85cea631fe5f3e262f734effd8162f4"> 1073</a></span><a class="code hl_function" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">LogMessage::LogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_namespace" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line, <span class="keyword">const</span> <a class="code hl_struct" href="structgoogle_1_1_check_op_string.html">CheckOpString</a>&amp; result)</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>    : allocated_(nullptr) {</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>  Init(<a class="code hl_namespace" href="namespacefile.html">file</a>, line, <a class="code hl_variable" href="namespacegoogle.html#ac452c4c8ec1cbc24dd074e260aa0b617">GLOG_FATAL</a>, &amp;<a class="code hl_function" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">LogMessage::SendToLog</a>);</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>  <a class="code hl_function" href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c">stream</a>() &lt;&lt; <span class="stringliteral">&quot;Check failed: &quot;</span> &lt;&lt; (*result.<a class="code hl_variable" href="structgoogle_1_1_check_op_string.html#a3e35a685fcaa15d88c35fa93cd3126c5">str_</a>) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>}</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span> </div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a9f1110a2f9d0647c96f40cff7f3780b1"> 1079</a></span><a class="code hl_function" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">LogMessage::LogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_namespace" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line) : allocated_(nullptr) {</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>  Init(<a class="code hl_namespace" href="namespacefile.html">file</a>, line, <a class="code hl_variable" href="namespacegoogle.html#af3c2db675e75f2074724f754d3cf7885">GLOG_INFO</a>, &amp;<a class="code hl_function" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">LogMessage::SendToLog</a>);</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>}</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span> </div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#aa95821444a689129b39182932f086fb7"> 1083</a></span><a class="code hl_function" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">LogMessage::LogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_namespace" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line, <a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity)</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>    : allocated_(nullptr) {</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>  Init(<a class="code hl_namespace" href="namespacefile.html">file</a>, line, severity, &amp;<a class="code hl_function" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">LogMessage::SendToLog</a>);</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>}</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span> </div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#aeb89e818ca89c4e8f5dc8e6093ff9dce"> 1088</a></span><a class="code hl_function" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">LogMessage::LogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_namespace" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line, <a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>                       <a class="code hl_class" href="classgoogle_1_1_log_sink.html">LogSink</a>* sink, <span class="keywordtype">bool</span> also_send_to_log)</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>    : allocated_(nullptr) {</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>  Init(<a class="code hl_namespace" href="namespacefile.html">file</a>, line, severity,</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>       also_send_to_log ? &amp;LogMessage::SendToSinkAndLog</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>                        : &amp;LogMessage::SendToSink);</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a583ab3eb7226577fd24179c256425f98">sink_</a> = sink;  <span class="comment">// override Init()&#39;s setting to null</span></div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>}</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span> </div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a78af5308ef44609a86cd691aaa97323a"> 1097</a></span><a class="code hl_function" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">LogMessage::LogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_namespace" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line, <a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>                       vector&lt;string&gt;* outvec)</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>    : allocated_(nullptr) {</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>  Init(<a class="code hl_namespace" href="namespacefile.html">file</a>, line, severity, &amp;LogMessage::SaveOrSendToLog);</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#abfdae073349de1c469785d4be5d262a6">outvec_</a> = outvec;  <span class="comment">// override Init()&#39;s setting to null</span></div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>}</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span> </div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#aeb194c56379cf77f547155b1f16064d4"> 1104</a></span><a class="code hl_function" href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">LogMessage::LogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_namespace" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line, <a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>                       <span class="keywordtype">string</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>)</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>    : allocated_(nullptr) {</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>  Init(<a class="code hl_namespace" href="namespacefile.html">file</a>, line, severity, &amp;LogMessage::WriteToStringAndLog);</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a28966ba90809d1189db93cf6d8d7b3c2">message_</a> = <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>;  <span class="comment">// override Init()&#39;s setting to null</span></div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>}</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span> </div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span><span class="keywordtype">void</span> LogMessage::Init(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_namespace" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line, <a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity,</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>                      <span class="keywordtype">void</span> (<a class="code hl_class" href="classgoogle_1_1_log_message.html">LogMessage</a>::*send_method)()) {</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>  allocated_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>  <span class="keywordflow">if</span> (severity != <a class="code hl_variable" href="namespacegoogle.html#ac452c4c8ec1cbc24dd074e260aa0b617">GLOG_FATAL</a> || !<a class="code hl_variable" href="namespacegoogle.html#a5093faa29d594a5fe593decdd4de8427">exit_on_dfatal</a>) {</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>    <span class="comment">// No need for locking, because this is thread local.</span></div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacegoogle.html#a0069c3deacbf0c307a0af6a7fa6c212e">thread_data_available</a>) {</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>      <a class="code hl_variable" href="namespacegoogle.html#a0069c3deacbf0c307a0af6a7fa6c212e">thread_data_available</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>      data_ = <span class="keyword">new</span> (&amp;<a class="code hl_variable" href="namespacegoogle.html#a1eaea9f78c8357c77772089fd6304dbd">thread_msg_data</a>) LogMessageData;</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>      allocated_ = <span class="keyword">new</span> LogMessageData();</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>      data_ = allocated_;</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>    }</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>    data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88e3e7b14a7388ff3771f7181732570c">first_fatal_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>    absl::MutexLock l(&amp;<a class="code hl_variable" href="namespacegoogle.html#a407c4496d81fae1029e8800dd42ac68e">fatal_msg_lock</a>);</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacegoogle.html#a7b8269d76dce27d5f880ba2dbf35382c">fatal_msg_exclusive</a>) {</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>      <a class="code hl_variable" href="namespacegoogle.html#a7b8269d76dce27d5f880ba2dbf35382c">fatal_msg_exclusive</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>      data_ = &amp;<a class="code hl_variable" href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee">fatal_msg_data_exclusive</a>;</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>      data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88e3e7b14a7388ff3771f7181732570c">first_fatal_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>      data_ = &amp;<a class="code hl_variable" href="namespacegoogle.html#a861f0c066ef30bb3d7b4e442f55f93af">fatal_msg_data_shared</a>;</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>      data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88e3e7b14a7388ff3771f7181732570c">first_fatal_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>    }</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>  }</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span> </div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>  <a class="code hl_function" href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c">stream</a>().fill(<span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a689d7ba2721c7e7935b5501a83948154">preserved_errno_</a> = errno;</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a> = severity;</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">line_</a> = line;</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a9d8241f1d596b53f65ba985cc108a013">send_method_</a> = send_method;</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a583ab3eb7226577fd24179c256425f98">sink_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#abfdae073349de1c469785d4be5d262a6">outvec_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>  timespec now_ts = absl::ToTimespec(absl::Now());</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1b911b3abca8051fd7441126a95a0254">timestamp_</a> = now_ts.tv_sec;</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>  localtime_r(&amp;data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1b911b3abca8051fd7441126a95a0254">timestamp_</a>, &amp;data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88d5e4f1bf38dcfa744f181b569552d8">tm_time_</a>);</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>  <span class="keywordtype">int</span> usecs = now_ts.tv_nsec / 1000;</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span> </div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> = 0;</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#af7f329ac8ea043562147dbaa396d4255">num_chars_to_syslog_</a> = 0;</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">basename_</a> = <a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#af7c52c82f4832b6bfabe0c86a0c19d2e">logging_internal::const_basename</a>(<a class="code hl_namespace" href="namespacefile.html">file</a>);</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">fullname_</a> = <a class="code hl_namespace" href="namespacefile.html">file</a>;</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa0c333addf51e66c448c4be972b8974f">has_been_flushed_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span> </div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>  <span class="comment">// If specified, prepend a prefix to each line.  For example:</span></div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>  <span class="comment">//    I1018 160715 f5d4fbb0 logging.cc:1153]</span></div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>  <span class="comment">//    (log level, GMT month, date, time, thread_id, file basename, line)</span></div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>  <span class="comment">// We exclude the thread_id for the default thread.</span></div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>  <span class="keywordflow">if</span> (absl::GetFlag(FLAGS_log_prefix) &amp;&amp; (line != <a class="code hl_enumvalue" href="classgoogle_1_1_log_message.html#a99fb83031ce9923c84392b4e92f956b5af8756cb52a8aac6329e43782e08f69e5">kNoLogPrefix</a>)) {</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>    <a class="code hl_function" href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c">stream</a>() &lt;&lt; <a class="code hl_variable" href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">LogSeverityNames</a>[severity][0] &lt;&lt; setw(2)</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>             &lt;&lt; 1 + data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88d5e4f1bf38dcfa744f181b569552d8">tm_time_</a>.tm_mon &lt;&lt; setw(2) &lt;&lt; data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88d5e4f1bf38dcfa744f181b569552d8">tm_time_</a>.tm_mday</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>             &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; setw(2) &lt;&lt; data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88d5e4f1bf38dcfa744f181b569552d8">tm_time_</a>.tm_hour &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; setw(2)</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>             &lt;&lt; data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88d5e4f1bf38dcfa744f181b569552d8">tm_time_</a>.tm_min &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; setw(2)</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>             &lt;&lt; data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88d5e4f1bf38dcfa744f181b569552d8">tm_time_</a>.tm_sec &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; setw(6) &lt;&lt; usecs &lt;&lt; <span class="charliteral">&#39; &#39;</span></div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>             &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt; setw(5) &lt;&lt; <a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#aa5bcfef09a25e887a41b29f9ba9be836">logging_internal::GetTID</a>()</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>             &lt;&lt; setfill(<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">basename_</a> &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">line_</a></div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>             &lt;&lt; <span class="stringliteral">&quot;] &quot;</span>;</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>  }</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a> = data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad619d07eb80a509b28505be39cc07532">stream_</a>.<a class="code hl_function" href="classgoogle_1_1_log_message_1_1_log_stream.html#a2752f4361bbc1b5a3158ebaf821d97b4">pcount</a>();</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span> </div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>  <span class="keywordflow">if</span> (!absl::GetFlag(FLAGS_log_backtrace_at).empty()) {</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>    <span class="keywordtype">char</span> fileline[128];</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>    snprintf(fileline, <span class="keyword">sizeof</span>(fileline), <span class="stringliteral">&quot;%s:%d&quot;</span>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">basename_</a>, line);</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>    <span class="keywordflow">if</span> (!strcmp(absl::GetFlag(FLAGS_log_backtrace_at).c_str(), fileline)) {</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>      <span class="keywordtype">string</span> stacktrace;</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>      <a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#a07cf4471662221986927d079727609d8">logging_internal::DumpStackTraceToString</a>(&amp;stacktrace);</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>      <a class="code hl_function" href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c">stream</a>() &lt;&lt; <span class="stringliteral">&quot; (stacktrace:\n&quot;</span> &lt;&lt; stacktrace &lt;&lt; <span class="stringliteral">&quot;) &quot;</span>;</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>    }</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>  }</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>}</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span> </div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#aeeabea83ed8b4e356d4d36ece0fcb1bf"> 1181</a></span><a class="code hl_function" href="classgoogle_1_1_log_message.html#aeeabea83ed8b4e356d4d36ece0fcb1bf">LogMessage::~LogMessage</a>() {</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>  <a class="code hl_function" href="classgoogle_1_1_log_message.html#a0e2644b2df3c228e8d71a55b60723f31">Flush</a>();</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span><span class="preprocessor">#ifdef GLOG_THREAD_LOCAL_STORAGE</span></div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>  <span class="keywordflow">if</span> (data_ == <span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span>*<span class="keyword">&gt;</span>(&amp;<a class="code hl_variable" href="namespacegoogle.html#a1eaea9f78c8357c77772089fd6304dbd">thread_msg_data</a>)) {</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>    data_-&gt;~LogMessageData();</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>    <a class="code hl_variable" href="namespacegoogle.html#a0069c3deacbf0c307a0af6a7fa6c212e">thread_data_available</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>    <span class="keyword">delete</span> allocated_;</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>  }</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span><span class="preprocessor">#else   </span><span class="comment">// !defined(GLOG_THREAD_LOCAL_STORAGE)</span></div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>  <span class="keyword">delete</span> allocated_;</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span><span class="preprocessor">#endif  </span><span class="comment">// defined(GLOG_THREAD_LOCAL_STORAGE)</span></div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>}</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span> </div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a0a01fdbc8c975aae6c3dba8d00692e77"> 1195</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classgoogle_1_1_log_message.html#a0a01fdbc8c975aae6c3dba8d00692e77">LogMessage::preserved_errno</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a689d7ba2721c7e7935b5501a83948154">preserved_errno_</a>; }</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span> </div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c"> 1197</a></span>ostream&amp; <a class="code hl_function" href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c">LogMessage::stream</a>() { <span class="keywordflow">return</span> data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad619d07eb80a509b28505be39cc07532">stream_</a>; }</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span> </div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span><span class="comment">// Flush buffered message, called by the destructor, or any other function</span></div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span><span class="comment">// that needs to synchronize the log.</span></div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a0e2644b2df3c228e8d71a55b60723f31"> 1201</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_message.html#a0e2644b2df3c228e8d71a55b60723f31">LogMessage::Flush</a>() {</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>  <span class="keywordflow">if</span> (data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa0c333addf51e66c448c4be972b8974f">has_been_flushed_</a> ||</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>      data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a> &lt; absl::GetFlag(FLAGS_minloglevel))</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span> </div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> = data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad619d07eb80a509b28505be39cc07532">stream_</a>.<a class="code hl_function" href="classgoogle_1_1_log_message_1_1_log_stream.html#a2752f4361bbc1b5a3158ebaf821d97b4">pcount</a>();</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#af7f329ac8ea043562147dbaa396d4255">num_chars_to_syslog_</a> =</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>      data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>;</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span> </div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>  <span class="comment">// Do we need to add a \n to the end of this message?</span></div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>  <span class="keywordtype">bool</span> append_newline =</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>      (data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - 1] != <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>  <span class="keywordtype">char</span> original_final_char = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span> </div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>  <span class="comment">// If we do need to add a \n, we&#39;ll do it by violating the memory of the</span></div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>  <span class="comment">// ostrstream buffer.  This is quick, and we&#39;ll make sure to undo our</span></div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>  <span class="comment">// modification before anything else is done with the ostrstream.  It</span></div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>  <span class="comment">// would be preferable not to do things this way, but it seems to be</span></div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>  <span class="comment">// the best way to deal with this.</span></div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>  <span class="keywordflow">if</span> (append_newline) {</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>    original_final_char = data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a>];</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>    data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a>++] = <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>  }</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span> </div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>  <span class="comment">// Prevent any subtle race conditions by wrapping a absl::Mutex lock around</span></div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>  <span class="comment">// the actual logging action per se.</span></div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>  {</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>    absl::MutexLock l(&amp;<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>    (this-&gt;*(data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a9d8241f1d596b53f65ba985cc108a013">send_method_</a>))();</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>    ++num_messages_[<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>)];</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>  }</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>  LogDestination::WaitForSinks(data_);</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span> </div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>  <span class="keywordflow">if</span> (append_newline) {</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    <span class="comment">// Fix the ostrstream back how it was before we screwed with it.</span></div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>    <span class="comment">// It&#39;s 99.44% certain that we don&#39;t need to worry about doing this.</span></div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>    data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - 1] = original_final_char;</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>  }</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span> </div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>  <span class="comment">// If errno was already set before we enter the logging call, we&#39;ll</span></div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>  <span class="comment">// set it back to that value when we return from the logging call.</span></div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>  <span class="comment">// It happens often that we log an error message after a syscall</span></div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>  <span class="comment">// failure, which can potentially set the errno to some other</span></div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>  <span class="comment">// values.  We would like to preserve the original errno.</span></div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>  <span class="keywordflow">if</span> (data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a689d7ba2721c7e7935b5501a83948154">preserved_errno_</a> != 0) {</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>    errno = data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a689d7ba2721c7e7935b5501a83948154">preserved_errno_</a>;</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>  }</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span> </div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>  <span class="comment">// Note that this message is now safely logged.  If we&#39;re asked to flush</span></div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>  <span class="comment">// again, as a result of destruction, say, we&#39;ll do nothing on future calls.</span></div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>  data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa0c333addf51e66c448c4be972b8974f">has_been_flushed_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>}</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span> </div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span><span class="comment">// Copy of first FATAL log message so that we can print it out again</span></div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span><span class="comment">// after all the stack traces.  To preserve legacy behavior, we don&#39;t</span></div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span><span class="comment">// use fatal_msg_data_exclusive.</span></div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"><a class="line" href="namespacegoogle.html#ab675835107a9fba3f4b1fc920516b5bf"> 1257</a></span><span class="keyword">static</span> time_t <a class="code hl_variable" href="namespacegoogle.html#ab675835107a9fba3f4b1fc920516b5bf">fatal_time</a>;</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02"> 1258</a></span><span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>[256];</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span> </div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_destination.html#a19a1fea653d73f7aba4a819bbd80933c"> 1260</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#afe9db80601fc823372a09c832a802529">ReprintFatalMessage</a>() {</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>[0]) {</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> n = strlen(<a class="code hl_variable" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>);</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>    <span class="keywordflow">if</span> (!absl::GetFlag(FLAGS_logtostderr)) {</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>      <span class="comment">// Also write to stderr (don&#39;t color to avoid terminal checks)</span></div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>      <a class="code hl_function" href="namespacegoogle.html#ae4e2c48deea609dcb515b027460c3f5e">WriteToStderr</a>(<a class="code hl_variable" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>, n);</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>    }</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>    LogDestination::LogToAllLogfiles(<a class="code hl_variable" href="namespacegoogle.html#aec61ff6c741224bbf1d230d40449aa30">GLOG_ERROR</a>, <a class="code hl_variable" href="namespacegoogle.html#ab675835107a9fba3f4b1fc920516b5bf">fatal_time</a>, <a class="code hl_variable" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>, n);</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>  }</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>}</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span> </div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span><span class="comment">// L &gt;= log_mutex (callers must hold the log_mutex).</span></div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6"> 1272</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">LogMessage::SendToLog</a>() EXCLUSIVE_LOCKS_REQUIRED(<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>) {</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>  <span class="keyword">static</span> <span class="keywordtype">bool</span> already_warned_before_initgoogle = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span> </div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>  <a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>.AssertHeld();</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span> </div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>  <a class="code hl_define" href="raw__logging_8h.html#a791abe51d9a64e98d30631fdf23e33da">RAW_DCHECK</a>(data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> &gt; 0 &amp;&amp;</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>                 data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - 1] == <span class="charliteral">&#39;\n&#39;</span>,</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>             <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span> </div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>  <span class="comment">// Messages of a given severity get logged to lower severity logs, too</span></div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span> </div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>  <span class="keywordflow">if</span> (!already_warned_before_initgoogle &amp;&amp;</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>      !<a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#aa3792ddc75755350b76a7b196369eda3">logging_internal::IsGoogleLoggingInitialized</a>()) {</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> w[] =</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>        <span class="stringliteral">&quot;WARNING: Logging before InitGoogleLogging() is &quot;</span></div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>        <span class="stringliteral">&quot;written to STDERR\n&quot;</span>;</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>    <a class="code hl_function" href="namespacegoogle.html#ae4e2c48deea609dcb515b027460c3f5e">WriteToStderr</a>(w, strlen(w));</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>    already_warned_before_initgoogle = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>  }</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span> </div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>  <span class="comment">// global flag: never log to file if set.  Also -- don&#39;t log to a</span></div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>  <span class="comment">// file if we haven&#39;t parsed the command line flags to get the</span></div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>  <span class="comment">// program name.</span></div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>  <span class="keywordflow">if</span> (absl::GetFlag(FLAGS_logtostderr) ||</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>      !<a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#aa3792ddc75755350b76a7b196369eda3">logging_internal::IsGoogleLoggingInitialized</a>()) {</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>    <a class="code hl_function" href="namespacegoogle.html#a4f56829b020851f8919bdb557b6c10cf">ColoredWriteToStderr</a>(data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>,</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>                         data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a>);</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span> </div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>    <span class="comment">// this could be protected by a flag if necessary.</span></div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>    LogDestination::LogToSinks(</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>        data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">fullname_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">basename_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">line_</a>,</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>        &amp;data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88d5e4f1bf38dcfa744f181b569552d8">tm_time_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a> + data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>,</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>        (data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a> - 1));</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>    <span class="comment">// log this message to all log files of severity &lt;= severity_</span></div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>    LogDestination::LogToAllLogfiles(data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1b911b3abca8051fd7441126a95a0254">timestamp_</a>,</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>                                     data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>,</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>                                     data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a>);</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span> </div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>    LogDestination::MaybeLogToStderr(data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>,</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>                                     data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a>);</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>    LogDestination::LogToSinks(</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>        data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">fullname_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">basename_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">line_</a>,</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>        &amp;data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88d5e4f1bf38dcfa744f181b569552d8">tm_time_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a> + data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>,</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>        (data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a> - 1));</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>    <span class="comment">// NOTE: -1 removes trailing \n</span></div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>  }</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span> </div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>  <span class="comment">// If we log a FATAL message, flush all the log destinations, then toss</span></div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>  <span class="comment">// a signal for others to catch. We leave the logs in a state that</span></div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>  <span class="comment">// someone else can use them (as long as they flush afterwards)</span></div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>  <span class="keywordflow">if</span> (data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a> == <a class="code hl_variable" href="namespacegoogle.html#ac452c4c8ec1cbc24dd074e260aa0b617">GLOG_FATAL</a> &amp;&amp; <a class="code hl_variable" href="namespacegoogle.html#a5093faa29d594a5fe593decdd4de8427">exit_on_dfatal</a>) {</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>    <span class="keywordflow">if</span> (data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88e3e7b14a7388ff3771f7181732570c">first_fatal_</a>) {</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>      <span class="comment">// Store crash information so that it is accessible from within signal</span></div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>      <span class="comment">// handlers that may be invoked later.</span></div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>      RecordCrashReason(&amp;<a class="code hl_variable" href="namespacegoogle.html#ada71130f5f3b55dbec713c608b9e5447">crash_reason</a>);</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>      <a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#a88dfce8ed7ee385f0238de1387ea7845">SetCrashReason</a>(&amp;<a class="code hl_variable" href="namespacegoogle.html#ada71130f5f3b55dbec713c608b9e5447">crash_reason</a>);</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span> </div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>      <span class="comment">// Store shortened fatal message for other logs and GWQ status</span></div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>      <span class="keyword">const</span> <span class="keywordtype">int</span> copy =</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>          min&lt;int&gt;(data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>) - 1);</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>      memcpy(<a class="code hl_variable" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>, copy);</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>      <a class="code hl_variable" href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">fatal_message</a>[copy] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>      <a class="code hl_variable" href="namespacegoogle.html#ab675835107a9fba3f4b1fc920516b5bf">fatal_time</a> = data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1b911b3abca8051fd7441126a95a0254">timestamp_</a>;</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>    }</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span> </div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>    <span class="keywordflow">if</span> (!absl::GetFlag(FLAGS_logtostderr)) {</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">NUM_SEVERITIES</a>; ++i) {</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>        <span class="keywordflow">if</span> (LogDestination::log_destinations_[i])</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>          LogDestination::log_destinations_[i]-&gt;logger_-&gt;Write(<span class="keyword">true</span>, 0, <span class="stringliteral">&quot;&quot;</span>, 0);</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>      }</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>    }</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span> </div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>    <span class="comment">// release the lock that our caller (directly or indirectly)</span></div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>    <span class="comment">// LogMessage::~LogMessage() grabbed so that signal handlers</span></div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>    <span class="comment">// can use the logging facility. Alternately, we could add</span></div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>    <span class="comment">// an entire unsafe logging interface to bypass locking</span></div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>    <span class="comment">// for signal handlers but this seems simpler.</span></div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>    <a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>.Unlock();</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>    LogDestination::WaitForSinks(data_);</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span> </div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a> = <span class="stringliteral">&quot;*** Check failure stack trace: ***\n&quot;</span>;</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>    <span class="keywordflow">if</span> (write(STDERR_FILENO, <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, strlen(<a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>)) &lt; 0) {</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>      <span class="comment">// Ignore errors.</span></div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>    }</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>    <a class="code hl_function" href="classgoogle_1_1_log_message.html#aeb92d4addb41255c9732cacfcb54f795">Fail</a>();</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>  }</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>}</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span> </div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span><span class="keywordtype">void</span> LogMessage::RecordCrashReason(<a class="code hl_struct" href="structgoogle_1_1logging__internal_1_1_crash_reason.html">logging_internal::CrashReason</a>* reason) {</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>  reason-&gt;<a class="code hl_variable" href="structgoogle_1_1logging__internal_1_1_crash_reason.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a> = <a class="code hl_variable" href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee">fatal_msg_data_exclusive</a>.<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">fullname_</a>;</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>  reason-&gt;<a class="code hl_variable" href="structgoogle_1_1logging__internal_1_1_crash_reason.html#ada7b81cc6d5bbe25b92c0162697e0f58">line_number</a> = <a class="code hl_variable" href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee">fatal_msg_data_exclusive</a>.<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">line_</a>;</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>  reason-&gt;<a class="code hl_variable" href="structgoogle_1_1logging__internal_1_1_crash_reason.html#a254bf0858da09c96a48daf64404eb4f8">message</a> = <a class="code hl_variable" href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee">fatal_msg_data_exclusive</a>.<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a> +</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>                    <a class="code hl_variable" href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee">fatal_msg_data_exclusive</a>.<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>;</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>  <span class="comment">// Retrieve the stack trace, omitting the logging frames that got us here.</span></div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>  reason-&gt;<a class="code hl_variable" href="structgoogle_1_1logging__internal_1_1_crash_reason.html#acb5ba97551079e0b072c62c21d784ac5">depth</a> =</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>      absl::GetStackTrace(reason-&gt;<a class="code hl_variable" href="structgoogle_1_1logging__internal_1_1_crash_reason.html#a155108dfb07b71f192a35ce75199ed33">stack</a>, ABSL_ARRAYSIZE(reason-&gt;<a class="code hl_variable" href="structgoogle_1_1logging__internal_1_1_crash_reason.html#a155108dfb07b71f192a35ce75199ed33">stack</a>), 4);</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>}</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span> </div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span><span class="preprocessor">#if !defined(_MSC_VER)</span></div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#afaad0abfed30e8ee5ae7d27b5ecea29f"> 1372</a></span><span class="preprocessor">#define ATTRIBUTE_NORETURN __attribute__((noreturn))</span></div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span><span class="preprocessor">#define ATTRIBUTE_NORETURN</span></div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span> </div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span><span class="preprocessor">#if defined(_MSC_VER)</span></div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>__declspec(noreturn)</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#aecd060345dec7a9bbb83fb0afe72948d">logging_fail</a>() <a class="code hl_define" href="base_2logging_8cc.html#afaad0abfed30e8ee5ae7d27b5ecea29f">ATTRIBUTE_NORETURN</a>;</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span> </div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"><a class="line" href="namespacegoogle.html#aecd060345dec7a9bbb83fb0afe72948d"> 1382</a></span>static <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#aecd060345dec7a9bbb83fb0afe72948d">logging_fail</a>() { abort(); }</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span> </div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a34245749cbb78aef93c6652a3eb981d6"> 1384</a></span><span class="keyword">typedef</span> void (*<a class="code hl_typedef" href="namespacegoogle.html#a34245749cbb78aef93c6652a3eb981d6">logging_fail_func_t</a>)() <a class="code hl_define" href="base_2logging_8cc.html#afaad0abfed30e8ee5ae7d27b5ecea29f">ATTRIBUTE_NORETURN</a>;</div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span> </div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span><a class="code hl_define" href="logging__export_8h.html#a980c97856a47502c2877b93460f44f87">GOOGLE_GLOG_DLL_DECL</a></div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a24c103ec1d724a52eef23cbe8eb101cf"> 1387</a></span><a class="code hl_typedef" href="namespacegoogle.html#a34245749cbb78aef93c6652a3eb981d6">logging_fail_func_t</a> <a class="code hl_variable" href="namespacegoogle.html#a24c103ec1d724a52eef23cbe8eb101cf">g_logging_fail_func</a> = &amp;<a class="code hl_function" href="namespacegoogle.html#aecd060345dec7a9bbb83fb0afe72948d">logging_fail</a>;</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span> </div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a80d0d63d8be7a9721961916a9ab9a9c3"> 1389</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a80d0d63d8be7a9721961916a9ab9a9c3">InstallFailureFunction</a>(<span class="keywordtype">void</span> (*fail_func)()) {</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>  <a class="code hl_variable" href="namespacegoogle.html#a24c103ec1d724a52eef23cbe8eb101cf">g_logging_fail_func</a> = (<a class="code hl_typedef" href="namespacegoogle.html#a34245749cbb78aef93c6652a3eb981d6">logging_fail_func_t</a>)fail_func;</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>}</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span> </div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#aeb92d4addb41255c9732cacfcb54f795"> 1393</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_message.html#aeb92d4addb41255c9732cacfcb54f795">LogMessage::Fail</a>() { <a class="code hl_variable" href="namespacegoogle.html#a24c103ec1d724a52eef23cbe8eb101cf">g_logging_fail_func</a>(); }</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span> </div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span><span class="comment">// L &gt;= log_mutex (callers must hold the log_mutex).</span></div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span><span class="keywordtype">void</span> LogMessage::SendToSink() EXCLUSIVE_LOCKS_REQUIRED(<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>) {</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>  <span class="keywordflow">if</span> (data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a583ab3eb7226577fd24179c256425f98">sink_</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>    <a class="code hl_define" href="raw__logging_8h.html#a791abe51d9a64e98d30631fdf23e33da">RAW_DCHECK</a>(data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> &gt; 0 &amp;&amp;</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>                   data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - 1] == <span class="charliteral">&#39;\n&#39;</span>,</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>               <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>    data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a583ab3eb7226577fd24179c256425f98">sink_</a>-&gt;<a class="code hl_function" href="classgoogle_1_1_log_sink.html#a0e3384308bca57a6a44f3c2b5258ffb1">send</a>(</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>        data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">fullname_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">basename_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">line_</a>,</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>        &amp;data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88d5e4f1bf38dcfa744f181b569552d8">tm_time_</a>, data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a> + data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>,</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>        (data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a> - 1));</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>  }</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>}</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span> </div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span><span class="comment">// L &gt;= log_mutex (callers must hold the log_mutex).</span></div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span><span class="keywordtype">void</span> LogMessage::SendToSinkAndLog() EXCLUSIVE_LOCKS_REQUIRED(<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>) {</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>  SendToSink();</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>  <a class="code hl_function" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">SendToLog</a>();</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>}</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span> </div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span><span class="comment">// L &gt;= log_mutex (callers must hold the log_mutex).</span></div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span><span class="keywordtype">void</span> LogMessage::SaveOrSendToLog() EXCLUSIVE_LOCKS_REQUIRED(<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>) {</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>  <span class="keywordflow">if</span> (data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#abfdae073349de1c469785d4be5d262a6">outvec_</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>    <a class="code hl_define" href="raw__logging_8h.html#a791abe51d9a64e98d30631fdf23e33da">RAW_DCHECK</a>(data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> &gt; 0 &amp;&amp;</div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>                   data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - 1] == <span class="charliteral">&#39;\n&#39;</span>,</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>               <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>    <span class="comment">// Omit prefix of message and trailing newline when recording in outvec_.</span></div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="sparse__submatrix_8cc.html#a9b7656b922ea4ec96097d7380c0e61fe">start</a> = data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a> + data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>;</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>    <span class="keywordtype">int</span> len = data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a> - 1;</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>    data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#abfdae073349de1c469785d4be5d262a6">outvec_</a>-&gt;push_back(<span class="keywordtype">string</span>(<a class="code hl_variable" href="sparse__submatrix_8cc.html#a9b7656b922ea4ec96097d7380c0e61fe">start</a>, len));</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>    <a class="code hl_function" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">SendToLog</a>();</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>  }</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>}</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span> </div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span><span class="keywordtype">void</span> LogMessage::WriteToStringAndLog() EXCLUSIVE_LOCKS_REQUIRED(<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>) {</div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>  <span class="keywordflow">if</span> (data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a28966ba90809d1189db93cf6d8d7b3c2">message_</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>    <a class="code hl_define" href="raw__logging_8h.html#a791abe51d9a64e98d30631fdf23e33da">RAW_DCHECK</a>(data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> &gt; 0 &amp;&amp;</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>                   data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>[data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - 1] == <span class="charliteral">&#39;\n&#39;</span>,</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>               <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>    <span class="comment">// Omit prefix of message and trailing newline when writing to message_.</span></div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="sparse__submatrix_8cc.html#a9b7656b922ea4ec96097d7380c0e61fe">start</a> = data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a> + data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>;</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>    <span class="keywordtype">int</span> len = data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">num_chars_to_log_</a> - data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a> - 1;</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>    data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a28966ba90809d1189db93cf6d8d7b3c2">message_</a>-&gt;assign(<a class="code hl_variable" href="sparse__submatrix_8cc.html#a9b7656b922ea4ec96097d7380c0e61fe">start</a>, len);</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>  }</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>  <a class="code hl_function" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">SendToLog</a>();</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>}</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span> </div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span><span class="comment">// L &gt;= log_mutex (callers must hold the log_mutex).</span></div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a3ea77f17c72e61d4ca8b21433e629d43"> 1443</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_message.html#a3ea77f17c72e61d4ca8b21433e629d43">LogMessage::SendToSyslogAndLog</a>() {</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span><span class="preprocessor">#if !defined(_MSC_VER)</span></div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>  <span class="comment">// Before any calls to syslog(), make a single call to openlog()</span></div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>  <span class="keyword">static</span> <span class="keywordtype">bool</span> openlog_already_called = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>  <span class="keywordflow">if</span> (!openlog_already_called) {</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>    openlog(<a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#a43adca49683a5766aecb000c340e988c">logging_internal::ProgramInvocationShortName</a>(),</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>            LOG_CONS | LOG_NDELAY | LOG_PID, LOG_USER);</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>    openlog_already_called = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>  }</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span> </div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>  <span class="comment">// This array maps Google severity levels to syslog levels</span></div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> SEVERITY_TO_LEVEL[] = {LOG_INFO, LOG_WARNING, LOG_ERR, LOG_EMERG};</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>  syslog(LOG_USER | SEVERITY_TO_LEVEL[<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">severity_</a>)],</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>         <span class="stringliteral">&quot;%.*s&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#af7f329ac8ea043562147dbaa396d4255">num_chars_to_syslog_</a>),</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>         data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a> + data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">num_prefix_chars_</a>);</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>  <a class="code hl_function" href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">SendToLog</a>();</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>  <a class="code hl_define" href="base_2logging_8h.html#accad43a85d781d53381cd53a9894b6ae">LOG</a>(<a class="code hl_variable" href="log__severity_8h.html#ac9bcbe19995a8140cd4ec61773cd6e67">ERROR</a>) &lt;&lt; <span class="stringliteral">&quot;No syslog support: message=&quot;</span> &lt;&lt; data_-&gt;<a class="code hl_variable" href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">message_text_</a>;</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>}</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span> </div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"><a class="line" href="namespacegoogle_1_1base.html#a50d33a682377552803e3bda0568358ad"> 1464</a></span><a class="code hl_class" href="classgoogle_1_1base_1_1_logger.html">base::Logger</a>* <a class="code hl_function" href="namespacegoogle_1_1base.html#a50d33a682377552803e3bda0568358ad">base::GetLogger</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity) {</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>  absl::MutexLock l(&amp;<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>  <span class="keywordflow">return</span> LogDestination::log_destination(severity)-&gt;logger_;</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>}</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span> </div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"><a class="line" href="namespacegoogle_1_1base.html#a754a333359f5c02714711bb4e01417b0"> 1469</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle_1_1base.html#a754a333359f5c02714711bb4e01417b0">base::SetLogger</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <a class="code hl_class" href="classgoogle_1_1base_1_1_logger.html">base::Logger</a>* logger) {</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>  absl::MutexLock l(&amp;<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>  LogDestination::log_destination(severity)-&gt;logger_ = logger;</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>}</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span> </div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span><span class="comment">// L &lt; log_mutex.  Acquires and releases absl::Mutex_.</span></div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message.html#a8505d7c85d1ca04684141bb1b8113770"> 1475</a></span>int64_t <a class="code hl_function" href="classgoogle_1_1_log_message.html#a8505d7c85d1ca04684141bb1b8113770">LogMessage::num_messages</a>(<span class="keywordtype">int</span> severity) {</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>  absl::MutexLock l(&amp;<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>  <span class="keywordflow">return</span> num_messages_[severity];</div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>}</div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span> </div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span><span class="comment">// Output the COUNTER value. This is only valid if ostream is a</span></div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span><span class="comment">// LogStream.</span></div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a001f0868c92c66aa4991da10384c5304"> 1482</a></span>ostream&amp; <a class="code hl_function" href="namespacegoogle.html#a001f0868c92c66aa4991da10384c5304">operator&lt;&lt;</a>(ostream&amp; os, <span class="keyword">const</span> <a class="code hl_enumeration" href="namespacegoogle.html#aa739a176bcc5230a3536ef27a860c1a8">PRIVATE_Counter</a>&amp;) {</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span><span class="preprocessor">#ifdef DISABLE_RTTI</span></div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>  <a class="code hl_class" href="classgoogle_1_1_log_message_1_1_log_stream.html">LogMessage::LogStream</a>* log = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="classgoogle_1_1_log_message_1_1_log_stream.html">LogMessage::LogStream</a>*<span class="keyword">&gt;</span>(&amp;os);</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>  <a class="code hl_class" href="classgoogle_1_1_log_message_1_1_log_stream.html">LogMessage::LogStream</a>* log = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classgoogle_1_1_log_message_1_1_log_stream.html">LogMessage::LogStream</a>*<span class="keyword">&gt;</span>(&amp;os);</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>  <a class="code hl_define" href="base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a>(log &amp;&amp; log == log-&gt;<a class="code hl_function" href="classgoogle_1_1_log_message_1_1_log_stream.html#a8612256e0c83fe8524ea2df910f5d39e">self</a>())</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>      &lt;&lt; <span class="stringliteral">&quot;You must not use COUNTER with non-glog ostream&quot;</span>;</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>  os &lt;&lt; log-&gt;<a class="code hl_function" href="classgoogle_1_1_log_message_1_1_log_stream.html#a73e0d9048f393bf907a3f69033ab8a7f">ctr</a>();</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>  <span class="keywordflow">return</span> os;</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>}</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span> </div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"><a class="line" href="classgoogle_1_1_errno_log_message.html#a642ae9bfe25d95030fe6c7b0aa89b4a4"> 1494</a></span><a class="code hl_function" href="classgoogle_1_1_errno_log_message.html#a642ae9bfe25d95030fe6c7b0aa89b4a4">ErrnoLogMessage::ErrnoLogMessage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_namespace" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line,</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>                                 <a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keywordtype">int</span> ctr,</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>                                 <span class="keywordtype">void</span> (<a class="code hl_class" href="classgoogle_1_1_log_message.html">LogMessage</a>::*send_method)())</div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>    : <a class="code hl_class" href="classgoogle_1_1_log_message.html">LogMessage</a>(<a class="code hl_namespace" href="namespacefile.html">file</a>, line, severity, ctr, send_method) {}</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span> </div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"><a class="line" href="classgoogle_1_1_errno_log_message.html#acd60ba4091f3d6c1a17f9142b29db3da"> 1499</a></span><a class="code hl_function" href="classgoogle_1_1_errno_log_message.html#acd60ba4091f3d6c1a17f9142b29db3da">ErrnoLogMessage::~ErrnoLogMessage</a>() {</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>  <span class="comment">// Don&#39;t access errno directly because it may have been altered</span></div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>  <span class="comment">// while streaming the message.</span></div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>  <a class="code hl_function" href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c">stream</a>() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; <a class="code hl_function" href="namespacegoogle.html#a8688e486af1a034920af845ceba0952f">StrError</a>(<a class="code hl_function" href="classgoogle_1_1_log_message.html#a0a01fdbc8c975aae6c3dba8d00692e77">preserved_errno</a>()) &lt;&lt; <span class="stringliteral">&quot; [&quot;</span> &lt;&lt; <a class="code hl_function" href="classgoogle_1_1_log_message.html#a0a01fdbc8c975aae6c3dba8d00692e77">preserved_errno</a>()</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>           &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>;</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>}</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span> </div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"><a class="line" href="namespacegoogle.html#ad0cffd6498cbf357c5f3c1b7c3683c84"> 1506</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#ad0cffd6498cbf357c5f3c1b7c3683c84">FlushLogFiles</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> min_severity) {</div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>  <a class="code hl_function" href="classgoogle_1_1_log_destination.html#ae0bab6f35a5369aef2554e5569fffea6">LogDestination::FlushLogFiles</a>(min_severity);</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>}</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span> </div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a27fd092cfd7530a45451a8e0b0fcdf8e"> 1510</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a27fd092cfd7530a45451a8e0b0fcdf8e">FlushLogFilesUnsafe</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> min_severity) {</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>  <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a1bc1ccffe41da1564b1bec29b08fc4e1">LogDestination::FlushLogFilesUnsafe</a>(min_severity);</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>}</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span> </div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a52b012381ca169c60f696aeeb54a9d77"> 1514</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a52b012381ca169c60f696aeeb54a9d77">SetLogDestination</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* base_filename) {</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>  <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a985aad81e2a79fbd14719099bf9f788d">LogDestination::SetLogDestination</a>(severity, base_filename);</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>}</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span> </div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a9800270f9c517ac3c4f1a69d2d79d1ff"> 1518</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a9800270f9c517ac3c4f1a69d2d79d1ff">SetLogSymlink</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* symlink_basename) {</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>  <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a67f05b74958c4c9f2a0b39df9581bf1c">LogDestination::SetLogSymlink</a>(severity, symlink_basename);</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>}</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span> </div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_sink.html#a579e2c28338fc8411ddfb3789f3b901d"> 1522</a></span><a class="code hl_function" href="classgoogle_1_1_log_sink.html#a579e2c28338fc8411ddfb3789f3b901d">LogSink::~LogSink</a>() {}</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span> </div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_sink.html#a96a54d485a8e3745eabd2859e6c3bb0a"> 1524</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classgoogle_1_1_log_sink.html#a96a54d485a8e3745eabd2859e6c3bb0a">LogSink::WaitTillSent</a>() {</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>  <span class="comment">// noop default</span></div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>}</div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span> </div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_sink.html#a68c6c88e8a64d08d3c070bd014ce7172"> 1528</a></span><span class="keywordtype">string</span> <a class="code hl_function" href="classgoogle_1_1_log_sink.html#a68c6c88e8a64d08d3c070bd014ce7172">LogSink::ToString</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> severity, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_namespace" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line,</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>                         <span class="keyword">const</span> struct ::tm* tm_time, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>,</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>                         <span class="keywordtype">size_t</span> message_len) {</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>  ostringstream stream(<span class="keywordtype">string</span>(<a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, message_len));</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>  stream.fill(<span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span> </div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>  <span class="comment">// FIXME(jrvb): Updating this to use the correct value for usecs</span></div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>  <span class="comment">// requires changing the signature for both this method and</span></div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>  <span class="comment">// LogSink::send().  This change needs to be done in a separate CL</span></div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>  <span class="comment">// so subclasses of LogSink can be updated at the same time.</span></div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>  <span class="keywordtype">int</span> usecs = 0;</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span> </div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>  stream &lt;&lt; <a class="code hl_variable" href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">LogSeverityNames</a>[severity][0] &lt;&lt; setw(2) &lt;&lt; 1 + tm_time-&gt;tm_mon</div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>         &lt;&lt; setw(2) &lt;&lt; tm_time-&gt;tm_mday &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; setw(2) &lt;&lt; tm_time-&gt;tm_hour</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>         &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; setw(2) &lt;&lt; tm_time-&gt;tm_min &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; setw(2)</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>         &lt;&lt; tm_time-&gt;tm_sec &lt;&lt; <span class="charliteral">&#39;.&#39;</span> &lt;&lt; setw(6) &lt;&lt; usecs &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>)</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>         &lt;&lt; setw(5) &lt;&lt; <a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#aa5bcfef09a25e887a41b29f9ba9be836">logging_internal::GetTID</a>() &lt;&lt; setfill(<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; <a class="code hl_namespace" href="namespacefile.html">file</a></div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>         &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; line &lt;&lt; <span class="stringliteral">&quot;] &quot;</span>;</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span> </div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>  stream &lt;&lt; string(<a class="code hl_variable" href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a>, message_len);</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>  <span class="keywordflow">return</span> stream.str();</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>}</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span> </div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"><a class="line" href="namespacegoogle.html#aac637fad473b5677c3f94fb8372257b0"> 1551</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#aac637fad473b5677c3f94fb8372257b0">AddLogSink</a>(<a class="code hl_class" href="classgoogle_1_1_log_sink.html">LogSink</a>* destination) {</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>  <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a043cd6b97be276f99eea8f0ea3ece475">LogDestination::AddLogSink</a>(destination);</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>}</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span> </div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"><a class="line" href="namespacegoogle.html#afb08de7bff9aaa916db76a47bcd9077a"> 1555</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#afb08de7bff9aaa916db76a47bcd9077a">RemoveLogSink</a>(<a class="code hl_class" href="classgoogle_1_1_log_sink.html">LogSink</a>* destination) {</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>  <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a141a4160dcfa07d47161821c7e143236">LogDestination::RemoveLogSink</a>(destination);</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>}</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span> </div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a45f04ff1beb3af3882c99d3b63616dde"> 1559</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a45f04ff1beb3af3882c99d3b63616dde">SetLogFilenameExtension</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* ext) {</div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>  <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a799e2628a1c44ccc1c3017ece67f41e7">LogDestination::SetLogFilenameExtension</a>(ext);</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>}</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span> </div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a57ac69eb66761ee6406d5e4a3f33ff87"> 1563</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a57ac69eb66761ee6406d5e4a3f33ff87">SetStderrLogging</a>(<a class="code hl_typedef" href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a> min_severity) {</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>  <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a189879d36ceaa7e619dcdf55c16f98b2">LogDestination::SetStderrLogging</a>(min_severity);</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>}</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span> </div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"><a class="line" href="namespacegoogle.html#ab90a343a65dff8ffc12a5133fd8dcbaf"> 1567</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#ab90a343a65dff8ffc12a5133fd8dcbaf">LogToStderr</a>() { <a class="code hl_function" href="classgoogle_1_1_log_destination.html#a7d7631cb9c19962577211ac1a7a85c58">LogDestination::LogToStderr</a>(); }</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span> </div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"><a class="line" href="namespacegoogle_1_1base.html"> 1569</a></span><span class="keyword">namespace </span>base {</div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"><a class="line" href="namespacegoogle_1_1base_1_1internal.html"> 1570</a></span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceinternal.html">internal</a> {</div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span> </div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span><span class="keywordtype">bool</span> <a class="code hl_function" href="namespacegoogle_1_1base_1_1internal.html#abad0e8912e4c1231b44d52109bf3c68f">GetExitOnDFatal</a>();</div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"><a class="line" href="namespacegoogle_1_1base_1_1internal.html#abad0e8912e4c1231b44d52109bf3c68f"> 1573</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="namespacegoogle_1_1base_1_1internal.html#abad0e8912e4c1231b44d52109bf3c68f">GetExitOnDFatal</a>() {</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>  absl::MutexLock l(&amp;<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacegoogle.html#a5093faa29d594a5fe593decdd4de8427">exit_on_dfatal</a>;</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>}</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span> </div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span><span class="comment">// Determines whether we exit the program for a LOG(DFATAL) message in</span></div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span><span class="comment">// debug mode.  It does this by skipping the call to Fail/FailQuietly.</span></div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span><span class="comment">// This is intended for testing only.</span></div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span><span class="comment">//</span></div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span><span class="comment">// This can have some effects on LOG(FATAL) as well.  Failure messages</span></div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span><span class="comment">// are always allocated (rather than sharing a buffer), the crash</span></div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span><span class="comment">// reason is not recorded, the &quot;gwq&quot; status message is not updated,</span></div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span><span class="comment">// and the stack trace is not recorded.  The LOG(FATAL) *will* still</span></div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span><span class="comment">// exit the program.  Since this function is used only in testing,</span></div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span><span class="comment">// these differences are acceptable.</span></div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle_1_1base_1_1internal.html#a794f86364cecaf6c630c587cc2ad002c">SetExitOnDFatal</a>(<span class="keywordtype">bool</span> <a class="code hl_variable" href="demon__profiler_8cc.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a>);</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"><a class="line" href="namespacegoogle_1_1base_1_1internal.html#a794f86364cecaf6c630c587cc2ad002c"> 1589</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle_1_1base_1_1internal.html#a794f86364cecaf6c630c587cc2ad002c">SetExitOnDFatal</a>(<span class="keywordtype">bool</span> <a class="code hl_variable" href="demon__profiler_8cc.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a>) {</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>  absl::MutexLock l(&amp;<a class="code hl_variable" href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">log_mutex</a>);</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>  <a class="code hl_variable" href="namespacegoogle.html#a5093faa29d594a5fe593decdd4de8427">exit_on_dfatal</a> = <a class="code hl_variable" href="demon__profiler_8cc.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a>;</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>}</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span> </div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>}  <span class="comment">// namespace internal</span></div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>}  <span class="comment">// namespace base</span></div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span> </div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span><span class="comment">// Shell-escaping as we need to shell out ot /bin/mail.</span></div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"><a class="line" href="namespacegoogle.html#aa68b268a02d18e2965e36f4211777db6"> 1598</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="namespacegoogle.html#aa68b268a02d18e2965e36f4211777db6">kDontNeedShellEscapeChars</a>[] =</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>    <span class="stringliteral">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span></div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>    <span class="stringliteral">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span></div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>    <span class="stringliteral">&quot;0123456789+-_.=/:,@&quot;</span>;</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span> </div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"><a class="line" href="namespacegoogle.html#aa0499f87843a0da8d1615089b60ae4eb"> 1603</a></span><span class="keyword">static</span> <span class="keywordtype">string</span> <a class="code hl_function" href="namespacegoogle.html#aa0499f87843a0da8d1615089b60ae4eb">ShellEscape</a>(<span class="keyword">const</span> <span class="keywordtype">string</span>&amp; src) {</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>  <span class="keywordtype">string</span> result;</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>  <span class="keywordflow">if</span> (!src.empty() &amp;&amp;  <span class="comment">// empty string needs quotes</span></div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>      src.find_first_not_of(<a class="code hl_variable" href="namespacegoogle.html#aa68b268a02d18e2965e36f4211777db6">kDontNeedShellEscapeChars</a>) == string::npos) {</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>    <span class="comment">// only contains chars that don&#39;t need quotes; it&#39;s fine</span></div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>    result.assign(src);</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (src.find_first_of(<span class="charliteral">&#39;\&#39;&#39;</span>) == string::npos) {</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>    <span class="comment">// no single quotes; just wrap it in single quotes</span></div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>    result.assign(<span class="stringliteral">&quot;&#39;&quot;</span>);</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>    result.append(src);</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>    result.append(<span class="stringliteral">&quot;&#39;&quot;</span>);</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>    <span class="comment">// needs double quote escaping</span></div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>    result.assign(<span class="stringliteral">&quot;\&quot;&quot;</span>);</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; src.size(); ++i) {</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>      <span class="keywordflow">switch</span> (src[i]) {</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;\\&#39;</span>:</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;$&#39;</span>:</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;&quot;&#39;</span>:</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;`&#39;</span>:</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>          result.append(<span class="stringliteral">&quot;\\&quot;</span>);</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>      }</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>      result.append(src, i, 1);</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>    }</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>    result.append(<span class="stringliteral">&quot;\&quot;&quot;</span>);</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>  }</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>  <span class="keywordflow">return</span> result;</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>}</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span> </div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"><a class="line" href="namespacegoogle.html#af369c55174d4dd5587c539e01158c905"> 1632</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#af369c55174d4dd5587c539e01158c905">GetTempDirectories</a>(vector&lt;string&gt;* list) {</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>  list-&gt;clear();</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span><span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>  <span class="comment">// On windows we&#39;ll try to find a directory in this order:</span></div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>  <span class="comment">//   C:/Documents &amp; Settings/whomever/TEMP (or whatever GetTempPath() is)</span></div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>  <span class="comment">//   C:/TMP/</span></div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>  <span class="comment">//   C:/TEMP/</span></div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>  <span class="comment">//   C:/WINDOWS/ or C:/WINNT/</span></div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>  <span class="comment">//   .</span></div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>  <span class="keywordtype">char</span> tmp[MAX_PATH];</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>  <span class="keywordflow">if</span> (GetTempPathA(MAX_PATH, tmp)) list-&gt;push_back(tmp);</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>  list-&gt;push_back(<span class="stringliteral">&quot;C:\\tmp\\&quot;</span>);</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>  list-&gt;push_back(<span class="stringliteral">&quot;C:\\temp\\&quot;</span>);</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>  <span class="comment">// Directories, in order of preference. If we find a dir that</span></div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>  <span class="comment">// exists, we stop adding other less-preferred dirs</span></div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>  <span class="keyword">const</span> <span class="keywordtype">char</span>* candidates[] = {</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>      <span class="comment">// Non-null only during unittest/regtest</span></div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>      getenv(<span class="stringliteral">&quot;TEST_TMPDIR&quot;</span>),</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span> </div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>      <span class="comment">// Explicitly-supplied temp dirs</span></div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>      getenv(<span class="stringliteral">&quot;TMPDIR&quot;</span>),</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>      getenv(<span class="stringliteral">&quot;TMP&quot;</span>),</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span> </div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>      <span class="comment">// If all else fails</span></div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>      <span class="stringliteral">&quot;/tmp&quot;</span>,</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>  };</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span> </div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; ABSL_ARRAYSIZE(candidates); i++) {</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* d = candidates[i];</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>    <span class="keywordflow">if</span> (!d) <span class="keywordflow">continue</span>;  <span class="comment">// Empty env var</span></div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span> </div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>    <span class="comment">// Make sure we don&#39;t surprise anyone who&#39;s expecting a &#39;/&#39;</span></div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>    <span class="keywordtype">string</span> dstr = d;</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>    <span class="keywordflow">if</span> (dstr[dstr.size() - 1] != <span class="charliteral">&#39;/&#39;</span>) {</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>      dstr += <span class="stringliteral">&quot;/&quot;</span>;</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>    }</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>    list-&gt;push_back(dstr);</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span> </div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>    <span class="keyword">struct </span>stat statbuf;</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>    <span class="keywordflow">if</span> (!stat(d, &amp;statbuf) &amp;&amp; S_ISDIR(statbuf.st_mode)) {</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>      <span class="comment">// We found a dir that exists - we&#39;re done.</span></div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>    }</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>  }</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span> </div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>}</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span> </div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae"> 1681</a></span><span class="keyword">static</span> vector&lt;string&gt;* <a class="code hl_variable" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>;</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span> </div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a9145952db85676dbaf27080ab7173b97"> 1683</a></span><span class="keyword">const</span> vector&lt;string&gt;&amp; <a class="code hl_function" href="namespacegoogle.html#a9145952db85676dbaf27080ab7173b97">GetLoggingDirectories</a>() {</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>  <span class="comment">// Not strictly thread-safe but we&#39;re called early in InitGoogle().</span></div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>    <a class="code hl_variable" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a> = <span class="keyword">new</span> vector&lt;string&gt;;</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span> </div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>    <span class="keywordflow">if</span> (!absl::GetFlag(FLAGS_log_dir).empty()) {</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>      <span class="comment">// A dir was specified, we should use it</span></div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>      <a class="code hl_variable" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>-&gt;push_back(absl::GetFlag(FLAGS_log_dir).c_str());</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>      <a class="code hl_function" href="namespacegoogle.html#af369c55174d4dd5587c539e01158c905">GetTempDirectories</a>(<a class="code hl_variable" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>);</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span><span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>      <span class="keywordtype">char</span> tmp[MAX_PATH];</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>      <span class="keywordflow">if</span> (GetWindowsDirectoryA(tmp, MAX_PATH))</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>        <a class="code hl_variable" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>-&gt;push_back(tmp);</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>      <a class="code hl_variable" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>-&gt;push_back(<span class="stringliteral">&quot;.\\&quot;</span>);</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>      <a class="code hl_variable" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>-&gt;push_back(<span class="stringliteral">&quot;./&quot;</span>);</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>    }</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>  }</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>  <span class="keywordflow">return</span> *<a class="code hl_variable" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>;</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>}</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span> </div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"><a class="line" href="namespacegoogle.html#ae0f8ace9dff19cd627f09dbfaa8aae1b"> 1706</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#ae0f8ace9dff19cd627f09dbfaa8aae1b">TestOnly_ClearLoggingDirectoriesList</a>() {</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>  fprintf(stderr,</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>          <span class="stringliteral">&quot;TestOnly_ClearLoggingDirectoriesList should only be &quot;</span></div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>          <span class="stringliteral">&quot;called from test code.\n&quot;</span>);</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>  <span class="keyword">delete</span> <a class="code hl_variable" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>;</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>  <a class="code hl_variable" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>}</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span> </div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a63b37be54b6c05f2d1523081b4089c19"> 1714</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a63b37be54b6c05f2d1523081b4089c19">GetExistingTempDirectories</a>(vector&lt;string&gt;* list) {</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>  <a class="code hl_function" href="namespacegoogle.html#af369c55174d4dd5587c539e01158c905">GetTempDirectories</a>(list);</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>  vector&lt;string&gt;::iterator i_dir = list-&gt;begin();</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>  <span class="keywordflow">while</span> (i_dir != list-&gt;end()) {</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>    <span class="comment">// zero arg to access means test for existence; no constant</span></div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>    <span class="comment">// defined on windows</span></div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>    <span class="keywordflow">if</span> (access(i_dir-&gt;c_str(), 0)) {</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>      i_dir = list-&gt;erase(i_dir);</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>      ++i_dir;</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>    }</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>  }</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>}</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span> </div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span><span class="comment">// Helper functions for string comparisons.</span></div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"><a class="line" href="base_2logging_8cc.html#a5db64b999a212e4bd474880ea057009b"> 1729</a></span><span class="preprocessor">#define DEFINE_CHECK_STROP_IMPL(name, func, expected)                         \</span></div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span><span class="preprocessor">  string* Check##func##expected##Impl(const char* s1, const char* s2,         \</span></div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span><span class="preprocessor">                                      const char* names) {                    \</span></div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span><span class="preprocessor">    bool equal = s1 == s2 || (s1 &amp;&amp; s2 &amp;&amp; !func(s1, s2));                     \</span></div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span><span class="preprocessor">    if (equal == expected) {                                                  \</span></div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span><span class="preprocessor">      return nullptr;                                                         \</span></div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span><span class="preprocessor">    } else {                                                                  \</span></div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span><span class="preprocessor">      ostringstream ss;                                                       \</span></div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span><span class="preprocessor">      if (!s1) s1 = &quot;&quot;</span>;                                                       \</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>      if (!s2) s2 = &quot;&quot;;                                                       \</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>      ss &lt;&lt; #name &quot; failed: &quot; &lt;&lt; names &lt;&lt; &quot; (&quot; &lt;&lt; s1 &lt;&lt; &quot; vs. &quot; &lt;&lt; s2 &lt;&lt; &quot;)&quot;; \</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>      return new string(ss.str());                                            \</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>    }                                                                         \</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>  }</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span><a class="code hl_define" href="base_2logging_8cc.html#a5db64b999a212e4bd474880ea057009b">DEFINE_CHECK_STROP_IMPL</a>(<a class="code hl_define" href="base_2logging_8h.html#ad16cc5f247382150f402b7c9365cb4e7">CHECK_STREQ</a>, strcmp, <span class="keyword">true</span>)</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span><a class="code hl_define" href="base_2logging_8cc.html#a5db64b999a212e4bd474880ea057009b">DEFINE_CHECK_STROP_IMPL</a>(<a class="code hl_define" href="base_2logging_8h.html#a3f16e4372f664c60d5dd95421a171a4b">CHECK_STRNE</a>, strcmp, false)</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span><a class="code hl_define" href="base_2logging_8cc.html#a5db64b999a212e4bd474880ea057009b">DEFINE_CHECK_STROP_IMPL</a>(<a class="code hl_define" href="base_2logging_8h.html#a857e59ac16481af7fc86f54c774f84c9">CHECK_STRCASEEQ</a>, strcasecmp, true)</div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span><a class="code hl_define" href="base_2logging_8cc.html#a5db64b999a212e4bd474880ea057009b">DEFINE_CHECK_STROP_IMPL</a>(<a class="code hl_define" href="base_2logging_8h.html#ab8e59a3e48687f8db849d28901f0bac8">CHECK_STRCASENE</a>, strcasecmp, false)</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span><span class="preprocessor">#undef DEFINE_CHECK_STROP_IMPL</span></div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span> </div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a8c3a96b28a44e635d84d6fb2517b411b"> 1749</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="namespacegoogle.html#a8c3a96b28a44e635d84d6fb2517b411b">posix_strerror_r</a>(<span class="keywordtype">int</span> err, <span class="keywordtype">char</span>* buf, <span class="keywordtype">size_t</span> len) {</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>  <span class="comment">// Sanity check input parameters</span></div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>  <span class="keywordflow">if</span> (buf == <span class="keyword">nullptr</span> || len &lt;= 0) {</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>    errno = EINVAL;</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>  }</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span> </div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>  <span class="comment">// Reset buf and errno, and try calling whatever version of strerror_r()</span></div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>  <span class="comment">// is implemented by glibc</span></div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>  buf[0] = <span class="charliteral">&#39;\000&#39;</span>;</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>  <span class="keywordtype">int</span> old_errno = errno;</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>  errno = 0;</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>  <span class="keywordtype">char</span>* rc = <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span>(strerror_r(err, buf, len));</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span> </div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>  <span class="comment">// Both versions set errno on failure</span></div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>  <span class="keywordflow">if</span> (errno) {</div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>    <span class="comment">// Should already be there, but better safe than sorry</span></div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>    buf[0] = <span class="charliteral">&#39;\000&#39;</span>;</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>  }</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>  errno = old_errno;</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span> </div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>  <span class="comment">// POSIX is vague about whether the string will be terminated, although</span></div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>  <span class="comment">// is indirectly implies that typically ERANGE will be returned, instead</span></div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>  <span class="comment">// of truncating the string. This is different from the GNU implementation.</span></div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>  <span class="comment">// We play it safe by always terminating the string explicitly.</span></div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>  buf[len - 1] = <span class="charliteral">&#39;\000&#39;</span>;</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span> </div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>  <span class="comment">// If the function succeeded, we can use its exit code to determine the</span></div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>  <span class="comment">// semantics implemented by glibc</span></div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>  <span class="keywordflow">if</span> (!rc) {</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>    <span class="comment">// GNU semantics detected</span></div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>    <span class="keywordflow">if</span> (rc == buf) {</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>      buf[0] = <span class="charliteral">&#39;\000&#39;</span>;</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span><span class="preprocessor">#if defined(OS_MACOSX) || defined(OS_FREEBSD) || defined(OS_OPENBSD)</span></div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>      <span class="keywordflow">if</span> (<span class="keyword">reinterpret_cast&lt;</span>intptr_t<span class="keyword">&gt;</span>(rc) &lt; sys_nerr) {</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>        <span class="comment">// This means an error on MacOSX or FreeBSD.</span></div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>      }</div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>      strncat(buf, rc, len - 1);</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>    }</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>  }</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>}</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span> </div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a8688e486af1a034920af845ceba0952f"> 1799</a></span><span class="keywordtype">string</span> <a class="code hl_function" href="namespacegoogle.html#a8688e486af1a034920af845ceba0952f">StrError</a>(<span class="keywordtype">int</span> err) {</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>  <span class="keywordtype">char</span> buf[100];</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>  <span class="keywordtype">int</span> rc = <a class="code hl_function" href="namespacegoogle.html#a8c3a96b28a44e635d84d6fb2517b411b">posix_strerror_r</a>(err, buf, <span class="keyword">sizeof</span>(buf));</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>  <span class="keywordflow">if</span> ((rc &lt; 0) || (buf[0] == <span class="charliteral">&#39;\000&#39;</span>)) {</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>    snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;Error number %d&quot;</span>, err);</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>  }</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>  <span class="keywordflow">return</span> buf;</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>}</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span> </div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message_fatal.html#a4a1f973130ae38c8c9799cd8af1f2873"> 1808</a></span><a class="code hl_function" href="classgoogle_1_1_log_message_fatal.html#a4a1f973130ae38c8c9799cd8af1f2873">LogMessageFatal::LogMessageFatal</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_namespace" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line)</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>    : <a class="code hl_class" href="classgoogle_1_1_log_message.html">LogMessage</a>(<a class="code hl_namespace" href="namespacefile.html">file</a>, line, <a class="code hl_variable" href="namespacegoogle.html#ac452c4c8ec1cbc24dd074e260aa0b617">GLOG_FATAL</a>) {}</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span> </div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message_fatal.html#a245db1b5d0cfab33f699682a59539a00"> 1811</a></span><a class="code hl_function" href="classgoogle_1_1_log_message_fatal.html#a4a1f973130ae38c8c9799cd8af1f2873">LogMessageFatal::LogMessageFatal</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_namespace" href="namespacefile.html">file</a>, <span class="keywordtype">int</span> line,</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>                                 <span class="keyword">const</span> <a class="code hl_struct" href="structgoogle_1_1_check_op_string.html">CheckOpString</a>&amp; result)</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>    : <a class="code hl_class" href="classgoogle_1_1_log_message.html">LogMessage</a>(<a class="code hl_namespace" href="namespacefile.html">file</a>, line, result) {}</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span> </div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"><a class="line" href="classgoogle_1_1_log_message_fatal.html#ac9c99773209b46c9f963028abea613e2"> 1815</a></span><a class="code hl_function" href="classgoogle_1_1_log_message_fatal.html#ac9c99773209b46c9f963028abea613e2">LogMessageFatal::~LogMessageFatal</a>() {</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>  <a class="code hl_function" href="classgoogle_1_1_log_message.html#a0e2644b2df3c228e8d71a55b60723f31">Flush</a>();</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>  <a class="code hl_function" href="classgoogle_1_1_log_message.html#aeb92d4addb41255c9732cacfcb54f795">LogMessage::Fail</a>();</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>}</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span> </div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span><span class="keyword">namespace </span>base {</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span> </div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"><a class="line" href="classgoogle_1_1base_1_1_check_op_message_builder.html#a1333dd08e59ead3b1e40c82981c3f805"> 1822</a></span><a class="code hl_function" href="classgoogle_1_1base_1_1_check_op_message_builder.html#a1333dd08e59ead3b1e40c82981c3f805">CheckOpMessageBuilder::CheckOpMessageBuilder</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* exprtext)</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>    : stream_(new ostringstream) {</div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>  *stream_ &lt;&lt; exprtext &lt;&lt; <span class="stringliteral">&quot; (&quot;</span>;</div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>}</div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span> </div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"><a class="line" href="classgoogle_1_1base_1_1_check_op_message_builder.html#aaa8346df261ac8c17bb4c36b84330f8c"> 1827</a></span><a class="code hl_function" href="classgoogle_1_1base_1_1_check_op_message_builder.html#aaa8346df261ac8c17bb4c36b84330f8c">CheckOpMessageBuilder::~CheckOpMessageBuilder</a>() { <span class="keyword">delete</span> stream_; }</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span> </div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"><a class="line" href="classgoogle_1_1base_1_1_check_op_message_builder.html#ae33b6f12ae75f7312d6bfd59ba4e7509"> 1829</a></span>ostream* <a class="code hl_function" href="classgoogle_1_1base_1_1_check_op_message_builder.html#ae33b6f12ae75f7312d6bfd59ba4e7509">CheckOpMessageBuilder::ForVar2</a>() {</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>  *stream_ &lt;&lt; <span class="stringliteral">&quot; vs. &quot;</span>;</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>  <span class="keywordflow">return</span> stream_;</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>}</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span> </div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"><a class="line" href="classgoogle_1_1base_1_1_check_op_message_builder.html#a5722d0eb48c3be72479813d564dfebbc"> 1834</a></span><span class="keywordtype">string</span>* <a class="code hl_function" href="classgoogle_1_1base_1_1_check_op_message_builder.html#a5722d0eb48c3be72479813d564dfebbc">CheckOpMessageBuilder::NewString</a>() {</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>  *stream_ &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>  <span class="keywordflow">return</span> <span class="keyword">new</span> string(stream_-&gt;str());</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>}</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span> </div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>}  <span class="comment">// namespace base</span></div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span> </div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a875b970c781b18261024464edf1c1286"> 1842</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a875b970c781b18261024464edf1c1286">MakeCheckOpValueString</a>(std::ostream* os, <span class="keyword">const</span> <span class="keywordtype">char</span>&amp; v) {</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>  <span class="keywordflow">if</span> (v &gt;= 32 &amp;&amp; v &lt;= 126) {</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>    (*os) &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; v &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>    (*os) &lt;&lt; <span class="stringliteral">&quot;char value &quot;</span> &lt;&lt; (int16_t)v;</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>  }</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>}</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span> </div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a0265f7173e0072e6207719ad573dd444"> 1851</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a875b970c781b18261024464edf1c1286">MakeCheckOpValueString</a>(std::ostream* os, <span class="keyword">const</span> <span class="keywordtype">signed</span> <span class="keywordtype">char</span>&amp; v) {</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>  <span class="keywordflow">if</span> (v &gt;= 32 &amp;&amp; v &lt;= 126) {</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>    (*os) &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; v &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>    (*os) &lt;&lt; <span class="stringliteral">&quot;signed char value &quot;</span> &lt;&lt; (int16_t)v;</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>  }</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>}</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span> </div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a9d59a5ffb3896f35be3ca92f73e43c41"> 1860</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a875b970c781b18261024464edf1c1286">MakeCheckOpValueString</a>(std::ostream* os, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>&amp; v) {</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>  <span class="keywordflow">if</span> (v &gt;= 32 &amp;&amp; v &lt;= 126) {</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>    (*os) &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; v &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>    (*os) &lt;&lt; <span class="stringliteral">&quot;unsigned char value &quot;</span> &lt;&lt; (uint16_t)v;</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>  }</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>}</div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span> </div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a1ddbfc352e4241d606e40b0f2b1abb2b"> 1869</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a875b970c781b18261024464edf1c1286">MakeCheckOpValueString</a>(std::ostream* os, <span class="keyword">const</span> std::nullptr_t&amp; v) {</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>  (*os) &lt;&lt; <span class="stringliteral">&quot;nullptr&quot;</span>;</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>}</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span> </div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a1749056ff206ebc4f581e6bc0bae841d"> 1873</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a1749056ff206ebc4f581e6bc0bae841d">InitGoogleLogging</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* argv0) {</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>  <a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#a2cfbf632d17403200c1f304a45831c58">logging_internal::InitGoogleLoggingUtilities</a>(argv0);</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>}</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span> </div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"><a class="line" href="namespacegoogle.html#a70bf67dee61470b69573aae771282e30"> 1877</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacegoogle.html#a70bf67dee61470b69573aae771282e30">ShutdownGoogleLogging</a>() {</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>  <a class="code hl_function" href="namespacegoogle_1_1logging__internal.html#ade3847fd506fd2139eba5bfb459e74ca">logging_internal::ShutdownGoogleLoggingUtilities</a>();</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>  <a class="code hl_function" href="classgoogle_1_1_log_destination.html#acf47431892ab03fd10d35def7d129a1a">LogDestination::DeleteLogDestinations</a>();</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>  <span class="keyword">delete</span> <a class="code hl_variable" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a>;</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>  <a class="code hl_variable" href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">logging_directories_list</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>}</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span> </div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>}  <span class="comment">// namespace google</span></div>
<div class="ttc" id="aalldiff__cst_8cc_html_ad10edae0a852d72fb76afb1c77735045"><div class="ttname"><a href="alldiff__cst_8cc.html#ad10edae0a852d72fb76afb1c77735045">min</a></div><div class="ttdeci">int64_t min</div><div class="ttdef"><b>Definition:</b> <a href="alldiff__cst_8cc_source.html#l00139">alldiff_cst.cc:139</a></div></div>
<div class="ttc" id="abase_2logging_8cc_html_a256a5721249aa3309437212cc21a9fe4"><div class="ttname"><a href="base_2logging_8cc.html#a256a5721249aa3309437212cc21a9fe4">PATH_SEPARATOR</a></div><div class="ttdeci">#define PATH_SEPARATOR</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00176">base/logging.cc:176</a></div></div>
<div class="ttc" id="abase_2logging_8cc_html_a31902dd802cefb2e7082b1f31fc0ab8b"><div class="ttname"><a href="base_2logging_8cc.html#a31902dd802cefb2e7082b1f31fc0ab8b">ABSL_DECLARE_FLAG</a></div><div class="ttdeci">ABSL_DECLARE_FLAG(bool, log_prefix)</div></div>
<div class="ttc" id="abase_2logging_8cc_html_a32e063544df3df8e161e59c355c5e419"><div class="ttname"><a href="base_2logging_8cc.html#a32e063544df3df8e161e59c355c5e419">ABSL_FLAG</a></div><div class="ttdeci">ABSL_FLAG(bool, logtostderr, false, &quot;log messages go to stderr instead of logfiles&quot;)</div></div>
<div class="ttc" id="abase_2logging_8cc_html_a33ba791d9435fed28cc5340f3da2902f"><div class="ttname"><a href="base_2logging_8cc.html#a33ba791d9435fed28cc5340f3da2902f">DefaultLogDir</a></div><div class="ttdeci">static const char * DefaultLogDir()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00141">base/logging.cc:141</a></div></div>
<div class="ttc" id="abase_2logging_8cc_html_a569b19919e8d89c64fbe5d5209466b1a"><div class="ttname"><a href="base_2logging_8cc.html#a569b19919e8d89c64fbe5d5209466b1a">GetHostName</a></div><div class="ttdeci">static void GetHostName(string *hostname)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00203">base/logging.cc:203</a></div></div>
<div class="ttc" id="abase_2logging_8cc_html_a5db64b999a212e4bd474880ea057009b"><div class="ttname"><a href="base_2logging_8cc.html#a5db64b999a212e4bd474880ea057009b">DEFINE_CHECK_STROP_IMPL</a></div><div class="ttdeci">#define DEFINE_CHECK_STROP_IMPL(name, func, expected)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01729">base/logging.cc:1729</a></div></div>
<div class="ttc" id="abase_2logging_8cc_html_aafcef7778dce8f10842b9fa8f1266639"><div class="ttname"><a href="base_2logging_8cc.html#aafcef7778dce8f10842b9fa8f1266639">TerminalSupportsColor</a></div><div class="ttdeci">static bool TerminalSupportsColor()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00223">base/logging.cc:223</a></div></div>
<div class="ttc" id="abase_2logging_8cc_html_adc29f16e0cd8a868b42ac92d5fc437b9"><div class="ttname"><a href="base_2logging_8cc.html#adc29f16e0cd8a868b42ac92d5fc437b9">FixFlagsAndEnvironmentForSwig</a></div><div class="ttdeci">void FixFlagsAndEnvironmentForSwig()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00061">base/logging.cc:61</a></div></div>
<div class="ttc" id="abase_2logging_8cc_html_afaad0abfed30e8ee5ae7d27b5ecea29f"><div class="ttname"><a href="base_2logging_8cc.html#afaad0abfed30e8ee5ae7d27b5ecea29f">ATTRIBUTE_NORETURN</a></div><div class="ttdeci">#define ATTRIBUTE_NORETURN</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01372">base/logging.cc:1372</a></div></div>
<div class="ttc" id="abase_2logging_8h_html"><div class="ttname"><a href="base_2logging_8h.html">logging.h</a></div></div>
<div class="ttc" id="abase_2logging_8h_html_a3e1cfef60e774a81f30eaddf26a3a274"><div class="ttname"><a href="base_2logging_8h.html#a3e1cfef60e774a81f30eaddf26a3a274">CHECK</a></div><div class="ttdeci">#define CHECK(condition)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00495">base/logging.h:495</a></div></div>
<div class="ttc" id="abase_2logging_8h_html_a3f16e4372f664c60d5dd95421a171a4b"><div class="ttname"><a href="base_2logging_8h.html#a3f16e4372f664c60d5dd95421a171a4b">CHECK_STRNE</a></div><div class="ttdeci">#define CHECK_STRNE(s1, s2)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00742">base/logging.h:742</a></div></div>
<div class="ttc" id="abase_2logging_8h_html_a4bd2e815ca2f702a4b6aa744b1ff3b82"><div class="ttname"><a href="base_2logging_8h.html#a4bd2e815ca2f702a4b6aa744b1ff3b82">CHECK_LT</a></div><div class="ttdeci">#define CHECK_LT(val1, val2)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00706">base/logging.h:706</a></div></div>
<div class="ttc" id="abase_2logging_8h_html_a7cc25402ecd7591b4c39934dd656b1f9"><div class="ttname"><a href="base_2logging_8h.html#a7cc25402ecd7591b4c39934dd656b1f9">CHECK_GE</a></div><div class="ttdeci">#define CHECK_GE(val1, val2)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00707">base/logging.h:707</a></div></div>
<div class="ttc" id="abase_2logging_8h_html_a857e59ac16481af7fc86f54c774f84c9"><div class="ttname"><a href="base_2logging_8h.html#a857e59ac16481af7fc86f54c774f84c9">CHECK_STRCASEEQ</a></div><div class="ttdeci">#define CHECK_STRCASEEQ(s1, s2)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00743">base/logging.h:743</a></div></div>
<div class="ttc" id="abase_2logging_8h_html_ab8e59a3e48687f8db849d28901f0bac8"><div class="ttname"><a href="base_2logging_8h.html#ab8e59a3e48687f8db849d28901f0bac8">CHECK_STRCASENE</a></div><div class="ttdeci">#define CHECK_STRCASENE(s1, s2)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00744">base/logging.h:744</a></div></div>
<div class="ttc" id="abase_2logging_8h_html_accad43a85d781d53381cd53a9894b6ae"><div class="ttname"><a href="base_2logging_8h.html#accad43a85d781d53381cd53a9894b6ae">LOG</a></div><div class="ttdeci">#define LOG(severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00420">base/logging.h:420</a></div></div>
<div class="ttc" id="abase_2logging_8h_html_ad16cc5f247382150f402b7c9365cb4e7"><div class="ttname"><a href="base_2logging_8h.html#ad16cc5f247382150f402b7c9365cb4e7">CHECK_STREQ</a></div><div class="ttdeci">#define CHECK_STREQ(s1, s2)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00741">base/logging.h:741</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_errno_log_message_html_a642ae9bfe25d95030fe6c7b0aa89b4a4"><div class="ttname"><a href="classgoogle_1_1_errno_log_message.html#a642ae9bfe25d95030fe6c7b0aa89b4a4">google::ErrnoLogMessage::ErrnoLogMessage</a></div><div class="ttdeci">ErrnoLogMessage(const char *file, int line, LogSeverity severity, int ctr, void(LogMessage::*send_method)())</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01494">base/logging.cc:1494</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_errno_log_message_html_acd60ba4091f3d6c1a17f9142b29db3da"><div class="ttname"><a href="classgoogle_1_1_errno_log_message.html#acd60ba4091f3d6c1a17f9142b29db3da">google::ErrnoLogMessage::~ErrnoLogMessage</a></div><div class="ttdeci">~ErrnoLogMessage()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01499">base/logging.cc:1499</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_destination_html"><div class="ttname"><a href="classgoogle_1_1_log_destination.html">google::LogDestination</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00426">base/logging.cc:426</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_destination_html_a043cd6b97be276f99eea8f0ea3ece475"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a043cd6b97be276f99eea8f0ea3ece475">google::LogDestination::AddLogSink</a></div><div class="ttdeci">static void AddLogSink(LogSink *destination)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00572">base/logging.cc:572</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_destination_html_a141a4160dcfa07d47161821c7e143236"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a141a4160dcfa07d47161821c7e143236">google::LogDestination::RemoveLogSink</a></div><div class="ttdeci">static void RemoveLogSink(LogSink *destination)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00580">base/logging.cc:580</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_destination_html_a189879d36ceaa7e619dcdf55c16f98b2"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a189879d36ceaa7e619dcdf55c16f98b2">google::LogDestination::SetStderrLogging</a></div><div class="ttdeci">static void SetStderrLogging(LogSeverity min_severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00605">base/logging.cc:605</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_destination_html_a1bc1ccffe41da1564b1bec29b08fc4e1"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a1bc1ccffe41da1564b1bec29b08fc4e1">google::LogDestination::FlushLogFilesUnsafe</a></div><div class="ttdeci">static void FlushLogFilesUnsafe(int min_severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00530">base/logging.cc:530</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_destination_html_a67f05b74958c4c9f2a0b39df9581bf1c"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a67f05b74958c4c9f2a0b39df9581bf1c">google::LogDestination::SetLogSymlink</a></div><div class="ttdeci">static void SetLogSymlink(LogSeverity severity, const char *symlink_basename)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00564">base/logging.cc:564</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_destination_html_a799e2628a1c44ccc1c3017ece67f41e7"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a799e2628a1c44ccc1c3017ece67f41e7">google::LogDestination::SetLogFilenameExtension</a></div><div class="ttdeci">static void SetLogFilenameExtension(const char *filename_extension)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00596">base/logging.cc:596</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_destination_html_a7d7631cb9c19962577211ac1a7a85c58"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a7d7631cb9c19962577211ac1a7a85c58">google::LogDestination::LogToStderr</a></div><div class="ttdeci">static void LogToStderr()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00613">base/logging.cc:613</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_destination_html_a985aad81e2a79fbd14719099bf9f788d"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#a985aad81e2a79fbd14719099bf9f788d">google::LogDestination::SetLogDestination</a></div><div class="ttdeci">static void SetLogDestination(LogSeverity severity, const char *base_filename)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00555">base/logging.cc:555</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_destination_html_acf47431892ab03fd10d35def7d129a1a"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#acf47431892ab03fd10d35def7d129a1a">google::LogDestination::DeleteLogDestinations</a></div><div class="ttdeci">static void DeleteLogDestinations()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00737">base/logging.cc:737</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_destination_html_ad432ed153c840101edfd4af74510c846"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#ad432ed153c840101edfd4af74510c846">google::LogDestination::terminal_supports_color</a></div><div class="ttdeci">static const bool &amp; terminal_supports_color()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00452">base/logging.cc:452</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_destination_html_ae015332540cd90572adfe5e5588227c6"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#ae015332540cd90572adfe5e5588227c6">google::LogDestination::hostname</a></div><div class="ttdeci">static const string &amp; hostname()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00517">base/logging.cc:517</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_destination_html_ae0bab6f35a5369aef2554e5569fffea6"><div class="ttname"><a href="classgoogle_1_1_log_destination.html#ae0bab6f35a5369aef2554e5569fffea6">google::LogDestination::FlushLogFiles</a></div><div class="ttdeci">static void FlushLogFiles(int min_severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00543">base/logging.cc:543</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_1_1_log_stream_html"><div class="ttname"><a href="classgoogle_1_1_log_message_1_1_log_stream.html">google::LogMessage::LogStream</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01036">base/logging.h:1036</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_1_1_log_stream_html_a2752f4361bbc1b5a3158ebaf821d97b4"><div class="ttname"><a href="classgoogle_1_1_log_message_1_1_log_stream.html#a2752f4361bbc1b5a3158ebaf821d97b4">google::LogMessage::LogStream::pcount</a></div><div class="ttdeci">size_t pcount() const</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01049">base/logging.h:1049</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_1_1_log_stream_html_a73e0d9048f393bf907a3f69033ab8a7f"><div class="ttname"><a href="classgoogle_1_1_log_message_1_1_log_stream.html#a73e0d9048f393bf907a3f69033ab8a7f">google::LogMessage::LogStream::ctr</a></div><div class="ttdeci">int ctr() const</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01044">base/logging.h:1044</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_1_1_log_stream_html_a8612256e0c83fe8524ea2df910f5d39e"><div class="ttname"><a href="classgoogle_1_1_log_message_1_1_log_stream.html#a8612256e0c83fe8524ea2df910f5d39e">google::LogMessage::LogStream::self</a></div><div class="ttdeci">LogStream * self() const</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01046">base/logging.h:1046</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_1_1_log_stream_html_ae8ceb65aeef61f5cebbd0e2860c6d7c3"><div class="ttname"><a href="classgoogle_1_1_log_message_1_1_log_stream.html#ae8ceb65aeef61f5cebbd0e2860c6d7c3">google::LogMessage::LogStream::set_ctr</a></div><div class="ttdeci">void set_ctr(int ctr)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01045">base/logging.h:1045</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_fatal_html_a4a1f973130ae38c8c9799cd8af1f2873"><div class="ttname"><a href="classgoogle_1_1_log_message_fatal.html#a4a1f973130ae38c8c9799cd8af1f2873">google::LogMessageFatal::LogMessageFatal</a></div><div class="ttdeci">LogMessageFatal(const char *file, int line)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01808">base/logging.cc:1808</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_fatal_html_ac9c99773209b46c9f963028abea613e2"><div class="ttname"><a href="classgoogle_1_1_log_message_fatal.html#ac9c99773209b46c9f963028abea613e2">google::LogMessageFatal::~LogMessageFatal</a></div><div class="ttdeci">ATTRIBUTE_NORETURN ~LogMessageFatal()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01815">base/logging.cc:1815</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_html"><div class="ttname"><a href="classgoogle_1_1_log_message.html">google::LogMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01018">base/logging.h:1018</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_html_a09be921a693a28c291c76b71c5e030c6"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a09be921a693a28c291c76b71c5e030c6">google::LogMessage::SendToLog</a></div><div class="ttdeci">void SendToLog()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01272">base/logging.cc:1272</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_html_a0a01fdbc8c975aae6c3dba8d00692e77"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a0a01fdbc8c975aae6c3dba8d00692e77">google::LogMessage::preserved_errno</a></div><div class="ttdeci">int preserved_errno() const</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01195">base/logging.cc:1195</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_html_a0e2644b2df3c228e8d71a55b60723f31"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a0e2644b2df3c228e8d71a55b60723f31">google::LogMessage::Flush</a></div><div class="ttdeci">void Flush()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01201">base/logging.cc:1201</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_html_a3d9d690ef826d1e889feae7420e5bbf9"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a3d9d690ef826d1e889feae7420e5bbf9">google::LogMessage::LogMessage</a></div><div class="ttdeci">LogMessage(const char *file, int line, LogSeverity severity, int ctr, SendMethod send_method)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01066">base/logging.cc:1066</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_html_a3ea77f17c72e61d4ca8b21433e629d43"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a3ea77f17c72e61d4ca8b21433e629d43">google::LogMessage::SendToSyslogAndLog</a></div><div class="ttdeci">void SendToSyslogAndLog()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01443">base/logging.cc:1443</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_html_a48387141df3f5afb48b012cc28ac244c"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a48387141df3f5afb48b012cc28ac244c">google::LogMessage::stream</a></div><div class="ttdeci">std::ostream &amp; stream()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01197">base/logging.cc:1197</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_html_a8505d7c85d1ca04684141bb1b8113770"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a8505d7c85d1ca04684141bb1b8113770">google::LogMessage::num_messages</a></div><div class="ttdeci">static int64_t num_messages(int severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01475">base/logging.cc:1475</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_html_a99fb83031ce9923c84392b4e92f956b5af8756cb52a8aac6329e43782e08f69e5"><div class="ttname"><a href="classgoogle_1_1_log_message.html#a99fb83031ce9923c84392b4e92f956b5af8756cb52a8aac6329e43782e08f69e5">google::LogMessage::kNoLogPrefix</a></div><div class="ttdeci">@ kNoLogPrefix</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01027">base/logging.h:1026</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_html_ab56904740774e794fb63d946debb899f"><div class="ttname"><a href="classgoogle_1_1_log_message.html#ab56904740774e794fb63d946debb899f">google::LogMessage::kMaxLogMessageLen</a></div><div class="ttdeci">static const size_t kMaxLogMessageLen</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01115">base/logging.h:1115</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_html_aeb92d4addb41255c9732cacfcb54f795"><div class="ttname"><a href="classgoogle_1_1_log_message.html#aeb92d4addb41255c9732cacfcb54f795">google::LogMessage::Fail</a></div><div class="ttdeci">static void ATTRIBUTE_NORETURN Fail()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01393">base/logging.cc:1393</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_message_html_aeeabea83ed8b4e356d4d36ece0fcb1bf"><div class="ttname"><a href="classgoogle_1_1_log_message.html#aeeabea83ed8b4e356d4d36ece0fcb1bf">google::LogMessage::~LogMessage</a></div><div class="ttdeci">~LogMessage()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01181">base/logging.cc:1181</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_sink_html"><div class="ttname"><a href="classgoogle_1_1_log_sink.html">google::LogSink</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01289">base/logging.h:1289</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_sink_html_a0e3384308bca57a6a44f3c2b5258ffb1"><div class="ttname"><a href="classgoogle_1_1_log_sink.html#a0e3384308bca57a6a44f3c2b5258ffb1">google::LogSink::send</a></div><div class="ttdeci">virtual void send(LogSeverity severity, const char *full_filename, const char *base_filename, int line, const struct ::tm *tm_time, const char *message, size_t message_len)=0</div></div>
<div class="ttc" id="aclassgoogle_1_1_log_sink_html_a579e2c28338fc8411ddfb3789f3b901d"><div class="ttname"><a href="classgoogle_1_1_log_sink.html#a579e2c28338fc8411ddfb3789f3b901d">google::LogSink::~LogSink</a></div><div class="ttdeci">virtual ~LogSink()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01522">base/logging.cc:1522</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_sink_html_a68c6c88e8a64d08d3c070bd014ce7172"><div class="ttname"><a href="classgoogle_1_1_log_sink.html#a68c6c88e8a64d08d3c070bd014ce7172">google::LogSink::ToString</a></div><div class="ttdeci">static std::string ToString(LogSeverity severity, const char *file, int line, const struct ::tm *tm_time, const char *message, size_t message_len)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01528">base/logging.cc:1528</a></div></div>
<div class="ttc" id="aclassgoogle_1_1_log_sink_html_a96a54d485a8e3745eabd2859e6c3bb0a"><div class="ttname"><a href="classgoogle_1_1_log_sink.html#a96a54d485a8e3745eabd2859e6c3bb0a">google::LogSink::WaitTillSent</a></div><div class="ttdeci">virtual void WaitTillSent()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01524">base/logging.cc:1524</a></div></div>
<div class="ttc" id="aclassgoogle_1_1base_1_1_check_op_message_builder_html_a1333dd08e59ead3b1e40c82981c3f805"><div class="ttname"><a href="classgoogle_1_1base_1_1_check_op_message_builder.html#a1333dd08e59ead3b1e40c82981c3f805">google::base::CheckOpMessageBuilder::CheckOpMessageBuilder</a></div><div class="ttdeci">CheckOpMessageBuilder(const char *exprtext)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01822">base/logging.cc:1822</a></div></div>
<div class="ttc" id="aclassgoogle_1_1base_1_1_check_op_message_builder_html_a5722d0eb48c3be72479813d564dfebbc"><div class="ttname"><a href="classgoogle_1_1base_1_1_check_op_message_builder.html#a5722d0eb48c3be72479813d564dfebbc">google::base::CheckOpMessageBuilder::NewString</a></div><div class="ttdeci">std::string * NewString()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01834">base/logging.cc:1834</a></div></div>
<div class="ttc" id="aclassgoogle_1_1base_1_1_check_op_message_builder_html_aaa8346df261ac8c17bb4c36b84330f8c"><div class="ttname"><a href="classgoogle_1_1base_1_1_check_op_message_builder.html#aaa8346df261ac8c17bb4c36b84330f8c">google::base::CheckOpMessageBuilder::~CheckOpMessageBuilder</a></div><div class="ttdeci">~CheckOpMessageBuilder()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01827">base/logging.cc:1827</a></div></div>
<div class="ttc" id="aclassgoogle_1_1base_1_1_check_op_message_builder_html_ae33b6f12ae75f7312d6bfd59ba4e7509"><div class="ttname"><a href="classgoogle_1_1base_1_1_check_op_message_builder.html#ae33b6f12ae75f7312d6bfd59ba4e7509">google::base::CheckOpMessageBuilder::ForVar2</a></div><div class="ttdeci">std::ostream * ForVar2()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01829">base/logging.cc:1829</a></div></div>
<div class="ttc" id="aclassgoogle_1_1base_1_1_logger_html"><div class="ttname"><a href="classgoogle_1_1base_1_1_logger.html">google::base::Logger</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l01383">base/logging.h:1383</a></div></div>
<div class="ttc" id="aclassgoogle_1_1base_1_1_logger_html_a0d77f27eb95c246d555904aaf08018eb"><div class="ttname"><a href="classgoogle_1_1base_1_1_logger.html#a0d77f27eb95c246d555904aaf08018eb">google::base::Logger::~Logger</a></div><div class="ttdeci">virtual ~Logger()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00368">base/logging.cc:368</a></div></div>
<div class="ttc" id="aclassgoogle_1_1base_1_1_logger_html_aff3353d816df11999ea7a0804b76e0c1"><div class="ttname"><a href="classgoogle_1_1base_1_1_logger.html#aff3353d816df11999ea7a0804b76e0c1">google::base::Logger::Flush</a></div><div class="ttdeci">virtual void Flush()=0</div></div>
<div class="ttc" id="acommandlineflags_8h_html"><div class="ttname"><a href="commandlineflags_8h.html">commandlineflags.h</a></div></div>
<div class="ttc" id="aconstraint__solver_8cc_html_a395f613555f398dd389670bb4c2a4599"><div class="ttname"><a href="constraint__solver_8cc.html#a395f613555f398dd389670bb4c2a4599">next</a></div><div class="ttdeci">Block * next</div><div class="ttdef"><b>Definition:</b> <a href="constraint__solver_8cc_source.html#l00678">constraint_solver.cc:678</a></div></div>
<div class="ttc" id="ademon__profiler_8cc_html_ac072af30c4ffbc834bb4c681f6ecb514"><div class="ttname"><a href="demon__profiler_8cc.html#ac072af30c4ffbc834bb4c681f6ecb514">value</a></div><div class="ttdeci">int64_t value</div><div class="ttdef"><b>Definition:</b> <a href="demon__profiler_8cc_source.html#l00044">demon_profiler.cc:44</a></div></div>
<div class="ttc" id="aio_8h_html"><div class="ttname"><a href="io_8h.html">io.h</a></div></div>
<div class="ttc" id="alog__severity_8h_html_a88e450ea80e6caaddd7d4ad0864b651d"><div class="ttname"><a href="log__severity_8h.html#a88e450ea80e6caaddd7d4ad0864b651d">LogSeverity</a></div><div class="ttdeci">int LogSeverity</div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00022">log_severity.h:22</a></div></div>
<div class="ttc" id="alog__severity_8h_html_ac9bcbe19995a8140cd4ec61773cd6e67"><div class="ttname"><a href="log__severity_8h.html#ac9bcbe19995a8140cd4ec61773cd6e67">ERROR</a></div><div class="ttdeci">const int ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00032">log_severity.h:32</a></div></div>
<div class="ttc" id="alogging__export_8h_html_a980c97856a47502c2877b93460f44f87"><div class="ttname"><a href="logging__export_8h.html#a980c97856a47502c2877b93460f44f87">GOOGLE_GLOG_DLL_DECL</a></div><div class="ttdeci">#define GOOGLE_GLOG_DLL_DECL</div><div class="ttdef"><b>Definition:</b> <a href="logging__export_8h_source.html#l00027">logging_export.h:27</a></div></div>
<div class="ttc" id="alogging__utilities_8h_html"><div class="ttname"><a href="logging__utilities_8h.html">logging_utilities.h</a></div></div>
<div class="ttc" id="anamespacefile_html"><div class="ttname"><a href="namespacefile.html">file</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2file_8cc_source.html#l00141">base/file.cc:141</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1base_1_1internal_html_a794f86364cecaf6c630c587cc2ad002c"><div class="ttname"><a href="namespacegoogle_1_1base_1_1internal.html#a794f86364cecaf6c630c587cc2ad002c">google::base::internal::SetExitOnDFatal</a></div><div class="ttdeci">void SetExitOnDFatal(bool value)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01589">base/logging.cc:1589</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1base_1_1internal_html_abad0e8912e4c1231b44d52109bf3c68f"><div class="ttname"><a href="namespacegoogle_1_1base_1_1internal.html#abad0e8912e4c1231b44d52109bf3c68f">google::base::internal::GetExitOnDFatal</a></div><div class="ttdeci">bool GetExitOnDFatal()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01573">base/logging.cc:1573</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1base_html_a50d33a682377552803e3bda0568358ad"><div class="ttname"><a href="namespacegoogle_1_1base.html#a50d33a682377552803e3bda0568358ad">google::base::GetLogger</a></div><div class="ttdeci">GOOGLE_GLOG_DLL_DECL Logger * GetLogger(LogSeverity level)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01464">base/logging.cc:1464</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1base_html_a754a333359f5c02714711bb4e01417b0"><div class="ttname"><a href="namespacegoogle_1_1base.html#a754a333359f5c02714711bb4e01417b0">google::base::SetLogger</a></div><div class="ttdeci">GOOGLE_GLOG_DLL_DECL void SetLogger(LogSeverity level, Logger *logger)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01469">base/logging.cc:1469</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1logging__internal_html_a07cf4471662221986927d079727609d8"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#a07cf4471662221986927d079727609d8">google::logging_internal::DumpStackTraceToString</a></div><div class="ttdeci">void DumpStackTraceToString(std::string *stacktrace)</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00291">logging_utilities.cc:291</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1logging__internal_html_a2cfbf632d17403200c1f304a45831c58"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#a2cfbf632d17403200c1f304a45831c58">google::logging_internal::InitGoogleLoggingUtilities</a></div><div class="ttdeci">void InitGoogleLoggingUtilities(const char *argv0)</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00304">logging_utilities.cc:304</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1logging__internal_html_a43adca49683a5766aecb000c340e988c"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#a43adca49683a5766aecb000c340e988c">google::logging_internal::ProgramInvocationShortName</a></div><div class="ttdeci">const char * ProgramInvocationShortName()</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00214">logging_utilities.cc:214</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1logging__internal_html_a524ba2b8ce15ad01369c230545fc3ec6"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#a524ba2b8ce15ad01369c230545fc3ec6">google::logging_internal::MyUserName</a></div><div class="ttdeci">const std::string &amp; MyUserName()</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00247">logging_utilities.cc:247</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1logging__internal_html_a88dfce8ed7ee385f0238de1387ea7845"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#a88dfce8ed7ee385f0238de1387ea7845">google::logging_internal::SetCrashReason</a></div><div class="ttdeci">void SetCrashReason(const CrashReason *r)</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00299">logging_utilities.cc:299</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1logging__internal_html_aa3792ddc75755350b76a7b196369eda3"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#aa3792ddc75755350b76a7b196369eda3">google::logging_internal::IsGoogleLoggingInitialized</a></div><div class="ttdeci">bool IsGoogleLoggingInitialized()</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00223">logging_utilities.cc:223</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1logging__internal_html_aa5bcfef09a25e887a41b29f9ba9be836"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#aa5bcfef09a25e887a41b29f9ba9be836">google::logging_internal::GetTID</a></div><div class="ttdeci">unsigned int GetTID()</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00227">logging_utilities.cc:227</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1logging__internal_html_ac6be87e218241680245d9fac1b530ad4"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#ac6be87e218241680245d9fac1b530ad4">google::logging_internal::GetMainThreadPid</a></div><div class="ttdeci">int32_t GetMainThreadPid()</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00236">logging_utilities.cc:236</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1logging__internal_html_ade3847fd506fd2139eba5bfb459e74ca"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#ade3847fd506fd2139eba5bfb459e74ca">google::logging_internal::ShutdownGoogleLoggingUtilities</a></div><div class="ttdeci">void ShutdownGoogleLoggingUtilities()</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00317">logging_utilities.cc:317</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1logging__internal_html_aedfcd190e296797088cd453c4d6796a0"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#aedfcd190e296797088cd453c4d6796a0">google::logging_internal::UsecToCycles</a></div><div class="ttdeci">int64_t UsecToCycles(int64_t usec)</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00233">logging_utilities.cc:233</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1logging__internal_html_af7c52c82f4832b6bfabe0c86a0c19d2e"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#af7c52c82f4832b6bfabe0c86a0c19d2e">google::logging_internal::const_basename</a></div><div class="ttdeci">const char * const_basename(const char *filepath)</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00238">logging_utilities.cc:238</a></div></div>
<div class="ttc" id="anamespacegoogle_1_1logging__internal_html_af8454039845aad804abcbabf98b68b23"><div class="ttname"><a href="namespacegoogle_1_1logging__internal.html#af8454039845aad804abcbabf98b68b23">google::logging_internal::CycleClock_Now</a></div><div class="ttdeci">int64_t CycleClock_Now()</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8cc_source.html#l00231">logging_utilities.cc:231</a></div></div>
<div class="ttc" id="anamespacegoogle_html"><div class="ttname"><a href="namespacegoogle.html">google</a></div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00024">log_severity.h:24</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a001f0868c92c66aa4991da10384c5304"><div class="ttname"><a href="namespacegoogle.html#a001f0868c92c66aa4991da10384c5304">google::operator&lt;&lt;</a></div><div class="ttdeci">ostream &amp; operator&lt;&lt;(ostream &amp;os, const PRIVATE_Counter &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01482">base/logging.cc:1482</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a0069c3deacbf0c307a0af6a7fa6c212e"><div class="ttname"><a href="namespacegoogle.html#a0069c3deacbf0c307a0af6a7fa6c212e">google::thread_data_available</a></div><div class="ttdeci">static thread_local bool thread_data_available</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01057">base/logging.cc:1057</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a027059b87b7c0885963214923a4f5e02"><div class="ttname"><a href="namespacegoogle.html#a027059b87b7c0885963214923a4f5e02">google::fatal_message</a></div><div class="ttdeci">static char fatal_message[256]</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01258">base/logging.cc:1258</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a060366d0d0ff85fce6de37e905fea54c"><div class="ttname"><a href="namespacegoogle.html#a060366d0d0ff85fce6de37e905fea54c">google::GLOG_WARNING</a></div><div class="ttdeci">const int GLOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00025">log_severity.h:25</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a1749056ff206ebc4f581e6bc0bae841d"><div class="ttname"><a href="namespacegoogle.html#a1749056ff206ebc4f581e6bc0bae841d">google::InitGoogleLogging</a></div><div class="ttdeci">void InitGoogleLogging(const char *argv0)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01873">base/logging.cc:1873</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a1d1a2cfb1e7c80c14baccc762df3df3f"><div class="ttname"><a href="namespacegoogle.html#a1d1a2cfb1e7c80c14baccc762df3df3f">google::SeverityToColor</a></div><div class="ttdeci">static GLogColor SeverityToColor(LogSeverity severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00248">base/logging.cc:248</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a1eaea9f78c8357c77772089fd6304dbd"><div class="ttname"><a href="namespacegoogle.html#a1eaea9f78c8357c77772089fd6304dbd">google::thread_msg_data</a></div><div class="ttdeci">static thread_local std::aligned_storage&lt; sizeof(LogMessage::LogMessageData), alignof(LogMessage::LogMessageData)&gt;::type thread_msg_data</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01061">base/logging.cc:1061</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a202f492760d99ffd8e85989cc2393be9"><div class="ttname"><a href="namespacegoogle.html#a202f492760d99ffd8e85989cc2393be9">google::log_mutex</a></div><div class="ttdeci">static absl::Mutex log_mutex</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00350">base/logging.cc:350</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a24c103ec1d724a52eef23cbe8eb101cf"><div class="ttname"><a href="namespacegoogle.html#a24c103ec1d724a52eef23cbe8eb101cf">google::g_logging_fail_func</a></div><div class="ttdeci">GOOGLE_GLOG_DLL_DECL logging_fail_func_t g_logging_fail_func</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01387">base/logging.cc:1387</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a27fd092cfd7530a45451a8e0b0fcdf8e"><div class="ttname"><a href="namespacegoogle.html#a27fd092cfd7530a45451a8e0b0fcdf8e">google::FlushLogFilesUnsafe</a></div><div class="ttdeci">void FlushLogFilesUnsafe(LogSeverity min_severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01510">base/logging.cc:1510</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a34245749cbb78aef93c6652a3eb981d6"><div class="ttname"><a href="namespacegoogle.html#a34245749cbb78aef93c6652a3eb981d6">google::logging_fail_func_t</a></div><div class="ttdeci">void(* logging_fail_func_t)() ATTRIBUTE_NORETURN</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01384">base/logging.cc:1384</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a407c4496d81fae1029e8800dd42ac68e"><div class="ttname"><a href="namespacegoogle.html#a407c4496d81fae1029e8800dd42ac68e">google::fatal_msg_lock</a></div><div class="ttdeci">static absl::Mutex fatal_msg_lock</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01048">base/logging.cc:1048</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a45aa0ee16eb826aae8bef8160098a1ae"><div class="ttname"><a href="namespacegoogle.html#a45aa0ee16eb826aae8bef8160098a1ae">google::logging_directories_list</a></div><div class="ttdeci">static vector&lt; string &gt; * logging_directories_list</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01681">base/logging.cc:1681</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a45f04ff1beb3af3882c99d3b63616dde"><div class="ttname"><a href="namespacegoogle.html#a45f04ff1beb3af3882c99d3b63616dde">google::SetLogFilenameExtension</a></div><div class="ttdeci">void SetLogFilenameExtension(const char *ext)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01559">base/logging.cc:1559</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a4f56829b020851f8919bdb557b6c10cf"><div class="ttname"><a href="namespacegoogle.html#a4f56829b020851f8919bdb557b6c10cf">google::ColoredWriteToStderr</a></div><div class="ttdeci">static void ColoredWriteToStderr(LogSeverity severity, const char *message, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00622">base/logging.cc:622</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a5093faa29d594a5fe593decdd4de8427"><div class="ttname"><a href="namespacegoogle.html#a5093faa29d594a5fe593decdd4de8427">google::exit_on_dfatal</a></div><div class="ttdeci">static bool exit_on_dfatal</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00362">base/logging.cc:362</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a52b012381ca169c60f696aeeb54a9d77"><div class="ttname"><a href="namespacegoogle.html#a52b012381ca169c60f696aeeb54a9d77">google::SetLogDestination</a></div><div class="ttdeci">void SetLogDestination(LogSeverity severity, const char *base_filename)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01514">base/logging.cc:1514</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a57ac69eb66761ee6406d5e4a3f33ff87"><div class="ttname"><a href="namespacegoogle.html#a57ac69eb66761ee6406d5e4a3f33ff87">google::SetStderrLogging</a></div><div class="ttdeci">void SetStderrLogging(LogSeverity min_severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01563">base/logging.cc:1563</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a60193b592b1a0e1d930682ade407ad63"><div class="ttname"><a href="namespacegoogle.html#a60193b592b1a0e1d930682ade407ad63">google::GetLogSeverityName</a></div><div class="ttdeci">const char * GetLogSeverityName(LogSeverity severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00364">base/logging.cc:364</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a623d2ea68ef6922bf6c53bc28c5f190a"><div class="ttname"><a href="namespacegoogle.html#a623d2ea68ef6922bf6c53bc28c5f190a">google::NUM_SEVERITIES</a></div><div class="ttdeci">const int NUM_SEVERITIES</div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00026">log_severity.h:26</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a63b37be54b6c05f2d1523081b4089c19"><div class="ttname"><a href="namespacegoogle.html#a63b37be54b6c05f2d1523081b4089c19">google::GetExistingTempDirectories</a></div><div class="ttdeci">void GetExistingTempDirectories(vector&lt; string &gt; *list)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01714">base/logging.cc:1714</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a70bf67dee61470b69573aae771282e30"><div class="ttname"><a href="namespacegoogle.html#a70bf67dee61470b69573aae771282e30">google::ShutdownGoogleLogging</a></div><div class="ttdeci">void ShutdownGoogleLogging()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01877">base/logging.cc:1877</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a7b8269d76dce27d5f880ba2dbf35382c"><div class="ttname"><a href="namespacegoogle.html#a7b8269d76dce27d5f880ba2dbf35382c">google::fatal_msg_exclusive</a></div><div class="ttdeci">static bool fatal_msg_exclusive</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01050">base/logging.cc:1050</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a80d0d63d8be7a9721961916a9ab9a9c3"><div class="ttname"><a href="namespacegoogle.html#a80d0d63d8be7a9721961916a9ab9a9c3">google::InstallFailureFunction</a></div><div class="ttdeci">void InstallFailureFunction(void(*fail_func)())</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01389">base/logging.cc:1389</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a81ebea6ae08028ef54b3df0d8bd6b0af"><div class="ttname"><a href="namespacegoogle.html#a81ebea6ae08028ef54b3df0d8bd6b0af">google::GetAnsiColorCode</a></div><div class="ttdeci">static const char * GetAnsiColorCode(GLogColor color)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00288">base/logging.cc:288</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a832c639941d33e43942c481d21c674ee"><div class="ttname"><a href="namespacegoogle.html#a832c639941d33e43942c481d21c674ee">google::fatal_msg_data_exclusive</a></div><div class="ttdeci">static LogMessage::LogMessageData fatal_msg_data_exclusive</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01051">base/logging.cc:1051</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a85e200fc02aea6b6196148088fa23c3e"><div class="ttname"><a href="namespacegoogle.html#a85e200fc02aea6b6196148088fa23c3e">google::LogSeverityNames</a></div><div class="ttdeci">GOOGLE_GLOG_DLL_DECL const char *const LogSeverityNames[NUM_SEVERITIES]</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00358">base/logging.cc:358</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a861f0c066ef30bb3d7b4e442f55f93af"><div class="ttname"><a href="namespacegoogle.html#a861f0c066ef30bb3d7b4e442f55f93af">google::fatal_msg_data_shared</a></div><div class="ttdeci">static LogMessage::LogMessageData fatal_msg_data_shared</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01052">base/logging.cc:1052</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a8688e486af1a034920af845ceba0952f"><div class="ttname"><a href="namespacegoogle.html#a8688e486af1a034920af845ceba0952f">google::StrError</a></div><div class="ttdeci">string StrError(int err)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01799">base/logging.cc:1799</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a875b970c781b18261024464edf1c1286"><div class="ttname"><a href="namespacegoogle.html#a875b970c781b18261024464edf1c1286">google::MakeCheckOpValueString</a></div><div class="ttdeci">void MakeCheckOpValueString(std::ostream *os, const char &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01842">base/logging.cc:1842</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a8c3a96b28a44e635d84d6fb2517b411b"><div class="ttname"><a href="namespacegoogle.html#a8c3a96b28a44e635d84d6fb2517b411b">google::posix_strerror_r</a></div><div class="ttdeci">int posix_strerror_r(int err, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01749">base/logging.cc:1749</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a9145952db85676dbaf27080ab7173b97"><div class="ttname"><a href="namespacegoogle.html#a9145952db85676dbaf27080ab7173b97">google::GetLoggingDirectories</a></div><div class="ttdeci">const vector&lt; string &gt; &amp; GetLoggingDirectories()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01683">base/logging.cc:1683</a></div></div>
<div class="ttc" id="anamespacegoogle_html_a9800270f9c517ac3c4f1a69d2d79d1ff"><div class="ttname"><a href="namespacegoogle.html#a9800270f9c517ac3c4f1a69d2d79d1ff">google::SetLogSymlink</a></div><div class="ttdeci">void SetLogSymlink(LogSeverity severity, const char *symlink_basename)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01518">base/logging.cc:1518</a></div></div>
<div class="ttc" id="anamespacegoogle_html_aa0499f87843a0da8d1615089b60ae4eb"><div class="ttname"><a href="namespacegoogle.html#aa0499f87843a0da8d1615089b60ae4eb">google::ShellEscape</a></div><div class="ttdeci">static string ShellEscape(const string &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01603">base/logging.cc:1603</a></div></div>
<div class="ttc" id="anamespacegoogle_html_aa25e41570c47498a3c40189913d2ed81"><div class="ttname"><a href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81">google::GLogColor</a></div><div class="ttdeci">GLogColor</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00246">base/logging.cc:246</a></div></div>
<div class="ttc" id="anamespacegoogle_html_aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc"><div class="ttname"><a href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a0b8d8b18037efc3cdb5dd0313e7c67dc">google::COLOR_DEFAULT</a></div><div class="ttdeci">@ COLOR_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00246">base/logging.cc:246</a></div></div>
<div class="ttc" id="anamespacegoogle_html_aa25e41570c47498a3c40189913d2ed81a592503b9434c1e751a92f3fc536d7950"><div class="ttname"><a href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81a592503b9434c1e751a92f3fc536d7950">google::COLOR_RED</a></div><div class="ttdeci">@ COLOR_RED</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00246">base/logging.cc:246</a></div></div>
<div class="ttc" id="anamespacegoogle_html_aa25e41570c47498a3c40189913d2ed81ab03862907066c68204ee9df1ee04aa29"><div class="ttname"><a href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81ab03862907066c68204ee9df1ee04aa29">google::COLOR_YELLOW</a></div><div class="ttdeci">@ COLOR_YELLOW</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00246">base/logging.cc:246</a></div></div>
<div class="ttc" id="anamespacegoogle_html_aa25e41570c47498a3c40189913d2ed81acfa9d8bbffc418447ed826f286abca02"><div class="ttname"><a href="namespacegoogle.html#aa25e41570c47498a3c40189913d2ed81acfa9d8bbffc418447ed826f286abca02">google::COLOR_GREEN</a></div><div class="ttdeci">@ COLOR_GREEN</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00246">base/logging.cc:246</a></div></div>
<div class="ttc" id="anamespacegoogle_html_aa68b268a02d18e2965e36f4211777db6"><div class="ttname"><a href="namespacegoogle.html#aa68b268a02d18e2965e36f4211777db6">google::kDontNeedShellEscapeChars</a></div><div class="ttdeci">static const char kDontNeedShellEscapeChars[]</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01598">base/logging.cc:1598</a></div></div>
<div class="ttc" id="anamespacegoogle_html_aa739a176bcc5230a3536ef27a860c1a8"><div class="ttname"><a href="namespacegoogle.html#aa739a176bcc5230a3536ef27a860c1a8">google::PRIVATE_Counter</a></div><div class="ttdeci">PRIVATE_Counter</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00863">base/logging.h:863</a></div></div>
<div class="ttc" id="anamespacegoogle_html_aab2b99122a259ede199e6872c7f367bf"><div class="ttname"><a href="namespacegoogle.html#aab2b99122a259ede199e6872c7f367bf">google::MaxLogSize</a></div><div class="ttdeci">static int32_t MaxLogSize()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00305">base/logging.cc:305</a></div></div>
<div class="ttc" id="anamespacegoogle_html_aac637fad473b5677c3f94fb8372257b0"><div class="ttname"><a href="namespacegoogle.html#aac637fad473b5677c3f94fb8372257b0">google::AddLogSink</a></div><div class="ttdeci">void AddLogSink(LogSink *destination)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01551">base/logging.cc:1551</a></div></div>
<div class="ttc" id="anamespacegoogle_html_ab675835107a9fba3f4b1fc920516b5bf"><div class="ttname"><a href="namespacegoogle.html#ab675835107a9fba3f4b1fc920516b5bf">google::fatal_time</a></div><div class="ttdeci">static time_t fatal_time</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01257">base/logging.cc:1257</a></div></div>
<div class="ttc" id="anamespacegoogle_html_ab90a343a65dff8ffc12a5133fd8dcbaf"><div class="ttname"><a href="namespacegoogle.html#ab90a343a65dff8ffc12a5133fd8dcbaf">google::LogToStderr</a></div><div class="ttdeci">void LogToStderr()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01567">base/logging.cc:1567</a></div></div>
<div class="ttc" id="anamespacegoogle_html_ac452c4c8ec1cbc24dd074e260aa0b617"><div class="ttname"><a href="namespacegoogle.html#ac452c4c8ec1cbc24dd074e260aa0b617">google::GLOG_FATAL</a></div><div class="ttdeci">const int GLOG_FATAL</div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00025">log_severity.h:25</a></div></div>
<div class="ttc" id="anamespacegoogle_html_ad0cffd6498cbf357c5f3c1b7c3683c84"><div class="ttname"><a href="namespacegoogle.html#ad0cffd6498cbf357c5f3c1b7c3683c84">google::FlushLogFiles</a></div><div class="ttdeci">void FlushLogFiles(LogSeverity min_severity)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01506">base/logging.cc:1506</a></div></div>
<div class="ttc" id="anamespacegoogle_html_ada71130f5f3b55dbec713c608b9e5447"><div class="ttname"><a href="namespacegoogle.html#ada71130f5f3b55dbec713c608b9e5447">google::crash_reason</a></div><div class="ttdeci">static logging_internal::CrashReason crash_reason</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01049">base/logging.cc:1049</a></div></div>
<div class="ttc" id="anamespacegoogle_html_adec21a5ba9511e6a6b2c09b0dbdf5fb8"><div class="ttname"><a href="namespacegoogle.html#adec21a5ba9511e6a6b2c09b0dbdf5fb8">google::stop_writing</a></div><div class="ttdeci">static bool stop_writing</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00356">base/logging.cc:356</a></div></div>
<div class="ttc" id="anamespacegoogle_html_ae0f8ace9dff19cd627f09dbfaa8aae1b"><div class="ttname"><a href="namespacegoogle.html#ae0f8ace9dff19cd627f09dbfaa8aae1b">google::TestOnly_ClearLoggingDirectoriesList</a></div><div class="ttdeci">void TestOnly_ClearLoggingDirectoriesList()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01706">base/logging.cc:1706</a></div></div>
<div class="ttc" id="anamespacegoogle_html_ae4e2c48deea609dcb515b027460c3f5e"><div class="ttname"><a href="namespacegoogle.html#ae4e2c48deea609dcb515b027460c3f5e">google::WriteToStderr</a></div><div class="ttdeci">static void WriteToStderr(const char *message, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00660">base/logging.cc:660</a></div></div>
<div class="ttc" id="anamespacegoogle_html_aec61ff6c741224bbf1d230d40449aa30"><div class="ttname"><a href="namespacegoogle.html#aec61ff6c741224bbf1d230d40449aa30">google::GLOG_ERROR</a></div><div class="ttdeci">const int GLOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00025">log_severity.h:25</a></div></div>
<div class="ttc" id="anamespacegoogle_html_aecd060345dec7a9bbb83fb0afe72948d"><div class="ttname"><a href="namespacegoogle.html#aecd060345dec7a9bbb83fb0afe72948d">google::logging_fail</a></div><div class="ttdeci">static void logging_fail() ATTRIBUTE_NORETURN</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01382">base/logging.cc:1382</a></div></div>
<div class="ttc" id="anamespacegoogle_html_af369c55174d4dd5587c539e01158c905"><div class="ttname"><a href="namespacegoogle.html#af369c55174d4dd5587c539e01158c905">google::GetTempDirectories</a></div><div class="ttdeci">static void GetTempDirectories(vector&lt; string &gt; *list)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01632">base/logging.cc:1632</a></div></div>
<div class="ttc" id="anamespacegoogle_html_af3c2db675e75f2074724f754d3cf7885"><div class="ttname"><a href="namespacegoogle.html#af3c2db675e75f2074724f754d3cf7885">google::GLOG_INFO</a></div><div class="ttdeci">const int GLOG_INFO</div><div class="ttdef"><b>Definition:</b> <a href="log__severity_8h_source.html#l00025">log_severity.h:25</a></div></div>
<div class="ttc" id="anamespacegoogle_html_afb08de7bff9aaa916db76a47bcd9077a"><div class="ttname"><a href="namespacegoogle.html#afb08de7bff9aaa916db76a47bcd9077a">google::RemoveLogSink</a></div><div class="ttdeci">void RemoveLogSink(LogSink *destination)</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01555">base/logging.cc:1555</a></div></div>
<div class="ttc" id="anamespacegoogle_html_afe9db80601fc823372a09c832a802529"><div class="ttname"><a href="namespacegoogle.html#afe9db80601fc823372a09c832a802529">google::ReprintFatalMessage</a></div><div class="ttdeci">void ReprintFatalMessage()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01260">base/logging.cc:1260</a></div></div>
<div class="ttc" id="anamespaceinternal_html"><div class="ttname"><a href="namespaceinternal.html">internal</a></div><div class="ttdef"><b>Definition:</b> <a href="connected__components_8h_source.html#l00138">connected_components.h:138</a></div></div>
<div class="ttc" id="araw__logging_8h_html"><div class="ttname"><a href="raw__logging_8h.html">raw_logging.h</a></div></div>
<div class="ttc" id="araw__logging_8h_html_a791abe51d9a64e98d30631fdf23e33da"><div class="ttname"><a href="raw__logging_8h.html#a791abe51d9a64e98d30631fdf23e33da">RAW_DCHECK</a></div><div class="ttdeci">#define RAW_DCHECK(condition, message)</div><div class="ttdef"><b>Definition:</b> <a href="raw__logging_8h_source.html#l00117">raw_logging.h:117</a></div></div>
<div class="ttc" id="asparse__submatrix_8cc_html_a9b7656b922ea4ec96097d7380c0e61fe"><div class="ttname"><a href="sparse__submatrix_8cc.html#a9b7656b922ea4ec96097d7380c0e61fe">start</a></div><div class="ttdeci">int64_t start</div><div class="ttdef"><b>Definition:</b> <a href="sparse__submatrix_8cc_source.html#l00035">sparse_submatrix.cc:35</a></div></div>
<div class="ttc" id="astructgoogle_1_1_check_op_string_html"><div class="ttname"><a href="structgoogle_1_1_check_op_string.html">google::CheckOpString</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00501">base/logging.h:501</a></div></div>
<div class="ttc" id="astructgoogle_1_1_check_op_string_html_a3e35a685fcaa15d88c35fa93cd3126c5"><div class="ttname"><a href="structgoogle_1_1_check_op_string.html#a3e35a685fcaa15d88c35fa93cd3126c5">google::CheckOpString::str_</a></div><div class="ttdeci">std::string * str_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8h_source.html#l00508">base/logging.h:508</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html">google::LogMessage::LogMessageData</a></div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00315">base/logging.cc:315</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_a1b911b3abca8051fd7441126a95a0254"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1b911b3abca8051fd7441126a95a0254">google::LogMessage::LogMessageData::timestamp_</a></div><div class="ttdeci">time_t timestamp_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00330">base/logging.cc:330</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_a1d3fb731f115f67d6c1e4e38588572ae"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a1d3fb731f115f67d6c1e4e38588572ae">google::LogMessage::LogMessageData::severity_</a></div><div class="ttdeci">char severity_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00322">base/logging.cc:322</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_a28966ba90809d1189db93cf6d8d7b3c2"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a28966ba90809d1189db93cf6d8d7b3c2">google::LogMessage::LogMessageData::message_</a></div><div class="ttdeci">std::string * message_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00328">base/logging.cc:328</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_a583ab3eb7226577fd24179c256425f98"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a583ab3eb7226577fd24179c256425f98">google::LogMessage::LogMessageData::sink_</a></div><div class="ttdeci">LogSink * sink_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00326">base/logging.cc:326</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_a689d7ba2721c7e7935b5501a83948154"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a689d7ba2721c7e7935b5501a83948154">google::LogMessage::LogMessageData::preserved_errno_</a></div><div class="ttdeci">int preserved_errno_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00318">base/logging.cc:318</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_a88d5e4f1bf38dcfa744f181b569552d8"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88d5e4f1bf38dcfa744f181b569552d8">google::LogMessage::LogMessageData::tm_time_</a></div><div class="ttdeci">struct::tm tm_time_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00331">base/logging.cc:331</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_a88e3e7b14a7388ff3771f7181732570c"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a88e3e7b14a7388ff3771f7181732570c">google::LogMessage::LogMessageData::first_fatal_</a></div><div class="ttdeci">bool first_fatal_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00338">base/logging.cc:338</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_a8b2792dbbc5fccae93ac601113141d98"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a8b2792dbbc5fccae93ac601113141d98">google::LogMessage::LogMessageData::message_text_</a></div><div class="ttdeci">char message_text_[LogMessage::kMaxLogMessageLen+1]</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00320">base/logging.cc:320</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_a923aff6e0f1225440f1a3d9e21b99adf"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a923aff6e0f1225440f1a3d9e21b99adf">google::LogMessage::LogMessageData::num_chars_to_log_</a></div><div class="ttdeci">size_t num_chars_to_log_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00333">base/logging.cc:333</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_a9d8241f1d596b53f65ba985cc108a013"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#a9d8241f1d596b53f65ba985cc108a013">google::LogMessage::LogMessageData::send_method_</a></div><div class="ttdeci">void(LogMessage::* send_method_)()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00324">base/logging.cc:324</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_aa0c333addf51e66c448c4be972b8974f"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa0c333addf51e66c448c4be972b8974f">google::LogMessage::LogMessageData::has_been_flushed_</a></div><div class="ttdeci">bool has_been_flushed_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00337">base/logging.cc:337</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_aa727b54ca243e836a04f0d58bb2567f8"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#aa727b54ca243e836a04f0d58bb2567f8">google::LogMessage::LogMessageData::num_prefix_chars_</a></div><div class="ttdeci">size_t num_prefix_chars_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00332">base/logging.cc:332</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_abfdae073349de1c469785d4be5d262a6"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#abfdae073349de1c469785d4be5d262a6">google::LogMessage::LogMessageData::outvec_</a></div><div class="ttdeci">std::vector&lt; std::string &gt; * outvec_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00327">base/logging.cc:327</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_ac515e5f5602db49593f96316f1b5c054"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#ac515e5f5602db49593f96316f1b5c054">google::LogMessage::LogMessageData::line_</a></div><div class="ttdeci">int line_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00323">base/logging.cc:323</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_ad2b6d3c512b3585000bd9c2822c1e52e"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad2b6d3c512b3585000bd9c2822c1e52e">google::LogMessage::LogMessageData::basename_</a></div><div class="ttdeci">const char * basename_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00335">base/logging.cc:335</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_ad619d07eb80a509b28505be39cc07532"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#ad619d07eb80a509b28505be39cc07532">google::LogMessage::LogMessageData::stream_</a></div><div class="ttdeci">LogStream stream_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00321">base/logging.cc:321</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_aefae0ad3d1d866302a3d246ad4f03a32"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#aefae0ad3d1d866302a3d246ad4f03a32">google::LogMessage::LogMessageData::LogMessageData</a></div><div class="ttdeci">LogMessageData()</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l01063">base/logging.cc:1063</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_af7f329ac8ea043562147dbaa396d4255"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#af7f329ac8ea043562147dbaa396d4255">google::LogMessage::LogMessageData::num_chars_to_syslog_</a></div><div class="ttdeci">size_t num_chars_to_syslog_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00334">base/logging.cc:334</a></div></div>
<div class="ttc" id="astructgoogle_1_1_log_message_1_1_log_message_data_html_afe46bfff74b48e9702894c87d8b00dcd"><div class="ttname"><a href="structgoogle_1_1_log_message_1_1_log_message_data.html#afe46bfff74b48e9702894c87d8b00dcd">google::LogMessage::LogMessageData::fullname_</a></div><div class="ttdeci">const char * fullname_</div><div class="ttdef"><b>Definition:</b> <a href="base_2logging_8cc_source.html#l00336">base/logging.cc:336</a></div></div>
<div class="ttc" id="astructgoogle_1_1logging__internal_1_1_crash_reason_html"><div class="ttname"><a href="structgoogle_1_1logging__internal_1_1_crash_reason.html">google::logging_internal::CrashReason</a></div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8h_source.html#l00064">logging_utilities.h:64</a></div></div>
<div class="ttc" id="astructgoogle_1_1logging__internal_1_1_crash_reason_html_a155108dfb07b71f192a35ce75199ed33"><div class="ttname"><a href="structgoogle_1_1logging__internal_1_1_crash_reason.html#a155108dfb07b71f192a35ce75199ed33">google::logging_internal::CrashReason::stack</a></div><div class="ttdeci">void * stack[32]</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8h_source.html#l00073">logging_utilities.h:73</a></div></div>
<div class="ttc" id="astructgoogle_1_1logging__internal_1_1_crash_reason_html_a254bf0858da09c96a48daf64404eb4f8"><div class="ttname"><a href="structgoogle_1_1logging__internal_1_1_crash_reason.html#a254bf0858da09c96a48daf64404eb4f8">google::logging_internal::CrashReason::message</a></div><div class="ttdeci">const char * message</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8h_source.html#l00069">logging_utilities.h:69</a></div></div>
<div class="ttc" id="astructgoogle_1_1logging__internal_1_1_crash_reason_html_a7efa5e9c7494c7d4586359300221aa5d"><div class="ttname"><a href="structgoogle_1_1logging__internal_1_1_crash_reason.html#a7efa5e9c7494c7d4586359300221aa5d">google::logging_internal::CrashReason::filename</a></div><div class="ttdeci">const char * filename</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8h_source.html#l00067">logging_utilities.h:67</a></div></div>
<div class="ttc" id="astructgoogle_1_1logging__internal_1_1_crash_reason_html_acb5ba97551079e0b072c62c21d784ac5"><div class="ttname"><a href="structgoogle_1_1logging__internal_1_1_crash_reason.html#acb5ba97551079e0b072c62c21d784ac5">google::logging_internal::CrashReason::depth</a></div><div class="ttdeci">int depth</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8h_source.html#l00074">logging_utilities.h:74</a></div></div>
<div class="ttc" id="astructgoogle_1_1logging__internal_1_1_crash_reason_html_ada7b81cc6d5bbe25b92c0162697e0f58"><div class="ttname"><a href="structgoogle_1_1logging__internal_1_1_crash_reason.html#ada7b81cc6d5bbe25b92c0162697e0f58">google::logging_internal::CrashReason::line_number</a></div><div class="ttdeci">int line_number</div><div class="ttdef"><b>Definition:</b> <a href="logging__utilities_8h_source.html#l00068">logging_utilities.h:68</a></div></div>
<div class="ttc" id="atrace_8cc_html_a36bd74109f547f7f8198faf5a12d2879"><div class="ttname"><a href="trace_8cc.html#a36bd74109f547f7f8198faf5a12d2879">message</a></div><div class="ttdeci">std::string message</div><div class="ttdef"><b>Definition:</b> <a href="trace_8cc_source.html#l00398">trace.cc:398</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.18-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_a7cc1eeded8f693d0da6c729bc88c45a.html">ortools</a></li><li class="navelem"><a class="el" href="dir_8f9dc966244f4c6e9b2fa0dee1e4ef1a.html">base</a></li><li class="navelem"><a class="el" href="base_2logging_8cc.html">logging.cc</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
