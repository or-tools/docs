<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google OR-Tools: operations_research::sat::AllDifferentConstraint Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="orLogo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Google OR-Tools<span id="projectnumber">&#160;v9.10</span>
   </div>
   <div id="projectbrief">a fast and portable software suite for combinatorial optimization</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classoperations__research_1_1sat_1_1AllDifferentConstraint.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classoperations__research_1_1sat_1_1AllDifferentConstraint-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">operations_research::sat::AllDifferentConstraint Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of <a class="el" href="namespaceoperations__research_1_1sat.html#a503351838b5eccf0a5c2a350d1610469">AllDifferentAC()</a>.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="all__different_8h_source.html">all_different.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for operations_research::sat::AllDifferentConstraint:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classoperations__research_1_1sat_1_1AllDifferentConstraint.png" usemap="#operations_5Fresearch::sat::AllDifferentConstraint_map" alt=""/>
  <map id="operations_5Fresearch::sat::AllDifferentConstraint_map" name="operations_5Fresearch::sat::AllDifferentConstraint_map">
<area href="classoperations__research_1_1sat_1_1PropagatorInterface.html" title="Base class for CP like propagators." alt="operations_research::sat::PropagatorInterface" shape="rect" coords="0,0,278,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a59e041a85cd31545fe5d7e0e3907d3a4" id="r_a59e041a85cd31545fe5d7e0e3907d3a4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a59e041a85cd31545fe5d7e0e3907d3a4">AllDifferentConstraint</a> (std::vector&lt; IntegerVariable &gt; variables, <a class="el" href="classoperations__research_1_1sat_1_1IntegerEncoder.html">IntegerEncoder</a> *encoder, <a class="el" href="classoperations__research_1_1sat_1_1Trail.html">Trail</a> *trail, <a class="el" href="classoperations__research_1_1sat_1_1IntegerTrail.html">IntegerTrail</a> *integer_trail)</td></tr>
<tr class="separator:a59e041a85cd31545fe5d7e0e3907d3a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1adb3a2f02ebc277b22879cd01e994b2" id="r_a1adb3a2f02ebc277b22879cd01e994b2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1adb3a2f02ebc277b22879cd01e994b2">Propagate</a> () final</td></tr>
<tr class="separator:a1adb3a2f02ebc277b22879cd01e994b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d6202d01c9bf1590c20996d2fbca03" id="r_ad1d6202d01c9bf1590c20996d2fbca03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad1d6202d01c9bf1590c20996d2fbca03">RegisterWith</a> (<a class="el" href="classoperations__research_1_1sat_1_1GenericLiteralWatcher.html">GenericLiteralWatcher</a> *watcher)</td></tr>
<tr class="separator:ad1d6202d01c9bf1590c20996d2fbca03"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of <a class="el" href="namespaceoperations__research_1_1sat.html#a503351838b5eccf0a5c2a350d1610469">AllDifferentAC()</a>. </p>

<p class="definition">Definition at line <a class="el" href="all__different_8h_source.html#l00068">68</a> of file <a class="el" href="all__different_8h_source.html">all_different.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a59e041a85cd31545fe5d7e0e3907d3a4" name="a59e041a85cd31545fe5d7e0e3907d3a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59e041a85cd31545fe5d7e0e3907d3a4">&#9670;&#160;</a></span>AllDifferentConstraint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">operations_research::sat::AllDifferentConstraint::AllDifferentConstraint </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; IntegerVariable &gt;</td>          <td class="paramname"><span class="paramname"><em>variables</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classoperations__research_1_1sat_1_1IntegerEncoder.html">IntegerEncoder</a> *</td>          <td class="paramname"><span class="paramname"><em>encoder</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classoperations__research_1_1sat_1_1Trail.html">Trail</a> *</td>          <td class="paramname"><span class="paramname"><em>trail</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classoperations__research_1_1sat_1_1IntegerTrail.html">IntegerTrail</a> *</td>          <td class="paramname"><span class="paramname"><em>integer_trail</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize literals cache.</p>
<p>Compute value range of all variables.</p>
<p>FullyEncode does not like 1-value domains, handle this case first. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo001049">Todo</a></b></dt><dd>(user): Prune now, ignore these variables during solving. </dd></dl>
<p>Force full encoding if not already done.</p>
<p>Fill cache with literals, default value is kFalseLiteralIndex.</p>
<p>Can happen because of initial propagation!</p>

<p class="definition">Definition at line <a class="el" href="all__different_8cc_source.html#l00112">112</a> of file <a class="el" href="all__different_8cc_source.html">all_different.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a1adb3a2f02ebc277b22879cd01e994b2" name="a1adb3a2f02ebc277b22879cd01e994b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1adb3a2f02ebc277b22879cd01e994b2">&#9670;&#160;</a></span>Propagate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::AllDifferentConstraint::Propagate </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">final</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The algorithm copies the solver state to successor_, which is used to compute a matching. If all variables can be matched, it generates the residual graph in separate vectors, computes its SCCs, and filters variable -&gt; value if variable is not in the same SCC as value. Explanations for failure and filtering are fine-grained: failure is explained by a Hall set, i.e. dom(variables) \subseteq {values}, with <code>variables</code> &lt; <code>values</code>; filtering is explained by the Hall set that would happen if the variable was assigned to the value.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo001050">Todo</a></b></dt><dd>(user): If needed, there are several ways performance could be improved. If copying the variable state is too costly, it could be maintained instead. If the propagator has too many fruitless calls (without failing/pruning), we can remember the O(n) arcs used in the matching and the SCC decomposition, and guard calls to <a class="el" href="#a1adb3a2f02ebc277b22879cd01e994b2">Propagate()</a> if these arcs are still valid. </dd></dl>
<p>Copy variable state to graph state.</p>
<p>Forward-checking should propagate x != value.</p>
<p>Because we currently propagates all clauses before entering this propagator, we known that this can't happen.</p>
<p>Seed with previous matching.</p>
<p>Compute max matching.</p>
<p>Fail if covering variables impossible. Explain with the forbidden parts of the graph that prevent MakeAugmentingPath from increasing the matching size.</p>
<p>For now explain all forbidden arcs.</p>
<p>The current matching is a valid solution, now try to filter values. Build residual graph, compute its SCCs.</p>
<p>Compute SCCs, make node -&gt; component map.</p>
<p>Remove arcs var -&gt; val where SCC(var) -/-&gt;* SCC(val).</p>
<p>We can deduce that x != value. To explain, force x == offset_value, then find another assignment for the variable matched to offset_value. It will fail: explaining why is the same as explaining failure as above, and it is an explanation of x != value.</p>
<p>Undo x -&gt; old_value and old_variable -&gt; offset_value.</p>

<p>Implements <a class="el" href="classoperations__research_1_1sat_1_1PropagatorInterface.html#a92be510851b26838f85adeec4a92a1b1">operations_research::sat::PropagatorInterface</a>.</p>

<p class="definition">Definition at line <a class="el" href="all__different_8cc_source.html#l00260">260</a> of file <a class="el" href="all__different_8cc_source.html">all_different.cc</a>.</p>

</div>
</div>
<a id="ad1d6202d01c9bf1590c20996d2fbca03" name="ad1d6202d01c9bf1590c20996d2fbca03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1d6202d01c9bf1590c20996d2fbca03">&#9670;&#160;</a></span>RegisterWith()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void operations_research::sat::AllDifferentConstraint::RegisterWith </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classoperations__research_1_1sat_1_1GenericLiteralWatcher.html">GenericLiteralWatcher</a> *</td>          <td class="paramname"><span class="paramname"><em>watcher</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Watch only unbound literals.</p>

<p class="definition">Definition at line <a class="el" href="all__different_8cc_source.html#l00171">171</a> of file <a class="el" href="all__different_8cc_source.html">all_different.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>ortools/sat/<a class="el" href="all__different_8h_source.html">all_different.h</a></li>
<li>ortools/sat/<a class="el" href="all__different_8cc_source.html">all_different.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceoperations__research.html">operations_research</a></li><li class="navelem"><a class="el" href="namespaceoperations__research_1_1sat.html">sat</a></li><li class="navelem"><a class="el" href="classoperations__research_1_1sat_1_1AllDifferentConstraint.html">AllDifferentConstraint</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
