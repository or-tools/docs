<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google OR-Tools: operations_research::sat::UniqueClauseStream Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="orLogo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Google OR-Tools<span id="projectnumber">&#160;v9.12</span>
   </div>
   <div id="projectbrief">a fast and portable software suite for combinatorial optimization</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classoperations__research_1_1sat_1_1UniqueClauseStream.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classoperations__research_1_1sat_1_1UniqueClauseStream-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">operations_research::sat::UniqueClauseStream Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="synchronization_8h_source.html">synchronization.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a71d02f102b33465b9a3e26c96f255ecd" id="r_a71d02f102b33465b9a3e26c96f255ecd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a71d02f102b33465b9a3e26c96f255ecd">UniqueClauseStream</a> ()</td></tr>
<tr class="separator:a71d02f102b33465b9a3e26c96f255ecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5215240a63d95d2733fd6d64fcd95553" id="r_a5215240a63d95d2733fd6d64fcd95553"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5215240a63d95d2733fd6d64fcd95553">UniqueClauseStream</a> (const <a class="el" href="classoperations__research_1_1sat_1_1UniqueClauseStream.html">UniqueClauseStream</a> &amp;)=delete</td></tr>
<tr class="memdesc:a5215240a63d95d2733fd6d64fcd95553"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move only - this is an expensive class to copy.  <br /></td></tr>
<tr class="separator:a5215240a63d95d2733fd6d64fcd95553"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8f45ae27027f679da249bdc03b8f66f" id="r_ac8f45ae27027f679da249bdc03b8f66f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac8f45ae27027f679da249bdc03b8f66f">UniqueClauseStream</a> (<a class="el" href="classoperations__research_1_1sat_1_1UniqueClauseStream.html">UniqueClauseStream</a> &amp;&amp;)=default</td></tr>
<tr class="separator:ac8f45ae27027f679da249bdc03b8f66f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac98259c0547e9182b1259fb82546564" id="r_aac98259c0547e9182b1259fb82546564"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aac98259c0547e9182b1259fb82546564">Add</a> (absl::Span&lt; const int &gt; clause) ABSL_LOCKS_EXCLUDED(mutex_)</td></tr>
<tr class="separator:aac98259c0547e9182b1259fb82546564"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b924aa99e34ca106c3901bb045de329" id="r_a9b924aa99e34ca106c3901bb045de329"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9b924aa99e34ca106c3901bb045de329">Delete</a> (absl::Span&lt; const int &gt; clause) ABSL_LOCKS_EXCLUDED(mutex_)</td></tr>
<tr class="separator:a9b924aa99e34ca106c3901bb045de329"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14c2e419956128fcabba2f09312c1cb" id="r_ab14c2e419956128fcabba2f09312c1cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classoperations__research_1_1sat_1_1CompactVectorVector.html">CompactVectorVector</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab14c2e419956128fcabba2f09312c1cb">NextBatch</a> () ABSL_LOCKS_EXCLUDED(mutex_)</td></tr>
<tr class="separator:ab14c2e419956128fcabba2f09312c1cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1703ebae0420a8845d120d3b8a757121" id="r_a1703ebae0420a8845d120d3b8a757121"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1703ebae0420a8845d120d3b8a757121">FillUpstreamBuffer</a> (<a class="el" href="classoperations__research_1_1sat_1_1UniqueClauseStream.html">UniqueClauseStream</a> &amp;upstream, int clause_size, int max_clauses_to_export) ABSL_LOCKS_EXCLUDED(mutex_)</td></tr>
<tr class="separator:a1703ebae0420a8845d120d3b8a757121"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92a1b4abc393c8d6a2f9836f90f9299b" id="r_a92a1b4abc393c8d6a2f9836f90f9299b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a92a1b4abc393c8d6a2f9836f90f9299b">NumBufferedLiteralsOfSize</a> (int size) const ABSL_LOCKS_EXCLUDED(mutex_)</td></tr>
<tr class="separator:a92a1b4abc393c8d6a2f9836f90f9299b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3baffbdbb5496feba681babff3130961" id="r_a3baffbdbb5496feba681babff3130961"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3baffbdbb5496feba681babff3130961">NumBufferedLiterals</a> () const ABSL_LOCKS_EXCLUDED(mutex_)</td></tr>
<tr class="separator:a3baffbdbb5496feba681babff3130961"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41b867114fad017ff80e13505048ca43" id="r_a41b867114fad017ff80e13505048ca43"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a41b867114fad017ff80e13505048ca43">CanAccept</a> (int size, int lbd) const</td></tr>
<tr class="separator:a41b867114fad017ff80e13505048ca43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a487f66660a4c16b7dd2efd6c58a69fe7" id="r_a487f66660a4c16b7dd2efd6c58a69fe7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a487f66660a4c16b7dd2efd6c58a69fe7">RemoveWorstClauses</a> ()</td></tr>
<tr class="separator:a487f66660a4c16b7dd2efd6c58a69fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add786eac56be7078db685d5e1130e20c" id="r_add786eac56be7078db685d5e1130e20c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#add786eac56be7078db685d5e1130e20c">lbd_threshold</a> () const ABSL_LOCKS_EXCLUDED(mutex_)</td></tr>
<tr class="separator:add786eac56be7078db685d5e1130e20c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a695d7d3b50c2b74a750153ce5b594472" id="r_a695d7d3b50c2b74a750153ce5b594472"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a695d7d3b50c2b74a750153ce5b594472">set_lbd_threshold</a> (int lbd) ABSL_LOCKS_EXCLUDED(mutex_)</td></tr>
<tr class="separator:a695d7d3b50c2b74a750153ce5b594472"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a4dd8bb005f601e9cf9ccdb36446e3252" id="r_a4dd8bb005f601e9cf9ccdb36446e3252"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4dd8bb005f601e9cf9ccdb36446e3252">HashClause</a> (absl::Span&lt; const int &gt; clause, size_t hash_seed=0)</td></tr>
<tr class="memdesc:a4dd8bb005f601e9cf9ccdb36446e3252"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes a hash that is independent of the order of literals in the clause.  <br /></td></tr>
<tr class="separator:a4dd8bb005f601e9cf9ccdb36446e3252"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ae4bc9cbc6b646b03f5f030cf73cb4235" id="r_ae4bc9cbc6b646b03f5f030cf73cb4235"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae4bc9cbc6b646b03f5f030cf73cb4235">kMinClauseSize</a> = 3</td></tr>
<tr class="separator:ae4bc9cbc6b646b03f5f030cf73cb4235"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01572dbd40c14891a3df707b63f177a3" id="r_a01572dbd40c14891a3df707b63f177a3"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a01572dbd40c14891a3df707b63f177a3">kMaxClauseSize</a> = 32</td></tr>
<tr class="separator:a01572dbd40c14891a3df707b63f177a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af885323a0c0f422586e478cdcb929400" id="r_af885323a0c0f422586e478cdcb929400"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af885323a0c0f422586e478cdcb929400">kMaxLiteralsPerBatch</a> = 4096 / sizeof(int)</td></tr>
<tr class="memdesc:af885323a0c0f422586e478cdcb929400"><td class="mdescLeft">&#160;</td><td class="mdescRight">Export 4KiB of clauses per batch.  <br /></td></tr>
<tr class="separator:af885323a0c0f422586e478cdcb929400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12c74b43c83a67ea905e95e1f2931bb8" id="r_a12c74b43c83a67ea905e95e1f2931bb8"><td class="memItemLeft" align="right" valign="top">static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a12c74b43c83a67ea905e95e1f2931bb8">kMaxBufferedLiterals</a> = <a class="el" href="#af885323a0c0f422586e478cdcb929400">kMaxLiteralsPerBatch</a></td></tr>
<tr class="separator:a12c74b43c83a67ea905e95e1f2931bb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Emit a stream of clauses in batches without duplicates. Each batch has a fixed number of literals, containing the smallest clauses added. It has a finite size internal buffer that is a small multiple of the batch size.</p>
<p>This class is thread-safe, the idea is to have one per worker plus a global one to deduplicate between workers to minimize contention.</p>
<p>This uses a finite buffer, so some clauses may be dropped if we generate too many more than we export, but that is rarely a problem because we never overfill the "global" stream, and if we drop a clause on a worker, one of the following will most likely happen:</p><ol type="1">
<li>Some other worker learns the clause and shares it later.</li>
<li>All other workers also learn and drop the clause.</li>
<li>No other worker learns the clause, so it was not that helpful anyway.</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>this uses literals as encoded in a <a class="el" href="cp__model_8proto.html">cp_model.proto</a>. Thus, the literals can be negative numbers. </dd></dl>

<p class="definition">Definition at line <a class="el" href="synchronization_8h_source.html#l00638">638</a> of file <a class="el" href="synchronization_8h_source.html">synchronization.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a71d02f102b33465b9a3e26c96f255ecd" name="a71d02f102b33465b9a3e26c96f255ecd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71d02f102b33465b9a3e26c96f255ecd">&#9670;&#160;</a></span>UniqueClauseStream() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">operations_research::sat::UniqueClauseStream::UniqueClauseStream </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="synchronization_8cc_source.html#l01130">1130</a> of file <a class="el" href="synchronization_8cc_source.html">synchronization.cc</a>.</p>

</div>
</div>
<a id="a5215240a63d95d2733fd6d64fcd95553" name="a5215240a63d95d2733fd6d64fcd95553"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5215240a63d95d2733fd6d64fcd95553">&#9670;&#160;</a></span>UniqueClauseStream() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">operations_research::sat::UniqueClauseStream::UniqueClauseStream </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classoperations__research_1_1sat_1_1UniqueClauseStream.html">UniqueClauseStream</a> &amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel delete">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Move only - this is an expensive class to copy. </p>

</div>
</div>
<a id="ac8f45ae27027f679da249bdc03b8f66f" name="ac8f45ae27027f679da249bdc03b8f66f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8f45ae27027f679da249bdc03b8f66f">&#9670;&#160;</a></span>UniqueClauseStream() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">operations_research::sat::UniqueClauseStream::UniqueClauseStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classoperations__research_1_1sat_1_1UniqueClauseStream.html">UniqueClauseStream</a> &amp;&amp;</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel default">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aac98259c0547e9182b1259fb82546564" name="aac98259c0547e9182b1259fb82546564"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac98259c0547e9182b1259fb82546564">&#9670;&#160;</a></span>Add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::UniqueClauseStream::Add </td>
          <td>(</td>
          <td class="paramtype">absl::Span&lt; const int &gt;</td>          <td class="paramname"><span class="paramname"><em>clause</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds the clause to a future batch and returns true if the clause was added. Otherwise returns false. This may return false if the buffer is full. It will not block the clause if it is dropped to avoid unbounded growth of the hash table. </p>
<p>This is just a safety check, the caller should have called <a class="el" href="#a41b867114fad017ff80e13505048ca43">CanAccept()</a>.</p>

<p class="definition">Definition at line <a class="el" href="synchronization_8cc_source.html#l01136">1136</a> of file <a class="el" href="synchronization_8cc_source.html">synchronization.cc</a>.</p>

</div>
</div>
<a id="a41b867114fad017ff80e13505048ca43" name="a41b867114fad017ff80e13505048ca43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41b867114fad017ff80e13505048ca43">&#9670;&#160;</a></span>CanAccept()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::UniqueClauseStream::CanAccept </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>lbd</em></span>&#160;) const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true if the stream can accept a clause of the specified size and LBD without dropping it. </p>

<p class="definition">Definition at line <a class="el" href="synchronization_8cc_source.html#l01209">1209</a> of file <a class="el" href="synchronization_8cc_source.html">synchronization.cc</a>.</p>

</div>
</div>
<a id="a9b924aa99e34ca106c3901bb045de329" name="a9b924aa99e34ca106c3901bb045de329"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b924aa99e34ca106c3901bb045de329">&#9670;&#160;</a></span>Delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::UniqueClauseStream::Delete </td>
          <td>(</td>
          <td class="paramtype">absl::Span&lt; const int &gt;</td>          <td class="paramname"><span class="paramname"><em>clause</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lazily deletes a clause with the same hash, returns true if it was present. The deleted clause will not be exported (either via NextBatch or FillUpstreamBuffer). A clause with the same hash may be re-added after calling Delete. If another clause with the same hash is added before the deleted clause is emitted then both clauses may be emitted. </p>
<p>Note a clause with this hash may be buffered, but not yet exported.</p>

<p class="definition">Definition at line <a class="el" href="synchronization_8cc_source.html#l01157">1157</a> of file <a class="el" href="synchronization_8cc_source.html">synchronization.cc</a>.</p>

</div>
</div>
<a id="a1703ebae0420a8845d120d3b8a757121" name="a1703ebae0420a8845d120d3b8a757121"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1703ebae0420a8845d120d3b8a757121">&#9670;&#160;</a></span>FillUpstreamBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int operations_research::sat::UniqueClauseStream::FillUpstreamBuffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classoperations__research_1_1sat_1_1UniqueClauseStream.html">UniqueClauseStream</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>upstream</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>clause_size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>max_clauses_to_export</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds up to max_clauses_to_export clauses of a given size to upstream and removes them from the internal buffer. </p>
<p>Don't emit deleted clauses.</p>

<p class="definition">Definition at line <a class="el" href="synchronization_8cc_source.html#l01183">1183</a> of file <a class="el" href="synchronization_8cc_source.html">synchronization.cc</a>.</p>

</div>
</div>
<a id="a4dd8bb005f601e9cf9ccdb36446e3252" name="a4dd8bb005f601e9cf9ccdb36446e3252"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dd8bb005f601e9cf9ccdb36446e3252">&#9670;&#160;</a></span>HashClause()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t operations_research::sat::UniqueClauseStream::HashClause </td>
          <td>(</td>
          <td class="paramtype">absl::Span&lt; const int &gt;</td>          <td class="paramname"><span class="paramname"><em>clause</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>hash_seed</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Computes a hash that is independent of the order of literals in the clause. </p>

<p class="definition">Definition at line <a class="el" href="synchronization_8cc_source.html#l01245">1245</a> of file <a class="el" href="synchronization_8cc_source.html">synchronization.cc</a>.</p>

</div>
</div>
<a id="add786eac56be7078db685d5e1130e20c" name="add786eac56be7078db685d5e1130e20c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add786eac56be7078db685d5e1130e20c">&#9670;&#160;</a></span>lbd_threshold()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int operations_research::sat::UniqueClauseStream::lbd_threshold </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="synchronization_8h_source.html#l00695">695</a> of file <a class="el" href="synchronization_8h_source.html">synchronization.h</a>.</p>

</div>
</div>
<a id="ab14c2e419956128fcabba2f09312c1cb" name="ab14c2e419956128fcabba2f09312c1cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab14c2e419956128fcabba2f09312c1cb">&#9670;&#160;</a></span>NextBatch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classoperations__research_1_1sat_1_1CompactVectorVector.html">CompactVectorVector</a>&lt; int &gt; operations_research::sat::UniqueClauseStream::NextBatch </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a set of clauses totalling up to kMaxLiteralsPerBatch and removes exported clauses from the internal buffer. </p>

<p class="definition">Definition at line <a class="el" href="synchronization_8cc_source.html#l01164">1164</a> of file <a class="el" href="synchronization_8cc_source.html">synchronization.cc</a>.</p>

</div>
</div>
<a id="a3baffbdbb5496feba681babff3130961" name="a3baffbdbb5496feba681babff3130961"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3baffbdbb5496feba681babff3130961">&#9670;&#160;</a></span>NumBufferedLiterals()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int operations_research::sat::UniqueClauseStream::NumBufferedLiterals </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="synchronization_8cc_source.html#l01200">1200</a> of file <a class="el" href="synchronization_8cc_source.html">synchronization.cc</a>.</p>

</div>
</div>
<a id="a92a1b4abc393c8d6a2f9836f90f9299b" name="a92a1b4abc393c8d6a2f9836f90f9299b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92a1b4abc393c8d6a2f9836f90f9299b">&#9670;&#160;</a></span>NumBufferedLiteralsOfSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int operations_research::sat::UniqueClauseStream::NumBufferedLiteralsOfSize </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>size</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the number of literals in the buffer in clauses with size &lt;= max_size. </p>

<p class="definition">Definition at line <a class="el" href="synchronization_8h_source.html#l00679">679</a> of file <a class="el" href="synchronization_8h_source.html">synchronization.h</a>.</p>

</div>
</div>
<a id="a487f66660a4c16b7dd2efd6c58a69fe7" name="a487f66660a4c16b7dd2efd6c58a69fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a487f66660a4c16b7dd2efd6c58a69fe7">&#9670;&#160;</a></span>RemoveWorstClauses()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void operations_research::sat::UniqueClauseStream::RemoveWorstClauses </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete longest clauses while keeping at least kMaxBufferedLiterals. This guarantees that CanAccept will return the same result as before, and at least the next batch will contain the same clauses, but we will emit fewer old, long clauses in the future. </p>
<p>Stop if removing one more clause of the current size would leave the buffer under full. Otherwise we might remove a shorter clause later!</p>

<p class="definition">Definition at line <a class="el" href="synchronization_8cc_source.html#l01220">1220</a> of file <a class="el" href="synchronization_8cc_source.html">synchronization.cc</a>.</p>

</div>
</div>
<a id="a695d7d3b50c2b74a750153ce5b594472" name="a695d7d3b50c2b74a750153ce5b594472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a695d7d3b50c2b74a750153ce5b594472">&#9670;&#160;</a></span>set_lbd_threshold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void operations_research::sat::UniqueClauseStream::set_lbd_threshold </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>lbd</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="synchronization_8cc_source.html#l01240">1240</a> of file <a class="el" href="synchronization_8cc_source.html">synchronization.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a12c74b43c83a67ea905e95e1f2931bb8" name="a12c74b43c83a67ea905e95e1f2931bb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12c74b43c83a67ea905e95e1f2931bb8">&#9670;&#160;</a></span>kMaxBufferedLiterals</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int operations_research::sat::UniqueClauseStream::kMaxBufferedLiterals = <a class="el" href="#af885323a0c0f422586e478cdcb929400">kMaxLiteralsPerBatch</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel constexpr">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Bound the total literals we buffer, approximately enforced so shorter clauses can replace longer ones. This can be larger than kMaxLiteralsPerBatch (hence the separate constant), but experiments suggest that this doesn't help. </p>

<p class="definition">Definition at line <a class="el" href="synchronization_8h_source.html#l00648">648</a> of file <a class="el" href="synchronization_8h_source.html">synchronization.h</a>.</p>

</div>
</div>
<a id="a01572dbd40c14891a3df707b63f177a3" name="a01572dbd40c14891a3df707b63f177a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01572dbd40c14891a3df707b63f177a3">&#9670;&#160;</a></span>kMaxClauseSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int operations_research::sat::UniqueClauseStream::kMaxClauseSize = 32</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel constexpr">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="synchronization_8h_source.html#l00641">641</a> of file <a class="el" href="synchronization_8h_source.html">synchronization.h</a>.</p>

</div>
</div>
<a id="af885323a0c0f422586e478cdcb929400" name="af885323a0c0f422586e478cdcb929400"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af885323a0c0f422586e478cdcb929400">&#9670;&#160;</a></span>kMaxLiteralsPerBatch</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int operations_research::sat::UniqueClauseStream::kMaxLiteralsPerBatch = 4096 / sizeof(int)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel constexpr">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Export 4KiB of clauses per batch. </p>

<p class="definition">Definition at line <a class="el" href="synchronization_8h_source.html#l00643">643</a> of file <a class="el" href="synchronization_8h_source.html">synchronization.h</a>.</p>

</div>
</div>
<a id="ae4bc9cbc6b646b03f5f030cf73cb4235" name="ae4bc9cbc6b646b03f5f030cf73cb4235"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4bc9cbc6b646b03f5f030cf73cb4235">&#9670;&#160;</a></span>kMinClauseSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int operations_research::sat::UniqueClauseStream::kMinClauseSize = 3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel constexpr">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="synchronization_8h_source.html#l00640">640</a> of file <a class="el" href="synchronization_8h_source.html">synchronization.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>ortools/sat/<a class="el" href="synchronization_8h_source.html">synchronization.h</a></li>
<li>ortools/sat/<a class="el" href="synchronization_8cc_source.html">synchronization.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceoperations__research.html">operations_research</a></li><li class="navelem"><a class="el" href="namespaceoperations__research_1_1sat.html">sat</a></li><li class="navelem"><a class="el" href="classoperations__research_1_1sat_1_1UniqueClauseStream.html">UniqueClauseStream</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
