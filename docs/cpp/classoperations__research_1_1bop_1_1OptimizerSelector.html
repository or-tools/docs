<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google OR-Tools: operations_research::bop::OptimizerSelector Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="orLogo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Google OR-Tools<span id="projectnumber">&#160;v9.10</span>
   </div>
   <div id="projectbrief">a fast and portable software suite for combinatorial optimization</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classoperations__research_1_1bop_1_1OptimizerSelector.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classoperations__research_1_1bop_1_1OptimizerSelector-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">operations_research::bop::OptimizerSelector Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="bop__portfolio_8h_source.html">bop_portfolio.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afb277b0530bd3cc33829708fd9449b8c" id="r_afb277b0530bd3cc33829708fd9449b8c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afb277b0530bd3cc33829708fd9449b8c">OptimizerSelector</a> (const <a class="el" href="classabsl_1_1StrongVector.html">absl::StrongVector</a>&lt; OptimizerIndex, <a class="el" href="classoperations__research_1_1bop_1_1BopOptimizerBase.html">BopOptimizerBase</a> * &gt; &amp;optimizers)</td></tr>
<tr class="separator:afb277b0530bd3cc33829708fd9449b8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39afee83d9f173f951fd8bef5668d1cc" id="r_a39afee83d9f173f951fd8bef5668d1cc"><td class="memItemLeft" align="right" valign="top">OptimizerIndex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a39afee83d9f173f951fd8bef5668d1cc">SelectOptimizer</a> ()</td></tr>
<tr class="separator:a39afee83d9f173f951fd8bef5668d1cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaefe516d05243563e45d3c5a3eccb717" id="r_aaefe516d05243563e45d3c5a3eccb717"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaefe516d05243563e45d3c5a3eccb717">UpdateScore</a> (int64_t gain, double time_spent)</td></tr>
<tr class="separator:aaefe516d05243563e45d3c5a3eccb717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f5e5b3a6fc41f36327fb65aa1626392" id="r_a8f5e5b3a6fc41f36327fb65aa1626392"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8f5e5b3a6fc41f36327fb65aa1626392">TemporarilyMarkOptimizerAsUnselectable</a> (OptimizerIndex optimizer_index)</td></tr>
<tr class="separator:a8f5e5b3a6fc41f36327fb65aa1626392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90899a835ba61dd5404514594bac26d1" id="r_a90899a835ba61dd5404514594bac26d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90899a835ba61dd5404514594bac26d1">SetOptimizerRunnability</a> (OptimizerIndex optimizer_index, bool runnable)</td></tr>
<tr class="separator:a90899a835ba61dd5404514594bac26d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43896e1731a0c1128f7d337e44909ee8" id="r_a43896e1731a0c1128f7d337e44909ee8"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a43896e1731a0c1128f7d337e44909ee8">PrintStats</a> (OptimizerIndex optimizer_index) const</td></tr>
<tr class="memdesc:a43896e1731a0c1128f7d337e44909ee8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns statistics about the given optimizer.  <br /></td></tr>
<tr class="separator:a43896e1731a0c1128f7d337e44909ee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace88ad49affa80956545f4b2a6cb6505" id="r_ace88ad49affa80956545f4b2a6cb6505"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ace88ad49affa80956545f4b2a6cb6505">NumCallsForOptimizer</a> (OptimizerIndex optimizer_index) const</td></tr>
<tr class="separator:ace88ad49affa80956545f4b2a6cb6505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad04d04c020ce718f1967ba5a8c31072b" id="r_ad04d04c020ce718f1967ba5a8c31072b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad04d04c020ce718f1967ba5a8c31072b">DebugPrint</a> () const</td></tr>
<tr class="memdesc:ad04d04c020ce718f1967ba5a8c31072b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints some debug information. Should not be used in production.  <br /></td></tr>
<tr class="separator:ad04d04c020ce718f1967ba5a8c31072b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class is providing an adaptative selector for optimizers based on their past successes and deterministic time spent. </p>

<p class="definition">Definition at line <a class="el" href="bop__portfolio_8h_source.html#l00108">108</a> of file <a class="el" href="bop__portfolio_8h_source.html">bop_portfolio.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="afb277b0530bd3cc33829708fd9449b8c" name="afb277b0530bd3cc33829708fd9449b8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb277b0530bd3cc33829708fd9449b8c">&#9670;&#160;</a></span>OptimizerSelector()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">operations_research::bop::OptimizerSelector::OptimizerSelector </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classabsl_1_1StrongVector.html">absl::StrongVector</a>&lt; OptimizerIndex, <a class="el" href="classoperations__research_1_1bop_1_1BopOptimizerBase.html">BopOptimizerBase</a> * &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>optimizers</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>the list of optimizers is only used to get the names for debug purposes, the ownership of the optimizers is not transferred.</dd></dl>
<p><a class="el" href="classoperations__research_1_1bop_1_1OptimizerSelector.html">OptimizerSelector</a> </p>

<p class="definition">Definition at line <a class="el" href="bop__portfolio_8cc_source.html#l00359">359</a> of file <a class="el" href="bop__portfolio_8cc_source.html">bop_portfolio.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad04d04c020ce718f1967ba5a8c31072b" name="ad04d04c020ce718f1967ba5a8c31072b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad04d04c020ce718f1967ba5a8c31072b">&#9670;&#160;</a></span>DebugPrint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void operations_research::bop::OptimizerSelector::DebugPrint </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints some debug information. Should not be used in production. </p>

<p class="definition">Definition at line <a class="el" href="bop__portfolio_8cc_source.html#l00460">460</a> of file <a class="el" href="bop__portfolio_8cc_source.html">bop_portfolio.cc</a>.</p>

</div>
</div>
<a id="ace88ad49affa80956545f4b2a6cb6505" name="ace88ad49affa80956545f4b2a6cb6505"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace88ad49affa80956545f4b2a6cb6505">&#9670;&#160;</a></span>NumCallsForOptimizer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int operations_research::bop::OptimizerSelector::NumCallsForOptimizer </td>
          <td>(</td>
          <td class="paramtype">OptimizerIndex</td>          <td class="paramname"><span class="paramname"><em>optimizer_index</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bop__portfolio_8cc_source.html#l00454">454</a> of file <a class="el" href="bop__portfolio_8cc_source.html">bop_portfolio.cc</a>.</p>

</div>
</div>
<a id="a43896e1731a0c1128f7d337e44909ee8" name="a43896e1731a0c1128f7d337e44909ee8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43896e1731a0c1128f7d337e44909ee8">&#9670;&#160;</a></span>PrintStats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string operations_research::bop::OptimizerSelector::PrintStats </td>
          <td>(</td>
          <td class="paramtype">OptimizerIndex</td>          <td class="paramname"><span class="paramname"><em>optimizer_index</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns statistics about the given optimizer. </p>

<p class="definition">Definition at line <a class="el" href="bop__portfolio_8cc_source.html#l00443">443</a> of file <a class="el" href="bop__portfolio_8cc_source.html">bop_portfolio.cc</a>.</p>

</div>
</div>
<a id="a39afee83d9f173f951fd8bef5668d1cc" name="a39afee83d9f173f951fd8bef5668d1cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39afee83d9f173f951fd8bef5668d1cc">&#9670;&#160;</a></span>SelectOptimizer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OptimizerIndex operations_research::bop::OptimizerSelector::SelectOptimizer </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Selects the next optimizer to run based on the user defined order and history of success. Returns kInvalidOptimizerIndex if no optimizer is selectable and runnable (see the functions below).</p>
<p>The optimizer is selected using the following algorithm (L being the sorted list of optimizers, and l the position of the last selected optimizer): a- If a new solution has been found by optimizer l, select the first optimizer l' in L, l' &gt;= 0, that can run. b- If optimizer l didn't find a new solution, select the first optimizer l', with l' &gt; l, such that its deterministic time spent since last solution is smaller than the deterministic time spent by any runnable optimizer in 1..l since last solution. If no such optimizer is available, go to option a. </p>
<p>Select the first possible optimizer.</p>
<p>Select the next possible optimizer. If none, select the first one. Check that the time is smaller than all previous optimizers which are runnable.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000101">Todo</a></b></dt><dd>(user): Remove this recursive call, even if in practice it's safe because the max depth is the number of optimizers. </dd></dl>
<p>Select the optimizer.</p>

<p class="definition">Definition at line <a class="el" href="bop__portfolio_8cc_source.html#l00368">368</a> of file <a class="el" href="bop__portfolio_8cc_source.html">bop_portfolio.cc</a>.</p>

</div>
</div>
<a id="a90899a835ba61dd5404514594bac26d1" name="a90899a835ba61dd5404514594bac26d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90899a835ba61dd5404514594bac26d1">&#9670;&#160;</a></span>SetOptimizerRunnability()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void operations_research::bop::OptimizerSelector::SetOptimizerRunnability </td>
          <td>(</td>
          <td class="paramtype">OptimizerIndex</td>          <td class="paramname"><span class="paramname"><em>optimizer_index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>runnable</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets whether or not an optimizer is "runnable". Like a non-selectable one, a non-runnable optimizer will never be returned by <a class="el" href="#a39afee83d9f173f951fd8bef5668d1cc">SelectOptimizer()</a>.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000102">Todo</a></b></dt><dd>(user): Maybe we should simply have the notion of selectability here and let the client handle the logic to decide what optimizer are selectable or not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="bop__portfolio_8cc_source.html#l00438">438</a> of file <a class="el" href="bop__portfolio_8cc_source.html">bop_portfolio.cc</a>.</p>

</div>
</div>
<a id="a8f5e5b3a6fc41f36327fb65aa1626392" name="a8f5e5b3a6fc41f36327fb65aa1626392"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f5e5b3a6fc41f36327fb65aa1626392">&#9670;&#160;</a></span>TemporarilyMarkOptimizerAsUnselectable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void operations_research::bop::OptimizerSelector::TemporarilyMarkOptimizerAsUnselectable </td>
          <td>(</td>
          <td class="paramtype">OptimizerIndex</td>          <td class="paramname"><span class="paramname"><em>optimizer_index</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Marks the given optimizer as not selectable until <a class="el" href="#aaefe516d05243563e45d3c5a3eccb717">UpdateScore()</a> is called with a positive gain. In which case, all optimizer will become selectable again. </p>

<p class="definition">Definition at line <a class="el" href="bop__portfolio_8cc_source.html#l00433">433</a> of file <a class="el" href="bop__portfolio_8cc_source.html">bop_portfolio.cc</a>.</p>

</div>
</div>
<a id="aaefe516d05243563e45d3c5a3eccb717" name="aaefe516d05243563e45d3c5a3eccb717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaefe516d05243563e45d3c5a3eccb717">&#9670;&#160;</a></span>UpdateScore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void operations_research::bop::OptimizerSelector::UpdateScore </td>
          <td>(</td>
          <td class="paramtype">int64_t</td>          <td class="paramname"><span class="paramname"><em>gain</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>time_spent</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the internal metrics to decide which optimizer to select. This method should be called each time the selected optimizer is run.</p>
<p>The gain corresponds to the reward to assign to the solver; It could for instance be the difference in cost between the last and the current solution.</p>
<p>The time spent corresponds to the time the optimizer spent; To make the behavior deterministic, it is recommended to use the deterministic time instead of the elapsed time.</p>
<p>The optimizers are sorted based on their score each time a new solution is found. </p>

<p class="definition">Definition at line <a class="el" href="bop__portfolio_8cc_source.html#l00413">413</a> of file <a class="el" href="bop__portfolio_8cc_source.html">bop_portfolio.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>ortools/bop/<a class="el" href="bop__portfolio_8h_source.html">bop_portfolio.h</a></li>
<li>ortools/bop/<a class="el" href="bop__portfolio_8cc_source.html">bop_portfolio.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceoperations__research.html">operations_research</a></li><li class="navelem"><a class="el" href="namespaceoperations__research_1_1bop.html">bop</a></li><li class="navelem"><a class="el" href="classoperations__research_1_1bop_1_1OptimizerSelector.html">OptimizerSelector</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
