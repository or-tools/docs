<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google OR-Tools: operations_research::sat::CoverCutHelper Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="orLogo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Google OR-Tools<span id="projectnumber">&#160;v9.11</span>
   </div>
   <div id="projectbrief">a fast and portable software suite for combinatorial optimization</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classoperations__research_1_1sat_1_1CoverCutHelper.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classoperations__research_1_1sat_1_1CoverCutHelper-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">operations_research::sat::CoverCutHelper Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Helper to find knapsack cover cuts.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="cuts_8h_source.html">cuts.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a09cc8fae3200990815f75ae5c73fceeb" id="r_a09cc8fae3200990815f75ae5c73fceeb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a09cc8fae3200990815f75ae5c73fceeb">~CoverCutHelper</a> ()</td></tr>
<tr class="separator:a09cc8fae3200990815f75ae5c73fceeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29be1489d397a5d646a838946a85a225" id="r_a29be1489d397a5d646a838946a85a225"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a29be1489d397a5d646a838946a85a225">TrySimpleKnapsack</a> (const <a class="el" href="structoperations__research_1_1sat_1_1CutData.html">CutData</a> &amp;input_ct, <a class="el" href="classoperations__research_1_1sat_1_1ImpliedBoundsProcessor.html">ImpliedBoundsProcessor</a> *ib_processor=nullptr)</td></tr>
<tr class="separator:a29be1489d397a5d646a838946a85a225"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82f509c2f8c4ea40561f572f6a612ebd" id="r_a82f509c2f8c4ea40561f572f6a612ebd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a82f509c2f8c4ea40561f572f6a612ebd">TryWithLetchfordSouliLifting</a> (const <a class="el" href="structoperations__research_1_1sat_1_1CutData.html">CutData</a> &amp;input_ct, <a class="el" href="classoperations__research_1_1sat_1_1ImpliedBoundsProcessor.html">ImpliedBoundsProcessor</a> *ib_processor=nullptr)</td></tr>
<tr class="separator:a82f509c2f8c4ea40561f572f6a612ebd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf54256e1bd003c568c2efd55d75fdd6" id="r_abf54256e1bd003c568c2efd55d75fdd6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abf54256e1bd003c568c2efd55d75fdd6">TrySingleNodeFlow</a> (const <a class="el" href="structoperations__research_1_1sat_1_1CutData.html">CutData</a> &amp;input_ct, <a class="el" href="classoperations__research_1_1sat_1_1ImpliedBoundsProcessor.html">ImpliedBoundsProcessor</a> *ib_processor=nullptr)</td></tr>
<tr class="separator:abf54256e1bd003c568c2efd55d75fdd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c964d3599c7a44306db4c65811c4072" id="r_a0c964d3599c7a44306db4c65811c4072"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structoperations__research_1_1sat_1_1CutData.html">CutData</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c964d3599c7a44306db4c65811c4072">cut</a> () const</td></tr>
<tr class="memdesc:a0c964d3599c7a44306db4c65811c4072"><td class="mdescLeft">&#160;</td><td class="mdescRight">If successful, info about the last generated cut.  <br /></td></tr>
<tr class="separator:a0c964d3599c7a44306db4c65811c4072"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a523a708724f4a38ca618ec3d662978c6" id="r_a523a708724f4a38ca618ec3d662978c6"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a523a708724f4a38ca618ec3d662978c6">Info</a> () const</td></tr>
<tr class="memdesc:a523a708724f4a38ca618ec3d662978c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Single line of text that we append to the cut log line.  <br /></td></tr>
<tr class="separator:a523a708724f4a38ca618ec3d662978c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae7caad9a51c4b64d554f9c0ebdc2300" id="r_aae7caad9a51c4b64d554f9c0ebdc2300"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae7caad9a51c4b64d554f9c0ebdc2300">SetSharedStatistics</a> (<a class="el" href="classoperations__research_1_1sat_1_1SharedStatistics.html">SharedStatistics</a> *stats)</td></tr>
<tr class="separator:aae7caad9a51c4b64d554f9c0ebdc2300"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9f009459bd90b1ecb38de1288df4e72" id="r_ac9f009459bd90b1ecb38de1288df4e72"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac9f009459bd90b1ecb38de1288df4e72">ClearCache</a> ()</td></tr>
<tr class="separator:ac9f009459bd90b1ecb38de1288df4e72"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Helper to find knapsack cover cuts. </p>

<p class="definition">Definition at line <a class="el" href="cuts_8h_source.html#l00457">457</a> of file <a class="el" href="cuts_8h_source.html">cuts.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a09cc8fae3200990815f75ae5c73fceeb" name="a09cc8fae3200990815f75ae5c73fceeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09cc8fae3200990815f75ae5c73fceeb">&#9670;&#160;</a></span>~CoverCutHelper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">operations_research::sat::CoverCutHelper::~CoverCutHelper </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cuts_8cc_source.html#l01055">1055</a> of file <a class="el" href="cuts_8cc_source.html">cuts.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac9f009459bd90b1ecb38de1288df4e72" name="ac9f009459bd90b1ecb38de1288df4e72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9f009459bd90b1ecb38de1288df4e72">&#9670;&#160;</a></span>ClearCache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void operations_research::sat::CoverCutHelper::ClearCache </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cuts_8h_source.html#l00514">514</a> of file <a class="el" href="cuts_8h_source.html">cuts.h</a>.</p>

</div>
</div>
<a id="a0c964d3599c7a44306db4c65811c4072" name="a0c964d3599c7a44306db4c65811c4072"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c964d3599c7a44306db4c65811c4072">&#9670;&#160;</a></span>cut()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structoperations__research_1_1sat_1_1CutData.html">CutData</a> &amp; operations_research::sat::CoverCutHelper::cut </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If successful, info about the last generated cut. </p>

<p class="definition">Definition at line <a class="el" href="cuts_8h_source.html#l00507">507</a> of file <a class="el" href="cuts_8h_source.html">cuts.h</a>.</p>

</div>
</div>
<a id="a523a708724f4a38ca618ec3d662978c6" name="a523a708724f4a38ca618ec3d662978c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a523a708724f4a38ca618ec3d662978c6">&#9670;&#160;</a></span>Info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string operations_research::sat::CoverCutHelper::Info </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Single line of text that we append to the cut log line. </p>

<p class="definition">Definition at line <a class="el" href="cuts_8h_source.html#l00510">510</a> of file <a class="el" href="cuts_8h_source.html">cuts.h</a>.</p>

</div>
</div>
<a id="aae7caad9a51c4b64d554f9c0ebdc2300" name="aae7caad9a51c4b64d554f9c0ebdc2300"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae7caad9a51c4b64d554f9c0ebdc2300">&#9670;&#160;</a></span>SetSharedStatistics()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void operations_research::sat::CoverCutHelper::SetSharedStatistics </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classoperations__research_1_1sat_1_1SharedStatistics.html">SharedStatistics</a> *</td>          <td class="paramname"><span class="paramname"><em>stats</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cuts_8h_source.html#l00512">512</a> of file <a class="el" href="cuts_8h_source.html">cuts.h</a>.</p>

</div>
</div>
<a id="a29be1489d397a5d646a838946a85a225" name="a29be1489d397a5d646a838946a85a225"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29be1489d397a5d646a838946a85a225">&#9670;&#160;</a></span>TrySimpleKnapsack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::CoverCutHelper::TrySimpleKnapsack </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structoperations__research_1_1sat_1_1CutData.html">CutData</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>input_ct</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classoperations__research_1_1sat_1_1ImpliedBoundsProcessor.html">ImpliedBoundsProcessor</a> *</td>          <td class="paramname"><span class="paramname"><em>ib_processor</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Try to find a cut with a knapsack heuristic. This assumes an input with all coefficients positive. If this returns true, you can get the cut via <a class="el" href="#a0c964d3599c7a44306db4c65811c4072" title="If successful, info about the last generated cut.">cut()</a>.</p>
<p>This uses a lifting procedure similar to what is described in "Lifting the
Knapsack Cover Inequalities for the Knapsack Polytope", Adam N. Letchfod, Georgia Souli. In particular the section "Lifting via mixed-integer
rounding". </p>
<p>Tricky: This only work because the cut absl128 rhs is not changed by these operations.</p>
<p>We only look at non-Boolean with an lp value not close to the upper bound.</p>
<p>If some implied bound substitution are possible, we do not cache anything currently because the logic is currently sighlty different betweent the two code. Fix?</p>
<p>The cut is just obtained by complementing the variable in the cover and applying the MIR super additive function.</p>
<dl class="section note"><dt>Note</dt><dd>since all coeff in the cover will now be negative. If we do no scaling, and if we use max_coeff_in_cover to construct f(), they will be mapped by f() to -1 and we get the classical cover inequality. With scaling we can get a strictly dominating cut though.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo001577">Todo</a></b></dt><dd>(user): we don't have to pick max_coeff_in_cover and could use the coefficient of the most fractional variable. Or like in the MIR code try a few of them. Currently, the cut in the test is worse if we don't take the max_coeff_in_cover though, so we need more understanding.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo001578">Todo</a></b></dt><dd>(user): It seems we could use a more advanced lifting function described later in the paper. Investigate. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo001579">Todo</a></b></dt><dd>(user): Experiment without this line that basically disable scoring. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo001580">Todo</a></b></dt><dd>(user): experiment with different value of scaling and param t. </dd></dl>
<p>Update counters.</p>

<p class="definition">Definition at line <a class="el" href="cuts_8cc_source.html#l01293">1293</a> of file <a class="el" href="cuts_8cc_source.html">cuts.cc</a>.</p>

</div>
</div>
<a id="abf54256e1bd003c568c2efd55d75fdd6" name="abf54256e1bd003c568c2efd55d75fdd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf54256e1bd003c568c2efd55d75fdd6">&#9670;&#160;</a></span>TrySingleNodeFlow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::CoverCutHelper::TrySingleNodeFlow </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structoperations__research_1_1sat_1_1CutData.html">CutData</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>input_ct</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classoperations__research_1_1sat_1_1ImpliedBoundsProcessor.html">ImpliedBoundsProcessor</a> *</td>          <td class="paramname"><span class="paramname"><em>ib_processor</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>It turns out that what FlowCoverCutHelper is doing is really just finding a cover and generating a cut via coefficient strenghtening instead of MIR rounding. This more generic version should just always outperform our old code. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo001581">Todo</a></b></dt><dd>(user): Change the heuristic to depends on the lp_value of the implied bounds. This way we can exactly match what happen in the old FlowCoverCutHelper. </dd></dl>
<p>After complementing the term in the cover, we have sum -ci.X + other_terms &lt;= -slack;</p>
<p>We do not support complex terms, but we shouldn't get any.</p>
<p>The algorithm goes as follow:</p><ul>
<li>Compute heuristically a minimal cover.</li>
<li>We have sum_cover ci.Xi &gt;= slack where Xi is distance to upper bound.</li>
<li>Apply coefficient strenghtening if ci &gt; slack.</li>
</ul>
<p>Using implied bound we have two cases (all coeffs positive): 1/ ci.Xi = ci.fi.Bi + ci.Si : always good. 2/ ci.Xi = ci.di.Bi - ci.Si &lt;= di.Bi: good if Si lp_value is zero.</p>
<dl class="section note"><dt>Note</dt><dd>if everything is Boolean, we just get a normal cover and coeff strengthening just result in all coeff at 1, so worse than our cover heuristic.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo001582">Todo</a></b></dt><dd>(user): Shouldn't we just use rounding f() with maximum coeff to allows lift of all other terms? but then except for the heuristic the cut is really similar to the cover cut. </dd></dl>
<p>Lifting.</p>
<p>Compute good period. We don't want to extend it in the simpler case where f(x)=-1 if x &lt; 0.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo001583">Todo</a></b></dt><dd>(user): If the Mir*() function is used, we don't need to extend that much the period. Fix. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo001584">Todo</a></b></dt><dd>(user): do exact binary search to find highest x in [-max_neg_magnitude, 0] such that f(x) == f(-max_neg_magnitude) ? not really needed though since we know that we have this equality: </dd></dl>
<p>Generate the cut.</p>

<p class="definition">Definition at line <a class="el" href="cuts_8cc_source.html#l01408">1408</a> of file <a class="el" href="cuts_8cc_source.html">cuts.cc</a>.</p>

</div>
</div>
<a id="a82f509c2f8c4ea40561f572f6a612ebd" name="a82f509c2f8c4ea40561f572f6a612ebd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82f509c2f8c4ea40561f572f6a612ebd">&#9670;&#160;</a></span>TryWithLetchfordSouliLifting()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::CoverCutHelper::TryWithLetchfordSouliLifting </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structoperations__research_1_1sat_1_1CutData.html">CutData</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>input_ct</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classoperations__research_1_1sat_1_1ImpliedBoundsProcessor.html">ImpliedBoundsProcessor</a> *</td>          <td class="paramname"><span class="paramname"><em>ib_processor</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Applies the lifting procedure described in "On Lifted Cover Inequalities: A
New Lifting Procedure with Unusual Properties", Adam N. Letchford, Georgia Souli. This assumes an input with all coefficients positive.</p>
<p>The algo is pretty simple, given a cover C for a given rhs. We compute a rational weight p/q so that sum_C min(w_i, p/q) = rhs. Note that q is pretty small (lower or equal to the size of C). The generated cut is then of the form sum X_i in C for which w_i &lt;= p / q</p><ul>
<li>sum gamma_i X_i for the other variable &lt;= <code>C</code> - 1.</li>
</ul>
<p>gamma_i being the smallest k such that w_i &lt;= sum of the k + 1 largest min(w_i, p/q) for i in C. In particular, it is zero if w_i &lt;= p/q.</p>
<dl class="section note"><dt>Note</dt><dd>this accept a general constraint that has been canonicalized to sum coeff_i * X_i &lt;= base_rhs. Each coeff_i &gt;= 0 and each X_i &gt;= 0.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo001610">Todo</a></b></dt><dd>(user): Generalize to non-Boolean, or use a different cover heuristic for this:<ul>
<li>We want a Boolean only cover currently.</li>
<li>We can always use implied bound for this, since there is more chance for a Bool only cover.</li>
<li>Also, f() should be super additive on the value &lt;= rhs, i.e. f(a + b) &gt;= f(a) + f(b), so it is always good to use implied bounds of the form X = bound * B + Slack. </li>
</ul>
</dd></dl>
<p>We already called GetCoverSizeForBooleans() and ib_processor was nullptr, so reuse that info.</p>
<p>Perform IB expansion with no restriction, all coeff should still be positive.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo001585">Todo</a></b></dt><dd>(user): Merge Boolean terms that are complement of each other. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo001586">Todo</a></b></dt><dd>(user): we currently only deal with Boolean in the cover. Fix. </dd></dl>
<p>We don't support big rhs here. Note however than since this only deal with Booleans, it is less likely.</p>
<p>Collect the weight in the cover.</p>
<p>Compute the correct threshold so that if we round down larger weights to p/q. We have sum of the weight in cover == base_rhs.</p>
<p>Compute thresholds. For the first q values, thresholds[i] is the smallest integer such that q * threshold[i] &gt; p * (i + 1).</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo001587">Todo</a></b></dt><dd>(user): compute this in an overflow-safe way. </dd></dl>
<p>For the other values, we just add the weights.</p>
<p>Generate the cut.</p>
<p>Our algo is quadratic in worst case, but large coefficients should be rare, and in practice we don't really see this.</p>
<dl class="section note"><dt>Note</dt><dd>this work for non-Boolean since we can just "theorically" split them as a sum of Booleans :) Probably a cleaner proof exist by just using the super-additivity of the lifting function on [0, rhs].</dd></dl>
<p>Find the largest index &lt;= coeff.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo001588">Todo</a></b></dt><dd>(user): For exact multiple of p/q we can increase the coeff by 1/2. See section in the paper on getting maximal super additive function. </dd></dl>

<p class="definition">Definition at line <a class="el" href="cuts_8cc_source.html#l01512">1512</a> of file <a class="el" href="cuts_8cc_source.html">cuts.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>ortools/sat/<a class="el" href="cuts_8h_source.html">cuts.h</a></li>
<li>ortools/sat/<a class="el" href="cuts_8cc_source.html">cuts.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceoperations__research.html">operations_research</a></li><li class="navelem"><a class="el" href="namespaceoperations__research_1_1sat.html">sat</a></li><li class="navelem"><a class="el" href="classoperations__research_1_1sat_1_1CoverCutHelper.html">CoverCutHelper</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
