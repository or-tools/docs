<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google OR-Tools: operations_research::ConstrainedShortestPathsOnDagWrapper&lt; GraphType &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="orLogo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Google OR-Tools<span id="projectnumber">&#160;v9.10</span>
   </div>
   <div id="projectbrief">a fast and portable software suite for combinatorial optimization</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classoperations__research_1_1ConstrainedShortestPathsOnDagWrapper.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classoperations__research_1_1ConstrainedShortestPathsOnDagWrapper-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">operations_research::ConstrainedShortestPathsOnDagWrapper&lt; GraphType &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="dag__constrained__shortest__path_8h_source.html">dag_constrained_shortest_path.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a4c3574f4eb87db2634eb12880b81cd09" id="r_a4c3574f4eb87db2634eb12880b81cd09"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c3574f4eb87db2634eb12880b81cd09">NodeIndex</a> = typename GraphType::NodeIndex</td></tr>
<tr class="separator:a4c3574f4eb87db2634eb12880b81cd09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae942c62eb01d8b3748d46f1901f497cd" id="r_ae942c62eb01d8b3748d46f1901f497cd"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae942c62eb01d8b3748d46f1901f497cd">ArcIndex</a> = typename GraphType::ArcIndex</td></tr>
<tr class="separator:ae942c62eb01d8b3748d46f1901f497cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a738b8f448b4b9e497fd58fee1a76b279" id="r_a738b8f448b4b9e497fd58fee1a76b279"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a738b8f448b4b9e497fd58fee1a76b279">ConstrainedShortestPathsOnDagWrapper</a> (const GraphType *<a class="el" href="dag__shortest__path_8cc.html#ae4666512ca9ca3bba65f08f8ae8a1ba0">graph</a>, const std::vector&lt; double &gt; *<a class="el" href="dag__shortest__path_8cc.html#aa9ad2ed96a191f4b22ec8622c4929b26">arc_lengths</a>, const std::vector&lt; std::vector&lt; double &gt; &gt; *arc_resources, absl::Span&lt; const <a class="el" href="#a4c3574f4eb87db2634eb12880b81cd09">NodeIndex</a> &gt; <a class="el" href="dag__shortest__path_8cc.html#a532598a2f9b95a1e714053bb66f4b78e">topological_order</a>, absl::Span&lt; const <a class="el" href="#a4c3574f4eb87db2634eb12880b81cd09">NodeIndex</a> &gt; sources, absl::Span&lt; const <a class="el" href="#a4c3574f4eb87db2634eb12880b81cd09">NodeIndex</a> &gt; destinations, const std::vector&lt; double &gt; *max_resources, int max_num_created_labels=1e9)</td></tr>
<tr class="separator:a738b8f448b4b9e497fd58fee1a76b279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99484695ce9be38a707ce339c47060c5" id="r_a99484695ce9be38a707ce339c47060c5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structoperations__research_1_1PathWithLength.html">PathWithLength</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a99484695ce9be38a707ce339c47060c5">RunConstrainedShortestPathOnDag</a> ()</td></tr>
<tr class="separator:a99484695ce9be38a707ce339c47060c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf9b759b381e70e9e67699a2c99e2ea3" id="r_abf9b759b381e70e9e67699a2c99e2ea3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abf9b759b381e70e9e67699a2c99e2ea3">label_count</a> () const</td></tr>
<tr class="separator:abf9b759b381e70e9e67699a2c99e2ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;class GraphType&gt;<br />
class operations_research::ConstrainedShortestPathsOnDagWrapper&lt; GraphType &gt;</div><p>Advanced API. A wrapper that holds the memory needed to run many constrained shortest path computations efficiently on the given DAG (on which resources do not change). <code>GraphType</code> can use one of the interfaces defined in <code>util/graph/graph.h</code>. </p>

<p class="definition">Definition at line <a class="el" href="dag__constrained__shortest__path_8h_source.html#l00095">95</a> of file <a class="el" href="dag__constrained__shortest__path_8h_source.html">dag_constrained_shortest_path.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ae942c62eb01d8b3748d46f1901f497cd" name="ae942c62eb01d8b3748d46f1901f497cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae942c62eb01d8b3748d46f1901f497cd">&#9670;&#160;</a></span>ArcIndex</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class GraphType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classoperations__research_1_1ConstrainedShortestPathsOnDagWrapper.html">operations_research::ConstrainedShortestPathsOnDagWrapper</a>&lt; GraphType &gt;::ArcIndex = typename GraphType::ArcIndex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dag__constrained__shortest__path_8h_source.html#l00098">98</a> of file <a class="el" href="dag__constrained__shortest__path_8h_source.html">dag_constrained_shortest_path.h</a>.</p>

</div>
</div>
<a id="a4c3574f4eb87db2634eb12880b81cd09" name="a4c3574f4eb87db2634eb12880b81cd09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c3574f4eb87db2634eb12880b81cd09">&#9670;&#160;</a></span>NodeIndex</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class GraphType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classoperations__research_1_1ConstrainedShortestPathsOnDagWrapper.html">operations_research::ConstrainedShortestPathsOnDagWrapper</a>&lt; GraphType &gt;::NodeIndex = typename GraphType::NodeIndex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dag__constrained__shortest__path_8h_source.html#l00097">97</a> of file <a class="el" href="dag__constrained__shortest__path_8h_source.html">dag_constrained_shortest_path.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a738b8f448b4b9e497fd58fee1a76b279" name="a738b8f448b4b9e497fd58fee1a76b279"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a738b8f448b4b9e497fd58fee1a76b279">&#9670;&#160;</a></span>ConstrainedShortestPathsOnDagWrapper()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class GraphType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classoperations__research_1_1ConstrainedShortestPathsOnDagWrapper.html">operations_research::ConstrainedShortestPathsOnDagWrapper</a>&lt; GraphType &gt;::ConstrainedShortestPathsOnDagWrapper </td>
          <td>(</td>
          <td class="paramtype">const GraphType *</td>          <td class="paramname"><span class="paramname"><em>graph</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; double &gt; *</td>          <td class="paramname"><span class="paramname"><em>arc_lengths</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::vector&lt; double &gt; &gt; *</td>          <td class="paramname"><span class="paramname"><em>arc_resources</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">absl::Span&lt; const <a class="el" href="#a4c3574f4eb87db2634eb12880b81cd09">NodeIndex</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>topological_order</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">absl::Span&lt; const <a class="el" href="#a4c3574f4eb87db2634eb12880b81cd09">NodeIndex</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>sources</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">absl::Span&lt; const <a class="el" href="#a4c3574f4eb87db2634eb12880b81cd09">NodeIndex</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>destinations</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; double &gt; *</td>          <td class="paramname"><span class="paramname"><em>max_resources</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>max_num_created_labels</em></span><span class="paramdefsep"> = </span><span class="paramdefval">1e9</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IMPORTANT: All arguments must outlive the class.</p>
<p>The vectors of <code>arc_lengths</code> and <code>arc_resources[i]</code> (for all resource i) <em>must</em> be of size <code>graph.num_arcs()</code> and indexed the same way as in <code>graph</code>. The vector <code>arc_resources</code> and <code>max_resources</code> <em>must</em> be of same size.</p>
<p>You <em>must</em> provide a topological order. You can use <code>util::graph::FastTopologicalSort(graph)</code> to compute one if you don't already have one. An invalid topological order results in an upper bound for all shortest path computations. For maximum performance, you can further reindex the nodes under the topological order so that the memory access pattern is generally forward instead of random. For example, if the topological order for a graph with 4 nodes is [2,1,0,3], you can re-label the nodes 2, 1, and 0 to 0, 1, and 2 (and updates arcs accordingly).</p>
<p>Validity of arcs and topological order are DCHECKed.</p>
<p>If the number of labels in memory exceeds <code>max_num_created_labels / 2</code> at any point in each pass of the algorithm, new labels are not generated anymore and it returns the best path found so far, most particularly the empty path if none were found.</p>
<p>IMPORTANT: You cannot modify anything except <code>arc_lengths</code> between calls to the <code><a class="el" href="#a99484695ce9be38a707ce339c47060c5">RunConstrainedShortestPathOnDag()</a></code> function.</p>
<p>Implementation. </p>
<p>Full graphs.</p>
<p>Forward.</p>
<p>Backward.</p>
<p>Get the minimum resources sources -&gt; node and node -&gt; destination for each node.</p>
<p>Get reachable subgraph.</p>
<p>We split the number of labels evenly between each search (+1 for the additional source node).</p>
<p>Split sub-graphs and related information. The split is based on the number of paths. This is used as a simple proxy for the number of labels.</p>
<p>We use double to avoid overflow. Note that this is an heuristic, so we don't care too much if we are not precise enough.</p>
<p>IMPORTANT: The sub-graph has an additional node linked to sources (resp. destinations) for the forward (resp. backward) direction. This additional node is indexed with the last index. All added arcs are given to have an arc index in the original graph of -1.</p>
<p>Memory allocation is done here and only once in order to avoid reallocation at each call of <code><a class="el" href="#a99484695ce9be38a707ce339c47060c5">RunConstrainedShortestPathOnDag()</a></code> for better performance.</p>

<p class="definition">Definition at line <a class="el" href="dag__constrained__shortest__path_8h_source.html#l00280">280</a> of file <a class="el" href="dag__constrained__shortest__path_8h_source.html">dag_constrained_shortest_path.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abf9b759b381e70e9e67699a2c99e2ea3" name="abf9b759b381e70e9e67699a2c99e2ea3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf9b759b381e70e9e67699a2c99e2ea3">&#9670;&#160;</a></span>label_count()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class GraphType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classoperations__research_1_1ConstrainedShortestPathsOnDagWrapper.html">operations_research::ConstrainedShortestPathsOnDagWrapper</a>&lt; GraphType &gt;::label_count </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For benchmarking and informational purposes, returns the number of labels generated in the call of <code><a class="el" href="#a99484695ce9be38a707ce339c47060c5">RunConstrainedShortestPathOnDag()</a></code>. </p>

<p class="definition">Definition at line <a class="el" href="dag__constrained__shortest__path_8h_source.html#l00141">141</a> of file <a class="el" href="dag__constrained__shortest__path_8h_source.html">dag_constrained_shortest_path.h</a>.</p>

</div>
</div>
<a id="a99484695ce9be38a707ce339c47060c5" name="a99484695ce9be38a707ce339c47060c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99484695ce9be38a707ce339c47060c5">&#9670;&#160;</a></span>RunConstrainedShortestPathOnDag()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class GraphType &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structoperations__research_1_1PathWithLength.html">PathWithLength</a> <a class="el" href="classoperations__research_1_1ConstrainedShortestPathsOnDagWrapper.html">operations_research::ConstrainedShortestPathsOnDagWrapper</a>&lt; GraphType &gt;::RunConstrainedShortestPathOnDag </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns {+inf, {}, {}} if there is no constrained path of finite length wihtin resources constraints from one node in <code>sources</code> to one node in <code>destinations</code>. </p>
<p>Assign lengths on sub-relevant graphs.</p>
<p>Check destinations within relevant half sub-graphs.</p>
<p>Clear all labels from the next run.</p>

<p class="definition">Definition at line <a class="el" href="dag__constrained__shortest__path_8h_source.html#l00537">537</a> of file <a class="el" href="dag__constrained__shortest__path_8h_source.html">dag_constrained_shortest_path.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>ortools/graph/<a class="el" href="dag__constrained__shortest__path_8h_source.html">dag_constrained_shortest_path.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceoperations__research.html">operations_research</a></li><li class="navelem"><a class="el" href="classoperations__research_1_1ConstrainedShortestPathsOnDagWrapper.html">ConstrainedShortestPathsOnDagWrapper</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
