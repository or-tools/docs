<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google OR-Tools: operations_research::math_opt::IncrementalSolver Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="orLogo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Google OR-Tools<span id="projectnumber">&#160;v9.5</span>
   </div>
   <div id="projectbrief">a fast and portable software suite for combinatorial optimization</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classoperations__research_1_1math__opt_1_1IncrementalSolver.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classoperations__research_1_1math__opt_1_1IncrementalSolver-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">operations_research::math_opt::IncrementalSolver Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="solve_8h_source.html">solve.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac52987b35a0c31f13e8b9216418efa45"><td class="memItemLeft" align="right" valign="top">absl::StatusOr&lt; <a class="el" href="structoperations__research_1_1math__opt_1_1SolveResult.html">SolveResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#ac52987b35a0c31f13e8b9216418efa45">Solve</a> (const <a class="el" href="structoperations__research_1_1math__opt_1_1SolveArguments.html">SolveArguments</a> &amp;arguments={})</td></tr>
<tr class="separator:ac52987b35a0c31f13e8b9216418efa45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c55e81345e38342756f961bc4a0bc57"><td class="memItemLeft" align="right" valign="top">absl::StatusOr&lt; <a class="el" href="structoperations__research_1_1math__opt_1_1UpdateResult.html">UpdateResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#a2c55e81345e38342756f961bc4a0bc57">Update</a> ()</td></tr>
<tr class="separator:a2c55e81345e38342756f961bc4a0bc57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ea1026cbaa608905097bfa7346c4d9f"><td class="memItemLeft" align="right" valign="top">absl::StatusOr&lt; <a class="el" href="structoperations__research_1_1math__opt_1_1SolveResult.html">SolveResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#a9ea1026cbaa608905097bfa7346c4d9f">SolveWithoutUpdate</a> (const <a class="el" href="structoperations__research_1_1math__opt_1_1SolveArguments.html">SolveArguments</a> &amp;arguments={}) const</td></tr>
<tr class="separator:a9ea1026cbaa608905097bfa7346c4d9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a969c472daa70e92e7c69151830d47be0"><td class="memItemLeft" align="right" valign="top">static absl::StatusOr&lt; std::unique_ptr&lt; <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html">IncrementalSolver</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#a969c472daa70e92e7c69151830d47be0">New</a> (<a class="el" href="classoperations__research_1_1math__opt_1_1Model.html">Model</a> *<a class="el" href="gurobi__interface_8cc.html#a0728f23c9a47655d38e0bf1a2f200bcf">model</a>, <a class="el" href="namespaceoperations__research_1_1math__opt.html#a1a4e2d8708a16ad2817a18f55a516e7d">SolverType</a> solver_type, <a class="el" href="structoperations__research_1_1math__opt_1_1SolverInitArguments.html">SolverInitArguments</a> arguments={})</td></tr>
<tr class="separator:a969c472daa70e92e7c69151830d47be0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Incremental solve of a model.</p>
<p>This is a feature for advance users. Most users should only use the <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#ac52987b35a0c31f13e8b9216418efa45">Solve()</a> function above.</p>
<p>Here incremental means that the we try to reuse the existing underlying solver internals between each solve. There is no guarantee though that the solver supports all possible model changes. Hence there is not guarantee that performances will be improved when using this class; this is solver dependent. Typically LPs have more to gain from incremental solve than MIPs. In both cases, even if the solver supports the model changes, incremental solve may actually be slower.</p>
<p>The <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#a969c472daa70e92e7c69151830d47be0">New()</a> function instantiates the solver, setup it from the current state of the <a class="el" href="classoperations__research_1_1math__opt_1_1Model.html">Model</a> and register on it to listen to changes. Calling <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#ac52987b35a0c31f13e8b9216418efa45">Solve()</a> will update the underlying solver with latest model changes and solve this model.</p>
<p>Usage: <a class="el" href="classoperations__research_1_1math__opt_1_1Model.html">Model</a> model = ...; <a class="el" href="base_2status__macros_8h.html#a600de4b8f65fe0a4b1898041634f9011">ASSIGN_OR_RETURN(
    const std::unique_ptr&lt;IncrementalSolver&gt; incremental_solve,
    IncrementalSolver::New(&amp;model, SolverType::kXxx))</a>;</p>
<p>ASSIGN_OR_RETURN(const <a class="el" href="structoperations__research_1_1math__opt_1_1SolveResult.html" title="The result of solving an optimization problem with Solve().">SolveResult</a> result1, incremental_solve-&gt;<a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#ac52987b35a0c31f13e8b9216418efa45">Solve()</a>);</p>
<p>model.AddVariable(...); ...</p>
<p>ASSIGN_OR_RETURN(const <a class="el" href="structoperations__research_1_1math__opt_1_1SolveResult.html" title="The result of solving an optimization problem with Solve().">SolveResult</a> result2, incremental_solve-&gt;<a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#ac52987b35a0c31f13e8b9216418efa45">Solve()</a>);</p>
<p>...</p>
<p>Lifecycle: The <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html">IncrementalSolver</a> is only keeping a std::weak_ref on <a class="el" href="classoperations__research_1_1math__opt_1_1Model.html">Model</a>'s internal data and thus it returns an error if <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#a2c55e81345e38342756f961bc4a0bc57">Update()</a> or <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#ac52987b35a0c31f13e8b9216418efa45">Solve()</a> are called after the <a class="el" href="classoperations__research_1_1math__opt_1_1Model.html">Model</a> has been destroyed. It is fine to destroy the <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html">IncrementalSolver</a> after the associated <a class="el" href="classoperations__research_1_1math__opt_1_1Model.html">Model</a> though.</p>
<p>Thread-safety: The <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#a969c472daa70e92e7c69151830d47be0">New()</a>, <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#ac52987b35a0c31f13e8b9216418efa45">Solve()</a> and <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#a2c55e81345e38342756f961bc4a0bc57">Update()</a> methods must not be called while modifying the Model() (adding variables...). The user is expected to use proper synchronization primitives to serialize changes to the model and the use of this object. Note though that it is safe to call methods from different <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html">IncrementalSolver</a> instances on the same <a class="el" href="classoperations__research_1_1math__opt_1_1Model.html">Model</a> concurrently. Same for calling <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#a969c472daa70e92e7c69151830d47be0">IncrementalSolver::New()</a>. The destructor is thread-safe and can be called even during a modification of the <a class="el" href="classoperations__research_1_1math__opt_1_1Model.html">Model</a>.</p>
<p>There is no problem calling <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#a9ea1026cbaa608905097bfa7346c4d9f">SolveWithoutUpdate()</a> concurrently on different instances of <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html">IncrementalSolver</a> or while the model is being modified (unless of course the underlying solver itself is not thread-safe and can only be called from a single-thread).</p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#ac52987b35a0c31f13e8b9216418efa45">Solve()</a>, <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#a2c55e81345e38342756f961bc4a0bc57">Update()</a> and <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#a9ea1026cbaa608905097bfa7346c4d9f">SolveWithoutUpdate()</a> are not reentrant so they should not be called concurrently on the same instance of <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html">IncrementalSolver</a>.</dd></dl>
<p>Some solvers may add more restrictions regarding threading. Please see SolverType::kXxx documentation for details. </p>

<p class="definition">Definition at line <a class="el" href="solve_8h_source.html#l00122">122</a> of file <a class="el" href="solve_8h_source.html">solve.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a969c472daa70e92e7c69151830d47be0" name="a969c472daa70e92e7c69151830d47be0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a969c472daa70e92e7c69151830d47be0">&#9670;&#160;</a></span>New()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">absl::StatusOr&lt; std::unique_ptr&lt; <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html">IncrementalSolver</a> &gt; &gt; operations_research::math_opt::IncrementalSolver::New </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classoperations__research_1_1math__opt_1_1Model.html">Model</a> *&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceoperations__research_1_1math__opt.html#a1a4e2d8708a16ad2817a18f55a516e7d">SolverType</a>&#160;</td>
          <td class="paramname"><em>solver_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structoperations__research_1_1math__opt_1_1SolverInitArguments.html">SolverInitArguments</a>&#160;</td>
          <td class="paramname"><em>arguments</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Creates a new incremental solve for the given model. It may returns an error if the parameters are invalid (for example if the selected solver is not linked in the binary).</p>
<p>The returned <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html">IncrementalSolver</a> keeps a copy of <code>arguments</code>. Thus the content of arguments.non_streamable (for example pointers to solver specific struct) must be valid until the destruction of the <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html">IncrementalSolver</a>. It also registers on the <a class="el" href="classoperations__research_1_1math__opt_1_1Model.html">Model</a> to keep track of updates (see class documentation for details). </p>

<p class="definition">Definition at line <a class="el" href="solve_8cc_source.html#l00111">111</a> of file <a class="el" href="solve_8cc_source.html">solve.cc</a>.</p>

</div>
</div>
<a id="ac52987b35a0c31f13e8b9216418efa45" name="ac52987b35a0c31f13e8b9216418efa45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac52987b35a0c31f13e8b9216418efa45">&#9670;&#160;</a></span>Solve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absl::StatusOr&lt; <a class="el" href="structoperations__research_1_1math__opt_1_1SolveResult.html">SolveResult</a> &gt; operations_research::math_opt::IncrementalSolver::Solve </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structoperations__research_1_1math__opt_1_1SolveArguments.html">SolveArguments</a> &amp;&#160;</td>
          <td class="paramname"><em>arguments</em> = <code>{}</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the underlying solver with latest model changes and runs the solve.</p>
<p>A Status error will be returned if inputs are invalid or there is an unexpected failure in an underlying solver or for some internal <a class="el" href="namespaceoperations__research_1_1math__opt.html" title="An object oriented wrapper for quadratic constraints in ModelStorage.">math_opt</a> errors. Otherwise, check SolveResult::termination.reason to see if an optimal solution was found.</p>
<p>Memory model: the returned <a class="el" href="structoperations__research_1_1math__opt_1_1SolveResult.html" title="The result of solving an optimization problem with Solve().">SolveResult</a> owns its own memory (for solutions, solve stats, etc.), EXPECT for a pointer back to the model. As a result:</p><ul>
<li>Keep the model alive to access <a class="el" href="structoperations__research_1_1math__opt_1_1SolveResult.html" title="The result of solving an optimization problem with Solve().">SolveResult</a>,</li>
<li>Avoid unnecessarily copying <a class="el" href="structoperations__research_1_1math__opt_1_1SolveResult.html" title="The result of solving an optimization problem with Solve().">SolveResult</a>,</li>
<li>The result is generally accessible after mutating this, but some care is needed if variables or linear constraints are added or deleted.</li>
</ul>
<p>See <a class="el" href="callback_8h.html">callback.h</a> for documentation on arguments.callback and arguments.callback_registration. </p>

<p class="definition">Definition at line <a class="el" href="solve_8cc_source.html#l00138">138</a> of file <a class="el" href="solve_8cc_source.html">solve.cc</a>.</p>

</div>
</div>
<a id="a9ea1026cbaa608905097bfa7346c4d9f" name="a9ea1026cbaa608905097bfa7346c4d9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ea1026cbaa608905097bfa7346c4d9f">&#9670;&#160;</a></span>SolveWithoutUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absl::StatusOr&lt; <a class="el" href="structoperations__research_1_1math__opt_1_1SolveResult.html">SolveResult</a> &gt; operations_research::math_opt::IncrementalSolver::SolveWithoutUpdate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structoperations__research_1_1math__opt_1_1SolveArguments.html">SolveArguments</a> &amp;&#160;</td>
          <td class="paramname"><em>arguments</em> = <code>{}</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Same as <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#ac52987b35a0c31f13e8b9216418efa45">Solve()</a> but does not update the underlying solver with the latest changes to the model.</p>
<p>This is an advanced API, most users should use <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#ac52987b35a0c31f13e8b9216418efa45">Solve()</a>. </p>

<p class="definition">Definition at line <a class="el" href="solve_8cc_source.html#l00169">169</a> of file <a class="el" href="solve_8cc_source.html">solve.cc</a>.</p>

</div>
</div>
<a id="a2c55e81345e38342756f961bc4a0bc57" name="a2c55e81345e38342756f961bc4a0bc57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c55e81345e38342756f961bc4a0bc57">&#9670;&#160;</a></span>Update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">absl::StatusOr&lt; <a class="el" href="structoperations__research_1_1math__opt_1_1UpdateResult.html">UpdateResult</a> &gt; operations_research::math_opt::IncrementalSolver::Update </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Updates the model to solve.</p>
<p>This is an advanced API, most users should use <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#ac52987b35a0c31f13e8b9216418efa45">Solve()</a> above that does the update and before calling the solver. Calling this function is only useful for users that want to access to update data or users that need to use <a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html#a9ea1026cbaa608905097bfa7346c4d9f">SolveWithoutUpdate()</a> (which should not be common).</p>
<p>The returned value indicates if the update was possible or if the solver had to be recreated from scratch (which may happen when the solver does not support this specific update or any update at all). It also contains the attempted update data.</p>
<p>A status error will be returned if the underlying solver has an internal error. </p>

<p class="definition">Definition at line <a class="el" href="solve_8cc_source.html#l00144">144</a> of file <a class="el" href="solve_8cc_source.html">solve.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>ortools/math_opt/cpp/<a class="el" href="solve_8h_source.html">solve.h</a></li>
<li>ortools/math_opt/cpp/<a class="el" href="solve_8cc_source.html">solve.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceoperations__research.html">operations_research</a></li><li class="navelem"><a class="el" href="namespaceoperations__research_1_1math__opt.html">math_opt</a></li><li class="navelem"><a class="el" href="classoperations__research_1_1math__opt_1_1IncrementalSolver.html">IncrementalSolver</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
