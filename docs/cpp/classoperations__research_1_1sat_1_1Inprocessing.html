<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Google OR-Tools: operations_research::sat::Inprocessing Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="orLogo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Google OR-Tools<span id="projectnumber">&#160;v9.12</span>
   </div>
   <div id="projectbrief">a fast and portable software suite for combinatorial optimization</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classoperations__research_1_1sat_1_1Inprocessing.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classoperations__research_1_1sat_1_1Inprocessing-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">operations_research::sat::Inprocessing Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="sat__inprocessing_8h_source.html">sat_inprocessing.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac65e30e79da6eba342b1c031cebbda74" id="r_ac65e30e79da6eba342b1c031cebbda74"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac65e30e79da6eba342b1c031cebbda74">Inprocessing</a> (<a class="el" href="classoperations__research_1_1sat_1_1Model.html">Model</a> *model)</td></tr>
<tr class="separator:ac65e30e79da6eba342b1c031cebbda74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67d25dadf7669215ab5b27b4d8046e18" id="r_a67d25dadf7669215ab5b27b4d8046e18"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a67d25dadf7669215ab5b27b4d8046e18">PresolveLoop</a> (<a class="el" href="structoperations__research_1_1sat_1_1SatPresolveOptions.html">SatPresolveOptions</a> options)</td></tr>
<tr class="separator:a67d25dadf7669215ab5b27b4d8046e18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0797dfc25a5c609254b61fe67828c11" id="r_aa0797dfc25a5c609254b61fe67828c11"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa0797dfc25a5c609254b61fe67828c11">InprocessingRound</a> ()</td></tr>
<tr class="separator:aa0797dfc25a5c609254b61fe67828c11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6240bf85461b172c268f3a823739ce8" id="r_ae6240bf85461b172c268f3a823739ce8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae6240bf85461b172c268f3a823739ce8">LevelZeroPropagate</a> ()</td></tr>
<tr class="separator:ae6240bf85461b172c268f3a823739ce8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ab413def8a2242915ef31ff717baa17" id="r_a3ab413def8a2242915ef31ff717baa17"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3ab413def8a2242915ef31ff717baa17">DetectEquivalencesAndStamp</a> (bool use_transitive_reduction, bool log_info)</td></tr>
<tr class="separator:a3ab413def8a2242915ef31ff717baa17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e0f39f14f9c6d947181e7185d6ed865" id="r_a5e0f39f14f9c6d947181e7185d6ed865"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5e0f39f14f9c6d947181e7185d6ed865">RemoveFixedAndEquivalentVariables</a> (bool log_info)</td></tr>
<tr class="separator:a5e0f39f14f9c6d947181e7185d6ed865"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b162e8b52f7bede4814fa12c59cb05e" id="r_a4b162e8b52f7bede4814fa12c59cb05e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4b162e8b52f7bede4814fa12c59cb05e">MoreFixedVariableToClean</a> () const</td></tr>
<tr class="separator:a4b162e8b52f7bede4814fa12c59cb05e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63eb5cc01d121fac6c5205d181bb4866" id="r_a63eb5cc01d121fac6c5205d181bb4866"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a63eb5cc01d121fac6c5205d181bb4866">MoreRedundantVariableToClean</a> () const</td></tr>
<tr class="separator:a63eb5cc01d121fac6c5205d181bb4866"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fbf49af4f2bef7419f9eff0fc4847b2" id="r_a2fbf49af4f2bef7419f9eff0fc4847b2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2fbf49af4f2bef7419f9eff0fc4847b2">SubsumeAndStrenghtenRound</a> (bool log_info)</td></tr>
<tr class="separator:a2fbf49af4f2bef7419f9eff0fc4847b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a917ed507e6300fd11ca34029f14ee3d3" id="r_a917ed507e6300fd11ca34029f14ee3d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a917ed507e6300fd11ca34029f14ee3d3">ProvideLogger</a> (<a class="el" href="classoperations__research_1_1SolverLogger.html">SolverLogger</a> *logger)</td></tr>
<tr class="memdesc:a917ed507e6300fd11ca34029f14ee3d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">A bit hacky. Only needed during refactoring.  <br /></td></tr>
<tr class="separator:a917ed507e6300fd11ca34029f14ee3d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>We need to keep some information from one call to the next, so we use a class. Note that as this becomes big, we can probably split it.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002349">Todo</a></b></dt><dd>(user): Some algorithms here use the normal SAT propagation engine. However we might want to temporarily disable activities/phase saving and so on if we want to run them as in-processing steps so that they do not "pollute" the normal SAT search.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002350">Todo</a></b></dt><dd>(user): For the propagation, this depends on the <a class="el" href="classoperations__research_1_1sat_1_1SatSolver.html">SatSolver</a> class, which mean we cannot really use it without some refactoring as an in-processing from the <a class="el" href="classoperations__research_1_1sat_1_1SatSolver.html#a8a32f2b63a24749a0c9f6e34d068f1b0">SatSolver::Solve()</a> function. So we do need a special InprocessingSolve() that lives outside <a class="el" href="classoperations__research_1_1sat_1_1SatSolver.html">SatSolver</a>. Alternatively, we can extract the propagation main loop and conflict analysis from <a class="el" href="classoperations__research_1_1sat_1_1SatSolver.html">SatSolver</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sat__inprocessing_8h_source.html#l00097">97</a> of file <a class="el" href="sat__inprocessing_8h_source.html">sat_inprocessing.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ac65e30e79da6eba342b1c031cebbda74" name="ac65e30e79da6eba342b1c031cebbda74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac65e30e79da6eba342b1c031cebbda74">&#9670;&#160;</a></span>Inprocessing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">operations_research::sat::Inprocessing::Inprocessing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classoperations__research_1_1sat_1_1Model.html">Model</a> *</td>          <td class="paramname"><span class="paramname"><em>model</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel explicit">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sat__inprocessing_8h_source.html#l00099">99</a> of file <a class="el" href="sat__inprocessing_8h_source.html">sat_inprocessing.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3ab413def8a2242915ef31ff717baa17" name="a3ab413def8a2242915ef31ff717baa17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ab413def8a2242915ef31ff717baa17">&#9670;&#160;</a></span>DetectEquivalencesAndStamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::Inprocessing::DetectEquivalencesAndStamp </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>use_transitive_reduction</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>log_info</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Detects equivalences in the implication graph and propagates any failed literal found during the process.</p>
<p>It make sense to do the pre-stamping right after the equivalence detection since it needs a DAG and can detect extra failed literal. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002301">Todo</a></b></dt><dd>(user): consider doing the transitive reduction after each SCC. It might be slow but we could try to make it more incremental to compensate and it should allow further reduction. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sat__inprocessing_8cc_source.html#l00315">315</a> of file <a class="el" href="sat__inprocessing_8cc_source.html">sat_inprocessing.cc</a>.</p>

</div>
</div>
<a id="aa0797dfc25a5c609254b61fe67828c11" name="aa0797dfc25a5c609254b61fe67828c11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0797dfc25a5c609254b61fe67828c11">&#9670;&#160;</a></span>InprocessingRound()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::Inprocessing::InprocessingRound </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When the option use_sat_inprocessing is true, then this is called at each restart. It is up to the heuristics here to decide what inprocessing we do or if we wait for the next call before doing anything. </p>
<p>Mainly useful for development.</p>
<p>Store the dtime of the first call (first restart) and wait for the next restart.</p>
<p>Try to spend a given ratio of time in the inprocessing.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002296">Todo</a></b></dt><dd>(user): Tune the heuristic, in particular, with the current code we start some inprocessing before the first search. </dd></dl>
<p>LP Propagation during inprocessing can be really slow, so we temporarily disable it.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002297">Todo</a></b></dt><dd>(user): The LP and incremental structure will still be called though, which can take some time, try to disable it more cleanly. </dd></dl>
<p>We make sure we do not "pollute" the current saved polarities. We will restore them at the end.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002298">Todo</a></b></dt><dd>(user): We should probably also disable the variable/clauses activity updates. </dd></dl>
<p>Probing.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002299">Todo</a></b></dt><dd>(user): Add a small wrapper function to time this. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002300">Todo</a></b></dt><dd>(user): try to enable these? The problem is that we can only remove variables not used the non-pure SAT part of a model. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sat__inprocessing_8cc_source.html#l00172">172</a> of file <a class="el" href="sat__inprocessing_8cc_source.html">sat_inprocessing.cc</a>.</p>

</div>
</div>
<a id="ae6240bf85461b172c268f3a823739ce8" name="ae6240bf85461b172c268f3a823739ce8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6240bf85461b172c268f3a823739ce8">&#9670;&#160;</a></span>LevelZeroPropagate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::Inprocessing::LevelZeroPropagate </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Simple wrapper that makes sure all the clauses are attached before a propagation is performed. </p>

<p class="definition">Definition at line <a class="el" href="sat__inprocessing_8cc_source.html#l00307">307</a> of file <a class="el" href="sat__inprocessing_8cc_source.html">sat_inprocessing.cc</a>.</p>

</div>
</div>
<a id="a4b162e8b52f7bede4814fa12c59cb05e" name="a4b162e8b52f7bede4814fa12c59cb05e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b162e8b52f7bede4814fa12c59cb05e">&#9670;&#160;</a></span>MoreFixedVariableToClean()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::Inprocessing::MoreFixedVariableToClean </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true if there is new fixed variables or new equivalence relations since <a class="el" href="#a5e0f39f14f9c6d947181e7185d6ed865">RemoveFixedAndEquivalentVariables()</a> was last called. </p>

<p class="definition">Definition at line <a class="el" href="sat__inprocessing_8cc_source.html#l00296">296</a> of file <a class="el" href="sat__inprocessing_8cc_source.html">sat_inprocessing.cc</a>.</p>

</div>
</div>
<a id="a63eb5cc01d121fac6c5205d181bb4866" name="a63eb5cc01d121fac6c5205d181bb4866"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63eb5cc01d121fac6c5205d181bb4866">&#9670;&#160;</a></span>MoreRedundantVariableToClean()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::Inprocessing::MoreRedundantVariableToClean </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="sat__inprocessing_8cc_source.html#l00301">301</a> of file <a class="el" href="sat__inprocessing_8cc_source.html">sat_inprocessing.cc</a>.</p>

</div>
</div>
<a id="a67d25dadf7669215ab5b27b4d8046e18" name="a67d25dadf7669215ab5b27b4d8046e18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67d25dadf7669215ab5b27b4d8046e18">&#9670;&#160;</a></span>PresolveLoop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::Inprocessing::PresolveLoop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structoperations__research_1_1sat_1_1SatPresolveOptions.html">SatPresolveOptions</a></td>          <td class="paramname"><span class="paramname"><em>options</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Does some simplifications until a fix point is reached or the given deterministic time is passed. </p>
<p>Mainly useful for development.</p>
<p>We currently do the transformations in a given order and restart each time we did something to make sure that the earlier step cannot strengthen more. This might not be the best, but it is really good during development phase to make sure each individual functions is as incremental and as fast as possible.</p>
<p>This one is fast since only newly fixed variables are considered.</p>
<p>This also prepare the stamping below so that we do that on a DAG and do not consider potential new implications added by <a class="el" href="#a5e0f39f14f9c6d947181e7185d6ed865">RemoveFixedAndEquivalentVariables()</a>.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002292">Todo</a></b></dt><dd>(user): This should/could be integrated with the stamping since it seems better to do just one loop instead of two over all clauses. Because of memory access. it isn't that clear though. </dd></dl>
<p>IMPORTANT: Since we only run this on pure sat problem, we can just get rid of equivalent variable right away and do not need to keep them in the implication_graph_ for propagation.</p>
<p>This is needed for the correctness of the bounded variable elimination.</p>
<p>We wait for the fix-point to be reached before doing the other simplifications below.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002293">Todo</a></b></dt><dd>(user): Combine the two? this way we don't create a full literal &lt;-&gt; clause graph twice. It might make sense to reach the BCE fix point which is unique before each variable elimination. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002294">Todo</a></b></dt><dd>(user): this break some binary graph invariant. Fix! </dd></dl>
<p>Probing.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002295">Todo</a></b></dt><dd>(user): Maintain the total number of literals in the watched clauses. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sat__inprocessing_8cc_source.html#l00067">67</a> of file <a class="el" href="sat__inprocessing_8cc_source.html">sat_inprocessing.cc</a>.</p>

</div>
</div>
<a id="a917ed507e6300fd11ca34029f14ee3d3" name="a917ed507e6300fd11ca34029f14ee3d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a917ed507e6300fd11ca34029f14ee3d3">&#9670;&#160;</a></span>ProvideLogger()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void operations_research::sat::Inprocessing::ProvideLogger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classoperations__research_1_1SolverLogger.html">SolverLogger</a> *</td>          <td class="paramname"><span class="paramname"><em>logger</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A bit hacky. Only needed during refactoring. </p>

<p class="definition">Definition at line <a class="el" href="sat__inprocessing_8h_source.html#l00150">150</a> of file <a class="el" href="sat__inprocessing_8h_source.html">sat_inprocessing.h</a>.</p>

</div>
</div>
<a id="a5e0f39f14f9c6d947181e7185d6ed865" name="a5e0f39f14f9c6d947181e7185d6ed865"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e0f39f14f9c6d947181e7185d6ed865">&#9670;&#160;</a></span>RemoveFixedAndEquivalentVariables()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::Inprocessing::RemoveFixedAndEquivalentVariables </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>log_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes fixed variables and exploit equivalence relations to cleanup the clauses. Returns false if UNSAT. </p>
<p>Preconditions.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002302">Todo</a></b></dt><dd>(user): The level zero is required because we remove fixed variables but if we split this into two functions, we could rewrite clause at any level. </dd></dl>
<p>Test if some work is needed.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002303">Todo</a></b></dt><dd>(user): If only new fixed variables are there, we can use a faster function. We should also merge the code with the deletion code in sat_solver_.cc, but that require some refactoring of the dependence between files. </dd></dl>
<p>Start the round.</p>
<p>We need this temporary vector for the DRAT proof settings, otherwise we could just have done an in-place transformation.</p>
<p>Used to mark clause literals.</p>
<p>We first do a loop to see if there is anything to do.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002304">Todo</a></b></dt><dd>(user): we should output literal to the proof right away, currently if we remove clauses before fixing literal the proof is wrong. </dd></dl>
<p>Rewrite the clause.</p>
<p>Restore marked.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002305">Todo</a></b></dt><dd>(user): find a way to auto-tune that after a run on borg... </dd></dl>

<p class="definition">Definition at line <a class="el" href="sat__inprocessing_8cc_source.html#l00337">337</a> of file <a class="el" href="sat__inprocessing_8cc_source.html">sat_inprocessing.cc</a>.</p>

</div>
</div>
<a id="a2fbf49af4f2bef7419f9eff0fc4847b2" name="a2fbf49af4f2bef7419f9eff0fc4847b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fbf49af4f2bef7419f9eff0fc4847b2">&#9670;&#160;</a></span>SubsumeAndStrenghtenRound()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool operations_research::sat::Inprocessing::SubsumeAndStrenghtenRound </td>
          <td>(</td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>log_info</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Processes all clauses and see if there is any subsumption/strenghtening reductions that can be performed. Returns false if UNSAT.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002306">Todo</a></b></dt><dd>(user): Use better work limits, see SAT09.CRAFTED.ramseycube.Q3inK12</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002307">Todo</a></b></dt><dd>(user): Be more incremental, each time a clause is added/reduced track which literal are impacted? Also try to do orthogonal reductions from one round to the next. </dd></dl>
<p>We need this temporary vector for the DRAT proof settings, otherwise we could just have done an in-place transformation.</p>
<p>This function needs the watcher to be detached as we might remove some of the watched literals.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002308">Todo</a></b></dt><dd>(user): We could do that only if we do some reduction, but this is quite fast though. </dd></dl>
<p>Process clause by increasing sizes. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo002309">Todo</a></b></dt><dd>(user): probably faster without the size indirection. </dd></dl>
<p>Used to mark clause literals.</p>
<p>Clause index in clauses. </p><dl class="todo"><dt><b><a class="el" href="todo.html#_todo002310">Todo</a></b></dt><dd>(user): Storing signatures here might be faster? </dd></dl>
<p>Clause signatures in the same order as clauses.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002311">Todo</a></b></dt><dd>(user): Better abort limit. We could also limit the watcher sizes and never look at really long clauses. Note that for an easier incrementality, it is better to reach some kind of completion so we know what new stuff need to be done. </dd></dl>
<p>Check for subsumption, note that this currently ignore all clauses in the binary implication graphs. Stamping is doing some of that (and some also happen during probing), but we could consider only direct implications here and be a bit more exhaustive than what stamping do with them (at least for node with many incoming and outgoing implications).</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002312">Todo</a></b></dt><dd>(user): Do some reduction using binary clauses. Note that only clause that never propagated since last round need to be checked for binary subsumption. </dd></dl>
<p>Compute hash and mark literals.</p>
<p>Look for clause that subsumes this one. Note that because we inspect all one watcher lists for the literals of this clause, if a clause is included inside this one, it must appear in one of these lists.</p>
<p>For strengthenning we also need to check the negative watcher lists.</p>
<p>Any literal here can be removed, but afterwards the other might not. For now we just remove the first one.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002313">Todo</a></b></dt><dd>(user): remove first and see if other still removable. Alternatively use a "removed" marker and redo a check for each clause that simplifies this one? Or just remove the first one, and wait for next round. </dd></dl>
<p>Recompute signature.</p>
<p>Register one literal to watch. Any literal works, but we choose the smallest list.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002314">Todo</a></b></dt><dd>(user): No need to add this clause if we know it cannot subsume any new clause since last round. i.e. unchanged clause that do not contains any literals of newly added clause do not need to be added here. We can track two bitset in LiteralWatchers via a register mechanism:<ul>
<li>literal of newly watched clauses since last clear.</li>
<li>literal of reduced clauses since last clear.</li>
</ul>
</dd></dl>
<p>Important: we can only use this clause to subsume/strenghten others if it cannot be deleted later.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002315">Todo</a></b></dt><dd>(user): We could/should sort the literal in this clause by using literals that appear in a small number of clauses first so that we maximize the chance of early abort in the critical loops above.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002316">Todo</a></b></dt><dd>(user): We could also move the watched literal first so we always skip it. </dd></dl>
<p>We might have fixed variables, finish the propagation.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo002317">Todo</a></b></dt><dd>(user): tune the deterministic time. </dd></dl>

<p class="definition">Definition at line <a class="el" href="sat__inprocessing_8cc_source.html#l00446">446</a> of file <a class="el" href="sat__inprocessing_8cc_source.html">sat_inprocessing.cc</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>ortools/sat/<a class="el" href="sat__inprocessing_8h_source.html">sat_inprocessing.h</a></li>
<li>ortools/sat/<a class="el" href="sat__inprocessing_8cc_source.html">sat_inprocessing.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceoperations__research.html">operations_research</a></li><li class="navelem"><a class="el" href="namespaceoperations__research_1_1sat.html">sat</a></li><li class="navelem"><a class="el" href="classoperations__research_1_1sat_1_1Inprocessing.html">Inprocessing</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
