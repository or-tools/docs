<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 12.1.0"/>
    <title>ortools.sat.python.cp_model API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../python.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;ortools.sat.python</a>

            <img src="https://developers.google.com/optimization/images/orLogo.png" class="logo" alt="project logo"/>




        <h2>API Documentation</h2>
            <ul class="memberlist">
            <li>
                    <a class="function" href="#DisplayBounds">DisplayBounds</a>
            </li>
            <li>
                    <a class="function" href="#ShortName">ShortName</a>
            </li>
            <li>
                    <a class="function" href="#ShortExprName">ShortExprName</a>
            </li>
            <li>
                    <a class="class" href="#LinearExpr">LinearExpr</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LinearExpr.__init__">LinearExpr</a>
                        </li>
                        <li>
                                <a class="function" href="#LinearExpr.Sum">Sum</a>
                        </li>
                        <li>
                                <a class="function" href="#LinearExpr.WeightedSum">WeightedSum</a>
                        </li>
                        <li>
                                <a class="function" href="#LinearExpr.Term">Term</a>
                        </li>
                        <li>
                                <a class="function" href="#LinearExpr.IsEmptyOrAllNull">IsEmptyOrAllNull</a>
                        </li>
                        <li>
                                <a class="function" href="#LinearExpr.RebuildFromLinearExpressionProto">RebuildFromLinearExpressionProto</a>
                        </li>
                        <li>
                                <a class="function" href="#LinearExpr.GetIntegerVarValueMap">GetIntegerVarValueMap</a>
                        </li>
                        <li>
                                <a class="function" href="#LinearExpr.GetFloatVarValueMap">GetFloatVarValueMap</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#IntVar">IntVar</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#IntVar.__init__">IntVar</a>
                        </li>
                        <li>
                                <a class="function" href="#IntVar.Index">Index</a>
                        </li>
                        <li>
                                <a class="function" href="#IntVar.Proto">Proto</a>
                        </li>
                        <li>
                                <a class="function" href="#IntVar.IsEqualTo">IsEqualTo</a>
                        </li>
                        <li>
                                <a class="function" href="#IntVar.Name">Name</a>
                        </li>
                        <li>
                                <a class="function" href="#IntVar.Not">Not</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#BoundedLinearExpression">BoundedLinearExpression</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#BoundedLinearExpression.__init__">BoundedLinearExpression</a>
                        </li>
                        <li>
                                <a class="function" href="#BoundedLinearExpression.Expression">Expression</a>
                        </li>
                        <li>
                                <a class="function" href="#BoundedLinearExpression.Bounds">Bounds</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Constraint">Constraint</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Constraint.__init__">Constraint</a>
                        </li>
                        <li>
                                <a class="function" href="#Constraint.OnlyEnforceIf">OnlyEnforceIf</a>
                        </li>
                        <li>
                                <a class="function" href="#Constraint.WithName">WithName</a>
                        </li>
                        <li>
                                <a class="function" href="#Constraint.Name">Name</a>
                        </li>
                        <li>
                                <a class="function" href="#Constraint.Index">Index</a>
                        </li>
                        <li>
                                <a class="function" href="#Constraint.Proto">Proto</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#IntervalVar">IntervalVar</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#IntervalVar.__init__">IntervalVar</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalVar.Index">Index</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalVar.Proto">Proto</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalVar.Name">Name</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalVar.StartExpr">StartExpr</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalVar.SizeExpr">SizeExpr</a>
                        </li>
                        <li>
                                <a class="function" href="#IntervalVar.EndExpr">EndExpr</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#ObjectIsATrueLiteral">ObjectIsATrueLiteral</a>
            </li>
            <li>
                    <a class="function" href="#ObjectIsAFalseLiteral">ObjectIsAFalseLiteral</a>
            </li>
            <li>
                    <a class="class" href="#CpModel">CpModel</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CpModel.__init__">CpModel</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.Name">Name</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.SetName">SetName</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.NewIntVar">NewIntVar</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.NewIntVarFromDomain">NewIntVarFromDomain</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.NewBoolVar">NewBoolVar</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.NewConstant">NewConstant</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddLinearConstraint">AddLinearConstraint</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddLinearExpressionInDomain">AddLinearExpressionInDomain</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.Add">Add</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddAllDifferent">AddAllDifferent</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddElement">AddElement</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddCircuit">AddCircuit</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddMultipleCircuit">AddMultipleCircuit</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddAllowedAssignments">AddAllowedAssignments</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddForbiddenAssignments">AddForbiddenAssignments</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddAutomaton">AddAutomaton</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddInverse">AddInverse</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddReservoirConstraint">AddReservoirConstraint</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddReservoirConstraintWithActive">AddReservoirConstraintWithActive</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddMapDomain">AddMapDomain</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddImplication">AddImplication</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddBoolOr">AddBoolOr</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddAtLeastOne">AddAtLeastOne</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddAtMostOne">AddAtMostOne</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddExactlyOne">AddExactlyOne</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddBoolAnd">AddBoolAnd</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddBoolXOr">AddBoolXOr</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddMinEquality">AddMinEquality</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddMaxEquality">AddMaxEquality</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddDivisionEquality">AddDivisionEquality</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddAbsEquality">AddAbsEquality</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddModuloEquality">AddModuloEquality</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddMultiplicationEquality">AddMultiplicationEquality</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.NewIntervalVar">NewIntervalVar</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.NewFixedSizeIntervalVar">NewFixedSizeIntervalVar</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.NewOptionalIntervalVar">NewOptionalIntervalVar</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.NewOptionalFixedSizeIntervalVar">NewOptionalFixedSizeIntervalVar</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddNoOverlap">AddNoOverlap</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddNoOverlap2D">AddNoOverlap2D</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddCumulative">AddCumulative</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.CopyFrom">CopyFrom</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.GetBoolVarFromProtoIndex">GetBoolVarFromProtoIndex</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.GetIntVarFromProtoIndex">GetIntVarFromProtoIndex</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.GetIntervalVarFromProtoIndex">GetIntervalVarFromProtoIndex</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.Proto">Proto</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.Negated">Negated</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.GetOrMakeIndex">GetOrMakeIndex</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.GetOrMakeBooleanIndex">GetOrMakeBooleanIndex</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.GetIntervalIndex">GetIntervalIndex</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.GetOrMakeIndexFromConstant">GetOrMakeIndexFromConstant</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.VarIndexToVarProto">VarIndexToVarProto</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.ParseLinearExpression">ParseLinearExpression</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.Minimize">Minimize</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.Maximize">Maximize</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.HasObjective">HasObjective</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.ClearObjective">ClearObjective</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddDecisionStrategy">AddDecisionStrategy</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.ModelStats">ModelStats</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.Validate">Validate</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.ExportToFile">ExportToFile</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AssertIsBooleanVariable">AssertIsBooleanVariable</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddHint">AddHint</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.ClearHints">ClearHints</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddAssumption">AddAssumption</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.AddAssumptions">AddAssumptions</a>
                        </li>
                        <li>
                                <a class="function" href="#CpModel.ClearAssumptions">ClearAssumptions</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#ExpandGeneratorOrTuple">ExpandGeneratorOrTuple</a>
            </li>
            <li>
                    <a class="function" href="#EvaluateLinearExpr">EvaluateLinearExpr</a>
            </li>
            <li>
                    <a class="function" href="#EvaluateBooleanExpression">EvaluateBooleanExpression</a>
            </li>
            <li>
                    <a class="class" href="#CpSolver">CpSolver</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CpSolver.__init__">CpSolver</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.Solve">Solve</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.SolveWithSolutionCallback">SolveWithSolutionCallback</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.SearchForAllSolutions">SearchForAllSolutions</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.StopSearch">StopSearch</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.Value">Value</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.BooleanValue">BooleanValue</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.ObjectiveValue">ObjectiveValue</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.BestObjectiveBound">BestObjectiveBound</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.StatusName">StatusName</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.NumBooleans">NumBooleans</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.NumConflicts">NumConflicts</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.NumBranches">NumBranches</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.WallTime">WallTime</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.UserTime">UserTime</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.ResponseStats">ResponseStats</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.ResponseProto">ResponseProto</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.SufficientAssumptionsForInfeasibility">SufficientAssumptionsForInfeasibility</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolver.SolutionInfo">SolutionInfo</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#CpSolverSolutionCallback">CpSolverSolutionCallback</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CpSolverSolutionCallback.__init__">CpSolverSolutionCallback</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolverSolutionCallback.OnSolutionCallback">OnSolutionCallback</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolverSolutionCallback.BooleanValue">BooleanValue</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolverSolutionCallback.Value">Value</a>
                        </li>
                        <li>
                                <a class="function" href="#CpSolverSolutionCallback.Response">Response</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ObjectiveSolutionPrinter">ObjectiveSolutionPrinter</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ObjectiveSolutionPrinter.__init__">ObjectiveSolutionPrinter</a>
                        </li>
                        <li>
                                <a class="function" href="#ObjectiveSolutionPrinter.on_solution_callback">on_solution_callback</a>
                        </li>
                        <li>
                                <a class="function" href="#ObjectiveSolutionPrinter.solution_count">solution_count</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#VarArrayAndObjectiveSolutionPrinter">VarArrayAndObjectiveSolutionPrinter</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#VarArrayAndObjectiveSolutionPrinter.__init__">VarArrayAndObjectiveSolutionPrinter</a>
                        </li>
                        <li>
                                <a class="function" href="#VarArrayAndObjectiveSolutionPrinter.on_solution_callback">on_solution_callback</a>
                        </li>
                        <li>
                                <a class="function" href="#VarArrayAndObjectiveSolutionPrinter.solution_count">solution_count</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#VarArraySolutionPrinter">VarArraySolutionPrinter</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#VarArraySolutionPrinter.__init__">VarArraySolutionPrinter</a>
                        </li>
                        <li>
                                <a class="function" href="#VarArraySolutionPrinter.on_solution_callback">on_solution_callback</a>
                        </li>
                        <li>
                                <a class="function" href="#VarArraySolutionPrinter.solution_count">solution_count</a>
                        </li>
                </ul>

            </li>
    </ul>


            <footer>OR-Tools 9.4</footer>

        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../../ortools.html">ortools</a><wbr>.<a href="./../../sat.html">sat</a><wbr>.<a href="./../python.html">python</a><wbr>.cp_model    </h1>

                        <div class="docstring"><p>Methods for building and solving CP-SAT models.</p>

<p>The following two sections describe the main
methods for building and solving CP-SAT models.</p>

<ul>
<li><a href="#cp_model.CpModel"><code>CpModel</code></a>: Methods for creating
models, including variables and constraints.</li>
<li><a href="#cp_model.CpSolver"><code>CPSolver</code></a>: Methods for solving
a model and evaluating solutions.</li>
</ul>

<p>The following methods implement callbacks that the
solver calls each time it finds a new solution.</p>

<ul>
<li><a href="#cp_model.CpSolverSolutionCallback"><code>CpSolverSolutionCallback</code></a>:
A general method for implementing callbacks.</li>
<li><a href="#cp_model.ObjectiveSolutionPrinter"><code>ObjectiveSolutionPrinter</code></a>:
Print objective values and elapsed time for intermediate solutions.</li>
<li><a href="#cp_model.VarArraySolutionPrinter"><code>VarArraySolutionPrinter</code></a>:
Print intermediate solutions (variable values, time).</li>
<li>[<code><a href="#VarArrayAndObjectiveSolutionPrinter">VarArrayAndObjectiveSolutionPrinter</a></code>]
  (#cp_model.VarArrayAndObjectiveSolutionPrinter):
Print both intermediate solutions and objective values.</li>
</ul>

<p>Additional methods for solving CP-SAT models:</p>

<ul>
<li><a href="#cp_model.Constraint"><code>Constraint</code></a>: A few utility methods for modifying
constraints created by <code><a href="#CpModel">CpModel</a></code>.</li>
<li><a href="#lineacp_model.LinearExpr"><code>LinearExpr</code></a>: Methods for creating constraints
and the objective from large arrays of coefficients.</li>
</ul>

<p>Other methods and functions listed are primarily used for developing OR-Tools,
rather than for solving specific optimization problems.</p>
</div>

                        <input id="cp_model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="cp_model-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="c1"># Copyright 2010-2022 Google LLC</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="c1"># you may not use this file except in compliance with the License.</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="c1"># You may obtain a copy of the License at</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="c1">#</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="c1">#     http://www.apache.org/licenses/LICENSE-2.0</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="c1">#</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="c1"># See the License for the specific language governing permissions and</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="c1"># limitations under the License.</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a><span class="sd">&quot;&quot;&quot;Methods for building and solving CP-SAT models.</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="sd">The following two sections describe the main</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="sd">methods for building and solving CP-SAT models.</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a><span class="sd">* [`CpModel`](#cp_model.CpModel): Methods for creating</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="sd">models, including variables and constraints.</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a><span class="sd">* [`CPSolver`](#cp_model.CpSolver): Methods for solving</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a><span class="sd">a model and evaluating solutions.</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="sd">The following methods implement callbacks that the</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a><span class="sd">solver calls each time it finds a new solution.</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a><span class="sd">* [`CpSolverSolutionCallback`](#cp_model.CpSolverSolutionCallback):</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a><span class="sd">  A general method for implementing callbacks.</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a><span class="sd">* [`ObjectiveSolutionPrinter`](#cp_model.ObjectiveSolutionPrinter):</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a><span class="sd">  Print objective values and elapsed time for intermediate solutions.</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a><span class="sd">* [`VarArraySolutionPrinter`](#cp_model.VarArraySolutionPrinter):</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a><span class="sd">  Print intermediate solutions (variable values, time).</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a><span class="sd">* [`VarArrayAndObjectiveSolutionPrinter`]</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a><span class="sd">      (#cp_model.VarArrayAndObjectiveSolutionPrinter):</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a><span class="sd">  Print both intermediate solutions and objective values.</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a><span class="sd">Additional methods for solving CP-SAT models:</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a><span class="sd">* [`Constraint`](#cp_model.Constraint): A few utility methods for modifying</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a><span class="sd">  constraints created by `CpModel`.</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a><span class="sd">* [`LinearExpr`](#lineacp_model.LinearExpr): Methods for creating constraints</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a><span class="sd">  and the objective from large arrays of coefficients.</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a><span class="sd">Other methods and functions listed are primarily used for developing OR-Tools,</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a><span class="sd">rather than for solving specific optimization problems.</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a><span class="kn">import</span> <span class="nn">collections</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a><span class="kn">import</span> <span class="nn">threading</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a><span class="kn">import</span> <span class="nn">time</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a><span class="kn">import</span> <span class="nn">warnings</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a><span class="kn">from</span> <span class="nn">ortools.sat</span> <span class="kn">import</span> <span class="n">cp_model_pb2</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a><span class="kn">from</span> <span class="nn">ortools.sat</span> <span class="kn">import</span> <span class="n">sat_parameters_pb2</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a><span class="kn">from</span> <span class="nn">ortools.sat.python</span> <span class="kn">import</span> <span class="n">cp_model_helper</span> <span class="k">as</span> <span class="n">cmh</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a><span class="kn">from</span> <span class="nn">ortools.sat.python</span> <span class="kn">import</span> <span class="n">swig_helper</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a><span class="kn">from</span> <span class="nn">ortools.util.python</span> <span class="kn">import</span> <span class="n">sorted_interval_list</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a><span class="n">Domain</span> <span class="o">=</span> <span class="n">sorted_interval_list</span><span class="o">.</span><span class="n">Domain</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a><span class="c1"># The classes below allow linear expressions to be expressed naturally with the</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a><span class="c1"># usual arithmetic operators + - * / and with constant numbers, which makes the</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a><span class="c1"># python API very intuitive. See../ samples/*.py for examples.</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a><span class="n">INT_MIN</span> <span class="o">=</span> <span class="o">-</span><span class="mi">9223372036854775808</span>  <span class="c1"># hardcoded to be platform independent.</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a><span class="n">INT_MAX</span> <span class="o">=</span> <span class="mi">9223372036854775807</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a><span class="n">INT32_MAX</span> <span class="o">=</span> <span class="mi">2147483647</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a><span class="n">INT32_MIN</span> <span class="o">=</span> <span class="o">-</span><span class="mi">2147483648</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a><span class="c1"># CpSolver status (exported to avoid importing cp_model_cp2).</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a><span class="n">UNKNOWN</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">UNKNOWN</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a><span class="n">MODEL_INVALID</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">MODEL_INVALID</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a><span class="n">FEASIBLE</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">FEASIBLE</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a><span class="n">INFEASIBLE</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">INFEASIBLE</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a><span class="n">OPTIMAL</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">OPTIMAL</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a><span class="c1"># Variable selection strategy</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a><span class="n">CHOOSE_FIRST</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">DecisionStrategyProto</span><span class="o">.</span><span class="n">CHOOSE_FIRST</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a><span class="n">CHOOSE_LOWEST_MIN</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">DecisionStrategyProto</span><span class="o">.</span><span class="n">CHOOSE_LOWEST_MIN</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a><span class="n">CHOOSE_HIGHEST_MAX</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">DecisionStrategyProto</span><span class="o">.</span><span class="n">CHOOSE_HIGHEST_MAX</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a><span class="n">CHOOSE_MIN_DOMAIN_SIZE</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a>    <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">DecisionStrategyProto</span><span class="o">.</span><span class="n">CHOOSE_MIN_DOMAIN_SIZE</span><span class="p">)</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a><span class="n">CHOOSE_MAX_DOMAIN_SIZE</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a>    <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">DecisionStrategyProto</span><span class="o">.</span><span class="n">CHOOSE_MAX_DOMAIN_SIZE</span><span class="p">)</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a><span class="c1"># Domain reduction strategy</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a><span class="n">SELECT_MIN_VALUE</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">DecisionStrategyProto</span><span class="o">.</span><span class="n">SELECT_MIN_VALUE</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a><span class="n">SELECT_MAX_VALUE</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">DecisionStrategyProto</span><span class="o">.</span><span class="n">SELECT_MAX_VALUE</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a><span class="n">SELECT_LOWER_HALF</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">DecisionStrategyProto</span><span class="o">.</span><span class="n">SELECT_LOWER_HALF</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a><span class="n">SELECT_UPPER_HALF</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">DecisionStrategyProto</span><span class="o">.</span><span class="n">SELECT_UPPER_HALF</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a><span class="c1"># Search branching</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a><span class="n">AUTOMATIC_SEARCH</span> <span class="o">=</span> <span class="n">sat_parameters_pb2</span><span class="o">.</span><span class="n">SatParameters</span><span class="o">.</span><span class="n">AUTOMATIC_SEARCH</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a><span class="n">FIXED_SEARCH</span> <span class="o">=</span> <span class="n">sat_parameters_pb2</span><span class="o">.</span><span class="n">SatParameters</span><span class="o">.</span><span class="n">FIXED_SEARCH</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a><span class="n">PORTFOLIO_SEARCH</span> <span class="o">=</span> <span class="n">sat_parameters_pb2</span><span class="o">.</span><span class="n">SatParameters</span><span class="o">.</span><span class="n">PORTFOLIO_SEARCH</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a><span class="n">LP_SEARCH</span> <span class="o">=</span> <span class="n">sat_parameters_pb2</span><span class="o">.</span><span class="n">SatParameters</span><span class="o">.</span><span class="n">LP_SEARCH</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a><span class="k">def</span> <span class="nf">DisplayBounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">):</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>    <span class="sd">&quot;&quot;&quot;Displays a flattened list of intervals.&quot;&quot;&quot;</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a>    <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">bounds</span><span class="p">),</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>            <span class="n">out</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a>        <span class="k">if</span> <span class="n">bounds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">bounds</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a>            <span class="n">out</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>            <span class="n">out</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;..&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a>    <span class="k">return</span> <span class="n">out</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a><span class="k">def</span> <span class="nf">ShortName</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a>    <span class="sd">&quot;&quot;&quot;Returns a short name of an integer variable, or its negation.&quot;&quot;&quot;</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a>    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a>        <span class="k">return</span> <span class="s1">&#39;Not(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">ShortName</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a>    <span class="n">v</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>    <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a>        <span class="k">return</span> <span class="n">v</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a>    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a>        <span class="k">return</span> <span class="s1">&#39;[</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="n">DisplayBounds</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a><span class="k">def</span> <span class="nf">ShortExprName</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a>    <span class="sd">&quot;&quot;&quot;Pretty-print LinearExpressionProto instances.&quot;&quot;&quot;</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">e</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a>        <span class="n">var_name</span> <span class="o">=</span> <span class="n">ShortName</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>        <span class="n">coeff</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">coeffs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>        <span class="k">if</span> <span class="n">coeff</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">var_name</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a>        <span class="k">elif</span> <span class="n">coeff</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;-</span><span class="si">{</span><span class="n">var_name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a>        <span class="k">elif</span> <span class="n">coeff</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">coeff</span><span class="si">}</span><span class="s1"> * </span><span class="si">{</span><span class="n">var_name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a>        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">offset</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s1"> + </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">offset</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a>        <span class="k">elif</span> <span class="n">e</span><span class="o">.</span><span class="n">offset</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="o">-</span><span class="n">e</span><span class="o">.</span><span class="n">offset</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a>    <span class="c1"># TODO(user): Support more than affine expressions.</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a>    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a><span class="k">class</span> <span class="nc">LinearExpr</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a>    <span class="sd">&quot;&quot;&quot;Holds an integer linear expression.</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a><span class="sd">  A linear expression is built from integer constants and variables.</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a><span class="sd">  For example, `x + 2 * (y - z + 1)`.</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a><span class="sd">  Linear expressions are used in CP-SAT models in constraints and in the</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a><span class="sd">  objective:</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a><span class="sd">  * You can define linear constraints as in:</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a><span class="sd">  ```</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a><span class="sd">  model.Add(x + 2 * y &lt;= 5)</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a><span class="sd">  model.Add(sum(array_of_vars) == 5)</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a><span class="sd">  ```</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a><span class="sd">  * In CP-SAT, the objective is a linear expression:</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a><span class="sd">  ```</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a><span class="sd">  model.Minimize(x + 2 * y + z)</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a><span class="sd">  ```</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a><span class="sd">  * For large arrays, using the LinearExpr class is faster that using the python</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a><span class="sd">  `sum()` function. You can create constraints and the objective from lists of</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a><span class="sd">  linear expressions or coefficients as follows:</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a><span class="sd">  ```</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a><span class="sd">  model.Minimize(cp_model.LinearExpr.Sum(expressions))</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a><span class="sd">  model.Add(cp_model.LinearExpr.WeightedSum(expressions, coefficients) &gt;= 0)</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a><span class="sd">  ```</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a>    <span class="nd">@classmethod</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a>    <span class="k">def</span> <span class="nf">Sum</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">expressions</span><span class="p">):</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a>        <span class="sd">&quot;&quot;&quot;Creates the expression sum(expressions).&quot;&quot;&quot;</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>            <span class="k">return</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a>        <span class="k">return</span> <span class="n">_SumArray</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a>    <span class="nd">@classmethod</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a>    <span class="k">def</span> <span class="nf">WeightedSum</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">expressions</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">):</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a>        <span class="sd">&quot;&quot;&quot;Creates the expression sum(expressions[i] * coefficients[i]).&quot;&quot;&quot;</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a>        <span class="k">if</span> <span class="n">LinearExpr</span><span class="o">.</span><span class="n">IsEmptyOrAllNull</span><span class="p">(</span><span class="n">coefficients</span><span class="p">):</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a>            <span class="k">return</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">coefficients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a>            <span class="k">return</span> <span class="n">_WeightedSum</span><span class="p">(</span><span class="n">expressions</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">)</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a>    <span class="nd">@classmethod</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a>    <span class="k">def</span> <span class="nf">Term</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">expression</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">):</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a>        <span class="sd">&quot;&quot;&quot;Creates `expression * coefficient`.&quot;&quot;&quot;</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">coefficient</span><span class="p">):</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a>            <span class="k">return</span> <span class="n">expression</span> <span class="o">*</span> <span class="n">coefficient</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a>    <span class="nd">@classmethod</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a>    <span class="k">def</span> <span class="nf">IsEmptyOrAllNull</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">):</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a>        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">coefficients</span><span class="p">:</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a>    <span class="nd">@classmethod</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a>    <span class="k">def</span> <span class="nf">RebuildFromLinearExpressionProto</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">proto</span><span class="p">):</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a>        <span class="sd">&quot;&quot;&quot;Recreate a LinearExpr from a LinearExpressionProto.&quot;&quot;&quot;</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>        <span class="n">offset</span> <span class="o">=</span> <span class="n">proto</span><span class="o">.</span><span class="n">offset</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>        <span class="n">num_elements</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">proto</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>        <span class="k">if</span> <span class="n">num_elements</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a>            <span class="k">return</span> <span class="n">offset</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>        <span class="k">elif</span> <span class="n">num_elements</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>            <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">proto</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="kc">None</span><span class="p">)</span> <span class="o">*</span> <span class="n">proto</span><span class="o">.</span><span class="n">coeffs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">offset</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>            <span class="n">variables</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>            <span class="n">coeffs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a>            <span class="n">all_ones</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a>            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">coeff</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">proto</span><span class="o">.</span><span class="n">vars</span><span class="p">(),</span> <span class="n">proto</span><span class="o">.</span><span class="n">coeffs</span><span class="p">()):</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>                <span class="n">variables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">IntVar</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>                <span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coeff</span><span class="p">)</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_one</span><span class="p">(</span><span class="n">coeff</span><span class="p">):</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>                    <span class="n">all_ones</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a>            <span class="k">if</span> <span class="n">all_ones</span><span class="p">:</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a>                <span class="k">return</span> <span class="n">_SumArray</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a>                <span class="k">return</span> <span class="n">_WeightedSum</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">coeffs</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a>    <span class="k">def</span> <span class="nf">GetIntegerVarValueMap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a>        <span class="sd">&quot;&quot;&quot;Scans the expression, and returns (var_coef_map, constant).&quot;&quot;&quot;</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a>        <span class="n">coeffs</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>        <span class="n">constant</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>        <span class="n">to_process</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>  <span class="c1"># Flatten to avoid recursion.</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>            <span class="n">expr</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>            <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">):</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a>                    <span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()))</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_Sum</span><span class="p">):</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Left</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Right</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_SumArray</span><span class="p">):</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">():</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_WeightedSum</span><span class="p">):</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>                <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">(),</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficients</span><span class="p">()):</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">c</span><span class="p">))</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a>                <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">+=</span> <span class="n">coeff</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a>                <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()]</span> <span class="o">-=</span> <span class="n">coeff</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Unrecognized linear expression: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a>        <span class="k">return</span> <span class="n">coeffs</span><span class="p">,</span> <span class="n">constant</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a>    <span class="k">def</span> <span class="nf">GetFloatVarValueMap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>        <span class="sd">&quot;&quot;&quot;Scans the expression. Returns (var_coef_map, constant, is_integer).&quot;&quot;&quot;</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>        <span class="n">coeffs</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>        <span class="n">constant</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>        <span class="n">to_process</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>  <span class="c1"># Flatten to avoid recursion.</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>            <span class="n">expr</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>            <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>  <span class="c1"># Keep integrality.</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>            <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_a_number</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">):</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a>                    <span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()))</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_Sum</span><span class="p">):</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Left</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Right</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_SumArray</span><span class="p">):</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">():</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_WeightedSum</span><span class="p">):</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>                <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">(),</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficients</span><span class="p">()):</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">c</span><span class="p">))</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a>                <span class="k">if</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">coeffs</span><span class="p">:</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a>                    <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">+=</span> <span class="n">coeff</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>                    <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">=</span> <span class="n">coeff</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>                <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()</span> <span class="ow">in</span> <span class="n">coeffs</span><span class="p">:</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a>                    <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()]</span> <span class="o">-=</span> <span class="n">coeff</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>                    <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()]</span> <span class="o">=</span> <span class="o">-</span><span class="n">coeff</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Unrecognized linear expression: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a>        <span class="n">is_integer</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">constant</span><span class="p">)</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a>        <span class="k">if</span> <span class="n">is_integer</span><span class="p">:</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a>            <span class="k">for</span> <span class="n">coeff</span> <span class="ow">in</span> <span class="n">coeffs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">coeff</span><span class="p">):</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>                    <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a>                    <span class="k">break</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>        <span class="k">return</span> <span class="n">coeffs</span><span class="p">,</span> <span class="n">constant</span><span class="p">,</span> <span class="n">is_integer</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a>        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a>    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>            <span class="s1">&#39;calling abs() on a linear expression is not supported, &#39;</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>            <span class="s1">&#39;please use CpModel.AddAbsEquality&#39;</span><span class="p">)</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a>        <span class="k">return</span> <span class="n">_Sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a>        <span class="k">return</span> <span class="n">_Sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a>    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>        <span class="k">return</span> <span class="n">_Sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a>    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a>        <span class="k">return</span> <span class="n">_Sum</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a>        <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_a_number</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_one</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>        <span class="k">return</span> <span class="n">_ProductCst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>        <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_a_number</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_one</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>        <span class="k">return</span> <span class="n">_ProductCst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>    <span class="k">def</span> <span class="nf">__div__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>            <span class="s1">&#39;calling / on a linear expression is not supported, &#39;</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>            <span class="s1">&#39;please use CpModel.AddDivisionEquality&#39;</span><span class="p">)</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>            <span class="s1">&#39;calling // on a linear expression is not supported, &#39;</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a>            <span class="s1">&#39;please use CpModel.AddDivisionEquality&#39;</span><span class="p">)</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>    <span class="k">def</span> <span class="fm">__mod__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a>            <span class="s1">&#39;calling </span><span class="si">%%</span><span class="s1"> on a linear expression is not supported, &#39;</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a>            <span class="s1">&#39;please use CpModel.AddModuloEquality&#39;</span><span class="p">)</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a>    <span class="k">def</span> <span class="fm">__pow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a>            <span class="s1">&#39;calling ** on a linear expression is not supported, &#39;</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a>            <span class="s1">&#39;please use CpModel.AddMultiplicationEquality&#39;</span><span class="p">)</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a>    <span class="k">def</span> <span class="fm">__lshift__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>            <span class="s1">&#39;calling left shift on a linear expression is not supported&#39;</span><span class="p">)</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a>    <span class="k">def</span> <span class="fm">__rshift__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a>            <span class="s1">&#39;calling right shift on a linear expression is not supported&#39;</span><span class="p">)</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a>    <span class="k">def</span> <span class="fm">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>            <span class="s1">&#39;calling and on a linear expression is not supported, &#39;</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a>            <span class="s1">&#39;please use CpModel.AddBoolAnd&#39;</span><span class="p">)</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a>    <span class="k">def</span> <span class="fm">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a>            <span class="s1">&#39;calling or on a linear expression is not supported, &#39;</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a>            <span class="s1">&#39;please use CpModel.AddBoolOr&#39;</span><span class="p">)</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a>    <span class="k">def</span> <span class="fm">__xor__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>            <span class="s1">&#39;calling xor on a linear expression is not supported, &#39;</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>            <span class="s1">&#39;please use CpModel.AddBoolXor&#39;</span><span class="p">)</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a>    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a>        <span class="k">return</span> <span class="n">_ProductCst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a>            <span class="s1">&#39;Evaluating a LinearExpr instance as a Boolean is not implemented.&#39;</span><span class="p">)</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a>        <span class="k">if</span> <span class="n">arg</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">arg</span><span class="p">,</span> <span class="n">arg</span><span class="p">])</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">arg</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">arg</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">arg</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="n">arg</span><span class="p">])</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">arg</span><span class="p">,</span> <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a>    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>            <span class="k">if</span> <span class="n">arg</span> <span class="o">==</span> <span class="n">INT_MIN</span><span class="p">:</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>                <span class="k">raise</span> <span class="ne">ArithmeticError</span><span class="p">(</span><span class="s1">&#39;&lt; INT_MIN is not supported&#39;</span><span class="p">)</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="n">arg</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">arg</span><span class="p">,</span> <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a>    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>            <span class="k">if</span> <span class="n">arg</span> <span class="o">==</span> <span class="n">INT_MAX</span><span class="p">:</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>                <span class="k">raise</span> <span class="ne">ArithmeticError</span><span class="p">(</span><span class="s1">&#39;&gt; INT_MAX is not supported&#39;</span><span class="p">)</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">arg</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">arg</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a>        <span class="k">if</span> <span class="n">arg</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a>            <span class="k">if</span> <span class="n">arg</span> <span class="o">==</span> <span class="n">INT_MAX</span><span class="p">:</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a>                <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="n">INT_MAX</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a>            <span class="k">elif</span> <span class="n">arg</span> <span class="o">==</span> <span class="n">INT_MIN</span><span class="p">:</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a>                <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">INT_MIN</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a>                <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a>                    <span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="n">arg</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">arg</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">arg</span><span class="p">,</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a>                                           <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a><span class="k">class</span> <span class="nc">_Sum</span><span class="p">(</span><span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>    <span class="sd">&quot;&quot;&quot;Represents the sum of two LinearExprs.&quot;&quot;&quot;</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a>        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">]:</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_a_number</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Not an linear expression: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__left</span> <span class="o">=</span> <span class="n">left</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__right</span> <span class="o">=</span> <span class="n">right</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a>    <span class="k">def</span> <span class="nf">Left</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__left</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a>    <span class="k">def</span> <span class="nf">Right</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__right</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__left</span><span class="si">}</span><span class="s1"> + </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__right</span><span class="si">}</span><span class="s1">)&#39;</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Sum(</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__left</span><span class="p">)</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__right</span><span class="p">)</span><span class="si">}</span><span class="s1">)&#39;</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a><span class="k">class</span> <span class="nc">_ProductCst</span><span class="p">(</span><span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>    <span class="sd">&quot;&quot;&quot;Represents the product of a LinearExpr by a constant.&quot;&quot;&quot;</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">coeff</span><span class="p">):</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>        <span class="n">coeff</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_a_number</span><span class="p">(</span><span class="n">coeff</span><span class="p">)</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">):</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__expr</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Expression</span><span class="p">()</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__coef</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__expr</span> <span class="o">=</span> <span class="n">expr</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__coef</span> <span class="o">=</span> <span class="n">coeff</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__coef</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>            <span class="k">return</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a>            <span class="k">return</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__coef</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; * &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a>        <span class="k">return</span> <span class="s1">&#39;ProductCst(&#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__coef</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a>    <span class="k">def</span> <span class="nf">Coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__coef</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>    <span class="k">def</span> <span class="nf">Expression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__expr</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a><span class="k">class</span> <span class="nc">_SumArray</span><span class="p">(</span><span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a>    <span class="sd">&quot;&quot;&quot;Represents the sum of a list of LinearExpr and a constant.&quot;&quot;&quot;</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expressions</span><span class="p">,</span> <span class="n">constant</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__expressions</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__constant</span> <span class="o">=</span> <span class="n">constant</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">expressions</span><span class="p">:</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a>            <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_a_number</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a>                <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a>                    <span class="k">continue</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a>                <span class="n">x</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_a_number</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__constant</span> <span class="o">+=</span> <span class="n">x</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__expressions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Not an linear expression: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constant</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a>            <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; + &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__expressions</span><span class="p">)))</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a>            <span class="k">return</span> <span class="s1">&#39;(</span><span class="si">{}</span><span class="s1"> + </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39; + &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__expressions</span><span class="p">)),</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>                                      <span class="bp">self</span><span class="o">.</span><span class="n">__constant</span><span class="p">)</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a>        <span class="k">return</span> <span class="s1">&#39;SumArray(</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a>            <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">repr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__expressions</span><span class="p">)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constant</span><span class="p">)</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a>    <span class="k">def</span> <span class="nf">Expressions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__expressions</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a>    <span class="k">def</span> <span class="nf">Constant</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constant</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a><span class="k">class</span> <span class="nc">_WeightedSum</span><span class="p">(</span><span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>    <span class="sd">&quot;&quot;&quot;Represents sum(ai * xi) + b.&quot;&quot;&quot;</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expressions</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">,</span> <span class="n">constant</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__expressions</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__coefficients</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__constant</span> <span class="o">=</span> <span class="n">constant</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">coefficients</span><span class="p">):</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>                <span class="s1">&#39;In the LinearExpr.WeightedSum method, the expression array and the &#39;</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>                <span class="s1">&#39; coefficient array must have the same length.&#39;</span><span class="p">)</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>        <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expressions</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">):</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>            <span class="n">c</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_a_number</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>            <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a>                <span class="k">continue</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a>            <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_a_number</span><span class="p">(</span><span class="n">e</span><span class="p">):</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>                <span class="n">e</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_a_number</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__constant</span> <span class="o">+=</span> <span class="n">e</span> <span class="o">*</span> <span class="n">c</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__expressions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__coefficients</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Not an linear expression: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>        <span class="n">output</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>        <span class="k">for</span> <span class="n">expr</span><span class="p">,</span> <span class="n">coeff</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expressions</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__coefficients</span><span class="p">):</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span> <span class="ow">and</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_one</span><span class="p">(</span><span class="n">coeff</span><span class="p">):</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>                <span class="n">output</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a>            <span class="k">elif</span> <span class="ow">not</span> <span class="n">output</span> <span class="ow">and</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_minus_one</span><span class="p">(</span><span class="n">coeff</span><span class="p">):</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>                <span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>            <span class="k">elif</span> <span class="ow">not</span> <span class="n">output</span><span class="p">:</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>                <span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> * </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">coeff</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>            <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_one</span><span class="p">(</span><span class="n">coeff</span><span class="p">):</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>                <span class="n">output</span> <span class="o">+=</span> <span class="s1">&#39; + </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>            <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_minus_one</span><span class="p">(</span><span class="n">coeff</span><span class="p">):</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>                <span class="n">output</span> <span class="o">+=</span> <span class="s1">&#39; - </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>            <span class="k">elif</span> <span class="n">coeff</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>                <span class="n">output</span> <span class="o">+=</span> <span class="s1">&#39; + </span><span class="si">{}</span><span class="s1"> * </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">coeff</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>            <span class="k">elif</span> <span class="n">coeff</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>                <span class="n">output</span> <span class="o">+=</span> <span class="s1">&#39; - </span><span class="si">{}</span><span class="s1"> * </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="n">coeff</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constant</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>            <span class="n">output</span> <span class="o">+=</span> <span class="s1">&#39; + </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__constant</span><span class="p">)</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constant</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>            <span class="n">output</span> <span class="o">+=</span> <span class="s1">&#39; - </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">__constant</span><span class="p">)</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>        <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>            <span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>        <span class="k">return</span> <span class="n">output</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a>        <span class="k">return</span> <span class="s1">&#39;WeightedSum([</span><span class="si">{}</span><span class="s1">], [</span><span class="si">{}</span><span class="s1">], </span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a>            <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">repr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__expressions</span><span class="p">)),</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a>            <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">repr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__coefficients</span><span class="p">)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constant</span><span class="p">)</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a>    <span class="k">def</span> <span class="nf">Expressions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__expressions</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a>    <span class="k">def</span> <span class="nf">Coefficients</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__coefficients</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>    <span class="k">def</span> <span class="nf">Constant</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constant</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a><span class="k">class</span> <span class="nc">IntVar</span><span class="p">(</span><span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a>    <span class="sd">&quot;&quot;&quot;An integer variable.</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a><span class="sd">  An IntVar is an object that can take on any integer value within defined</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a><span class="sd">  ranges. Variables appear in constraint like:</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a><span class="sd">      x + y &gt;= 5</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a><span class="sd">      AllDifferent([x, y, z])</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a><span class="sd">  Solving a model is equivalent to finding, for each variable, a single value</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a><span class="sd">  from the set of initial values (called the initial domain), such that the</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a><span class="sd">  model is feasible, or optimal if you provided an objective function.</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>        <span class="sd">&quot;&quot;&quot;See CpModel.NewIntVar below.&quot;&quot;&quot;</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__negation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>        <span class="c1"># Python do not support multiple __init__ methods.</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>        <span class="c1"># This method is only called from the CpModel class.</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>        <span class="c1"># We hack the parameter to support the two cases:</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>        <span class="c1"># case 1:</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>        <span class="c1">#     model is a CpModelProto, domain is a Domain, and name is a string.</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>        <span class="c1"># case 2:</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>        <span class="c1">#     model is a CpModelProto, domain is an index (int), and name is None.</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__var</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">domain</span><span class="p">]</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__var</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">FlattenedIntervals</span><span class="p">())</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a>    <span class="k">def</span> <span class="nf">Index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a>        <span class="sd">&quot;&quot;&quot;Returns the index of the variable in the model.&quot;&quot;&quot;</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__index</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a>    <span class="k">def</span> <span class="nf">Proto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>        <span class="sd">&quot;&quot;&quot;Returns the variable protobuf.&quot;&quot;&quot;</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>    <span class="k">def</span> <span class="nf">IsEqualTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>        <span class="sd">&quot;&quot;&quot;Returns true if self == other in the python sense.&quot;&quot;&quot;</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>                  <span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>                <span class="c1"># Special case for constants.</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>                <span class="k">return</span> <span class="s1">&#39;unnamed_var_</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">__index</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">DisplayBounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span><span class="p">))</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>    <span class="k">def</span> <span class="nf">Name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>    <span class="k">def</span> <span class="nf">Not</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>        <span class="sd">&quot;&quot;&quot;Returns the negation of a Boolean variable.</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a><span class="sd">    This method implements the logical negation of a Boolean variable.</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a><span class="sd">    It is only valid if the variable has a Boolean domain (0 or 1).</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a><span class="sd">    Note that this method is nilpotent: `x.Not().Not() == x`.</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>        <span class="k">for</span> <span class="n">bound</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span><span class="p">:</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>            <span class="k">if</span> <span class="n">bound</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">bound</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>                    <span class="s1">&#39;Cannot call Not on a non boolean variable: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__negation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__negation</span> <span class="o">=</span> <span class="n">_NotBooleanVariable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__negation</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a><span class="k">class</span> <span class="nc">_NotBooleanVariable</span><span class="p">(</span><span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>    <span class="sd">&quot;&quot;&quot;Negation of a boolean variable.&quot;&quot;&quot;</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">boolvar</span><span class="p">):</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__boolvar</span> <span class="o">=</span> <span class="n">boolvar</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>    <span class="k">def</span> <span class="nf">Index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>        <span class="k">return</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">__boolvar</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a>    <span class="k">def</span> <span class="nf">Not</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__boolvar</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a>        <span class="k">return</span> <span class="s1">&#39;not(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__boolvar</span><span class="p">)</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>            <span class="s1">&#39;Evaluating a literal as a Boolean value is not implemented.&#39;</span><span class="p">)</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a><span class="k">class</span> <span class="nc">BoundedLinearExpression</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>    <span class="sd">&quot;&quot;&quot;Represents a linear constraint: `lb &lt;= linear expression &lt;= ub`.</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a><span class="sd">  The only use of this class is to be added to the CpModel through</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a><span class="sd">  `CpModel.Add(expression)`, as in:</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a><span class="sd">      model.Add(x + 2 * y -1 &gt;= z)</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">bounds</span><span class="p">):</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__expr</span> <span class="o">=</span> <span class="n">expr</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">=</span> <span class="n">bounds</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>            <span class="n">lb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>            <span class="n">ub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a>            <span class="k">if</span> <span class="n">lb</span> <span class="o">&gt;</span> <span class="n">INT_MIN</span> <span class="ow">and</span> <span class="n">ub</span> <span class="o">&lt;</span> <span class="n">INT_MAX</span><span class="p">:</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>                <span class="k">if</span> <span class="n">lb</span> <span class="o">==</span> <span class="n">ub</span><span class="p">:</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>                    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; == &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>                    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &lt;= &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &lt;= &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ub</span><span class="p">)</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>            <span class="k">elif</span> <span class="n">lb</span> <span class="o">&gt;</span> <span class="n">INT_MIN</span><span class="p">:</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &gt;= &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>            <span class="k">elif</span> <span class="n">ub</span> <span class="o">&lt;</span> <span class="n">INT_MAX</span><span class="p">:</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &lt;= &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ub</span><span class="p">)</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a>                <span class="k">return</span> <span class="s1">&#39;True (unbounded expr &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a>        <span class="k">elif</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">INT_MIN</span> <span class="ow">and</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a>              <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">and</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>              <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="n">INT_MAX</span><span class="p">):</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; != &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; in [&#39;</span> <span class="o">+</span> <span class="n">DisplayBounds</span><span class="p">(</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>    <span class="k">def</span> <span class="nf">Expression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__expr</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a>    <span class="k">def</span> <span class="nf">Bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>        <span class="n">coeffs_map</span><span class="p">,</span> <span class="n">constant</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="o">.</span><span class="n">GetIntegerVarValueMap</span><span class="p">()</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a>        <span class="n">all_coeffs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">coeffs_map</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>        <span class="n">same_var</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a>        <span class="n">eq_bounds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a>        <span class="n">different_vars</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a>        <span class="n">ne_bounds</span> <span class="o">=</span> <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">]</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">coeffs_map</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">all_coeffs</span> <span class="o">==</span> <span class="n">same_var</span> <span class="ow">and</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a>                <span class="n">constant</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a>            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">==</span> <span class="n">eq_bounds</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">==</span> <span class="n">ne_bounds</span><span class="p">)):</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">==</span> <span class="n">eq_bounds</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">coeffs_map</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">all_coeffs</span> <span class="o">==</span> <span class="n">different_vars</span> <span class="ow">and</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>                <span class="n">constant</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">==</span> <span class="n">eq_bounds</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">==</span> <span class="n">ne_bounds</span><span class="p">)):</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">==</span> <span class="n">ne_bounds</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>            <span class="sa">f</span><span class="s1">&#39;Evaluating a BoundedLinearExpression </span><span class="se">\&#39;</span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="se">\&#39;</span><span class="s1"> as a Boolean value&#39;</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>            <span class="o">+</span> <span class="s1">&#39; is not supported.&#39;</span><span class="p">)</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a><span class="k">class</span> <span class="nc">Constraint</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>    <span class="sd">&quot;&quot;&quot;Base class for constraints.</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a><span class="sd">  Constraints are built by the CpModel through the Add&lt;XXX&gt; methods.</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a><span class="sd">  Once created by the CpModel class, they are automatically added to the model.</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a><span class="sd">  The purpose of this class is to allow specification of enforcement literals</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a><span class="sd">  for this constraint.</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a><span class="sd">      b = model.NewBoolVar(&#39;b&#39;)</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a><span class="sd">      x = model.NewIntVar(0, 10, &#39;x&#39;)</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a><span class="sd">      y = model.NewIntVar(0, 10, &#39;y&#39;)</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a><span class="sd">      model.Add(x + 2 * y == 5).OnlyEnforceIf(b.Not())</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">):</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span> <span class="o">=</span> <span class="n">constraints</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>    <span class="k">def</span> <span class="nf">OnlyEnforceIf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">boolvar</span><span class="p">):</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>        <span class="sd">&quot;&quot;&quot;Adds an enforcement literal to the constraint.</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a><span class="sd">    This method adds one or more literals (that is, a boolean variable or its</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a><span class="sd">    negation) as enforcement literals. The conjunction of all these literals</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a><span class="sd">    determines whether the constraint is active or not. It acts as an</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a><span class="sd">    implication, so if the conjunction is true, it implies that the constraint</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a><span class="sd">    must be enforced. If it is false, then the constraint is ignored.</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a><span class="sd">    BoolOr, BoolAnd, and linear constraints all support enforcement literals.</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a><span class="sd">    Args:</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a><span class="sd">      *boolvar: One or more Boolean literals.</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a><span class="sd">    Returns:</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a><span class="sd">      self.</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>        <span class="k">for</span> <span class="n">lit</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">boolvar</span><span class="p">):</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">lit</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>                    <span class="nb">bool</span><span class="p">(</span><span class="n">lit</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>                <span class="c1"># Always true. Do nothing.</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>                <span class="k">pass</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lit</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>    <span class="k">def</span> <span class="nf">WithName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>        <span class="sd">&quot;&quot;&quot;Sets the name of the constraint.&quot;&quot;&quot;</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>        <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a>    <span class="k">def</span> <span class="nf">Name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a>        <span class="sd">&quot;&quot;&quot;Returns the name of the constraint.&quot;&quot;&quot;</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>    <span class="k">def</span> <span class="nf">Index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a>        <span class="sd">&quot;&quot;&quot;Returns the index of the constraint in the model.&quot;&quot;&quot;</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__index</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>    <span class="k">def</span> <span class="nf">Proto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>        <span class="sd">&quot;&quot;&quot;Returns the constraint protobuf.&quot;&quot;&quot;</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a><span class="k">class</span> <span class="nc">IntervalVar</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>    <span class="sd">&quot;&quot;&quot;Represents an Interval variable.</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a><span class="sd">  An interval variable is both a constraint and a variable. It is defined by</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a><span class="sd">  three integer variables: start, size, and end.</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a><span class="sd">  It is a constraint because, internally, it enforces that start + size == end.</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a><span class="sd">  It is also a variable as it can appear in specific scheduling constraints:</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a><span class="sd">  NoOverlap, NoOverlap2D, Cumulative.</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a><span class="sd">  Optionally, an enforcement literal can be added to this constraint, in which</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a><span class="sd">  case these scheduling constraints will ignore interval variables with</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a><span class="sd">  enforcement literals assigned to false. Conversely, these constraints will</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a><span class="sd">  also set these enforcement literals to false if they cannot fit these</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a><span class="sd">  intervals into the schedule.</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">is_present_index</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span> <span class="o">=</span> <span class="n">model</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>        <span class="c1"># As with the IntVar::__init__ method, we hack the __init__ method to</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>        <span class="c1"># support two use cases:</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>        <span class="c1">#   case 1: called when creating a new interval variable.</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>        <span class="c1">#      {start|size|end} are linear expressions, is_present_index is either</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>        <span class="c1">#      None or the index of a Boolean literal. name is a string</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>        <span class="c1">#   case 2: called when querying an existing interval variable.</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>        <span class="c1">#      start_index is an int, all parameters after are None.</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">is_present_index</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>                <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="n">start</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">start</span><span class="p">]</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>            <span class="k">if</span> <span class="n">is_present_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_present_index</span><span class="p">)</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>            <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>    <span class="k">def</span> <span class="nf">Index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>        <span class="sd">&quot;&quot;&quot;Returns the index of the interval constraint in the model.&quot;&quot;&quot;</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__index</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>    <span class="k">def</span> <span class="nf">Proto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>        <span class="sd">&quot;&quot;&quot;Returns the interval protobuf.&quot;&quot;&quot;</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>        <span class="n">interval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="p">:</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">(start = </span><span class="si">%s</span><span class="s1">, size = </span><span class="si">%s</span><span class="s1">, end = </span><span class="si">%s</span><span class="s1">, is_present = </span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ShortExprName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">),</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>                <span class="n">ShortExprName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">size</span><span class="p">),</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>                <span class="n">ShortExprName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">),</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>                <span class="n">ShortName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a>            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">(start = </span><span class="si">%s</span><span class="s1">, size = </span><span class="si">%s</span><span class="s1">, end = </span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ShortExprName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">),</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>                <span class="n">ShortExprName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">size</span><span class="p">),</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a>                <span class="n">ShortExprName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">))</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>    <span class="k">def</span> <span class="nf">Name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a>    <span class="k">def</span> <span class="nf">StartExpr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a>        <span class="k">return</span> <span class="n">LinearExpr</span><span class="o">.</span><span class="n">RebuildFromLinearExpressionProto</span><span class="p">(</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a>    <span class="k">def</span> <span class="nf">SizeExpr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>        <span class="k">return</span> <span class="n">LinearExpr</span><span class="o">.</span><span class="n">RebuildFromLinearExpressionProto</span><span class="p">(</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>    <span class="k">def</span> <span class="nf">EndExpr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>        <span class="k">return</span> <span class="n">LinearExpr</span><span class="o">.</span><span class="n">RebuildFromLinearExpressionProto</span><span class="p">(</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a><span class="k">def</span> <span class="nf">ObjectIsATrueLiteral</span><span class="p">(</span><span class="n">literal</span><span class="p">):</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a>    <span class="sd">&quot;&quot;&quot;Checks if literal is either True, or a Boolean literals fixed to True.&quot;&quot;&quot;</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a>        <span class="n">proto</span> <span class="o">=</span> <span class="n">literal</span><span class="o">.</span><span class="n">Proto</span><span class="p">()</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>        <span class="k">return</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>                <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a>        <span class="n">proto</span> <span class="o">=</span> <span class="n">literal</span><span class="o">.</span><span class="n">Not</span><span class="p">()</span><span class="o">.</span><span class="n">Proto</span><span class="p">()</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a>        <span class="k">return</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a>                <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a>    <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">literal</span><span class="p">):</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">literal</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>    <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a><span class="k">def</span> <span class="nf">ObjectIsAFalseLiteral</span><span class="p">(</span><span class="n">literal</span><span class="p">):</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>    <span class="sd">&quot;&quot;&quot;Checks if literal is either False, or a Boolean literals fixed to False.&quot;&quot;&quot;</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>        <span class="n">proto</span> <span class="o">=</span> <span class="n">literal</span><span class="o">.</span><span class="n">Proto</span><span class="p">()</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>        <span class="k">return</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>                <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>        <span class="n">proto</span> <span class="o">=</span> <span class="n">literal</span><span class="o">.</span><span class="n">Not</span><span class="p">()</span><span class="o">.</span><span class="n">Proto</span><span class="p">()</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>        <span class="k">return</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>                <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>    <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">literal</span><span class="p">):</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">literal</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>    <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a><span class="k">class</span> <span class="nc">CpModel</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>    <span class="sd">&quot;&quot;&quot;Methods for building a CP model.</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a><span class="sd">  Methods beginning with:</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a><span class="sd">  * ```New``` create integer, boolean, or interval variables.</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a><span class="sd">  * ```Add``` create new constraints and add them to the model.</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpModelProto</span><span class="p">()</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a>    <span class="c1"># Naming.</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a>    <span class="k">def</span> <span class="nf">Name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>        <span class="sd">&quot;&quot;&quot;Returns the name of the model.&quot;&quot;&quot;</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a>    <span class="k">def</span> <span class="nf">SetName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>        <span class="sd">&quot;&quot;&quot;Sets the name of the model.&quot;&quot;&quot;</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a>    <span class="c1"># Integer variable.</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>    <span class="k">def</span> <span class="nf">NewIntVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>        <span class="sd">&quot;&quot;&quot;Create an integer variable with domain [lb, ub].</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a><span class="sd">    The CP-SAT solver is limited to integer variables. If you have fractional</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a><span class="sd">    values, scale them up so that they become integers; if you have strings,</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a><span class="sd">    encode them as integers.</span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a><span class="sd">    Args:</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a><span class="sd">      lb: Lower bound for the variable.</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a><span class="sd">      ub: Upper bound for the variable.</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a><span class="sd">      name: The name of the variable.</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a><span class="sd">    Returns:</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a><span class="sd">      a variable whose domain is [lb, ub].</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">Domain</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>    <span class="k">def</span> <span class="nf">NewIntVarFromDomain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a>        <span class="sd">&quot;&quot;&quot;Create an integer variable from a domain.</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a><span class="sd">    A domain is a set of integers specified by a collection of intervals.</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a><span class="sd">    For example, `model.NewIntVarFromDomain(cp_model.</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a><span class="sd">         Domain.FromIntervals([[1, 2], [4, 6]]), &#39;x&#39;)`</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a><span class="sd">    Args:</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a><span class="sd">      domain: An instance of the Domain class.</span>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a><span class="sd">      name: The name of the variable.</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a><span class="sd">    Returns:</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a><span class="sd">        a variable whose domain is the given domain.</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a>    <span class="k">def</span> <span class="nf">NewBoolVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a>        <span class="sd">&quot;&quot;&quot;Creates a 0-1 variable with the given name.&quot;&quot;&quot;</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">Domain</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a>    <span class="k">def</span> <span class="nf">NewConstant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a>        <span class="sd">&quot;&quot;&quot;Declares a constant integer.&quot;&quot;&quot;</span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndexFromConstant</span><span class="p">(</span><span class="n">value</span><span class="p">),</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>                      <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a>    <span class="c1"># Linear constraints.</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>    <span class="k">def</span> <span class="nf">AddLinearConstraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_expr</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">):</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>        <span class="sd">&quot;&quot;&quot;Adds the constraint: `lb &lt;= linear_expr &lt;= ub`.&quot;&quot;&quot;</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddLinearExpressionInDomain</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">,</span> <span class="n">Domain</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">))</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>    <span class="k">def</span> <span class="nf">AddLinearExpressionInDomain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_expr</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>        <span class="sd">&quot;&quot;&quot;Adds the constraint: `linear_expr` in `domain`.&quot;&quot;&quot;</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">,</span> <span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>            <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>            <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>            <span class="n">coeffs_map</span><span class="p">,</span> <span class="n">constant</span> <span class="o">=</span> <span class="n">linear_expr</span><span class="o">.</span><span class="n">GetIntegerVarValueMap</span><span class="p">()</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a>            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">coeffs_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Wrong argument&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>                <span class="n">c</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>                <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>                <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>                <span class="n">cmh</span><span class="o">.</span><span class="n">capped_subtraction</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">domain</span><span class="o">.</span><span class="n">FlattenedIntervals</span><span class="p">()</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>            <span class="p">])</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>            <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">):</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">domain</span><span class="o">.</span><span class="n">Contains</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">)):</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddBoolOr</span><span class="p">([])</span>  <span class="c1"># Evaluate to false.</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>            <span class="c1"># Nothing to do otherwise.</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a>                <span class="s1">&#39;Not supported: CpModel.AddLinearExpressionInDomain(&#39;</span> <span class="o">+</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a>                <span class="nb">str</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>    <span class="k">def</span> <span class="nf">Add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">):</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>        <span class="sd">&quot;&quot;&quot;Adds a `BoundedLinearExpression` to the model.</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a><span class="sd">    Args:</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a><span class="sd">      ct: A [`BoundedLinearExpression`](#boundedlinearexpression).</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a><span class="sd">    Returns:</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">BoundedLinearExpression</span><span class="p">):</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddLinearExpressionInDomain</span><span class="p">(</span>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>                <span class="n">ct</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">Domain</span><span class="o">.</span><span class="n">FromFlatIntervals</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">Bounds</span><span class="p">()))</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a>        <span class="k">elif</span> <span class="n">ct</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddBoolOr</span><span class="p">([</span><span class="kc">True</span><span class="p">])</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="n">ct</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddBoolOr</span><span class="p">([])</span>  <span class="c1"># Evaluate to false.</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Not supported: CpModel.Add(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>    <span class="c1"># General Integer Constraints.</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>    <span class="k">def</span> <span class="nf">AddAllDifferent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">expressions</span><span class="p">):</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>        <span class="sd">&quot;&quot;&quot;Adds AllDifferent(expressions).</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a><span class="sd">    This constraint forces all expressions to have different values.</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a><span class="sd">    Args:</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a><span class="sd">      *expressions: simple expressions of the form a * var + constant.</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a><span class="sd">    Returns:</span>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>        <span class="n">expanded</span> <span class="o">=</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">all_diff</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">expanded</span><span class="p">])</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>    <span class="k">def</span> <span class="nf">AddElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>        <span class="sd">&quot;&quot;&quot;Adds the element constraint: `variables[index] == target`.&quot;&quot;&quot;</span>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">variables</span><span class="p">:</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;AddElement expects a non-empty variables array&#39;</span><span class="p">)</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">index</span><span class="p">):</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">variables</span><span class="p">)[</span><span class="nb">int</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">])</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>    <span class="k">def</span> <span class="nf">AddCircuit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arcs</span><span class="p">):</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>        <span class="sd">&quot;&quot;&quot;Adds Circuit(arcs).</span>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a><span class="sd">    Adds a circuit constraint from a sparse list of arcs that encode the graph.</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a><span class="sd">    A circuit is a unique Hamiltonian path in a subgraph of the total</span>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a><span class="sd">    graph. In case a node &#39;i&#39; is not in the path, then there must be a</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a><span class="sd">    loop arc &#39;i -&gt; i&#39; associated with a true literal. Otherwise</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a><span class="sd">    this constraint will fail.</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a><span class="sd">    Args:</span>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a><span class="sd">      arcs: a list of arcs. An arc is a tuple (source_node, destination_node,</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a><span class="sd">        literal). The arc is selected in the circuit if the literal is true.</span>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a><span class="sd">        Both source_node and destination_node must be integers between 0 and the</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a><span class="sd">        number of nodes - 1.</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a><span class="sd">    Returns:</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a><span class="sd">    Raises:</span>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a><span class="sd">      ValueError: If the list of arcs is empty.</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">arcs</span><span class="p">:</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;AddCircuit expects a non-empty array of arcs&#39;</span><span class="p">)</span>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a>        <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">:</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a>            <span class="n">tail</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int32</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a>            <span class="n">head</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int32</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a>            <span class="n">lit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">tails</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">heads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>    <span class="k">def</span> <span class="nf">AddMultipleCircuit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arcs</span><span class="p">):</span>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>        <span class="sd">&quot;&quot;&quot;Adds a multiple circuit constraint, aka the &quot;VRP&quot; constraint.</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a><span class="sd">    The direct graph where arc #i (from tails[i] to head[i]) is present iff</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a><span class="sd">    literals[i] is true must satisfy this set of properties:</span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a><span class="sd">    - #incoming arcs == 1 except for node 0.</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a><span class="sd">    - #outgoing arcs == 1 except for node 0.</span>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a><span class="sd">    - for node zero, #incoming arcs == #outgoing arcs.</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a><span class="sd">    - There are no duplicate arcs.</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a><span class="sd">    - Self-arcs are allowed except for node 0.</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a><span class="sd">    - There is no cycle in this graph, except through node 0.</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a><span class="sd">    Args:</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a><span class="sd">      arcs: a list of arcs. An arc is a tuple (source_node, destination_node,</span>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a><span class="sd">        literal). The arc is selected in the circuit if the literal is true.</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a><span class="sd">        Both source_node and destination_node must be integers between 0 and the</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a><span class="sd">        number of nodes - 1.</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a><span class="sd">    Returns:</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a><span class="sd">    Raises:</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a><span class="sd">      ValueError: If the list of arcs is empty.</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">arcs</span><span class="p">:</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>                <span class="s1">&#39;AddMultipleCircuit expects a non-empty array of arcs&#39;</span><span class="p">)</span>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>        <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">:</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>            <span class="n">tail</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int32</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>            <span class="n">head</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int32</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a>            <span class="n">lit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">tails</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">heads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>    <span class="k">def</span> <span class="nf">AddAllowedAssignments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">tuples_list</span><span class="p">):</span>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>        <span class="sd">&quot;&quot;&quot;Adds AllowedAssignments(variables, tuples_list).</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a><span class="sd">    An AllowedAssignments constraint is a constraint on an array of variables,</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a><span class="sd">    which requires that when all variables are assigned values, the resulting</span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a><span class="sd">    array equals one of the  tuples in `tuple_list`.</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a><span class="sd">    Args:</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a><span class="sd">      variables: A list of variables.</span>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a><span class="sd">      tuples_list: A list of admissible tuples. Each tuple must have the same</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a><span class="sd">        length as the variables, and the ith value of a tuple corresponds to the</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a><span class="sd">        ith variable.</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a><span class="sd">    Returns:</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a><span class="sd">    Raises:</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a><span class="sd">      TypeError: If a tuple does not have the same size as the list of</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a><span class="sd">          variables.</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a><span class="sd">      ValueError: If the array of variables is empty.</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">variables</span><span class="p">:</span>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a>                <span class="s1">&#39;AddAllowedAssignments expects a non-empty variables &#39;</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>                <span class="s1">&#39;array&#39;</span><span class="p">)</span>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">])</span>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a>        <span class="n">arity</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a>        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tuples_list</span><span class="p">:</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">!=</span> <span class="n">arity</span><span class="p">:</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Tuple &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; has the wrong arity&#39;</span><span class="p">)</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a>            <span class="n">ar</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a>            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">t</span><span class="p">:</span>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a>                <span class="n">ar</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ar</span><span class="p">)</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a>    <span class="k">def</span> <span class="nf">AddForbiddenAssignments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">tuples_list</span><span class="p">):</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a>        <span class="sd">&quot;&quot;&quot;Adds AddForbiddenAssignments(variables, [tuples_list]).</span>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a><span class="sd">    A ForbiddenAssignments constraint is a constraint on an array of variables</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a><span class="sd">    where the list of impossible combinations is provided in the tuples list.</span>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a><span class="sd">    Args:</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a><span class="sd">      variables: A list of variables.</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a><span class="sd">      tuples_list: A list of forbidden tuples. Each tuple must have the same</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a><span class="sd">        length as the variables, and the *i*th value of a tuple corresponds to</span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a><span class="sd">        the *i*th variable.</span>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a><span class="sd">    Returns:</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a><span class="sd">    Raises:</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a><span class="sd">      TypeError: If a tuple does not have the same size as the list of</span>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a><span class="sd">                 variables.</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a><span class="sd">      ValueError: If the array of variables is empty.</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">variables</span><span class="p">:</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>                <span class="s1">&#39;AddForbiddenAssignments expects a non-empty variables &#39;</span>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a>                <span class="s1">&#39;array&#39;</span><span class="p">)</span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a>        <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddAllowedAssignments</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">tuples_list</span><span class="p">)</span>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">negated</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a>    <span class="k">def</span> <span class="nf">AddAutomaton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transition_variables</span><span class="p">,</span> <span class="n">starting_state</span><span class="p">,</span> <span class="n">final_states</span><span class="p">,</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a>                     <span class="n">transition_triples</span><span class="p">):</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a>        <span class="sd">&quot;&quot;&quot;Adds an automaton constraint.</span>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a><span class="sd">    An automaton constraint takes a list of variables (of size *n*), an initial</span>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a><span class="sd">    state, a set of final states, and a set of transitions. A transition is a</span>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a><span class="sd">    triplet (*tail*, *transition*, *head*), where *tail* and *head* are states,</span>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a><span class="sd">    and *transition* is the label of an arc from *head* to *tail*,</span>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a><span class="sd">    corresponding to the value of one variable in the list of variables.</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a><span class="sd">    This automaton will be unrolled into a flow with *n* + 1 phases. Each phase</span>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a><span class="sd">    contains the possible states of the automaton. The first state contains the</span>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a><span class="sd">    initial state. The last phase contains the final states.</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a><span class="sd">    Between two consecutive phases *i* and *i* + 1, the automaton creates a set</span>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a><span class="sd">    of arcs. For each transition (*tail*, *transition*, *head*), it will add</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a><span class="sd">    an arc from the state *tail* of phase *i* and the state *head* of phase</span>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a><span class="sd">    *i* + 1. This arc is labeled by the value *transition* of the variables</span>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a><span class="sd">    `variables[i]`. That is, this arc can only be selected if `variables[i]`</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a><span class="sd">    is assigned the value *transition*.</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a><span class="sd">    A feasible solution of this constraint is an assignment of variables such</span>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a><span class="sd">    that, starting from the initial state in phase 0, there is a path labeled by</span>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a><span class="sd">    the values of the variables that ends in one of the final states in the</span>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a><span class="sd">    final phase.</span>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a><span class="sd">    Args:</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a><span class="sd">      transition_variables: A non-empty list of variables whose values</span>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a><span class="sd">        correspond to the labels of the arcs traversed by the automaton.</span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a><span class="sd">      starting_state: The initial state of the automaton.</span>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a><span class="sd">      final_states: A non-empty list of admissible final states.</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a><span class="sd">      transition_triples: A list of transitions for the automaton, in the</span>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a><span class="sd">        following format (current_state, variable_value, next_state).</span>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a><span class="sd">    Returns:</span>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a><span class="sd">    Raises:</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a><span class="sd">      ValueError: if `transition_variables`, `final_states`, or</span>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a><span class="sd">        `transition_triples` are empty.</span>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">transition_variables</span><span class="p">:</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a>                <span class="s1">&#39;AddAutomaton expects a non-empty transition_variables &#39;</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a>                <span class="s1">&#39;array&#39;</span><span class="p">)</span>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">final_states</span><span class="p">:</span>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;AddAutomaton expects some final states&#39;</span><span class="p">)</span>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">transition_triples</span><span class="p">:</span>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;AddAutomaton expects some transition triples&#39;</span><span class="p">)</span>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">transition_variables</span><span class="p">])</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a>        <span class="n">starting_state</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">starting_state</span><span class="p">)</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">starting_state</span> <span class="o">=</span> <span class="n">starting_state</span>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a>        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">final_states</span><span class="p">:</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a>            <span class="n">v</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">final_states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a>        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">transition_triples</span><span class="p">:</span>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Tuple &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a>                                <span class="s1">&#39; has the wrong arity (!= 3)&#39;</span><span class="p">)</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a>            <span class="n">tail</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a>            <span class="n">label</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a>            <span class="n">head</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">transition_tail</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">transition_label</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">transition_head</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a>    <span class="k">def</span> <span class="nf">AddInverse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">inverse_variables</span><span class="p">):</span>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a>        <span class="sd">&quot;&quot;&quot;Adds Inverse(variables, inverse_variables).</span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a><span class="sd">    An inverse constraint enforces that if `variables[i]` is assigned a value</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a><span class="sd">    `j`, then `inverse_variables[j]` is assigned a value `i`. And vice versa.</span>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a><span class="sd">    Args:</span>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a><span class="sd">      variables: An array of integer variables.</span>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a><span class="sd">      inverse_variables: An array of integer variables.</span>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a><span class="sd">    Returns:</span>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a><span class="sd">    Raises:</span>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a><span class="sd">      TypeError: if variables and inverse_variables have different lengths, or</span>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a><span class="sd">          if they are empty.</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">variables</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">inverse_variables</span><span class="p">:</span>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a>                <span class="s1">&#39;The Inverse constraint does not accept empty arrays&#39;</span><span class="p">)</span>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">inverse_variables</span><span class="p">):</span>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a>                <span class="s1">&#39;In the inverse constraint, the two array variables and&#39;</span>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a>                <span class="s1">&#39; inverse_variables must have the same length.&#39;</span><span class="p">)</span>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">inverse</span><span class="o">.</span><span class="n">f_direct</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">])</span>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">inverse</span><span class="o">.</span><span class="n">f_inverse</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="L-1360"><a href="#L-1360"><span class="linenos">1360</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">inverse_variables</span><span class="p">])</span>
</span><span id="L-1361"><a href="#L-1361"><span class="linenos">1361</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1362"><a href="#L-1362"><span class="linenos">1362</span></a>
</span><span id="L-1363"><a href="#L-1363"><span class="linenos">1363</span></a>    <span class="k">def</span> <span class="nf">AddReservoirConstraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">,</span> <span class="n">level_changes</span><span class="p">,</span> <span class="n">min_level</span><span class="p">,</span>
</span><span id="L-1364"><a href="#L-1364"><span class="linenos">1364</span></a>                               <span class="n">max_level</span><span class="p">):</span>
</span><span id="L-1365"><a href="#L-1365"><span class="linenos">1365</span></a>        <span class="sd">&quot;&quot;&quot;Adds Reservoir(times, level_changes, min_level, max_level).</span>
</span><span id="L-1366"><a href="#L-1366"><span class="linenos">1366</span></a>
</span><span id="L-1367"><a href="#L-1367"><span class="linenos">1367</span></a><span class="sd">    Maintains a reservoir level within bounds. The water level starts at 0, and</span>
</span><span id="L-1368"><a href="#L-1368"><span class="linenos">1368</span></a><span class="sd">    at any time, it must be between min_level and max_level.</span>
</span><span id="L-1369"><a href="#L-1369"><span class="linenos">1369</span></a>
</span><span id="L-1370"><a href="#L-1370"><span class="linenos">1370</span></a><span class="sd">    If the affine expression `times[i]` is assigned a value t, then the current</span>
</span><span id="L-1371"><a href="#L-1371"><span class="linenos">1371</span></a><span class="sd">    level changes by `level_changes[i]`, which is constant, at time t.</span>
</span><span id="L-1372"><a href="#L-1372"><span class="linenos">1372</span></a>
</span><span id="L-1373"><a href="#L-1373"><span class="linenos">1373</span></a><span class="sd">     Note that min level must be &lt;= 0, and the max level must be &gt;= 0. Please</span>
</span><span id="L-1374"><a href="#L-1374"><span class="linenos">1374</span></a><span class="sd">     use fixed level_changes to simulate initial state.</span>
</span><span id="L-1375"><a href="#L-1375"><span class="linenos">1375</span></a>
</span><span id="L-1376"><a href="#L-1376"><span class="linenos">1376</span></a><span class="sd">     Therefore, at any time:</span>
</span><span id="L-1377"><a href="#L-1377"><span class="linenos">1377</span></a><span class="sd">         sum(level_changes[i] if times[i] &lt;= t) in [min_level, max_level]</span>
</span><span id="L-1378"><a href="#L-1378"><span class="linenos">1378</span></a>
</span><span id="L-1379"><a href="#L-1379"><span class="linenos">1379</span></a><span class="sd">    Args:</span>
</span><span id="L-1380"><a href="#L-1380"><span class="linenos">1380</span></a><span class="sd">      times: A list of affine expressions which specify the time of the filling</span>
</span><span id="L-1381"><a href="#L-1381"><span class="linenos">1381</span></a><span class="sd">        or emptying the reservoir.</span>
</span><span id="L-1382"><a href="#L-1382"><span class="linenos">1382</span></a><span class="sd">      level_changes: A list of integer values that specifies the amount of the</span>
</span><span id="L-1383"><a href="#L-1383"><span class="linenos">1383</span></a><span class="sd">        emptying or filling.</span>
</span><span id="L-1384"><a href="#L-1384"><span class="linenos">1384</span></a><span class="sd">      min_level: At any time, the level of the reservoir must be greater or</span>
</span><span id="L-1385"><a href="#L-1385"><span class="linenos">1385</span></a><span class="sd">        equal than the min level.</span>
</span><span id="L-1386"><a href="#L-1386"><span class="linenos">1386</span></a><span class="sd">      max_level: At any time, the level of the reservoir must be less or equal</span>
</span><span id="L-1387"><a href="#L-1387"><span class="linenos">1387</span></a><span class="sd">        than the max level.</span>
</span><span id="L-1388"><a href="#L-1388"><span class="linenos">1388</span></a>
</span><span id="L-1389"><a href="#L-1389"><span class="linenos">1389</span></a><span class="sd">    Returns:</span>
</span><span id="L-1390"><a href="#L-1390"><span class="linenos">1390</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="L-1391"><a href="#L-1391"><span class="linenos">1391</span></a>
</span><span id="L-1392"><a href="#L-1392"><span class="linenos">1392</span></a><span class="sd">    Raises:</span>
</span><span id="L-1393"><a href="#L-1393"><span class="linenos">1393</span></a><span class="sd">      ValueError: if max_level &lt; min_level.</span>
</span><span id="L-1394"><a href="#L-1394"><span class="linenos">1394</span></a>
</span><span id="L-1395"><a href="#L-1395"><span class="linenos">1395</span></a><span class="sd">      ValueError: if max_level &lt; 0.</span>
</span><span id="L-1396"><a href="#L-1396"><span class="linenos">1396</span></a>
</span><span id="L-1397"><a href="#L-1397"><span class="linenos">1397</span></a><span class="sd">      ValueError: if min_level &gt; 0</span>
</span><span id="L-1398"><a href="#L-1398"><span class="linenos">1398</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1399"><a href="#L-1399"><span class="linenos">1399</span></a>
</span><span id="L-1400"><a href="#L-1400"><span class="linenos">1400</span></a>        <span class="k">if</span> <span class="n">max_level</span> <span class="o">&lt;</span> <span class="n">min_level</span><span class="p">:</span>
</span><span id="L-1401"><a href="#L-1401"><span class="linenos">1401</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1402"><a href="#L-1402"><span class="linenos">1402</span></a>                <span class="s1">&#39;Reservoir constraint must have a max_level &gt;= min_level&#39;</span><span class="p">)</span>
</span><span id="L-1403"><a href="#L-1403"><span class="linenos">1403</span></a>
</span><span id="L-1404"><a href="#L-1404"><span class="linenos">1404</span></a>        <span class="k">if</span> <span class="n">max_level</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1405"><a href="#L-1405"><span class="linenos">1405</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Reservoir constraint must have a max_level &gt;= 0&#39;</span><span class="p">)</span>
</span><span id="L-1406"><a href="#L-1406"><span class="linenos">1406</span></a>
</span><span id="L-1407"><a href="#L-1407"><span class="linenos">1407</span></a>        <span class="k">if</span> <span class="n">min_level</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1408"><a href="#L-1408"><span class="linenos">1408</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Reservoir constraint must have a min_level &lt;= 0&#39;</span><span class="p">)</span>
</span><span id="L-1409"><a href="#L-1409"><span class="linenos">1409</span></a>
</span><span id="L-1410"><a href="#L-1410"><span class="linenos">1410</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1411"><a href="#L-1411"><span class="linenos">1411</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1412"><a href="#L-1412"><span class="linenos">1412</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">time_exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="L-1413"><a href="#L-1413"><span class="linenos">1413</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">times</span><span class="p">])</span>
</span><span id="L-1414"><a href="#L-1414"><span class="linenos">1414</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">level_changes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">level_changes</span><span class="p">)</span>
</span><span id="L-1415"><a href="#L-1415"><span class="linenos">1415</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">min_level</span> <span class="o">=</span> <span class="n">min_level</span>
</span><span id="L-1416"><a href="#L-1416"><span class="linenos">1416</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">max_level</span> <span class="o">=</span> <span class="n">max_level</span>
</span><span id="L-1417"><a href="#L-1417"><span class="linenos">1417</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1418"><a href="#L-1418"><span class="linenos">1418</span></a>
</span><span id="L-1419"><a href="#L-1419"><span class="linenos">1419</span></a>    <span class="k">def</span> <span class="nf">AddReservoirConstraintWithActive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">,</span> <span class="n">level_changes</span><span class="p">,</span> <span class="n">actives</span><span class="p">,</span>
</span><span id="L-1420"><a href="#L-1420"><span class="linenos">1420</span></a>                                         <span class="n">min_level</span><span class="p">,</span> <span class="n">max_level</span><span class="p">):</span>
</span><span id="L-1421"><a href="#L-1421"><span class="linenos">1421</span></a>        <span class="sd">&quot;&quot;&quot;Adds Reservoir(times, level_changes, actives, min_level, max_level).</span>
</span><span id="L-1422"><a href="#L-1422"><span class="linenos">1422</span></a>
</span><span id="L-1423"><a href="#L-1423"><span class="linenos">1423</span></a><span class="sd">    Maintains a reservoir level within bounds. The water level starts at 0, and</span>
</span><span id="L-1424"><a href="#L-1424"><span class="linenos">1424</span></a><span class="sd">    at any time, it must be between min_level and max_level.</span>
</span><span id="L-1425"><a href="#L-1425"><span class="linenos">1425</span></a>
</span><span id="L-1426"><a href="#L-1426"><span class="linenos">1426</span></a><span class="sd">    If the variable `times[i]` is assigned a value t, and `actives[i]` is</span>
</span><span id="L-1427"><a href="#L-1427"><span class="linenos">1427</span></a><span class="sd">    `True`, then the current level changes by `level_changes[i]`, which is</span>
</span><span id="L-1428"><a href="#L-1428"><span class="linenos">1428</span></a><span class="sd">    constant,</span>
</span><span id="L-1429"><a href="#L-1429"><span class="linenos">1429</span></a><span class="sd">    at time t.</span>
</span><span id="L-1430"><a href="#L-1430"><span class="linenos">1430</span></a>
</span><span id="L-1431"><a href="#L-1431"><span class="linenos">1431</span></a><span class="sd">     Note that min level must be &lt;= 0, and the max level must be &gt;= 0. Please</span>
</span><span id="L-1432"><a href="#L-1432"><span class="linenos">1432</span></a><span class="sd">     use fixed level_changes to simulate initial state.</span>
</span><span id="L-1433"><a href="#L-1433"><span class="linenos">1433</span></a>
</span><span id="L-1434"><a href="#L-1434"><span class="linenos">1434</span></a><span class="sd">     Therefore, at any time:</span>
</span><span id="L-1435"><a href="#L-1435"><span class="linenos">1435</span></a><span class="sd">         sum(level_changes[i] * actives[i] if times[i] &lt;= t) in [min_level,</span>
</span><span id="L-1436"><a href="#L-1436"><span class="linenos">1436</span></a><span class="sd">         max_level]</span>
</span><span id="L-1437"><a href="#L-1437"><span class="linenos">1437</span></a>
</span><span id="L-1438"><a href="#L-1438"><span class="linenos">1438</span></a>
</span><span id="L-1439"><a href="#L-1439"><span class="linenos">1439</span></a><span class="sd">    The array of boolean variables &#39;actives&#39;, if defined, indicates which</span>
</span><span id="L-1440"><a href="#L-1440"><span class="linenos">1440</span></a><span class="sd">    actions are actually performed.</span>
</span><span id="L-1441"><a href="#L-1441"><span class="linenos">1441</span></a>
</span><span id="L-1442"><a href="#L-1442"><span class="linenos">1442</span></a><span class="sd">    Args:</span>
</span><span id="L-1443"><a href="#L-1443"><span class="linenos">1443</span></a><span class="sd">      times: A list of affine expressions which specify the time of the filling</span>
</span><span id="L-1444"><a href="#L-1444"><span class="linenos">1444</span></a><span class="sd">        or emptying the reservoir.</span>
</span><span id="L-1445"><a href="#L-1445"><span class="linenos">1445</span></a><span class="sd">      level_changes: A list of integer values that specifies the amount of the</span>
</span><span id="L-1446"><a href="#L-1446"><span class="linenos">1446</span></a><span class="sd">        emptying or filling.</span>
</span><span id="L-1447"><a href="#L-1447"><span class="linenos">1447</span></a><span class="sd">      actives: a list of boolean variables. They indicates if the</span>
</span><span id="L-1448"><a href="#L-1448"><span class="linenos">1448</span></a><span class="sd">        emptying/refilling events actually take place.</span>
</span><span id="L-1449"><a href="#L-1449"><span class="linenos">1449</span></a><span class="sd">      min_level: At any time, the level of the reservoir must be greater or</span>
</span><span id="L-1450"><a href="#L-1450"><span class="linenos">1450</span></a><span class="sd">        equal than the min level.</span>
</span><span id="L-1451"><a href="#L-1451"><span class="linenos">1451</span></a><span class="sd">      max_level: At any time, the level of the reservoir must be less or equal</span>
</span><span id="L-1452"><a href="#L-1452"><span class="linenos">1452</span></a><span class="sd">        than the max level.</span>
</span><span id="L-1453"><a href="#L-1453"><span class="linenos">1453</span></a>
</span><span id="L-1454"><a href="#L-1454"><span class="linenos">1454</span></a><span class="sd">    Returns:</span>
</span><span id="L-1455"><a href="#L-1455"><span class="linenos">1455</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="L-1456"><a href="#L-1456"><span class="linenos">1456</span></a>
</span><span id="L-1457"><a href="#L-1457"><span class="linenos">1457</span></a><span class="sd">    Raises:</span>
</span><span id="L-1458"><a href="#L-1458"><span class="linenos">1458</span></a><span class="sd">      ValueError: if max_level &lt; min_level.</span>
</span><span id="L-1459"><a href="#L-1459"><span class="linenos">1459</span></a>
</span><span id="L-1460"><a href="#L-1460"><span class="linenos">1460</span></a><span class="sd">      ValueError: if max_level &lt; 0.</span>
</span><span id="L-1461"><a href="#L-1461"><span class="linenos">1461</span></a>
</span><span id="L-1462"><a href="#L-1462"><span class="linenos">1462</span></a><span class="sd">      ValueError: if min_level &gt; 0</span>
</span><span id="L-1463"><a href="#L-1463"><span class="linenos">1463</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1464"><a href="#L-1464"><span class="linenos">1464</span></a>
</span><span id="L-1465"><a href="#L-1465"><span class="linenos">1465</span></a>        <span class="k">if</span> <span class="n">max_level</span> <span class="o">&lt;</span> <span class="n">min_level</span><span class="p">:</span>
</span><span id="L-1466"><a href="#L-1466"><span class="linenos">1466</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1467"><a href="#L-1467"><span class="linenos">1467</span></a>                <span class="s1">&#39;Reservoir constraint must have a max_level &gt;= min_level&#39;</span><span class="p">)</span>
</span><span id="L-1468"><a href="#L-1468"><span class="linenos">1468</span></a>
</span><span id="L-1469"><a href="#L-1469"><span class="linenos">1469</span></a>        <span class="k">if</span> <span class="n">max_level</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1470"><a href="#L-1470"><span class="linenos">1470</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Reservoir constraint must have a max_level &gt;= 0&#39;</span><span class="p">)</span>
</span><span id="L-1471"><a href="#L-1471"><span class="linenos">1471</span></a>
</span><span id="L-1472"><a href="#L-1472"><span class="linenos">1472</span></a>        <span class="k">if</span> <span class="n">min_level</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1473"><a href="#L-1473"><span class="linenos">1473</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Reservoir constraint must have a min_level &lt;= 0&#39;</span><span class="p">)</span>
</span><span id="L-1474"><a href="#L-1474"><span class="linenos">1474</span></a>
</span><span id="L-1475"><a href="#L-1475"><span class="linenos">1475</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1476"><a href="#L-1476"><span class="linenos">1476</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1477"><a href="#L-1477"><span class="linenos">1477</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">time_exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="L-1478"><a href="#L-1478"><span class="linenos">1478</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">times</span><span class="p">])</span>
</span><span id="L-1479"><a href="#L-1479"><span class="linenos">1479</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">level_changes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">level_changes</span><span class="p">)</span>
</span><span id="L-1480"><a href="#L-1480"><span class="linenos">1480</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">active_literals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="L-1481"><a href="#L-1481"><span class="linenos">1481</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actives</span><span class="p">])</span>
</span><span id="L-1482"><a href="#L-1482"><span class="linenos">1482</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">min_level</span> <span class="o">=</span> <span class="n">min_level</span>
</span><span id="L-1483"><a href="#L-1483"><span class="linenos">1483</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">max_level</span> <span class="o">=</span> <span class="n">max_level</span>
</span><span id="L-1484"><a href="#L-1484"><span class="linenos">1484</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1485"><a href="#L-1485"><span class="linenos">1485</span></a>
</span><span id="L-1486"><a href="#L-1486"><span class="linenos">1486</span></a>    <span class="k">def</span> <span class="nf">AddMapDomain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">bool_var_array</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-1487"><a href="#L-1487"><span class="linenos">1487</span></a>        <span class="sd">&quot;&quot;&quot;Adds `var == i + offset &lt;=&gt; bool_var_array[i] == true for all i`.&quot;&quot;&quot;</span>
</span><span id="L-1488"><a href="#L-1488"><span class="linenos">1488</span></a>
</span><span id="L-1489"><a href="#L-1489"><span class="linenos">1489</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bool_var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bool_var_array</span><span class="p">):</span>
</span><span id="L-1490"><a href="#L-1490"><span class="linenos">1490</span></a>            <span class="n">b_index</span> <span class="o">=</span> <span class="n">bool_var</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="L-1491"><a href="#L-1491"><span class="linenos">1491</span></a>            <span class="n">var_index</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="L-1492"><a href="#L-1492"><span class="linenos">1492</span></a>            <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="L-1493"><a href="#L-1493"><span class="linenos">1493</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var_index</span><span class="p">)</span>
</span><span id="L-1494"><a href="#L-1494"><span class="linenos">1494</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1495"><a href="#L-1495"><span class="linenos">1495</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">offset</span> <span class="o">+</span> <span class="n">i</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">i</span><span class="p">])</span>
</span><span id="L-1496"><a href="#L-1496"><span class="linenos">1496</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b_index</span><span class="p">)</span>
</span><span id="L-1497"><a href="#L-1497"><span class="linenos">1497</span></a>
</span><span id="L-1498"><a href="#L-1498"><span class="linenos">1498</span></a>            <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="L-1499"><a href="#L-1499"><span class="linenos">1499</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var_index</span><span class="p">)</span>
</span><span id="L-1500"><a href="#L-1500"><span class="linenos">1500</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1501"><a href="#L-1501"><span class="linenos">1501</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">-</span><span class="n">b_index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-1502"><a href="#L-1502"><span class="linenos">1502</span></a>            <span class="k">if</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="n">INT_MIN</span><span class="p">:</span>
</span><span id="L-1503"><a href="#L-1503"><span class="linenos">1503</span></a>                <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="L-1504"><a href="#L-1504"><span class="linenos">1504</span></a>            <span class="k">if</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">INT_MAX</span><span class="p">:</span>
</span><span id="L-1505"><a href="#L-1505"><span class="linenos">1505</span></a>                <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">offset</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="L-1506"><a href="#L-1506"><span class="linenos">1506</span></a>
</span><span id="L-1507"><a href="#L-1507"><span class="linenos">1507</span></a>    <span class="k">def</span> <span class="nf">AddImplication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
</span><span id="L-1508"><a href="#L-1508"><span class="linenos">1508</span></a>        <span class="sd">&quot;&quot;&quot;Adds `a =&gt; b` (`a` implies `b`).&quot;&quot;&quot;</span>
</span><span id="L-1509"><a href="#L-1509"><span class="linenos">1509</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1510"><a href="#L-1510"><span class="linenos">1510</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1511"><a href="#L-1511"><span class="linenos">1511</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">bool_or</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
</span><span id="L-1512"><a href="#L-1512"><span class="linenos">1512</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
</span><span id="L-1513"><a href="#L-1513"><span class="linenos">1513</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1514"><a href="#L-1514"><span class="linenos">1514</span></a>
</span><span id="L-1515"><a href="#L-1515"><span class="linenos">1515</span></a>    <span class="k">def</span> <span class="nf">AddBoolOr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="L-1516"><a href="#L-1516"><span class="linenos">1516</span></a>        <span class="sd">&quot;&quot;&quot;Adds `Or(literals) == true`: Sum(literals) &gt;= 1.&quot;&quot;&quot;</span>
</span><span id="L-1517"><a href="#L-1517"><span class="linenos">1517</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1518"><a href="#L-1518"><span class="linenos">1518</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1519"><a href="#L-1519"><span class="linenos">1519</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">bool_or</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="L-1520"><a href="#L-1520"><span class="linenos">1520</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="L-1521"><a href="#L-1521"><span class="linenos">1521</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="L-1522"><a href="#L-1522"><span class="linenos">1522</span></a>        <span class="p">])</span>
</span><span id="L-1523"><a href="#L-1523"><span class="linenos">1523</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1524"><a href="#L-1524"><span class="linenos">1524</span></a>
</span><span id="L-1525"><a href="#L-1525"><span class="linenos">1525</span></a>    <span class="k">def</span> <span class="nf">AddAtLeastOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="L-1526"><a href="#L-1526"><span class="linenos">1526</span></a>        <span class="sd">&quot;&quot;&quot;Same as `AddBoolOr`: `Sum(literals) &gt;= 1`.&quot;&quot;&quot;</span>
</span><span id="L-1527"><a href="#L-1527"><span class="linenos">1527</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddBoolOr</span><span class="p">(</span><span class="o">*</span><span class="n">literals</span><span class="p">)</span>
</span><span id="L-1528"><a href="#L-1528"><span class="linenos">1528</span></a>
</span><span id="L-1529"><a href="#L-1529"><span class="linenos">1529</span></a>    <span class="k">def</span> <span class="nf">AddAtMostOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="L-1530"><a href="#L-1530"><span class="linenos">1530</span></a>        <span class="sd">&quot;&quot;&quot;Adds `AtMostOne(literals)`: `Sum(literals) &lt;= 1`.&quot;&quot;&quot;</span>
</span><span id="L-1531"><a href="#L-1531"><span class="linenos">1531</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1532"><a href="#L-1532"><span class="linenos">1532</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1533"><a href="#L-1533"><span class="linenos">1533</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">at_most_one</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="L-1534"><a href="#L-1534"><span class="linenos">1534</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="L-1535"><a href="#L-1535"><span class="linenos">1535</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="L-1536"><a href="#L-1536"><span class="linenos">1536</span></a>        <span class="p">])</span>
</span><span id="L-1537"><a href="#L-1537"><span class="linenos">1537</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1538"><a href="#L-1538"><span class="linenos">1538</span></a>
</span><span id="L-1539"><a href="#L-1539"><span class="linenos">1539</span></a>    <span class="k">def</span> <span class="nf">AddExactlyOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="L-1540"><a href="#L-1540"><span class="linenos">1540</span></a>        <span class="sd">&quot;&quot;&quot;Adds `ExactlyOne(literals)`: `Sum(literals) == 1`.&quot;&quot;&quot;</span>
</span><span id="L-1541"><a href="#L-1541"><span class="linenos">1541</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1542"><a href="#L-1542"><span class="linenos">1542</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1543"><a href="#L-1543"><span class="linenos">1543</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">exactly_one</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="L-1544"><a href="#L-1544"><span class="linenos">1544</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="L-1545"><a href="#L-1545"><span class="linenos">1545</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="L-1546"><a href="#L-1546"><span class="linenos">1546</span></a>        <span class="p">])</span>
</span><span id="L-1547"><a href="#L-1547"><span class="linenos">1547</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1548"><a href="#L-1548"><span class="linenos">1548</span></a>
</span><span id="L-1549"><a href="#L-1549"><span class="linenos">1549</span></a>    <span class="k">def</span> <span class="nf">AddBoolAnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="L-1550"><a href="#L-1550"><span class="linenos">1550</span></a>        <span class="sd">&quot;&quot;&quot;Adds `And(literals) == true`.&quot;&quot;&quot;</span>
</span><span id="L-1551"><a href="#L-1551"><span class="linenos">1551</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1552"><a href="#L-1552"><span class="linenos">1552</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1553"><a href="#L-1553"><span class="linenos">1553</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">bool_and</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="L-1554"><a href="#L-1554"><span class="linenos">1554</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="L-1555"><a href="#L-1555"><span class="linenos">1555</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="L-1556"><a href="#L-1556"><span class="linenos">1556</span></a>        <span class="p">])</span>
</span><span id="L-1557"><a href="#L-1557"><span class="linenos">1557</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1558"><a href="#L-1558"><span class="linenos">1558</span></a>
</span><span id="L-1559"><a href="#L-1559"><span class="linenos">1559</span></a>    <span class="k">def</span> <span class="nf">AddBoolXOr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="L-1560"><a href="#L-1560"><span class="linenos">1560</span></a>        <span class="sd">&quot;&quot;&quot;Adds `XOr(literals) == true`.</span>
</span><span id="L-1561"><a href="#L-1561"><span class="linenos">1561</span></a>
</span><span id="L-1562"><a href="#L-1562"><span class="linenos">1562</span></a><span class="sd">    In contrast to AddBoolOr and AddBoolAnd, it does not support</span>
</span><span id="L-1563"><a href="#L-1563"><span class="linenos">1563</span></a><span class="sd">        .OnlyEnforceIf().</span>
</span><span id="L-1564"><a href="#L-1564"><span class="linenos">1564</span></a>
</span><span id="L-1565"><a href="#L-1565"><span class="linenos">1565</span></a><span class="sd">    Args:</span>
</span><span id="L-1566"><a href="#L-1566"><span class="linenos">1566</span></a><span class="sd">      *literals: the list of literals in the constraint.</span>
</span><span id="L-1567"><a href="#L-1567"><span class="linenos">1567</span></a>
</span><span id="L-1568"><a href="#L-1568"><span class="linenos">1568</span></a><span class="sd">    Returns:</span>
</span><span id="L-1569"><a href="#L-1569"><span class="linenos">1569</span></a><span class="sd">      An `Constraint` object.</span>
</span><span id="L-1570"><a href="#L-1570"><span class="linenos">1570</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1571"><a href="#L-1571"><span class="linenos">1571</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1572"><a href="#L-1572"><span class="linenos">1572</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1573"><a href="#L-1573"><span class="linenos">1573</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">bool_xor</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="L-1574"><a href="#L-1574"><span class="linenos">1574</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="L-1575"><a href="#L-1575"><span class="linenos">1575</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="L-1576"><a href="#L-1576"><span class="linenos">1576</span></a>        <span class="p">])</span>
</span><span id="L-1577"><a href="#L-1577"><span class="linenos">1577</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1578"><a href="#L-1578"><span class="linenos">1578</span></a>
</span><span id="L-1579"><a href="#L-1579"><span class="linenos">1579</span></a>    <span class="k">def</span> <span class="nf">AddMinEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">exprs</span><span class="p">):</span>
</span><span id="L-1580"><a href="#L-1580"><span class="linenos">1580</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == Min(exprs)`.&quot;&quot;&quot;</span>
</span><span id="L-1581"><a href="#L-1581"><span class="linenos">1581</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1582"><a href="#L-1582"><span class="linenos">1582</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1583"><a href="#L-1583"><span class="linenos">1583</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="L-1584"><a href="#L-1584"><span class="linenos">1584</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">exprs</span><span class="p">])</span>
</span><span id="L-1585"><a href="#L-1585"><span class="linenos">1585</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span>
</span><span id="L-1586"><a href="#L-1586"><span class="linenos">1586</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
</span><span id="L-1587"><a href="#L-1587"><span class="linenos">1587</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1588"><a href="#L-1588"><span class="linenos">1588</span></a>
</span><span id="L-1589"><a href="#L-1589"><span class="linenos">1589</span></a>    <span class="k">def</span> <span class="nf">AddMaxEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">exprs</span><span class="p">):</span>
</span><span id="L-1590"><a href="#L-1590"><span class="linenos">1590</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == Max(exprs)`.&quot;&quot;&quot;</span>
</span><span id="L-1591"><a href="#L-1591"><span class="linenos">1591</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1592"><a href="#L-1592"><span class="linenos">1592</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1593"><a href="#L-1593"><span class="linenos">1593</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="L-1594"><a href="#L-1594"><span class="linenos">1594</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">exprs</span><span class="p">])</span>
</span><span id="L-1595"><a href="#L-1595"><span class="linenos">1595</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="L-1596"><a href="#L-1596"><span class="linenos">1596</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1597"><a href="#L-1597"><span class="linenos">1597</span></a>
</span><span id="L-1598"><a href="#L-1598"><span class="linenos">1598</span></a>    <span class="k">def</span> <span class="nf">AddDivisionEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">denom</span><span class="p">):</span>
</span><span id="L-1599"><a href="#L-1599"><span class="linenos">1599</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == num // denom` (integer division rounded towards 0).&quot;&quot;&quot;</span>
</span><span id="L-1600"><a href="#L-1600"><span class="linenos">1600</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1601"><a href="#L-1601"><span class="linenos">1601</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1602"><a href="#L-1602"><span class="linenos">1602</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_div</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
</span><span id="L-1603"><a href="#L-1603"><span class="linenos">1603</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_div</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">denom</span><span class="p">))</span>
</span><span id="L-1604"><a href="#L-1604"><span class="linenos">1604</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_div</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="L-1605"><a href="#L-1605"><span class="linenos">1605</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1606"><a href="#L-1606"><span class="linenos">1606</span></a>
</span><span id="L-1607"><a href="#L-1607"><span class="linenos">1607</span></a>    <span class="k">def</span> <span class="nf">AddAbsEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
</span><span id="L-1608"><a href="#L-1608"><span class="linenos">1608</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == Abs(var)`.&quot;&quot;&quot;</span>
</span><span id="L-1609"><a href="#L-1609"><span class="linenos">1609</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1610"><a href="#L-1610"><span class="linenos">1610</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1611"><a href="#L-1611"><span class="linenos">1611</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</span><span id="L-1612"><a href="#L-1612"><span class="linenos">1612</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
</span><span id="L-1613"><a href="#L-1613"><span class="linenos">1613</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="L-1614"><a href="#L-1614"><span class="linenos">1614</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1615"><a href="#L-1615"><span class="linenos">1615</span></a>
</span><span id="L-1616"><a href="#L-1616"><span class="linenos">1616</span></a>    <span class="k">def</span> <span class="nf">AddModuloEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">mod</span><span class="p">):</span>
</span><span id="L-1617"><a href="#L-1617"><span class="linenos">1617</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target = var % mod`.&quot;&quot;&quot;</span>
</span><span id="L-1618"><a href="#L-1618"><span class="linenos">1618</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1619"><a href="#L-1619"><span class="linenos">1619</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1620"><a href="#L-1620"><span class="linenos">1620</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_mod</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
</span><span id="L-1621"><a href="#L-1621"><span class="linenos">1621</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_mod</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">mod</span><span class="p">))</span>
</span><span id="L-1622"><a href="#L-1622"><span class="linenos">1622</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_mod</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="L-1623"><a href="#L-1623"><span class="linenos">1623</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1624"><a href="#L-1624"><span class="linenos">1624</span></a>
</span><span id="L-1625"><a href="#L-1625"><span class="linenos">1625</span></a>    <span class="k">def</span> <span class="nf">AddMultiplicationEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="o">*</span><span class="n">expressions</span><span class="p">):</span>
</span><span id="L-1626"><a href="#L-1626"><span class="linenos">1626</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == expressions[0] * .. * expressions[n]`.&quot;&quot;&quot;</span>
</span><span id="L-1627"><a href="#L-1627"><span class="linenos">1627</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1628"><a href="#L-1628"><span class="linenos">1628</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1629"><a href="#L-1629"><span class="linenos">1629</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_prod</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="L-1630"><a href="#L-1630"><span class="linenos">1630</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="L-1631"><a href="#L-1631"><span class="linenos">1631</span></a>            <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span>
</span><span id="L-1632"><a href="#L-1632"><span class="linenos">1632</span></a>        <span class="p">])</span>
</span><span id="L-1633"><a href="#L-1633"><span class="linenos">1633</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_prod</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="L-1634"><a href="#L-1634"><span class="linenos">1634</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1635"><a href="#L-1635"><span class="linenos">1635</span></a>
</span><span id="L-1636"><a href="#L-1636"><span class="linenos">1636</span></a>    <span class="c1"># Scheduling support</span>
</span><span id="L-1637"><a href="#L-1637"><span class="linenos">1637</span></a>
</span><span id="L-1638"><a href="#L-1638"><span class="linenos">1638</span></a>    <span class="k">def</span> <span class="nf">NewIntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-1639"><a href="#L-1639"><span class="linenos">1639</span></a>        <span class="sd">&quot;&quot;&quot;Creates an interval variable from start, size, and end.</span>
</span><span id="L-1640"><a href="#L-1640"><span class="linenos">1640</span></a>
</span><span id="L-1641"><a href="#L-1641"><span class="linenos">1641</span></a><span class="sd">    An interval variable is a constraint, that is itself used in other</span>
</span><span id="L-1642"><a href="#L-1642"><span class="linenos">1642</span></a><span class="sd">    constraints like NoOverlap.</span>
</span><span id="L-1643"><a href="#L-1643"><span class="linenos">1643</span></a>
</span><span id="L-1644"><a href="#L-1644"><span class="linenos">1644</span></a><span class="sd">    Internally, it ensures that `start + size == end`.</span>
</span><span id="L-1645"><a href="#L-1645"><span class="linenos">1645</span></a>
</span><span id="L-1646"><a href="#L-1646"><span class="linenos">1646</span></a><span class="sd">    Args:</span>
</span><span id="L-1647"><a href="#L-1647"><span class="linenos">1647</span></a><span class="sd">      start: The start of the interval. It can be an affine or constant</span>
</span><span id="L-1648"><a href="#L-1648"><span class="linenos">1648</span></a><span class="sd">        expression.</span>
</span><span id="L-1649"><a href="#L-1649"><span class="linenos">1649</span></a><span class="sd">      size: The size of the interval. It can be an affine or constant</span>
</span><span id="L-1650"><a href="#L-1650"><span class="linenos">1650</span></a><span class="sd">        expression.</span>
</span><span id="L-1651"><a href="#L-1651"><span class="linenos">1651</span></a><span class="sd">      end: The end of the interval. It can be an affine or constant expression.</span>
</span><span id="L-1652"><a href="#L-1652"><span class="linenos">1652</span></a><span class="sd">      name: The name of the interval variable.</span>
</span><span id="L-1653"><a href="#L-1653"><span class="linenos">1653</span></a>
</span><span id="L-1654"><a href="#L-1654"><span class="linenos">1654</span></a><span class="sd">    Returns:</span>
</span><span id="L-1655"><a href="#L-1655"><span class="linenos">1655</span></a><span class="sd">      An `IntervalVar` object.</span>
</span><span id="L-1656"><a href="#L-1656"><span class="linenos">1656</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1657"><a href="#L-1657"><span class="linenos">1657</span></a>
</span><span id="L-1658"><a href="#L-1658"><span class="linenos">1658</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span> <span class="o">==</span> <span class="n">end</span><span class="p">)</span>
</span><span id="L-1659"><a href="#L-1659"><span class="linenos">1659</span></a>
</span><span id="L-1660"><a href="#L-1660"><span class="linenos">1660</span></a>        <span class="n">start_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="L-1661"><a href="#L-1661"><span class="linenos">1661</span></a>        <span class="n">size_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="L-1662"><a href="#L-1662"><span class="linenos">1662</span></a>        <span class="n">end_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
</span><span id="L-1663"><a href="#L-1663"><span class="linenos">1663</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">start_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-1664"><a href="#L-1664"><span class="linenos">1664</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1665"><a href="#L-1665"><span class="linenos">1665</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: start must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="L-1666"><a href="#L-1666"><span class="linenos">1666</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">size_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-1667"><a href="#L-1667"><span class="linenos">1667</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1668"><a href="#L-1668"><span class="linenos">1668</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: size must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="L-1669"><a href="#L-1669"><span class="linenos">1669</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">end_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-1670"><a href="#L-1670"><span class="linenos">1670</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1671"><a href="#L-1671"><span class="linenos">1671</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: end must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="L-1672"><a href="#L-1672"><span class="linenos">1672</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">start_expr</span><span class="p">,</span> <span class="n">size_expr</span><span class="p">,</span> <span class="n">end_expr</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1673"><a href="#L-1673"><span class="linenos">1673</span></a>                           <span class="n">name</span><span class="p">)</span>
</span><span id="L-1674"><a href="#L-1674"><span class="linenos">1674</span></a>
</span><span id="L-1675"><a href="#L-1675"><span class="linenos">1675</span></a>    <span class="k">def</span> <span class="nf">NewFixedSizeIntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-1676"><a href="#L-1676"><span class="linenos">1676</span></a>        <span class="sd">&quot;&quot;&quot;Creates an interval variable from start, and a fixed size.</span>
</span><span id="L-1677"><a href="#L-1677"><span class="linenos">1677</span></a>
</span><span id="L-1678"><a href="#L-1678"><span class="linenos">1678</span></a><span class="sd">    An interval variable is a constraint, that is itself used in other</span>
</span><span id="L-1679"><a href="#L-1679"><span class="linenos">1679</span></a><span class="sd">    constraints like NoOverlap.</span>
</span><span id="L-1680"><a href="#L-1680"><span class="linenos">1680</span></a>
</span><span id="L-1681"><a href="#L-1681"><span class="linenos">1681</span></a><span class="sd">    Args:</span>
</span><span id="L-1682"><a href="#L-1682"><span class="linenos">1682</span></a><span class="sd">      start: The start of the interval. It can be an affine or constant</span>
</span><span id="L-1683"><a href="#L-1683"><span class="linenos">1683</span></a><span class="sd">        expression.</span>
</span><span id="L-1684"><a href="#L-1684"><span class="linenos">1684</span></a><span class="sd">      size: The size of the interval. It must be an integer value.</span>
</span><span id="L-1685"><a href="#L-1685"><span class="linenos">1685</span></a><span class="sd">      name: The name of the interval variable.</span>
</span><span id="L-1686"><a href="#L-1686"><span class="linenos">1686</span></a>
</span><span id="L-1687"><a href="#L-1687"><span class="linenos">1687</span></a><span class="sd">    Returns:</span>
</span><span id="L-1688"><a href="#L-1688"><span class="linenos">1688</span></a><span class="sd">      An `IntervalVar` object.</span>
</span><span id="L-1689"><a href="#L-1689"><span class="linenos">1689</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1690"><a href="#L-1690"><span class="linenos">1690</span></a>        <span class="n">size</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="L-1691"><a href="#L-1691"><span class="linenos">1691</span></a>        <span class="n">start_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="L-1692"><a href="#L-1692"><span class="linenos">1692</span></a>        <span class="n">size_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="L-1693"><a href="#L-1693"><span class="linenos">1693</span></a>        <span class="n">end_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span><span class="p">)</span>
</span><span id="L-1694"><a href="#L-1694"><span class="linenos">1694</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">start_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-1695"><a href="#L-1695"><span class="linenos">1695</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1696"><a href="#L-1696"><span class="linenos">1696</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: start must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="L-1697"><a href="#L-1697"><span class="linenos">1697</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">start_expr</span><span class="p">,</span> <span class="n">size_expr</span><span class="p">,</span> <span class="n">end_expr</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1698"><a href="#L-1698"><span class="linenos">1698</span></a>                           <span class="n">name</span><span class="p">)</span>
</span><span id="L-1699"><a href="#L-1699"><span class="linenos">1699</span></a>
</span><span id="L-1700"><a href="#L-1700"><span class="linenos">1700</span></a>    <span class="k">def</span> <span class="nf">NewOptionalIntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">is_present</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-1701"><a href="#L-1701"><span class="linenos">1701</span></a>        <span class="sd">&quot;&quot;&quot;Creates an optional interval var from start, size, end, and is_present.</span>
</span><span id="L-1702"><a href="#L-1702"><span class="linenos">1702</span></a>
</span><span id="L-1703"><a href="#L-1703"><span class="linenos">1703</span></a><span class="sd">    An optional interval variable is a constraint, that is itself used in other</span>
</span><span id="L-1704"><a href="#L-1704"><span class="linenos">1704</span></a><span class="sd">    constraints like NoOverlap. This constraint is protected by an is_present</span>
</span><span id="L-1705"><a href="#L-1705"><span class="linenos">1705</span></a><span class="sd">    literal that indicates if it is active or not.</span>
</span><span id="L-1706"><a href="#L-1706"><span class="linenos">1706</span></a>
</span><span id="L-1707"><a href="#L-1707"><span class="linenos">1707</span></a><span class="sd">    Internally, it ensures that `is_present` implies `start + size == end`.</span>
</span><span id="L-1708"><a href="#L-1708"><span class="linenos">1708</span></a>
</span><span id="L-1709"><a href="#L-1709"><span class="linenos">1709</span></a><span class="sd">    Args:</span>
</span><span id="L-1710"><a href="#L-1710"><span class="linenos">1710</span></a><span class="sd">      start: The start of the interval. It can be an integer value, or an</span>
</span><span id="L-1711"><a href="#L-1711"><span class="linenos">1711</span></a><span class="sd">        integer variable.</span>
</span><span id="L-1712"><a href="#L-1712"><span class="linenos">1712</span></a><span class="sd">      size: The size of the interval. It can be an integer value, or an integer</span>
</span><span id="L-1713"><a href="#L-1713"><span class="linenos">1713</span></a><span class="sd">        variable.</span>
</span><span id="L-1714"><a href="#L-1714"><span class="linenos">1714</span></a><span class="sd">      end: The end of the interval. It can be an integer value, or an integer</span>
</span><span id="L-1715"><a href="#L-1715"><span class="linenos">1715</span></a><span class="sd">        variable.</span>
</span><span id="L-1716"><a href="#L-1716"><span class="linenos">1716</span></a><span class="sd">      is_present: A literal that indicates if the interval is active or not. A</span>
</span><span id="L-1717"><a href="#L-1717"><span class="linenos">1717</span></a><span class="sd">        inactive interval is simply ignored by all constraints.</span>
</span><span id="L-1718"><a href="#L-1718"><span class="linenos">1718</span></a><span class="sd">      name: The name of the interval variable.</span>
</span><span id="L-1719"><a href="#L-1719"><span class="linenos">1719</span></a>
</span><span id="L-1720"><a href="#L-1720"><span class="linenos">1720</span></a><span class="sd">    Returns:</span>
</span><span id="L-1721"><a href="#L-1721"><span class="linenos">1721</span></a><span class="sd">      An `IntervalVar` object.</span>
</span><span id="L-1722"><a href="#L-1722"><span class="linenos">1722</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1723"><a href="#L-1723"><span class="linenos">1723</span></a>
</span><span id="L-1724"><a href="#L-1724"><span class="linenos">1724</span></a>        <span class="c1"># Add the linear constraint.</span>
</span><span id="L-1725"><a href="#L-1725"><span class="linenos">1725</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span> <span class="o">==</span> <span class="n">end</span><span class="p">)</span><span class="o">.</span><span class="n">OnlyEnforceIf</span><span class="p">(</span><span class="n">is_present</span><span class="p">)</span>
</span><span id="L-1726"><a href="#L-1726"><span class="linenos">1726</span></a>
</span><span id="L-1727"><a href="#L-1727"><span class="linenos">1727</span></a>        <span class="c1"># Creates the IntervalConstraintProto object.</span>
</span><span id="L-1728"><a href="#L-1728"><span class="linenos">1728</span></a>        <span class="n">is_present_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">is_present</span><span class="p">)</span>
</span><span id="L-1729"><a href="#L-1729"><span class="linenos">1729</span></a>        <span class="n">start_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="L-1730"><a href="#L-1730"><span class="linenos">1730</span></a>        <span class="n">size_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="L-1731"><a href="#L-1731"><span class="linenos">1731</span></a>        <span class="n">end_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
</span><span id="L-1732"><a href="#L-1732"><span class="linenos">1732</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">start_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-1733"><a href="#L-1733"><span class="linenos">1733</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1734"><a href="#L-1734"><span class="linenos">1734</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: start must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="L-1735"><a href="#L-1735"><span class="linenos">1735</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">size_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-1736"><a href="#L-1736"><span class="linenos">1736</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1737"><a href="#L-1737"><span class="linenos">1737</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: size must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="L-1738"><a href="#L-1738"><span class="linenos">1738</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">end_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-1739"><a href="#L-1739"><span class="linenos">1739</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1740"><a href="#L-1740"><span class="linenos">1740</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: end must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="L-1741"><a href="#L-1741"><span class="linenos">1741</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">start_expr</span><span class="p">,</span> <span class="n">size_expr</span><span class="p">,</span> <span class="n">end_expr</span><span class="p">,</span>
</span><span id="L-1742"><a href="#L-1742"><span class="linenos">1742</span></a>                           <span class="n">is_present_index</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="L-1743"><a href="#L-1743"><span class="linenos">1743</span></a>
</span><span id="L-1744"><a href="#L-1744"><span class="linenos">1744</span></a>    <span class="k">def</span> <span class="nf">NewOptionalFixedSizeIntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">is_present</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-1745"><a href="#L-1745"><span class="linenos">1745</span></a>        <span class="sd">&quot;&quot;&quot;Creates an interval variable from start, and a fixed size.</span>
</span><span id="L-1746"><a href="#L-1746"><span class="linenos">1746</span></a>
</span><span id="L-1747"><a href="#L-1747"><span class="linenos">1747</span></a><span class="sd">    An interval variable is a constraint, that is itself used in other</span>
</span><span id="L-1748"><a href="#L-1748"><span class="linenos">1748</span></a><span class="sd">    constraints like NoOverlap.</span>
</span><span id="L-1749"><a href="#L-1749"><span class="linenos">1749</span></a>
</span><span id="L-1750"><a href="#L-1750"><span class="linenos">1750</span></a><span class="sd">    Args:</span>
</span><span id="L-1751"><a href="#L-1751"><span class="linenos">1751</span></a><span class="sd">      start: The start of the interval. It can be an affine or constant</span>
</span><span id="L-1752"><a href="#L-1752"><span class="linenos">1752</span></a><span class="sd">        expression.</span>
</span><span id="L-1753"><a href="#L-1753"><span class="linenos">1753</span></a><span class="sd">      size: The size of the interval. It must be an integer value.</span>
</span><span id="L-1754"><a href="#L-1754"><span class="linenos">1754</span></a><span class="sd">      is_present: A literal that indicates if the interval is active or not. A</span>
</span><span id="L-1755"><a href="#L-1755"><span class="linenos">1755</span></a><span class="sd">        inactive interval is simply ignored by all constraints.</span>
</span><span id="L-1756"><a href="#L-1756"><span class="linenos">1756</span></a><span class="sd">      name: The name of the interval variable.</span>
</span><span id="L-1757"><a href="#L-1757"><span class="linenos">1757</span></a>
</span><span id="L-1758"><a href="#L-1758"><span class="linenos">1758</span></a><span class="sd">    Returns:</span>
</span><span id="L-1759"><a href="#L-1759"><span class="linenos">1759</span></a><span class="sd">      An `IntervalVar` object.</span>
</span><span id="L-1760"><a href="#L-1760"><span class="linenos">1760</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1761"><a href="#L-1761"><span class="linenos">1761</span></a>        <span class="n">size</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="L-1762"><a href="#L-1762"><span class="linenos">1762</span></a>        <span class="n">start_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="L-1763"><a href="#L-1763"><span class="linenos">1763</span></a>        <span class="n">size_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="L-1764"><a href="#L-1764"><span class="linenos">1764</span></a>        <span class="n">end_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span><span class="p">)</span>
</span><span id="L-1765"><a href="#L-1765"><span class="linenos">1765</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">start_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-1766"><a href="#L-1766"><span class="linenos">1766</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1767"><a href="#L-1767"><span class="linenos">1767</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: start must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="L-1768"><a href="#L-1768"><span class="linenos">1768</span></a>        <span class="n">is_present_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">is_present</span><span class="p">)</span>
</span><span id="L-1769"><a href="#L-1769"><span class="linenos">1769</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">start_expr</span><span class="p">,</span> <span class="n">size_expr</span><span class="p">,</span> <span class="n">end_expr</span><span class="p">,</span>
</span><span id="L-1770"><a href="#L-1770"><span class="linenos">1770</span></a>                           <span class="n">is_present_index</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="L-1771"><a href="#L-1771"><span class="linenos">1771</span></a>
</span><span id="L-1772"><a href="#L-1772"><span class="linenos">1772</span></a>    <span class="k">def</span> <span class="nf">AddNoOverlap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interval_vars</span><span class="p">):</span>
</span><span id="L-1773"><a href="#L-1773"><span class="linenos">1773</span></a>        <span class="sd">&quot;&quot;&quot;Adds NoOverlap(interval_vars).</span>
</span><span id="L-1774"><a href="#L-1774"><span class="linenos">1774</span></a>
</span><span id="L-1775"><a href="#L-1775"><span class="linenos">1775</span></a><span class="sd">    A NoOverlap constraint ensures that all present intervals do not overlap</span>
</span><span id="L-1776"><a href="#L-1776"><span class="linenos">1776</span></a><span class="sd">    in time.</span>
</span><span id="L-1777"><a href="#L-1777"><span class="linenos">1777</span></a>
</span><span id="L-1778"><a href="#L-1778"><span class="linenos">1778</span></a><span class="sd">    Args:</span>
</span><span id="L-1779"><a href="#L-1779"><span class="linenos">1779</span></a><span class="sd">      interval_vars: The list of interval variables to constrain.</span>
</span><span id="L-1780"><a href="#L-1780"><span class="linenos">1780</span></a>
</span><span id="L-1781"><a href="#L-1781"><span class="linenos">1781</span></a><span class="sd">    Returns:</span>
</span><span id="L-1782"><a href="#L-1782"><span class="linenos">1782</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="L-1783"><a href="#L-1783"><span class="linenos">1783</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1784"><a href="#L-1784"><span class="linenos">1784</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1785"><a href="#L-1785"><span class="linenos">1785</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1786"><a href="#L-1786"><span class="linenos">1786</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">no_overlap</span><span class="o">.</span><span class="n">intervals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="L-1787"><a href="#L-1787"><span class="linenos">1787</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetIntervalIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">interval_vars</span><span class="p">])</span>
</span><span id="L-1788"><a href="#L-1788"><span class="linenos">1788</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1789"><a href="#L-1789"><span class="linenos">1789</span></a>
</span><span id="L-1790"><a href="#L-1790"><span class="linenos">1790</span></a>    <span class="k">def</span> <span class="nf">AddNoOverlap2D</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_intervals</span><span class="p">,</span> <span class="n">y_intervals</span><span class="p">):</span>
</span><span id="L-1791"><a href="#L-1791"><span class="linenos">1791</span></a>        <span class="sd">&quot;&quot;&quot;Adds NoOverlap2D(x_intervals, y_intervals).</span>
</span><span id="L-1792"><a href="#L-1792"><span class="linenos">1792</span></a>
</span><span id="L-1793"><a href="#L-1793"><span class="linenos">1793</span></a><span class="sd">    A NoOverlap2D constraint ensures that all present rectangles do not overlap</span>
</span><span id="L-1794"><a href="#L-1794"><span class="linenos">1794</span></a><span class="sd">    on a plane. Each rectangle is aligned with the X and Y axis, and is defined</span>
</span><span id="L-1795"><a href="#L-1795"><span class="linenos">1795</span></a><span class="sd">    by two intervals which represent its projection onto the X and Y axis.</span>
</span><span id="L-1796"><a href="#L-1796"><span class="linenos">1796</span></a>
</span><span id="L-1797"><a href="#L-1797"><span class="linenos">1797</span></a><span class="sd">    Furthermore, one box is optional if at least one of the x or y interval is</span>
</span><span id="L-1798"><a href="#L-1798"><span class="linenos">1798</span></a><span class="sd">    optional.</span>
</span><span id="L-1799"><a href="#L-1799"><span class="linenos">1799</span></a>
</span><span id="L-1800"><a href="#L-1800"><span class="linenos">1800</span></a><span class="sd">    Args:</span>
</span><span id="L-1801"><a href="#L-1801"><span class="linenos">1801</span></a><span class="sd">      x_intervals: The X coordinates of the rectangles.</span>
</span><span id="L-1802"><a href="#L-1802"><span class="linenos">1802</span></a><span class="sd">      y_intervals: The Y coordinates of the rectangles.</span>
</span><span id="L-1803"><a href="#L-1803"><span class="linenos">1803</span></a>
</span><span id="L-1804"><a href="#L-1804"><span class="linenos">1804</span></a><span class="sd">    Returns:</span>
</span><span id="L-1805"><a href="#L-1805"><span class="linenos">1805</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="L-1806"><a href="#L-1806"><span class="linenos">1806</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1807"><a href="#L-1807"><span class="linenos">1807</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1808"><a href="#L-1808"><span class="linenos">1808</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1809"><a href="#L-1809"><span class="linenos">1809</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">no_overlap_2d</span><span class="o">.</span><span class="n">x_intervals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="L-1810"><a href="#L-1810"><span class="linenos">1810</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetIntervalIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x_intervals</span><span class="p">])</span>
</span><span id="L-1811"><a href="#L-1811"><span class="linenos">1811</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">no_overlap_2d</span><span class="o">.</span><span class="n">y_intervals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="L-1812"><a href="#L-1812"><span class="linenos">1812</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetIntervalIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y_intervals</span><span class="p">])</span>
</span><span id="L-1813"><a href="#L-1813"><span class="linenos">1813</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1814"><a href="#L-1814"><span class="linenos">1814</span></a>
</span><span id="L-1815"><a href="#L-1815"><span class="linenos">1815</span></a>    <span class="k">def</span> <span class="nf">AddCumulative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">intervals</span><span class="p">,</span> <span class="n">demands</span><span class="p">,</span> <span class="n">capacity</span><span class="p">):</span>
</span><span id="L-1816"><a href="#L-1816"><span class="linenos">1816</span></a>        <span class="sd">&quot;&quot;&quot;Adds Cumulative(intervals, demands, capacity).</span>
</span><span id="L-1817"><a href="#L-1817"><span class="linenos">1817</span></a>
</span><span id="L-1818"><a href="#L-1818"><span class="linenos">1818</span></a><span class="sd">    This constraint enforces that:</span>
</span><span id="L-1819"><a href="#L-1819"><span class="linenos">1819</span></a>
</span><span id="L-1820"><a href="#L-1820"><span class="linenos">1820</span></a><span class="sd">        for all t:</span>
</span><span id="L-1821"><a href="#L-1821"><span class="linenos">1821</span></a><span class="sd">          sum(demands[i]</span>
</span><span id="L-1822"><a href="#L-1822"><span class="linenos">1822</span></a><span class="sd">            if (start(intervals[i]) &lt;= t &lt; end(intervals[i])) and</span>
</span><span id="L-1823"><a href="#L-1823"><span class="linenos">1823</span></a><span class="sd">            (intervals[i] is present)) &lt;= capacity</span>
</span><span id="L-1824"><a href="#L-1824"><span class="linenos">1824</span></a>
</span><span id="L-1825"><a href="#L-1825"><span class="linenos">1825</span></a><span class="sd">    Args:</span>
</span><span id="L-1826"><a href="#L-1826"><span class="linenos">1826</span></a><span class="sd">      intervals: The list of intervals.</span>
</span><span id="L-1827"><a href="#L-1827"><span class="linenos">1827</span></a><span class="sd">      demands: The list of demands for each interval. Each demand must be &gt;= 0.</span>
</span><span id="L-1828"><a href="#L-1828"><span class="linenos">1828</span></a><span class="sd">        Each demand can be an integer value, or an integer variable.</span>
</span><span id="L-1829"><a href="#L-1829"><span class="linenos">1829</span></a><span class="sd">      capacity: The maximum capacity of the cumulative constraint. It must be a</span>
</span><span id="L-1830"><a href="#L-1830"><span class="linenos">1830</span></a><span class="sd">        positive integer value or variable.</span>
</span><span id="L-1831"><a href="#L-1831"><span class="linenos">1831</span></a>
</span><span id="L-1832"><a href="#L-1832"><span class="linenos">1832</span></a><span class="sd">    Returns:</span>
</span><span id="L-1833"><a href="#L-1833"><span class="linenos">1833</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="L-1834"><a href="#L-1834"><span class="linenos">1834</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1835"><a href="#L-1835"><span class="linenos">1835</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="L-1836"><a href="#L-1836"><span class="linenos">1836</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-1837"><a href="#L-1837"><span class="linenos">1837</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">cumulative</span><span class="o">.</span><span class="n">intervals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="L-1838"><a href="#L-1838"><span class="linenos">1838</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetIntervalIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">intervals</span><span class="p">])</span>
</span><span id="L-1839"><a href="#L-1839"><span class="linenos">1839</span></a>        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">demands</span><span class="p">:</span>
</span><span id="L-1840"><a href="#L-1840"><span class="linenos">1840</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">cumulative</span><span class="o">.</span><span class="n">demands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
</span><span id="L-1841"><a href="#L-1841"><span class="linenos">1841</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">cumulative</span><span class="o">.</span><span class="n">capacity</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span>
</span><span id="L-1842"><a href="#L-1842"><span class="linenos">1842</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">capacity</span><span class="p">))</span>
</span><span id="L-1843"><a href="#L-1843"><span class="linenos">1843</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="L-1844"><a href="#L-1844"><span class="linenos">1844</span></a>
</span><span id="L-1845"><a href="#L-1845"><span class="linenos">1845</span></a>    <span class="c1"># Support for deep copy.</span>
</span><span id="L-1846"><a href="#L-1846"><span class="linenos">1846</span></a>    <span class="k">def</span> <span class="nf">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_model</span><span class="p">):</span>
</span><span id="L-1847"><a href="#L-1847"><span class="linenos">1847</span></a>        <span class="sd">&quot;&quot;&quot;Reset the model, and creates a new one from a CpModelProto instance.&quot;&quot;&quot;</span>
</span><span id="L-1848"><a href="#L-1848"><span class="linenos">1848</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="n">other_model</span><span class="o">.</span><span class="n">Proto</span><span class="p">())</span>
</span><span id="L-1849"><a href="#L-1849"><span class="linenos">1849</span></a>
</span><span id="L-1850"><a href="#L-1850"><span class="linenos">1850</span></a>        <span class="c1"># Rebuild constant map.</span>
</span><span id="L-1851"><a href="#L-1851"><span class="linenos">1851</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-1852"><a href="#L-1852"><span class="linenos">1852</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">):</span>
</span><span id="L-1853"><a href="#L-1853"><span class="linenos">1853</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="L-1854"><a href="#L-1854"><span class="linenos">1854</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">i</span>
</span><span id="L-1855"><a href="#L-1855"><span class="linenos">1855</span></a>
</span><span id="L-1856"><a href="#L-1856"><span class="linenos">1856</span></a>    <span class="k">def</span> <span class="nf">GetBoolVarFromProtoIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
</span><span id="L-1857"><a href="#L-1857"><span class="linenos">1857</span></a>        <span class="sd">&quot;&quot;&quot;Returns an already created Boolean variable from its index.&quot;&quot;&quot;</span>
</span><span id="L-1858"><a href="#L-1858"><span class="linenos">1858</span></a>        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">):</span>
</span><span id="L-1859"><a href="#L-1859"><span class="linenos">1859</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1860"><a href="#L-1860"><span class="linenos">1860</span></a>                <span class="sa">f</span><span class="s1">&#39;GetBoolVarFromProtoIndex: out of bound index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="L-1861"><a href="#L-1861"><span class="linenos">1861</span></a>        <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span id="L-1862"><a href="#L-1862"><span class="linenos">1862</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-1863"><a href="#L-1863"><span class="linenos">1863</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1864"><a href="#L-1864"><span class="linenos">1864</span></a>                <span class="sa">f</span><span class="s1">&#39;GetBoolVarFromProtoIndex: index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1"> does not reference&#39;</span> <span class="o">+</span>
</span><span id="L-1865"><a href="#L-1865"><span class="linenos">1865</span></a>                <span class="s1">&#39; a Boolean variable&#39;</span><span class="p">)</span>
</span><span id="L-1866"><a href="#L-1866"><span class="linenos">1866</span></a>
</span><span id="L-1867"><a href="#L-1867"><span class="linenos">1867</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1868"><a href="#L-1868"><span class="linenos">1868</span></a>
</span><span id="L-1869"><a href="#L-1869"><span class="linenos">1869</span></a>    <span class="k">def</span> <span class="nf">GetIntVarFromProtoIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
</span><span id="L-1870"><a href="#L-1870"><span class="linenos">1870</span></a>        <span class="sd">&quot;&quot;&quot;Returns an already created integer variable from its index.&quot;&quot;&quot;</span>
</span><span id="L-1871"><a href="#L-1871"><span class="linenos">1871</span></a>        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">):</span>
</span><span id="L-1872"><a href="#L-1872"><span class="linenos">1872</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1873"><a href="#L-1873"><span class="linenos">1873</span></a>                <span class="sa">f</span><span class="s1">&#39;GetIntVarFromProtoIndex: out of bound index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="L-1874"><a href="#L-1874"><span class="linenos">1874</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1875"><a href="#L-1875"><span class="linenos">1875</span></a>
</span><span id="L-1876"><a href="#L-1876"><span class="linenos">1876</span></a>    <span class="k">def</span> <span class="nf">GetIntervalVarFromProtoIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
</span><span id="L-1877"><a href="#L-1877"><span class="linenos">1877</span></a>        <span class="sd">&quot;&quot;&quot;Returns an already created interval variable from its index.&quot;&quot;&quot;</span>
</span><span id="L-1878"><a href="#L-1878"><span class="linenos">1878</span></a>        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">):</span>
</span><span id="L-1879"><a href="#L-1879"><span class="linenos">1879</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1880"><a href="#L-1880"><span class="linenos">1880</span></a>                <span class="sa">f</span><span class="s1">&#39;GetIntervalVarFromProtoIndex: out of bound index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="L-1881"><a href="#L-1881"><span class="linenos">1881</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span id="L-1882"><a href="#L-1882"><span class="linenos">1882</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">ct</span><span class="o">.</span><span class="n">HasField</span><span class="p">(</span><span class="s1">&#39;interval&#39;</span><span class="p">):</span>
</span><span id="L-1883"><a href="#L-1883"><span class="linenos">1883</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1884"><a href="#L-1884"><span class="linenos">1884</span></a>                <span class="sa">f</span><span class="s1">&#39;GetIntervalVarFromProtoIndex: index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1"> does not reference an&#39;</span>
</span><span id="L-1885"><a href="#L-1885"><span class="linenos">1885</span></a>                <span class="o">+</span> <span class="s1">&#39; interval variable&#39;</span><span class="p">)</span>
</span><span id="L-1886"><a href="#L-1886"><span class="linenos">1886</span></a>
</span><span id="L-1887"><a href="#L-1887"><span class="linenos">1887</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="L-1888"><a href="#L-1888"><span class="linenos">1888</span></a>
</span><span id="L-1889"><a href="#L-1889"><span class="linenos">1889</span></a>    <span class="c1"># Helpers.</span>
</span><span id="L-1890"><a href="#L-1890"><span class="linenos">1890</span></a>
</span><span id="L-1891"><a href="#L-1891"><span class="linenos">1891</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1892"><a href="#L-1892"><span class="linenos">1892</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">)</span>
</span><span id="L-1893"><a href="#L-1893"><span class="linenos">1893</span></a>
</span><span id="L-1894"><a href="#L-1894"><span class="linenos">1894</span></a>    <span class="k">def</span> <span class="nf">Proto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1895"><a href="#L-1895"><span class="linenos">1895</span></a>        <span class="sd">&quot;&quot;&quot;Returns the underlying CpModelProto.&quot;&quot;&quot;</span>
</span><span id="L-1896"><a href="#L-1896"><span class="linenos">1896</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span>
</span><span id="L-1897"><a href="#L-1897"><span class="linenos">1897</span></a>
</span><span id="L-1898"><a href="#L-1898"><span class="linenos">1898</span></a>    <span class="k">def</span> <span class="nf">Negated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
</span><span id="L-1899"><a href="#L-1899"><span class="linenos">1899</span></a>        <span class="k">return</span> <span class="o">-</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-1900"><a href="#L-1900"><span class="linenos">1900</span></a>
</span><span id="L-1901"><a href="#L-1901"><span class="linenos">1901</span></a>    <span class="k">def</span> <span class="nf">GetOrMakeIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-1902"><a href="#L-1902"><span class="linenos">1902</span></a>        <span class="sd">&quot;&quot;&quot;Returns the index of a variable, its negation, or a number.&quot;&quot;&quot;</span>
</span><span id="L-1903"><a href="#L-1903"><span class="linenos">1903</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="L-1904"><a href="#L-1904"><span class="linenos">1904</span></a>            <span class="k">return</span> <span class="n">arg</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="L-1905"><a href="#L-1905"><span class="linenos">1905</span></a>        <span class="k">elif</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="L-1906"><a href="#L-1906"><span class="linenos">1906</span></a>              <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">IntVar</span><span class="p">)</span> <span class="ow">and</span> <span class="n">arg</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="L-1907"><a href="#L-1907"><span class="linenos">1907</span></a>            <span class="k">return</span> <span class="o">-</span><span class="n">arg</span><span class="o">.</span><span class="n">Expression</span><span class="p">()</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-1908"><a href="#L-1908"><span class="linenos">1908</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-1909"><a href="#L-1909"><span class="linenos">1909</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-1910"><a href="#L-1910"><span class="linenos">1910</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndexFromConstant</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-1911"><a href="#L-1911"><span class="linenos">1911</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1912"><a href="#L-1912"><span class="linenos">1912</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;NotSupported: model.GetOrMakeIndex(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span>
</span><span id="L-1913"><a href="#L-1913"><span class="linenos">1913</span></a>                            <span class="s1">&#39;)&#39;</span><span class="p">)</span>
</span><span id="L-1914"><a href="#L-1914"><span class="linenos">1914</span></a>
</span><span id="L-1915"><a href="#L-1915"><span class="linenos">1915</span></a>    <span class="k">def</span> <span class="nf">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-1916"><a href="#L-1916"><span class="linenos">1916</span></a>        <span class="sd">&quot;&quot;&quot;Returns an index from a boolean expression.&quot;&quot;&quot;</span>
</span><span id="L-1917"><a href="#L-1917"><span class="linenos">1917</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="L-1918"><a href="#L-1918"><span class="linenos">1918</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">AssertIsBooleanVariable</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-1919"><a href="#L-1919"><span class="linenos">1919</span></a>            <span class="k">return</span> <span class="n">arg</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="L-1920"><a href="#L-1920"><span class="linenos">1920</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="L-1921"><a href="#L-1921"><span class="linenos">1921</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">AssertIsBooleanVariable</span><span class="p">(</span><span class="n">arg</span><span class="o">.</span><span class="n">Not</span><span class="p">())</span>
</span><span id="L-1922"><a href="#L-1922"><span class="linenos">1922</span></a>            <span class="k">return</span> <span class="n">arg</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="L-1923"><a href="#L-1923"><span class="linenos">1923</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="L-1924"><a href="#L-1924"><span class="linenos">1924</span></a>            <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_boolean</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="L-1925"><a href="#L-1925"><span class="linenos">1925</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndexFromConstant</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
</span><span id="L-1926"><a href="#L-1926"><span class="linenos">1926</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1927"><a href="#L-1927"><span class="linenos">1927</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;NotSupported: model.GetOrMakeBooleanIndex(&#39;</span> <span class="o">+</span>
</span><span id="L-1928"><a href="#L-1928"><span class="linenos">1928</span></a>                            <span class="nb">str</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
</span><span id="L-1929"><a href="#L-1929"><span class="linenos">1929</span></a>
</span><span id="L-1930"><a href="#L-1930"><span class="linenos">1930</span></a>    <span class="k">def</span> <span class="nf">GetIntervalIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="L-1931"><a href="#L-1931"><span class="linenos">1931</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">IntervalVar</span><span class="p">):</span>
</span><span id="L-1932"><a href="#L-1932"><span class="linenos">1932</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;NotSupported: model.GetIntervalIndex(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="L-1933"><a href="#L-1933"><span class="linenos">1933</span></a>        <span class="k">return</span> <span class="n">arg</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="L-1934"><a href="#L-1934"><span class="linenos">1934</span></a>
</span><span id="L-1935"><a href="#L-1935"><span class="linenos">1935</span></a>    <span class="k">def</span> <span class="nf">GetOrMakeIndexFromConstant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="L-1936"><a href="#L-1936"><span class="linenos">1936</span></a>        <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="p">:</span>
</span><span id="L-1937"><a href="#L-1937"><span class="linenos">1937</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
</span><span id="L-1938"><a href="#L-1938"><span class="linenos">1938</span></a>        <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
</span><span id="L-1939"><a href="#L-1939"><span class="linenos">1939</span></a>        <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="L-1940"><a href="#L-1940"><span class="linenos">1940</span></a>        <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="p">])</span>
</span><span id="L-1941"><a href="#L-1941"><span class="linenos">1941</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span>
</span><span id="L-1942"><a href="#L-1942"><span class="linenos">1942</span></a>        <span class="k">return</span> <span class="n">index</span>
</span><span id="L-1943"><a href="#L-1943"><span class="linenos">1943</span></a>
</span><span id="L-1944"><a href="#L-1944"><span class="linenos">1944</span></a>    <span class="k">def</span> <span class="nf">VarIndexToVarProto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_index</span><span class="p">):</span>
</span><span id="L-1945"><a href="#L-1945"><span class="linenos">1945</span></a>        <span class="k">if</span> <span class="n">var_index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1946"><a href="#L-1946"><span class="linenos">1946</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">var_index</span><span class="p">]</span>
</span><span id="L-1947"><a href="#L-1947"><span class="linenos">1947</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1948"><a href="#L-1948"><span class="linenos">1948</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="o">-</span><span class="n">var_index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="L-1949"><a href="#L-1949"><span class="linenos">1949</span></a>
</span><span id="L-1950"><a href="#L-1950"><span class="linenos">1950</span></a>    <span class="k">def</span> <span class="nf">ParseLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_expr</span><span class="p">,</span> <span class="n">negate</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-1951"><a href="#L-1951"><span class="linenos">1951</span></a>        <span class="sd">&quot;&quot;&quot;Returns a LinearExpressionProto built from a LinearExpr instance.&quot;&quot;&quot;</span>
</span><span id="L-1952"><a href="#L-1952"><span class="linenos">1952</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">LinearExpressionProto</span><span class="p">()</span>
</span><span id="L-1953"><a href="#L-1953"><span class="linenos">1953</span></a>        <span class="n">mult</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">negate</span> <span class="k">else</span> <span class="mi">1</span>
</span><span id="L-1954"><a href="#L-1954"><span class="linenos">1954</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">):</span>
</span><span id="L-1955"><a href="#L-1955"><span class="linenos">1955</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">)</span> <span class="o">*</span> <span class="n">mult</span>
</span><span id="L-1956"><a href="#L-1956"><span class="linenos">1956</span></a>            <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1957"><a href="#L-1957"><span class="linenos">1957</span></a>
</span><span id="L-1958"><a href="#L-1958"><span class="linenos">1958</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="L-1959"><a href="#L-1959"><span class="linenos">1959</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">))</span>
</span><span id="L-1960"><a href="#L-1960"><span class="linenos">1960</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mult</span><span class="p">)</span>
</span><span id="L-1961"><a href="#L-1961"><span class="linenos">1961</span></a>            <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1962"><a href="#L-1962"><span class="linenos">1962</span></a>
</span><span id="L-1963"><a href="#L-1963"><span class="linenos">1963</span></a>        <span class="n">coeffs_map</span><span class="p">,</span> <span class="n">constant</span> <span class="o">=</span> <span class="n">linear_expr</span><span class="o">.</span><span class="n">GetIntegerVarValueMap</span><span class="p">()</span>
</span><span id="L-1964"><a href="#L-1964"><span class="linenos">1964</span></a>        <span class="n">result</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">constant</span> <span class="o">*</span> <span class="n">mult</span>
</span><span id="L-1965"><a href="#L-1965"><span class="linenos">1965</span></a>        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">coeffs_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1966"><a href="#L-1966"><span class="linenos">1966</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="L-1967"><a href="#L-1967"><span class="linenos">1967</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Wrong argument&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</span><span id="L-1968"><a href="#L-1968"><span class="linenos">1968</span></a>            <span class="n">c</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-1969"><a href="#L-1969"><span class="linenos">1969</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="L-1970"><a href="#L-1970"><span class="linenos">1970</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span> <span class="n">mult</span><span class="p">)</span>
</span><span id="L-1971"><a href="#L-1971"><span class="linenos">1971</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1972"><a href="#L-1972"><span class="linenos">1972</span></a>
</span><span id="L-1973"><a href="#L-1973"><span class="linenos">1973</span></a>    <span class="k">def</span> <span class="nf">_SetObjective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">minimize</span><span class="p">):</span>
</span><span id="L-1974"><a href="#L-1974"><span class="linenos">1974</span></a>        <span class="sd">&quot;&quot;&quot;Sets the objective of the model.&quot;&quot;&quot;</span>
</span><span id="L-1975"><a href="#L-1975"><span class="linenos">1975</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ClearObjective</span><span class="p">()</span>
</span><span id="L-1976"><a href="#L-1976"><span class="linenos">1976</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="L-1977"><a href="#L-1977"><span class="linenos">1977</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1978"><a href="#L-1978"><span class="linenos">1978</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-1979"><a href="#L-1979"><span class="linenos">1979</span></a>            <span class="k">if</span> <span class="n">minimize</span><span class="p">:</span>
</span><span id="L-1980"><a href="#L-1980"><span class="linenos">1980</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="L-1981"><a href="#L-1981"><span class="linenos">1981</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">scaling_factor</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-1982"><a href="#L-1982"><span class="linenos">1982</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1983"><a href="#L-1983"><span class="linenos">1983</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Negated</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Index</span><span class="p">()))</span>
</span><span id="L-1984"><a href="#L-1984"><span class="linenos">1984</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">scaling_factor</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="L-1985"><a href="#L-1985"><span class="linenos">1985</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="L-1986"><a href="#L-1986"><span class="linenos">1986</span></a>            <span class="n">coeffs_map</span><span class="p">,</span> <span class="n">constant</span><span class="p">,</span> <span class="n">is_integer</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">GetFloatVarValueMap</span><span class="p">()</span>
</span><span id="L-1987"><a href="#L-1987"><span class="linenos">1987</span></a>            <span class="k">if</span> <span class="n">is_integer</span><span class="p">:</span>
</span><span id="L-1988"><a href="#L-1988"><span class="linenos">1988</span></a>                <span class="k">if</span> <span class="n">minimize</span><span class="p">:</span>
</span><span id="L-1989"><a href="#L-1989"><span class="linenos">1989</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">scaling_factor</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-1990"><a href="#L-1990"><span class="linenos">1990</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">constant</span>
</span><span id="L-1991"><a href="#L-1991"><span class="linenos">1991</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1992"><a href="#L-1992"><span class="linenos">1992</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">scaling_factor</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="L-1993"><a href="#L-1993"><span class="linenos">1993</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="o">-</span><span class="n">constant</span>
</span><span id="L-1994"><a href="#L-1994"><span class="linenos">1994</span></a>                <span class="k">for</span> <span class="n">v</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="ow">in</span> <span class="n">coeffs_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1995"><a href="#L-1995"><span class="linenos">1995</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</span><span id="L-1996"><a href="#L-1996"><span class="linenos">1996</span></a>                    <span class="k">if</span> <span class="n">minimize</span><span class="p">:</span>
</span><span id="L-1997"><a href="#L-1997"><span class="linenos">1997</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="L-1998"><a href="#L-1998"><span class="linenos">1998</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1999"><a href="#L-1999"><span class="linenos">1999</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-2000"><a href="#L-2000"><span class="linenos">2000</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">Negated</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">Index</span><span class="p">()))</span>
</span><span id="L-2001"><a href="#L-2001"><span class="linenos">2001</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2002"><a href="#L-2002"><span class="linenos">2002</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">floating_point_objective</span><span class="o">.</span><span class="n">maximize</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">minimize</span>
</span><span id="L-2003"><a href="#L-2003"><span class="linenos">2003</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">floating_point_objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">constant</span>
</span><span id="L-2004"><a href="#L-2004"><span class="linenos">2004</span></a>                <span class="k">for</span> <span class="n">v</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="ow">in</span> <span class="n">coeffs_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-2005"><a href="#L-2005"><span class="linenos">2005</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">floating_point_objective</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</span><span id="L-2006"><a href="#L-2006"><span class="linenos">2006</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">floating_point_objective</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="L-2007"><a href="#L-2007"><span class="linenos">2007</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
</span><span id="L-2008"><a href="#L-2008"><span class="linenos">2008</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</span><span id="L-2009"><a href="#L-2009"><span class="linenos">2009</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">scaling_factor</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-2010"><a href="#L-2010"><span class="linenos">2010</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2011"><a href="#L-2011"><span class="linenos">2011</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;TypeError: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">+</span>
</span><span id="L-2012"><a href="#L-2012"><span class="linenos">2012</span></a>                            <span class="s1">&#39; is not a valid objective&#39;</span><span class="p">)</span>
</span><span id="L-2013"><a href="#L-2013"><span class="linenos">2013</span></a>
</span><span id="L-2014"><a href="#L-2014"><span class="linenos">2014</span></a>    <span class="k">def</span> <span class="nf">Minimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span><span id="L-2015"><a href="#L-2015"><span class="linenos">2015</span></a>        <span class="sd">&quot;&quot;&quot;Sets the objective of the model to minimize(obj).&quot;&quot;&quot;</span>
</span><span id="L-2016"><a href="#L-2016"><span class="linenos">2016</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_SetObjective</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">minimize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-2017"><a href="#L-2017"><span class="linenos">2017</span></a>
</span><span id="L-2018"><a href="#L-2018"><span class="linenos">2018</span></a>    <span class="k">def</span> <span class="nf">Maximize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span><span id="L-2019"><a href="#L-2019"><span class="linenos">2019</span></a>        <span class="sd">&quot;&quot;&quot;Sets the objective of the model to maximize(obj).&quot;&quot;&quot;</span>
</span><span id="L-2020"><a href="#L-2020"><span class="linenos">2020</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_SetObjective</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">minimize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-2021"><a href="#L-2021"><span class="linenos">2021</span></a>
</span><span id="L-2022"><a href="#L-2022"><span class="linenos">2022</span></a>    <span class="k">def</span> <span class="nf">HasObjective</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2023"><a href="#L-2023"><span class="linenos">2023</span></a>        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">HasField</span><span class="p">(</span><span class="s1">&#39;objective&#39;</span><span class="p">)</span> <span class="ow">or</span>
</span><span id="L-2024"><a href="#L-2024"><span class="linenos">2024</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">HasField</span><span class="p">(</span><span class="s1">&#39;floating_point_objective&#39;</span><span class="p">))</span>
</span><span id="L-2025"><a href="#L-2025"><span class="linenos">2025</span></a>
</span><span id="L-2026"><a href="#L-2026"><span class="linenos">2026</span></a>    <span class="k">def</span> <span class="nf">ClearObjective</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2027"><a href="#L-2027"><span class="linenos">2027</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;objective&#39;</span><span class="p">)</span>
</span><span id="L-2028"><a href="#L-2028"><span class="linenos">2028</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;floating_point_objective&#39;</span><span class="p">)</span>
</span><span id="L-2029"><a href="#L-2029"><span class="linenos">2029</span></a>
</span><span id="L-2030"><a href="#L-2030"><span class="linenos">2030</span></a>    <span class="k">def</span> <span class="nf">AddDecisionStrategy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">var_strategy</span><span class="p">,</span> <span class="n">domain_strategy</span><span class="p">):</span>
</span><span id="L-2031"><a href="#L-2031"><span class="linenos">2031</span></a>        <span class="sd">&quot;&quot;&quot;Adds a search strategy to the model.</span>
</span><span id="L-2032"><a href="#L-2032"><span class="linenos">2032</span></a>
</span><span id="L-2033"><a href="#L-2033"><span class="linenos">2033</span></a><span class="sd">    Args:</span>
</span><span id="L-2034"><a href="#L-2034"><span class="linenos">2034</span></a><span class="sd">      variables: a list of variables this strategy will assign.</span>
</span><span id="L-2035"><a href="#L-2035"><span class="linenos">2035</span></a><span class="sd">      var_strategy: heuristic to choose the next variable to assign.</span>
</span><span id="L-2036"><a href="#L-2036"><span class="linenos">2036</span></a><span class="sd">      domain_strategy: heuristic to reduce the domain of the selected variable.</span>
</span><span id="L-2037"><a href="#L-2037"><span class="linenos">2037</span></a><span class="sd">        Currently, this is advanced code: the union of all strategies added to</span>
</span><span id="L-2038"><a href="#L-2038"><span class="linenos">2038</span></a><span class="sd">        the model must be complete, i.e. instantiates all variables. Otherwise,</span>
</span><span id="L-2039"><a href="#L-2039"><span class="linenos">2039</span></a><span class="sd">        Solve() will fail.</span>
</span><span id="L-2040"><a href="#L-2040"><span class="linenos">2040</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2041"><a href="#L-2041"><span class="linenos">2041</span></a>
</span><span id="L-2042"><a href="#L-2042"><span class="linenos">2042</span></a>        <span class="n">strategy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">search_strategy</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="L-2043"><a href="#L-2043"><span class="linenos">2043</span></a>        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
</span><span id="L-2044"><a href="#L-2044"><span class="linenos">2044</span></a>            <span class="n">strategy</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="L-2045"><a href="#L-2045"><span class="linenos">2045</span></a>        <span class="n">strategy</span><span class="o">.</span><span class="n">variable_selection_strategy</span> <span class="o">=</span> <span class="n">var_strategy</span>
</span><span id="L-2046"><a href="#L-2046"><span class="linenos">2046</span></a>        <span class="n">strategy</span><span class="o">.</span><span class="n">domain_reduction_strategy</span> <span class="o">=</span> <span class="n">domain_strategy</span>
</span><span id="L-2047"><a href="#L-2047"><span class="linenos">2047</span></a>
</span><span id="L-2048"><a href="#L-2048"><span class="linenos">2048</span></a>    <span class="k">def</span> <span class="nf">ModelStats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2049"><a href="#L-2049"><span class="linenos">2049</span></a>        <span class="sd">&quot;&quot;&quot;Returns a string containing some model statistics.&quot;&quot;&quot;</span>
</span><span id="L-2050"><a href="#L-2050"><span class="linenos">2050</span></a>        <span class="k">return</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">CpSatHelper</span><span class="o">.</span><span class="n">SerializedModelStats</span><span class="p">(</span>
</span><span id="L-2051"><a href="#L-2051"><span class="linenos">2051</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">())</span>
</span><span id="L-2052"><a href="#L-2052"><span class="linenos">2052</span></a>
</span><span id="L-2053"><a href="#L-2053"><span class="linenos">2053</span></a>    <span class="k">def</span> <span class="nf">Validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2054"><a href="#L-2054"><span class="linenos">2054</span></a>        <span class="sd">&quot;&quot;&quot;Returns a string indicating that the model is invalid.&quot;&quot;&quot;</span>
</span><span id="L-2055"><a href="#L-2055"><span class="linenos">2055</span></a>        <span class="k">return</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">CpSatHelper</span><span class="o">.</span><span class="n">SerializedValidateModel</span><span class="p">(</span>
</span><span id="L-2056"><a href="#L-2056"><span class="linenos">2056</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">())</span>
</span><span id="L-2057"><a href="#L-2057"><span class="linenos">2057</span></a>
</span><span id="L-2058"><a href="#L-2058"><span class="linenos">2058</span></a>    <span class="k">def</span> <span class="nf">ExportToFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
</span><span id="L-2059"><a href="#L-2059"><span class="linenos">2059</span></a>        <span class="sd">&quot;&quot;&quot;Write the model as a protocol buffer to &#39;file&#39;.</span>
</span><span id="L-2060"><a href="#L-2060"><span class="linenos">2060</span></a>
</span><span id="L-2061"><a href="#L-2061"><span class="linenos">2061</span></a><span class="sd">    Args:</span>
</span><span id="L-2062"><a href="#L-2062"><span class="linenos">2062</span></a><span class="sd">      file: file to write the model to. If the filename ends with &#39;txt&#39;, the</span>
</span><span id="L-2063"><a href="#L-2063"><span class="linenos">2063</span></a><span class="sd">        model will be written as a text file, otherwise, the binary format will</span>
</span><span id="L-2064"><a href="#L-2064"><span class="linenos">2064</span></a><span class="sd">        be used.</span>
</span><span id="L-2065"><a href="#L-2065"><span class="linenos">2065</span></a>
</span><span id="L-2066"><a href="#L-2066"><span class="linenos">2066</span></a><span class="sd">    Returns:</span>
</span><span id="L-2067"><a href="#L-2067"><span class="linenos">2067</span></a><span class="sd">      True if the model was correctly written.</span>
</span><span id="L-2068"><a href="#L-2068"><span class="linenos">2068</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2069"><a href="#L-2069"><span class="linenos">2069</span></a>        <span class="k">return</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">CpSatHelper</span><span class="o">.</span><span class="n">SerializedWriteModelToFile</span><span class="p">(</span>
</span><span id="L-2070"><a href="#L-2070"><span class="linenos">2070</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">(),</span> <span class="n">file</span><span class="p">)</span>
</span><span id="L-2071"><a href="#L-2071"><span class="linenos">2071</span></a>
</span><span id="L-2072"><a href="#L-2072"><span class="linenos">2072</span></a>    <span class="k">def</span> <span class="nf">AssertIsBooleanVariable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
</span><span id="L-2073"><a href="#L-2073"><span class="linenos">2073</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="L-2074"><a href="#L-2074"><span class="linenos">2074</span></a>            <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-2075"><a href="#L-2075"><span class="linenos">2075</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-2076"><a href="#L-2076"><span class="linenos">2076</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;TypeError: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span>
</span><span id="L-2077"><a href="#L-2077"><span class="linenos">2077</span></a>                                <span class="s1">&#39; is not a boolean variable&#39;</span><span class="p">)</span>
</span><span id="L-2078"><a href="#L-2078"><span class="linenos">2078</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="L-2079"><a href="#L-2079"><span class="linenos">2079</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;TypeError: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span>
</span><span id="L-2080"><a href="#L-2080"><span class="linenos">2080</span></a>                            <span class="s1">&#39; is not a boolean variable&#39;</span><span class="p">)</span>
</span><span id="L-2081"><a href="#L-2081"><span class="linenos">2081</span></a>
</span><span id="L-2082"><a href="#L-2082"><span class="linenos">2082</span></a>    <span class="k">def</span> <span class="nf">AddHint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="L-2083"><a href="#L-2083"><span class="linenos">2083</span></a>        <span class="sd">&quot;&quot;&quot;Adds &#39;var == value&#39; as a hint to the solver.&quot;&quot;&quot;</span>
</span><span id="L-2084"><a href="#L-2084"><span class="linenos">2084</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">solution_hint</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
</span><span id="L-2085"><a href="#L-2085"><span class="linenos">2085</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">solution_hint</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-2086"><a href="#L-2086"><span class="linenos">2086</span></a>
</span><span id="L-2087"><a href="#L-2087"><span class="linenos">2087</span></a>    <span class="k">def</span> <span class="nf">ClearHints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2088"><a href="#L-2088"><span class="linenos">2088</span></a>        <span class="sd">&quot;&quot;&quot;Remove any solution hint from the model.&quot;&quot;&quot;</span>
</span><span id="L-2089"><a href="#L-2089"><span class="linenos">2089</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;solution_hint&#39;</span><span class="p">)</span>
</span><span id="L-2090"><a href="#L-2090"><span class="linenos">2090</span></a>
</span><span id="L-2091"><a href="#L-2091"><span class="linenos">2091</span></a>    <span class="k">def</span> <span class="nf">AddAssumption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lit</span><span class="p">):</span>
</span><span id="L-2092"><a href="#L-2092"><span class="linenos">2092</span></a>        <span class="sd">&quot;&quot;&quot;Add the literal &#39;lit&#39; to the model as assumptions.&quot;&quot;&quot;</span>
</span><span id="L-2093"><a href="#L-2093"><span class="linenos">2093</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">assumptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">lit</span><span class="p">))</span>
</span><span id="L-2094"><a href="#L-2094"><span class="linenos">2094</span></a>
</span><span id="L-2095"><a href="#L-2095"><span class="linenos">2095</span></a>    <span class="k">def</span> <span class="nf">AddAssumptions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">literals</span><span class="p">):</span>
</span><span id="L-2096"><a href="#L-2096"><span class="linenos">2096</span></a>        <span class="sd">&quot;&quot;&quot;Add the literals to the model as assumptions.&quot;&quot;&quot;</span>
</span><span id="L-2097"><a href="#L-2097"><span class="linenos">2097</span></a>        <span class="k">for</span> <span class="n">lit</span> <span class="ow">in</span> <span class="n">literals</span><span class="p">:</span>
</span><span id="L-2098"><a href="#L-2098"><span class="linenos">2098</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">AddAssumption</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span>
</span><span id="L-2099"><a href="#L-2099"><span class="linenos">2099</span></a>
</span><span id="L-2100"><a href="#L-2100"><span class="linenos">2100</span></a>    <span class="k">def</span> <span class="nf">ClearAssumptions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2101"><a href="#L-2101"><span class="linenos">2101</span></a>        <span class="sd">&quot;&quot;&quot;Remove all assumptions from the model.&quot;&quot;&quot;</span>
</span><span id="L-2102"><a href="#L-2102"><span class="linenos">2102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;assumptions&#39;</span><span class="p">)</span>
</span><span id="L-2103"><a href="#L-2103"><span class="linenos">2103</span></a>
</span><span id="L-2104"><a href="#L-2104"><span class="linenos">2104</span></a>
</span><span id="L-2105"><a href="#L-2105"><span class="linenos">2105</span></a><span class="k">def</span> <span class="nf">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
</span><span id="L-2106"><a href="#L-2106"><span class="linenos">2106</span></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s1">&#39;__len__&#39;</span><span class="p">):</span>  <span class="c1"># Tuple</span>
</span><span id="L-2107"><a href="#L-2107"><span class="linenos">2107</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-2108"><a href="#L-2108"><span class="linenos">2108</span></a>            <span class="k">return</span> <span class="n">args</span>
</span><span id="L-2109"><a href="#L-2109"><span class="linenos">2109</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_a_number</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="L-2110"><a href="#L-2110"><span class="linenos">2110</span></a>            <span class="k">return</span> <span class="n">args</span>
</span><span id="L-2111"><a href="#L-2111"><span class="linenos">2111</span></a>    <span class="c1"># Generator</span>
</span><span id="L-2112"><a href="#L-2112"><span class="linenos">2112</span></a>    <span class="k">return</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-2113"><a href="#L-2113"><span class="linenos">2113</span></a>
</span><span id="L-2114"><a href="#L-2114"><span class="linenos">2114</span></a>
</span><span id="L-2115"><a href="#L-2115"><span class="linenos">2115</span></a><span class="k">def</span> <span class="nf">EvaluateLinearExpr</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">solution</span><span class="p">):</span>
</span><span id="L-2116"><a href="#L-2116"><span class="linenos">2116</span></a>    <span class="sd">&quot;&quot;&quot;Evaluate a linear expression against a solution.&quot;&quot;&quot;</span>
</span><span id="L-2117"><a href="#L-2117"><span class="linenos">2117</span></a>    <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">expression</span><span class="p">):</span>
</span><span id="L-2118"><a href="#L-2118"><span class="linenos">2118</span></a>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
</span><span id="L-2119"><a href="#L-2119"><span class="linenos">2119</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="L-2120"><a href="#L-2120"><span class="linenos">2120</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Cannot interpret </span><span class="si">%s</span><span class="s1"> as a linear expression.&#39;</span> <span class="o">%</span>
</span><span id="L-2121"><a href="#L-2121"><span class="linenos">2121</span></a>                        <span class="n">expression</span><span class="p">)</span>
</span><span id="L-2122"><a href="#L-2122"><span class="linenos">2122</span></a>
</span><span id="L-2123"><a href="#L-2123"><span class="linenos">2123</span></a>    <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-2124"><a href="#L-2124"><span class="linenos">2124</span></a>    <span class="n">to_process</span> <span class="o">=</span> <span class="p">[(</span><span class="n">expression</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</span><span id="L-2125"><a href="#L-2125"><span class="linenos">2125</span></a>    <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>
</span><span id="L-2126"><a href="#L-2126"><span class="linenos">2126</span></a>        <span class="n">expr</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="L-2127"><a href="#L-2127"><span class="linenos">2127</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
</span><span id="L-2128"><a href="#L-2128"><span class="linenos">2128</span></a>            <span class="n">value</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="L-2129"><a href="#L-2129"><span class="linenos">2129</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">):</span>
</span><span id="L-2130"><a href="#L-2130"><span class="linenos">2130</span></a>            <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()))</span>
</span><span id="L-2131"><a href="#L-2131"><span class="linenos">2131</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_Sum</span><span class="p">):</span>
</span><span id="L-2132"><a href="#L-2132"><span class="linenos">2132</span></a>            <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Left</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="L-2133"><a href="#L-2133"><span class="linenos">2133</span></a>            <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Right</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="L-2134"><a href="#L-2134"><span class="linenos">2134</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_SumArray</span><span class="p">):</span>
</span><span id="L-2135"><a href="#L-2135"><span class="linenos">2135</span></a>            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">():</span>
</span><span id="L-2136"><a href="#L-2136"><span class="linenos">2136</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="L-2137"><a href="#L-2137"><span class="linenos">2137</span></a>            <span class="n">value</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="L-2138"><a href="#L-2138"><span class="linenos">2138</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_WeightedSum</span><span class="p">):</span>
</span><span id="L-2139"><a href="#L-2139"><span class="linenos">2139</span></a>            <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">(),</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficients</span><span class="p">()):</span>
</span><span id="L-2140"><a href="#L-2140"><span class="linenos">2140</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">c</span><span class="p">))</span>
</span><span id="L-2141"><a href="#L-2141"><span class="linenos">2141</span></a>            <span class="n">value</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="L-2142"><a href="#L-2142"><span class="linenos">2142</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="L-2143"><a href="#L-2143"><span class="linenos">2143</span></a>            <span class="n">value</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">solution</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="L-2144"><a href="#L-2144"><span class="linenos">2144</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="L-2145"><a href="#L-2145"><span class="linenos">2145</span></a>            <span class="n">value</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">solution</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()</span><span class="o">.</span><span class="n">Index</span><span class="p">()])</span>
</span><span id="L-2146"><a href="#L-2146"><span class="linenos">2146</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2147"><a href="#L-2147"><span class="linenos">2147</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cannot interpret </span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="s1"> as a linear expression.&#39;</span><span class="p">)</span>
</span><span id="L-2148"><a href="#L-2148"><span class="linenos">2148</span></a>
</span><span id="L-2149"><a href="#L-2149"><span class="linenos">2149</span></a>    <span class="k">return</span> <span class="n">value</span>
</span><span id="L-2150"><a href="#L-2150"><span class="linenos">2150</span></a>
</span><span id="L-2151"><a href="#L-2151"><span class="linenos">2151</span></a>
</span><span id="L-2152"><a href="#L-2152"><span class="linenos">2152</span></a><span class="k">def</span> <span class="nf">EvaluateBooleanExpression</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">solution</span><span class="p">):</span>
</span><span id="L-2153"><a href="#L-2153"><span class="linenos">2153</span></a>    <span class="sd">&quot;&quot;&quot;Evaluate a boolean expression against a solution.&quot;&quot;&quot;</span>
</span><span id="L-2154"><a href="#L-2154"><span class="linenos">2154</span></a>    <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">literal</span><span class="p">):</span>
</span><span id="L-2155"><a href="#L-2155"><span class="linenos">2155</span></a>        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">literal</span><span class="p">)</span>
</span><span id="L-2156"><a href="#L-2156"><span class="linenos">2156</span></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span>
</span><span id="L-2157"><a href="#L-2157"><span class="linenos">2157</span></a>                                                   <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="L-2158"><a href="#L-2158"><span class="linenos">2158</span></a>        <span class="n">index</span> <span class="o">=</span> <span class="n">literal</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="L-2159"><a href="#L-2159"><span class="linenos">2159</span></a>        <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-2160"><a href="#L-2160"><span class="linenos">2160</span></a>            <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
</span><span id="L-2161"><a href="#L-2161"><span class="linenos">2161</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2162"><a href="#L-2162"><span class="linenos">2162</span></a>            <span class="k">return</span> <span class="ow">not</span> <span class="n">solution</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="o">-</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="L-2163"><a href="#L-2163"><span class="linenos">2163</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2164"><a href="#L-2164"><span class="linenos">2164</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cannot interpret </span><span class="si">{</span><span class="n">literal</span><span class="si">}</span><span class="s1"> as a boolean expression.&#39;</span><span class="p">)</span>
</span><span id="L-2165"><a href="#L-2165"><span class="linenos">2165</span></a>
</span><span id="L-2166"><a href="#L-2166"><span class="linenos">2166</span></a>
</span><span id="L-2167"><a href="#L-2167"><span class="linenos">2167</span></a><span class="k">class</span> <span class="nc">CpSolver</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-2168"><a href="#L-2168"><span class="linenos">2168</span></a>    <span class="sd">&quot;&quot;&quot;Main solver class.</span>
</span><span id="L-2169"><a href="#L-2169"><span class="linenos">2169</span></a>
</span><span id="L-2170"><a href="#L-2170"><span class="linenos">2170</span></a><span class="sd">  The purpose of this class is to search for a solution to the model provided</span>
</span><span id="L-2171"><a href="#L-2171"><span class="linenos">2171</span></a><span class="sd">  to the Solve() method.</span>
</span><span id="L-2172"><a href="#L-2172"><span class="linenos">2172</span></a>
</span><span id="L-2173"><a href="#L-2173"><span class="linenos">2173</span></a><span class="sd">  Once Solve() is called, this class allows inspecting the solution found</span>
</span><span id="L-2174"><a href="#L-2174"><span class="linenos">2174</span></a><span class="sd">  with the Value() and BooleanValue() methods, as well as general statistics</span>
</span><span id="L-2175"><a href="#L-2175"><span class="linenos">2175</span></a><span class="sd">  about the solve procedure.</span>
</span><span id="L-2176"><a href="#L-2176"><span class="linenos">2176</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="L-2177"><a href="#L-2177"><span class="linenos">2177</span></a>
</span><span id="L-2178"><a href="#L-2178"><span class="linenos">2178</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2179"><a href="#L-2179"><span class="linenos">2179</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">:</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpSolverResponse</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2180"><a href="#L-2180"><span class="linenos">2180</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="n">sat_parameters_pb2</span><span class="o">.</span><span class="n">SatParameters</span><span class="p">()</span>
</span><span id="L-2181"><a href="#L-2181"><span class="linenos">2181</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_callback</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2182"><a href="#L-2182"><span class="linenos">2182</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solve_wrapper</span><span class="p">:</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolveWrapper</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2183"><a href="#L-2183"><span class="linenos">2183</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span id="L-2184"><a href="#L-2184"><span class="linenos">2184</span></a>
</span><span id="L-2185"><a href="#L-2185"><span class="linenos">2185</span></a>    <span class="k">def</span> <span class="nf">Solve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">solution_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-2186"><a href="#L-2186"><span class="linenos">2186</span></a>        <span class="sd">&quot;&quot;&quot;Solves a problem and passes each solution to the callback if not null.&quot;&quot;&quot;</span>
</span><span id="L-2187"><a href="#L-2187"><span class="linenos">2187</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lock</span><span class="p">:</span>
</span><span id="L-2188"><a href="#L-2188"><span class="linenos">2188</span></a>            <span class="n">solve_wrapper</span> <span class="o">=</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolveWrapper</span><span class="p">()</span>
</span><span id="L-2189"><a href="#L-2189"><span class="linenos">2189</span></a>
</span><span id="L-2190"><a href="#L-2190"><span class="linenos">2190</span></a>        <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolveWrapper</span><span class="o">.</span><span class="n">SetSerializedParameters</span><span class="p">(</span>
</span><span id="L-2191"><a href="#L-2191"><span class="linenos">2191</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">(),</span> <span class="n">solve_wrapper</span><span class="p">)</span>
</span><span id="L-2192"><a href="#L-2192"><span class="linenos">2192</span></a>        <span class="k">if</span> <span class="n">solution_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2193"><a href="#L-2193"><span class="linenos">2193</span></a>            <span class="n">solve_wrapper</span><span class="o">.</span><span class="n">AddSolutionCallback</span><span class="p">(</span><span class="n">solution_callback</span><span class="p">)</span>
</span><span id="L-2194"><a href="#L-2194"><span class="linenos">2194</span></a>
</span><span id="L-2195"><a href="#L-2195"><span class="linenos">2195</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2196"><a href="#L-2196"><span class="linenos">2196</span></a>            <span class="n">solve_wrapper</span><span class="o">.</span><span class="n">AddLogCallback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_callback</span><span class="p">)</span>
</span><span id="L-2197"><a href="#L-2197"><span class="linenos">2197</span></a>
</span><span id="L-2198"><a href="#L-2198"><span class="linenos">2198</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpSolverResponse</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
</span><span id="L-2199"><a href="#L-2199"><span class="linenos">2199</span></a>            <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolveWrapper</span><span class="o">.</span><span class="n">SerializedSolve</span><span class="p">(</span>
</span><span id="L-2200"><a href="#L-2200"><span class="linenos">2200</span></a>                <span class="n">model</span><span class="o">.</span><span class="n">Proto</span><span class="p">()</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">(),</span> <span class="n">solve_wrapper</span><span class="p">))</span>
</span><span id="L-2201"><a href="#L-2201"><span class="linenos">2201</span></a>
</span><span id="L-2202"><a href="#L-2202"><span class="linenos">2202</span></a>        <span class="k">if</span> <span class="n">solution_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2203"><a href="#L-2203"><span class="linenos">2203</span></a>            <span class="n">solve_wrapper</span><span class="o">.</span><span class="n">ClearSolutionCallback</span><span class="p">(</span><span class="n">solution_callback</span><span class="p">)</span>
</span><span id="L-2204"><a href="#L-2204"><span class="linenos">2204</span></a>
</span><span id="L-2205"><a href="#L-2205"><span class="linenos">2205</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lock</span><span class="p">:</span>
</span><span id="L-2206"><a href="#L-2206"><span class="linenos">2206</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__solve_wrapper</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-2207"><a href="#L-2207"><span class="linenos">2207</span></a>
</span><span id="L-2208"><a href="#L-2208"><span class="linenos">2208</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">status</span>
</span><span id="L-2209"><a href="#L-2209"><span class="linenos">2209</span></a>
</span><span id="L-2210"><a href="#L-2210"><span class="linenos">2210</span></a>    <span class="k">def</span> <span class="nf">SolveWithSolutionCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
</span><span id="L-2211"><a href="#L-2211"><span class="linenos">2211</span></a>        <span class="sd">&quot;&quot;&quot;DEPRECATED Use Solve() with the callback argument.&quot;&quot;&quot;</span>
</span><span id="L-2212"><a href="#L-2212"><span class="linenos">2212</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-2213"><a href="#L-2213"><span class="linenos">2213</span></a>            <span class="s1">&#39;SolveWithSolutionCallback is deprecated; use Solve() with&#39;</span> <span class="o">+</span>
</span><span id="L-2214"><a href="#L-2214"><span class="linenos">2214</span></a>            <span class="s1">&#39;the callback argument.&#39;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
</span><span id="L-2215"><a href="#L-2215"><span class="linenos">2215</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Solve</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</span><span id="L-2216"><a href="#L-2216"><span class="linenos">2216</span></a>
</span><span id="L-2217"><a href="#L-2217"><span class="linenos">2217</span></a>    <span class="k">def</span> <span class="nf">SearchForAllSolutions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
</span><span id="L-2218"><a href="#L-2218"><span class="linenos">2218</span></a>        <span class="sd">&quot;&quot;&quot;DEPRECATED Use Solve() with the right parameter.</span>
</span><span id="L-2219"><a href="#L-2219"><span class="linenos">2219</span></a>
</span><span id="L-2220"><a href="#L-2220"><span class="linenos">2220</span></a><span class="sd">    Search for all solutions of a satisfiability problem.</span>
</span><span id="L-2221"><a href="#L-2221"><span class="linenos">2221</span></a>
</span><span id="L-2222"><a href="#L-2222"><span class="linenos">2222</span></a><span class="sd">    This method searches for all feasible solutions of a given model.</span>
</span><span id="L-2223"><a href="#L-2223"><span class="linenos">2223</span></a><span class="sd">    Then it feeds the solution to the callback.</span>
</span><span id="L-2224"><a href="#L-2224"><span class="linenos">2224</span></a>
</span><span id="L-2225"><a href="#L-2225"><span class="linenos">2225</span></a><span class="sd">    Note that the model cannot contain an objective.</span>
</span><span id="L-2226"><a href="#L-2226"><span class="linenos">2226</span></a>
</span><span id="L-2227"><a href="#L-2227"><span class="linenos">2227</span></a><span class="sd">    Args:</span>
</span><span id="L-2228"><a href="#L-2228"><span class="linenos">2228</span></a><span class="sd">      model: The model to solve.</span>
</span><span id="L-2229"><a href="#L-2229"><span class="linenos">2229</span></a><span class="sd">      callback: The callback that will be called at each solution.</span>
</span><span id="L-2230"><a href="#L-2230"><span class="linenos">2230</span></a>
</span><span id="L-2231"><a href="#L-2231"><span class="linenos">2231</span></a><span class="sd">    Returns:</span>
</span><span id="L-2232"><a href="#L-2232"><span class="linenos">2232</span></a><span class="sd">      The status of the solve:</span>
</span><span id="L-2233"><a href="#L-2233"><span class="linenos">2233</span></a>
</span><span id="L-2234"><a href="#L-2234"><span class="linenos">2234</span></a><span class="sd">      * *FEASIBLE* if some solutions have been found</span>
</span><span id="L-2235"><a href="#L-2235"><span class="linenos">2235</span></a><span class="sd">      * *INFEASIBLE* if the solver has proved there are no solution</span>
</span><span id="L-2236"><a href="#L-2236"><span class="linenos">2236</span></a><span class="sd">      * *OPTIMAL* if all solutions have been found</span>
</span><span id="L-2237"><a href="#L-2237"><span class="linenos">2237</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2238"><a href="#L-2238"><span class="linenos">2238</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="L-2239"><a href="#L-2239"><span class="linenos">2239</span></a>            <span class="s1">&#39;SearchForAllSolutions is deprecated; use Solve() with&#39;</span> <span class="o">+</span>
</span><span id="L-2240"><a href="#L-2240"><span class="linenos">2240</span></a>            <span class="s1">&#39;enumerate_all_solutions = True.&#39;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
</span><span id="L-2241"><a href="#L-2241"><span class="linenos">2241</span></a>        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">HasObjective</span><span class="p">():</span>
</span><span id="L-2242"><a href="#L-2242"><span class="linenos">2242</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search for all solutions is only defined on &#39;</span>
</span><span id="L-2243"><a href="#L-2243"><span class="linenos">2243</span></a>                            <span class="s1">&#39;satisfiability problems&#39;</span><span class="p">)</span>
</span><span id="L-2244"><a href="#L-2244"><span class="linenos">2244</span></a>        <span class="c1"># Store old parameter.</span>
</span><span id="L-2245"><a href="#L-2245"><span class="linenos">2245</span></a>        <span class="n">enumerate_all</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">enumerate_all_solutions</span>
</span><span id="L-2246"><a href="#L-2246"><span class="linenos">2246</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">enumerate_all_solutions</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2247"><a href="#L-2247"><span class="linenos">2247</span></a>
</span><span id="L-2248"><a href="#L-2248"><span class="linenos">2248</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">Solve</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</span><span id="L-2249"><a href="#L-2249"><span class="linenos">2249</span></a>
</span><span id="L-2250"><a href="#L-2250"><span class="linenos">2250</span></a>        <span class="c1"># Restore parameter.</span>
</span><span id="L-2251"><a href="#L-2251"><span class="linenos">2251</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">enumerate_all_solutions</span> <span class="o">=</span> <span class="n">enumerate_all</span>
</span><span id="L-2252"><a href="#L-2252"><span class="linenos">2252</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">status</span>
</span><span id="L-2253"><a href="#L-2253"><span class="linenos">2253</span></a>
</span><span id="L-2254"><a href="#L-2254"><span class="linenos">2254</span></a>    <span class="k">def</span> <span class="nf">StopSearch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2255"><a href="#L-2255"><span class="linenos">2255</span></a>        <span class="sd">&quot;&quot;&quot;Stops the current search asynchronously.&quot;&quot;&quot;</span>
</span><span id="L-2256"><a href="#L-2256"><span class="linenos">2256</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lock</span><span class="p">:</span>
</span><span id="L-2257"><a href="#L-2257"><span class="linenos">2257</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solve_wrapper</span><span class="p">:</span>
</span><span id="L-2258"><a href="#L-2258"><span class="linenos">2258</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__solve_wrapper</span><span class="o">.</span><span class="n">StopSearch</span><span class="p">()</span>
</span><span id="L-2259"><a href="#L-2259"><span class="linenos">2259</span></a>
</span><span id="L-2260"><a href="#L-2260"><span class="linenos">2260</span></a>    <span class="k">def</span> <span class="nf">Value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">):</span>
</span><span id="L-2261"><a href="#L-2261"><span class="linenos">2261</span></a>        <span class="sd">&quot;&quot;&quot;Returns the value of a linear expression after solve.&quot;&quot;&quot;</span>
</span><span id="L-2262"><a href="#L-2262"><span class="linenos">2262</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">:</span>
</span><span id="L-2263"><a href="#L-2263"><span class="linenos">2263</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Solve() has not be called.&#39;</span><span class="p">)</span>
</span><span id="L-2264"><a href="#L-2264"><span class="linenos">2264</span></a>        <span class="k">return</span> <span class="n">EvaluateLinearExpr</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">)</span>
</span><span id="L-2265"><a href="#L-2265"><span class="linenos">2265</span></a>
</span><span id="L-2266"><a href="#L-2266"><span class="linenos">2266</span></a>    <span class="k">def</span> <span class="nf">BooleanValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">literal</span><span class="p">):</span>
</span><span id="L-2267"><a href="#L-2267"><span class="linenos">2267</span></a>        <span class="sd">&quot;&quot;&quot;Returns the boolean value of a literal after solve.&quot;&quot;&quot;</span>
</span><span id="L-2268"><a href="#L-2268"><span class="linenos">2268</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">:</span>
</span><span id="L-2269"><a href="#L-2269"><span class="linenos">2269</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Solve() has not be called.&#39;</span><span class="p">)</span>
</span><span id="L-2270"><a href="#L-2270"><span class="linenos">2270</span></a>        <span class="k">return</span> <span class="n">EvaluateBooleanExpression</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">)</span>
</span><span id="L-2271"><a href="#L-2271"><span class="linenos">2271</span></a>
</span><span id="L-2272"><a href="#L-2272"><span class="linenos">2272</span></a>    <span class="k">def</span> <span class="nf">ObjectiveValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2273"><a href="#L-2273"><span class="linenos">2273</span></a>        <span class="sd">&quot;&quot;&quot;Returns the value of the objective after solve.&quot;&quot;&quot;</span>
</span><span id="L-2274"><a href="#L-2274"><span class="linenos">2274</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">objective_value</span>
</span><span id="L-2275"><a href="#L-2275"><span class="linenos">2275</span></a>
</span><span id="L-2276"><a href="#L-2276"><span class="linenos">2276</span></a>    <span class="k">def</span> <span class="nf">BestObjectiveBound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2277"><a href="#L-2277"><span class="linenos">2277</span></a>        <span class="sd">&quot;&quot;&quot;Returns the best lower (upper) bound found when min(max)imizing.&quot;&quot;&quot;</span>
</span><span id="L-2278"><a href="#L-2278"><span class="linenos">2278</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">best_objective_bound</span>
</span><span id="L-2279"><a href="#L-2279"><span class="linenos">2279</span></a>
</span><span id="L-2280"><a href="#L-2280"><span class="linenos">2280</span></a>    <span class="k">def</span> <span class="nf">StatusName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-2281"><a href="#L-2281"><span class="linenos">2281</span></a>        <span class="sd">&quot;&quot;&quot;Returns the name of the status returned by Solve().&quot;&quot;&quot;</span>
</span><span id="L-2282"><a href="#L-2282"><span class="linenos">2282</span></a>        <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2283"><a href="#L-2283"><span class="linenos">2283</span></a>            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">status</span>
</span><span id="L-2284"><a href="#L-2284"><span class="linenos">2284</span></a>        <span class="k">return</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpSolverStatus</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
</span><span id="L-2285"><a href="#L-2285"><span class="linenos">2285</span></a>
</span><span id="L-2286"><a href="#L-2286"><span class="linenos">2286</span></a>    <span class="k">def</span> <span class="nf">NumBooleans</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2287"><a href="#L-2287"><span class="linenos">2287</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of boolean variables managed by the SAT solver.&quot;&quot;&quot;</span>
</span><span id="L-2288"><a href="#L-2288"><span class="linenos">2288</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">num_booleans</span>
</span><span id="L-2289"><a href="#L-2289"><span class="linenos">2289</span></a>
</span><span id="L-2290"><a href="#L-2290"><span class="linenos">2290</span></a>    <span class="k">def</span> <span class="nf">NumConflicts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2291"><a href="#L-2291"><span class="linenos">2291</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of conflicts since the creation of the solver.&quot;&quot;&quot;</span>
</span><span id="L-2292"><a href="#L-2292"><span class="linenos">2292</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">num_conflicts</span>
</span><span id="L-2293"><a href="#L-2293"><span class="linenos">2293</span></a>
</span><span id="L-2294"><a href="#L-2294"><span class="linenos">2294</span></a>    <span class="k">def</span> <span class="nf">NumBranches</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2295"><a href="#L-2295"><span class="linenos">2295</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of search branches explored by the solver.&quot;&quot;&quot;</span>
</span><span id="L-2296"><a href="#L-2296"><span class="linenos">2296</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">num_branches</span>
</span><span id="L-2297"><a href="#L-2297"><span class="linenos">2297</span></a>
</span><span id="L-2298"><a href="#L-2298"><span class="linenos">2298</span></a>    <span class="k">def</span> <span class="nf">WallTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2299"><a href="#L-2299"><span class="linenos">2299</span></a>        <span class="sd">&quot;&quot;&quot;Returns the wall time in seconds since the creation of the solver.&quot;&quot;&quot;</span>
</span><span id="L-2300"><a href="#L-2300"><span class="linenos">2300</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">wall_time</span>
</span><span id="L-2301"><a href="#L-2301"><span class="linenos">2301</span></a>
</span><span id="L-2302"><a href="#L-2302"><span class="linenos">2302</span></a>    <span class="k">def</span> <span class="nf">UserTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2303"><a href="#L-2303"><span class="linenos">2303</span></a>        <span class="sd">&quot;&quot;&quot;Returns the user time in seconds since the creation of the solver.&quot;&quot;&quot;</span>
</span><span id="L-2304"><a href="#L-2304"><span class="linenos">2304</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">user_time</span>
</span><span id="L-2305"><a href="#L-2305"><span class="linenos">2305</span></a>
</span><span id="L-2306"><a href="#L-2306"><span class="linenos">2306</span></a>    <span class="k">def</span> <span class="nf">ResponseStats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2307"><a href="#L-2307"><span class="linenos">2307</span></a>        <span class="sd">&quot;&quot;&quot;Returns some statistics on the solution found as a string.&quot;&quot;&quot;</span>
</span><span id="L-2308"><a href="#L-2308"><span class="linenos">2308</span></a>        <span class="k">return</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">CpSatHelper</span><span class="o">.</span><span class="n">SerializedSolverResponseStats</span><span class="p">(</span>
</span><span id="L-2309"><a href="#L-2309"><span class="linenos">2309</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">())</span>
</span><span id="L-2310"><a href="#L-2310"><span class="linenos">2310</span></a>
</span><span id="L-2311"><a href="#L-2311"><span class="linenos">2311</span></a>    <span class="k">def</span> <span class="nf">ResponseProto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2312"><a href="#L-2312"><span class="linenos">2312</span></a>        <span class="sd">&quot;&quot;&quot;Returns the response object.&quot;&quot;&quot;</span>
</span><span id="L-2313"><a href="#L-2313"><span class="linenos">2313</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span>
</span><span id="L-2314"><a href="#L-2314"><span class="linenos">2314</span></a>
</span><span id="L-2315"><a href="#L-2315"><span class="linenos">2315</span></a>    <span class="k">def</span> <span class="nf">SufficientAssumptionsForInfeasibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2316"><a href="#L-2316"><span class="linenos">2316</span></a>        <span class="sd">&quot;&quot;&quot;Returns the indices of the infeasible assumptions.&quot;&quot;&quot;</span>
</span><span id="L-2317"><a href="#L-2317"><span class="linenos">2317</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">sufficient_assumptions_for_infeasibility</span>
</span><span id="L-2318"><a href="#L-2318"><span class="linenos">2318</span></a>
</span><span id="L-2319"><a href="#L-2319"><span class="linenos">2319</span></a>    <span class="k">def</span> <span class="nf">SolutionInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2320"><a href="#L-2320"><span class="linenos">2320</span></a>        <span class="sd">&quot;&quot;&quot;Returns some information on the solve process.</span>
</span><span id="L-2321"><a href="#L-2321"><span class="linenos">2321</span></a>
</span><span id="L-2322"><a href="#L-2322"><span class="linenos">2322</span></a><span class="sd">    Returns some information on how the solution was found, or the reason</span>
</span><span id="L-2323"><a href="#L-2323"><span class="linenos">2323</span></a><span class="sd">    why the model or the parameters are invalid.</span>
</span><span id="L-2324"><a href="#L-2324"><span class="linenos">2324</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2325"><a href="#L-2325"><span class="linenos">2325</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">solution_info</span>
</span><span id="L-2326"><a href="#L-2326"><span class="linenos">2326</span></a>
</span><span id="L-2327"><a href="#L-2327"><span class="linenos">2327</span></a>
</span><span id="L-2328"><a href="#L-2328"><span class="linenos">2328</span></a><span class="k">class</span> <span class="nc">CpSolverSolutionCallback</span><span class="p">(</span><span class="n">swig_helper</span><span class="o">.</span><span class="n">SolutionCallback</span><span class="p">):</span>
</span><span id="L-2329"><a href="#L-2329"><span class="linenos">2329</span></a>    <span class="sd">&quot;&quot;&quot;Solution callback.</span>
</span><span id="L-2330"><a href="#L-2330"><span class="linenos">2330</span></a>
</span><span id="L-2331"><a href="#L-2331"><span class="linenos">2331</span></a><span class="sd">  This class implements a callback that will be called at each new solution</span>
</span><span id="L-2332"><a href="#L-2332"><span class="linenos">2332</span></a><span class="sd">  found during search.</span>
</span><span id="L-2333"><a href="#L-2333"><span class="linenos">2333</span></a>
</span><span id="L-2334"><a href="#L-2334"><span class="linenos">2334</span></a><span class="sd">  The method OnSolutionCallback() will be called by the solver, and must be</span>
</span><span id="L-2335"><a href="#L-2335"><span class="linenos">2335</span></a><span class="sd">  implemented. The current solution can be queried using the BooleanValue()</span>
</span><span id="L-2336"><a href="#L-2336"><span class="linenos">2336</span></a><span class="sd">  and Value() methods.</span>
</span><span id="L-2337"><a href="#L-2337"><span class="linenos">2337</span></a>
</span><span id="L-2338"><a href="#L-2338"><span class="linenos">2338</span></a><span class="sd">  It inherits the following methods from its base class:</span>
</span><span id="L-2339"><a href="#L-2339"><span class="linenos">2339</span></a>
</span><span id="L-2340"><a href="#L-2340"><span class="linenos">2340</span></a><span class="sd">  * `ObjectiveValue(self)`</span>
</span><span id="L-2341"><a href="#L-2341"><span class="linenos">2341</span></a><span class="sd">  * `BestObjectiveBound(self)`</span>
</span><span id="L-2342"><a href="#L-2342"><span class="linenos">2342</span></a><span class="sd">  * `NumBooleans(self)`</span>
</span><span id="L-2343"><a href="#L-2343"><span class="linenos">2343</span></a><span class="sd">  * `NumConflicts(self)`</span>
</span><span id="L-2344"><a href="#L-2344"><span class="linenos">2344</span></a><span class="sd">  * `NumBranches(self)`</span>
</span><span id="L-2345"><a href="#L-2345"><span class="linenos">2345</span></a><span class="sd">  * `WallTime(self)`</span>
</span><span id="L-2346"><a href="#L-2346"><span class="linenos">2346</span></a><span class="sd">  * `UserTime(self)`</span>
</span><span id="L-2347"><a href="#L-2347"><span class="linenos">2347</span></a>
</span><span id="L-2348"><a href="#L-2348"><span class="linenos">2348</span></a><span class="sd">  These methods returns the same information as their counterpart in the</span>
</span><span id="L-2349"><a href="#L-2349"><span class="linenos">2349</span></a><span class="sd">  `CpSolver` class.</span>
</span><span id="L-2350"><a href="#L-2350"><span class="linenos">2350</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="L-2351"><a href="#L-2351"><span class="linenos">2351</span></a>
</span><span id="L-2352"><a href="#L-2352"><span class="linenos">2352</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2353"><a href="#L-2353"><span class="linenos">2353</span></a>        <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolutionCallback</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-2354"><a href="#L-2354"><span class="linenos">2354</span></a>
</span><span id="L-2355"><a href="#L-2355"><span class="linenos">2355</span></a>    <span class="k">def</span> <span class="nf">OnSolutionCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2356"><a href="#L-2356"><span class="linenos">2356</span></a>        <span class="sd">&quot;&quot;&quot;Proxy for the same method in snake case.&quot;&quot;&quot;</span>
</span><span id="L-2357"><a href="#L-2357"><span class="linenos">2357</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_solution_callback</span><span class="p">()</span>
</span><span id="L-2358"><a href="#L-2358"><span class="linenos">2358</span></a>
</span><span id="L-2359"><a href="#L-2359"><span class="linenos">2359</span></a>    <span class="k">def</span> <span class="nf">BooleanValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lit</span><span class="p">):</span>
</span><span id="L-2360"><a href="#L-2360"><span class="linenos">2360</span></a>        <span class="sd">&quot;&quot;&quot;Returns the boolean value of a boolean literal.</span>
</span><span id="L-2361"><a href="#L-2361"><span class="linenos">2361</span></a>
</span><span id="L-2362"><a href="#L-2362"><span class="linenos">2362</span></a><span class="sd">    Args:</span>
</span><span id="L-2363"><a href="#L-2363"><span class="linenos">2363</span></a><span class="sd">        lit: A boolean variable or its negation.</span>
</span><span id="L-2364"><a href="#L-2364"><span class="linenos">2364</span></a>
</span><span id="L-2365"><a href="#L-2365"><span class="linenos">2365</span></a><span class="sd">    Returns:</span>
</span><span id="L-2366"><a href="#L-2366"><span class="linenos">2366</span></a><span class="sd">        The Boolean value of the literal in the solution.</span>
</span><span id="L-2367"><a href="#L-2367"><span class="linenos">2367</span></a>
</span><span id="L-2368"><a href="#L-2368"><span class="linenos">2368</span></a><span class="sd">    Raises:</span>
</span><span id="L-2369"><a href="#L-2369"><span class="linenos">2369</span></a><span class="sd">        RuntimeError: if `lit` is not a boolean variable or its negation.</span>
</span><span id="L-2370"><a href="#L-2370"><span class="linenos">2370</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2371"><a href="#L-2371"><span class="linenos">2371</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">HasResponse</span><span class="p">():</span>
</span><span id="L-2372"><a href="#L-2372"><span class="linenos">2372</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Solve() has not be called.&#39;</span><span class="p">)</span>
</span><span id="L-2373"><a href="#L-2373"><span class="linenos">2373</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">lit</span><span class="p">):</span>
</span><span id="L-2374"><a href="#L-2374"><span class="linenos">2374</span></a>            <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span>
</span><span id="L-2375"><a href="#L-2375"><span class="linenos">2375</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lit</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lit</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="L-2376"><a href="#L-2376"><span class="linenos">2376</span></a>            <span class="n">index</span> <span class="o">=</span> <span class="n">lit</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="L-2377"><a href="#L-2377"><span class="linenos">2377</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">SolutionBooleanValue</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</span><span id="L-2378"><a href="#L-2378"><span class="linenos">2378</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-2379"><a href="#L-2379"><span class="linenos">2379</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cannot interpret </span><span class="si">{</span><span class="n">lit</span><span class="si">}</span><span class="s1"> as a boolean expression.&#39;</span><span class="p">)</span>
</span><span id="L-2380"><a href="#L-2380"><span class="linenos">2380</span></a>
</span><span id="L-2381"><a href="#L-2381"><span class="linenos">2381</span></a>    <span class="k">def</span> <span class="nf">Value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">):</span>
</span><span id="L-2382"><a href="#L-2382"><span class="linenos">2382</span></a>        <span class="sd">&quot;&quot;&quot;Evaluates an linear expression in the current solution.</span>
</span><span id="L-2383"><a href="#L-2383"><span class="linenos">2383</span></a>
</span><span id="L-2384"><a href="#L-2384"><span class="linenos">2384</span></a><span class="sd">    Args:</span>
</span><span id="L-2385"><a href="#L-2385"><span class="linenos">2385</span></a><span class="sd">        expression: a linear expression of the model.</span>
</span><span id="L-2386"><a href="#L-2386"><span class="linenos">2386</span></a>
</span><span id="L-2387"><a href="#L-2387"><span class="linenos">2387</span></a><span class="sd">    Returns:</span>
</span><span id="L-2388"><a href="#L-2388"><span class="linenos">2388</span></a><span class="sd">        An integer value equal to the evaluation of the linear expression</span>
</span><span id="L-2389"><a href="#L-2389"><span class="linenos">2389</span></a><span class="sd">        against the current solution.</span>
</span><span id="L-2390"><a href="#L-2390"><span class="linenos">2390</span></a>
</span><span id="L-2391"><a href="#L-2391"><span class="linenos">2391</span></a><span class="sd">    Raises:</span>
</span><span id="L-2392"><a href="#L-2392"><span class="linenos">2392</span></a><span class="sd">        RuntimeError: if &#39;expression&#39; is not a LinearExpr.</span>
</span><span id="L-2393"><a href="#L-2393"><span class="linenos">2393</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2394"><a href="#L-2394"><span class="linenos">2394</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">HasResponse</span><span class="p">():</span>
</span><span id="L-2395"><a href="#L-2395"><span class="linenos">2395</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Solve() has not be called.&#39;</span><span class="p">)</span>
</span><span id="L-2396"><a href="#L-2396"><span class="linenos">2396</span></a>
</span><span id="L-2397"><a href="#L-2397"><span class="linenos">2397</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-2398"><a href="#L-2398"><span class="linenos">2398</span></a>        <span class="n">to_process</span> <span class="o">=</span> <span class="p">[(</span><span class="n">expression</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</span><span id="L-2399"><a href="#L-2399"><span class="linenos">2399</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>
</span><span id="L-2400"><a href="#L-2400"><span class="linenos">2400</span></a>            <span class="n">expr</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="L-2401"><a href="#L-2401"><span class="linenos">2401</span></a>            <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
</span><span id="L-2402"><a href="#L-2402"><span class="linenos">2402</span></a>                <span class="n">value</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="L-2403"><a href="#L-2403"><span class="linenos">2403</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">):</span>
</span><span id="L-2404"><a href="#L-2404"><span class="linenos">2404</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-2405"><a href="#L-2405"><span class="linenos">2405</span></a>                    <span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()))</span>
</span><span id="L-2406"><a href="#L-2406"><span class="linenos">2406</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_Sum</span><span class="p">):</span>
</span><span id="L-2407"><a href="#L-2407"><span class="linenos">2407</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Left</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="L-2408"><a href="#L-2408"><span class="linenos">2408</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Right</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="L-2409"><a href="#L-2409"><span class="linenos">2409</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_SumArray</span><span class="p">):</span>
</span><span id="L-2410"><a href="#L-2410"><span class="linenos">2410</span></a>                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">():</span>
</span><span id="L-2411"><a href="#L-2411"><span class="linenos">2411</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="L-2412"><a href="#L-2412"><span class="linenos">2412</span></a>                    <span class="n">value</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="L-2413"><a href="#L-2413"><span class="linenos">2413</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_WeightedSum</span><span class="p">):</span>
</span><span id="L-2414"><a href="#L-2414"><span class="linenos">2414</span></a>                <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">(),</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficients</span><span class="p">()):</span>
</span><span id="L-2415"><a href="#L-2415"><span class="linenos">2415</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">c</span><span class="p">))</span>
</span><span id="L-2416"><a href="#L-2416"><span class="linenos">2416</span></a>                <span class="n">value</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="L-2417"><a href="#L-2417"><span class="linenos">2417</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="L-2418"><a href="#L-2418"><span class="linenos">2418</span></a>                <span class="n">value</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">SolutionIntegerValue</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="L-2419"><a href="#L-2419"><span class="linenos">2419</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="L-2420"><a href="#L-2420"><span class="linenos">2420</span></a>                <span class="n">value</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span>
</span><span id="L-2421"><a href="#L-2421"><span class="linenos">2421</span></a>                                  <span class="bp">self</span><span class="o">.</span><span class="n">SolutionIntegerValue</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()</span><span class="o">.</span><span class="n">Index</span><span class="p">()))</span>
</span><span id="L-2422"><a href="#L-2422"><span class="linenos">2422</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-2423"><a href="#L-2423"><span class="linenos">2423</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-2424"><a href="#L-2424"><span class="linenos">2424</span></a>                    <span class="sa">f</span><span class="s1">&#39;Cannot interpret </span><span class="si">{</span><span class="n">expression</span><span class="si">}</span><span class="s1"> as a linear expression.&#39;</span><span class="p">)</span>
</span><span id="L-2425"><a href="#L-2425"><span class="linenos">2425</span></a>
</span><span id="L-2426"><a href="#L-2426"><span class="linenos">2426</span></a>        <span class="k">return</span> <span class="n">value</span>
</span><span id="L-2427"><a href="#L-2427"><span class="linenos">2427</span></a>
</span><span id="L-2428"><a href="#L-2428"><span class="linenos">2428</span></a>    <span class="k">def</span> <span class="nf">Response</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2429"><a href="#L-2429"><span class="linenos">2429</span></a>        <span class="sd">&quot;&quot;&quot;Returns the current solution response.&quot;&quot;&quot;</span>
</span><span id="L-2430"><a href="#L-2430"><span class="linenos">2430</span></a>        <span class="k">return</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpSolverResponse</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
</span><span id="L-2431"><a href="#L-2431"><span class="linenos">2431</span></a>            <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolutionCallback</span><span class="o">.</span><span class="n">SerializedResponse</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="L-2432"><a href="#L-2432"><span class="linenos">2432</span></a>
</span><span id="L-2433"><a href="#L-2433"><span class="linenos">2433</span></a>
</span><span id="L-2434"><a href="#L-2434"><span class="linenos">2434</span></a><span class="k">class</span> <span class="nc">ObjectiveSolutionPrinter</span><span class="p">(</span><span class="n">CpSolverSolutionCallback</span><span class="p">):</span>
</span><span id="L-2435"><a href="#L-2435"><span class="linenos">2435</span></a>    <span class="sd">&quot;&quot;&quot;Display the objective value and time of intermediate solutions.&quot;&quot;&quot;</span>
</span><span id="L-2436"><a href="#L-2436"><span class="linenos">2436</span></a>
</span><span id="L-2437"><a href="#L-2437"><span class="linenos">2437</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2438"><a href="#L-2438"><span class="linenos">2438</span></a>        <span class="n">CpSolverSolutionCallback</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-2439"><a href="#L-2439"><span class="linenos">2439</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-2440"><a href="#L-2440"><span class="linenos">2440</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="L-2441"><a href="#L-2441"><span class="linenos">2441</span></a>
</span><span id="L-2442"><a href="#L-2442"><span class="linenos">2442</span></a>    <span class="k">def</span> <span class="nf">on_solution_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2443"><a href="#L-2443"><span class="linenos">2443</span></a>        <span class="sd">&quot;&quot;&quot;Called on each new solution.&quot;&quot;&quot;</span>
</span><span id="L-2444"><a href="#L-2444"><span class="linenos">2444</span></a>        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="L-2445"><a href="#L-2445"><span class="linenos">2445</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ObjectiveValue</span><span class="p">()</span>
</span><span id="L-2446"><a href="#L-2446"><span class="linenos">2446</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Solution </span><span class="si">%i</span><span class="s1">, time = </span><span class="si">%0.2f</span><span class="s1"> s, objective = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span>
</span><span id="L-2447"><a href="#L-2447"><span class="linenos">2447</span></a>              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span><span class="p">,</span> <span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
</span><span id="L-2448"><a href="#L-2448"><span class="linenos">2448</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-2449"><a href="#L-2449"><span class="linenos">2449</span></a>
</span><span id="L-2450"><a href="#L-2450"><span class="linenos">2450</span></a>    <span class="k">def</span> <span class="nf">solution_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2451"><a href="#L-2451"><span class="linenos">2451</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of solutions found.&quot;&quot;&quot;</span>
</span><span id="L-2452"><a href="#L-2452"><span class="linenos">2452</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span>
</span><span id="L-2453"><a href="#L-2453"><span class="linenos">2453</span></a>
</span><span id="L-2454"><a href="#L-2454"><span class="linenos">2454</span></a>
</span><span id="L-2455"><a href="#L-2455"><span class="linenos">2455</span></a><span class="k">class</span> <span class="nc">VarArrayAndObjectiveSolutionPrinter</span><span class="p">(</span><span class="n">CpSolverSolutionCallback</span><span class="p">):</span>
</span><span id="L-2456"><a href="#L-2456"><span class="linenos">2456</span></a>    <span class="sd">&quot;&quot;&quot;Print intermediate solutions (objective, variable values, time).&quot;&quot;&quot;</span>
</span><span id="L-2457"><a href="#L-2457"><span class="linenos">2457</span></a>
</span><span id="L-2458"><a href="#L-2458"><span class="linenos">2458</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
</span><span id="L-2459"><a href="#L-2459"><span class="linenos">2459</span></a>        <span class="n">CpSolverSolutionCallback</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-2460"><a href="#L-2460"><span class="linenos">2460</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__variables</span> <span class="o">=</span> <span class="n">variables</span>
</span><span id="L-2461"><a href="#L-2461"><span class="linenos">2461</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-2462"><a href="#L-2462"><span class="linenos">2462</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="L-2463"><a href="#L-2463"><span class="linenos">2463</span></a>
</span><span id="L-2464"><a href="#L-2464"><span class="linenos">2464</span></a>    <span class="k">def</span> <span class="nf">on_solution_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2465"><a href="#L-2465"><span class="linenos">2465</span></a>        <span class="sd">&quot;&quot;&quot;Called on each new solution.&quot;&quot;&quot;</span>
</span><span id="L-2466"><a href="#L-2466"><span class="linenos">2466</span></a>        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="L-2467"><a href="#L-2467"><span class="linenos">2467</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ObjectiveValue</span><span class="p">()</span>
</span><span id="L-2468"><a href="#L-2468"><span class="linenos">2468</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Solution </span><span class="si">%i</span><span class="s1">, time = </span><span class="si">%0.2f</span><span class="s1"> s, objective = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span>
</span><span id="L-2469"><a href="#L-2469"><span class="linenos">2469</span></a>              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span><span class="p">,</span> <span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
</span><span id="L-2470"><a href="#L-2470"><span class="linenos">2470</span></a>        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__variables</span><span class="p">:</span>
</span><span id="L-2471"><a href="#L-2471"><span class="linenos">2471</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%s</span><span class="s1"> = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">v</span><span class="p">)),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span id="L-2472"><a href="#L-2472"><span class="linenos">2472</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="L-2473"><a href="#L-2473"><span class="linenos">2473</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-2474"><a href="#L-2474"><span class="linenos">2474</span></a>
</span><span id="L-2475"><a href="#L-2475"><span class="linenos">2475</span></a>    <span class="k">def</span> <span class="nf">solution_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2476"><a href="#L-2476"><span class="linenos">2476</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of solutions found.&quot;&quot;&quot;</span>
</span><span id="L-2477"><a href="#L-2477"><span class="linenos">2477</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span>
</span><span id="L-2478"><a href="#L-2478"><span class="linenos">2478</span></a>
</span><span id="L-2479"><a href="#L-2479"><span class="linenos">2479</span></a>
</span><span id="L-2480"><a href="#L-2480"><span class="linenos">2480</span></a><span class="k">class</span> <span class="nc">VarArraySolutionPrinter</span><span class="p">(</span><span class="n">CpSolverSolutionCallback</span><span class="p">):</span>
</span><span id="L-2481"><a href="#L-2481"><span class="linenos">2481</span></a>    <span class="sd">&quot;&quot;&quot;Print intermediate solutions (variable values, time).&quot;&quot;&quot;</span>
</span><span id="L-2482"><a href="#L-2482"><span class="linenos">2482</span></a>
</span><span id="L-2483"><a href="#L-2483"><span class="linenos">2483</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
</span><span id="L-2484"><a href="#L-2484"><span class="linenos">2484</span></a>        <span class="n">CpSolverSolutionCallback</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-2485"><a href="#L-2485"><span class="linenos">2485</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__variables</span> <span class="o">=</span> <span class="n">variables</span>
</span><span id="L-2486"><a href="#L-2486"><span class="linenos">2486</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-2487"><a href="#L-2487"><span class="linenos">2487</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="L-2488"><a href="#L-2488"><span class="linenos">2488</span></a>
</span><span id="L-2489"><a href="#L-2489"><span class="linenos">2489</span></a>    <span class="k">def</span> <span class="nf">on_solution_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2490"><a href="#L-2490"><span class="linenos">2490</span></a>        <span class="sd">&quot;&quot;&quot;Called on each new solution.&quot;&quot;&quot;</span>
</span><span id="L-2491"><a href="#L-2491"><span class="linenos">2491</span></a>        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="L-2492"><a href="#L-2492"><span class="linenos">2492</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Solution </span><span class="si">%i</span><span class="s1">, time = </span><span class="si">%0.2f</span><span class="s1"> s&#39;</span> <span class="o">%</span>
</span><span id="L-2493"><a href="#L-2493"><span class="linenos">2493</span></a>              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span><span class="p">,</span> <span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span><span class="p">))</span>
</span><span id="L-2494"><a href="#L-2494"><span class="linenos">2494</span></a>        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__variables</span><span class="p">:</span>
</span><span id="L-2495"><a href="#L-2495"><span class="linenos">2495</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%s</span><span class="s1"> = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">v</span><span class="p">)),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span id="L-2496"><a href="#L-2496"><span class="linenos">2496</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="L-2497"><a href="#L-2497"><span class="linenos">2497</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-2498"><a href="#L-2498"><span class="linenos">2498</span></a>
</span><span id="L-2499"><a href="#L-2499"><span class="linenos">2499</span></a>    <span class="k">def</span> <span class="nf">solution_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2500"><a href="#L-2500"><span class="linenos">2500</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of solutions found.&quot;&quot;&quot;</span>
</span><span id="L-2501"><a href="#L-2501"><span class="linenos">2501</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span>
</span></pre></div>


            </section>
                <section id="DisplayBounds">
                            <input id="DisplayBounds-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">DisplayBounds</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">bounds</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="DisplayBounds-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#DisplayBounds"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="DisplayBounds-99"><a href="#DisplayBounds-99"><span class="linenos"> 99</span></a><span class="k">def</span> <span class="nf">DisplayBounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">):</span>
</span><span id="DisplayBounds-100"><a href="#DisplayBounds-100"><span class="linenos">100</span></a>    <span class="sd">&quot;&quot;&quot;Displays a flattened list of intervals.&quot;&quot;&quot;</span>
</span><span id="DisplayBounds-101"><a href="#DisplayBounds-101"><span class="linenos">101</span></a>    <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="DisplayBounds-102"><a href="#DisplayBounds-102"><span class="linenos">102</span></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">bounds</span><span class="p">),</span> <span class="mi">2</span><span class="p">):</span>
</span><span id="DisplayBounds-103"><a href="#DisplayBounds-103"><span class="linenos">103</span></a>        <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="DisplayBounds-104"><a href="#DisplayBounds-104"><span class="linenos">104</span></a>            <span class="n">out</span> <span class="o">+=</span> <span class="s1">&#39;, &#39;</span>
</span><span id="DisplayBounds-105"><a href="#DisplayBounds-105"><span class="linenos">105</span></a>        <span class="k">if</span> <span class="n">bounds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">bounds</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
</span><span id="DisplayBounds-106"><a href="#DisplayBounds-106"><span class="linenos">106</span></a>            <span class="n">out</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="DisplayBounds-107"><a href="#DisplayBounds-107"><span class="linenos">107</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="DisplayBounds-108"><a href="#DisplayBounds-108"><span class="linenos">108</span></a>            <span class="n">out</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;..&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="DisplayBounds-109"><a href="#DisplayBounds-109"><span class="linenos">109</span></a>    <span class="k">return</span> <span class="n">out</span>
</span></pre></div>


            <div class="docstring"><p>Displays a flattened list of intervals.</p>
</div>


                </section>
                <section id="ShortName">
                            <input id="ShortName-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ShortName</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">model</span>, </span><span class="param"><span class="n">i</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ShortName-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ShortName"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ShortName-112"><a href="#ShortName-112"><span class="linenos">112</span></a><span class="k">def</span> <span class="nf">ShortName</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
</span><span id="ShortName-113"><a href="#ShortName-113"><span class="linenos">113</span></a>    <span class="sd">&quot;&quot;&quot;Returns a short name of an integer variable, or its negation.&quot;&quot;&quot;</span>
</span><span id="ShortName-114"><a href="#ShortName-114"><span class="linenos">114</span></a>    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ShortName-115"><a href="#ShortName-115"><span class="linenos">115</span></a>        <span class="k">return</span> <span class="s1">&#39;Not(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">ShortName</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="ShortName-116"><a href="#ShortName-116"><span class="linenos">116</span></a>    <span class="n">v</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="ShortName-117"><a href="#ShortName-117"><span class="linenos">117</span></a>    <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
</span><span id="ShortName-118"><a href="#ShortName-118"><span class="linenos">118</span></a>        <span class="k">return</span> <span class="n">v</span><span class="o">.</span><span class="n">name</span>
</span><span id="ShortName-119"><a href="#ShortName-119"><span class="linenos">119</span></a>    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="ShortName-120"><a href="#ShortName-120"><span class="linenos">120</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="ShortName-121"><a href="#ShortName-121"><span class="linenos">121</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="ShortName-122"><a href="#ShortName-122"><span class="linenos">122</span></a>        <span class="k">return</span> <span class="s1">&#39;[</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="n">DisplayBounds</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns a short name of an integer variable, or its negation.</p>
</div>


                </section>
                <section id="ShortExprName">
                            <input id="ShortExprName-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ShortExprName</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">model</span>, </span><span class="param"><span class="n">e</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ShortExprName-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ShortExprName"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ShortExprName-125"><a href="#ShortExprName-125"><span class="linenos">125</span></a><span class="k">def</span> <span class="nf">ShortExprName</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
</span><span id="ShortExprName-126"><a href="#ShortExprName-126"><span class="linenos">126</span></a>    <span class="sd">&quot;&quot;&quot;Pretty-print LinearExpressionProto instances.&quot;&quot;&quot;</span>
</span><span id="ShortExprName-127"><a href="#ShortExprName-127"><span class="linenos">127</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">e</span><span class="o">.</span><span class="n">vars</span><span class="p">:</span>
</span><span id="ShortExprName-128"><a href="#ShortExprName-128"><span class="linenos">128</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
</span><span id="ShortExprName-129"><a href="#ShortExprName-129"><span class="linenos">129</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="ShortExprName-130"><a href="#ShortExprName-130"><span class="linenos">130</span></a>        <span class="n">var_name</span> <span class="o">=</span> <span class="n">ShortName</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="ShortExprName-131"><a href="#ShortExprName-131"><span class="linenos">131</span></a>        <span class="n">coeff</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">coeffs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ShortExprName-132"><a href="#ShortExprName-132"><span class="linenos">132</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="ShortExprName-133"><a href="#ShortExprName-133"><span class="linenos">133</span></a>        <span class="k">if</span> <span class="n">coeff</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="ShortExprName-134"><a href="#ShortExprName-134"><span class="linenos">134</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="n">var_name</span>
</span><span id="ShortExprName-135"><a href="#ShortExprName-135"><span class="linenos">135</span></a>        <span class="k">elif</span> <span class="n">coeff</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span id="ShortExprName-136"><a href="#ShortExprName-136"><span class="linenos">136</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;-</span><span class="si">{</span><span class="n">var_name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="ShortExprName-137"><a href="#ShortExprName-137"><span class="linenos">137</span></a>        <span class="k">elif</span> <span class="n">coeff</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ShortExprName-138"><a href="#ShortExprName-138"><span class="linenos">138</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">coeff</span><span class="si">}</span><span class="s1"> * </span><span class="si">{</span><span class="n">var_name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="ShortExprName-139"><a href="#ShortExprName-139"><span class="linenos">139</span></a>        <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">offset</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ShortExprName-140"><a href="#ShortExprName-140"><span class="linenos">140</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s1"> + </span><span class="si">{</span><span class="n">e</span><span class="o">.</span><span class="n">offset</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="ShortExprName-141"><a href="#ShortExprName-141"><span class="linenos">141</span></a>        <span class="k">elif</span> <span class="n">e</span><span class="o">.</span><span class="n">offset</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ShortExprName-142"><a href="#ShortExprName-142"><span class="linenos">142</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="o">-</span><span class="n">e</span><span class="o">.</span><span class="n">offset</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="ShortExprName-143"><a href="#ShortExprName-143"><span class="linenos">143</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="ShortExprName-144"><a href="#ShortExprName-144"><span class="linenos">144</span></a>    <span class="c1"># TODO(user): Support more than affine expressions.</span>
</span><span id="ShortExprName-145"><a href="#ShortExprName-145"><span class="linenos">145</span></a>    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Pretty-print LinearExpressionProto instances.</p>
</div>


                </section>
                <section id="LinearExpr">
                            <input id="LinearExpr-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LinearExpr</span>:

                <label class="view-source-button" for="LinearExpr-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearExpr"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearExpr-148"><a href="#LinearExpr-148"><span class="linenos">148</span></a><span class="k">class</span> <span class="nc">LinearExpr</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="LinearExpr-149"><a href="#LinearExpr-149"><span class="linenos">149</span></a>    <span class="sd">&quot;&quot;&quot;Holds an integer linear expression.</span>
</span><span id="LinearExpr-150"><a href="#LinearExpr-150"><span class="linenos">150</span></a>
</span><span id="LinearExpr-151"><a href="#LinearExpr-151"><span class="linenos">151</span></a><span class="sd">  A linear expression is built from integer constants and variables.</span>
</span><span id="LinearExpr-152"><a href="#LinearExpr-152"><span class="linenos">152</span></a><span class="sd">  For example, `x + 2 * (y - z + 1)`.</span>
</span><span id="LinearExpr-153"><a href="#LinearExpr-153"><span class="linenos">153</span></a>
</span><span id="LinearExpr-154"><a href="#LinearExpr-154"><span class="linenos">154</span></a><span class="sd">  Linear expressions are used in CP-SAT models in constraints and in the</span>
</span><span id="LinearExpr-155"><a href="#LinearExpr-155"><span class="linenos">155</span></a><span class="sd">  objective:</span>
</span><span id="LinearExpr-156"><a href="#LinearExpr-156"><span class="linenos">156</span></a>
</span><span id="LinearExpr-157"><a href="#LinearExpr-157"><span class="linenos">157</span></a><span class="sd">  * You can define linear constraints as in:</span>
</span><span id="LinearExpr-158"><a href="#LinearExpr-158"><span class="linenos">158</span></a>
</span><span id="LinearExpr-159"><a href="#LinearExpr-159"><span class="linenos">159</span></a><span class="sd">  ```</span>
</span><span id="LinearExpr-160"><a href="#LinearExpr-160"><span class="linenos">160</span></a><span class="sd">  model.Add(x + 2 * y &lt;= 5)</span>
</span><span id="LinearExpr-161"><a href="#LinearExpr-161"><span class="linenos">161</span></a><span class="sd">  model.Add(sum(array_of_vars) == 5)</span>
</span><span id="LinearExpr-162"><a href="#LinearExpr-162"><span class="linenos">162</span></a><span class="sd">  ```</span>
</span><span id="LinearExpr-163"><a href="#LinearExpr-163"><span class="linenos">163</span></a>
</span><span id="LinearExpr-164"><a href="#LinearExpr-164"><span class="linenos">164</span></a><span class="sd">  * In CP-SAT, the objective is a linear expression:</span>
</span><span id="LinearExpr-165"><a href="#LinearExpr-165"><span class="linenos">165</span></a>
</span><span id="LinearExpr-166"><a href="#LinearExpr-166"><span class="linenos">166</span></a><span class="sd">  ```</span>
</span><span id="LinearExpr-167"><a href="#LinearExpr-167"><span class="linenos">167</span></a><span class="sd">  model.Minimize(x + 2 * y + z)</span>
</span><span id="LinearExpr-168"><a href="#LinearExpr-168"><span class="linenos">168</span></a><span class="sd">  ```</span>
</span><span id="LinearExpr-169"><a href="#LinearExpr-169"><span class="linenos">169</span></a>
</span><span id="LinearExpr-170"><a href="#LinearExpr-170"><span class="linenos">170</span></a><span class="sd">  * For large arrays, using the LinearExpr class is faster that using the python</span>
</span><span id="LinearExpr-171"><a href="#LinearExpr-171"><span class="linenos">171</span></a><span class="sd">  `sum()` function. You can create constraints and the objective from lists of</span>
</span><span id="LinearExpr-172"><a href="#LinearExpr-172"><span class="linenos">172</span></a><span class="sd">  linear expressions or coefficients as follows:</span>
</span><span id="LinearExpr-173"><a href="#LinearExpr-173"><span class="linenos">173</span></a>
</span><span id="LinearExpr-174"><a href="#LinearExpr-174"><span class="linenos">174</span></a><span class="sd">  ```</span>
</span><span id="LinearExpr-175"><a href="#LinearExpr-175"><span class="linenos">175</span></a><span class="sd">  model.Minimize(cp_model.LinearExpr.Sum(expressions))</span>
</span><span id="LinearExpr-176"><a href="#LinearExpr-176"><span class="linenos">176</span></a><span class="sd">  model.Add(cp_model.LinearExpr.WeightedSum(expressions, coefficients) &gt;= 0)</span>
</span><span id="LinearExpr-177"><a href="#LinearExpr-177"><span class="linenos">177</span></a><span class="sd">  ```</span>
</span><span id="LinearExpr-178"><a href="#LinearExpr-178"><span class="linenos">178</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="LinearExpr-179"><a href="#LinearExpr-179"><span class="linenos">179</span></a>
</span><span id="LinearExpr-180"><a href="#LinearExpr-180"><span class="linenos">180</span></a>    <span class="nd">@classmethod</span>
</span><span id="LinearExpr-181"><a href="#LinearExpr-181"><span class="linenos">181</span></a>    <span class="k">def</span> <span class="nf">Sum</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">expressions</span><span class="p">):</span>
</span><span id="LinearExpr-182"><a href="#LinearExpr-182"><span class="linenos">182</span></a>        <span class="sd">&quot;&quot;&quot;Creates the expression sum(expressions).&quot;&quot;&quot;</span>
</span><span id="LinearExpr-183"><a href="#LinearExpr-183"><span class="linenos">183</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="LinearExpr-184"><a href="#LinearExpr-184"><span class="linenos">184</span></a>            <span class="k">return</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="LinearExpr-185"><a href="#LinearExpr-185"><span class="linenos">185</span></a>        <span class="k">return</span> <span class="n">_SumArray</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span>
</span><span id="LinearExpr-186"><a href="#LinearExpr-186"><span class="linenos">186</span></a>
</span><span id="LinearExpr-187"><a href="#LinearExpr-187"><span class="linenos">187</span></a>    <span class="nd">@classmethod</span>
</span><span id="LinearExpr-188"><a href="#LinearExpr-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="nf">WeightedSum</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">expressions</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">):</span>
</span><span id="LinearExpr-189"><a href="#LinearExpr-189"><span class="linenos">189</span></a>        <span class="sd">&quot;&quot;&quot;Creates the expression sum(expressions[i] * coefficients[i]).&quot;&quot;&quot;</span>
</span><span id="LinearExpr-190"><a href="#LinearExpr-190"><span class="linenos">190</span></a>        <span class="k">if</span> <span class="n">LinearExpr</span><span class="o">.</span><span class="n">IsEmptyOrAllNull</span><span class="p">(</span><span class="n">coefficients</span><span class="p">):</span>
</span><span id="LinearExpr-191"><a href="#LinearExpr-191"><span class="linenos">191</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="LinearExpr-192"><a href="#LinearExpr-192"><span class="linenos">192</span></a>        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="LinearExpr-193"><a href="#LinearExpr-193"><span class="linenos">193</span></a>            <span class="k">return</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">coefficients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="LinearExpr-194"><a href="#LinearExpr-194"><span class="linenos">194</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-195"><a href="#LinearExpr-195"><span class="linenos">195</span></a>            <span class="k">return</span> <span class="n">_WeightedSum</span><span class="p">(</span><span class="n">expressions</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">)</span>
</span><span id="LinearExpr-196"><a href="#LinearExpr-196"><span class="linenos">196</span></a>
</span><span id="LinearExpr-197"><a href="#LinearExpr-197"><span class="linenos">197</span></a>    <span class="nd">@classmethod</span>
</span><span id="LinearExpr-198"><a href="#LinearExpr-198"><span class="linenos">198</span></a>    <span class="k">def</span> <span class="nf">Term</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">expression</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">):</span>
</span><span id="LinearExpr-199"><a href="#LinearExpr-199"><span class="linenos">199</span></a>        <span class="sd">&quot;&quot;&quot;Creates `expression * coefficient`.&quot;&quot;&quot;</span>
</span><span id="LinearExpr-200"><a href="#LinearExpr-200"><span class="linenos">200</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">coefficient</span><span class="p">):</span>
</span><span id="LinearExpr-201"><a href="#LinearExpr-201"><span class="linenos">201</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="LinearExpr-202"><a href="#LinearExpr-202"><span class="linenos">202</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-203"><a href="#LinearExpr-203"><span class="linenos">203</span></a>            <span class="k">return</span> <span class="n">expression</span> <span class="o">*</span> <span class="n">coefficient</span>
</span><span id="LinearExpr-204"><a href="#LinearExpr-204"><span class="linenos">204</span></a>
</span><span id="LinearExpr-205"><a href="#LinearExpr-205"><span class="linenos">205</span></a>    <span class="nd">@classmethod</span>
</span><span id="LinearExpr-206"><a href="#LinearExpr-206"><span class="linenos">206</span></a>    <span class="k">def</span> <span class="nf">IsEmptyOrAllNull</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">):</span>
</span><span id="LinearExpr-207"><a href="#LinearExpr-207"><span class="linenos">207</span></a>        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">coefficients</span><span class="p">:</span>
</span><span id="LinearExpr-208"><a href="#LinearExpr-208"><span class="linenos">208</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
</span><span id="LinearExpr-209"><a href="#LinearExpr-209"><span class="linenos">209</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="LinearExpr-210"><a href="#LinearExpr-210"><span class="linenos">210</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="LinearExpr-211"><a href="#LinearExpr-211"><span class="linenos">211</span></a>
</span><span id="LinearExpr-212"><a href="#LinearExpr-212"><span class="linenos">212</span></a>    <span class="nd">@classmethod</span>
</span><span id="LinearExpr-213"><a href="#LinearExpr-213"><span class="linenos">213</span></a>    <span class="k">def</span> <span class="nf">RebuildFromLinearExpressionProto</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">proto</span><span class="p">):</span>
</span><span id="LinearExpr-214"><a href="#LinearExpr-214"><span class="linenos">214</span></a>        <span class="sd">&quot;&quot;&quot;Recreate a LinearExpr from a LinearExpressionProto.&quot;&quot;&quot;</span>
</span><span id="LinearExpr-215"><a href="#LinearExpr-215"><span class="linenos">215</span></a>        <span class="n">offset</span> <span class="o">=</span> <span class="n">proto</span><span class="o">.</span><span class="n">offset</span>
</span><span id="LinearExpr-216"><a href="#LinearExpr-216"><span class="linenos">216</span></a>        <span class="n">num_elements</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">proto</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span>
</span><span id="LinearExpr-217"><a href="#LinearExpr-217"><span class="linenos">217</span></a>        <span class="k">if</span> <span class="n">num_elements</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="LinearExpr-218"><a href="#LinearExpr-218"><span class="linenos">218</span></a>            <span class="k">return</span> <span class="n">offset</span>
</span><span id="LinearExpr-219"><a href="#LinearExpr-219"><span class="linenos">219</span></a>        <span class="k">elif</span> <span class="n">num_elements</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="LinearExpr-220"><a href="#LinearExpr-220"><span class="linenos">220</span></a>            <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">proto</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="kc">None</span><span class="p">)</span> <span class="o">*</span> <span class="n">proto</span><span class="o">.</span><span class="n">coeffs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">offset</span>
</span><span id="LinearExpr-221"><a href="#LinearExpr-221"><span class="linenos">221</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-222"><a href="#LinearExpr-222"><span class="linenos">222</span></a>            <span class="n">variables</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="LinearExpr-223"><a href="#LinearExpr-223"><span class="linenos">223</span></a>            <span class="n">coeffs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="LinearExpr-224"><a href="#LinearExpr-224"><span class="linenos">224</span></a>            <span class="n">all_ones</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LinearExpr-225"><a href="#LinearExpr-225"><span class="linenos">225</span></a>            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">coeff</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">proto</span><span class="o">.</span><span class="n">vars</span><span class="p">(),</span> <span class="n">proto</span><span class="o">.</span><span class="n">coeffs</span><span class="p">()):</span>
</span><span id="LinearExpr-226"><a href="#LinearExpr-226"><span class="linenos">226</span></a>                <span class="n">variables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">IntVar</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="LinearExpr-227"><a href="#LinearExpr-227"><span class="linenos">227</span></a>                <span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coeff</span><span class="p">)</span>
</span><span id="LinearExpr-228"><a href="#LinearExpr-228"><span class="linenos">228</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_one</span><span class="p">(</span><span class="n">coeff</span><span class="p">):</span>
</span><span id="LinearExpr-229"><a href="#LinearExpr-229"><span class="linenos">229</span></a>                    <span class="n">all_ones</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="LinearExpr-230"><a href="#LinearExpr-230"><span class="linenos">230</span></a>            <span class="k">if</span> <span class="n">all_ones</span><span class="p">:</span>
</span><span id="LinearExpr-231"><a href="#LinearExpr-231"><span class="linenos">231</span></a>                <span class="k">return</span> <span class="n">_SumArray</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
</span><span id="LinearExpr-232"><a href="#LinearExpr-232"><span class="linenos">232</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-233"><a href="#LinearExpr-233"><span class="linenos">233</span></a>                <span class="k">return</span> <span class="n">_WeightedSum</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">coeffs</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
</span><span id="LinearExpr-234"><a href="#LinearExpr-234"><span class="linenos">234</span></a>
</span><span id="LinearExpr-235"><a href="#LinearExpr-235"><span class="linenos">235</span></a>    <span class="k">def</span> <span class="nf">GetIntegerVarValueMap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearExpr-236"><a href="#LinearExpr-236"><span class="linenos">236</span></a>        <span class="sd">&quot;&quot;&quot;Scans the expression, and returns (var_coef_map, constant).&quot;&quot;&quot;</span>
</span><span id="LinearExpr-237"><a href="#LinearExpr-237"><span class="linenos">237</span></a>        <span class="n">coeffs</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</span><span id="LinearExpr-238"><a href="#LinearExpr-238"><span class="linenos">238</span></a>        <span class="n">constant</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="LinearExpr-239"><a href="#LinearExpr-239"><span class="linenos">239</span></a>        <span class="n">to_process</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</span><span id="LinearExpr-240"><a href="#LinearExpr-240"><span class="linenos">240</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>  <span class="c1"># Flatten to avoid recursion.</span>
</span><span id="LinearExpr-241"><a href="#LinearExpr-241"><span class="linenos">241</span></a>            <span class="n">expr</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="LinearExpr-242"><a href="#LinearExpr-242"><span class="linenos">242</span></a>            <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
</span><span id="LinearExpr-243"><a href="#LinearExpr-243"><span class="linenos">243</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="LinearExpr-244"><a href="#LinearExpr-244"><span class="linenos">244</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">):</span>
</span><span id="LinearExpr-245"><a href="#LinearExpr-245"><span class="linenos">245</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="LinearExpr-246"><a href="#LinearExpr-246"><span class="linenos">246</span></a>                    <span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()))</span>
</span><span id="LinearExpr-247"><a href="#LinearExpr-247"><span class="linenos">247</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_Sum</span><span class="p">):</span>
</span><span id="LinearExpr-248"><a href="#LinearExpr-248"><span class="linenos">248</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Left</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="LinearExpr-249"><a href="#LinearExpr-249"><span class="linenos">249</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Right</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="LinearExpr-250"><a href="#LinearExpr-250"><span class="linenos">250</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_SumArray</span><span class="p">):</span>
</span><span id="LinearExpr-251"><a href="#LinearExpr-251"><span class="linenos">251</span></a>                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">():</span>
</span><span id="LinearExpr-252"><a href="#LinearExpr-252"><span class="linenos">252</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="LinearExpr-253"><a href="#LinearExpr-253"><span class="linenos">253</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="LinearExpr-254"><a href="#LinearExpr-254"><span class="linenos">254</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_WeightedSum</span><span class="p">):</span>
</span><span id="LinearExpr-255"><a href="#LinearExpr-255"><span class="linenos">255</span></a>                <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">(),</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficients</span><span class="p">()):</span>
</span><span id="LinearExpr-256"><a href="#LinearExpr-256"><span class="linenos">256</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">c</span><span class="p">))</span>
</span><span id="LinearExpr-257"><a href="#LinearExpr-257"><span class="linenos">257</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="LinearExpr-258"><a href="#LinearExpr-258"><span class="linenos">258</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="LinearExpr-259"><a href="#LinearExpr-259"><span class="linenos">259</span></a>                <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">+=</span> <span class="n">coeff</span>
</span><span id="LinearExpr-260"><a href="#LinearExpr-260"><span class="linenos">260</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="LinearExpr-261"><a href="#LinearExpr-261"><span class="linenos">261</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span>
</span><span id="LinearExpr-262"><a href="#LinearExpr-262"><span class="linenos">262</span></a>                <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()]</span> <span class="o">-=</span> <span class="n">coeff</span>
</span><span id="LinearExpr-263"><a href="#LinearExpr-263"><span class="linenos">263</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-264"><a href="#LinearExpr-264"><span class="linenos">264</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Unrecognized linear expression: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</span><span id="LinearExpr-265"><a href="#LinearExpr-265"><span class="linenos">265</span></a>
</span><span id="LinearExpr-266"><a href="#LinearExpr-266"><span class="linenos">266</span></a>        <span class="k">return</span> <span class="n">coeffs</span><span class="p">,</span> <span class="n">constant</span>
</span><span id="LinearExpr-267"><a href="#LinearExpr-267"><span class="linenos">267</span></a>
</span><span id="LinearExpr-268"><a href="#LinearExpr-268"><span class="linenos">268</span></a>    <span class="k">def</span> <span class="nf">GetFloatVarValueMap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearExpr-269"><a href="#LinearExpr-269"><span class="linenos">269</span></a>        <span class="sd">&quot;&quot;&quot;Scans the expression. Returns (var_coef_map, constant, is_integer).&quot;&quot;&quot;</span>
</span><span id="LinearExpr-270"><a href="#LinearExpr-270"><span class="linenos">270</span></a>        <span class="n">coeffs</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="LinearExpr-271"><a href="#LinearExpr-271"><span class="linenos">271</span></a>        <span class="n">constant</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="LinearExpr-272"><a href="#LinearExpr-272"><span class="linenos">272</span></a>        <span class="n">to_process</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</span><span id="LinearExpr-273"><a href="#LinearExpr-273"><span class="linenos">273</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>  <span class="c1"># Flatten to avoid recursion.</span>
</span><span id="LinearExpr-274"><a href="#LinearExpr-274"><span class="linenos">274</span></a>            <span class="n">expr</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="LinearExpr-275"><a href="#LinearExpr-275"><span class="linenos">275</span></a>            <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>  <span class="c1"># Keep integrality.</span>
</span><span id="LinearExpr-276"><a href="#LinearExpr-276"><span class="linenos">276</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="LinearExpr-277"><a href="#LinearExpr-277"><span class="linenos">277</span></a>            <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_a_number</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
</span><span id="LinearExpr-278"><a href="#LinearExpr-278"><span class="linenos">278</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="LinearExpr-279"><a href="#LinearExpr-279"><span class="linenos">279</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">):</span>
</span><span id="LinearExpr-280"><a href="#LinearExpr-280"><span class="linenos">280</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="LinearExpr-281"><a href="#LinearExpr-281"><span class="linenos">281</span></a>                    <span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()))</span>
</span><span id="LinearExpr-282"><a href="#LinearExpr-282"><span class="linenos">282</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_Sum</span><span class="p">):</span>
</span><span id="LinearExpr-283"><a href="#LinearExpr-283"><span class="linenos">283</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Left</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="LinearExpr-284"><a href="#LinearExpr-284"><span class="linenos">284</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Right</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="LinearExpr-285"><a href="#LinearExpr-285"><span class="linenos">285</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_SumArray</span><span class="p">):</span>
</span><span id="LinearExpr-286"><a href="#LinearExpr-286"><span class="linenos">286</span></a>                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">():</span>
</span><span id="LinearExpr-287"><a href="#LinearExpr-287"><span class="linenos">287</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="LinearExpr-288"><a href="#LinearExpr-288"><span class="linenos">288</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="LinearExpr-289"><a href="#LinearExpr-289"><span class="linenos">289</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_WeightedSum</span><span class="p">):</span>
</span><span id="LinearExpr-290"><a href="#LinearExpr-290"><span class="linenos">290</span></a>                <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">(),</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficients</span><span class="p">()):</span>
</span><span id="LinearExpr-291"><a href="#LinearExpr-291"><span class="linenos">291</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">c</span><span class="p">))</span>
</span><span id="LinearExpr-292"><a href="#LinearExpr-292"><span class="linenos">292</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="LinearExpr-293"><a href="#LinearExpr-293"><span class="linenos">293</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="LinearExpr-294"><a href="#LinearExpr-294"><span class="linenos">294</span></a>                <span class="k">if</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">coeffs</span><span class="p">:</span>
</span><span id="LinearExpr-295"><a href="#LinearExpr-295"><span class="linenos">295</span></a>                    <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">+=</span> <span class="n">coeff</span>
</span><span id="LinearExpr-296"><a href="#LinearExpr-296"><span class="linenos">296</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-297"><a href="#LinearExpr-297"><span class="linenos">297</span></a>                    <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">=</span> <span class="n">coeff</span>
</span><span id="LinearExpr-298"><a href="#LinearExpr-298"><span class="linenos">298</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="LinearExpr-299"><a href="#LinearExpr-299"><span class="linenos">299</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span>
</span><span id="LinearExpr-300"><a href="#LinearExpr-300"><span class="linenos">300</span></a>                <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()</span> <span class="ow">in</span> <span class="n">coeffs</span><span class="p">:</span>
</span><span id="LinearExpr-301"><a href="#LinearExpr-301"><span class="linenos">301</span></a>                    <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()]</span> <span class="o">-=</span> <span class="n">coeff</span>
</span><span id="LinearExpr-302"><a href="#LinearExpr-302"><span class="linenos">302</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-303"><a href="#LinearExpr-303"><span class="linenos">303</span></a>                    <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()]</span> <span class="o">=</span> <span class="o">-</span><span class="n">coeff</span>
</span><span id="LinearExpr-304"><a href="#LinearExpr-304"><span class="linenos">304</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-305"><a href="#LinearExpr-305"><span class="linenos">305</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Unrecognized linear expression: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</span><span id="LinearExpr-306"><a href="#LinearExpr-306"><span class="linenos">306</span></a>        <span class="n">is_integer</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">constant</span><span class="p">)</span>
</span><span id="LinearExpr-307"><a href="#LinearExpr-307"><span class="linenos">307</span></a>        <span class="k">if</span> <span class="n">is_integer</span><span class="p">:</span>
</span><span id="LinearExpr-308"><a href="#LinearExpr-308"><span class="linenos">308</span></a>            <span class="k">for</span> <span class="n">coeff</span> <span class="ow">in</span> <span class="n">coeffs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="LinearExpr-309"><a href="#LinearExpr-309"><span class="linenos">309</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">coeff</span><span class="p">):</span>
</span><span id="LinearExpr-310"><a href="#LinearExpr-310"><span class="linenos">310</span></a>                    <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="LinearExpr-311"><a href="#LinearExpr-311"><span class="linenos">311</span></a>                    <span class="k">break</span>
</span><span id="LinearExpr-312"><a href="#LinearExpr-312"><span class="linenos">312</span></a>        <span class="k">return</span> <span class="n">coeffs</span><span class="p">,</span> <span class="n">constant</span><span class="p">,</span> <span class="n">is_integer</span>
</span><span id="LinearExpr-313"><a href="#LinearExpr-313"><span class="linenos">313</span></a>
</span><span id="LinearExpr-314"><a href="#LinearExpr-314"><span class="linenos">314</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearExpr-315"><a href="#LinearExpr-315"><span class="linenos">315</span></a>        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="LinearExpr-316"><a href="#LinearExpr-316"><span class="linenos">316</span></a>
</span><span id="LinearExpr-317"><a href="#LinearExpr-317"><span class="linenos">317</span></a>    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearExpr-318"><a href="#LinearExpr-318"><span class="linenos">318</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="LinearExpr-319"><a href="#LinearExpr-319"><span class="linenos">319</span></a>            <span class="s1">&#39;calling abs() on a linear expression is not supported, &#39;</span>
</span><span id="LinearExpr-320"><a href="#LinearExpr-320"><span class="linenos">320</span></a>            <span class="s1">&#39;please use CpModel.AddAbsEquality&#39;</span><span class="p">)</span>
</span><span id="LinearExpr-321"><a href="#LinearExpr-321"><span class="linenos">321</span></a>
</span><span id="LinearExpr-322"><a href="#LinearExpr-322"><span class="linenos">322</span></a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-323"><a href="#LinearExpr-323"><span class="linenos">323</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-324"><a href="#LinearExpr-324"><span class="linenos">324</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="LinearExpr-325"><a href="#LinearExpr-325"><span class="linenos">325</span></a>        <span class="k">return</span> <span class="n">_Sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="LinearExpr-326"><a href="#LinearExpr-326"><span class="linenos">326</span></a>
</span><span id="LinearExpr-327"><a href="#LinearExpr-327"><span class="linenos">327</span></a>    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-328"><a href="#LinearExpr-328"><span class="linenos">328</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-329"><a href="#LinearExpr-329"><span class="linenos">329</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="LinearExpr-330"><a href="#LinearExpr-330"><span class="linenos">330</span></a>        <span class="k">return</span> <span class="n">_Sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="LinearExpr-331"><a href="#LinearExpr-331"><span class="linenos">331</span></a>
</span><span id="LinearExpr-332"><a href="#LinearExpr-332"><span class="linenos">332</span></a>    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-333"><a href="#LinearExpr-333"><span class="linenos">333</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-334"><a href="#LinearExpr-334"><span class="linenos">334</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="LinearExpr-335"><a href="#LinearExpr-335"><span class="linenos">335</span></a>        <span class="k">return</span> <span class="n">_Sum</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="n">arg</span><span class="p">)</span>
</span><span id="LinearExpr-336"><a href="#LinearExpr-336"><span class="linenos">336</span></a>
</span><span id="LinearExpr-337"><a href="#LinearExpr-337"><span class="linenos">337</span></a>    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-338"><a href="#LinearExpr-338"><span class="linenos">338</span></a>        <span class="k">return</span> <span class="n">_Sum</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="LinearExpr-339"><a href="#LinearExpr-339"><span class="linenos">339</span></a>
</span><span id="LinearExpr-340"><a href="#LinearExpr-340"><span class="linenos">340</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-341"><a href="#LinearExpr-341"><span class="linenos">341</span></a>        <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_a_number</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="LinearExpr-342"><a href="#LinearExpr-342"><span class="linenos">342</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_one</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-343"><a href="#LinearExpr-343"><span class="linenos">343</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="LinearExpr-344"><a href="#LinearExpr-344"><span class="linenos">344</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-345"><a href="#LinearExpr-345"><span class="linenos">345</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="LinearExpr-346"><a href="#LinearExpr-346"><span class="linenos">346</span></a>        <span class="k">return</span> <span class="n">_ProductCst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="LinearExpr-347"><a href="#LinearExpr-347"><span class="linenos">347</span></a>
</span><span id="LinearExpr-348"><a href="#LinearExpr-348"><span class="linenos">348</span></a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-349"><a href="#LinearExpr-349"><span class="linenos">349</span></a>        <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_a_number</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="LinearExpr-350"><a href="#LinearExpr-350"><span class="linenos">350</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_one</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-351"><a href="#LinearExpr-351"><span class="linenos">351</span></a>            <span class="k">return</span> <span class="bp">self</span>
</span><span id="LinearExpr-352"><a href="#LinearExpr-352"><span class="linenos">352</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-353"><a href="#LinearExpr-353"><span class="linenos">353</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="LinearExpr-354"><a href="#LinearExpr-354"><span class="linenos">354</span></a>        <span class="k">return</span> <span class="n">_ProductCst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="LinearExpr-355"><a href="#LinearExpr-355"><span class="linenos">355</span></a>
</span><span id="LinearExpr-356"><a href="#LinearExpr-356"><span class="linenos">356</span></a>    <span class="k">def</span> <span class="nf">__div__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="LinearExpr-357"><a href="#LinearExpr-357"><span class="linenos">357</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="LinearExpr-358"><a href="#LinearExpr-358"><span class="linenos">358</span></a>            <span class="s1">&#39;calling / on a linear expression is not supported, &#39;</span>
</span><span id="LinearExpr-359"><a href="#LinearExpr-359"><span class="linenos">359</span></a>            <span class="s1">&#39;please use CpModel.AddDivisionEquality&#39;</span><span class="p">)</span>
</span><span id="LinearExpr-360"><a href="#LinearExpr-360"><span class="linenos">360</span></a>
</span><span id="LinearExpr-361"><a href="#LinearExpr-361"><span class="linenos">361</span></a>    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="LinearExpr-362"><a href="#LinearExpr-362"><span class="linenos">362</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="LinearExpr-363"><a href="#LinearExpr-363"><span class="linenos">363</span></a>            <span class="s1">&#39;calling // on a linear expression is not supported, &#39;</span>
</span><span id="LinearExpr-364"><a href="#LinearExpr-364"><span class="linenos">364</span></a>            <span class="s1">&#39;please use CpModel.AddDivisionEquality&#39;</span><span class="p">)</span>
</span><span id="LinearExpr-365"><a href="#LinearExpr-365"><span class="linenos">365</span></a>
</span><span id="LinearExpr-366"><a href="#LinearExpr-366"><span class="linenos">366</span></a>    <span class="k">def</span> <span class="fm">__mod__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="LinearExpr-367"><a href="#LinearExpr-367"><span class="linenos">367</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="LinearExpr-368"><a href="#LinearExpr-368"><span class="linenos">368</span></a>            <span class="s1">&#39;calling </span><span class="si">%%</span><span class="s1"> on a linear expression is not supported, &#39;</span>
</span><span id="LinearExpr-369"><a href="#LinearExpr-369"><span class="linenos">369</span></a>            <span class="s1">&#39;please use CpModel.AddModuloEquality&#39;</span><span class="p">)</span>
</span><span id="LinearExpr-370"><a href="#LinearExpr-370"><span class="linenos">370</span></a>
</span><span id="LinearExpr-371"><a href="#LinearExpr-371"><span class="linenos">371</span></a>    <span class="k">def</span> <span class="fm">__pow__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="LinearExpr-372"><a href="#LinearExpr-372"><span class="linenos">372</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="LinearExpr-373"><a href="#LinearExpr-373"><span class="linenos">373</span></a>            <span class="s1">&#39;calling ** on a linear expression is not supported, &#39;</span>
</span><span id="LinearExpr-374"><a href="#LinearExpr-374"><span class="linenos">374</span></a>            <span class="s1">&#39;please use CpModel.AddMultiplicationEquality&#39;</span><span class="p">)</span>
</span><span id="LinearExpr-375"><a href="#LinearExpr-375"><span class="linenos">375</span></a>
</span><span id="LinearExpr-376"><a href="#LinearExpr-376"><span class="linenos">376</span></a>    <span class="k">def</span> <span class="fm">__lshift__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="LinearExpr-377"><a href="#LinearExpr-377"><span class="linenos">377</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="LinearExpr-378"><a href="#LinearExpr-378"><span class="linenos">378</span></a>            <span class="s1">&#39;calling left shift on a linear expression is not supported&#39;</span><span class="p">)</span>
</span><span id="LinearExpr-379"><a href="#LinearExpr-379"><span class="linenos">379</span></a>
</span><span id="LinearExpr-380"><a href="#LinearExpr-380"><span class="linenos">380</span></a>    <span class="k">def</span> <span class="fm">__rshift__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="LinearExpr-381"><a href="#LinearExpr-381"><span class="linenos">381</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="LinearExpr-382"><a href="#LinearExpr-382"><span class="linenos">382</span></a>            <span class="s1">&#39;calling right shift on a linear expression is not supported&#39;</span><span class="p">)</span>
</span><span id="LinearExpr-383"><a href="#LinearExpr-383"><span class="linenos">383</span></a>
</span><span id="LinearExpr-384"><a href="#LinearExpr-384"><span class="linenos">384</span></a>    <span class="k">def</span> <span class="fm">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="LinearExpr-385"><a href="#LinearExpr-385"><span class="linenos">385</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="LinearExpr-386"><a href="#LinearExpr-386"><span class="linenos">386</span></a>            <span class="s1">&#39;calling and on a linear expression is not supported, &#39;</span>
</span><span id="LinearExpr-387"><a href="#LinearExpr-387"><span class="linenos">387</span></a>            <span class="s1">&#39;please use CpModel.AddBoolAnd&#39;</span><span class="p">)</span>
</span><span id="LinearExpr-388"><a href="#LinearExpr-388"><span class="linenos">388</span></a>
</span><span id="LinearExpr-389"><a href="#LinearExpr-389"><span class="linenos">389</span></a>    <span class="k">def</span> <span class="fm">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="LinearExpr-390"><a href="#LinearExpr-390"><span class="linenos">390</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="LinearExpr-391"><a href="#LinearExpr-391"><span class="linenos">391</span></a>            <span class="s1">&#39;calling or on a linear expression is not supported, &#39;</span>
</span><span id="LinearExpr-392"><a href="#LinearExpr-392"><span class="linenos">392</span></a>            <span class="s1">&#39;please use CpModel.AddBoolOr&#39;</span><span class="p">)</span>
</span><span id="LinearExpr-393"><a href="#LinearExpr-393"><span class="linenos">393</span></a>
</span><span id="LinearExpr-394"><a href="#LinearExpr-394"><span class="linenos">394</span></a>    <span class="k">def</span> <span class="fm">__xor__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
</span><span id="LinearExpr-395"><a href="#LinearExpr-395"><span class="linenos">395</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="LinearExpr-396"><a href="#LinearExpr-396"><span class="linenos">396</span></a>            <span class="s1">&#39;calling xor on a linear expression is not supported, &#39;</span>
</span><span id="LinearExpr-397"><a href="#LinearExpr-397"><span class="linenos">397</span></a>            <span class="s1">&#39;please use CpModel.AddBoolXor&#39;</span><span class="p">)</span>
</span><span id="LinearExpr-398"><a href="#LinearExpr-398"><span class="linenos">398</span></a>
</span><span id="LinearExpr-399"><a href="#LinearExpr-399"><span class="linenos">399</span></a>    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearExpr-400"><a href="#LinearExpr-400"><span class="linenos">400</span></a>        <span class="k">return</span> <span class="n">_ProductCst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="LinearExpr-401"><a href="#LinearExpr-401"><span class="linenos">401</span></a>
</span><span id="LinearExpr-402"><a href="#LinearExpr-402"><span class="linenos">402</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearExpr-403"><a href="#LinearExpr-403"><span class="linenos">403</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="LinearExpr-404"><a href="#LinearExpr-404"><span class="linenos">404</span></a>            <span class="s1">&#39;Evaluating a LinearExpr instance as a Boolean is not implemented.&#39;</span><span class="p">)</span>
</span><span id="LinearExpr-405"><a href="#LinearExpr-405"><span class="linenos">405</span></a>
</span><span id="LinearExpr-406"><a href="#LinearExpr-406"><span class="linenos">406</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-407"><a href="#LinearExpr-407"><span class="linenos">407</span></a>        <span class="k">if</span> <span class="n">arg</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearExpr-408"><a href="#LinearExpr-408"><span class="linenos">408</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="LinearExpr-409"><a href="#LinearExpr-409"><span class="linenos">409</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-410"><a href="#LinearExpr-410"><span class="linenos">410</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="LinearExpr-411"><a href="#LinearExpr-411"><span class="linenos">411</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">arg</span><span class="p">,</span> <span class="n">arg</span><span class="p">])</span>
</span><span id="LinearExpr-412"><a href="#LinearExpr-412"><span class="linenos">412</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-413"><a href="#LinearExpr-413"><span class="linenos">413</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">arg</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="LinearExpr-414"><a href="#LinearExpr-414"><span class="linenos">414</span></a>
</span><span id="LinearExpr-415"><a href="#LinearExpr-415"><span class="linenos">415</span></a>    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-416"><a href="#LinearExpr-416"><span class="linenos">416</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-417"><a href="#LinearExpr-417"><span class="linenos">417</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="LinearExpr-418"><a href="#LinearExpr-418"><span class="linenos">418</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">arg</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="LinearExpr-419"><a href="#LinearExpr-419"><span class="linenos">419</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-420"><a href="#LinearExpr-420"><span class="linenos">420</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">arg</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="LinearExpr-421"><a href="#LinearExpr-421"><span class="linenos">421</span></a>
</span><span id="LinearExpr-422"><a href="#LinearExpr-422"><span class="linenos">422</span></a>    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-423"><a href="#LinearExpr-423"><span class="linenos">423</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-424"><a href="#LinearExpr-424"><span class="linenos">424</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="LinearExpr-425"><a href="#LinearExpr-425"><span class="linenos">425</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="n">arg</span><span class="p">])</span>
</span><span id="LinearExpr-426"><a href="#LinearExpr-426"><span class="linenos">426</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-427"><a href="#LinearExpr-427"><span class="linenos">427</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">arg</span><span class="p">,</span> <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</span><span id="LinearExpr-428"><a href="#LinearExpr-428"><span class="linenos">428</span></a>
</span><span id="LinearExpr-429"><a href="#LinearExpr-429"><span class="linenos">429</span></a>    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-430"><a href="#LinearExpr-430"><span class="linenos">430</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-431"><a href="#LinearExpr-431"><span class="linenos">431</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="LinearExpr-432"><a href="#LinearExpr-432"><span class="linenos">432</span></a>            <span class="k">if</span> <span class="n">arg</span> <span class="o">==</span> <span class="n">INT_MIN</span><span class="p">:</span>
</span><span id="LinearExpr-433"><a href="#LinearExpr-433"><span class="linenos">433</span></a>                <span class="k">raise</span> <span class="ne">ArithmeticError</span><span class="p">(</span><span class="s1">&#39;&lt; INT_MIN is not supported&#39;</span><span class="p">)</span>
</span><span id="LinearExpr-434"><a href="#LinearExpr-434"><span class="linenos">434</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="n">arg</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="LinearExpr-435"><a href="#LinearExpr-435"><span class="linenos">435</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-436"><a href="#LinearExpr-436"><span class="linenos">436</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">arg</span><span class="p">,</span> <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span><span id="LinearExpr-437"><a href="#LinearExpr-437"><span class="linenos">437</span></a>
</span><span id="LinearExpr-438"><a href="#LinearExpr-438"><span class="linenos">438</span></a>    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-439"><a href="#LinearExpr-439"><span class="linenos">439</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-440"><a href="#LinearExpr-440"><span class="linenos">440</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="LinearExpr-441"><a href="#LinearExpr-441"><span class="linenos">441</span></a>            <span class="k">if</span> <span class="n">arg</span> <span class="o">==</span> <span class="n">INT_MAX</span><span class="p">:</span>
</span><span id="LinearExpr-442"><a href="#LinearExpr-442"><span class="linenos">442</span></a>                <span class="k">raise</span> <span class="ne">ArithmeticError</span><span class="p">(</span><span class="s1">&#39;&gt; INT_MAX is not supported&#39;</span><span class="p">)</span>
</span><span id="LinearExpr-443"><a href="#LinearExpr-443"><span class="linenos">443</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">arg</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="LinearExpr-444"><a href="#LinearExpr-444"><span class="linenos">444</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-445"><a href="#LinearExpr-445"><span class="linenos">445</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">arg</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="LinearExpr-446"><a href="#LinearExpr-446"><span class="linenos">446</span></a>
</span><span id="LinearExpr-447"><a href="#LinearExpr-447"><span class="linenos">447</span></a>    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-448"><a href="#LinearExpr-448"><span class="linenos">448</span></a>        <span class="k">if</span> <span class="n">arg</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearExpr-449"><a href="#LinearExpr-449"><span class="linenos">449</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="LinearExpr-450"><a href="#LinearExpr-450"><span class="linenos">450</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="LinearExpr-451"><a href="#LinearExpr-451"><span class="linenos">451</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="LinearExpr-452"><a href="#LinearExpr-452"><span class="linenos">452</span></a>            <span class="k">if</span> <span class="n">arg</span> <span class="o">==</span> <span class="n">INT_MAX</span><span class="p">:</span>
</span><span id="LinearExpr-453"><a href="#LinearExpr-453"><span class="linenos">453</span></a>                <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="n">INT_MAX</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="LinearExpr-454"><a href="#LinearExpr-454"><span class="linenos">454</span></a>            <span class="k">elif</span> <span class="n">arg</span> <span class="o">==</span> <span class="n">INT_MIN</span><span class="p">:</span>
</span><span id="LinearExpr-455"><a href="#LinearExpr-455"><span class="linenos">455</span></a>                <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">INT_MIN</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="LinearExpr-456"><a href="#LinearExpr-456"><span class="linenos">456</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-457"><a href="#LinearExpr-457"><span class="linenos">457</span></a>                <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span>
</span><span id="LinearExpr-458"><a href="#LinearExpr-458"><span class="linenos">458</span></a>                    <span class="bp">self</span><span class="p">,</span> <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="n">arg</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">arg</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="LinearExpr-459"><a href="#LinearExpr-459"><span class="linenos">459</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr-460"><a href="#LinearExpr-460"><span class="linenos">460</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span> <span class="o">-</span> <span class="n">arg</span><span class="p">,</span>
</span><span id="LinearExpr-461"><a href="#LinearExpr-461"><span class="linenos">461</span></a>                                           <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>Holds an integer linear expression.</p>

<p>A linear expression is built from integer constants and variables.
For example, <code>x + 2 * (y - z + 1)</code>.</p>

<p>Linear expressions are used in CP-SAT models in constraints and in the
objective:</p>

<ul>
<li>You can define linear constraints as in:</li>
</ul>

<pre><code>model.Add(x + 2 * y &lt;= 5)
model.Add(sum(array_of_vars) == 5)
</code></pre>

<ul>
<li>In CP-SAT, the objective is a linear expression:</li>
</ul>

<pre><code>model.Minimize(x + 2 * y + z)
</code></pre>

<ul>
<li>For large arrays, using the LinearExpr class is faster that using the python
<code>sum()</code> function. You can create constraints and the objective from lists of
linear expressions or coefficients as follows:</li>
</ul>

<pre><code>model.Minimize(cp_model.LinearExpr.Sum(expressions))
model.Add(cp_model.LinearExpr.WeightedSum(expressions, coefficients) &gt;= 0)
</code></pre>
</div>


                            <div id="LinearExpr.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">LinearExpr</span><span class="signature pdoc-code condensed">()</span>

        
    </div>
    <a class="headerlink" href="#LinearExpr.__init__"></a>
    
    

                            </div>
                            <div id="LinearExpr.Sum" class="classattr">
                                        <input id="LinearExpr.Sum-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">Sum</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">expressions</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LinearExpr.Sum-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearExpr.Sum"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearExpr.Sum-180"><a href="#LinearExpr.Sum-180"><span class="linenos">180</span></a>    <span class="nd">@classmethod</span>
</span><span id="LinearExpr.Sum-181"><a href="#LinearExpr.Sum-181"><span class="linenos">181</span></a>    <span class="k">def</span> <span class="nf">Sum</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">expressions</span><span class="p">):</span>
</span><span id="LinearExpr.Sum-182"><a href="#LinearExpr.Sum-182"><span class="linenos">182</span></a>        <span class="sd">&quot;&quot;&quot;Creates the expression sum(expressions).&quot;&quot;&quot;</span>
</span><span id="LinearExpr.Sum-183"><a href="#LinearExpr.Sum-183"><span class="linenos">183</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="LinearExpr.Sum-184"><a href="#LinearExpr.Sum-184"><span class="linenos">184</span></a>            <span class="k">return</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="LinearExpr.Sum-185"><a href="#LinearExpr.Sum-185"><span class="linenos">185</span></a>        <span class="k">return</span> <span class="n">_SumArray</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Creates the expression sum(expressions).</p>
</div>


                            </div>
                            <div id="LinearExpr.WeightedSum" class="classattr">
                                        <input id="LinearExpr.WeightedSum-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">WeightedSum</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">expressions</span>, </span><span class="param"><span class="n">coefficients</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LinearExpr.WeightedSum-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearExpr.WeightedSum"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearExpr.WeightedSum-187"><a href="#LinearExpr.WeightedSum-187"><span class="linenos">187</span></a>    <span class="nd">@classmethod</span>
</span><span id="LinearExpr.WeightedSum-188"><a href="#LinearExpr.WeightedSum-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="nf">WeightedSum</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">expressions</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">):</span>
</span><span id="LinearExpr.WeightedSum-189"><a href="#LinearExpr.WeightedSum-189"><span class="linenos">189</span></a>        <span class="sd">&quot;&quot;&quot;Creates the expression sum(expressions[i] * coefficients[i]).&quot;&quot;&quot;</span>
</span><span id="LinearExpr.WeightedSum-190"><a href="#LinearExpr.WeightedSum-190"><span class="linenos">190</span></a>        <span class="k">if</span> <span class="n">LinearExpr</span><span class="o">.</span><span class="n">IsEmptyOrAllNull</span><span class="p">(</span><span class="n">coefficients</span><span class="p">):</span>
</span><span id="LinearExpr.WeightedSum-191"><a href="#LinearExpr.WeightedSum-191"><span class="linenos">191</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="LinearExpr.WeightedSum-192"><a href="#LinearExpr.WeightedSum-192"><span class="linenos">192</span></a>        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="LinearExpr.WeightedSum-193"><a href="#LinearExpr.WeightedSum-193"><span class="linenos">193</span></a>            <span class="k">return</span> <span class="n">expressions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">coefficients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="LinearExpr.WeightedSum-194"><a href="#LinearExpr.WeightedSum-194"><span class="linenos">194</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr.WeightedSum-195"><a href="#LinearExpr.WeightedSum-195"><span class="linenos">195</span></a>            <span class="k">return</span> <span class="n">_WeightedSum</span><span class="p">(</span><span class="n">expressions</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Creates the expression sum(expressions[i] * coefficients[i]).</p>
</div>


                            </div>
                            <div id="LinearExpr.Term" class="classattr">
                                        <input id="LinearExpr.Term-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">Term</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">expression</span>, </span><span class="param"><span class="n">coefficient</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LinearExpr.Term-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearExpr.Term"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearExpr.Term-197"><a href="#LinearExpr.Term-197"><span class="linenos">197</span></a>    <span class="nd">@classmethod</span>
</span><span id="LinearExpr.Term-198"><a href="#LinearExpr.Term-198"><span class="linenos">198</span></a>    <span class="k">def</span> <span class="nf">Term</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">expression</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">):</span>
</span><span id="LinearExpr.Term-199"><a href="#LinearExpr.Term-199"><span class="linenos">199</span></a>        <span class="sd">&quot;&quot;&quot;Creates `expression * coefficient`.&quot;&quot;&quot;</span>
</span><span id="LinearExpr.Term-200"><a href="#LinearExpr.Term-200"><span class="linenos">200</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">coefficient</span><span class="p">):</span>
</span><span id="LinearExpr.Term-201"><a href="#LinearExpr.Term-201"><span class="linenos">201</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="LinearExpr.Term-202"><a href="#LinearExpr.Term-202"><span class="linenos">202</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr.Term-203"><a href="#LinearExpr.Term-203"><span class="linenos">203</span></a>            <span class="k">return</span> <span class="n">expression</span> <span class="o">*</span> <span class="n">coefficient</span>
</span></pre></div>


            <div class="docstring"><p>Creates <code>expression * coefficient</code>.</p>
</div>


                            </div>
                            <div id="LinearExpr.IsEmptyOrAllNull" class="classattr">
                                        <input id="LinearExpr.IsEmptyOrAllNull-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">IsEmptyOrAllNull</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">coefficients</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LinearExpr.IsEmptyOrAllNull-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearExpr.IsEmptyOrAllNull"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearExpr.IsEmptyOrAllNull-205"><a href="#LinearExpr.IsEmptyOrAllNull-205"><span class="linenos">205</span></a>    <span class="nd">@classmethod</span>
</span><span id="LinearExpr.IsEmptyOrAllNull-206"><a href="#LinearExpr.IsEmptyOrAllNull-206"><span class="linenos">206</span></a>    <span class="k">def</span> <span class="nf">IsEmptyOrAllNull</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">):</span>
</span><span id="LinearExpr.IsEmptyOrAllNull-207"><a href="#LinearExpr.IsEmptyOrAllNull-207"><span class="linenos">207</span></a>        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">coefficients</span><span class="p">:</span>
</span><span id="LinearExpr.IsEmptyOrAllNull-208"><a href="#LinearExpr.IsEmptyOrAllNull-208"><span class="linenos">208</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_zero</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
</span><span id="LinearExpr.IsEmptyOrAllNull-209"><a href="#LinearExpr.IsEmptyOrAllNull-209"><span class="linenos">209</span></a>                <span class="k">return</span> <span class="kc">False</span>
</span><span id="LinearExpr.IsEmptyOrAllNull-210"><a href="#LinearExpr.IsEmptyOrAllNull-210"><span class="linenos">210</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearExpr.RebuildFromLinearExpressionProto" class="classattr">
                                        <input id="LinearExpr.RebuildFromLinearExpressionProto-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">RebuildFromLinearExpressionProto</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">model</span>, </span><span class="param"><span class="n">proto</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LinearExpr.RebuildFromLinearExpressionProto-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearExpr.RebuildFromLinearExpressionProto"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearExpr.RebuildFromLinearExpressionProto-212"><a href="#LinearExpr.RebuildFromLinearExpressionProto-212"><span class="linenos">212</span></a>    <span class="nd">@classmethod</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-213"><a href="#LinearExpr.RebuildFromLinearExpressionProto-213"><span class="linenos">213</span></a>    <span class="k">def</span> <span class="nf">RebuildFromLinearExpressionProto</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">proto</span><span class="p">):</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-214"><a href="#LinearExpr.RebuildFromLinearExpressionProto-214"><span class="linenos">214</span></a>        <span class="sd">&quot;&quot;&quot;Recreate a LinearExpr from a LinearExpressionProto.&quot;&quot;&quot;</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-215"><a href="#LinearExpr.RebuildFromLinearExpressionProto-215"><span class="linenos">215</span></a>        <span class="n">offset</span> <span class="o">=</span> <span class="n">proto</span><span class="o">.</span><span class="n">offset</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-216"><a href="#LinearExpr.RebuildFromLinearExpressionProto-216"><span class="linenos">216</span></a>        <span class="n">num_elements</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">proto</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-217"><a href="#LinearExpr.RebuildFromLinearExpressionProto-217"><span class="linenos">217</span></a>        <span class="k">if</span> <span class="n">num_elements</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-218"><a href="#LinearExpr.RebuildFromLinearExpressionProto-218"><span class="linenos">218</span></a>            <span class="k">return</span> <span class="n">offset</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-219"><a href="#LinearExpr.RebuildFromLinearExpressionProto-219"><span class="linenos">219</span></a>        <span class="k">elif</span> <span class="n">num_elements</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-220"><a href="#LinearExpr.RebuildFromLinearExpressionProto-220"><span class="linenos">220</span></a>            <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">proto</span><span class="o">.</span><span class="n">vars</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="kc">None</span><span class="p">)</span> <span class="o">*</span> <span class="n">proto</span><span class="o">.</span><span class="n">coeffs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">offset</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-221"><a href="#LinearExpr.RebuildFromLinearExpressionProto-221"><span class="linenos">221</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-222"><a href="#LinearExpr.RebuildFromLinearExpressionProto-222"><span class="linenos">222</span></a>            <span class="n">variables</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-223"><a href="#LinearExpr.RebuildFromLinearExpressionProto-223"><span class="linenos">223</span></a>            <span class="n">coeffs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-224"><a href="#LinearExpr.RebuildFromLinearExpressionProto-224"><span class="linenos">224</span></a>            <span class="n">all_ones</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-225"><a href="#LinearExpr.RebuildFromLinearExpressionProto-225"><span class="linenos">225</span></a>            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">coeff</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">proto</span><span class="o">.</span><span class="n">vars</span><span class="p">(),</span> <span class="n">proto</span><span class="o">.</span><span class="n">coeffs</span><span class="p">()):</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-226"><a href="#LinearExpr.RebuildFromLinearExpressionProto-226"><span class="linenos">226</span></a>                <span class="n">variables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">IntVar</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-227"><a href="#LinearExpr.RebuildFromLinearExpressionProto-227"><span class="linenos">227</span></a>                <span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">coeff</span><span class="p">)</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-228"><a href="#LinearExpr.RebuildFromLinearExpressionProto-228"><span class="linenos">228</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_one</span><span class="p">(</span><span class="n">coeff</span><span class="p">):</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-229"><a href="#LinearExpr.RebuildFromLinearExpressionProto-229"><span class="linenos">229</span></a>                    <span class="n">all_ones</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-230"><a href="#LinearExpr.RebuildFromLinearExpressionProto-230"><span class="linenos">230</span></a>            <span class="k">if</span> <span class="n">all_ones</span><span class="p">:</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-231"><a href="#LinearExpr.RebuildFromLinearExpressionProto-231"><span class="linenos">231</span></a>                <span class="k">return</span> <span class="n">_SumArray</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-232"><a href="#LinearExpr.RebuildFromLinearExpressionProto-232"><span class="linenos">232</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr.RebuildFromLinearExpressionProto-233"><a href="#LinearExpr.RebuildFromLinearExpressionProto-233"><span class="linenos">233</span></a>                <span class="k">return</span> <span class="n">_WeightedSum</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">coeffs</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Recreate a LinearExpr from a LinearExpressionProto.</p>
</div>


                            </div>
                            <div id="LinearExpr.GetIntegerVarValueMap" class="classattr">
                                        <input id="LinearExpr.GetIntegerVarValueMap-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">GetIntegerVarValueMap</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LinearExpr.GetIntegerVarValueMap-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearExpr.GetIntegerVarValueMap"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearExpr.GetIntegerVarValueMap-235"><a href="#LinearExpr.GetIntegerVarValueMap-235"><span class="linenos">235</span></a>    <span class="k">def</span> <span class="nf">GetIntegerVarValueMap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-236"><a href="#LinearExpr.GetIntegerVarValueMap-236"><span class="linenos">236</span></a>        <span class="sd">&quot;&quot;&quot;Scans the expression, and returns (var_coef_map, constant).&quot;&quot;&quot;</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-237"><a href="#LinearExpr.GetIntegerVarValueMap-237"><span class="linenos">237</span></a>        <span class="n">coeffs</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-238"><a href="#LinearExpr.GetIntegerVarValueMap-238"><span class="linenos">238</span></a>        <span class="n">constant</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-239"><a href="#LinearExpr.GetIntegerVarValueMap-239"><span class="linenos">239</span></a>        <span class="n">to_process</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-240"><a href="#LinearExpr.GetIntegerVarValueMap-240"><span class="linenos">240</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>  <span class="c1"># Flatten to avoid recursion.</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-241"><a href="#LinearExpr.GetIntegerVarValueMap-241"><span class="linenos">241</span></a>            <span class="n">expr</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-242"><a href="#LinearExpr.GetIntegerVarValueMap-242"><span class="linenos">242</span></a>            <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-243"><a href="#LinearExpr.GetIntegerVarValueMap-243"><span class="linenos">243</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-244"><a href="#LinearExpr.GetIntegerVarValueMap-244"><span class="linenos">244</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">):</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-245"><a href="#LinearExpr.GetIntegerVarValueMap-245"><span class="linenos">245</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-246"><a href="#LinearExpr.GetIntegerVarValueMap-246"><span class="linenos">246</span></a>                    <span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()))</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-247"><a href="#LinearExpr.GetIntegerVarValueMap-247"><span class="linenos">247</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_Sum</span><span class="p">):</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-248"><a href="#LinearExpr.GetIntegerVarValueMap-248"><span class="linenos">248</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Left</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-249"><a href="#LinearExpr.GetIntegerVarValueMap-249"><span class="linenos">249</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Right</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-250"><a href="#LinearExpr.GetIntegerVarValueMap-250"><span class="linenos">250</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_SumArray</span><span class="p">):</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-251"><a href="#LinearExpr.GetIntegerVarValueMap-251"><span class="linenos">251</span></a>                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">():</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-252"><a href="#LinearExpr.GetIntegerVarValueMap-252"><span class="linenos">252</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-253"><a href="#LinearExpr.GetIntegerVarValueMap-253"><span class="linenos">253</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-254"><a href="#LinearExpr.GetIntegerVarValueMap-254"><span class="linenos">254</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_WeightedSum</span><span class="p">):</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-255"><a href="#LinearExpr.GetIntegerVarValueMap-255"><span class="linenos">255</span></a>                <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">(),</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficients</span><span class="p">()):</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-256"><a href="#LinearExpr.GetIntegerVarValueMap-256"><span class="linenos">256</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">c</span><span class="p">))</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-257"><a href="#LinearExpr.GetIntegerVarValueMap-257"><span class="linenos">257</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-258"><a href="#LinearExpr.GetIntegerVarValueMap-258"><span class="linenos">258</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-259"><a href="#LinearExpr.GetIntegerVarValueMap-259"><span class="linenos">259</span></a>                <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">+=</span> <span class="n">coeff</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-260"><a href="#LinearExpr.GetIntegerVarValueMap-260"><span class="linenos">260</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-261"><a href="#LinearExpr.GetIntegerVarValueMap-261"><span class="linenos">261</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-262"><a href="#LinearExpr.GetIntegerVarValueMap-262"><span class="linenos">262</span></a>                <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()]</span> <span class="o">-=</span> <span class="n">coeff</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-263"><a href="#LinearExpr.GetIntegerVarValueMap-263"><span class="linenos">263</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-264"><a href="#LinearExpr.GetIntegerVarValueMap-264"><span class="linenos">264</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Unrecognized linear expression: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</span><span id="LinearExpr.GetIntegerVarValueMap-265"><a href="#LinearExpr.GetIntegerVarValueMap-265"><span class="linenos">265</span></a>
</span><span id="LinearExpr.GetIntegerVarValueMap-266"><a href="#LinearExpr.GetIntegerVarValueMap-266"><span class="linenos">266</span></a>        <span class="k">return</span> <span class="n">coeffs</span><span class="p">,</span> <span class="n">constant</span>
</span></pre></div>


            <div class="docstring"><p>Scans the expression, and returns (var_coef_map, constant).</p>
</div>


                            </div>
                            <div id="LinearExpr.GetFloatVarValueMap" class="classattr">
                                        <input id="LinearExpr.GetFloatVarValueMap-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">GetFloatVarValueMap</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LinearExpr.GetFloatVarValueMap-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearExpr.GetFloatVarValueMap"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearExpr.GetFloatVarValueMap-268"><a href="#LinearExpr.GetFloatVarValueMap-268"><span class="linenos">268</span></a>    <span class="k">def</span> <span class="nf">GetFloatVarValueMap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearExpr.GetFloatVarValueMap-269"><a href="#LinearExpr.GetFloatVarValueMap-269"><span class="linenos">269</span></a>        <span class="sd">&quot;&quot;&quot;Scans the expression. Returns (var_coef_map, constant, is_integer).&quot;&quot;&quot;</span>
</span><span id="LinearExpr.GetFloatVarValueMap-270"><a href="#LinearExpr.GetFloatVarValueMap-270"><span class="linenos">270</span></a>        <span class="n">coeffs</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="LinearExpr.GetFloatVarValueMap-271"><a href="#LinearExpr.GetFloatVarValueMap-271"><span class="linenos">271</span></a>        <span class="n">constant</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="LinearExpr.GetFloatVarValueMap-272"><a href="#LinearExpr.GetFloatVarValueMap-272"><span class="linenos">272</span></a>        <span class="n">to_process</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">self</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</span><span id="LinearExpr.GetFloatVarValueMap-273"><a href="#LinearExpr.GetFloatVarValueMap-273"><span class="linenos">273</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>  <span class="c1"># Flatten to avoid recursion.</span>
</span><span id="LinearExpr.GetFloatVarValueMap-274"><a href="#LinearExpr.GetFloatVarValueMap-274"><span class="linenos">274</span></a>            <span class="n">expr</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="LinearExpr.GetFloatVarValueMap-275"><a href="#LinearExpr.GetFloatVarValueMap-275"><span class="linenos">275</span></a>            <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>  <span class="c1"># Keep integrality.</span>
</span><span id="LinearExpr.GetFloatVarValueMap-276"><a href="#LinearExpr.GetFloatVarValueMap-276"><span class="linenos">276</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="nb">int</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="LinearExpr.GetFloatVarValueMap-277"><a href="#LinearExpr.GetFloatVarValueMap-277"><span class="linenos">277</span></a>            <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_a_number</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
</span><span id="LinearExpr.GetFloatVarValueMap-278"><a href="#LinearExpr.GetFloatVarValueMap-278"><span class="linenos">278</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="LinearExpr.GetFloatVarValueMap-279"><a href="#LinearExpr.GetFloatVarValueMap-279"><span class="linenos">279</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">):</span>
</span><span id="LinearExpr.GetFloatVarValueMap-280"><a href="#LinearExpr.GetFloatVarValueMap-280"><span class="linenos">280</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="LinearExpr.GetFloatVarValueMap-281"><a href="#LinearExpr.GetFloatVarValueMap-281"><span class="linenos">281</span></a>                    <span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()))</span>
</span><span id="LinearExpr.GetFloatVarValueMap-282"><a href="#LinearExpr.GetFloatVarValueMap-282"><span class="linenos">282</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_Sum</span><span class="p">):</span>
</span><span id="LinearExpr.GetFloatVarValueMap-283"><a href="#LinearExpr.GetFloatVarValueMap-283"><span class="linenos">283</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Left</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="LinearExpr.GetFloatVarValueMap-284"><a href="#LinearExpr.GetFloatVarValueMap-284"><span class="linenos">284</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Right</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="LinearExpr.GetFloatVarValueMap-285"><a href="#LinearExpr.GetFloatVarValueMap-285"><span class="linenos">285</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_SumArray</span><span class="p">):</span>
</span><span id="LinearExpr.GetFloatVarValueMap-286"><a href="#LinearExpr.GetFloatVarValueMap-286"><span class="linenos">286</span></a>                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">():</span>
</span><span id="LinearExpr.GetFloatVarValueMap-287"><a href="#LinearExpr.GetFloatVarValueMap-287"><span class="linenos">287</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="LinearExpr.GetFloatVarValueMap-288"><a href="#LinearExpr.GetFloatVarValueMap-288"><span class="linenos">288</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="LinearExpr.GetFloatVarValueMap-289"><a href="#LinearExpr.GetFloatVarValueMap-289"><span class="linenos">289</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_WeightedSum</span><span class="p">):</span>
</span><span id="LinearExpr.GetFloatVarValueMap-290"><a href="#LinearExpr.GetFloatVarValueMap-290"><span class="linenos">290</span></a>                <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">(),</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficients</span><span class="p">()):</span>
</span><span id="LinearExpr.GetFloatVarValueMap-291"><a href="#LinearExpr.GetFloatVarValueMap-291"><span class="linenos">291</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">c</span><span class="p">))</span>
</span><span id="LinearExpr.GetFloatVarValueMap-292"><a href="#LinearExpr.GetFloatVarValueMap-292"><span class="linenos">292</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="LinearExpr.GetFloatVarValueMap-293"><a href="#LinearExpr.GetFloatVarValueMap-293"><span class="linenos">293</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="LinearExpr.GetFloatVarValueMap-294"><a href="#LinearExpr.GetFloatVarValueMap-294"><span class="linenos">294</span></a>                <span class="k">if</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">coeffs</span><span class="p">:</span>
</span><span id="LinearExpr.GetFloatVarValueMap-295"><a href="#LinearExpr.GetFloatVarValueMap-295"><span class="linenos">295</span></a>                    <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">+=</span> <span class="n">coeff</span>
</span><span id="LinearExpr.GetFloatVarValueMap-296"><a href="#LinearExpr.GetFloatVarValueMap-296"><span class="linenos">296</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr.GetFloatVarValueMap-297"><a href="#LinearExpr.GetFloatVarValueMap-297"><span class="linenos">297</span></a>                    <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span> <span class="o">=</span> <span class="n">coeff</span>
</span><span id="LinearExpr.GetFloatVarValueMap-298"><a href="#LinearExpr.GetFloatVarValueMap-298"><span class="linenos">298</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="LinearExpr.GetFloatVarValueMap-299"><a href="#LinearExpr.GetFloatVarValueMap-299"><span class="linenos">299</span></a>                <span class="n">constant</span> <span class="o">+=</span> <span class="n">coeff</span>
</span><span id="LinearExpr.GetFloatVarValueMap-300"><a href="#LinearExpr.GetFloatVarValueMap-300"><span class="linenos">300</span></a>                <span class="k">if</span> <span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()</span> <span class="ow">in</span> <span class="n">coeffs</span><span class="p">:</span>
</span><span id="LinearExpr.GetFloatVarValueMap-301"><a href="#LinearExpr.GetFloatVarValueMap-301"><span class="linenos">301</span></a>                    <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()]</span> <span class="o">-=</span> <span class="n">coeff</span>
</span><span id="LinearExpr.GetFloatVarValueMap-302"><a href="#LinearExpr.GetFloatVarValueMap-302"><span class="linenos">302</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr.GetFloatVarValueMap-303"><a href="#LinearExpr.GetFloatVarValueMap-303"><span class="linenos">303</span></a>                    <span class="n">coeffs</span><span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()]</span> <span class="o">=</span> <span class="o">-</span><span class="n">coeff</span>
</span><span id="LinearExpr.GetFloatVarValueMap-304"><a href="#LinearExpr.GetFloatVarValueMap-304"><span class="linenos">304</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpr.GetFloatVarValueMap-305"><a href="#LinearExpr.GetFloatVarValueMap-305"><span class="linenos">305</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Unrecognized linear expression: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</span><span id="LinearExpr.GetFloatVarValueMap-306"><a href="#LinearExpr.GetFloatVarValueMap-306"><span class="linenos">306</span></a>        <span class="n">is_integer</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">constant</span><span class="p">)</span>
</span><span id="LinearExpr.GetFloatVarValueMap-307"><a href="#LinearExpr.GetFloatVarValueMap-307"><span class="linenos">307</span></a>        <span class="k">if</span> <span class="n">is_integer</span><span class="p">:</span>
</span><span id="LinearExpr.GetFloatVarValueMap-308"><a href="#LinearExpr.GetFloatVarValueMap-308"><span class="linenos">308</span></a>            <span class="k">for</span> <span class="n">coeff</span> <span class="ow">in</span> <span class="n">coeffs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="LinearExpr.GetFloatVarValueMap-309"><a href="#LinearExpr.GetFloatVarValueMap-309"><span class="linenos">309</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">coeff</span><span class="p">):</span>
</span><span id="LinearExpr.GetFloatVarValueMap-310"><a href="#LinearExpr.GetFloatVarValueMap-310"><span class="linenos">310</span></a>                    <span class="n">is_integer</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="LinearExpr.GetFloatVarValueMap-311"><a href="#LinearExpr.GetFloatVarValueMap-311"><span class="linenos">311</span></a>                    <span class="k">break</span>
</span><span id="LinearExpr.GetFloatVarValueMap-312"><a href="#LinearExpr.GetFloatVarValueMap-312"><span class="linenos">312</span></a>        <span class="k">return</span> <span class="n">coeffs</span><span class="p">,</span> <span class="n">constant</span><span class="p">,</span> <span class="n">is_integer</span>
</span></pre></div>


            <div class="docstring"><p>Scans the expression. Returns (var_coef_map, constant, is_integer).</p>
</div>


                            </div>
                </section>
                <section id="IntVar">
                            <input id="IntVar-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">IntVar</span><wbr>(<span class="base"><a href="#LinearExpr">LinearExpr</a></span>):

                <label class="view-source-button" for="IntVar-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntVar"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntVar-615"><a href="#IntVar-615"><span class="linenos">615</span></a><span class="k">class</span> <span class="nc">IntVar</span><span class="p">(</span><span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="IntVar-616"><a href="#IntVar-616"><span class="linenos">616</span></a>    <span class="sd">&quot;&quot;&quot;An integer variable.</span>
</span><span id="IntVar-617"><a href="#IntVar-617"><span class="linenos">617</span></a>
</span><span id="IntVar-618"><a href="#IntVar-618"><span class="linenos">618</span></a><span class="sd">  An IntVar is an object that can take on any integer value within defined</span>
</span><span id="IntVar-619"><a href="#IntVar-619"><span class="linenos">619</span></a><span class="sd">  ranges. Variables appear in constraint like:</span>
</span><span id="IntVar-620"><a href="#IntVar-620"><span class="linenos">620</span></a>
</span><span id="IntVar-621"><a href="#IntVar-621"><span class="linenos">621</span></a><span class="sd">      x + y &gt;= 5</span>
</span><span id="IntVar-622"><a href="#IntVar-622"><span class="linenos">622</span></a><span class="sd">      AllDifferent([x, y, z])</span>
</span><span id="IntVar-623"><a href="#IntVar-623"><span class="linenos">623</span></a>
</span><span id="IntVar-624"><a href="#IntVar-624"><span class="linenos">624</span></a><span class="sd">  Solving a model is equivalent to finding, for each variable, a single value</span>
</span><span id="IntVar-625"><a href="#IntVar-625"><span class="linenos">625</span></a><span class="sd">  from the set of initial values (called the initial domain), such that the</span>
</span><span id="IntVar-626"><a href="#IntVar-626"><span class="linenos">626</span></a><span class="sd">  model is feasible, or optimal if you provided an objective function.</span>
</span><span id="IntVar-627"><a href="#IntVar-627"><span class="linenos">627</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="IntVar-628"><a href="#IntVar-628"><span class="linenos">628</span></a>
</span><span id="IntVar-629"><a href="#IntVar-629"><span class="linenos">629</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="IntVar-630"><a href="#IntVar-630"><span class="linenos">630</span></a>        <span class="sd">&quot;&quot;&quot;See CpModel.NewIntVar below.&quot;&quot;&quot;</span>
</span><span id="IntVar-631"><a href="#IntVar-631"><span class="linenos">631</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__negation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="IntVar-632"><a href="#IntVar-632"><span class="linenos">632</span></a>        <span class="c1"># Python do not support multiple __init__ methods.</span>
</span><span id="IntVar-633"><a href="#IntVar-633"><span class="linenos">633</span></a>        <span class="c1"># This method is only called from the CpModel class.</span>
</span><span id="IntVar-634"><a href="#IntVar-634"><span class="linenos">634</span></a>        <span class="c1"># We hack the parameter to support the two cases:</span>
</span><span id="IntVar-635"><a href="#IntVar-635"><span class="linenos">635</span></a>        <span class="c1"># case 1:</span>
</span><span id="IntVar-636"><a href="#IntVar-636"><span class="linenos">636</span></a>        <span class="c1">#     model is a CpModelProto, domain is a Domain, and name is a string.</span>
</span><span id="IntVar-637"><a href="#IntVar-637"><span class="linenos">637</span></a>        <span class="c1"># case 2:</span>
</span><span id="IntVar-638"><a href="#IntVar-638"><span class="linenos">638</span></a>        <span class="c1">#     model is a CpModelProto, domain is an index (int), and name is None.</span>
</span><span id="IntVar-639"><a href="#IntVar-639"><span class="linenos">639</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IntVar-640"><a href="#IntVar-640"><span class="linenos">640</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
</span><span id="IntVar-641"><a href="#IntVar-641"><span class="linenos">641</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__var</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">domain</span><span class="p">]</span>
</span><span id="IntVar-642"><a href="#IntVar-642"><span class="linenos">642</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IntVar-643"><a href="#IntVar-643"><span class="linenos">643</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
</span><span id="IntVar-644"><a href="#IntVar-644"><span class="linenos">644</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__var</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="IntVar-645"><a href="#IntVar-645"><span class="linenos">645</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">FlattenedIntervals</span><span class="p">())</span>
</span><span id="IntVar-646"><a href="#IntVar-646"><span class="linenos">646</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="IntVar-647"><a href="#IntVar-647"><span class="linenos">647</span></a>
</span><span id="IntVar-648"><a href="#IntVar-648"><span class="linenos">648</span></a>    <span class="k">def</span> <span class="nf">Index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntVar-649"><a href="#IntVar-649"><span class="linenos">649</span></a>        <span class="sd">&quot;&quot;&quot;Returns the index of the variable in the model.&quot;&quot;&quot;</span>
</span><span id="IntVar-650"><a href="#IntVar-650"><span class="linenos">650</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__index</span>
</span><span id="IntVar-651"><a href="#IntVar-651"><span class="linenos">651</span></a>
</span><span id="IntVar-652"><a href="#IntVar-652"><span class="linenos">652</span></a>    <span class="k">def</span> <span class="nf">Proto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntVar-653"><a href="#IntVar-653"><span class="linenos">653</span></a>        <span class="sd">&quot;&quot;&quot;Returns the variable protobuf.&quot;&quot;&quot;</span>
</span><span id="IntVar-654"><a href="#IntVar-654"><span class="linenos">654</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span>
</span><span id="IntVar-655"><a href="#IntVar-655"><span class="linenos">655</span></a>
</span><span id="IntVar-656"><a href="#IntVar-656"><span class="linenos">656</span></a>    <span class="k">def</span> <span class="nf">IsEqualTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="IntVar-657"><a href="#IntVar-657"><span class="linenos">657</span></a>        <span class="sd">&quot;&quot;&quot;Returns true if self == other in the python sense.&quot;&quot;&quot;</span>
</span><span id="IntVar-658"><a href="#IntVar-658"><span class="linenos">658</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="IntVar-659"><a href="#IntVar-659"><span class="linenos">659</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="IntVar-660"><a href="#IntVar-660"><span class="linenos">660</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="IntVar-661"><a href="#IntVar-661"><span class="linenos">661</span></a>
</span><span id="IntVar-662"><a href="#IntVar-662"><span class="linenos">662</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntVar-663"><a href="#IntVar-663"><span class="linenos">663</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
</span><span id="IntVar-664"><a href="#IntVar-664"><span class="linenos">664</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span>
</span><span id="IntVar-665"><a href="#IntVar-665"><span class="linenos">665</span></a>                  <span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="IntVar-666"><a href="#IntVar-666"><span class="linenos">666</span></a>                <span class="c1"># Special case for constants.</span>
</span><span id="IntVar-667"><a href="#IntVar-667"><span class="linenos">667</span></a>                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="IntVar-668"><a href="#IntVar-668"><span class="linenos">668</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="IntVar-669"><a href="#IntVar-669"><span class="linenos">669</span></a>                <span class="k">return</span> <span class="s1">&#39;unnamed_var_</span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">__index</span>
</span><span id="IntVar-670"><a href="#IntVar-670"><span class="linenos">670</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">name</span>
</span><span id="IntVar-671"><a href="#IntVar-671"><span class="linenos">671</span></a>
</span><span id="IntVar-672"><a href="#IntVar-672"><span class="linenos">672</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntVar-673"><a href="#IntVar-673"><span class="linenos">673</span></a>        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">DisplayBounds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span><span class="p">))</span>
</span><span id="IntVar-674"><a href="#IntVar-674"><span class="linenos">674</span></a>
</span><span id="IntVar-675"><a href="#IntVar-675"><span class="linenos">675</span></a>    <span class="k">def</span> <span class="nf">Name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntVar-676"><a href="#IntVar-676"><span class="linenos">676</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">name</span>
</span><span id="IntVar-677"><a href="#IntVar-677"><span class="linenos">677</span></a>
</span><span id="IntVar-678"><a href="#IntVar-678"><span class="linenos">678</span></a>    <span class="k">def</span> <span class="nf">Not</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntVar-679"><a href="#IntVar-679"><span class="linenos">679</span></a>        <span class="sd">&quot;&quot;&quot;Returns the negation of a Boolean variable.</span>
</span><span id="IntVar-680"><a href="#IntVar-680"><span class="linenos">680</span></a>
</span><span id="IntVar-681"><a href="#IntVar-681"><span class="linenos">681</span></a><span class="sd">    This method implements the logical negation of a Boolean variable.</span>
</span><span id="IntVar-682"><a href="#IntVar-682"><span class="linenos">682</span></a><span class="sd">    It is only valid if the variable has a Boolean domain (0 or 1).</span>
</span><span id="IntVar-683"><a href="#IntVar-683"><span class="linenos">683</span></a>
</span><span id="IntVar-684"><a href="#IntVar-684"><span class="linenos">684</span></a><span class="sd">    Note that this method is nilpotent: `x.Not().Not() == x`.</span>
</span><span id="IntVar-685"><a href="#IntVar-685"><span class="linenos">685</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="IntVar-686"><a href="#IntVar-686"><span class="linenos">686</span></a>
</span><span id="IntVar-687"><a href="#IntVar-687"><span class="linenos">687</span></a>        <span class="k">for</span> <span class="n">bound</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span><span class="p">:</span>
</span><span id="IntVar-688"><a href="#IntVar-688"><span class="linenos">688</span></a>            <span class="k">if</span> <span class="n">bound</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">bound</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="IntVar-689"><a href="#IntVar-689"><span class="linenos">689</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="IntVar-690"><a href="#IntVar-690"><span class="linenos">690</span></a>                    <span class="s1">&#39;Cannot call Not on a non boolean variable: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="IntVar-691"><a href="#IntVar-691"><span class="linenos">691</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__negation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IntVar-692"><a href="#IntVar-692"><span class="linenos">692</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__negation</span> <span class="o">=</span> <span class="n">_NotBooleanVariable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="IntVar-693"><a href="#IntVar-693"><span class="linenos">693</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__negation</span>
</span></pre></div>


            <div class="docstring"><p>An integer variable.</p>

<p>An IntVar is an object that can take on any integer value within defined
ranges. Variables appear in constraint like:</p>

<pre><code>x + y &gt;= 5
AllDifferent([x, y, z])
</code></pre>

<p>Solving a model is equivalent to finding, for each variable, a single value
from the set of initial values (called the initial domain), such that the
model is feasible, or optimal if you provided an objective function.</p>
</div>


                            <div id="IntVar.__init__" class="classattr">
                                        <input id="IntVar.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">IntVar</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">model</span>, </span><span class="param"><span class="n">domain</span>, </span><span class="param"><span class="n">name</span></span>)</span>

                <label class="view-source-button" for="IntVar.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntVar.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntVar.__init__-629"><a href="#IntVar.__init__-629"><span class="linenos">629</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="IntVar.__init__-630"><a href="#IntVar.__init__-630"><span class="linenos">630</span></a>        <span class="sd">&quot;&quot;&quot;See CpModel.NewIntVar below.&quot;&quot;&quot;</span>
</span><span id="IntVar.__init__-631"><a href="#IntVar.__init__-631"><span class="linenos">631</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__negation</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="IntVar.__init__-632"><a href="#IntVar.__init__-632"><span class="linenos">632</span></a>        <span class="c1"># Python do not support multiple __init__ methods.</span>
</span><span id="IntVar.__init__-633"><a href="#IntVar.__init__-633"><span class="linenos">633</span></a>        <span class="c1"># This method is only called from the CpModel class.</span>
</span><span id="IntVar.__init__-634"><a href="#IntVar.__init__-634"><span class="linenos">634</span></a>        <span class="c1"># We hack the parameter to support the two cases:</span>
</span><span id="IntVar.__init__-635"><a href="#IntVar.__init__-635"><span class="linenos">635</span></a>        <span class="c1"># case 1:</span>
</span><span id="IntVar.__init__-636"><a href="#IntVar.__init__-636"><span class="linenos">636</span></a>        <span class="c1">#     model is a CpModelProto, domain is a Domain, and name is a string.</span>
</span><span id="IntVar.__init__-637"><a href="#IntVar.__init__-637"><span class="linenos">637</span></a>        <span class="c1"># case 2:</span>
</span><span id="IntVar.__init__-638"><a href="#IntVar.__init__-638"><span class="linenos">638</span></a>        <span class="c1">#     model is a CpModelProto, domain is an index (int), and name is None.</span>
</span><span id="IntVar.__init__-639"><a href="#IntVar.__init__-639"><span class="linenos">639</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IntVar.__init__-640"><a href="#IntVar.__init__-640"><span class="linenos">640</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
</span><span id="IntVar.__init__-641"><a href="#IntVar.__init__-641"><span class="linenos">641</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__var</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">domain</span><span class="p">]</span>
</span><span id="IntVar.__init__-642"><a href="#IntVar.__init__-642"><span class="linenos">642</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IntVar.__init__-643"><a href="#IntVar.__init__-643"><span class="linenos">643</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
</span><span id="IntVar.__init__-644"><a href="#IntVar.__init__-644"><span class="linenos">644</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__var</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="IntVar.__init__-645"><a href="#IntVar.__init__-645"><span class="linenos">645</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">domain</span><span class="o">.</span><span class="n">FlattenedIntervals</span><span class="p">())</span>
</span><span id="IntVar.__init__-646"><a href="#IntVar.__init__-646"><span class="linenos">646</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span></pre></div>


            <div class="docstring"><p>See <a href="#CpModel.NewIntVar">CpModel.NewIntVar</a> below.</p>
</div>


                            </div>
                            <div id="IntVar.Index" class="classattr">
                                        <input id="IntVar.Index-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Index</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IntVar.Index-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntVar.Index"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntVar.Index-648"><a href="#IntVar.Index-648"><span class="linenos">648</span></a>    <span class="k">def</span> <span class="nf">Index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntVar.Index-649"><a href="#IntVar.Index-649"><span class="linenos">649</span></a>        <span class="sd">&quot;&quot;&quot;Returns the index of the variable in the model.&quot;&quot;&quot;</span>
</span><span id="IntVar.Index-650"><a href="#IntVar.Index-650"><span class="linenos">650</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__index</span>
</span></pre></div>


            <div class="docstring"><p>Returns the index of the variable in the model.</p>
</div>


                            </div>
                            <div id="IntVar.Proto" class="classattr">
                                        <input id="IntVar.Proto-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Proto</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IntVar.Proto-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntVar.Proto"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntVar.Proto-652"><a href="#IntVar.Proto-652"><span class="linenos">652</span></a>    <span class="k">def</span> <span class="nf">Proto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntVar.Proto-653"><a href="#IntVar.Proto-653"><span class="linenos">653</span></a>        <span class="sd">&quot;&quot;&quot;Returns the variable protobuf.&quot;&quot;&quot;</span>
</span><span id="IntVar.Proto-654"><a href="#IntVar.Proto-654"><span class="linenos">654</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span>
</span></pre></div>


            <div class="docstring"><p>Returns the variable protobuf.</p>
</div>


                            </div>
                            <div id="IntVar.IsEqualTo" class="classattr">
                                        <input id="IntVar.IsEqualTo-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">IsEqualTo</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">other</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IntVar.IsEqualTo-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntVar.IsEqualTo"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntVar.IsEqualTo-656"><a href="#IntVar.IsEqualTo-656"><span class="linenos">656</span></a>    <span class="k">def</span> <span class="nf">IsEqualTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="IntVar.IsEqualTo-657"><a href="#IntVar.IsEqualTo-657"><span class="linenos">657</span></a>        <span class="sd">&quot;&quot;&quot;Returns true if self == other in the python sense.&quot;&quot;&quot;</span>
</span><span id="IntVar.IsEqualTo-658"><a href="#IntVar.IsEqualTo-658"><span class="linenos">658</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="IntVar.IsEqualTo-659"><a href="#IntVar.IsEqualTo-659"><span class="linenos">659</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="IntVar.IsEqualTo-660"><a href="#IntVar.IsEqualTo-660"><span class="linenos">660</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Returns true if self == other in the python sense.</p>
</div>


                            </div>
                            <div id="IntVar.Name" class="classattr">
                                        <input id="IntVar.Name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IntVar.Name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntVar.Name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntVar.Name-675"><a href="#IntVar.Name-675"><span class="linenos">675</span></a>    <span class="k">def</span> <span class="nf">Name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntVar.Name-676"><a href="#IntVar.Name-676"><span class="linenos">676</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">name</span>
</span></pre></div>


    

                            </div>
                            <div id="IntVar.Not" class="classattr">
                                        <input id="IntVar.Not-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Not</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IntVar.Not-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntVar.Not"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntVar.Not-678"><a href="#IntVar.Not-678"><span class="linenos">678</span></a>    <span class="k">def</span> <span class="nf">Not</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntVar.Not-679"><a href="#IntVar.Not-679"><span class="linenos">679</span></a>        <span class="sd">&quot;&quot;&quot;Returns the negation of a Boolean variable.</span>
</span><span id="IntVar.Not-680"><a href="#IntVar.Not-680"><span class="linenos">680</span></a>
</span><span id="IntVar.Not-681"><a href="#IntVar.Not-681"><span class="linenos">681</span></a><span class="sd">    This method implements the logical negation of a Boolean variable.</span>
</span><span id="IntVar.Not-682"><a href="#IntVar.Not-682"><span class="linenos">682</span></a><span class="sd">    It is only valid if the variable has a Boolean domain (0 or 1).</span>
</span><span id="IntVar.Not-683"><a href="#IntVar.Not-683"><span class="linenos">683</span></a>
</span><span id="IntVar.Not-684"><a href="#IntVar.Not-684"><span class="linenos">684</span></a><span class="sd">    Note that this method is nilpotent: `x.Not().Not() == x`.</span>
</span><span id="IntVar.Not-685"><a href="#IntVar.Not-685"><span class="linenos">685</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="IntVar.Not-686"><a href="#IntVar.Not-686"><span class="linenos">686</span></a>
</span><span id="IntVar.Not-687"><a href="#IntVar.Not-687"><span class="linenos">687</span></a>        <span class="k">for</span> <span class="n">bound</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__var</span><span class="o">.</span><span class="n">domain</span><span class="p">:</span>
</span><span id="IntVar.Not-688"><a href="#IntVar.Not-688"><span class="linenos">688</span></a>            <span class="k">if</span> <span class="n">bound</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">bound</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="IntVar.Not-689"><a href="#IntVar.Not-689"><span class="linenos">689</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="IntVar.Not-690"><a href="#IntVar.Not-690"><span class="linenos">690</span></a>                    <span class="s1">&#39;Cannot call Not on a non boolean variable: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="IntVar.Not-691"><a href="#IntVar.Not-691"><span class="linenos">691</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__negation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IntVar.Not-692"><a href="#IntVar.Not-692"><span class="linenos">692</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__negation</span> <span class="o">=</span> <span class="n">_NotBooleanVariable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="IntVar.Not-693"><a href="#IntVar.Not-693"><span class="linenos">693</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__negation</span>
</span></pre></div>


            <div class="docstring"><p>Returns the negation of a Boolean variable.</p>

<p>This method implements the logical negation of a Boolean variable.
It is only valid if the variable has a Boolean domain (0 or 1).</p>

<p>Note that this method is nilpotent: <code>x.Not().Not() == x</code>.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#LinearExpr">LinearExpr</a></dt>
                                <dd id="IntVar.Sum" class="function"><a href="#LinearExpr.Sum">Sum</a></dd>
                <dd id="IntVar.WeightedSum" class="function"><a href="#LinearExpr.WeightedSum">WeightedSum</a></dd>
                <dd id="IntVar.Term" class="function"><a href="#LinearExpr.Term">Term</a></dd>
                <dd id="IntVar.IsEmptyOrAllNull" class="function"><a href="#LinearExpr.IsEmptyOrAllNull">IsEmptyOrAllNull</a></dd>
                <dd id="IntVar.RebuildFromLinearExpressionProto" class="function"><a href="#LinearExpr.RebuildFromLinearExpressionProto">RebuildFromLinearExpressionProto</a></dd>
                <dd id="IntVar.GetIntegerVarValueMap" class="function"><a href="#LinearExpr.GetIntegerVarValueMap">GetIntegerVarValueMap</a></dd>
                <dd id="IntVar.GetFloatVarValueMap" class="function"><a href="#LinearExpr.GetFloatVarValueMap">GetFloatVarValueMap</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="BoundedLinearExpression">
                            <input id="BoundedLinearExpression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">BoundedLinearExpression</span>:

                <label class="view-source-button" for="BoundedLinearExpression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BoundedLinearExpression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BoundedLinearExpression-716"><a href="#BoundedLinearExpression-716"><span class="linenos">716</span></a><span class="k">class</span> <span class="nc">BoundedLinearExpression</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="BoundedLinearExpression-717"><a href="#BoundedLinearExpression-717"><span class="linenos">717</span></a>    <span class="sd">&quot;&quot;&quot;Represents a linear constraint: `lb &lt;= linear expression &lt;= ub`.</span>
</span><span id="BoundedLinearExpression-718"><a href="#BoundedLinearExpression-718"><span class="linenos">718</span></a>
</span><span id="BoundedLinearExpression-719"><a href="#BoundedLinearExpression-719"><span class="linenos">719</span></a><span class="sd">  The only use of this class is to be added to the CpModel through</span>
</span><span id="BoundedLinearExpression-720"><a href="#BoundedLinearExpression-720"><span class="linenos">720</span></a><span class="sd">  `CpModel.Add(expression)`, as in:</span>
</span><span id="BoundedLinearExpression-721"><a href="#BoundedLinearExpression-721"><span class="linenos">721</span></a>
</span><span id="BoundedLinearExpression-722"><a href="#BoundedLinearExpression-722"><span class="linenos">722</span></a><span class="sd">      model.Add(x + 2 * y -1 &gt;= z)</span>
</span><span id="BoundedLinearExpression-723"><a href="#BoundedLinearExpression-723"><span class="linenos">723</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="BoundedLinearExpression-724"><a href="#BoundedLinearExpression-724"><span class="linenos">724</span></a>
</span><span id="BoundedLinearExpression-725"><a href="#BoundedLinearExpression-725"><span class="linenos">725</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">bounds</span><span class="p">):</span>
</span><span id="BoundedLinearExpression-726"><a href="#BoundedLinearExpression-726"><span class="linenos">726</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__expr</span> <span class="o">=</span> <span class="n">expr</span>
</span><span id="BoundedLinearExpression-727"><a href="#BoundedLinearExpression-727"><span class="linenos">727</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">=</span> <span class="n">bounds</span>
</span><span id="BoundedLinearExpression-728"><a href="#BoundedLinearExpression-728"><span class="linenos">728</span></a>
</span><span id="BoundedLinearExpression-729"><a href="#BoundedLinearExpression-729"><span class="linenos">729</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="BoundedLinearExpression-730"><a href="#BoundedLinearExpression-730"><span class="linenos">730</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="BoundedLinearExpression-731"><a href="#BoundedLinearExpression-731"><span class="linenos">731</span></a>            <span class="n">lb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="BoundedLinearExpression-732"><a href="#BoundedLinearExpression-732"><span class="linenos">732</span></a>            <span class="n">ub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="BoundedLinearExpression-733"><a href="#BoundedLinearExpression-733"><span class="linenos">733</span></a>            <span class="k">if</span> <span class="n">lb</span> <span class="o">&gt;</span> <span class="n">INT_MIN</span> <span class="ow">and</span> <span class="n">ub</span> <span class="o">&lt;</span> <span class="n">INT_MAX</span><span class="p">:</span>
</span><span id="BoundedLinearExpression-734"><a href="#BoundedLinearExpression-734"><span class="linenos">734</span></a>                <span class="k">if</span> <span class="n">lb</span> <span class="o">==</span> <span class="n">ub</span><span class="p">:</span>
</span><span id="BoundedLinearExpression-735"><a href="#BoundedLinearExpression-735"><span class="linenos">735</span></a>                    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; == &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span>
</span><span id="BoundedLinearExpression-736"><a href="#BoundedLinearExpression-736"><span class="linenos">736</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="BoundedLinearExpression-737"><a href="#BoundedLinearExpression-737"><span class="linenos">737</span></a>                    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &lt;= &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
</span><span id="BoundedLinearExpression-738"><a href="#BoundedLinearExpression-738"><span class="linenos">738</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &lt;= &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ub</span><span class="p">)</span>
</span><span id="BoundedLinearExpression-739"><a href="#BoundedLinearExpression-739"><span class="linenos">739</span></a>            <span class="k">elif</span> <span class="n">lb</span> <span class="o">&gt;</span> <span class="n">INT_MIN</span><span class="p">:</span>
</span><span id="BoundedLinearExpression-740"><a href="#BoundedLinearExpression-740"><span class="linenos">740</span></a>                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &gt;= &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">lb</span><span class="p">)</span>
</span><span id="BoundedLinearExpression-741"><a href="#BoundedLinearExpression-741"><span class="linenos">741</span></a>            <span class="k">elif</span> <span class="n">ub</span> <span class="o">&lt;</span> <span class="n">INT_MAX</span><span class="p">:</span>
</span><span id="BoundedLinearExpression-742"><a href="#BoundedLinearExpression-742"><span class="linenos">742</span></a>                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &lt;= &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ub</span><span class="p">)</span>
</span><span id="BoundedLinearExpression-743"><a href="#BoundedLinearExpression-743"><span class="linenos">743</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="BoundedLinearExpression-744"><a href="#BoundedLinearExpression-744"><span class="linenos">744</span></a>                <span class="k">return</span> <span class="s1">&#39;True (unbounded expr &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
</span><span id="BoundedLinearExpression-745"><a href="#BoundedLinearExpression-745"><span class="linenos">745</span></a>        <span class="k">elif</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">INT_MIN</span> <span class="ow">and</span>
</span><span id="BoundedLinearExpression-746"><a href="#BoundedLinearExpression-746"><span class="linenos">746</span></a>              <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">and</span>
</span><span id="BoundedLinearExpression-747"><a href="#BoundedLinearExpression-747"><span class="linenos">747</span></a>              <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="n">INT_MAX</span><span class="p">):</span>
</span><span id="BoundedLinearExpression-748"><a href="#BoundedLinearExpression-748"><span class="linenos">748</span></a>            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; != &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="BoundedLinearExpression-749"><a href="#BoundedLinearExpression-749"><span class="linenos">749</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BoundedLinearExpression-750"><a href="#BoundedLinearExpression-750"><span class="linenos">750</span></a>            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; in [&#39;</span> <span class="o">+</span> <span class="n">DisplayBounds</span><span class="p">(</span>
</span><span id="BoundedLinearExpression-751"><a href="#BoundedLinearExpression-751"><span class="linenos">751</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;]&#39;</span>
</span><span id="BoundedLinearExpression-752"><a href="#BoundedLinearExpression-752"><span class="linenos">752</span></a>
</span><span id="BoundedLinearExpression-753"><a href="#BoundedLinearExpression-753"><span class="linenos">753</span></a>    <span class="k">def</span> <span class="nf">Expression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="BoundedLinearExpression-754"><a href="#BoundedLinearExpression-754"><span class="linenos">754</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__expr</span>
</span><span id="BoundedLinearExpression-755"><a href="#BoundedLinearExpression-755"><span class="linenos">755</span></a>
</span><span id="BoundedLinearExpression-756"><a href="#BoundedLinearExpression-756"><span class="linenos">756</span></a>    <span class="k">def</span> <span class="nf">Bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="BoundedLinearExpression-757"><a href="#BoundedLinearExpression-757"><span class="linenos">757</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span>
</span><span id="BoundedLinearExpression-758"><a href="#BoundedLinearExpression-758"><span class="linenos">758</span></a>
</span><span id="BoundedLinearExpression-759"><a href="#BoundedLinearExpression-759"><span class="linenos">759</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="BoundedLinearExpression-760"><a href="#BoundedLinearExpression-760"><span class="linenos">760</span></a>        <span class="n">coeffs_map</span><span class="p">,</span> <span class="n">constant</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__expr</span><span class="o">.</span><span class="n">GetIntegerVarValueMap</span><span class="p">()</span>
</span><span id="BoundedLinearExpression-761"><a href="#BoundedLinearExpression-761"><span class="linenos">761</span></a>        <span class="n">all_coeffs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">coeffs_map</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
</span><span id="BoundedLinearExpression-762"><a href="#BoundedLinearExpression-762"><span class="linenos">762</span></a>        <span class="n">same_var</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span>
</span><span id="BoundedLinearExpression-763"><a href="#BoundedLinearExpression-763"><span class="linenos">763</span></a>        <span class="n">eq_bounds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="BoundedLinearExpression-764"><a href="#BoundedLinearExpression-764"><span class="linenos">764</span></a>        <span class="n">different_vars</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="BoundedLinearExpression-765"><a href="#BoundedLinearExpression-765"><span class="linenos">765</span></a>        <span class="n">ne_bounds</span> <span class="o">=</span> <span class="p">[</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">]</span>
</span><span id="BoundedLinearExpression-766"><a href="#BoundedLinearExpression-766"><span class="linenos">766</span></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">coeffs_map</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">all_coeffs</span> <span class="o">==</span> <span class="n">same_var</span> <span class="ow">and</span>
</span><span id="BoundedLinearExpression-767"><a href="#BoundedLinearExpression-767"><span class="linenos">767</span></a>                <span class="n">constant</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span>
</span><span id="BoundedLinearExpression-768"><a href="#BoundedLinearExpression-768"><span class="linenos">768</span></a>            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">==</span> <span class="n">eq_bounds</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">==</span> <span class="n">ne_bounds</span><span class="p">)):</span>
</span><span id="BoundedLinearExpression-769"><a href="#BoundedLinearExpression-769"><span class="linenos">769</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">==</span> <span class="n">eq_bounds</span>
</span><span id="BoundedLinearExpression-770"><a href="#BoundedLinearExpression-770"><span class="linenos">770</span></a>        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">coeffs_map</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">all_coeffs</span> <span class="o">==</span> <span class="n">different_vars</span> <span class="ow">and</span>
</span><span id="BoundedLinearExpression-771"><a href="#BoundedLinearExpression-771"><span class="linenos">771</span></a>                <span class="n">constant</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span>
</span><span id="BoundedLinearExpression-772"><a href="#BoundedLinearExpression-772"><span class="linenos">772</span></a>            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">==</span> <span class="n">eq_bounds</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">==</span> <span class="n">ne_bounds</span><span class="p">)):</span>
</span><span id="BoundedLinearExpression-773"><a href="#BoundedLinearExpression-773"><span class="linenos">773</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">==</span> <span class="n">ne_bounds</span>
</span><span id="BoundedLinearExpression-774"><a href="#BoundedLinearExpression-774"><span class="linenos">774</span></a>
</span><span id="BoundedLinearExpression-775"><a href="#BoundedLinearExpression-775"><span class="linenos">775</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
</span><span id="BoundedLinearExpression-776"><a href="#BoundedLinearExpression-776"><span class="linenos">776</span></a>            <span class="sa">f</span><span class="s1">&#39;Evaluating a BoundedLinearExpression </span><span class="se">\&#39;</span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="se">\&#39;</span><span class="s1"> as a Boolean value&#39;</span>
</span><span id="BoundedLinearExpression-777"><a href="#BoundedLinearExpression-777"><span class="linenos">777</span></a>            <span class="o">+</span> <span class="s1">&#39; is not supported.&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Represents a linear constraint: <code>lb &lt;= linear expression &lt;= ub</code>.</p>

<p>The only use of this class is to be added to the CpModel through
<code><a href="#CpModel.Add">CpModel.Add</a>(expression)</code>, as in:</p>

<pre><code>model.Add(x + 2 * y -1 &gt;= z)
</code></pre>
</div>


                            <div id="BoundedLinearExpression.__init__" class="classattr">
                                        <input id="BoundedLinearExpression.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">BoundedLinearExpression</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">expr</span>, </span><span class="param"><span class="n">bounds</span></span>)</span>

                <label class="view-source-button" for="BoundedLinearExpression.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BoundedLinearExpression.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BoundedLinearExpression.__init__-725"><a href="#BoundedLinearExpression.__init__-725"><span class="linenos">725</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">bounds</span><span class="p">):</span>
</span><span id="BoundedLinearExpression.__init__-726"><a href="#BoundedLinearExpression.__init__-726"><span class="linenos">726</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__expr</span> <span class="o">=</span> <span class="n">expr</span>
</span><span id="BoundedLinearExpression.__init__-727"><a href="#BoundedLinearExpression.__init__-727"><span class="linenos">727</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span> <span class="o">=</span> <span class="n">bounds</span>
</span></pre></div>


    

                            </div>
                            <div id="BoundedLinearExpression.Expression" class="classattr">
                                        <input id="BoundedLinearExpression.Expression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Expression</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BoundedLinearExpression.Expression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BoundedLinearExpression.Expression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BoundedLinearExpression.Expression-753"><a href="#BoundedLinearExpression.Expression-753"><span class="linenos">753</span></a>    <span class="k">def</span> <span class="nf">Expression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="BoundedLinearExpression.Expression-754"><a href="#BoundedLinearExpression.Expression-754"><span class="linenos">754</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__expr</span>
</span></pre></div>


    

                            </div>
                            <div id="BoundedLinearExpression.Bounds" class="classattr">
                                        <input id="BoundedLinearExpression.Bounds-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Bounds</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BoundedLinearExpression.Bounds-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BoundedLinearExpression.Bounds"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BoundedLinearExpression.Bounds-756"><a href="#BoundedLinearExpression.Bounds-756"><span class="linenos">756</span></a>    <span class="k">def</span> <span class="nf">Bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="BoundedLinearExpression.Bounds-757"><a href="#BoundedLinearExpression.Bounds-757"><span class="linenos">757</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bounds</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="Constraint">
                            <input id="Constraint-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Constraint</span>:

                <label class="view-source-button" for="Constraint-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Constraint"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Constraint-780"><a href="#Constraint-780"><span class="linenos">780</span></a><span class="k">class</span> <span class="nc">Constraint</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="Constraint-781"><a href="#Constraint-781"><span class="linenos">781</span></a>    <span class="sd">&quot;&quot;&quot;Base class for constraints.</span>
</span><span id="Constraint-782"><a href="#Constraint-782"><span class="linenos">782</span></a>
</span><span id="Constraint-783"><a href="#Constraint-783"><span class="linenos">783</span></a><span class="sd">  Constraints are built by the CpModel through the Add&lt;XXX&gt; methods.</span>
</span><span id="Constraint-784"><a href="#Constraint-784"><span class="linenos">784</span></a><span class="sd">  Once created by the CpModel class, they are automatically added to the model.</span>
</span><span id="Constraint-785"><a href="#Constraint-785"><span class="linenos">785</span></a><span class="sd">  The purpose of this class is to allow specification of enforcement literals</span>
</span><span id="Constraint-786"><a href="#Constraint-786"><span class="linenos">786</span></a><span class="sd">  for this constraint.</span>
</span><span id="Constraint-787"><a href="#Constraint-787"><span class="linenos">787</span></a>
</span><span id="Constraint-788"><a href="#Constraint-788"><span class="linenos">788</span></a><span class="sd">      b = model.NewBoolVar(&#39;b&#39;)</span>
</span><span id="Constraint-789"><a href="#Constraint-789"><span class="linenos">789</span></a><span class="sd">      x = model.NewIntVar(0, 10, &#39;x&#39;)</span>
</span><span id="Constraint-790"><a href="#Constraint-790"><span class="linenos">790</span></a><span class="sd">      y = model.NewIntVar(0, 10, &#39;y&#39;)</span>
</span><span id="Constraint-791"><a href="#Constraint-791"><span class="linenos">791</span></a>
</span><span id="Constraint-792"><a href="#Constraint-792"><span class="linenos">792</span></a><span class="sd">      model.Add(x + 2 * y == 5).OnlyEnforceIf(b.Not())</span>
</span><span id="Constraint-793"><a href="#Constraint-793"><span class="linenos">793</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="Constraint-794"><a href="#Constraint-794"><span class="linenos">794</span></a>
</span><span id="Constraint-795"><a href="#Constraint-795"><span class="linenos">795</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">):</span>
</span><span id="Constraint-796"><a href="#Constraint-796"><span class="linenos">796</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="Constraint-797"><a href="#Constraint-797"><span class="linenos">797</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span> <span class="o">=</span> <span class="n">constraints</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="Constraint-798"><a href="#Constraint-798"><span class="linenos">798</span></a>
</span><span id="Constraint-799"><a href="#Constraint-799"><span class="linenos">799</span></a>    <span class="k">def</span> <span class="nf">OnlyEnforceIf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">boolvar</span><span class="p">):</span>
</span><span id="Constraint-800"><a href="#Constraint-800"><span class="linenos">800</span></a>        <span class="sd">&quot;&quot;&quot;Adds an enforcement literal to the constraint.</span>
</span><span id="Constraint-801"><a href="#Constraint-801"><span class="linenos">801</span></a>
</span><span id="Constraint-802"><a href="#Constraint-802"><span class="linenos">802</span></a><span class="sd">    This method adds one or more literals (that is, a boolean variable or its</span>
</span><span id="Constraint-803"><a href="#Constraint-803"><span class="linenos">803</span></a><span class="sd">    negation) as enforcement literals. The conjunction of all these literals</span>
</span><span id="Constraint-804"><a href="#Constraint-804"><span class="linenos">804</span></a><span class="sd">    determines whether the constraint is active or not. It acts as an</span>
</span><span id="Constraint-805"><a href="#Constraint-805"><span class="linenos">805</span></a><span class="sd">    implication, so if the conjunction is true, it implies that the constraint</span>
</span><span id="Constraint-806"><a href="#Constraint-806"><span class="linenos">806</span></a><span class="sd">    must be enforced. If it is false, then the constraint is ignored.</span>
</span><span id="Constraint-807"><a href="#Constraint-807"><span class="linenos">807</span></a>
</span><span id="Constraint-808"><a href="#Constraint-808"><span class="linenos">808</span></a><span class="sd">    BoolOr, BoolAnd, and linear constraints all support enforcement literals.</span>
</span><span id="Constraint-809"><a href="#Constraint-809"><span class="linenos">809</span></a>
</span><span id="Constraint-810"><a href="#Constraint-810"><span class="linenos">810</span></a><span class="sd">    Args:</span>
</span><span id="Constraint-811"><a href="#Constraint-811"><span class="linenos">811</span></a><span class="sd">      *boolvar: One or more Boolean literals.</span>
</span><span id="Constraint-812"><a href="#Constraint-812"><span class="linenos">812</span></a>
</span><span id="Constraint-813"><a href="#Constraint-813"><span class="linenos">813</span></a><span class="sd">    Returns:</span>
</span><span id="Constraint-814"><a href="#Constraint-814"><span class="linenos">814</span></a><span class="sd">      self.</span>
</span><span id="Constraint-815"><a href="#Constraint-815"><span class="linenos">815</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Constraint-816"><a href="#Constraint-816"><span class="linenos">816</span></a>        <span class="k">for</span> <span class="n">lit</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">boolvar</span><span class="p">):</span>
</span><span id="Constraint-817"><a href="#Constraint-817"><span class="linenos">817</span></a>            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">lit</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="Constraint-818"><a href="#Constraint-818"><span class="linenos">818</span></a>                    <span class="nb">bool</span><span class="p">(</span><span class="n">lit</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="Constraint-819"><a href="#Constraint-819"><span class="linenos">819</span></a>                <span class="c1"># Always true. Do nothing.</span>
</span><span id="Constraint-820"><a href="#Constraint-820"><span class="linenos">820</span></a>                <span class="k">pass</span>
</span><span id="Constraint-821"><a href="#Constraint-821"><span class="linenos">821</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Constraint-822"><a href="#Constraint-822"><span class="linenos">822</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lit</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="Constraint-823"><a href="#Constraint-823"><span class="linenos">823</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Constraint-824"><a href="#Constraint-824"><span class="linenos">824</span></a>
</span><span id="Constraint-825"><a href="#Constraint-825"><span class="linenos">825</span></a>    <span class="k">def</span> <span class="nf">WithName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="Constraint-826"><a href="#Constraint-826"><span class="linenos">826</span></a>        <span class="sd">&quot;&quot;&quot;Sets the name of the constraint.&quot;&quot;&quot;</span>
</span><span id="Constraint-827"><a href="#Constraint-827"><span class="linenos">827</span></a>        <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
</span><span id="Constraint-828"><a href="#Constraint-828"><span class="linenos">828</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Constraint-829"><a href="#Constraint-829"><span class="linenos">829</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Constraint-830"><a href="#Constraint-830"><span class="linenos">830</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
</span><span id="Constraint-831"><a href="#Constraint-831"><span class="linenos">831</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Constraint-832"><a href="#Constraint-832"><span class="linenos">832</span></a>
</span><span id="Constraint-833"><a href="#Constraint-833"><span class="linenos">833</span></a>    <span class="k">def</span> <span class="nf">Name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Constraint-834"><a href="#Constraint-834"><span class="linenos">834</span></a>        <span class="sd">&quot;&quot;&quot;Returns the name of the constraint.&quot;&quot;&quot;</span>
</span><span id="Constraint-835"><a href="#Constraint-835"><span class="linenos">835</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span><span class="o">.</span><span class="n">name</span>
</span><span id="Constraint-836"><a href="#Constraint-836"><span class="linenos">836</span></a>
</span><span id="Constraint-837"><a href="#Constraint-837"><span class="linenos">837</span></a>    <span class="k">def</span> <span class="nf">Index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Constraint-838"><a href="#Constraint-838"><span class="linenos">838</span></a>        <span class="sd">&quot;&quot;&quot;Returns the index of the constraint in the model.&quot;&quot;&quot;</span>
</span><span id="Constraint-839"><a href="#Constraint-839"><span class="linenos">839</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__index</span>
</span><span id="Constraint-840"><a href="#Constraint-840"><span class="linenos">840</span></a>
</span><span id="Constraint-841"><a href="#Constraint-841"><span class="linenos">841</span></a>    <span class="k">def</span> <span class="nf">Proto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Constraint-842"><a href="#Constraint-842"><span class="linenos">842</span></a>        <span class="sd">&quot;&quot;&quot;Returns the constraint protobuf.&quot;&quot;&quot;</span>
</span><span id="Constraint-843"><a href="#Constraint-843"><span class="linenos">843</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span>
</span></pre></div>


            <div class="docstring"><p>Base class for constraints.</p>

<p>Constraints are built by the CpModel through the Add<XXX> methods.
Once created by the CpModel class, they are automatically added to the model.
The purpose of this class is to allow specification of enforcement literals
for this constraint.</p>

<pre><code>b = model.NewBoolVar('b')
x = model.NewIntVar(0, 10, 'x')
y = model.NewIntVar(0, 10, 'y')

model.Add(x + 2 * y == 5).OnlyEnforceIf(b.Not())
</code></pre>
</div>


                            <div id="Constraint.__init__" class="classattr">
                                        <input id="Constraint.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Constraint</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">constraints</span></span>)</span>

                <label class="view-source-button" for="Constraint.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Constraint.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Constraint.__init__-795"><a href="#Constraint.__init__-795"><span class="linenos">795</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints</span><span class="p">):</span>
</span><span id="Constraint.__init__-796"><a href="#Constraint.__init__-796"><span class="linenos">796</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="Constraint.__init__-797"><a href="#Constraint.__init__-797"><span class="linenos">797</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span> <span class="o">=</span> <span class="n">constraints</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Constraint.OnlyEnforceIf" class="classattr">
                                        <input id="Constraint.OnlyEnforceIf-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">OnlyEnforceIf</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">boolvar</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Constraint.OnlyEnforceIf-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Constraint.OnlyEnforceIf"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Constraint.OnlyEnforceIf-799"><a href="#Constraint.OnlyEnforceIf-799"><span class="linenos">799</span></a>    <span class="k">def</span> <span class="nf">OnlyEnforceIf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">boolvar</span><span class="p">):</span>
</span><span id="Constraint.OnlyEnforceIf-800"><a href="#Constraint.OnlyEnforceIf-800"><span class="linenos">800</span></a>        <span class="sd">&quot;&quot;&quot;Adds an enforcement literal to the constraint.</span>
</span><span id="Constraint.OnlyEnforceIf-801"><a href="#Constraint.OnlyEnforceIf-801"><span class="linenos">801</span></a>
</span><span id="Constraint.OnlyEnforceIf-802"><a href="#Constraint.OnlyEnforceIf-802"><span class="linenos">802</span></a><span class="sd">    This method adds one or more literals (that is, a boolean variable or its</span>
</span><span id="Constraint.OnlyEnforceIf-803"><a href="#Constraint.OnlyEnforceIf-803"><span class="linenos">803</span></a><span class="sd">    negation) as enforcement literals. The conjunction of all these literals</span>
</span><span id="Constraint.OnlyEnforceIf-804"><a href="#Constraint.OnlyEnforceIf-804"><span class="linenos">804</span></a><span class="sd">    determines whether the constraint is active or not. It acts as an</span>
</span><span id="Constraint.OnlyEnforceIf-805"><a href="#Constraint.OnlyEnforceIf-805"><span class="linenos">805</span></a><span class="sd">    implication, so if the conjunction is true, it implies that the constraint</span>
</span><span id="Constraint.OnlyEnforceIf-806"><a href="#Constraint.OnlyEnforceIf-806"><span class="linenos">806</span></a><span class="sd">    must be enforced. If it is false, then the constraint is ignored.</span>
</span><span id="Constraint.OnlyEnforceIf-807"><a href="#Constraint.OnlyEnforceIf-807"><span class="linenos">807</span></a>
</span><span id="Constraint.OnlyEnforceIf-808"><a href="#Constraint.OnlyEnforceIf-808"><span class="linenos">808</span></a><span class="sd">    BoolOr, BoolAnd, and linear constraints all support enforcement literals.</span>
</span><span id="Constraint.OnlyEnforceIf-809"><a href="#Constraint.OnlyEnforceIf-809"><span class="linenos">809</span></a>
</span><span id="Constraint.OnlyEnforceIf-810"><a href="#Constraint.OnlyEnforceIf-810"><span class="linenos">810</span></a><span class="sd">    Args:</span>
</span><span id="Constraint.OnlyEnforceIf-811"><a href="#Constraint.OnlyEnforceIf-811"><span class="linenos">811</span></a><span class="sd">      *boolvar: One or more Boolean literals.</span>
</span><span id="Constraint.OnlyEnforceIf-812"><a href="#Constraint.OnlyEnforceIf-812"><span class="linenos">812</span></a>
</span><span id="Constraint.OnlyEnforceIf-813"><a href="#Constraint.OnlyEnforceIf-813"><span class="linenos">813</span></a><span class="sd">    Returns:</span>
</span><span id="Constraint.OnlyEnforceIf-814"><a href="#Constraint.OnlyEnforceIf-814"><span class="linenos">814</span></a><span class="sd">      self.</span>
</span><span id="Constraint.OnlyEnforceIf-815"><a href="#Constraint.OnlyEnforceIf-815"><span class="linenos">815</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Constraint.OnlyEnforceIf-816"><a href="#Constraint.OnlyEnforceIf-816"><span class="linenos">816</span></a>        <span class="k">for</span> <span class="n">lit</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">boolvar</span><span class="p">):</span>
</span><span id="Constraint.OnlyEnforceIf-817"><a href="#Constraint.OnlyEnforceIf-817"><span class="linenos">817</span></a>            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">lit</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="Constraint.OnlyEnforceIf-818"><a href="#Constraint.OnlyEnforceIf-818"><span class="linenos">818</span></a>                    <span class="nb">bool</span><span class="p">(</span><span class="n">lit</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="Constraint.OnlyEnforceIf-819"><a href="#Constraint.OnlyEnforceIf-819"><span class="linenos">819</span></a>                <span class="c1"># Always true. Do nothing.</span>
</span><span id="Constraint.OnlyEnforceIf-820"><a href="#Constraint.OnlyEnforceIf-820"><span class="linenos">820</span></a>                <span class="k">pass</span>
</span><span id="Constraint.OnlyEnforceIf-821"><a href="#Constraint.OnlyEnforceIf-821"><span class="linenos">821</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Constraint.OnlyEnforceIf-822"><a href="#Constraint.OnlyEnforceIf-822"><span class="linenos">822</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lit</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="Constraint.OnlyEnforceIf-823"><a href="#Constraint.OnlyEnforceIf-823"><span class="linenos">823</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Adds an enforcement literal to the constraint.</p>

<p>This method adds one or more literals (that is, a boolean variable or its
negation) as enforcement literals. The conjunction of all these literals
determines whether the constraint is active or not. It acts as an
implication, so if the conjunction is true, it implies that the constraint
must be enforced. If it is false, then the constraint is ignored.</p>

<p>BoolOr, BoolAnd, and linear constraints all support enforcement literals.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>*boolvar:</strong>  One or more Boolean literals.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>self.</p>
</blockquote>
</div>


                            </div>
                            <div id="Constraint.WithName" class="classattr">
                                        <input id="Constraint.WithName-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">WithName</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Constraint.WithName-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Constraint.WithName"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Constraint.WithName-825"><a href="#Constraint.WithName-825"><span class="linenos">825</span></a>    <span class="k">def</span> <span class="nf">WithName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="Constraint.WithName-826"><a href="#Constraint.WithName-826"><span class="linenos">826</span></a>        <span class="sd">&quot;&quot;&quot;Sets the name of the constraint.&quot;&quot;&quot;</span>
</span><span id="Constraint.WithName-827"><a href="#Constraint.WithName-827"><span class="linenos">827</span></a>        <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
</span><span id="Constraint.WithName-828"><a href="#Constraint.WithName-828"><span class="linenos">828</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Constraint.WithName-829"><a href="#Constraint.WithName-829"><span class="linenos">829</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Constraint.WithName-830"><a href="#Constraint.WithName-830"><span class="linenos">830</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
</span><span id="Constraint.WithName-831"><a href="#Constraint.WithName-831"><span class="linenos">831</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Sets the name of the constraint.</p>
</div>


                            </div>
                            <div id="Constraint.Name" class="classattr">
                                        <input id="Constraint.Name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Constraint.Name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Constraint.Name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Constraint.Name-833"><a href="#Constraint.Name-833"><span class="linenos">833</span></a>    <span class="k">def</span> <span class="nf">Name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Constraint.Name-834"><a href="#Constraint.Name-834"><span class="linenos">834</span></a>        <span class="sd">&quot;&quot;&quot;Returns the name of the constraint.&quot;&quot;&quot;</span>
</span><span id="Constraint.Name-835"><a href="#Constraint.Name-835"><span class="linenos">835</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span><span class="o">.</span><span class="n">name</span>
</span></pre></div>


            <div class="docstring"><p>Returns the name of the constraint.</p>
</div>


                            </div>
                            <div id="Constraint.Index" class="classattr">
                                        <input id="Constraint.Index-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Index</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Constraint.Index-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Constraint.Index"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Constraint.Index-837"><a href="#Constraint.Index-837"><span class="linenos">837</span></a>    <span class="k">def</span> <span class="nf">Index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Constraint.Index-838"><a href="#Constraint.Index-838"><span class="linenos">838</span></a>        <span class="sd">&quot;&quot;&quot;Returns the index of the constraint in the model.&quot;&quot;&quot;</span>
</span><span id="Constraint.Index-839"><a href="#Constraint.Index-839"><span class="linenos">839</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__index</span>
</span></pre></div>


            <div class="docstring"><p>Returns the index of the constraint in the model.</p>
</div>


                            </div>
                            <div id="Constraint.Proto" class="classattr">
                                        <input id="Constraint.Proto-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Proto</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Constraint.Proto-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Constraint.Proto"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Constraint.Proto-841"><a href="#Constraint.Proto-841"><span class="linenos">841</span></a>    <span class="k">def</span> <span class="nf">Proto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Constraint.Proto-842"><a href="#Constraint.Proto-842"><span class="linenos">842</span></a>        <span class="sd">&quot;&quot;&quot;Returns the constraint protobuf.&quot;&quot;&quot;</span>
</span><span id="Constraint.Proto-843"><a href="#Constraint.Proto-843"><span class="linenos">843</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constraint</span>
</span></pre></div>


            <div class="docstring"><p>Returns the constraint protobuf.</p>
</div>


                            </div>
                </section>
                <section id="IntervalVar">
                            <input id="IntervalVar-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">IntervalVar</span>:

                <label class="view-source-button" for="IntervalVar-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalVar"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalVar-846"><a href="#IntervalVar-846"><span class="linenos">846</span></a><span class="k">class</span> <span class="nc">IntervalVar</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="IntervalVar-847"><a href="#IntervalVar-847"><span class="linenos">847</span></a>    <span class="sd">&quot;&quot;&quot;Represents an Interval variable.</span>
</span><span id="IntervalVar-848"><a href="#IntervalVar-848"><span class="linenos">848</span></a>
</span><span id="IntervalVar-849"><a href="#IntervalVar-849"><span class="linenos">849</span></a><span class="sd">  An interval variable is both a constraint and a variable. It is defined by</span>
</span><span id="IntervalVar-850"><a href="#IntervalVar-850"><span class="linenos">850</span></a><span class="sd">  three integer variables: start, size, and end.</span>
</span><span id="IntervalVar-851"><a href="#IntervalVar-851"><span class="linenos">851</span></a>
</span><span id="IntervalVar-852"><a href="#IntervalVar-852"><span class="linenos">852</span></a><span class="sd">  It is a constraint because, internally, it enforces that start + size == end.</span>
</span><span id="IntervalVar-853"><a href="#IntervalVar-853"><span class="linenos">853</span></a>
</span><span id="IntervalVar-854"><a href="#IntervalVar-854"><span class="linenos">854</span></a><span class="sd">  It is also a variable as it can appear in specific scheduling constraints:</span>
</span><span id="IntervalVar-855"><a href="#IntervalVar-855"><span class="linenos">855</span></a><span class="sd">  NoOverlap, NoOverlap2D, Cumulative.</span>
</span><span id="IntervalVar-856"><a href="#IntervalVar-856"><span class="linenos">856</span></a>
</span><span id="IntervalVar-857"><a href="#IntervalVar-857"><span class="linenos">857</span></a><span class="sd">  Optionally, an enforcement literal can be added to this constraint, in which</span>
</span><span id="IntervalVar-858"><a href="#IntervalVar-858"><span class="linenos">858</span></a><span class="sd">  case these scheduling constraints will ignore interval variables with</span>
</span><span id="IntervalVar-859"><a href="#IntervalVar-859"><span class="linenos">859</span></a><span class="sd">  enforcement literals assigned to false. Conversely, these constraints will</span>
</span><span id="IntervalVar-860"><a href="#IntervalVar-860"><span class="linenos">860</span></a><span class="sd">  also set these enforcement literals to false if they cannot fit these</span>
</span><span id="IntervalVar-861"><a href="#IntervalVar-861"><span class="linenos">861</span></a><span class="sd">  intervals into the schedule.</span>
</span><span id="IntervalVar-862"><a href="#IntervalVar-862"><span class="linenos">862</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="IntervalVar-863"><a href="#IntervalVar-863"><span class="linenos">863</span></a>
</span><span id="IntervalVar-864"><a href="#IntervalVar-864"><span class="linenos">864</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">is_present_index</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="IntervalVar-865"><a href="#IntervalVar-865"><span class="linenos">865</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span> <span class="o">=</span> <span class="n">model</span>
</span><span id="IntervalVar-866"><a href="#IntervalVar-866"><span class="linenos">866</span></a>        <span class="c1"># As with the IntVar::__init__ method, we hack the __init__ method to</span>
</span><span id="IntervalVar-867"><a href="#IntervalVar-867"><span class="linenos">867</span></a>        <span class="c1"># support two use cases:</span>
</span><span id="IntervalVar-868"><a href="#IntervalVar-868"><span class="linenos">868</span></a>        <span class="c1">#   case 1: called when creating a new interval variable.</span>
</span><span id="IntervalVar-869"><a href="#IntervalVar-869"><span class="linenos">869</span></a>        <span class="c1">#      {start|size|end} are linear expressions, is_present_index is either</span>
</span><span id="IntervalVar-870"><a href="#IntervalVar-870"><span class="linenos">870</span></a>        <span class="c1">#      None or the index of a Boolean literal. name is a string</span>
</span><span id="IntervalVar-871"><a href="#IntervalVar-871"><span class="linenos">871</span></a>        <span class="c1">#   case 2: called when querying an existing interval variable.</span>
</span><span id="IntervalVar-872"><a href="#IntervalVar-872"><span class="linenos">872</span></a>        <span class="c1">#      start_index is an int, all parameters after are None.</span>
</span><span id="IntervalVar-873"><a href="#IntervalVar-873"><span class="linenos">873</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">is_present_index</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span>
</span><span id="IntervalVar-874"><a href="#IntervalVar-874"><span class="linenos">874</span></a>                <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="IntervalVar-875"><a href="#IntervalVar-875"><span class="linenos">875</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="n">start</span>
</span><span id="IntervalVar-876"><a href="#IntervalVar-876"><span class="linenos">876</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">start</span><span class="p">]</span>
</span><span id="IntervalVar-877"><a href="#IntervalVar-877"><span class="linenos">877</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalVar-878"><a href="#IntervalVar-878"><span class="linenos">878</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="IntervalVar-879"><a href="#IntervalVar-879"><span class="linenos">879</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="IntervalVar-880"><a href="#IntervalVar-880"><span class="linenos">880</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="IntervalVar-881"><a href="#IntervalVar-881"><span class="linenos">881</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="IntervalVar-882"><a href="#IntervalVar-882"><span class="linenos">882</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
</span><span id="IntervalVar-883"><a href="#IntervalVar-883"><span class="linenos">883</span></a>            <span class="k">if</span> <span class="n">is_present_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IntervalVar-884"><a href="#IntervalVar-884"><span class="linenos">884</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_present_index</span><span class="p">)</span>
</span><span id="IntervalVar-885"><a href="#IntervalVar-885"><span class="linenos">885</span></a>            <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
</span><span id="IntervalVar-886"><a href="#IntervalVar-886"><span class="linenos">886</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="IntervalVar-887"><a href="#IntervalVar-887"><span class="linenos">887</span></a>
</span><span id="IntervalVar-888"><a href="#IntervalVar-888"><span class="linenos">888</span></a>    <span class="k">def</span> <span class="nf">Index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalVar-889"><a href="#IntervalVar-889"><span class="linenos">889</span></a>        <span class="sd">&quot;&quot;&quot;Returns the index of the interval constraint in the model.&quot;&quot;&quot;</span>
</span><span id="IntervalVar-890"><a href="#IntervalVar-890"><span class="linenos">890</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__index</span>
</span><span id="IntervalVar-891"><a href="#IntervalVar-891"><span class="linenos">891</span></a>
</span><span id="IntervalVar-892"><a href="#IntervalVar-892"><span class="linenos">892</span></a>    <span class="k">def</span> <span class="nf">Proto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalVar-893"><a href="#IntervalVar-893"><span class="linenos">893</span></a>        <span class="sd">&quot;&quot;&quot;Returns the interval protobuf.&quot;&quot;&quot;</span>
</span><span id="IntervalVar-894"><a href="#IntervalVar-894"><span class="linenos">894</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span>
</span><span id="IntervalVar-895"><a href="#IntervalVar-895"><span class="linenos">895</span></a>
</span><span id="IntervalVar-896"><a href="#IntervalVar-896"><span class="linenos">896</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalVar-897"><a href="#IntervalVar-897"><span class="linenos">897</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">name</span>
</span><span id="IntervalVar-898"><a href="#IntervalVar-898"><span class="linenos">898</span></a>
</span><span id="IntervalVar-899"><a href="#IntervalVar-899"><span class="linenos">899</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalVar-900"><a href="#IntervalVar-900"><span class="linenos">900</span></a>        <span class="n">interval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span>
</span><span id="IntervalVar-901"><a href="#IntervalVar-901"><span class="linenos">901</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="p">:</span>
</span><span id="IntervalVar-902"><a href="#IntervalVar-902"><span class="linenos">902</span></a>            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">(start = </span><span class="si">%s</span><span class="s1">, size = </span><span class="si">%s</span><span class="s1">, end = </span><span class="si">%s</span><span class="s1">, is_present = </span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span>
</span><span id="IntervalVar-903"><a href="#IntervalVar-903"><span class="linenos">903</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ShortExprName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">),</span>
</span><span id="IntervalVar-904"><a href="#IntervalVar-904"><span class="linenos">904</span></a>                <span class="n">ShortExprName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">size</span><span class="p">),</span>
</span><span id="IntervalVar-905"><a href="#IntervalVar-905"><span class="linenos">905</span></a>                <span class="n">ShortExprName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">),</span>
</span><span id="IntervalVar-906"><a href="#IntervalVar-906"><span class="linenos">906</span></a>                <span class="n">ShortName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="IntervalVar-907"><a href="#IntervalVar-907"><span class="linenos">907</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalVar-908"><a href="#IntervalVar-908"><span class="linenos">908</span></a>            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">(start = </span><span class="si">%s</span><span class="s1">, size = </span><span class="si">%s</span><span class="s1">, end = </span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span>
</span><span id="IntervalVar-909"><a href="#IntervalVar-909"><span class="linenos">909</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ShortExprName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">),</span>
</span><span id="IntervalVar-910"><a href="#IntervalVar-910"><span class="linenos">910</span></a>                <span class="n">ShortExprName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">size</span><span class="p">),</span>
</span><span id="IntervalVar-911"><a href="#IntervalVar-911"><span class="linenos">911</span></a>                <span class="n">ShortExprName</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">))</span>
</span><span id="IntervalVar-912"><a href="#IntervalVar-912"><span class="linenos">912</span></a>
</span><span id="IntervalVar-913"><a href="#IntervalVar-913"><span class="linenos">913</span></a>    <span class="k">def</span> <span class="nf">Name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalVar-914"><a href="#IntervalVar-914"><span class="linenos">914</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">name</span>
</span><span id="IntervalVar-915"><a href="#IntervalVar-915"><span class="linenos">915</span></a>
</span><span id="IntervalVar-916"><a href="#IntervalVar-916"><span class="linenos">916</span></a>    <span class="k">def</span> <span class="nf">StartExpr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalVar-917"><a href="#IntervalVar-917"><span class="linenos">917</span></a>        <span class="k">return</span> <span class="n">LinearExpr</span><span class="o">.</span><span class="n">RebuildFromLinearExpressionProto</span><span class="p">(</span>
</span><span id="IntervalVar-918"><a href="#IntervalVar-918"><span class="linenos">918</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
</span><span id="IntervalVar-919"><a href="#IntervalVar-919"><span class="linenos">919</span></a>
</span><span id="IntervalVar-920"><a href="#IntervalVar-920"><span class="linenos">920</span></a>    <span class="k">def</span> <span class="nf">SizeExpr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalVar-921"><a href="#IntervalVar-921"><span class="linenos">921</span></a>        <span class="k">return</span> <span class="n">LinearExpr</span><span class="o">.</span><span class="n">RebuildFromLinearExpressionProto</span><span class="p">(</span>
</span><span id="IntervalVar-922"><a href="#IntervalVar-922"><span class="linenos">922</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
</span><span id="IntervalVar-923"><a href="#IntervalVar-923"><span class="linenos">923</span></a>
</span><span id="IntervalVar-924"><a href="#IntervalVar-924"><span class="linenos">924</span></a>    <span class="k">def</span> <span class="nf">EndExpr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalVar-925"><a href="#IntervalVar-925"><span class="linenos">925</span></a>        <span class="k">return</span> <span class="n">LinearExpr</span><span class="o">.</span><span class="n">RebuildFromLinearExpressionProto</span><span class="p">(</span>
</span><span id="IntervalVar-926"><a href="#IntervalVar-926"><span class="linenos">926</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Represents an Interval variable.</p>

<p>An interval variable is both a constraint and a variable. It is defined by
three integer variables: start, size, and end.</p>

<p>It is a constraint because, internally, it enforces that start + size == end.</p>

<p>It is also a variable as it can appear in specific scheduling constraints:
NoOverlap, NoOverlap2D, Cumulative.</p>

<p>Optionally, an enforcement literal can be added to this constraint, in which
case these scheduling constraints will ignore interval variables with
enforcement literals assigned to false. Conversely, these constraints will
also set these enforcement literals to false if they cannot fit these
intervals into the schedule.</p>
</div>


                            <div id="IntervalVar.__init__" class="classattr">
                                        <input id="IntervalVar.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">IntervalVar</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">model</span>, </span><span class="param"><span class="n">start</span>, </span><span class="param"><span class="n">size</span>, </span><span class="param"><span class="n">end</span>, </span><span class="param"><span class="n">is_present_index</span>, </span><span class="param"><span class="n">name</span></span>)</span>

                <label class="view-source-button" for="IntervalVar.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalVar.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalVar.__init__-864"><a href="#IntervalVar.__init__-864"><span class="linenos">864</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">is_present_index</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="IntervalVar.__init__-865"><a href="#IntervalVar.__init__-865"><span class="linenos">865</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span> <span class="o">=</span> <span class="n">model</span>
</span><span id="IntervalVar.__init__-866"><a href="#IntervalVar.__init__-866"><span class="linenos">866</span></a>        <span class="c1"># As with the IntVar::__init__ method, we hack the __init__ method to</span>
</span><span id="IntervalVar.__init__-867"><a href="#IntervalVar.__init__-867"><span class="linenos">867</span></a>        <span class="c1"># support two use cases:</span>
</span><span id="IntervalVar.__init__-868"><a href="#IntervalVar.__init__-868"><span class="linenos">868</span></a>        <span class="c1">#   case 1: called when creating a new interval variable.</span>
</span><span id="IntervalVar.__init__-869"><a href="#IntervalVar.__init__-869"><span class="linenos">869</span></a>        <span class="c1">#      {start|size|end} are linear expressions, is_present_index is either</span>
</span><span id="IntervalVar.__init__-870"><a href="#IntervalVar.__init__-870"><span class="linenos">870</span></a>        <span class="c1">#      None or the index of a Boolean literal. name is a string</span>
</span><span id="IntervalVar.__init__-871"><a href="#IntervalVar.__init__-871"><span class="linenos">871</span></a>        <span class="c1">#   case 2: called when querying an existing interval variable.</span>
</span><span id="IntervalVar.__init__-872"><a href="#IntervalVar.__init__-872"><span class="linenos">872</span></a>        <span class="c1">#      start_index is an int, all parameters after are None.</span>
</span><span id="IntervalVar.__init__-873"><a href="#IntervalVar.__init__-873"><span class="linenos">873</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">is_present_index</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span>
</span><span id="IntervalVar.__init__-874"><a href="#IntervalVar.__init__-874"><span class="linenos">874</span></a>                <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="IntervalVar.__init__-875"><a href="#IntervalVar.__init__-875"><span class="linenos">875</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="n">start</span>
</span><span id="IntervalVar.__init__-876"><a href="#IntervalVar.__init__-876"><span class="linenos">876</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">start</span><span class="p">]</span>
</span><span id="IntervalVar.__init__-877"><a href="#IntervalVar.__init__-877"><span class="linenos">877</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="IntervalVar.__init__-878"><a href="#IntervalVar.__init__-878"><span class="linenos">878</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="IntervalVar.__init__-879"><a href="#IntervalVar.__init__-879"><span class="linenos">879</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="IntervalVar.__init__-880"><a href="#IntervalVar.__init__-880"><span class="linenos">880</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="IntervalVar.__init__-881"><a href="#IntervalVar.__init__-881"><span class="linenos">881</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="IntervalVar.__init__-882"><a href="#IntervalVar.__init__-882"><span class="linenos">882</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
</span><span id="IntervalVar.__init__-883"><a href="#IntervalVar.__init__-883"><span class="linenos">883</span></a>            <span class="k">if</span> <span class="n">is_present_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="IntervalVar.__init__-884"><a href="#IntervalVar.__init__-884"><span class="linenos">884</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">is_present_index</span><span class="p">)</span>
</span><span id="IntervalVar.__init__-885"><a href="#IntervalVar.__init__-885"><span class="linenos">885</span></a>            <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
</span><span id="IntervalVar.__init__-886"><a href="#IntervalVar.__init__-886"><span class="linenos">886</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span></pre></div>


    

                            </div>
                            <div id="IntervalVar.Index" class="classattr">
                                        <input id="IntervalVar.Index-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Index</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IntervalVar.Index-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalVar.Index"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalVar.Index-888"><a href="#IntervalVar.Index-888"><span class="linenos">888</span></a>    <span class="k">def</span> <span class="nf">Index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalVar.Index-889"><a href="#IntervalVar.Index-889"><span class="linenos">889</span></a>        <span class="sd">&quot;&quot;&quot;Returns the index of the interval constraint in the model.&quot;&quot;&quot;</span>
</span><span id="IntervalVar.Index-890"><a href="#IntervalVar.Index-890"><span class="linenos">890</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__index</span>
</span></pre></div>


            <div class="docstring"><p>Returns the index of the interval constraint in the model.</p>
</div>


                            </div>
                            <div id="IntervalVar.Proto" class="classattr">
                                        <input id="IntervalVar.Proto-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Proto</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IntervalVar.Proto-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalVar.Proto"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalVar.Proto-892"><a href="#IntervalVar.Proto-892"><span class="linenos">892</span></a>    <span class="k">def</span> <span class="nf">Proto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalVar.Proto-893"><a href="#IntervalVar.Proto-893"><span class="linenos">893</span></a>        <span class="sd">&quot;&quot;&quot;Returns the interval protobuf.&quot;&quot;&quot;</span>
</span><span id="IntervalVar.Proto-894"><a href="#IntervalVar.Proto-894"><span class="linenos">894</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span>
</span></pre></div>


            <div class="docstring"><p>Returns the interval protobuf.</p>
</div>


                            </div>
                            <div id="IntervalVar.Name" class="classattr">
                                        <input id="IntervalVar.Name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IntervalVar.Name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalVar.Name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalVar.Name-913"><a href="#IntervalVar.Name-913"><span class="linenos">913</span></a>    <span class="k">def</span> <span class="nf">Name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalVar.Name-914"><a href="#IntervalVar.Name-914"><span class="linenos">914</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">name</span>
</span></pre></div>


    

                            </div>
                            <div id="IntervalVar.StartExpr" class="classattr">
                                        <input id="IntervalVar.StartExpr-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">StartExpr</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IntervalVar.StartExpr-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalVar.StartExpr"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalVar.StartExpr-916"><a href="#IntervalVar.StartExpr-916"><span class="linenos">916</span></a>    <span class="k">def</span> <span class="nf">StartExpr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalVar.StartExpr-917"><a href="#IntervalVar.StartExpr-917"><span class="linenos">917</span></a>        <span class="k">return</span> <span class="n">LinearExpr</span><span class="o">.</span><span class="n">RebuildFromLinearExpressionProto</span><span class="p">(</span>
</span><span id="IntervalVar.StartExpr-918"><a href="#IntervalVar.StartExpr-918"><span class="linenos">918</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="IntervalVar.SizeExpr" class="classattr">
                                        <input id="IntervalVar.SizeExpr-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">SizeExpr</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IntervalVar.SizeExpr-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalVar.SizeExpr"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalVar.SizeExpr-920"><a href="#IntervalVar.SizeExpr-920"><span class="linenos">920</span></a>    <span class="k">def</span> <span class="nf">SizeExpr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalVar.SizeExpr-921"><a href="#IntervalVar.SizeExpr-921"><span class="linenos">921</span></a>        <span class="k">return</span> <span class="n">LinearExpr</span><span class="o">.</span><span class="n">RebuildFromLinearExpressionProto</span><span class="p">(</span>
</span><span id="IntervalVar.SizeExpr-922"><a href="#IntervalVar.SizeExpr-922"><span class="linenos">922</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="IntervalVar.EndExpr" class="classattr">
                                        <input id="IntervalVar.EndExpr-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">EndExpr</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="IntervalVar.EndExpr-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#IntervalVar.EndExpr"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="IntervalVar.EndExpr-924"><a href="#IntervalVar.EndExpr-924"><span class="linenos">924</span></a>    <span class="k">def</span> <span class="nf">EndExpr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="IntervalVar.EndExpr-925"><a href="#IntervalVar.EndExpr-925"><span class="linenos">925</span></a>        <span class="k">return</span> <span class="n">LinearExpr</span><span class="o">.</span><span class="n">RebuildFromLinearExpressionProto</span><span class="p">(</span>
</span><span id="IntervalVar.EndExpr-926"><a href="#IntervalVar.EndExpr-926"><span class="linenos">926</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ct</span><span class="o">.</span><span class="n">interval</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="ObjectIsATrueLiteral">
                            <input id="ObjectIsATrueLiteral-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ObjectIsATrueLiteral</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">literal</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ObjectIsATrueLiteral-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ObjectIsATrueLiteral"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ObjectIsATrueLiteral-929"><a href="#ObjectIsATrueLiteral-929"><span class="linenos">929</span></a><span class="k">def</span> <span class="nf">ObjectIsATrueLiteral</span><span class="p">(</span><span class="n">literal</span><span class="p">):</span>
</span><span id="ObjectIsATrueLiteral-930"><a href="#ObjectIsATrueLiteral-930"><span class="linenos">930</span></a>    <span class="sd">&quot;&quot;&quot;Checks if literal is either True, or a Boolean literals fixed to True.&quot;&quot;&quot;</span>
</span><span id="ObjectIsATrueLiteral-931"><a href="#ObjectIsATrueLiteral-931"><span class="linenos">931</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="ObjectIsATrueLiteral-932"><a href="#ObjectIsATrueLiteral-932"><span class="linenos">932</span></a>        <span class="n">proto</span> <span class="o">=</span> <span class="n">literal</span><span class="o">.</span><span class="n">Proto</span><span class="p">()</span>
</span><span id="ObjectIsATrueLiteral-933"><a href="#ObjectIsATrueLiteral-933"><span class="linenos">933</span></a>        <span class="k">return</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span>
</span><span id="ObjectIsATrueLiteral-934"><a href="#ObjectIsATrueLiteral-934"><span class="linenos">934</span></a>                <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="ObjectIsATrueLiteral-935"><a href="#ObjectIsATrueLiteral-935"><span class="linenos">935</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="ObjectIsATrueLiteral-936"><a href="#ObjectIsATrueLiteral-936"><span class="linenos">936</span></a>        <span class="n">proto</span> <span class="o">=</span> <span class="n">literal</span><span class="o">.</span><span class="n">Not</span><span class="p">()</span><span class="o">.</span><span class="n">Proto</span><span class="p">()</span>
</span><span id="ObjectIsATrueLiteral-937"><a href="#ObjectIsATrueLiteral-937"><span class="linenos">937</span></a>        <span class="k">return</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span>
</span><span id="ObjectIsATrueLiteral-938"><a href="#ObjectIsATrueLiteral-938"><span class="linenos">938</span></a>                <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="ObjectIsATrueLiteral-939"><a href="#ObjectIsATrueLiteral-939"><span class="linenos">939</span></a>    <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">literal</span><span class="p">):</span>
</span><span id="ObjectIsATrueLiteral-940"><a href="#ObjectIsATrueLiteral-940"><span class="linenos">940</span></a>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">literal</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</span><span id="ObjectIsATrueLiteral-941"><a href="#ObjectIsATrueLiteral-941"><span class="linenos">941</span></a>    <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Checks if literal is either True, or a Boolean literals fixed to True.</p>
</div>


                </section>
                <section id="ObjectIsAFalseLiteral">
                            <input id="ObjectIsAFalseLiteral-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ObjectIsAFalseLiteral</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">literal</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ObjectIsAFalseLiteral-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ObjectIsAFalseLiteral"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ObjectIsAFalseLiteral-944"><a href="#ObjectIsAFalseLiteral-944"><span class="linenos">944</span></a><span class="k">def</span> <span class="nf">ObjectIsAFalseLiteral</span><span class="p">(</span><span class="n">literal</span><span class="p">):</span>
</span><span id="ObjectIsAFalseLiteral-945"><a href="#ObjectIsAFalseLiteral-945"><span class="linenos">945</span></a>    <span class="sd">&quot;&quot;&quot;Checks if literal is either False, or a Boolean literals fixed to False.&quot;&quot;&quot;</span>
</span><span id="ObjectIsAFalseLiteral-946"><a href="#ObjectIsAFalseLiteral-946"><span class="linenos">946</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="ObjectIsAFalseLiteral-947"><a href="#ObjectIsAFalseLiteral-947"><span class="linenos">947</span></a>        <span class="n">proto</span> <span class="o">=</span> <span class="n">literal</span><span class="o">.</span><span class="n">Proto</span><span class="p">()</span>
</span><span id="ObjectIsAFalseLiteral-948"><a href="#ObjectIsAFalseLiteral-948"><span class="linenos">948</span></a>        <span class="k">return</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span>
</span><span id="ObjectIsAFalseLiteral-949"><a href="#ObjectIsAFalseLiteral-949"><span class="linenos">949</span></a>                <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="ObjectIsAFalseLiteral-950"><a href="#ObjectIsAFalseLiteral-950"><span class="linenos">950</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="ObjectIsAFalseLiteral-951"><a href="#ObjectIsAFalseLiteral-951"><span class="linenos">951</span></a>        <span class="n">proto</span> <span class="o">=</span> <span class="n">literal</span><span class="o">.</span><span class="n">Not</span><span class="p">()</span><span class="o">.</span><span class="n">Proto</span><span class="p">()</span>
</span><span id="ObjectIsAFalseLiteral-952"><a href="#ObjectIsAFalseLiteral-952"><span class="linenos">952</span></a>        <span class="k">return</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span>
</span><span id="ObjectIsAFalseLiteral-953"><a href="#ObjectIsAFalseLiteral-953"><span class="linenos">953</span></a>                <span class="n">proto</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="ObjectIsAFalseLiteral-954"><a href="#ObjectIsAFalseLiteral-954"><span class="linenos">954</span></a>    <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">literal</span><span class="p">):</span>
</span><span id="ObjectIsAFalseLiteral-955"><a href="#ObjectIsAFalseLiteral-955"><span class="linenos">955</span></a>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">literal</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</span><span id="ObjectIsAFalseLiteral-956"><a href="#ObjectIsAFalseLiteral-956"><span class="linenos">956</span></a>    <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Checks if literal is either False, or a Boolean literals fixed to False.</p>
</div>


                </section>
                <section id="CpModel">
                            <input id="CpModel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">CpModel</span>:

                <label class="view-source-button" for="CpModel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel-959"><a href="#CpModel-959"><span class="linenos"> 959</span></a><span class="k">class</span> <span class="nc">CpModel</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="CpModel-960"><a href="#CpModel-960"><span class="linenos"> 960</span></a>    <span class="sd">&quot;&quot;&quot;Methods for building a CP model.</span>
</span><span id="CpModel-961"><a href="#CpModel-961"><span class="linenos"> 961</span></a>
</span><span id="CpModel-962"><a href="#CpModel-962"><span class="linenos"> 962</span></a><span class="sd">  Methods beginning with:</span>
</span><span id="CpModel-963"><a href="#CpModel-963"><span class="linenos"> 963</span></a>
</span><span id="CpModel-964"><a href="#CpModel-964"><span class="linenos"> 964</span></a><span class="sd">  * ```New``` create integer, boolean, or interval variables.</span>
</span><span id="CpModel-965"><a href="#CpModel-965"><span class="linenos"> 965</span></a><span class="sd">  * ```Add``` create new constraints and add them to the model.</span>
</span><span id="CpModel-966"><a href="#CpModel-966"><span class="linenos"> 966</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="CpModel-967"><a href="#CpModel-967"><span class="linenos"> 967</span></a>
</span><span id="CpModel-968"><a href="#CpModel-968"><span class="linenos"> 968</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel-969"><a href="#CpModel-969"><span class="linenos"> 969</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpModelProto</span><span class="p">()</span>
</span><span id="CpModel-970"><a href="#CpModel-970"><span class="linenos"> 970</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="CpModel-971"><a href="#CpModel-971"><span class="linenos"> 971</span></a>
</span><span id="CpModel-972"><a href="#CpModel-972"><span class="linenos"> 972</span></a>    <span class="c1"># Naming.</span>
</span><span id="CpModel-973"><a href="#CpModel-973"><span class="linenos"> 973</span></a>    <span class="k">def</span> <span class="nf">Name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel-974"><a href="#CpModel-974"><span class="linenos"> 974</span></a>        <span class="sd">&quot;&quot;&quot;Returns the name of the model.&quot;&quot;&quot;</span>
</span><span id="CpModel-975"><a href="#CpModel-975"><span class="linenos"> 975</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">name</span>
</span><span id="CpModel-976"><a href="#CpModel-976"><span class="linenos"> 976</span></a>
</span><span id="CpModel-977"><a href="#CpModel-977"><span class="linenos"> 977</span></a>    <span class="k">def</span> <span class="nf">SetName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel-978"><a href="#CpModel-978"><span class="linenos"> 978</span></a>        <span class="sd">&quot;&quot;&quot;Sets the name of the model.&quot;&quot;&quot;</span>
</span><span id="CpModel-979"><a href="#CpModel-979"><span class="linenos"> 979</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="CpModel-980"><a href="#CpModel-980"><span class="linenos"> 980</span></a>
</span><span id="CpModel-981"><a href="#CpModel-981"><span class="linenos"> 981</span></a>    <span class="c1"># Integer variable.</span>
</span><span id="CpModel-982"><a href="#CpModel-982"><span class="linenos"> 982</span></a>
</span><span id="CpModel-983"><a href="#CpModel-983"><span class="linenos"> 983</span></a>    <span class="k">def</span> <span class="nf">NewIntVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel-984"><a href="#CpModel-984"><span class="linenos"> 984</span></a>        <span class="sd">&quot;&quot;&quot;Create an integer variable with domain [lb, ub].</span>
</span><span id="CpModel-985"><a href="#CpModel-985"><span class="linenos"> 985</span></a>
</span><span id="CpModel-986"><a href="#CpModel-986"><span class="linenos"> 986</span></a><span class="sd">    The CP-SAT solver is limited to integer variables. If you have fractional</span>
</span><span id="CpModel-987"><a href="#CpModel-987"><span class="linenos"> 987</span></a><span class="sd">    values, scale them up so that they become integers; if you have strings,</span>
</span><span id="CpModel-988"><a href="#CpModel-988"><span class="linenos"> 988</span></a><span class="sd">    encode them as integers.</span>
</span><span id="CpModel-989"><a href="#CpModel-989"><span class="linenos"> 989</span></a>
</span><span id="CpModel-990"><a href="#CpModel-990"><span class="linenos"> 990</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-991"><a href="#CpModel-991"><span class="linenos"> 991</span></a><span class="sd">      lb: Lower bound for the variable.</span>
</span><span id="CpModel-992"><a href="#CpModel-992"><span class="linenos"> 992</span></a><span class="sd">      ub: Upper bound for the variable.</span>
</span><span id="CpModel-993"><a href="#CpModel-993"><span class="linenos"> 993</span></a><span class="sd">      name: The name of the variable.</span>
</span><span id="CpModel-994"><a href="#CpModel-994"><span class="linenos"> 994</span></a>
</span><span id="CpModel-995"><a href="#CpModel-995"><span class="linenos"> 995</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-996"><a href="#CpModel-996"><span class="linenos"> 996</span></a><span class="sd">      a variable whose domain is [lb, ub].</span>
</span><span id="CpModel-997"><a href="#CpModel-997"><span class="linenos"> 997</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-998"><a href="#CpModel-998"><span class="linenos"> 998</span></a>
</span><span id="CpModel-999"><a href="#CpModel-999"><span class="linenos"> 999</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">Domain</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span>
</span><span id="CpModel-1000"><a href="#CpModel-1000"><span class="linenos">1000</span></a>
</span><span id="CpModel-1001"><a href="#CpModel-1001"><span class="linenos">1001</span></a>    <span class="k">def</span> <span class="nf">NewIntVarFromDomain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel-1002"><a href="#CpModel-1002"><span class="linenos">1002</span></a>        <span class="sd">&quot;&quot;&quot;Create an integer variable from a domain.</span>
</span><span id="CpModel-1003"><a href="#CpModel-1003"><span class="linenos">1003</span></a>
</span><span id="CpModel-1004"><a href="#CpModel-1004"><span class="linenos">1004</span></a><span class="sd">    A domain is a set of integers specified by a collection of intervals.</span>
</span><span id="CpModel-1005"><a href="#CpModel-1005"><span class="linenos">1005</span></a><span class="sd">    For example, `model.NewIntVarFromDomain(cp_model.</span>
</span><span id="CpModel-1006"><a href="#CpModel-1006"><span class="linenos">1006</span></a><span class="sd">         Domain.FromIntervals([[1, 2], [4, 6]]), &#39;x&#39;)`</span>
</span><span id="CpModel-1007"><a href="#CpModel-1007"><span class="linenos">1007</span></a>
</span><span id="CpModel-1008"><a href="#CpModel-1008"><span class="linenos">1008</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1009"><a href="#CpModel-1009"><span class="linenos">1009</span></a><span class="sd">      domain: An instance of the Domain class.</span>
</span><span id="CpModel-1010"><a href="#CpModel-1010"><span class="linenos">1010</span></a><span class="sd">      name: The name of the variable.</span>
</span><span id="CpModel-1011"><a href="#CpModel-1011"><span class="linenos">1011</span></a>
</span><span id="CpModel-1012"><a href="#CpModel-1012"><span class="linenos">1012</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1013"><a href="#CpModel-1013"><span class="linenos">1013</span></a><span class="sd">        a variable whose domain is the given domain.</span>
</span><span id="CpModel-1014"><a href="#CpModel-1014"><span class="linenos">1014</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1015"><a href="#CpModel-1015"><span class="linenos">1015</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="CpModel-1016"><a href="#CpModel-1016"><span class="linenos">1016</span></a>
</span><span id="CpModel-1017"><a href="#CpModel-1017"><span class="linenos">1017</span></a>    <span class="k">def</span> <span class="nf">NewBoolVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel-1018"><a href="#CpModel-1018"><span class="linenos">1018</span></a>        <span class="sd">&quot;&quot;&quot;Creates a 0-1 variable with the given name.&quot;&quot;&quot;</span>
</span><span id="CpModel-1019"><a href="#CpModel-1019"><span class="linenos">1019</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">Domain</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span>
</span><span id="CpModel-1020"><a href="#CpModel-1020"><span class="linenos">1020</span></a>
</span><span id="CpModel-1021"><a href="#CpModel-1021"><span class="linenos">1021</span></a>    <span class="k">def</span> <span class="nf">NewConstant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="CpModel-1022"><a href="#CpModel-1022"><span class="linenos">1022</span></a>        <span class="sd">&quot;&quot;&quot;Declares a constant integer.&quot;&quot;&quot;</span>
</span><span id="CpModel-1023"><a href="#CpModel-1023"><span class="linenos">1023</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndexFromConstant</span><span class="p">(</span><span class="n">value</span><span class="p">),</span>
</span><span id="CpModel-1024"><a href="#CpModel-1024"><span class="linenos">1024</span></a>                      <span class="kc">None</span><span class="p">)</span>
</span><span id="CpModel-1025"><a href="#CpModel-1025"><span class="linenos">1025</span></a>
</span><span id="CpModel-1026"><a href="#CpModel-1026"><span class="linenos">1026</span></a>    <span class="c1"># Linear constraints.</span>
</span><span id="CpModel-1027"><a href="#CpModel-1027"><span class="linenos">1027</span></a>
</span><span id="CpModel-1028"><a href="#CpModel-1028"><span class="linenos">1028</span></a>    <span class="k">def</span> <span class="nf">AddLinearConstraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_expr</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">):</span>
</span><span id="CpModel-1029"><a href="#CpModel-1029"><span class="linenos">1029</span></a>        <span class="sd">&quot;&quot;&quot;Adds the constraint: `lb &lt;= linear_expr &lt;= ub`.&quot;&quot;&quot;</span>
</span><span id="CpModel-1030"><a href="#CpModel-1030"><span class="linenos">1030</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddLinearExpressionInDomain</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">,</span> <span class="n">Domain</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">))</span>
</span><span id="CpModel-1031"><a href="#CpModel-1031"><span class="linenos">1031</span></a>
</span><span id="CpModel-1032"><a href="#CpModel-1032"><span class="linenos">1032</span></a>    <span class="k">def</span> <span class="nf">AddLinearExpressionInDomain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_expr</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
</span><span id="CpModel-1033"><a href="#CpModel-1033"><span class="linenos">1033</span></a>        <span class="sd">&quot;&quot;&quot;Adds the constraint: `linear_expr` in `domain`.&quot;&quot;&quot;</span>
</span><span id="CpModel-1034"><a href="#CpModel-1034"><span class="linenos">1034</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">,</span> <span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="CpModel-1035"><a href="#CpModel-1035"><span class="linenos">1035</span></a>            <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1036"><a href="#CpModel-1036"><span class="linenos">1036</span></a>            <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1037"><a href="#CpModel-1037"><span class="linenos">1037</span></a>            <span class="n">coeffs_map</span><span class="p">,</span> <span class="n">constant</span> <span class="o">=</span> <span class="n">linear_expr</span><span class="o">.</span><span class="n">GetIntegerVarValueMap</span><span class="p">()</span>
</span><span id="CpModel-1038"><a href="#CpModel-1038"><span class="linenos">1038</span></a>            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">coeffs_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="CpModel-1039"><a href="#CpModel-1039"><span class="linenos">1039</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpModel-1040"><a href="#CpModel-1040"><span class="linenos">1040</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Wrong argument&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</span><span id="CpModel-1041"><a href="#CpModel-1041"><span class="linenos">1041</span></a>                <span class="n">c</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="CpModel-1042"><a href="#CpModel-1042"><span class="linenos">1042</span></a>                <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="CpModel-1043"><a href="#CpModel-1043"><span class="linenos">1043</span></a>                <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</span><span id="CpModel-1044"><a href="#CpModel-1044"><span class="linenos">1044</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="CpModel-1045"><a href="#CpModel-1045"><span class="linenos">1045</span></a>                <span class="n">cmh</span><span class="o">.</span><span class="n">capped_subtraction</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="CpModel-1046"><a href="#CpModel-1046"><span class="linenos">1046</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">domain</span><span class="o">.</span><span class="n">FlattenedIntervals</span><span class="p">()</span>
</span><span id="CpModel-1047"><a href="#CpModel-1047"><span class="linenos">1047</span></a>            <span class="p">])</span>
</span><span id="CpModel-1048"><a href="#CpModel-1048"><span class="linenos">1048</span></a>            <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1049"><a href="#CpModel-1049"><span class="linenos">1049</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">):</span>
</span><span id="CpModel-1050"><a href="#CpModel-1050"><span class="linenos">1050</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">domain</span><span class="o">.</span><span class="n">Contains</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">)):</span>
</span><span id="CpModel-1051"><a href="#CpModel-1051"><span class="linenos">1051</span></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddBoolOr</span><span class="p">([])</span>  <span class="c1"># Evaluate to false.</span>
</span><span id="CpModel-1052"><a href="#CpModel-1052"><span class="linenos">1052</span></a>            <span class="c1"># Nothing to do otherwise.</span>
</span><span id="CpModel-1053"><a href="#CpModel-1053"><span class="linenos">1053</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel-1054"><a href="#CpModel-1054"><span class="linenos">1054</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel-1055"><a href="#CpModel-1055"><span class="linenos">1055</span></a>                <span class="s1">&#39;Not supported: CpModel.AddLinearExpressionInDomain(&#39;</span> <span class="o">+</span>
</span><span id="CpModel-1056"><a href="#CpModel-1056"><span class="linenos">1056</span></a>                <span class="nb">str</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
</span><span id="CpModel-1057"><a href="#CpModel-1057"><span class="linenos">1057</span></a>
</span><span id="CpModel-1058"><a href="#CpModel-1058"><span class="linenos">1058</span></a>    <span class="k">def</span> <span class="nf">Add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">):</span>
</span><span id="CpModel-1059"><a href="#CpModel-1059"><span class="linenos">1059</span></a>        <span class="sd">&quot;&quot;&quot;Adds a `BoundedLinearExpression` to the model.</span>
</span><span id="CpModel-1060"><a href="#CpModel-1060"><span class="linenos">1060</span></a>
</span><span id="CpModel-1061"><a href="#CpModel-1061"><span class="linenos">1061</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1062"><a href="#CpModel-1062"><span class="linenos">1062</span></a><span class="sd">      ct: A [`BoundedLinearExpression`](#boundedlinearexpression).</span>
</span><span id="CpModel-1063"><a href="#CpModel-1063"><span class="linenos">1063</span></a>
</span><span id="CpModel-1064"><a href="#CpModel-1064"><span class="linenos">1064</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1065"><a href="#CpModel-1065"><span class="linenos">1065</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel-1066"><a href="#CpModel-1066"><span class="linenos">1066</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1067"><a href="#CpModel-1067"><span class="linenos">1067</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">BoundedLinearExpression</span><span class="p">):</span>
</span><span id="CpModel-1068"><a href="#CpModel-1068"><span class="linenos">1068</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddLinearExpressionInDomain</span><span class="p">(</span>
</span><span id="CpModel-1069"><a href="#CpModel-1069"><span class="linenos">1069</span></a>                <span class="n">ct</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">Domain</span><span class="o">.</span><span class="n">FromFlatIntervals</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">Bounds</span><span class="p">()))</span>
</span><span id="CpModel-1070"><a href="#CpModel-1070"><span class="linenos">1070</span></a>        <span class="k">elif</span> <span class="n">ct</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="CpModel-1071"><a href="#CpModel-1071"><span class="linenos">1071</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddBoolOr</span><span class="p">([</span><span class="kc">True</span><span class="p">])</span>
</span><span id="CpModel-1072"><a href="#CpModel-1072"><span class="linenos">1072</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="n">ct</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="CpModel-1073"><a href="#CpModel-1073"><span class="linenos">1073</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddBoolOr</span><span class="p">([])</span>  <span class="c1"># Evaluate to false.</span>
</span><span id="CpModel-1074"><a href="#CpModel-1074"><span class="linenos">1074</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel-1075"><a href="#CpModel-1075"><span class="linenos">1075</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Not supported: CpModel.Add(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
</span><span id="CpModel-1076"><a href="#CpModel-1076"><span class="linenos">1076</span></a>
</span><span id="CpModel-1077"><a href="#CpModel-1077"><span class="linenos">1077</span></a>    <span class="c1"># General Integer Constraints.</span>
</span><span id="CpModel-1078"><a href="#CpModel-1078"><span class="linenos">1078</span></a>
</span><span id="CpModel-1079"><a href="#CpModel-1079"><span class="linenos">1079</span></a>    <span class="k">def</span> <span class="nf">AddAllDifferent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">expressions</span><span class="p">):</span>
</span><span id="CpModel-1080"><a href="#CpModel-1080"><span class="linenos">1080</span></a>        <span class="sd">&quot;&quot;&quot;Adds AllDifferent(expressions).</span>
</span><span id="CpModel-1081"><a href="#CpModel-1081"><span class="linenos">1081</span></a>
</span><span id="CpModel-1082"><a href="#CpModel-1082"><span class="linenos">1082</span></a><span class="sd">    This constraint forces all expressions to have different values.</span>
</span><span id="CpModel-1083"><a href="#CpModel-1083"><span class="linenos">1083</span></a>
</span><span id="CpModel-1084"><a href="#CpModel-1084"><span class="linenos">1084</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1085"><a href="#CpModel-1085"><span class="linenos">1085</span></a><span class="sd">      *expressions: simple expressions of the form a * var + constant.</span>
</span><span id="CpModel-1086"><a href="#CpModel-1086"><span class="linenos">1086</span></a>
</span><span id="CpModel-1087"><a href="#CpModel-1087"><span class="linenos">1087</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1088"><a href="#CpModel-1088"><span class="linenos">1088</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel-1089"><a href="#CpModel-1089"><span class="linenos">1089</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1090"><a href="#CpModel-1090"><span class="linenos">1090</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1091"><a href="#CpModel-1091"><span class="linenos">1091</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1092"><a href="#CpModel-1092"><span class="linenos">1092</span></a>        <span class="n">expanded</span> <span class="o">=</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span>
</span><span id="CpModel-1093"><a href="#CpModel-1093"><span class="linenos">1093</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">all_diff</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel-1094"><a href="#CpModel-1094"><span class="linenos">1094</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">expanded</span><span class="p">])</span>
</span><span id="CpModel-1095"><a href="#CpModel-1095"><span class="linenos">1095</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1096"><a href="#CpModel-1096"><span class="linenos">1096</span></a>
</span><span id="CpModel-1097"><a href="#CpModel-1097"><span class="linenos">1097</span></a>    <span class="k">def</span> <span class="nf">AddElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
</span><span id="CpModel-1098"><a href="#CpModel-1098"><span class="linenos">1098</span></a>        <span class="sd">&quot;&quot;&quot;Adds the element constraint: `variables[index] == target`.&quot;&quot;&quot;</span>
</span><span id="CpModel-1099"><a href="#CpModel-1099"><span class="linenos">1099</span></a>
</span><span id="CpModel-1100"><a href="#CpModel-1100"><span class="linenos">1100</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">variables</span><span class="p">:</span>
</span><span id="CpModel-1101"><a href="#CpModel-1101"><span class="linenos">1101</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;AddElement expects a non-empty variables array&#39;</span><span class="p">)</span>
</span><span id="CpModel-1102"><a href="#CpModel-1102"><span class="linenos">1102</span></a>
</span><span id="CpModel-1103"><a href="#CpModel-1103"><span class="linenos">1103</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">index</span><span class="p">):</span>
</span><span id="CpModel-1104"><a href="#CpModel-1104"><span class="linenos">1104</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">variables</span><span class="p">)[</span><span class="nb">int</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span>
</span><span id="CpModel-1105"><a href="#CpModel-1105"><span class="linenos">1105</span></a>
</span><span id="CpModel-1106"><a href="#CpModel-1106"><span class="linenos">1106</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1107"><a href="#CpModel-1107"><span class="linenos">1107</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1108"><a href="#CpModel-1108"><span class="linenos">1108</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</span><span id="CpModel-1109"><a href="#CpModel-1109"><span class="linenos">1109</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel-1110"><a href="#CpModel-1110"><span class="linenos">1110</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">])</span>
</span><span id="CpModel-1111"><a href="#CpModel-1111"><span class="linenos">1111</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
</span><span id="CpModel-1112"><a href="#CpModel-1112"><span class="linenos">1112</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1113"><a href="#CpModel-1113"><span class="linenos">1113</span></a>
</span><span id="CpModel-1114"><a href="#CpModel-1114"><span class="linenos">1114</span></a>    <span class="k">def</span> <span class="nf">AddCircuit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arcs</span><span class="p">):</span>
</span><span id="CpModel-1115"><a href="#CpModel-1115"><span class="linenos">1115</span></a>        <span class="sd">&quot;&quot;&quot;Adds Circuit(arcs).</span>
</span><span id="CpModel-1116"><a href="#CpModel-1116"><span class="linenos">1116</span></a>
</span><span id="CpModel-1117"><a href="#CpModel-1117"><span class="linenos">1117</span></a><span class="sd">    Adds a circuit constraint from a sparse list of arcs that encode the graph.</span>
</span><span id="CpModel-1118"><a href="#CpModel-1118"><span class="linenos">1118</span></a>
</span><span id="CpModel-1119"><a href="#CpModel-1119"><span class="linenos">1119</span></a><span class="sd">    A circuit is a unique Hamiltonian path in a subgraph of the total</span>
</span><span id="CpModel-1120"><a href="#CpModel-1120"><span class="linenos">1120</span></a><span class="sd">    graph. In case a node &#39;i&#39; is not in the path, then there must be a</span>
</span><span id="CpModel-1121"><a href="#CpModel-1121"><span class="linenos">1121</span></a><span class="sd">    loop arc &#39;i -&gt; i&#39; associated with a true literal. Otherwise</span>
</span><span id="CpModel-1122"><a href="#CpModel-1122"><span class="linenos">1122</span></a><span class="sd">    this constraint will fail.</span>
</span><span id="CpModel-1123"><a href="#CpModel-1123"><span class="linenos">1123</span></a>
</span><span id="CpModel-1124"><a href="#CpModel-1124"><span class="linenos">1124</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1125"><a href="#CpModel-1125"><span class="linenos">1125</span></a><span class="sd">      arcs: a list of arcs. An arc is a tuple (source_node, destination_node,</span>
</span><span id="CpModel-1126"><a href="#CpModel-1126"><span class="linenos">1126</span></a><span class="sd">        literal). The arc is selected in the circuit if the literal is true.</span>
</span><span id="CpModel-1127"><a href="#CpModel-1127"><span class="linenos">1127</span></a><span class="sd">        Both source_node and destination_node must be integers between 0 and the</span>
</span><span id="CpModel-1128"><a href="#CpModel-1128"><span class="linenos">1128</span></a><span class="sd">        number of nodes - 1.</span>
</span><span id="CpModel-1129"><a href="#CpModel-1129"><span class="linenos">1129</span></a>
</span><span id="CpModel-1130"><a href="#CpModel-1130"><span class="linenos">1130</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1131"><a href="#CpModel-1131"><span class="linenos">1131</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel-1132"><a href="#CpModel-1132"><span class="linenos">1132</span></a>
</span><span id="CpModel-1133"><a href="#CpModel-1133"><span class="linenos">1133</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel-1134"><a href="#CpModel-1134"><span class="linenos">1134</span></a><span class="sd">      ValueError: If the list of arcs is empty.</span>
</span><span id="CpModel-1135"><a href="#CpModel-1135"><span class="linenos">1135</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1136"><a href="#CpModel-1136"><span class="linenos">1136</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">arcs</span><span class="p">:</span>
</span><span id="CpModel-1137"><a href="#CpModel-1137"><span class="linenos">1137</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;AddCircuit expects a non-empty array of arcs&#39;</span><span class="p">)</span>
</span><span id="CpModel-1138"><a href="#CpModel-1138"><span class="linenos">1138</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1139"><a href="#CpModel-1139"><span class="linenos">1139</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1140"><a href="#CpModel-1140"><span class="linenos">1140</span></a>        <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">:</span>
</span><span id="CpModel-1141"><a href="#CpModel-1141"><span class="linenos">1141</span></a>            <span class="n">tail</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int32</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="CpModel-1142"><a href="#CpModel-1142"><span class="linenos">1142</span></a>            <span class="n">head</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int32</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="CpModel-1143"><a href="#CpModel-1143"><span class="linenos">1143</span></a>            <span class="n">lit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="CpModel-1144"><a href="#CpModel-1144"><span class="linenos">1144</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">tails</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
</span><span id="CpModel-1145"><a href="#CpModel-1145"><span class="linenos">1145</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">heads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span id="CpModel-1146"><a href="#CpModel-1146"><span class="linenos">1146</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span>
</span><span id="CpModel-1147"><a href="#CpModel-1147"><span class="linenos">1147</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1148"><a href="#CpModel-1148"><span class="linenos">1148</span></a>
</span><span id="CpModel-1149"><a href="#CpModel-1149"><span class="linenos">1149</span></a>    <span class="k">def</span> <span class="nf">AddMultipleCircuit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arcs</span><span class="p">):</span>
</span><span id="CpModel-1150"><a href="#CpModel-1150"><span class="linenos">1150</span></a>        <span class="sd">&quot;&quot;&quot;Adds a multiple circuit constraint, aka the &quot;VRP&quot; constraint.</span>
</span><span id="CpModel-1151"><a href="#CpModel-1151"><span class="linenos">1151</span></a>
</span><span id="CpModel-1152"><a href="#CpModel-1152"><span class="linenos">1152</span></a><span class="sd">    The direct graph where arc #i (from tails[i] to head[i]) is present iff</span>
</span><span id="CpModel-1153"><a href="#CpModel-1153"><span class="linenos">1153</span></a><span class="sd">    literals[i] is true must satisfy this set of properties:</span>
</span><span id="CpModel-1154"><a href="#CpModel-1154"><span class="linenos">1154</span></a><span class="sd">    - #incoming arcs == 1 except for node 0.</span>
</span><span id="CpModel-1155"><a href="#CpModel-1155"><span class="linenos">1155</span></a><span class="sd">    - #outgoing arcs == 1 except for node 0.</span>
</span><span id="CpModel-1156"><a href="#CpModel-1156"><span class="linenos">1156</span></a><span class="sd">    - for node zero, #incoming arcs == #outgoing arcs.</span>
</span><span id="CpModel-1157"><a href="#CpModel-1157"><span class="linenos">1157</span></a><span class="sd">    - There are no duplicate arcs.</span>
</span><span id="CpModel-1158"><a href="#CpModel-1158"><span class="linenos">1158</span></a><span class="sd">    - Self-arcs are allowed except for node 0.</span>
</span><span id="CpModel-1159"><a href="#CpModel-1159"><span class="linenos">1159</span></a><span class="sd">    - There is no cycle in this graph, except through node 0.</span>
</span><span id="CpModel-1160"><a href="#CpModel-1160"><span class="linenos">1160</span></a>
</span><span id="CpModel-1161"><a href="#CpModel-1161"><span class="linenos">1161</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1162"><a href="#CpModel-1162"><span class="linenos">1162</span></a><span class="sd">      arcs: a list of arcs. An arc is a tuple (source_node, destination_node,</span>
</span><span id="CpModel-1163"><a href="#CpModel-1163"><span class="linenos">1163</span></a><span class="sd">        literal). The arc is selected in the circuit if the literal is true.</span>
</span><span id="CpModel-1164"><a href="#CpModel-1164"><span class="linenos">1164</span></a><span class="sd">        Both source_node and destination_node must be integers between 0 and the</span>
</span><span id="CpModel-1165"><a href="#CpModel-1165"><span class="linenos">1165</span></a><span class="sd">        number of nodes - 1.</span>
</span><span id="CpModel-1166"><a href="#CpModel-1166"><span class="linenos">1166</span></a>
</span><span id="CpModel-1167"><a href="#CpModel-1167"><span class="linenos">1167</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1168"><a href="#CpModel-1168"><span class="linenos">1168</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel-1169"><a href="#CpModel-1169"><span class="linenos">1169</span></a>
</span><span id="CpModel-1170"><a href="#CpModel-1170"><span class="linenos">1170</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel-1171"><a href="#CpModel-1171"><span class="linenos">1171</span></a><span class="sd">      ValueError: If the list of arcs is empty.</span>
</span><span id="CpModel-1172"><a href="#CpModel-1172"><span class="linenos">1172</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1173"><a href="#CpModel-1173"><span class="linenos">1173</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">arcs</span><span class="p">:</span>
</span><span id="CpModel-1174"><a href="#CpModel-1174"><span class="linenos">1174</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel-1175"><a href="#CpModel-1175"><span class="linenos">1175</span></a>                <span class="s1">&#39;AddMultipleCircuit expects a non-empty array of arcs&#39;</span><span class="p">)</span>
</span><span id="CpModel-1176"><a href="#CpModel-1176"><span class="linenos">1176</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1177"><a href="#CpModel-1177"><span class="linenos">1177</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1178"><a href="#CpModel-1178"><span class="linenos">1178</span></a>        <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">:</span>
</span><span id="CpModel-1179"><a href="#CpModel-1179"><span class="linenos">1179</span></a>            <span class="n">tail</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int32</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="CpModel-1180"><a href="#CpModel-1180"><span class="linenos">1180</span></a>            <span class="n">head</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int32</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="CpModel-1181"><a href="#CpModel-1181"><span class="linenos">1181</span></a>            <span class="n">lit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="CpModel-1182"><a href="#CpModel-1182"><span class="linenos">1182</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">tails</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
</span><span id="CpModel-1183"><a href="#CpModel-1183"><span class="linenos">1183</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">heads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span id="CpModel-1184"><a href="#CpModel-1184"><span class="linenos">1184</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span>
</span><span id="CpModel-1185"><a href="#CpModel-1185"><span class="linenos">1185</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1186"><a href="#CpModel-1186"><span class="linenos">1186</span></a>
</span><span id="CpModel-1187"><a href="#CpModel-1187"><span class="linenos">1187</span></a>    <span class="k">def</span> <span class="nf">AddAllowedAssignments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">tuples_list</span><span class="p">):</span>
</span><span id="CpModel-1188"><a href="#CpModel-1188"><span class="linenos">1188</span></a>        <span class="sd">&quot;&quot;&quot;Adds AllowedAssignments(variables, tuples_list).</span>
</span><span id="CpModel-1189"><a href="#CpModel-1189"><span class="linenos">1189</span></a>
</span><span id="CpModel-1190"><a href="#CpModel-1190"><span class="linenos">1190</span></a><span class="sd">    An AllowedAssignments constraint is a constraint on an array of variables,</span>
</span><span id="CpModel-1191"><a href="#CpModel-1191"><span class="linenos">1191</span></a><span class="sd">    which requires that when all variables are assigned values, the resulting</span>
</span><span id="CpModel-1192"><a href="#CpModel-1192"><span class="linenos">1192</span></a><span class="sd">    array equals one of the  tuples in `tuple_list`.</span>
</span><span id="CpModel-1193"><a href="#CpModel-1193"><span class="linenos">1193</span></a>
</span><span id="CpModel-1194"><a href="#CpModel-1194"><span class="linenos">1194</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1195"><a href="#CpModel-1195"><span class="linenos">1195</span></a><span class="sd">      variables: A list of variables.</span>
</span><span id="CpModel-1196"><a href="#CpModel-1196"><span class="linenos">1196</span></a><span class="sd">      tuples_list: A list of admissible tuples. Each tuple must have the same</span>
</span><span id="CpModel-1197"><a href="#CpModel-1197"><span class="linenos">1197</span></a><span class="sd">        length as the variables, and the ith value of a tuple corresponds to the</span>
</span><span id="CpModel-1198"><a href="#CpModel-1198"><span class="linenos">1198</span></a><span class="sd">        ith variable.</span>
</span><span id="CpModel-1199"><a href="#CpModel-1199"><span class="linenos">1199</span></a>
</span><span id="CpModel-1200"><a href="#CpModel-1200"><span class="linenos">1200</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1201"><a href="#CpModel-1201"><span class="linenos">1201</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel-1202"><a href="#CpModel-1202"><span class="linenos">1202</span></a>
</span><span id="CpModel-1203"><a href="#CpModel-1203"><span class="linenos">1203</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel-1204"><a href="#CpModel-1204"><span class="linenos">1204</span></a><span class="sd">      TypeError: If a tuple does not have the same size as the list of</span>
</span><span id="CpModel-1205"><a href="#CpModel-1205"><span class="linenos">1205</span></a><span class="sd">          variables.</span>
</span><span id="CpModel-1206"><a href="#CpModel-1206"><span class="linenos">1206</span></a><span class="sd">      ValueError: If the array of variables is empty.</span>
</span><span id="CpModel-1207"><a href="#CpModel-1207"><span class="linenos">1207</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1208"><a href="#CpModel-1208"><span class="linenos">1208</span></a>
</span><span id="CpModel-1209"><a href="#CpModel-1209"><span class="linenos">1209</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">variables</span><span class="p">:</span>
</span><span id="CpModel-1210"><a href="#CpModel-1210"><span class="linenos">1210</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel-1211"><a href="#CpModel-1211"><span class="linenos">1211</span></a>                <span class="s1">&#39;AddAllowedAssignments expects a non-empty variables &#39;</span>
</span><span id="CpModel-1212"><a href="#CpModel-1212"><span class="linenos">1212</span></a>                <span class="s1">&#39;array&#39;</span><span class="p">)</span>
</span><span id="CpModel-1213"><a href="#CpModel-1213"><span class="linenos">1213</span></a>
</span><span id="CpModel-1214"><a href="#CpModel-1214"><span class="linenos">1214</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1215"><a href="#CpModel-1215"><span class="linenos">1215</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1216"><a href="#CpModel-1216"><span class="linenos">1216</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">])</span>
</span><span id="CpModel-1217"><a href="#CpModel-1217"><span class="linenos">1217</span></a>        <span class="n">arity</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
</span><span id="CpModel-1218"><a href="#CpModel-1218"><span class="linenos">1218</span></a>        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tuples_list</span><span class="p">:</span>
</span><span id="CpModel-1219"><a href="#CpModel-1219"><span class="linenos">1219</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">!=</span> <span class="n">arity</span><span class="p">:</span>
</span><span id="CpModel-1220"><a href="#CpModel-1220"><span class="linenos">1220</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Tuple &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; has the wrong arity&#39;</span><span class="p">)</span>
</span><span id="CpModel-1221"><a href="#CpModel-1221"><span class="linenos">1221</span></a>            <span class="n">ar</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="CpModel-1222"><a href="#CpModel-1222"><span class="linenos">1222</span></a>            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">t</span><span class="p">:</span>
</span><span id="CpModel-1223"><a href="#CpModel-1223"><span class="linenos">1223</span></a>                <span class="n">ar</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="CpModel-1224"><a href="#CpModel-1224"><span class="linenos">1224</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ar</span><span class="p">)</span>
</span><span id="CpModel-1225"><a href="#CpModel-1225"><span class="linenos">1225</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1226"><a href="#CpModel-1226"><span class="linenos">1226</span></a>
</span><span id="CpModel-1227"><a href="#CpModel-1227"><span class="linenos">1227</span></a>    <span class="k">def</span> <span class="nf">AddForbiddenAssignments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">tuples_list</span><span class="p">):</span>
</span><span id="CpModel-1228"><a href="#CpModel-1228"><span class="linenos">1228</span></a>        <span class="sd">&quot;&quot;&quot;Adds AddForbiddenAssignments(variables, [tuples_list]).</span>
</span><span id="CpModel-1229"><a href="#CpModel-1229"><span class="linenos">1229</span></a>
</span><span id="CpModel-1230"><a href="#CpModel-1230"><span class="linenos">1230</span></a><span class="sd">    A ForbiddenAssignments constraint is a constraint on an array of variables</span>
</span><span id="CpModel-1231"><a href="#CpModel-1231"><span class="linenos">1231</span></a><span class="sd">    where the list of impossible combinations is provided in the tuples list.</span>
</span><span id="CpModel-1232"><a href="#CpModel-1232"><span class="linenos">1232</span></a>
</span><span id="CpModel-1233"><a href="#CpModel-1233"><span class="linenos">1233</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1234"><a href="#CpModel-1234"><span class="linenos">1234</span></a><span class="sd">      variables: A list of variables.</span>
</span><span id="CpModel-1235"><a href="#CpModel-1235"><span class="linenos">1235</span></a><span class="sd">      tuples_list: A list of forbidden tuples. Each tuple must have the same</span>
</span><span id="CpModel-1236"><a href="#CpModel-1236"><span class="linenos">1236</span></a><span class="sd">        length as the variables, and the *i*th value of a tuple corresponds to</span>
</span><span id="CpModel-1237"><a href="#CpModel-1237"><span class="linenos">1237</span></a><span class="sd">        the *i*th variable.</span>
</span><span id="CpModel-1238"><a href="#CpModel-1238"><span class="linenos">1238</span></a>
</span><span id="CpModel-1239"><a href="#CpModel-1239"><span class="linenos">1239</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1240"><a href="#CpModel-1240"><span class="linenos">1240</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel-1241"><a href="#CpModel-1241"><span class="linenos">1241</span></a>
</span><span id="CpModel-1242"><a href="#CpModel-1242"><span class="linenos">1242</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel-1243"><a href="#CpModel-1243"><span class="linenos">1243</span></a><span class="sd">      TypeError: If a tuple does not have the same size as the list of</span>
</span><span id="CpModel-1244"><a href="#CpModel-1244"><span class="linenos">1244</span></a><span class="sd">                 variables.</span>
</span><span id="CpModel-1245"><a href="#CpModel-1245"><span class="linenos">1245</span></a><span class="sd">      ValueError: If the array of variables is empty.</span>
</span><span id="CpModel-1246"><a href="#CpModel-1246"><span class="linenos">1246</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1247"><a href="#CpModel-1247"><span class="linenos">1247</span></a>
</span><span id="CpModel-1248"><a href="#CpModel-1248"><span class="linenos">1248</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">variables</span><span class="p">:</span>
</span><span id="CpModel-1249"><a href="#CpModel-1249"><span class="linenos">1249</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel-1250"><a href="#CpModel-1250"><span class="linenos">1250</span></a>                <span class="s1">&#39;AddForbiddenAssignments expects a non-empty variables &#39;</span>
</span><span id="CpModel-1251"><a href="#CpModel-1251"><span class="linenos">1251</span></a>                <span class="s1">&#39;array&#39;</span><span class="p">)</span>
</span><span id="CpModel-1252"><a href="#CpModel-1252"><span class="linenos">1252</span></a>
</span><span id="CpModel-1253"><a href="#CpModel-1253"><span class="linenos">1253</span></a>        <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1254"><a href="#CpModel-1254"><span class="linenos">1254</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddAllowedAssignments</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">tuples_list</span><span class="p">)</span>
</span><span id="CpModel-1255"><a href="#CpModel-1255"><span class="linenos">1255</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">negated</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="CpModel-1256"><a href="#CpModel-1256"><span class="linenos">1256</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1257"><a href="#CpModel-1257"><span class="linenos">1257</span></a>
</span><span id="CpModel-1258"><a href="#CpModel-1258"><span class="linenos">1258</span></a>    <span class="k">def</span> <span class="nf">AddAutomaton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transition_variables</span><span class="p">,</span> <span class="n">starting_state</span><span class="p">,</span> <span class="n">final_states</span><span class="p">,</span>
</span><span id="CpModel-1259"><a href="#CpModel-1259"><span class="linenos">1259</span></a>                     <span class="n">transition_triples</span><span class="p">):</span>
</span><span id="CpModel-1260"><a href="#CpModel-1260"><span class="linenos">1260</span></a>        <span class="sd">&quot;&quot;&quot;Adds an automaton constraint.</span>
</span><span id="CpModel-1261"><a href="#CpModel-1261"><span class="linenos">1261</span></a>
</span><span id="CpModel-1262"><a href="#CpModel-1262"><span class="linenos">1262</span></a><span class="sd">    An automaton constraint takes a list of variables (of size *n*), an initial</span>
</span><span id="CpModel-1263"><a href="#CpModel-1263"><span class="linenos">1263</span></a><span class="sd">    state, a set of final states, and a set of transitions. A transition is a</span>
</span><span id="CpModel-1264"><a href="#CpModel-1264"><span class="linenos">1264</span></a><span class="sd">    triplet (*tail*, *transition*, *head*), where *tail* and *head* are states,</span>
</span><span id="CpModel-1265"><a href="#CpModel-1265"><span class="linenos">1265</span></a><span class="sd">    and *transition* is the label of an arc from *head* to *tail*,</span>
</span><span id="CpModel-1266"><a href="#CpModel-1266"><span class="linenos">1266</span></a><span class="sd">    corresponding to the value of one variable in the list of variables.</span>
</span><span id="CpModel-1267"><a href="#CpModel-1267"><span class="linenos">1267</span></a>
</span><span id="CpModel-1268"><a href="#CpModel-1268"><span class="linenos">1268</span></a><span class="sd">    This automaton will be unrolled into a flow with *n* + 1 phases. Each phase</span>
</span><span id="CpModel-1269"><a href="#CpModel-1269"><span class="linenos">1269</span></a><span class="sd">    contains the possible states of the automaton. The first state contains the</span>
</span><span id="CpModel-1270"><a href="#CpModel-1270"><span class="linenos">1270</span></a><span class="sd">    initial state. The last phase contains the final states.</span>
</span><span id="CpModel-1271"><a href="#CpModel-1271"><span class="linenos">1271</span></a>
</span><span id="CpModel-1272"><a href="#CpModel-1272"><span class="linenos">1272</span></a><span class="sd">    Between two consecutive phases *i* and *i* + 1, the automaton creates a set</span>
</span><span id="CpModel-1273"><a href="#CpModel-1273"><span class="linenos">1273</span></a><span class="sd">    of arcs. For each transition (*tail*, *transition*, *head*), it will add</span>
</span><span id="CpModel-1274"><a href="#CpModel-1274"><span class="linenos">1274</span></a><span class="sd">    an arc from the state *tail* of phase *i* and the state *head* of phase</span>
</span><span id="CpModel-1275"><a href="#CpModel-1275"><span class="linenos">1275</span></a><span class="sd">    *i* + 1. This arc is labeled by the value *transition* of the variables</span>
</span><span id="CpModel-1276"><a href="#CpModel-1276"><span class="linenos">1276</span></a><span class="sd">    `variables[i]`. That is, this arc can only be selected if `variables[i]`</span>
</span><span id="CpModel-1277"><a href="#CpModel-1277"><span class="linenos">1277</span></a><span class="sd">    is assigned the value *transition*.</span>
</span><span id="CpModel-1278"><a href="#CpModel-1278"><span class="linenos">1278</span></a>
</span><span id="CpModel-1279"><a href="#CpModel-1279"><span class="linenos">1279</span></a><span class="sd">    A feasible solution of this constraint is an assignment of variables such</span>
</span><span id="CpModel-1280"><a href="#CpModel-1280"><span class="linenos">1280</span></a><span class="sd">    that, starting from the initial state in phase 0, there is a path labeled by</span>
</span><span id="CpModel-1281"><a href="#CpModel-1281"><span class="linenos">1281</span></a><span class="sd">    the values of the variables that ends in one of the final states in the</span>
</span><span id="CpModel-1282"><a href="#CpModel-1282"><span class="linenos">1282</span></a><span class="sd">    final phase.</span>
</span><span id="CpModel-1283"><a href="#CpModel-1283"><span class="linenos">1283</span></a>
</span><span id="CpModel-1284"><a href="#CpModel-1284"><span class="linenos">1284</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1285"><a href="#CpModel-1285"><span class="linenos">1285</span></a><span class="sd">      transition_variables: A non-empty list of variables whose values</span>
</span><span id="CpModel-1286"><a href="#CpModel-1286"><span class="linenos">1286</span></a><span class="sd">        correspond to the labels of the arcs traversed by the automaton.</span>
</span><span id="CpModel-1287"><a href="#CpModel-1287"><span class="linenos">1287</span></a><span class="sd">      starting_state: The initial state of the automaton.</span>
</span><span id="CpModel-1288"><a href="#CpModel-1288"><span class="linenos">1288</span></a><span class="sd">      final_states: A non-empty list of admissible final states.</span>
</span><span id="CpModel-1289"><a href="#CpModel-1289"><span class="linenos">1289</span></a><span class="sd">      transition_triples: A list of transitions for the automaton, in the</span>
</span><span id="CpModel-1290"><a href="#CpModel-1290"><span class="linenos">1290</span></a><span class="sd">        following format (current_state, variable_value, next_state).</span>
</span><span id="CpModel-1291"><a href="#CpModel-1291"><span class="linenos">1291</span></a>
</span><span id="CpModel-1292"><a href="#CpModel-1292"><span class="linenos">1292</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1293"><a href="#CpModel-1293"><span class="linenos">1293</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel-1294"><a href="#CpModel-1294"><span class="linenos">1294</span></a>
</span><span id="CpModel-1295"><a href="#CpModel-1295"><span class="linenos">1295</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel-1296"><a href="#CpModel-1296"><span class="linenos">1296</span></a><span class="sd">      ValueError: if `transition_variables`, `final_states`, or</span>
</span><span id="CpModel-1297"><a href="#CpModel-1297"><span class="linenos">1297</span></a><span class="sd">        `transition_triples` are empty.</span>
</span><span id="CpModel-1298"><a href="#CpModel-1298"><span class="linenos">1298</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1299"><a href="#CpModel-1299"><span class="linenos">1299</span></a>
</span><span id="CpModel-1300"><a href="#CpModel-1300"><span class="linenos">1300</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">transition_variables</span><span class="p">:</span>
</span><span id="CpModel-1301"><a href="#CpModel-1301"><span class="linenos">1301</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel-1302"><a href="#CpModel-1302"><span class="linenos">1302</span></a>                <span class="s1">&#39;AddAutomaton expects a non-empty transition_variables &#39;</span>
</span><span id="CpModel-1303"><a href="#CpModel-1303"><span class="linenos">1303</span></a>                <span class="s1">&#39;array&#39;</span><span class="p">)</span>
</span><span id="CpModel-1304"><a href="#CpModel-1304"><span class="linenos">1304</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">final_states</span><span class="p">:</span>
</span><span id="CpModel-1305"><a href="#CpModel-1305"><span class="linenos">1305</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;AddAutomaton expects some final states&#39;</span><span class="p">)</span>
</span><span id="CpModel-1306"><a href="#CpModel-1306"><span class="linenos">1306</span></a>
</span><span id="CpModel-1307"><a href="#CpModel-1307"><span class="linenos">1307</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">transition_triples</span><span class="p">:</span>
</span><span id="CpModel-1308"><a href="#CpModel-1308"><span class="linenos">1308</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;AddAutomaton expects some transition triples&#39;</span><span class="p">)</span>
</span><span id="CpModel-1309"><a href="#CpModel-1309"><span class="linenos">1309</span></a>
</span><span id="CpModel-1310"><a href="#CpModel-1310"><span class="linenos">1310</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1311"><a href="#CpModel-1311"><span class="linenos">1311</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1312"><a href="#CpModel-1312"><span class="linenos">1312</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel-1313"><a href="#CpModel-1313"><span class="linenos">1313</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">transition_variables</span><span class="p">])</span>
</span><span id="CpModel-1314"><a href="#CpModel-1314"><span class="linenos">1314</span></a>        <span class="n">starting_state</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">starting_state</span><span class="p">)</span>
</span><span id="CpModel-1315"><a href="#CpModel-1315"><span class="linenos">1315</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">starting_state</span> <span class="o">=</span> <span class="n">starting_state</span>
</span><span id="CpModel-1316"><a href="#CpModel-1316"><span class="linenos">1316</span></a>        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">final_states</span><span class="p">:</span>
</span><span id="CpModel-1317"><a href="#CpModel-1317"><span class="linenos">1317</span></a>            <span class="n">v</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="CpModel-1318"><a href="#CpModel-1318"><span class="linenos">1318</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">final_states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="CpModel-1319"><a href="#CpModel-1319"><span class="linenos">1319</span></a>        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">transition_triples</span><span class="p">:</span>
</span><span id="CpModel-1320"><a href="#CpModel-1320"><span class="linenos">1320</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="CpModel-1321"><a href="#CpModel-1321"><span class="linenos">1321</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Tuple &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span>
</span><span id="CpModel-1322"><a href="#CpModel-1322"><span class="linenos">1322</span></a>                                <span class="s1">&#39; has the wrong arity (!= 3)&#39;</span><span class="p">)</span>
</span><span id="CpModel-1323"><a href="#CpModel-1323"><span class="linenos">1323</span></a>            <span class="n">tail</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="CpModel-1324"><a href="#CpModel-1324"><span class="linenos">1324</span></a>            <span class="n">label</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="CpModel-1325"><a href="#CpModel-1325"><span class="linenos">1325</span></a>            <span class="n">head</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="CpModel-1326"><a href="#CpModel-1326"><span class="linenos">1326</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">transition_tail</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
</span><span id="CpModel-1327"><a href="#CpModel-1327"><span class="linenos">1327</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">transition_label</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
</span><span id="CpModel-1328"><a href="#CpModel-1328"><span class="linenos">1328</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">transition_head</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span id="CpModel-1329"><a href="#CpModel-1329"><span class="linenos">1329</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1330"><a href="#CpModel-1330"><span class="linenos">1330</span></a>
</span><span id="CpModel-1331"><a href="#CpModel-1331"><span class="linenos">1331</span></a>    <span class="k">def</span> <span class="nf">AddInverse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">inverse_variables</span><span class="p">):</span>
</span><span id="CpModel-1332"><a href="#CpModel-1332"><span class="linenos">1332</span></a>        <span class="sd">&quot;&quot;&quot;Adds Inverse(variables, inverse_variables).</span>
</span><span id="CpModel-1333"><a href="#CpModel-1333"><span class="linenos">1333</span></a>
</span><span id="CpModel-1334"><a href="#CpModel-1334"><span class="linenos">1334</span></a><span class="sd">    An inverse constraint enforces that if `variables[i]` is assigned a value</span>
</span><span id="CpModel-1335"><a href="#CpModel-1335"><span class="linenos">1335</span></a><span class="sd">    `j`, then `inverse_variables[j]` is assigned a value `i`. And vice versa.</span>
</span><span id="CpModel-1336"><a href="#CpModel-1336"><span class="linenos">1336</span></a>
</span><span id="CpModel-1337"><a href="#CpModel-1337"><span class="linenos">1337</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1338"><a href="#CpModel-1338"><span class="linenos">1338</span></a><span class="sd">      variables: An array of integer variables.</span>
</span><span id="CpModel-1339"><a href="#CpModel-1339"><span class="linenos">1339</span></a><span class="sd">      inverse_variables: An array of integer variables.</span>
</span><span id="CpModel-1340"><a href="#CpModel-1340"><span class="linenos">1340</span></a>
</span><span id="CpModel-1341"><a href="#CpModel-1341"><span class="linenos">1341</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1342"><a href="#CpModel-1342"><span class="linenos">1342</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel-1343"><a href="#CpModel-1343"><span class="linenos">1343</span></a>
</span><span id="CpModel-1344"><a href="#CpModel-1344"><span class="linenos">1344</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel-1345"><a href="#CpModel-1345"><span class="linenos">1345</span></a><span class="sd">      TypeError: if variables and inverse_variables have different lengths, or</span>
</span><span id="CpModel-1346"><a href="#CpModel-1346"><span class="linenos">1346</span></a><span class="sd">          if they are empty.</span>
</span><span id="CpModel-1347"><a href="#CpModel-1347"><span class="linenos">1347</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1348"><a href="#CpModel-1348"><span class="linenos">1348</span></a>
</span><span id="CpModel-1349"><a href="#CpModel-1349"><span class="linenos">1349</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">variables</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">inverse_variables</span><span class="p">:</span>
</span><span id="CpModel-1350"><a href="#CpModel-1350"><span class="linenos">1350</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel-1351"><a href="#CpModel-1351"><span class="linenos">1351</span></a>                <span class="s1">&#39;The Inverse constraint does not accept empty arrays&#39;</span><span class="p">)</span>
</span><span id="CpModel-1352"><a href="#CpModel-1352"><span class="linenos">1352</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">inverse_variables</span><span class="p">):</span>
</span><span id="CpModel-1353"><a href="#CpModel-1353"><span class="linenos">1353</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel-1354"><a href="#CpModel-1354"><span class="linenos">1354</span></a>                <span class="s1">&#39;In the inverse constraint, the two array variables and&#39;</span>
</span><span id="CpModel-1355"><a href="#CpModel-1355"><span class="linenos">1355</span></a>                <span class="s1">&#39; inverse_variables must have the same length.&#39;</span><span class="p">)</span>
</span><span id="CpModel-1356"><a href="#CpModel-1356"><span class="linenos">1356</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1357"><a href="#CpModel-1357"><span class="linenos">1357</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1358"><a href="#CpModel-1358"><span class="linenos">1358</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">inverse</span><span class="o">.</span><span class="n">f_direct</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel-1359"><a href="#CpModel-1359"><span class="linenos">1359</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">])</span>
</span><span id="CpModel-1360"><a href="#CpModel-1360"><span class="linenos">1360</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">inverse</span><span class="o">.</span><span class="n">f_inverse</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel-1361"><a href="#CpModel-1361"><span class="linenos">1361</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">inverse_variables</span><span class="p">])</span>
</span><span id="CpModel-1362"><a href="#CpModel-1362"><span class="linenos">1362</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1363"><a href="#CpModel-1363"><span class="linenos">1363</span></a>
</span><span id="CpModel-1364"><a href="#CpModel-1364"><span class="linenos">1364</span></a>    <span class="k">def</span> <span class="nf">AddReservoirConstraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">,</span> <span class="n">level_changes</span><span class="p">,</span> <span class="n">min_level</span><span class="p">,</span>
</span><span id="CpModel-1365"><a href="#CpModel-1365"><span class="linenos">1365</span></a>                               <span class="n">max_level</span><span class="p">):</span>
</span><span id="CpModel-1366"><a href="#CpModel-1366"><span class="linenos">1366</span></a>        <span class="sd">&quot;&quot;&quot;Adds Reservoir(times, level_changes, min_level, max_level).</span>
</span><span id="CpModel-1367"><a href="#CpModel-1367"><span class="linenos">1367</span></a>
</span><span id="CpModel-1368"><a href="#CpModel-1368"><span class="linenos">1368</span></a><span class="sd">    Maintains a reservoir level within bounds. The water level starts at 0, and</span>
</span><span id="CpModel-1369"><a href="#CpModel-1369"><span class="linenos">1369</span></a><span class="sd">    at any time, it must be between min_level and max_level.</span>
</span><span id="CpModel-1370"><a href="#CpModel-1370"><span class="linenos">1370</span></a>
</span><span id="CpModel-1371"><a href="#CpModel-1371"><span class="linenos">1371</span></a><span class="sd">    If the affine expression `times[i]` is assigned a value t, then the current</span>
</span><span id="CpModel-1372"><a href="#CpModel-1372"><span class="linenos">1372</span></a><span class="sd">    level changes by `level_changes[i]`, which is constant, at time t.</span>
</span><span id="CpModel-1373"><a href="#CpModel-1373"><span class="linenos">1373</span></a>
</span><span id="CpModel-1374"><a href="#CpModel-1374"><span class="linenos">1374</span></a><span class="sd">     Note that min level must be &lt;= 0, and the max level must be &gt;= 0. Please</span>
</span><span id="CpModel-1375"><a href="#CpModel-1375"><span class="linenos">1375</span></a><span class="sd">     use fixed level_changes to simulate initial state.</span>
</span><span id="CpModel-1376"><a href="#CpModel-1376"><span class="linenos">1376</span></a>
</span><span id="CpModel-1377"><a href="#CpModel-1377"><span class="linenos">1377</span></a><span class="sd">     Therefore, at any time:</span>
</span><span id="CpModel-1378"><a href="#CpModel-1378"><span class="linenos">1378</span></a><span class="sd">         sum(level_changes[i] if times[i] &lt;= t) in [min_level, max_level]</span>
</span><span id="CpModel-1379"><a href="#CpModel-1379"><span class="linenos">1379</span></a>
</span><span id="CpModel-1380"><a href="#CpModel-1380"><span class="linenos">1380</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1381"><a href="#CpModel-1381"><span class="linenos">1381</span></a><span class="sd">      times: A list of affine expressions which specify the time of the filling</span>
</span><span id="CpModel-1382"><a href="#CpModel-1382"><span class="linenos">1382</span></a><span class="sd">        or emptying the reservoir.</span>
</span><span id="CpModel-1383"><a href="#CpModel-1383"><span class="linenos">1383</span></a><span class="sd">      level_changes: A list of integer values that specifies the amount of the</span>
</span><span id="CpModel-1384"><a href="#CpModel-1384"><span class="linenos">1384</span></a><span class="sd">        emptying or filling.</span>
</span><span id="CpModel-1385"><a href="#CpModel-1385"><span class="linenos">1385</span></a><span class="sd">      min_level: At any time, the level of the reservoir must be greater or</span>
</span><span id="CpModel-1386"><a href="#CpModel-1386"><span class="linenos">1386</span></a><span class="sd">        equal than the min level.</span>
</span><span id="CpModel-1387"><a href="#CpModel-1387"><span class="linenos">1387</span></a><span class="sd">      max_level: At any time, the level of the reservoir must be less or equal</span>
</span><span id="CpModel-1388"><a href="#CpModel-1388"><span class="linenos">1388</span></a><span class="sd">        than the max level.</span>
</span><span id="CpModel-1389"><a href="#CpModel-1389"><span class="linenos">1389</span></a>
</span><span id="CpModel-1390"><a href="#CpModel-1390"><span class="linenos">1390</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1391"><a href="#CpModel-1391"><span class="linenos">1391</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel-1392"><a href="#CpModel-1392"><span class="linenos">1392</span></a>
</span><span id="CpModel-1393"><a href="#CpModel-1393"><span class="linenos">1393</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel-1394"><a href="#CpModel-1394"><span class="linenos">1394</span></a><span class="sd">      ValueError: if max_level &lt; min_level.</span>
</span><span id="CpModel-1395"><a href="#CpModel-1395"><span class="linenos">1395</span></a>
</span><span id="CpModel-1396"><a href="#CpModel-1396"><span class="linenos">1396</span></a><span class="sd">      ValueError: if max_level &lt; 0.</span>
</span><span id="CpModel-1397"><a href="#CpModel-1397"><span class="linenos">1397</span></a>
</span><span id="CpModel-1398"><a href="#CpModel-1398"><span class="linenos">1398</span></a><span class="sd">      ValueError: if min_level &gt; 0</span>
</span><span id="CpModel-1399"><a href="#CpModel-1399"><span class="linenos">1399</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1400"><a href="#CpModel-1400"><span class="linenos">1400</span></a>
</span><span id="CpModel-1401"><a href="#CpModel-1401"><span class="linenos">1401</span></a>        <span class="k">if</span> <span class="n">max_level</span> <span class="o">&lt;</span> <span class="n">min_level</span><span class="p">:</span>
</span><span id="CpModel-1402"><a href="#CpModel-1402"><span class="linenos">1402</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel-1403"><a href="#CpModel-1403"><span class="linenos">1403</span></a>                <span class="s1">&#39;Reservoir constraint must have a max_level &gt;= min_level&#39;</span><span class="p">)</span>
</span><span id="CpModel-1404"><a href="#CpModel-1404"><span class="linenos">1404</span></a>
</span><span id="CpModel-1405"><a href="#CpModel-1405"><span class="linenos">1405</span></a>        <span class="k">if</span> <span class="n">max_level</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="CpModel-1406"><a href="#CpModel-1406"><span class="linenos">1406</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Reservoir constraint must have a max_level &gt;= 0&#39;</span><span class="p">)</span>
</span><span id="CpModel-1407"><a href="#CpModel-1407"><span class="linenos">1407</span></a>
</span><span id="CpModel-1408"><a href="#CpModel-1408"><span class="linenos">1408</span></a>        <span class="k">if</span> <span class="n">min_level</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="CpModel-1409"><a href="#CpModel-1409"><span class="linenos">1409</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Reservoir constraint must have a min_level &lt;= 0&#39;</span><span class="p">)</span>
</span><span id="CpModel-1410"><a href="#CpModel-1410"><span class="linenos">1410</span></a>
</span><span id="CpModel-1411"><a href="#CpModel-1411"><span class="linenos">1411</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1412"><a href="#CpModel-1412"><span class="linenos">1412</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1413"><a href="#CpModel-1413"><span class="linenos">1413</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">time_exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel-1414"><a href="#CpModel-1414"><span class="linenos">1414</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">times</span><span class="p">])</span>
</span><span id="CpModel-1415"><a href="#CpModel-1415"><span class="linenos">1415</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">level_changes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">level_changes</span><span class="p">)</span>
</span><span id="CpModel-1416"><a href="#CpModel-1416"><span class="linenos">1416</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">min_level</span> <span class="o">=</span> <span class="n">min_level</span>
</span><span id="CpModel-1417"><a href="#CpModel-1417"><span class="linenos">1417</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">max_level</span> <span class="o">=</span> <span class="n">max_level</span>
</span><span id="CpModel-1418"><a href="#CpModel-1418"><span class="linenos">1418</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1419"><a href="#CpModel-1419"><span class="linenos">1419</span></a>
</span><span id="CpModel-1420"><a href="#CpModel-1420"><span class="linenos">1420</span></a>    <span class="k">def</span> <span class="nf">AddReservoirConstraintWithActive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">,</span> <span class="n">level_changes</span><span class="p">,</span> <span class="n">actives</span><span class="p">,</span>
</span><span id="CpModel-1421"><a href="#CpModel-1421"><span class="linenos">1421</span></a>                                         <span class="n">min_level</span><span class="p">,</span> <span class="n">max_level</span><span class="p">):</span>
</span><span id="CpModel-1422"><a href="#CpModel-1422"><span class="linenos">1422</span></a>        <span class="sd">&quot;&quot;&quot;Adds Reservoir(times, level_changes, actives, min_level, max_level).</span>
</span><span id="CpModel-1423"><a href="#CpModel-1423"><span class="linenos">1423</span></a>
</span><span id="CpModel-1424"><a href="#CpModel-1424"><span class="linenos">1424</span></a><span class="sd">    Maintains a reservoir level within bounds. The water level starts at 0, and</span>
</span><span id="CpModel-1425"><a href="#CpModel-1425"><span class="linenos">1425</span></a><span class="sd">    at any time, it must be between min_level and max_level.</span>
</span><span id="CpModel-1426"><a href="#CpModel-1426"><span class="linenos">1426</span></a>
</span><span id="CpModel-1427"><a href="#CpModel-1427"><span class="linenos">1427</span></a><span class="sd">    If the variable `times[i]` is assigned a value t, and `actives[i]` is</span>
</span><span id="CpModel-1428"><a href="#CpModel-1428"><span class="linenos">1428</span></a><span class="sd">    `True`, then the current level changes by `level_changes[i]`, which is</span>
</span><span id="CpModel-1429"><a href="#CpModel-1429"><span class="linenos">1429</span></a><span class="sd">    constant,</span>
</span><span id="CpModel-1430"><a href="#CpModel-1430"><span class="linenos">1430</span></a><span class="sd">    at time t.</span>
</span><span id="CpModel-1431"><a href="#CpModel-1431"><span class="linenos">1431</span></a>
</span><span id="CpModel-1432"><a href="#CpModel-1432"><span class="linenos">1432</span></a><span class="sd">     Note that min level must be &lt;= 0, and the max level must be &gt;= 0. Please</span>
</span><span id="CpModel-1433"><a href="#CpModel-1433"><span class="linenos">1433</span></a><span class="sd">     use fixed level_changes to simulate initial state.</span>
</span><span id="CpModel-1434"><a href="#CpModel-1434"><span class="linenos">1434</span></a>
</span><span id="CpModel-1435"><a href="#CpModel-1435"><span class="linenos">1435</span></a><span class="sd">     Therefore, at any time:</span>
</span><span id="CpModel-1436"><a href="#CpModel-1436"><span class="linenos">1436</span></a><span class="sd">         sum(level_changes[i] * actives[i] if times[i] &lt;= t) in [min_level,</span>
</span><span id="CpModel-1437"><a href="#CpModel-1437"><span class="linenos">1437</span></a><span class="sd">         max_level]</span>
</span><span id="CpModel-1438"><a href="#CpModel-1438"><span class="linenos">1438</span></a>
</span><span id="CpModel-1439"><a href="#CpModel-1439"><span class="linenos">1439</span></a>
</span><span id="CpModel-1440"><a href="#CpModel-1440"><span class="linenos">1440</span></a><span class="sd">    The array of boolean variables &#39;actives&#39;, if defined, indicates which</span>
</span><span id="CpModel-1441"><a href="#CpModel-1441"><span class="linenos">1441</span></a><span class="sd">    actions are actually performed.</span>
</span><span id="CpModel-1442"><a href="#CpModel-1442"><span class="linenos">1442</span></a>
</span><span id="CpModel-1443"><a href="#CpModel-1443"><span class="linenos">1443</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1444"><a href="#CpModel-1444"><span class="linenos">1444</span></a><span class="sd">      times: A list of affine expressions which specify the time of the filling</span>
</span><span id="CpModel-1445"><a href="#CpModel-1445"><span class="linenos">1445</span></a><span class="sd">        or emptying the reservoir.</span>
</span><span id="CpModel-1446"><a href="#CpModel-1446"><span class="linenos">1446</span></a><span class="sd">      level_changes: A list of integer values that specifies the amount of the</span>
</span><span id="CpModel-1447"><a href="#CpModel-1447"><span class="linenos">1447</span></a><span class="sd">        emptying or filling.</span>
</span><span id="CpModel-1448"><a href="#CpModel-1448"><span class="linenos">1448</span></a><span class="sd">      actives: a list of boolean variables. They indicates if the</span>
</span><span id="CpModel-1449"><a href="#CpModel-1449"><span class="linenos">1449</span></a><span class="sd">        emptying/refilling events actually take place.</span>
</span><span id="CpModel-1450"><a href="#CpModel-1450"><span class="linenos">1450</span></a><span class="sd">      min_level: At any time, the level of the reservoir must be greater or</span>
</span><span id="CpModel-1451"><a href="#CpModel-1451"><span class="linenos">1451</span></a><span class="sd">        equal than the min level.</span>
</span><span id="CpModel-1452"><a href="#CpModel-1452"><span class="linenos">1452</span></a><span class="sd">      max_level: At any time, the level of the reservoir must be less or equal</span>
</span><span id="CpModel-1453"><a href="#CpModel-1453"><span class="linenos">1453</span></a><span class="sd">        than the max level.</span>
</span><span id="CpModel-1454"><a href="#CpModel-1454"><span class="linenos">1454</span></a>
</span><span id="CpModel-1455"><a href="#CpModel-1455"><span class="linenos">1455</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1456"><a href="#CpModel-1456"><span class="linenos">1456</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel-1457"><a href="#CpModel-1457"><span class="linenos">1457</span></a>
</span><span id="CpModel-1458"><a href="#CpModel-1458"><span class="linenos">1458</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel-1459"><a href="#CpModel-1459"><span class="linenos">1459</span></a><span class="sd">      ValueError: if max_level &lt; min_level.</span>
</span><span id="CpModel-1460"><a href="#CpModel-1460"><span class="linenos">1460</span></a>
</span><span id="CpModel-1461"><a href="#CpModel-1461"><span class="linenos">1461</span></a><span class="sd">      ValueError: if max_level &lt; 0.</span>
</span><span id="CpModel-1462"><a href="#CpModel-1462"><span class="linenos">1462</span></a>
</span><span id="CpModel-1463"><a href="#CpModel-1463"><span class="linenos">1463</span></a><span class="sd">      ValueError: if min_level &gt; 0</span>
</span><span id="CpModel-1464"><a href="#CpModel-1464"><span class="linenos">1464</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1465"><a href="#CpModel-1465"><span class="linenos">1465</span></a>
</span><span id="CpModel-1466"><a href="#CpModel-1466"><span class="linenos">1466</span></a>        <span class="k">if</span> <span class="n">max_level</span> <span class="o">&lt;</span> <span class="n">min_level</span><span class="p">:</span>
</span><span id="CpModel-1467"><a href="#CpModel-1467"><span class="linenos">1467</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel-1468"><a href="#CpModel-1468"><span class="linenos">1468</span></a>                <span class="s1">&#39;Reservoir constraint must have a max_level &gt;= min_level&#39;</span><span class="p">)</span>
</span><span id="CpModel-1469"><a href="#CpModel-1469"><span class="linenos">1469</span></a>
</span><span id="CpModel-1470"><a href="#CpModel-1470"><span class="linenos">1470</span></a>        <span class="k">if</span> <span class="n">max_level</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="CpModel-1471"><a href="#CpModel-1471"><span class="linenos">1471</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Reservoir constraint must have a max_level &gt;= 0&#39;</span><span class="p">)</span>
</span><span id="CpModel-1472"><a href="#CpModel-1472"><span class="linenos">1472</span></a>
</span><span id="CpModel-1473"><a href="#CpModel-1473"><span class="linenos">1473</span></a>        <span class="k">if</span> <span class="n">min_level</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="CpModel-1474"><a href="#CpModel-1474"><span class="linenos">1474</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Reservoir constraint must have a min_level &lt;= 0&#39;</span><span class="p">)</span>
</span><span id="CpModel-1475"><a href="#CpModel-1475"><span class="linenos">1475</span></a>
</span><span id="CpModel-1476"><a href="#CpModel-1476"><span class="linenos">1476</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1477"><a href="#CpModel-1477"><span class="linenos">1477</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1478"><a href="#CpModel-1478"><span class="linenos">1478</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">time_exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel-1479"><a href="#CpModel-1479"><span class="linenos">1479</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">times</span><span class="p">])</span>
</span><span id="CpModel-1480"><a href="#CpModel-1480"><span class="linenos">1480</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">level_changes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">level_changes</span><span class="p">)</span>
</span><span id="CpModel-1481"><a href="#CpModel-1481"><span class="linenos">1481</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">active_literals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel-1482"><a href="#CpModel-1482"><span class="linenos">1482</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actives</span><span class="p">])</span>
</span><span id="CpModel-1483"><a href="#CpModel-1483"><span class="linenos">1483</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">min_level</span> <span class="o">=</span> <span class="n">min_level</span>
</span><span id="CpModel-1484"><a href="#CpModel-1484"><span class="linenos">1484</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">max_level</span> <span class="o">=</span> <span class="n">max_level</span>
</span><span id="CpModel-1485"><a href="#CpModel-1485"><span class="linenos">1485</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1486"><a href="#CpModel-1486"><span class="linenos">1486</span></a>
</span><span id="CpModel-1487"><a href="#CpModel-1487"><span class="linenos">1487</span></a>    <span class="k">def</span> <span class="nf">AddMapDomain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">bool_var_array</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="CpModel-1488"><a href="#CpModel-1488"><span class="linenos">1488</span></a>        <span class="sd">&quot;&quot;&quot;Adds `var == i + offset &lt;=&gt; bool_var_array[i] == true for all i`.&quot;&quot;&quot;</span>
</span><span id="CpModel-1489"><a href="#CpModel-1489"><span class="linenos">1489</span></a>
</span><span id="CpModel-1490"><a href="#CpModel-1490"><span class="linenos">1490</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bool_var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bool_var_array</span><span class="p">):</span>
</span><span id="CpModel-1491"><a href="#CpModel-1491"><span class="linenos">1491</span></a>            <span class="n">b_index</span> <span class="o">=</span> <span class="n">bool_var</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="CpModel-1492"><a href="#CpModel-1492"><span class="linenos">1492</span></a>            <span class="n">var_index</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="CpModel-1493"><a href="#CpModel-1493"><span class="linenos">1493</span></a>            <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="CpModel-1494"><a href="#CpModel-1494"><span class="linenos">1494</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var_index</span><span class="p">)</span>
</span><span id="CpModel-1495"><a href="#CpModel-1495"><span class="linenos">1495</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="CpModel-1496"><a href="#CpModel-1496"><span class="linenos">1496</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">offset</span> <span class="o">+</span> <span class="n">i</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">i</span><span class="p">])</span>
</span><span id="CpModel-1497"><a href="#CpModel-1497"><span class="linenos">1497</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b_index</span><span class="p">)</span>
</span><span id="CpModel-1498"><a href="#CpModel-1498"><span class="linenos">1498</span></a>
</span><span id="CpModel-1499"><a href="#CpModel-1499"><span class="linenos">1499</span></a>            <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="CpModel-1500"><a href="#CpModel-1500"><span class="linenos">1500</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var_index</span><span class="p">)</span>
</span><span id="CpModel-1501"><a href="#CpModel-1501"><span class="linenos">1501</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="CpModel-1502"><a href="#CpModel-1502"><span class="linenos">1502</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">-</span><span class="n">b_index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="CpModel-1503"><a href="#CpModel-1503"><span class="linenos">1503</span></a>            <span class="k">if</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="n">INT_MIN</span><span class="p">:</span>
</span><span id="CpModel-1504"><a href="#CpModel-1504"><span class="linenos">1504</span></a>                <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="CpModel-1505"><a href="#CpModel-1505"><span class="linenos">1505</span></a>            <span class="k">if</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">INT_MAX</span><span class="p">:</span>
</span><span id="CpModel-1506"><a href="#CpModel-1506"><span class="linenos">1506</span></a>                <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">offset</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span><span id="CpModel-1507"><a href="#CpModel-1507"><span class="linenos">1507</span></a>
</span><span id="CpModel-1508"><a href="#CpModel-1508"><span class="linenos">1508</span></a>    <span class="k">def</span> <span class="nf">AddImplication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
</span><span id="CpModel-1509"><a href="#CpModel-1509"><span class="linenos">1509</span></a>        <span class="sd">&quot;&quot;&quot;Adds `a =&gt; b` (`a` implies `b`).&quot;&quot;&quot;</span>
</span><span id="CpModel-1510"><a href="#CpModel-1510"><span class="linenos">1510</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1511"><a href="#CpModel-1511"><span class="linenos">1511</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1512"><a href="#CpModel-1512"><span class="linenos">1512</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">bool_or</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
</span><span id="CpModel-1513"><a href="#CpModel-1513"><span class="linenos">1513</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
</span><span id="CpModel-1514"><a href="#CpModel-1514"><span class="linenos">1514</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1515"><a href="#CpModel-1515"><span class="linenos">1515</span></a>
</span><span id="CpModel-1516"><a href="#CpModel-1516"><span class="linenos">1516</span></a>    <span class="k">def</span> <span class="nf">AddBoolOr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="CpModel-1517"><a href="#CpModel-1517"><span class="linenos">1517</span></a>        <span class="sd">&quot;&quot;&quot;Adds `Or(literals) == true`: Sum(literals) &gt;= 1.&quot;&quot;&quot;</span>
</span><span id="CpModel-1518"><a href="#CpModel-1518"><span class="linenos">1518</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1519"><a href="#CpModel-1519"><span class="linenos">1519</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1520"><a href="#CpModel-1520"><span class="linenos">1520</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">bool_or</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="CpModel-1521"><a href="#CpModel-1521"><span class="linenos">1521</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="CpModel-1522"><a href="#CpModel-1522"><span class="linenos">1522</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="CpModel-1523"><a href="#CpModel-1523"><span class="linenos">1523</span></a>        <span class="p">])</span>
</span><span id="CpModel-1524"><a href="#CpModel-1524"><span class="linenos">1524</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1525"><a href="#CpModel-1525"><span class="linenos">1525</span></a>
</span><span id="CpModel-1526"><a href="#CpModel-1526"><span class="linenos">1526</span></a>    <span class="k">def</span> <span class="nf">AddAtLeastOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="CpModel-1527"><a href="#CpModel-1527"><span class="linenos">1527</span></a>        <span class="sd">&quot;&quot;&quot;Same as `AddBoolOr`: `Sum(literals) &gt;= 1`.&quot;&quot;&quot;</span>
</span><span id="CpModel-1528"><a href="#CpModel-1528"><span class="linenos">1528</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddBoolOr</span><span class="p">(</span><span class="o">*</span><span class="n">literals</span><span class="p">)</span>
</span><span id="CpModel-1529"><a href="#CpModel-1529"><span class="linenos">1529</span></a>
</span><span id="CpModel-1530"><a href="#CpModel-1530"><span class="linenos">1530</span></a>    <span class="k">def</span> <span class="nf">AddAtMostOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="CpModel-1531"><a href="#CpModel-1531"><span class="linenos">1531</span></a>        <span class="sd">&quot;&quot;&quot;Adds `AtMostOne(literals)`: `Sum(literals) &lt;= 1`.&quot;&quot;&quot;</span>
</span><span id="CpModel-1532"><a href="#CpModel-1532"><span class="linenos">1532</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1533"><a href="#CpModel-1533"><span class="linenos">1533</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1534"><a href="#CpModel-1534"><span class="linenos">1534</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">at_most_one</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="CpModel-1535"><a href="#CpModel-1535"><span class="linenos">1535</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="CpModel-1536"><a href="#CpModel-1536"><span class="linenos">1536</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="CpModel-1537"><a href="#CpModel-1537"><span class="linenos">1537</span></a>        <span class="p">])</span>
</span><span id="CpModel-1538"><a href="#CpModel-1538"><span class="linenos">1538</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1539"><a href="#CpModel-1539"><span class="linenos">1539</span></a>
</span><span id="CpModel-1540"><a href="#CpModel-1540"><span class="linenos">1540</span></a>    <span class="k">def</span> <span class="nf">AddExactlyOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="CpModel-1541"><a href="#CpModel-1541"><span class="linenos">1541</span></a>        <span class="sd">&quot;&quot;&quot;Adds `ExactlyOne(literals)`: `Sum(literals) == 1`.&quot;&quot;&quot;</span>
</span><span id="CpModel-1542"><a href="#CpModel-1542"><span class="linenos">1542</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1543"><a href="#CpModel-1543"><span class="linenos">1543</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1544"><a href="#CpModel-1544"><span class="linenos">1544</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">exactly_one</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="CpModel-1545"><a href="#CpModel-1545"><span class="linenos">1545</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="CpModel-1546"><a href="#CpModel-1546"><span class="linenos">1546</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="CpModel-1547"><a href="#CpModel-1547"><span class="linenos">1547</span></a>        <span class="p">])</span>
</span><span id="CpModel-1548"><a href="#CpModel-1548"><span class="linenos">1548</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1549"><a href="#CpModel-1549"><span class="linenos">1549</span></a>
</span><span id="CpModel-1550"><a href="#CpModel-1550"><span class="linenos">1550</span></a>    <span class="k">def</span> <span class="nf">AddBoolAnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="CpModel-1551"><a href="#CpModel-1551"><span class="linenos">1551</span></a>        <span class="sd">&quot;&quot;&quot;Adds `And(literals) == true`.&quot;&quot;&quot;</span>
</span><span id="CpModel-1552"><a href="#CpModel-1552"><span class="linenos">1552</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1553"><a href="#CpModel-1553"><span class="linenos">1553</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1554"><a href="#CpModel-1554"><span class="linenos">1554</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">bool_and</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="CpModel-1555"><a href="#CpModel-1555"><span class="linenos">1555</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="CpModel-1556"><a href="#CpModel-1556"><span class="linenos">1556</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="CpModel-1557"><a href="#CpModel-1557"><span class="linenos">1557</span></a>        <span class="p">])</span>
</span><span id="CpModel-1558"><a href="#CpModel-1558"><span class="linenos">1558</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1559"><a href="#CpModel-1559"><span class="linenos">1559</span></a>
</span><span id="CpModel-1560"><a href="#CpModel-1560"><span class="linenos">1560</span></a>    <span class="k">def</span> <span class="nf">AddBoolXOr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="CpModel-1561"><a href="#CpModel-1561"><span class="linenos">1561</span></a>        <span class="sd">&quot;&quot;&quot;Adds `XOr(literals) == true`.</span>
</span><span id="CpModel-1562"><a href="#CpModel-1562"><span class="linenos">1562</span></a>
</span><span id="CpModel-1563"><a href="#CpModel-1563"><span class="linenos">1563</span></a><span class="sd">    In contrast to AddBoolOr and AddBoolAnd, it does not support</span>
</span><span id="CpModel-1564"><a href="#CpModel-1564"><span class="linenos">1564</span></a><span class="sd">        .OnlyEnforceIf().</span>
</span><span id="CpModel-1565"><a href="#CpModel-1565"><span class="linenos">1565</span></a>
</span><span id="CpModel-1566"><a href="#CpModel-1566"><span class="linenos">1566</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1567"><a href="#CpModel-1567"><span class="linenos">1567</span></a><span class="sd">      *literals: the list of literals in the constraint.</span>
</span><span id="CpModel-1568"><a href="#CpModel-1568"><span class="linenos">1568</span></a>
</span><span id="CpModel-1569"><a href="#CpModel-1569"><span class="linenos">1569</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1570"><a href="#CpModel-1570"><span class="linenos">1570</span></a><span class="sd">      An `Constraint` object.</span>
</span><span id="CpModel-1571"><a href="#CpModel-1571"><span class="linenos">1571</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1572"><a href="#CpModel-1572"><span class="linenos">1572</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1573"><a href="#CpModel-1573"><span class="linenos">1573</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1574"><a href="#CpModel-1574"><span class="linenos">1574</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">bool_xor</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="CpModel-1575"><a href="#CpModel-1575"><span class="linenos">1575</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="CpModel-1576"><a href="#CpModel-1576"><span class="linenos">1576</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="CpModel-1577"><a href="#CpModel-1577"><span class="linenos">1577</span></a>        <span class="p">])</span>
</span><span id="CpModel-1578"><a href="#CpModel-1578"><span class="linenos">1578</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1579"><a href="#CpModel-1579"><span class="linenos">1579</span></a>
</span><span id="CpModel-1580"><a href="#CpModel-1580"><span class="linenos">1580</span></a>    <span class="k">def</span> <span class="nf">AddMinEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">exprs</span><span class="p">):</span>
</span><span id="CpModel-1581"><a href="#CpModel-1581"><span class="linenos">1581</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == Min(exprs)`.&quot;&quot;&quot;</span>
</span><span id="CpModel-1582"><a href="#CpModel-1582"><span class="linenos">1582</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1583"><a href="#CpModel-1583"><span class="linenos">1583</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1584"><a href="#CpModel-1584"><span class="linenos">1584</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel-1585"><a href="#CpModel-1585"><span class="linenos">1585</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">exprs</span><span class="p">])</span>
</span><span id="CpModel-1586"><a href="#CpModel-1586"><span class="linenos">1586</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span>
</span><span id="CpModel-1587"><a href="#CpModel-1587"><span class="linenos">1587</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
</span><span id="CpModel-1588"><a href="#CpModel-1588"><span class="linenos">1588</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1589"><a href="#CpModel-1589"><span class="linenos">1589</span></a>
</span><span id="CpModel-1590"><a href="#CpModel-1590"><span class="linenos">1590</span></a>    <span class="k">def</span> <span class="nf">AddMaxEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">exprs</span><span class="p">):</span>
</span><span id="CpModel-1591"><a href="#CpModel-1591"><span class="linenos">1591</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == Max(exprs)`.&quot;&quot;&quot;</span>
</span><span id="CpModel-1592"><a href="#CpModel-1592"><span class="linenos">1592</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1593"><a href="#CpModel-1593"><span class="linenos">1593</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1594"><a href="#CpModel-1594"><span class="linenos">1594</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel-1595"><a href="#CpModel-1595"><span class="linenos">1595</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">exprs</span><span class="p">])</span>
</span><span id="CpModel-1596"><a href="#CpModel-1596"><span class="linenos">1596</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="CpModel-1597"><a href="#CpModel-1597"><span class="linenos">1597</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1598"><a href="#CpModel-1598"><span class="linenos">1598</span></a>
</span><span id="CpModel-1599"><a href="#CpModel-1599"><span class="linenos">1599</span></a>    <span class="k">def</span> <span class="nf">AddDivisionEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">denom</span><span class="p">):</span>
</span><span id="CpModel-1600"><a href="#CpModel-1600"><span class="linenos">1600</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == num // denom` (integer division rounded towards 0).&quot;&quot;&quot;</span>
</span><span id="CpModel-1601"><a href="#CpModel-1601"><span class="linenos">1601</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1602"><a href="#CpModel-1602"><span class="linenos">1602</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1603"><a href="#CpModel-1603"><span class="linenos">1603</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_div</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
</span><span id="CpModel-1604"><a href="#CpModel-1604"><span class="linenos">1604</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_div</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">denom</span><span class="p">))</span>
</span><span id="CpModel-1605"><a href="#CpModel-1605"><span class="linenos">1605</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_div</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="CpModel-1606"><a href="#CpModel-1606"><span class="linenos">1606</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1607"><a href="#CpModel-1607"><span class="linenos">1607</span></a>
</span><span id="CpModel-1608"><a href="#CpModel-1608"><span class="linenos">1608</span></a>    <span class="k">def</span> <span class="nf">AddAbsEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
</span><span id="CpModel-1609"><a href="#CpModel-1609"><span class="linenos">1609</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == Abs(var)`.&quot;&quot;&quot;</span>
</span><span id="CpModel-1610"><a href="#CpModel-1610"><span class="linenos">1610</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1611"><a href="#CpModel-1611"><span class="linenos">1611</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1612"><a href="#CpModel-1612"><span class="linenos">1612</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</span><span id="CpModel-1613"><a href="#CpModel-1613"><span class="linenos">1613</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
</span><span id="CpModel-1614"><a href="#CpModel-1614"><span class="linenos">1614</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="CpModel-1615"><a href="#CpModel-1615"><span class="linenos">1615</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1616"><a href="#CpModel-1616"><span class="linenos">1616</span></a>
</span><span id="CpModel-1617"><a href="#CpModel-1617"><span class="linenos">1617</span></a>    <span class="k">def</span> <span class="nf">AddModuloEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">mod</span><span class="p">):</span>
</span><span id="CpModel-1618"><a href="#CpModel-1618"><span class="linenos">1618</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target = var % mod`.&quot;&quot;&quot;</span>
</span><span id="CpModel-1619"><a href="#CpModel-1619"><span class="linenos">1619</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1620"><a href="#CpModel-1620"><span class="linenos">1620</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1621"><a href="#CpModel-1621"><span class="linenos">1621</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_mod</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
</span><span id="CpModel-1622"><a href="#CpModel-1622"><span class="linenos">1622</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_mod</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">mod</span><span class="p">))</span>
</span><span id="CpModel-1623"><a href="#CpModel-1623"><span class="linenos">1623</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_mod</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="CpModel-1624"><a href="#CpModel-1624"><span class="linenos">1624</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1625"><a href="#CpModel-1625"><span class="linenos">1625</span></a>
</span><span id="CpModel-1626"><a href="#CpModel-1626"><span class="linenos">1626</span></a>    <span class="k">def</span> <span class="nf">AddMultiplicationEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="o">*</span><span class="n">expressions</span><span class="p">):</span>
</span><span id="CpModel-1627"><a href="#CpModel-1627"><span class="linenos">1627</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == expressions[0] * .. * expressions[n]`.&quot;&quot;&quot;</span>
</span><span id="CpModel-1628"><a href="#CpModel-1628"><span class="linenos">1628</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1629"><a href="#CpModel-1629"><span class="linenos">1629</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1630"><a href="#CpModel-1630"><span class="linenos">1630</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_prod</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="CpModel-1631"><a href="#CpModel-1631"><span class="linenos">1631</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="CpModel-1632"><a href="#CpModel-1632"><span class="linenos">1632</span></a>            <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span>
</span><span id="CpModel-1633"><a href="#CpModel-1633"><span class="linenos">1633</span></a>        <span class="p">])</span>
</span><span id="CpModel-1634"><a href="#CpModel-1634"><span class="linenos">1634</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_prod</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="CpModel-1635"><a href="#CpModel-1635"><span class="linenos">1635</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1636"><a href="#CpModel-1636"><span class="linenos">1636</span></a>
</span><span id="CpModel-1637"><a href="#CpModel-1637"><span class="linenos">1637</span></a>    <span class="c1"># Scheduling support</span>
</span><span id="CpModel-1638"><a href="#CpModel-1638"><span class="linenos">1638</span></a>
</span><span id="CpModel-1639"><a href="#CpModel-1639"><span class="linenos">1639</span></a>    <span class="k">def</span> <span class="nf">NewIntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel-1640"><a href="#CpModel-1640"><span class="linenos">1640</span></a>        <span class="sd">&quot;&quot;&quot;Creates an interval variable from start, size, and end.</span>
</span><span id="CpModel-1641"><a href="#CpModel-1641"><span class="linenos">1641</span></a>
</span><span id="CpModel-1642"><a href="#CpModel-1642"><span class="linenos">1642</span></a><span class="sd">    An interval variable is a constraint, that is itself used in other</span>
</span><span id="CpModel-1643"><a href="#CpModel-1643"><span class="linenos">1643</span></a><span class="sd">    constraints like NoOverlap.</span>
</span><span id="CpModel-1644"><a href="#CpModel-1644"><span class="linenos">1644</span></a>
</span><span id="CpModel-1645"><a href="#CpModel-1645"><span class="linenos">1645</span></a><span class="sd">    Internally, it ensures that `start + size == end`.</span>
</span><span id="CpModel-1646"><a href="#CpModel-1646"><span class="linenos">1646</span></a>
</span><span id="CpModel-1647"><a href="#CpModel-1647"><span class="linenos">1647</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1648"><a href="#CpModel-1648"><span class="linenos">1648</span></a><span class="sd">      start: The start of the interval. It can be an affine or constant</span>
</span><span id="CpModel-1649"><a href="#CpModel-1649"><span class="linenos">1649</span></a><span class="sd">        expression.</span>
</span><span id="CpModel-1650"><a href="#CpModel-1650"><span class="linenos">1650</span></a><span class="sd">      size: The size of the interval. It can be an affine or constant</span>
</span><span id="CpModel-1651"><a href="#CpModel-1651"><span class="linenos">1651</span></a><span class="sd">        expression.</span>
</span><span id="CpModel-1652"><a href="#CpModel-1652"><span class="linenos">1652</span></a><span class="sd">      end: The end of the interval. It can be an affine or constant expression.</span>
</span><span id="CpModel-1653"><a href="#CpModel-1653"><span class="linenos">1653</span></a><span class="sd">      name: The name of the interval variable.</span>
</span><span id="CpModel-1654"><a href="#CpModel-1654"><span class="linenos">1654</span></a>
</span><span id="CpModel-1655"><a href="#CpModel-1655"><span class="linenos">1655</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1656"><a href="#CpModel-1656"><span class="linenos">1656</span></a><span class="sd">      An `IntervalVar` object.</span>
</span><span id="CpModel-1657"><a href="#CpModel-1657"><span class="linenos">1657</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1658"><a href="#CpModel-1658"><span class="linenos">1658</span></a>
</span><span id="CpModel-1659"><a href="#CpModel-1659"><span class="linenos">1659</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span> <span class="o">==</span> <span class="n">end</span><span class="p">)</span>
</span><span id="CpModel-1660"><a href="#CpModel-1660"><span class="linenos">1660</span></a>
</span><span id="CpModel-1661"><a href="#CpModel-1661"><span class="linenos">1661</span></a>        <span class="n">start_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="CpModel-1662"><a href="#CpModel-1662"><span class="linenos">1662</span></a>        <span class="n">size_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="CpModel-1663"><a href="#CpModel-1663"><span class="linenos">1663</span></a>        <span class="n">end_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
</span><span id="CpModel-1664"><a href="#CpModel-1664"><span class="linenos">1664</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">start_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel-1665"><a href="#CpModel-1665"><span class="linenos">1665</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel-1666"><a href="#CpModel-1666"><span class="linenos">1666</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: start must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel-1667"><a href="#CpModel-1667"><span class="linenos">1667</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">size_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel-1668"><a href="#CpModel-1668"><span class="linenos">1668</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel-1669"><a href="#CpModel-1669"><span class="linenos">1669</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: size must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel-1670"><a href="#CpModel-1670"><span class="linenos">1670</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">end_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel-1671"><a href="#CpModel-1671"><span class="linenos">1671</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel-1672"><a href="#CpModel-1672"><span class="linenos">1672</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: end must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel-1673"><a href="#CpModel-1673"><span class="linenos">1673</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">start_expr</span><span class="p">,</span> <span class="n">size_expr</span><span class="p">,</span> <span class="n">end_expr</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CpModel-1674"><a href="#CpModel-1674"><span class="linenos">1674</span></a>                           <span class="n">name</span><span class="p">)</span>
</span><span id="CpModel-1675"><a href="#CpModel-1675"><span class="linenos">1675</span></a>
</span><span id="CpModel-1676"><a href="#CpModel-1676"><span class="linenos">1676</span></a>    <span class="k">def</span> <span class="nf">NewFixedSizeIntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel-1677"><a href="#CpModel-1677"><span class="linenos">1677</span></a>        <span class="sd">&quot;&quot;&quot;Creates an interval variable from start, and a fixed size.</span>
</span><span id="CpModel-1678"><a href="#CpModel-1678"><span class="linenos">1678</span></a>
</span><span id="CpModel-1679"><a href="#CpModel-1679"><span class="linenos">1679</span></a><span class="sd">    An interval variable is a constraint, that is itself used in other</span>
</span><span id="CpModel-1680"><a href="#CpModel-1680"><span class="linenos">1680</span></a><span class="sd">    constraints like NoOverlap.</span>
</span><span id="CpModel-1681"><a href="#CpModel-1681"><span class="linenos">1681</span></a>
</span><span id="CpModel-1682"><a href="#CpModel-1682"><span class="linenos">1682</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1683"><a href="#CpModel-1683"><span class="linenos">1683</span></a><span class="sd">      start: The start of the interval. It can be an affine or constant</span>
</span><span id="CpModel-1684"><a href="#CpModel-1684"><span class="linenos">1684</span></a><span class="sd">        expression.</span>
</span><span id="CpModel-1685"><a href="#CpModel-1685"><span class="linenos">1685</span></a><span class="sd">      size: The size of the interval. It must be an integer value.</span>
</span><span id="CpModel-1686"><a href="#CpModel-1686"><span class="linenos">1686</span></a><span class="sd">      name: The name of the interval variable.</span>
</span><span id="CpModel-1687"><a href="#CpModel-1687"><span class="linenos">1687</span></a>
</span><span id="CpModel-1688"><a href="#CpModel-1688"><span class="linenos">1688</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1689"><a href="#CpModel-1689"><span class="linenos">1689</span></a><span class="sd">      An `IntervalVar` object.</span>
</span><span id="CpModel-1690"><a href="#CpModel-1690"><span class="linenos">1690</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1691"><a href="#CpModel-1691"><span class="linenos">1691</span></a>        <span class="n">size</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="CpModel-1692"><a href="#CpModel-1692"><span class="linenos">1692</span></a>        <span class="n">start_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="CpModel-1693"><a href="#CpModel-1693"><span class="linenos">1693</span></a>        <span class="n">size_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="CpModel-1694"><a href="#CpModel-1694"><span class="linenos">1694</span></a>        <span class="n">end_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span><span class="p">)</span>
</span><span id="CpModel-1695"><a href="#CpModel-1695"><span class="linenos">1695</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">start_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel-1696"><a href="#CpModel-1696"><span class="linenos">1696</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel-1697"><a href="#CpModel-1697"><span class="linenos">1697</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: start must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel-1698"><a href="#CpModel-1698"><span class="linenos">1698</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">start_expr</span><span class="p">,</span> <span class="n">size_expr</span><span class="p">,</span> <span class="n">end_expr</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CpModel-1699"><a href="#CpModel-1699"><span class="linenos">1699</span></a>                           <span class="n">name</span><span class="p">)</span>
</span><span id="CpModel-1700"><a href="#CpModel-1700"><span class="linenos">1700</span></a>
</span><span id="CpModel-1701"><a href="#CpModel-1701"><span class="linenos">1701</span></a>    <span class="k">def</span> <span class="nf">NewOptionalIntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">is_present</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel-1702"><a href="#CpModel-1702"><span class="linenos">1702</span></a>        <span class="sd">&quot;&quot;&quot;Creates an optional interval var from start, size, end, and is_present.</span>
</span><span id="CpModel-1703"><a href="#CpModel-1703"><span class="linenos">1703</span></a>
</span><span id="CpModel-1704"><a href="#CpModel-1704"><span class="linenos">1704</span></a><span class="sd">    An optional interval variable is a constraint, that is itself used in other</span>
</span><span id="CpModel-1705"><a href="#CpModel-1705"><span class="linenos">1705</span></a><span class="sd">    constraints like NoOverlap. This constraint is protected by an is_present</span>
</span><span id="CpModel-1706"><a href="#CpModel-1706"><span class="linenos">1706</span></a><span class="sd">    literal that indicates if it is active or not.</span>
</span><span id="CpModel-1707"><a href="#CpModel-1707"><span class="linenos">1707</span></a>
</span><span id="CpModel-1708"><a href="#CpModel-1708"><span class="linenos">1708</span></a><span class="sd">    Internally, it ensures that `is_present` implies `start + size == end`.</span>
</span><span id="CpModel-1709"><a href="#CpModel-1709"><span class="linenos">1709</span></a>
</span><span id="CpModel-1710"><a href="#CpModel-1710"><span class="linenos">1710</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1711"><a href="#CpModel-1711"><span class="linenos">1711</span></a><span class="sd">      start: The start of the interval. It can be an integer value, or an</span>
</span><span id="CpModel-1712"><a href="#CpModel-1712"><span class="linenos">1712</span></a><span class="sd">        integer variable.</span>
</span><span id="CpModel-1713"><a href="#CpModel-1713"><span class="linenos">1713</span></a><span class="sd">      size: The size of the interval. It can be an integer value, or an integer</span>
</span><span id="CpModel-1714"><a href="#CpModel-1714"><span class="linenos">1714</span></a><span class="sd">        variable.</span>
</span><span id="CpModel-1715"><a href="#CpModel-1715"><span class="linenos">1715</span></a><span class="sd">      end: The end of the interval. It can be an integer value, or an integer</span>
</span><span id="CpModel-1716"><a href="#CpModel-1716"><span class="linenos">1716</span></a><span class="sd">        variable.</span>
</span><span id="CpModel-1717"><a href="#CpModel-1717"><span class="linenos">1717</span></a><span class="sd">      is_present: A literal that indicates if the interval is active or not. A</span>
</span><span id="CpModel-1718"><a href="#CpModel-1718"><span class="linenos">1718</span></a><span class="sd">        inactive interval is simply ignored by all constraints.</span>
</span><span id="CpModel-1719"><a href="#CpModel-1719"><span class="linenos">1719</span></a><span class="sd">      name: The name of the interval variable.</span>
</span><span id="CpModel-1720"><a href="#CpModel-1720"><span class="linenos">1720</span></a>
</span><span id="CpModel-1721"><a href="#CpModel-1721"><span class="linenos">1721</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1722"><a href="#CpModel-1722"><span class="linenos">1722</span></a><span class="sd">      An `IntervalVar` object.</span>
</span><span id="CpModel-1723"><a href="#CpModel-1723"><span class="linenos">1723</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1724"><a href="#CpModel-1724"><span class="linenos">1724</span></a>
</span><span id="CpModel-1725"><a href="#CpModel-1725"><span class="linenos">1725</span></a>        <span class="c1"># Add the linear constraint.</span>
</span><span id="CpModel-1726"><a href="#CpModel-1726"><span class="linenos">1726</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span> <span class="o">==</span> <span class="n">end</span><span class="p">)</span><span class="o">.</span><span class="n">OnlyEnforceIf</span><span class="p">(</span><span class="n">is_present</span><span class="p">)</span>
</span><span id="CpModel-1727"><a href="#CpModel-1727"><span class="linenos">1727</span></a>
</span><span id="CpModel-1728"><a href="#CpModel-1728"><span class="linenos">1728</span></a>        <span class="c1"># Creates the IntervalConstraintProto object.</span>
</span><span id="CpModel-1729"><a href="#CpModel-1729"><span class="linenos">1729</span></a>        <span class="n">is_present_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">is_present</span><span class="p">)</span>
</span><span id="CpModel-1730"><a href="#CpModel-1730"><span class="linenos">1730</span></a>        <span class="n">start_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="CpModel-1731"><a href="#CpModel-1731"><span class="linenos">1731</span></a>        <span class="n">size_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="CpModel-1732"><a href="#CpModel-1732"><span class="linenos">1732</span></a>        <span class="n">end_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
</span><span id="CpModel-1733"><a href="#CpModel-1733"><span class="linenos">1733</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">start_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel-1734"><a href="#CpModel-1734"><span class="linenos">1734</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel-1735"><a href="#CpModel-1735"><span class="linenos">1735</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: start must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel-1736"><a href="#CpModel-1736"><span class="linenos">1736</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">size_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel-1737"><a href="#CpModel-1737"><span class="linenos">1737</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel-1738"><a href="#CpModel-1738"><span class="linenos">1738</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: size must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel-1739"><a href="#CpModel-1739"><span class="linenos">1739</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">end_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel-1740"><a href="#CpModel-1740"><span class="linenos">1740</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel-1741"><a href="#CpModel-1741"><span class="linenos">1741</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: end must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel-1742"><a href="#CpModel-1742"><span class="linenos">1742</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">start_expr</span><span class="p">,</span> <span class="n">size_expr</span><span class="p">,</span> <span class="n">end_expr</span><span class="p">,</span>
</span><span id="CpModel-1743"><a href="#CpModel-1743"><span class="linenos">1743</span></a>                           <span class="n">is_present_index</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="CpModel-1744"><a href="#CpModel-1744"><span class="linenos">1744</span></a>
</span><span id="CpModel-1745"><a href="#CpModel-1745"><span class="linenos">1745</span></a>    <span class="k">def</span> <span class="nf">NewOptionalFixedSizeIntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">is_present</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel-1746"><a href="#CpModel-1746"><span class="linenos">1746</span></a>        <span class="sd">&quot;&quot;&quot;Creates an interval variable from start, and a fixed size.</span>
</span><span id="CpModel-1747"><a href="#CpModel-1747"><span class="linenos">1747</span></a>
</span><span id="CpModel-1748"><a href="#CpModel-1748"><span class="linenos">1748</span></a><span class="sd">    An interval variable is a constraint, that is itself used in other</span>
</span><span id="CpModel-1749"><a href="#CpModel-1749"><span class="linenos">1749</span></a><span class="sd">    constraints like NoOverlap.</span>
</span><span id="CpModel-1750"><a href="#CpModel-1750"><span class="linenos">1750</span></a>
</span><span id="CpModel-1751"><a href="#CpModel-1751"><span class="linenos">1751</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1752"><a href="#CpModel-1752"><span class="linenos">1752</span></a><span class="sd">      start: The start of the interval. It can be an affine or constant</span>
</span><span id="CpModel-1753"><a href="#CpModel-1753"><span class="linenos">1753</span></a><span class="sd">        expression.</span>
</span><span id="CpModel-1754"><a href="#CpModel-1754"><span class="linenos">1754</span></a><span class="sd">      size: The size of the interval. It must be an integer value.</span>
</span><span id="CpModel-1755"><a href="#CpModel-1755"><span class="linenos">1755</span></a><span class="sd">      is_present: A literal that indicates if the interval is active or not. A</span>
</span><span id="CpModel-1756"><a href="#CpModel-1756"><span class="linenos">1756</span></a><span class="sd">        inactive interval is simply ignored by all constraints.</span>
</span><span id="CpModel-1757"><a href="#CpModel-1757"><span class="linenos">1757</span></a><span class="sd">      name: The name of the interval variable.</span>
</span><span id="CpModel-1758"><a href="#CpModel-1758"><span class="linenos">1758</span></a>
</span><span id="CpModel-1759"><a href="#CpModel-1759"><span class="linenos">1759</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1760"><a href="#CpModel-1760"><span class="linenos">1760</span></a><span class="sd">      An `IntervalVar` object.</span>
</span><span id="CpModel-1761"><a href="#CpModel-1761"><span class="linenos">1761</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1762"><a href="#CpModel-1762"><span class="linenos">1762</span></a>        <span class="n">size</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="CpModel-1763"><a href="#CpModel-1763"><span class="linenos">1763</span></a>        <span class="n">start_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="CpModel-1764"><a href="#CpModel-1764"><span class="linenos">1764</span></a>        <span class="n">size_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="CpModel-1765"><a href="#CpModel-1765"><span class="linenos">1765</span></a>        <span class="n">end_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span><span class="p">)</span>
</span><span id="CpModel-1766"><a href="#CpModel-1766"><span class="linenos">1766</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">start_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel-1767"><a href="#CpModel-1767"><span class="linenos">1767</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel-1768"><a href="#CpModel-1768"><span class="linenos">1768</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: start must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel-1769"><a href="#CpModel-1769"><span class="linenos">1769</span></a>        <span class="n">is_present_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">is_present</span><span class="p">)</span>
</span><span id="CpModel-1770"><a href="#CpModel-1770"><span class="linenos">1770</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">start_expr</span><span class="p">,</span> <span class="n">size_expr</span><span class="p">,</span> <span class="n">end_expr</span><span class="p">,</span>
</span><span id="CpModel-1771"><a href="#CpModel-1771"><span class="linenos">1771</span></a>                           <span class="n">is_present_index</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="CpModel-1772"><a href="#CpModel-1772"><span class="linenos">1772</span></a>
</span><span id="CpModel-1773"><a href="#CpModel-1773"><span class="linenos">1773</span></a>    <span class="k">def</span> <span class="nf">AddNoOverlap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interval_vars</span><span class="p">):</span>
</span><span id="CpModel-1774"><a href="#CpModel-1774"><span class="linenos">1774</span></a>        <span class="sd">&quot;&quot;&quot;Adds NoOverlap(interval_vars).</span>
</span><span id="CpModel-1775"><a href="#CpModel-1775"><span class="linenos">1775</span></a>
</span><span id="CpModel-1776"><a href="#CpModel-1776"><span class="linenos">1776</span></a><span class="sd">    A NoOverlap constraint ensures that all present intervals do not overlap</span>
</span><span id="CpModel-1777"><a href="#CpModel-1777"><span class="linenos">1777</span></a><span class="sd">    in time.</span>
</span><span id="CpModel-1778"><a href="#CpModel-1778"><span class="linenos">1778</span></a>
</span><span id="CpModel-1779"><a href="#CpModel-1779"><span class="linenos">1779</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1780"><a href="#CpModel-1780"><span class="linenos">1780</span></a><span class="sd">      interval_vars: The list of interval variables to constrain.</span>
</span><span id="CpModel-1781"><a href="#CpModel-1781"><span class="linenos">1781</span></a>
</span><span id="CpModel-1782"><a href="#CpModel-1782"><span class="linenos">1782</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1783"><a href="#CpModel-1783"><span class="linenos">1783</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel-1784"><a href="#CpModel-1784"><span class="linenos">1784</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1785"><a href="#CpModel-1785"><span class="linenos">1785</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1786"><a href="#CpModel-1786"><span class="linenos">1786</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1787"><a href="#CpModel-1787"><span class="linenos">1787</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">no_overlap</span><span class="o">.</span><span class="n">intervals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel-1788"><a href="#CpModel-1788"><span class="linenos">1788</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetIntervalIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">interval_vars</span><span class="p">])</span>
</span><span id="CpModel-1789"><a href="#CpModel-1789"><span class="linenos">1789</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1790"><a href="#CpModel-1790"><span class="linenos">1790</span></a>
</span><span id="CpModel-1791"><a href="#CpModel-1791"><span class="linenos">1791</span></a>    <span class="k">def</span> <span class="nf">AddNoOverlap2D</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_intervals</span><span class="p">,</span> <span class="n">y_intervals</span><span class="p">):</span>
</span><span id="CpModel-1792"><a href="#CpModel-1792"><span class="linenos">1792</span></a>        <span class="sd">&quot;&quot;&quot;Adds NoOverlap2D(x_intervals, y_intervals).</span>
</span><span id="CpModel-1793"><a href="#CpModel-1793"><span class="linenos">1793</span></a>
</span><span id="CpModel-1794"><a href="#CpModel-1794"><span class="linenos">1794</span></a><span class="sd">    A NoOverlap2D constraint ensures that all present rectangles do not overlap</span>
</span><span id="CpModel-1795"><a href="#CpModel-1795"><span class="linenos">1795</span></a><span class="sd">    on a plane. Each rectangle is aligned with the X and Y axis, and is defined</span>
</span><span id="CpModel-1796"><a href="#CpModel-1796"><span class="linenos">1796</span></a><span class="sd">    by two intervals which represent its projection onto the X and Y axis.</span>
</span><span id="CpModel-1797"><a href="#CpModel-1797"><span class="linenos">1797</span></a>
</span><span id="CpModel-1798"><a href="#CpModel-1798"><span class="linenos">1798</span></a><span class="sd">    Furthermore, one box is optional if at least one of the x or y interval is</span>
</span><span id="CpModel-1799"><a href="#CpModel-1799"><span class="linenos">1799</span></a><span class="sd">    optional.</span>
</span><span id="CpModel-1800"><a href="#CpModel-1800"><span class="linenos">1800</span></a>
</span><span id="CpModel-1801"><a href="#CpModel-1801"><span class="linenos">1801</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1802"><a href="#CpModel-1802"><span class="linenos">1802</span></a><span class="sd">      x_intervals: The X coordinates of the rectangles.</span>
</span><span id="CpModel-1803"><a href="#CpModel-1803"><span class="linenos">1803</span></a><span class="sd">      y_intervals: The Y coordinates of the rectangles.</span>
</span><span id="CpModel-1804"><a href="#CpModel-1804"><span class="linenos">1804</span></a>
</span><span id="CpModel-1805"><a href="#CpModel-1805"><span class="linenos">1805</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1806"><a href="#CpModel-1806"><span class="linenos">1806</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel-1807"><a href="#CpModel-1807"><span class="linenos">1807</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1808"><a href="#CpModel-1808"><span class="linenos">1808</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1809"><a href="#CpModel-1809"><span class="linenos">1809</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1810"><a href="#CpModel-1810"><span class="linenos">1810</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">no_overlap_2d</span><span class="o">.</span><span class="n">x_intervals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel-1811"><a href="#CpModel-1811"><span class="linenos">1811</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetIntervalIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x_intervals</span><span class="p">])</span>
</span><span id="CpModel-1812"><a href="#CpModel-1812"><span class="linenos">1812</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">no_overlap_2d</span><span class="o">.</span><span class="n">y_intervals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel-1813"><a href="#CpModel-1813"><span class="linenos">1813</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetIntervalIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y_intervals</span><span class="p">])</span>
</span><span id="CpModel-1814"><a href="#CpModel-1814"><span class="linenos">1814</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1815"><a href="#CpModel-1815"><span class="linenos">1815</span></a>
</span><span id="CpModel-1816"><a href="#CpModel-1816"><span class="linenos">1816</span></a>    <span class="k">def</span> <span class="nf">AddCumulative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">intervals</span><span class="p">,</span> <span class="n">demands</span><span class="p">,</span> <span class="n">capacity</span><span class="p">):</span>
</span><span id="CpModel-1817"><a href="#CpModel-1817"><span class="linenos">1817</span></a>        <span class="sd">&quot;&quot;&quot;Adds Cumulative(intervals, demands, capacity).</span>
</span><span id="CpModel-1818"><a href="#CpModel-1818"><span class="linenos">1818</span></a>
</span><span id="CpModel-1819"><a href="#CpModel-1819"><span class="linenos">1819</span></a><span class="sd">    This constraint enforces that:</span>
</span><span id="CpModel-1820"><a href="#CpModel-1820"><span class="linenos">1820</span></a>
</span><span id="CpModel-1821"><a href="#CpModel-1821"><span class="linenos">1821</span></a><span class="sd">        for all t:</span>
</span><span id="CpModel-1822"><a href="#CpModel-1822"><span class="linenos">1822</span></a><span class="sd">          sum(demands[i]</span>
</span><span id="CpModel-1823"><a href="#CpModel-1823"><span class="linenos">1823</span></a><span class="sd">            if (start(intervals[i]) &lt;= t &lt; end(intervals[i])) and</span>
</span><span id="CpModel-1824"><a href="#CpModel-1824"><span class="linenos">1824</span></a><span class="sd">            (intervals[i] is present)) &lt;= capacity</span>
</span><span id="CpModel-1825"><a href="#CpModel-1825"><span class="linenos">1825</span></a>
</span><span id="CpModel-1826"><a href="#CpModel-1826"><span class="linenos">1826</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-1827"><a href="#CpModel-1827"><span class="linenos">1827</span></a><span class="sd">      intervals: The list of intervals.</span>
</span><span id="CpModel-1828"><a href="#CpModel-1828"><span class="linenos">1828</span></a><span class="sd">      demands: The list of demands for each interval. Each demand must be &gt;= 0.</span>
</span><span id="CpModel-1829"><a href="#CpModel-1829"><span class="linenos">1829</span></a><span class="sd">        Each demand can be an integer value, or an integer variable.</span>
</span><span id="CpModel-1830"><a href="#CpModel-1830"><span class="linenos">1830</span></a><span class="sd">      capacity: The maximum capacity of the cumulative constraint. It must be a</span>
</span><span id="CpModel-1831"><a href="#CpModel-1831"><span class="linenos">1831</span></a><span class="sd">        positive integer value or variable.</span>
</span><span id="CpModel-1832"><a href="#CpModel-1832"><span class="linenos">1832</span></a>
</span><span id="CpModel-1833"><a href="#CpModel-1833"><span class="linenos">1833</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-1834"><a href="#CpModel-1834"><span class="linenos">1834</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel-1835"><a href="#CpModel-1835"><span class="linenos">1835</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-1836"><a href="#CpModel-1836"><span class="linenos">1836</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel-1837"><a href="#CpModel-1837"><span class="linenos">1837</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-1838"><a href="#CpModel-1838"><span class="linenos">1838</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">cumulative</span><span class="o">.</span><span class="n">intervals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel-1839"><a href="#CpModel-1839"><span class="linenos">1839</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetIntervalIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">intervals</span><span class="p">])</span>
</span><span id="CpModel-1840"><a href="#CpModel-1840"><span class="linenos">1840</span></a>        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">demands</span><span class="p">:</span>
</span><span id="CpModel-1841"><a href="#CpModel-1841"><span class="linenos">1841</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">cumulative</span><span class="o">.</span><span class="n">demands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
</span><span id="CpModel-1842"><a href="#CpModel-1842"><span class="linenos">1842</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">cumulative</span><span class="o">.</span><span class="n">capacity</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span>
</span><span id="CpModel-1843"><a href="#CpModel-1843"><span class="linenos">1843</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">capacity</span><span class="p">))</span>
</span><span id="CpModel-1844"><a href="#CpModel-1844"><span class="linenos">1844</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel-1845"><a href="#CpModel-1845"><span class="linenos">1845</span></a>
</span><span id="CpModel-1846"><a href="#CpModel-1846"><span class="linenos">1846</span></a>    <span class="c1"># Support for deep copy.</span>
</span><span id="CpModel-1847"><a href="#CpModel-1847"><span class="linenos">1847</span></a>    <span class="k">def</span> <span class="nf">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_model</span><span class="p">):</span>
</span><span id="CpModel-1848"><a href="#CpModel-1848"><span class="linenos">1848</span></a>        <span class="sd">&quot;&quot;&quot;Reset the model, and creates a new one from a CpModelProto instance.&quot;&quot;&quot;</span>
</span><span id="CpModel-1849"><a href="#CpModel-1849"><span class="linenos">1849</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="n">other_model</span><span class="o">.</span><span class="n">Proto</span><span class="p">())</span>
</span><span id="CpModel-1850"><a href="#CpModel-1850"><span class="linenos">1850</span></a>
</span><span id="CpModel-1851"><a href="#CpModel-1851"><span class="linenos">1851</span></a>        <span class="c1"># Rebuild constant map.</span>
</span><span id="CpModel-1852"><a href="#CpModel-1852"><span class="linenos">1852</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="CpModel-1853"><a href="#CpModel-1853"><span class="linenos">1853</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">):</span>
</span><span id="CpModel-1854"><a href="#CpModel-1854"><span class="linenos">1854</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="CpModel-1855"><a href="#CpModel-1855"><span class="linenos">1855</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">i</span>
</span><span id="CpModel-1856"><a href="#CpModel-1856"><span class="linenos">1856</span></a>
</span><span id="CpModel-1857"><a href="#CpModel-1857"><span class="linenos">1857</span></a>    <span class="k">def</span> <span class="nf">GetBoolVarFromProtoIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
</span><span id="CpModel-1858"><a href="#CpModel-1858"><span class="linenos">1858</span></a>        <span class="sd">&quot;&quot;&quot;Returns an already created Boolean variable from its index.&quot;&quot;&quot;</span>
</span><span id="CpModel-1859"><a href="#CpModel-1859"><span class="linenos">1859</span></a>        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">):</span>
</span><span id="CpModel-1860"><a href="#CpModel-1860"><span class="linenos">1860</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel-1861"><a href="#CpModel-1861"><span class="linenos">1861</span></a>                <span class="sa">f</span><span class="s1">&#39;GetBoolVarFromProtoIndex: out of bound index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="CpModel-1862"><a href="#CpModel-1862"><span class="linenos">1862</span></a>        <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span id="CpModel-1863"><a href="#CpModel-1863"><span class="linenos">1863</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel-1864"><a href="#CpModel-1864"><span class="linenos">1864</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel-1865"><a href="#CpModel-1865"><span class="linenos">1865</span></a>                <span class="sa">f</span><span class="s1">&#39;GetBoolVarFromProtoIndex: index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1"> does not reference&#39;</span> <span class="o">+</span>
</span><span id="CpModel-1866"><a href="#CpModel-1866"><span class="linenos">1866</span></a>                <span class="s1">&#39; a Boolean variable&#39;</span><span class="p">)</span>
</span><span id="CpModel-1867"><a href="#CpModel-1867"><span class="linenos">1867</span></a>
</span><span id="CpModel-1868"><a href="#CpModel-1868"><span class="linenos">1868</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="CpModel-1869"><a href="#CpModel-1869"><span class="linenos">1869</span></a>
</span><span id="CpModel-1870"><a href="#CpModel-1870"><span class="linenos">1870</span></a>    <span class="k">def</span> <span class="nf">GetIntVarFromProtoIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
</span><span id="CpModel-1871"><a href="#CpModel-1871"><span class="linenos">1871</span></a>        <span class="sd">&quot;&quot;&quot;Returns an already created integer variable from its index.&quot;&quot;&quot;</span>
</span><span id="CpModel-1872"><a href="#CpModel-1872"><span class="linenos">1872</span></a>        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">):</span>
</span><span id="CpModel-1873"><a href="#CpModel-1873"><span class="linenos">1873</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel-1874"><a href="#CpModel-1874"><span class="linenos">1874</span></a>                <span class="sa">f</span><span class="s1">&#39;GetIntVarFromProtoIndex: out of bound index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="CpModel-1875"><a href="#CpModel-1875"><span class="linenos">1875</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="CpModel-1876"><a href="#CpModel-1876"><span class="linenos">1876</span></a>
</span><span id="CpModel-1877"><a href="#CpModel-1877"><span class="linenos">1877</span></a>    <span class="k">def</span> <span class="nf">GetIntervalVarFromProtoIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
</span><span id="CpModel-1878"><a href="#CpModel-1878"><span class="linenos">1878</span></a>        <span class="sd">&quot;&quot;&quot;Returns an already created interval variable from its index.&quot;&quot;&quot;</span>
</span><span id="CpModel-1879"><a href="#CpModel-1879"><span class="linenos">1879</span></a>        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">):</span>
</span><span id="CpModel-1880"><a href="#CpModel-1880"><span class="linenos">1880</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel-1881"><a href="#CpModel-1881"><span class="linenos">1881</span></a>                <span class="sa">f</span><span class="s1">&#39;GetIntervalVarFromProtoIndex: out of bound index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="CpModel-1882"><a href="#CpModel-1882"><span class="linenos">1882</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span id="CpModel-1883"><a href="#CpModel-1883"><span class="linenos">1883</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">ct</span><span class="o">.</span><span class="n">HasField</span><span class="p">(</span><span class="s1">&#39;interval&#39;</span><span class="p">):</span>
</span><span id="CpModel-1884"><a href="#CpModel-1884"><span class="linenos">1884</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel-1885"><a href="#CpModel-1885"><span class="linenos">1885</span></a>                <span class="sa">f</span><span class="s1">&#39;GetIntervalVarFromProtoIndex: index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1"> does not reference an&#39;</span>
</span><span id="CpModel-1886"><a href="#CpModel-1886"><span class="linenos">1886</span></a>                <span class="o">+</span> <span class="s1">&#39; interval variable&#39;</span><span class="p">)</span>
</span><span id="CpModel-1887"><a href="#CpModel-1887"><span class="linenos">1887</span></a>
</span><span id="CpModel-1888"><a href="#CpModel-1888"><span class="linenos">1888</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="CpModel-1889"><a href="#CpModel-1889"><span class="linenos">1889</span></a>
</span><span id="CpModel-1890"><a href="#CpModel-1890"><span class="linenos">1890</span></a>    <span class="c1"># Helpers.</span>
</span><span id="CpModel-1891"><a href="#CpModel-1891"><span class="linenos">1891</span></a>
</span><span id="CpModel-1892"><a href="#CpModel-1892"><span class="linenos">1892</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel-1893"><a href="#CpModel-1893"><span class="linenos">1893</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">)</span>
</span><span id="CpModel-1894"><a href="#CpModel-1894"><span class="linenos">1894</span></a>
</span><span id="CpModel-1895"><a href="#CpModel-1895"><span class="linenos">1895</span></a>    <span class="k">def</span> <span class="nf">Proto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel-1896"><a href="#CpModel-1896"><span class="linenos">1896</span></a>        <span class="sd">&quot;&quot;&quot;Returns the underlying CpModelProto.&quot;&quot;&quot;</span>
</span><span id="CpModel-1897"><a href="#CpModel-1897"><span class="linenos">1897</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span>
</span><span id="CpModel-1898"><a href="#CpModel-1898"><span class="linenos">1898</span></a>
</span><span id="CpModel-1899"><a href="#CpModel-1899"><span class="linenos">1899</span></a>    <span class="k">def</span> <span class="nf">Negated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
</span><span id="CpModel-1900"><a href="#CpModel-1900"><span class="linenos">1900</span></a>        <span class="k">return</span> <span class="o">-</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="CpModel-1901"><a href="#CpModel-1901"><span class="linenos">1901</span></a>
</span><span id="CpModel-1902"><a href="#CpModel-1902"><span class="linenos">1902</span></a>    <span class="k">def</span> <span class="nf">GetOrMakeIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="CpModel-1903"><a href="#CpModel-1903"><span class="linenos">1903</span></a>        <span class="sd">&quot;&quot;&quot;Returns the index of a variable, its negation, or a number.&quot;&quot;&quot;</span>
</span><span id="CpModel-1904"><a href="#CpModel-1904"><span class="linenos">1904</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpModel-1905"><a href="#CpModel-1905"><span class="linenos">1905</span></a>            <span class="k">return</span> <span class="n">arg</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="CpModel-1906"><a href="#CpModel-1906"><span class="linenos">1906</span></a>        <span class="k">elif</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="CpModel-1907"><a href="#CpModel-1907"><span class="linenos">1907</span></a>              <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">IntVar</span><span class="p">)</span> <span class="ow">and</span> <span class="n">arg</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="CpModel-1908"><a href="#CpModel-1908"><span class="linenos">1908</span></a>            <span class="k">return</span> <span class="o">-</span><span class="n">arg</span><span class="o">.</span><span class="n">Expression</span><span class="p">()</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="CpModel-1909"><a href="#CpModel-1909"><span class="linenos">1909</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="CpModel-1910"><a href="#CpModel-1910"><span class="linenos">1910</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="CpModel-1911"><a href="#CpModel-1911"><span class="linenos">1911</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndexFromConstant</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="CpModel-1912"><a href="#CpModel-1912"><span class="linenos">1912</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel-1913"><a href="#CpModel-1913"><span class="linenos">1913</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;NotSupported: model.GetOrMakeIndex(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span>
</span><span id="CpModel-1914"><a href="#CpModel-1914"><span class="linenos">1914</span></a>                            <span class="s1">&#39;)&#39;</span><span class="p">)</span>
</span><span id="CpModel-1915"><a href="#CpModel-1915"><span class="linenos">1915</span></a>
</span><span id="CpModel-1916"><a href="#CpModel-1916"><span class="linenos">1916</span></a>    <span class="k">def</span> <span class="nf">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="CpModel-1917"><a href="#CpModel-1917"><span class="linenos">1917</span></a>        <span class="sd">&quot;&quot;&quot;Returns an index from a boolean expression.&quot;&quot;&quot;</span>
</span><span id="CpModel-1918"><a href="#CpModel-1918"><span class="linenos">1918</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpModel-1919"><a href="#CpModel-1919"><span class="linenos">1919</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">AssertIsBooleanVariable</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="CpModel-1920"><a href="#CpModel-1920"><span class="linenos">1920</span></a>            <span class="k">return</span> <span class="n">arg</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="CpModel-1921"><a href="#CpModel-1921"><span class="linenos">1921</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="CpModel-1922"><a href="#CpModel-1922"><span class="linenos">1922</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">AssertIsBooleanVariable</span><span class="p">(</span><span class="n">arg</span><span class="o">.</span><span class="n">Not</span><span class="p">())</span>
</span><span id="CpModel-1923"><a href="#CpModel-1923"><span class="linenos">1923</span></a>            <span class="k">return</span> <span class="n">arg</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="CpModel-1924"><a href="#CpModel-1924"><span class="linenos">1924</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="CpModel-1925"><a href="#CpModel-1925"><span class="linenos">1925</span></a>            <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_boolean</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="CpModel-1926"><a href="#CpModel-1926"><span class="linenos">1926</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndexFromConstant</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
</span><span id="CpModel-1927"><a href="#CpModel-1927"><span class="linenos">1927</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel-1928"><a href="#CpModel-1928"><span class="linenos">1928</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;NotSupported: model.GetOrMakeBooleanIndex(&#39;</span> <span class="o">+</span>
</span><span id="CpModel-1929"><a href="#CpModel-1929"><span class="linenos">1929</span></a>                            <span class="nb">str</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
</span><span id="CpModel-1930"><a href="#CpModel-1930"><span class="linenos">1930</span></a>
</span><span id="CpModel-1931"><a href="#CpModel-1931"><span class="linenos">1931</span></a>    <span class="k">def</span> <span class="nf">GetIntervalIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="CpModel-1932"><a href="#CpModel-1932"><span class="linenos">1932</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">IntervalVar</span><span class="p">):</span>
</span><span id="CpModel-1933"><a href="#CpModel-1933"><span class="linenos">1933</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;NotSupported: model.GetIntervalIndex(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="CpModel-1934"><a href="#CpModel-1934"><span class="linenos">1934</span></a>        <span class="k">return</span> <span class="n">arg</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="CpModel-1935"><a href="#CpModel-1935"><span class="linenos">1935</span></a>
</span><span id="CpModel-1936"><a href="#CpModel-1936"><span class="linenos">1936</span></a>    <span class="k">def</span> <span class="nf">GetOrMakeIndexFromConstant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="CpModel-1937"><a href="#CpModel-1937"><span class="linenos">1937</span></a>        <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="p">:</span>
</span><span id="CpModel-1938"><a href="#CpModel-1938"><span class="linenos">1938</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
</span><span id="CpModel-1939"><a href="#CpModel-1939"><span class="linenos">1939</span></a>        <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
</span><span id="CpModel-1940"><a href="#CpModel-1940"><span class="linenos">1940</span></a>        <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="CpModel-1941"><a href="#CpModel-1941"><span class="linenos">1941</span></a>        <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="p">])</span>
</span><span id="CpModel-1942"><a href="#CpModel-1942"><span class="linenos">1942</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span>
</span><span id="CpModel-1943"><a href="#CpModel-1943"><span class="linenos">1943</span></a>        <span class="k">return</span> <span class="n">index</span>
</span><span id="CpModel-1944"><a href="#CpModel-1944"><span class="linenos">1944</span></a>
</span><span id="CpModel-1945"><a href="#CpModel-1945"><span class="linenos">1945</span></a>    <span class="k">def</span> <span class="nf">VarIndexToVarProto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_index</span><span class="p">):</span>
</span><span id="CpModel-1946"><a href="#CpModel-1946"><span class="linenos">1946</span></a>        <span class="k">if</span> <span class="n">var_index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="CpModel-1947"><a href="#CpModel-1947"><span class="linenos">1947</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">var_index</span><span class="p">]</span>
</span><span id="CpModel-1948"><a href="#CpModel-1948"><span class="linenos">1948</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel-1949"><a href="#CpModel-1949"><span class="linenos">1949</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="o">-</span><span class="n">var_index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="CpModel-1950"><a href="#CpModel-1950"><span class="linenos">1950</span></a>
</span><span id="CpModel-1951"><a href="#CpModel-1951"><span class="linenos">1951</span></a>    <span class="k">def</span> <span class="nf">ParseLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_expr</span><span class="p">,</span> <span class="n">negate</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="CpModel-1952"><a href="#CpModel-1952"><span class="linenos">1952</span></a>        <span class="sd">&quot;&quot;&quot;Returns a LinearExpressionProto built from a LinearExpr instance.&quot;&quot;&quot;</span>
</span><span id="CpModel-1953"><a href="#CpModel-1953"><span class="linenos">1953</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">LinearExpressionProto</span><span class="p">()</span>
</span><span id="CpModel-1954"><a href="#CpModel-1954"><span class="linenos">1954</span></a>        <span class="n">mult</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">negate</span> <span class="k">else</span> <span class="mi">1</span>
</span><span id="CpModel-1955"><a href="#CpModel-1955"><span class="linenos">1955</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">):</span>
</span><span id="CpModel-1956"><a href="#CpModel-1956"><span class="linenos">1956</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">)</span> <span class="o">*</span> <span class="n">mult</span>
</span><span id="CpModel-1957"><a href="#CpModel-1957"><span class="linenos">1957</span></a>            <span class="k">return</span> <span class="n">result</span>
</span><span id="CpModel-1958"><a href="#CpModel-1958"><span class="linenos">1958</span></a>
</span><span id="CpModel-1959"><a href="#CpModel-1959"><span class="linenos">1959</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpModel-1960"><a href="#CpModel-1960"><span class="linenos">1960</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">))</span>
</span><span id="CpModel-1961"><a href="#CpModel-1961"><span class="linenos">1961</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mult</span><span class="p">)</span>
</span><span id="CpModel-1962"><a href="#CpModel-1962"><span class="linenos">1962</span></a>            <span class="k">return</span> <span class="n">result</span>
</span><span id="CpModel-1963"><a href="#CpModel-1963"><span class="linenos">1963</span></a>
</span><span id="CpModel-1964"><a href="#CpModel-1964"><span class="linenos">1964</span></a>        <span class="n">coeffs_map</span><span class="p">,</span> <span class="n">constant</span> <span class="o">=</span> <span class="n">linear_expr</span><span class="o">.</span><span class="n">GetIntegerVarValueMap</span><span class="p">()</span>
</span><span id="CpModel-1965"><a href="#CpModel-1965"><span class="linenos">1965</span></a>        <span class="n">result</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">constant</span> <span class="o">*</span> <span class="n">mult</span>
</span><span id="CpModel-1966"><a href="#CpModel-1966"><span class="linenos">1966</span></a>        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">coeffs_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="CpModel-1967"><a href="#CpModel-1967"><span class="linenos">1967</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpModel-1968"><a href="#CpModel-1968"><span class="linenos">1968</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Wrong argument&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</span><span id="CpModel-1969"><a href="#CpModel-1969"><span class="linenos">1969</span></a>            <span class="n">c</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="CpModel-1970"><a href="#CpModel-1970"><span class="linenos">1970</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="CpModel-1971"><a href="#CpModel-1971"><span class="linenos">1971</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span> <span class="n">mult</span><span class="p">)</span>
</span><span id="CpModel-1972"><a href="#CpModel-1972"><span class="linenos">1972</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="CpModel-1973"><a href="#CpModel-1973"><span class="linenos">1973</span></a>
</span><span id="CpModel-1974"><a href="#CpModel-1974"><span class="linenos">1974</span></a>    <span class="k">def</span> <span class="nf">_SetObjective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">minimize</span><span class="p">):</span>
</span><span id="CpModel-1975"><a href="#CpModel-1975"><span class="linenos">1975</span></a>        <span class="sd">&quot;&quot;&quot;Sets the objective of the model.&quot;&quot;&quot;</span>
</span><span id="CpModel-1976"><a href="#CpModel-1976"><span class="linenos">1976</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ClearObjective</span><span class="p">()</span>
</span><span id="CpModel-1977"><a href="#CpModel-1977"><span class="linenos">1977</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpModel-1978"><a href="#CpModel-1978"><span class="linenos">1978</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="CpModel-1979"><a href="#CpModel-1979"><span class="linenos">1979</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="CpModel-1980"><a href="#CpModel-1980"><span class="linenos">1980</span></a>            <span class="k">if</span> <span class="n">minimize</span><span class="p">:</span>
</span><span id="CpModel-1981"><a href="#CpModel-1981"><span class="linenos">1981</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="CpModel-1982"><a href="#CpModel-1982"><span class="linenos">1982</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">scaling_factor</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="CpModel-1983"><a href="#CpModel-1983"><span class="linenos">1983</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel-1984"><a href="#CpModel-1984"><span class="linenos">1984</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Negated</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">Index</span><span class="p">()))</span>
</span><span id="CpModel-1985"><a href="#CpModel-1985"><span class="linenos">1985</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">scaling_factor</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="CpModel-1986"><a href="#CpModel-1986"><span class="linenos">1986</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="CpModel-1987"><a href="#CpModel-1987"><span class="linenos">1987</span></a>            <span class="n">coeffs_map</span><span class="p">,</span> <span class="n">constant</span><span class="p">,</span> <span class="n">is_integer</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">GetFloatVarValueMap</span><span class="p">()</span>
</span><span id="CpModel-1988"><a href="#CpModel-1988"><span class="linenos">1988</span></a>            <span class="k">if</span> <span class="n">is_integer</span><span class="p">:</span>
</span><span id="CpModel-1989"><a href="#CpModel-1989"><span class="linenos">1989</span></a>                <span class="k">if</span> <span class="n">minimize</span><span class="p">:</span>
</span><span id="CpModel-1990"><a href="#CpModel-1990"><span class="linenos">1990</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">scaling_factor</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="CpModel-1991"><a href="#CpModel-1991"><span class="linenos">1991</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">constant</span>
</span><span id="CpModel-1992"><a href="#CpModel-1992"><span class="linenos">1992</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel-1993"><a href="#CpModel-1993"><span class="linenos">1993</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">scaling_factor</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="CpModel-1994"><a href="#CpModel-1994"><span class="linenos">1994</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="o">-</span><span class="n">constant</span>
</span><span id="CpModel-1995"><a href="#CpModel-1995"><span class="linenos">1995</span></a>                <span class="k">for</span> <span class="n">v</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="ow">in</span> <span class="n">coeffs_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="CpModel-1996"><a href="#CpModel-1996"><span class="linenos">1996</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</span><span id="CpModel-1997"><a href="#CpModel-1997"><span class="linenos">1997</span></a>                    <span class="k">if</span> <span class="n">minimize</span><span class="p">:</span>
</span><span id="CpModel-1998"><a href="#CpModel-1998"><span class="linenos">1998</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="CpModel-1999"><a href="#CpModel-1999"><span class="linenos">1999</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel-2000"><a href="#CpModel-2000"><span class="linenos">2000</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="CpModel-2001"><a href="#CpModel-2001"><span class="linenos">2001</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">Negated</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">Index</span><span class="p">()))</span>
</span><span id="CpModel-2002"><a href="#CpModel-2002"><span class="linenos">2002</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel-2003"><a href="#CpModel-2003"><span class="linenos">2003</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">floating_point_objective</span><span class="o">.</span><span class="n">maximize</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">minimize</span>
</span><span id="CpModel-2004"><a href="#CpModel-2004"><span class="linenos">2004</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">floating_point_objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">constant</span>
</span><span id="CpModel-2005"><a href="#CpModel-2005"><span class="linenos">2005</span></a>                <span class="k">for</span> <span class="n">v</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="ow">in</span> <span class="n">coeffs_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="CpModel-2006"><a href="#CpModel-2006"><span class="linenos">2006</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">floating_point_objective</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</span><span id="CpModel-2007"><a href="#CpModel-2007"><span class="linenos">2007</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">floating_point_objective</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="CpModel-2008"><a href="#CpModel-2008"><span class="linenos">2008</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
</span><span id="CpModel-2009"><a href="#CpModel-2009"><span class="linenos">2009</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</span><span id="CpModel-2010"><a href="#CpModel-2010"><span class="linenos">2010</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">objective</span><span class="o">.</span><span class="n">scaling_factor</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="CpModel-2011"><a href="#CpModel-2011"><span class="linenos">2011</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel-2012"><a href="#CpModel-2012"><span class="linenos">2012</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;TypeError: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">+</span>
</span><span id="CpModel-2013"><a href="#CpModel-2013"><span class="linenos">2013</span></a>                            <span class="s1">&#39; is not a valid objective&#39;</span><span class="p">)</span>
</span><span id="CpModel-2014"><a href="#CpModel-2014"><span class="linenos">2014</span></a>
</span><span id="CpModel-2015"><a href="#CpModel-2015"><span class="linenos">2015</span></a>    <span class="k">def</span> <span class="nf">Minimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span><span id="CpModel-2016"><a href="#CpModel-2016"><span class="linenos">2016</span></a>        <span class="sd">&quot;&quot;&quot;Sets the objective of the model to minimize(obj).&quot;&quot;&quot;</span>
</span><span id="CpModel-2017"><a href="#CpModel-2017"><span class="linenos">2017</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_SetObjective</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">minimize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="CpModel-2018"><a href="#CpModel-2018"><span class="linenos">2018</span></a>
</span><span id="CpModel-2019"><a href="#CpModel-2019"><span class="linenos">2019</span></a>    <span class="k">def</span> <span class="nf">Maximize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span><span id="CpModel-2020"><a href="#CpModel-2020"><span class="linenos">2020</span></a>        <span class="sd">&quot;&quot;&quot;Sets the objective of the model to maximize(obj).&quot;&quot;&quot;</span>
</span><span id="CpModel-2021"><a href="#CpModel-2021"><span class="linenos">2021</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_SetObjective</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">minimize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="CpModel-2022"><a href="#CpModel-2022"><span class="linenos">2022</span></a>
</span><span id="CpModel-2023"><a href="#CpModel-2023"><span class="linenos">2023</span></a>    <span class="k">def</span> <span class="nf">HasObjective</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel-2024"><a href="#CpModel-2024"><span class="linenos">2024</span></a>        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">HasField</span><span class="p">(</span><span class="s1">&#39;objective&#39;</span><span class="p">)</span> <span class="ow">or</span>
</span><span id="CpModel-2025"><a href="#CpModel-2025"><span class="linenos">2025</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">HasField</span><span class="p">(</span><span class="s1">&#39;floating_point_objective&#39;</span><span class="p">))</span>
</span><span id="CpModel-2026"><a href="#CpModel-2026"><span class="linenos">2026</span></a>
</span><span id="CpModel-2027"><a href="#CpModel-2027"><span class="linenos">2027</span></a>    <span class="k">def</span> <span class="nf">ClearObjective</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel-2028"><a href="#CpModel-2028"><span class="linenos">2028</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;objective&#39;</span><span class="p">)</span>
</span><span id="CpModel-2029"><a href="#CpModel-2029"><span class="linenos">2029</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;floating_point_objective&#39;</span><span class="p">)</span>
</span><span id="CpModel-2030"><a href="#CpModel-2030"><span class="linenos">2030</span></a>
</span><span id="CpModel-2031"><a href="#CpModel-2031"><span class="linenos">2031</span></a>    <span class="k">def</span> <span class="nf">AddDecisionStrategy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">var_strategy</span><span class="p">,</span> <span class="n">domain_strategy</span><span class="p">):</span>
</span><span id="CpModel-2032"><a href="#CpModel-2032"><span class="linenos">2032</span></a>        <span class="sd">&quot;&quot;&quot;Adds a search strategy to the model.</span>
</span><span id="CpModel-2033"><a href="#CpModel-2033"><span class="linenos">2033</span></a>
</span><span id="CpModel-2034"><a href="#CpModel-2034"><span class="linenos">2034</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-2035"><a href="#CpModel-2035"><span class="linenos">2035</span></a><span class="sd">      variables: a list of variables this strategy will assign.</span>
</span><span id="CpModel-2036"><a href="#CpModel-2036"><span class="linenos">2036</span></a><span class="sd">      var_strategy: heuristic to choose the next variable to assign.</span>
</span><span id="CpModel-2037"><a href="#CpModel-2037"><span class="linenos">2037</span></a><span class="sd">      domain_strategy: heuristic to reduce the domain of the selected variable.</span>
</span><span id="CpModel-2038"><a href="#CpModel-2038"><span class="linenos">2038</span></a><span class="sd">        Currently, this is advanced code: the union of all strategies added to</span>
</span><span id="CpModel-2039"><a href="#CpModel-2039"><span class="linenos">2039</span></a><span class="sd">        the model must be complete, i.e. instantiates all variables. Otherwise,</span>
</span><span id="CpModel-2040"><a href="#CpModel-2040"><span class="linenos">2040</span></a><span class="sd">        Solve() will fail.</span>
</span><span id="CpModel-2041"><a href="#CpModel-2041"><span class="linenos">2041</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-2042"><a href="#CpModel-2042"><span class="linenos">2042</span></a>
</span><span id="CpModel-2043"><a href="#CpModel-2043"><span class="linenos">2043</span></a>        <span class="n">strategy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">search_strategy</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="CpModel-2044"><a href="#CpModel-2044"><span class="linenos">2044</span></a>        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
</span><span id="CpModel-2045"><a href="#CpModel-2045"><span class="linenos">2045</span></a>            <span class="n">strategy</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="CpModel-2046"><a href="#CpModel-2046"><span class="linenos">2046</span></a>        <span class="n">strategy</span><span class="o">.</span><span class="n">variable_selection_strategy</span> <span class="o">=</span> <span class="n">var_strategy</span>
</span><span id="CpModel-2047"><a href="#CpModel-2047"><span class="linenos">2047</span></a>        <span class="n">strategy</span><span class="o">.</span><span class="n">domain_reduction_strategy</span> <span class="o">=</span> <span class="n">domain_strategy</span>
</span><span id="CpModel-2048"><a href="#CpModel-2048"><span class="linenos">2048</span></a>
</span><span id="CpModel-2049"><a href="#CpModel-2049"><span class="linenos">2049</span></a>    <span class="k">def</span> <span class="nf">ModelStats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel-2050"><a href="#CpModel-2050"><span class="linenos">2050</span></a>        <span class="sd">&quot;&quot;&quot;Returns a string containing some model statistics.&quot;&quot;&quot;</span>
</span><span id="CpModel-2051"><a href="#CpModel-2051"><span class="linenos">2051</span></a>        <span class="k">return</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">CpSatHelper</span><span class="o">.</span><span class="n">SerializedModelStats</span><span class="p">(</span>
</span><span id="CpModel-2052"><a href="#CpModel-2052"><span class="linenos">2052</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">())</span>
</span><span id="CpModel-2053"><a href="#CpModel-2053"><span class="linenos">2053</span></a>
</span><span id="CpModel-2054"><a href="#CpModel-2054"><span class="linenos">2054</span></a>    <span class="k">def</span> <span class="nf">Validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel-2055"><a href="#CpModel-2055"><span class="linenos">2055</span></a>        <span class="sd">&quot;&quot;&quot;Returns a string indicating that the model is invalid.&quot;&quot;&quot;</span>
</span><span id="CpModel-2056"><a href="#CpModel-2056"><span class="linenos">2056</span></a>        <span class="k">return</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">CpSatHelper</span><span class="o">.</span><span class="n">SerializedValidateModel</span><span class="p">(</span>
</span><span id="CpModel-2057"><a href="#CpModel-2057"><span class="linenos">2057</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">())</span>
</span><span id="CpModel-2058"><a href="#CpModel-2058"><span class="linenos">2058</span></a>
</span><span id="CpModel-2059"><a href="#CpModel-2059"><span class="linenos">2059</span></a>    <span class="k">def</span> <span class="nf">ExportToFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
</span><span id="CpModel-2060"><a href="#CpModel-2060"><span class="linenos">2060</span></a>        <span class="sd">&quot;&quot;&quot;Write the model as a protocol buffer to &#39;file&#39;.</span>
</span><span id="CpModel-2061"><a href="#CpModel-2061"><span class="linenos">2061</span></a>
</span><span id="CpModel-2062"><a href="#CpModel-2062"><span class="linenos">2062</span></a><span class="sd">    Args:</span>
</span><span id="CpModel-2063"><a href="#CpModel-2063"><span class="linenos">2063</span></a><span class="sd">      file: file to write the model to. If the filename ends with &#39;txt&#39;, the</span>
</span><span id="CpModel-2064"><a href="#CpModel-2064"><span class="linenos">2064</span></a><span class="sd">        model will be written as a text file, otherwise, the binary format will</span>
</span><span id="CpModel-2065"><a href="#CpModel-2065"><span class="linenos">2065</span></a><span class="sd">        be used.</span>
</span><span id="CpModel-2066"><a href="#CpModel-2066"><span class="linenos">2066</span></a>
</span><span id="CpModel-2067"><a href="#CpModel-2067"><span class="linenos">2067</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel-2068"><a href="#CpModel-2068"><span class="linenos">2068</span></a><span class="sd">      True if the model was correctly written.</span>
</span><span id="CpModel-2069"><a href="#CpModel-2069"><span class="linenos">2069</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel-2070"><a href="#CpModel-2070"><span class="linenos">2070</span></a>        <span class="k">return</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">CpSatHelper</span><span class="o">.</span><span class="n">SerializedWriteModelToFile</span><span class="p">(</span>
</span><span id="CpModel-2071"><a href="#CpModel-2071"><span class="linenos">2071</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">(),</span> <span class="n">file</span><span class="p">)</span>
</span><span id="CpModel-2072"><a href="#CpModel-2072"><span class="linenos">2072</span></a>
</span><span id="CpModel-2073"><a href="#CpModel-2073"><span class="linenos">2073</span></a>    <span class="k">def</span> <span class="nf">AssertIsBooleanVariable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
</span><span id="CpModel-2074"><a href="#CpModel-2074"><span class="linenos">2074</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpModel-2075"><a href="#CpModel-2075"><span class="linenos">2075</span></a>            <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel-2076"><a href="#CpModel-2076"><span class="linenos">2076</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel-2077"><a href="#CpModel-2077"><span class="linenos">2077</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;TypeError: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span>
</span><span id="CpModel-2078"><a href="#CpModel-2078"><span class="linenos">2078</span></a>                                <span class="s1">&#39; is not a boolean variable&#39;</span><span class="p">)</span>
</span><span id="CpModel-2079"><a href="#CpModel-2079"><span class="linenos">2079</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="CpModel-2080"><a href="#CpModel-2080"><span class="linenos">2080</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;TypeError: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span>
</span><span id="CpModel-2081"><a href="#CpModel-2081"><span class="linenos">2081</span></a>                            <span class="s1">&#39; is not a boolean variable&#39;</span><span class="p">)</span>
</span><span id="CpModel-2082"><a href="#CpModel-2082"><span class="linenos">2082</span></a>
</span><span id="CpModel-2083"><a href="#CpModel-2083"><span class="linenos">2083</span></a>    <span class="k">def</span> <span class="nf">AddHint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="CpModel-2084"><a href="#CpModel-2084"><span class="linenos">2084</span></a>        <span class="sd">&quot;&quot;&quot;Adds &#39;var == value&#39; as a hint to the solver.&quot;&quot;&quot;</span>
</span><span id="CpModel-2085"><a href="#CpModel-2085"><span class="linenos">2085</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">solution_hint</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
</span><span id="CpModel-2086"><a href="#CpModel-2086"><span class="linenos">2086</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">solution_hint</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="CpModel-2087"><a href="#CpModel-2087"><span class="linenos">2087</span></a>
</span><span id="CpModel-2088"><a href="#CpModel-2088"><span class="linenos">2088</span></a>    <span class="k">def</span> <span class="nf">ClearHints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel-2089"><a href="#CpModel-2089"><span class="linenos">2089</span></a>        <span class="sd">&quot;&quot;&quot;Remove any solution hint from the model.&quot;&quot;&quot;</span>
</span><span id="CpModel-2090"><a href="#CpModel-2090"><span class="linenos">2090</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;solution_hint&#39;</span><span class="p">)</span>
</span><span id="CpModel-2091"><a href="#CpModel-2091"><span class="linenos">2091</span></a>
</span><span id="CpModel-2092"><a href="#CpModel-2092"><span class="linenos">2092</span></a>    <span class="k">def</span> <span class="nf">AddAssumption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lit</span><span class="p">):</span>
</span><span id="CpModel-2093"><a href="#CpModel-2093"><span class="linenos">2093</span></a>        <span class="sd">&quot;&quot;&quot;Add the literal &#39;lit&#39; to the model as assumptions.&quot;&quot;&quot;</span>
</span><span id="CpModel-2094"><a href="#CpModel-2094"><span class="linenos">2094</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">assumptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">lit</span><span class="p">))</span>
</span><span id="CpModel-2095"><a href="#CpModel-2095"><span class="linenos">2095</span></a>
</span><span id="CpModel-2096"><a href="#CpModel-2096"><span class="linenos">2096</span></a>    <span class="k">def</span> <span class="nf">AddAssumptions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">literals</span><span class="p">):</span>
</span><span id="CpModel-2097"><a href="#CpModel-2097"><span class="linenos">2097</span></a>        <span class="sd">&quot;&quot;&quot;Add the literals to the model as assumptions.&quot;&quot;&quot;</span>
</span><span id="CpModel-2098"><a href="#CpModel-2098"><span class="linenos">2098</span></a>        <span class="k">for</span> <span class="n">lit</span> <span class="ow">in</span> <span class="n">literals</span><span class="p">:</span>
</span><span id="CpModel-2099"><a href="#CpModel-2099"><span class="linenos">2099</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">AddAssumption</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span>
</span><span id="CpModel-2100"><a href="#CpModel-2100"><span class="linenos">2100</span></a>
</span><span id="CpModel-2101"><a href="#CpModel-2101"><span class="linenos">2101</span></a>    <span class="k">def</span> <span class="nf">ClearAssumptions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel-2102"><a href="#CpModel-2102"><span class="linenos">2102</span></a>        <span class="sd">&quot;&quot;&quot;Remove all assumptions from the model.&quot;&quot;&quot;</span>
</span><span id="CpModel-2103"><a href="#CpModel-2103"><span class="linenos">2103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;assumptions&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Methods for building a CP model.</p>

<p>Methods beginning with:</p>

<ul>
<li><code>New</code> create integer, boolean, or interval variables.</li>
<li><code><a href="#CpModel.Add">Add</a></code> create new constraints and add them to the model.</li>
</ul>
</div>


                            <div id="CpModel.__init__" class="classattr">
                                        <input id="CpModel.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">CpModel</span><span class="signature pdoc-code condensed">()</span>

                <label class="view-source-button" for="CpModel.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.__init__-968"><a href="#CpModel.__init__-968"><span class="linenos">968</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel.__init__-969"><a href="#CpModel.__init__-969"><span class="linenos">969</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpModelProto</span><span class="p">()</span>
</span><span id="CpModel.__init__-970"><a href="#CpModel.__init__-970"><span class="linenos">970</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span> <span class="o">=</span> <span class="p">{}</span>
</span></pre></div>


    

                            </div>
                            <div id="CpModel.Name" class="classattr">
                                        <input id="CpModel.Name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Name</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.Name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.Name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.Name-973"><a href="#CpModel.Name-973"><span class="linenos">973</span></a>    <span class="k">def</span> <span class="nf">Name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel.Name-974"><a href="#CpModel.Name-974"><span class="linenos">974</span></a>        <span class="sd">&quot;&quot;&quot;Returns the name of the model.&quot;&quot;&quot;</span>
</span><span id="CpModel.Name-975"><a href="#CpModel.Name-975"><span class="linenos">975</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">name</span>
</span></pre></div>


            <div class="docstring"><p>Returns the name of the model.</p>
</div>


                            </div>
                            <div id="CpModel.SetName" class="classattr">
                                        <input id="CpModel.SetName-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">SetName</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.SetName-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.SetName"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.SetName-977"><a href="#CpModel.SetName-977"><span class="linenos">977</span></a>    <span class="k">def</span> <span class="nf">SetName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel.SetName-978"><a href="#CpModel.SetName-978"><span class="linenos">978</span></a>        <span class="sd">&quot;&quot;&quot;Sets the name of the model.&quot;&quot;&quot;</span>
</span><span id="CpModel.SetName-979"><a href="#CpModel.SetName-979"><span class="linenos">979</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span></pre></div>


            <div class="docstring"><p>Sets the name of the model.</p>
</div>


                            </div>
                            <div id="CpModel.NewIntVar" class="classattr">
                                        <input id="CpModel.NewIntVar-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">NewIntVar</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">lb</span>, </span><span class="param"><span class="n">ub</span>, </span><span class="param"><span class="n">name</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.NewIntVar-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.NewIntVar"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.NewIntVar-983"><a href="#CpModel.NewIntVar-983"><span class="linenos">983</span></a>    <span class="k">def</span> <span class="nf">NewIntVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel.NewIntVar-984"><a href="#CpModel.NewIntVar-984"><span class="linenos">984</span></a>        <span class="sd">&quot;&quot;&quot;Create an integer variable with domain [lb, ub].</span>
</span><span id="CpModel.NewIntVar-985"><a href="#CpModel.NewIntVar-985"><span class="linenos">985</span></a>
</span><span id="CpModel.NewIntVar-986"><a href="#CpModel.NewIntVar-986"><span class="linenos">986</span></a><span class="sd">    The CP-SAT solver is limited to integer variables. If you have fractional</span>
</span><span id="CpModel.NewIntVar-987"><a href="#CpModel.NewIntVar-987"><span class="linenos">987</span></a><span class="sd">    values, scale them up so that they become integers; if you have strings,</span>
</span><span id="CpModel.NewIntVar-988"><a href="#CpModel.NewIntVar-988"><span class="linenos">988</span></a><span class="sd">    encode them as integers.</span>
</span><span id="CpModel.NewIntVar-989"><a href="#CpModel.NewIntVar-989"><span class="linenos">989</span></a>
</span><span id="CpModel.NewIntVar-990"><a href="#CpModel.NewIntVar-990"><span class="linenos">990</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.NewIntVar-991"><a href="#CpModel.NewIntVar-991"><span class="linenos">991</span></a><span class="sd">      lb: Lower bound for the variable.</span>
</span><span id="CpModel.NewIntVar-992"><a href="#CpModel.NewIntVar-992"><span class="linenos">992</span></a><span class="sd">      ub: Upper bound for the variable.</span>
</span><span id="CpModel.NewIntVar-993"><a href="#CpModel.NewIntVar-993"><span class="linenos">993</span></a><span class="sd">      name: The name of the variable.</span>
</span><span id="CpModel.NewIntVar-994"><a href="#CpModel.NewIntVar-994"><span class="linenos">994</span></a>
</span><span id="CpModel.NewIntVar-995"><a href="#CpModel.NewIntVar-995"><span class="linenos">995</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.NewIntVar-996"><a href="#CpModel.NewIntVar-996"><span class="linenos">996</span></a><span class="sd">      a variable whose domain is [lb, ub].</span>
</span><span id="CpModel.NewIntVar-997"><a href="#CpModel.NewIntVar-997"><span class="linenos">997</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.NewIntVar-998"><a href="#CpModel.NewIntVar-998"><span class="linenos">998</span></a>
</span><span id="CpModel.NewIntVar-999"><a href="#CpModel.NewIntVar-999"><span class="linenos">999</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">Domain</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Create an integer variable with domain [lb, ub].</p>

<p>The CP-SAT solver is limited to integer variables. If you have fractional
values, scale them up so that they become integers; if you have strings,
encode them as integers.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>lb:</strong>  Lower bound for the variable.</li>
<li><strong>ub:</strong>  Upper bound for the variable.</li>
<li><strong>name:</strong>  The name of the variable.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a variable whose domain is [lb, ub].</p>
</blockquote>
</div>


                            </div>
                            <div id="CpModel.NewIntVarFromDomain" class="classattr">
                                        <input id="CpModel.NewIntVarFromDomain-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">NewIntVarFromDomain</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">domain</span>, </span><span class="param"><span class="n">name</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.NewIntVarFromDomain-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.NewIntVarFromDomain"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.NewIntVarFromDomain-1001"><a href="#CpModel.NewIntVarFromDomain-1001"><span class="linenos">1001</span></a>    <span class="k">def</span> <span class="nf">NewIntVarFromDomain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel.NewIntVarFromDomain-1002"><a href="#CpModel.NewIntVarFromDomain-1002"><span class="linenos">1002</span></a>        <span class="sd">&quot;&quot;&quot;Create an integer variable from a domain.</span>
</span><span id="CpModel.NewIntVarFromDomain-1003"><a href="#CpModel.NewIntVarFromDomain-1003"><span class="linenos">1003</span></a>
</span><span id="CpModel.NewIntVarFromDomain-1004"><a href="#CpModel.NewIntVarFromDomain-1004"><span class="linenos">1004</span></a><span class="sd">    A domain is a set of integers specified by a collection of intervals.</span>
</span><span id="CpModel.NewIntVarFromDomain-1005"><a href="#CpModel.NewIntVarFromDomain-1005"><span class="linenos">1005</span></a><span class="sd">    For example, `model.NewIntVarFromDomain(cp_model.</span>
</span><span id="CpModel.NewIntVarFromDomain-1006"><a href="#CpModel.NewIntVarFromDomain-1006"><span class="linenos">1006</span></a><span class="sd">         Domain.FromIntervals([[1, 2], [4, 6]]), &#39;x&#39;)`</span>
</span><span id="CpModel.NewIntVarFromDomain-1007"><a href="#CpModel.NewIntVarFromDomain-1007"><span class="linenos">1007</span></a>
</span><span id="CpModel.NewIntVarFromDomain-1008"><a href="#CpModel.NewIntVarFromDomain-1008"><span class="linenos">1008</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.NewIntVarFromDomain-1009"><a href="#CpModel.NewIntVarFromDomain-1009"><span class="linenos">1009</span></a><span class="sd">      domain: An instance of the Domain class.</span>
</span><span id="CpModel.NewIntVarFromDomain-1010"><a href="#CpModel.NewIntVarFromDomain-1010"><span class="linenos">1010</span></a><span class="sd">      name: The name of the variable.</span>
</span><span id="CpModel.NewIntVarFromDomain-1011"><a href="#CpModel.NewIntVarFromDomain-1011"><span class="linenos">1011</span></a>
</span><span id="CpModel.NewIntVarFromDomain-1012"><a href="#CpModel.NewIntVarFromDomain-1012"><span class="linenos">1012</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.NewIntVarFromDomain-1013"><a href="#CpModel.NewIntVarFromDomain-1013"><span class="linenos">1013</span></a><span class="sd">        a variable whose domain is the given domain.</span>
</span><span id="CpModel.NewIntVarFromDomain-1014"><a href="#CpModel.NewIntVarFromDomain-1014"><span class="linenos">1014</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.NewIntVarFromDomain-1015"><a href="#CpModel.NewIntVarFromDomain-1015"><span class="linenos">1015</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Create an integer variable from a domain.</p>

<p>A domain is a set of integers specified by a collection of intervals.
For example, <code>model.NewIntVarFromDomain(cp_model.
     Domain.FromIntervals([[1, 2], [4, 6]]), 'x')</code></p>

<h6 id="args">Args</h6>

<ul>
<li><strong>domain:</strong>  An instance of the Domain class.</li>
<li><strong>name:</strong>  The name of the variable.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>a variable whose domain is the given domain.</p>
</blockquote>
</div>


                            </div>
                            <div id="CpModel.NewBoolVar" class="classattr">
                                        <input id="CpModel.NewBoolVar-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">NewBoolVar</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.NewBoolVar-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.NewBoolVar"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.NewBoolVar-1017"><a href="#CpModel.NewBoolVar-1017"><span class="linenos">1017</span></a>    <span class="k">def</span> <span class="nf">NewBoolVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel.NewBoolVar-1018"><a href="#CpModel.NewBoolVar-1018"><span class="linenos">1018</span></a>        <span class="sd">&quot;&quot;&quot;Creates a 0-1 variable with the given name.&quot;&quot;&quot;</span>
</span><span id="CpModel.NewBoolVar-1019"><a href="#CpModel.NewBoolVar-1019"><span class="linenos">1019</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">Domain</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Creates a 0-1 variable with the given name.</p>
</div>


                            </div>
                            <div id="CpModel.NewConstant" class="classattr">
                                        <input id="CpModel.NewConstant-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">NewConstant</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.NewConstant-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.NewConstant"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.NewConstant-1021"><a href="#CpModel.NewConstant-1021"><span class="linenos">1021</span></a>    <span class="k">def</span> <span class="nf">NewConstant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="CpModel.NewConstant-1022"><a href="#CpModel.NewConstant-1022"><span class="linenos">1022</span></a>        <span class="sd">&quot;&quot;&quot;Declares a constant integer.&quot;&quot;&quot;</span>
</span><span id="CpModel.NewConstant-1023"><a href="#CpModel.NewConstant-1023"><span class="linenos">1023</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndexFromConstant</span><span class="p">(</span><span class="n">value</span><span class="p">),</span>
</span><span id="CpModel.NewConstant-1024"><a href="#CpModel.NewConstant-1024"><span class="linenos">1024</span></a>                      <span class="kc">None</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Declares a constant integer.</p>
</div>


                            </div>
                            <div id="CpModel.AddLinearConstraint" class="classattr">
                                        <input id="CpModel.AddLinearConstraint-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddLinearConstraint</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">linear_expr</span>, </span><span class="param"><span class="n">lb</span>, </span><span class="param"><span class="n">ub</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddLinearConstraint-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddLinearConstraint"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddLinearConstraint-1028"><a href="#CpModel.AddLinearConstraint-1028"><span class="linenos">1028</span></a>    <span class="k">def</span> <span class="nf">AddLinearConstraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_expr</span><span class="p">,</span> <span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">):</span>
</span><span id="CpModel.AddLinearConstraint-1029"><a href="#CpModel.AddLinearConstraint-1029"><span class="linenos">1029</span></a>        <span class="sd">&quot;&quot;&quot;Adds the constraint: `lb &lt;= linear_expr &lt;= ub`.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddLinearConstraint-1030"><a href="#CpModel.AddLinearConstraint-1030"><span class="linenos">1030</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddLinearExpressionInDomain</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">,</span> <span class="n">Domain</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Adds the constraint: <code>lb &lt;= linear_expr &lt;= ub</code>.</p>
</div>


                            </div>
                            <div id="CpModel.AddLinearExpressionInDomain" class="classattr">
                                        <input id="CpModel.AddLinearExpressionInDomain-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddLinearExpressionInDomain</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">linear_expr</span>, </span><span class="param"><span class="n">domain</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddLinearExpressionInDomain-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddLinearExpressionInDomain"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddLinearExpressionInDomain-1032"><a href="#CpModel.AddLinearExpressionInDomain-1032"><span class="linenos">1032</span></a>    <span class="k">def</span> <span class="nf">AddLinearExpressionInDomain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_expr</span><span class="p">,</span> <span class="n">domain</span><span class="p">):</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1033"><a href="#CpModel.AddLinearExpressionInDomain-1033"><span class="linenos">1033</span></a>        <span class="sd">&quot;&quot;&quot;Adds the constraint: `linear_expr` in `domain`.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1034"><a href="#CpModel.AddLinearExpressionInDomain-1034"><span class="linenos">1034</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">,</span> <span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1035"><a href="#CpModel.AddLinearExpressionInDomain-1035"><span class="linenos">1035</span></a>            <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1036"><a href="#CpModel.AddLinearExpressionInDomain-1036"><span class="linenos">1036</span></a>            <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1037"><a href="#CpModel.AddLinearExpressionInDomain-1037"><span class="linenos">1037</span></a>            <span class="n">coeffs_map</span><span class="p">,</span> <span class="n">constant</span> <span class="o">=</span> <span class="n">linear_expr</span><span class="o">.</span><span class="n">GetIntegerVarValueMap</span><span class="p">()</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1038"><a href="#CpModel.AddLinearExpressionInDomain-1038"><span class="linenos">1038</span></a>            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">coeffs_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1039"><a href="#CpModel.AddLinearExpressionInDomain-1039"><span class="linenos">1039</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1040"><a href="#CpModel.AddLinearExpressionInDomain-1040"><span class="linenos">1040</span></a>                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Wrong argument&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1041"><a href="#CpModel.AddLinearExpressionInDomain-1041"><span class="linenos">1041</span></a>                <span class="n">c</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1042"><a href="#CpModel.AddLinearExpressionInDomain-1042"><span class="linenos">1042</span></a>                <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1043"><a href="#CpModel.AddLinearExpressionInDomain-1043"><span class="linenos">1043</span></a>                <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1044"><a href="#CpModel.AddLinearExpressionInDomain-1044"><span class="linenos">1044</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1045"><a href="#CpModel.AddLinearExpressionInDomain-1045"><span class="linenos">1045</span></a>                <span class="n">cmh</span><span class="o">.</span><span class="n">capped_subtraction</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1046"><a href="#CpModel.AddLinearExpressionInDomain-1046"><span class="linenos">1046</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">domain</span><span class="o">.</span><span class="n">FlattenedIntervals</span><span class="p">()</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1047"><a href="#CpModel.AddLinearExpressionInDomain-1047"><span class="linenos">1047</span></a>            <span class="p">])</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1048"><a href="#CpModel.AddLinearExpressionInDomain-1048"><span class="linenos">1048</span></a>            <span class="k">return</span> <span class="n">ct</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1049"><a href="#CpModel.AddLinearExpressionInDomain-1049"><span class="linenos">1049</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">):</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1050"><a href="#CpModel.AddLinearExpressionInDomain-1050"><span class="linenos">1050</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">domain</span><span class="o">.</span><span class="n">Contains</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">)):</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1051"><a href="#CpModel.AddLinearExpressionInDomain-1051"><span class="linenos">1051</span></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddBoolOr</span><span class="p">([])</span>  <span class="c1"># Evaluate to false.</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1052"><a href="#CpModel.AddLinearExpressionInDomain-1052"><span class="linenos">1052</span></a>            <span class="c1"># Nothing to do otherwise.</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1053"><a href="#CpModel.AddLinearExpressionInDomain-1053"><span class="linenos">1053</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1054"><a href="#CpModel.AddLinearExpressionInDomain-1054"><span class="linenos">1054</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1055"><a href="#CpModel.AddLinearExpressionInDomain-1055"><span class="linenos">1055</span></a>                <span class="s1">&#39;Not supported: CpModel.AddLinearExpressionInDomain(&#39;</span> <span class="o">+</span>
</span><span id="CpModel.AddLinearExpressionInDomain-1056"><a href="#CpModel.AddLinearExpressionInDomain-1056"><span class="linenos">1056</span></a>                <span class="nb">str</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Adds the constraint: <code>linear_expr</code> in <code>domain</code>.</p>
</div>


                            </div>
                            <div id="CpModel.Add" class="classattr">
                                        <input id="CpModel.Add-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Add</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">ct</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.Add-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.Add"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.Add-1058"><a href="#CpModel.Add-1058"><span class="linenos">1058</span></a>    <span class="k">def</span> <span class="nf">Add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ct</span><span class="p">):</span>
</span><span id="CpModel.Add-1059"><a href="#CpModel.Add-1059"><span class="linenos">1059</span></a>        <span class="sd">&quot;&quot;&quot;Adds a `BoundedLinearExpression` to the model.</span>
</span><span id="CpModel.Add-1060"><a href="#CpModel.Add-1060"><span class="linenos">1060</span></a>
</span><span id="CpModel.Add-1061"><a href="#CpModel.Add-1061"><span class="linenos">1061</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.Add-1062"><a href="#CpModel.Add-1062"><span class="linenos">1062</span></a><span class="sd">      ct: A [`BoundedLinearExpression`](#boundedlinearexpression).</span>
</span><span id="CpModel.Add-1063"><a href="#CpModel.Add-1063"><span class="linenos">1063</span></a>
</span><span id="CpModel.Add-1064"><a href="#CpModel.Add-1064"><span class="linenos">1064</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.Add-1065"><a href="#CpModel.Add-1065"><span class="linenos">1065</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel.Add-1066"><a href="#CpModel.Add-1066"><span class="linenos">1066</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.Add-1067"><a href="#CpModel.Add-1067"><span class="linenos">1067</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="n">BoundedLinearExpression</span><span class="p">):</span>
</span><span id="CpModel.Add-1068"><a href="#CpModel.Add-1068"><span class="linenos">1068</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddLinearExpressionInDomain</span><span class="p">(</span>
</span><span id="CpModel.Add-1069"><a href="#CpModel.Add-1069"><span class="linenos">1069</span></a>                <span class="n">ct</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">Domain</span><span class="o">.</span><span class="n">FromFlatIntervals</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">Bounds</span><span class="p">()))</span>
</span><span id="CpModel.Add-1070"><a href="#CpModel.Add-1070"><span class="linenos">1070</span></a>        <span class="k">elif</span> <span class="n">ct</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="CpModel.Add-1071"><a href="#CpModel.Add-1071"><span class="linenos">1071</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddBoolOr</span><span class="p">([</span><span class="kc">True</span><span class="p">])</span>
</span><span id="CpModel.Add-1072"><a href="#CpModel.Add-1072"><span class="linenos">1072</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="n">ct</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ct</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="CpModel.Add-1073"><a href="#CpModel.Add-1073"><span class="linenos">1073</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddBoolOr</span><span class="p">([])</span>  <span class="c1"># Evaluate to false.</span>
</span><span id="CpModel.Add-1074"><a href="#CpModel.Add-1074"><span class="linenos">1074</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel.Add-1075"><a href="#CpModel.Add-1075"><span class="linenos">1075</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Not supported: CpModel.Add(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Adds a <code><a href="#BoundedLinearExpression">BoundedLinearExpression</a></code> to the model.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>ct:</strong>  A <a href="#boundedlinearexpression"><code>BoundedLinearExpression</code></a>.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An instance of the <code><a href="#Constraint">Constraint</a></code> class.</p>
</blockquote>
</div>


                            </div>
                            <div id="CpModel.AddAllDifferent" class="classattr">
                                        <input id="CpModel.AddAllDifferent-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddAllDifferent</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">expressions</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddAllDifferent-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddAllDifferent"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddAllDifferent-1079"><a href="#CpModel.AddAllDifferent-1079"><span class="linenos">1079</span></a>    <span class="k">def</span> <span class="nf">AddAllDifferent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">expressions</span><span class="p">):</span>
</span><span id="CpModel.AddAllDifferent-1080"><a href="#CpModel.AddAllDifferent-1080"><span class="linenos">1080</span></a>        <span class="sd">&quot;&quot;&quot;Adds AllDifferent(expressions).</span>
</span><span id="CpModel.AddAllDifferent-1081"><a href="#CpModel.AddAllDifferent-1081"><span class="linenos">1081</span></a>
</span><span id="CpModel.AddAllDifferent-1082"><a href="#CpModel.AddAllDifferent-1082"><span class="linenos">1082</span></a><span class="sd">    This constraint forces all expressions to have different values.</span>
</span><span id="CpModel.AddAllDifferent-1083"><a href="#CpModel.AddAllDifferent-1083"><span class="linenos">1083</span></a>
</span><span id="CpModel.AddAllDifferent-1084"><a href="#CpModel.AddAllDifferent-1084"><span class="linenos">1084</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.AddAllDifferent-1085"><a href="#CpModel.AddAllDifferent-1085"><span class="linenos">1085</span></a><span class="sd">      *expressions: simple expressions of the form a * var + constant.</span>
</span><span id="CpModel.AddAllDifferent-1086"><a href="#CpModel.AddAllDifferent-1086"><span class="linenos">1086</span></a>
</span><span id="CpModel.AddAllDifferent-1087"><a href="#CpModel.AddAllDifferent-1087"><span class="linenos">1087</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.AddAllDifferent-1088"><a href="#CpModel.AddAllDifferent-1088"><span class="linenos">1088</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel.AddAllDifferent-1089"><a href="#CpModel.AddAllDifferent-1089"><span class="linenos">1089</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.AddAllDifferent-1090"><a href="#CpModel.AddAllDifferent-1090"><span class="linenos">1090</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddAllDifferent-1091"><a href="#CpModel.AddAllDifferent-1091"><span class="linenos">1091</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddAllDifferent-1092"><a href="#CpModel.AddAllDifferent-1092"><span class="linenos">1092</span></a>        <span class="n">expanded</span> <span class="o">=</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span>
</span><span id="CpModel.AddAllDifferent-1093"><a href="#CpModel.AddAllDifferent-1093"><span class="linenos">1093</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">all_diff</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel.AddAllDifferent-1094"><a href="#CpModel.AddAllDifferent-1094"><span class="linenos">1094</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">expanded</span><span class="p">])</span>
</span><span id="CpModel.AddAllDifferent-1095"><a href="#CpModel.AddAllDifferent-1095"><span class="linenos">1095</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds AllDifferent(expressions).</p>

<p>This constraint forces all expressions to have different values.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>*expressions:</strong>  simple expressions of the form a * var + constant.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An instance of the <code><a href="#Constraint">Constraint</a></code> class.</p>
</blockquote>
</div>


                            </div>
                            <div id="CpModel.AddElement" class="classattr">
                                        <input id="CpModel.AddElement-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddElement</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">index</span>, </span><span class="param"><span class="n">variables</span>, </span><span class="param"><span class="n">target</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddElement-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddElement"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddElement-1097"><a href="#CpModel.AddElement-1097"><span class="linenos">1097</span></a>    <span class="k">def</span> <span class="nf">AddElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
</span><span id="CpModel.AddElement-1098"><a href="#CpModel.AddElement-1098"><span class="linenos">1098</span></a>        <span class="sd">&quot;&quot;&quot;Adds the element constraint: `variables[index] == target`.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddElement-1099"><a href="#CpModel.AddElement-1099"><span class="linenos">1099</span></a>
</span><span id="CpModel.AddElement-1100"><a href="#CpModel.AddElement-1100"><span class="linenos">1100</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">variables</span><span class="p">:</span>
</span><span id="CpModel.AddElement-1101"><a href="#CpModel.AddElement-1101"><span class="linenos">1101</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;AddElement expects a non-empty variables array&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddElement-1102"><a href="#CpModel.AddElement-1102"><span class="linenos">1102</span></a>
</span><span id="CpModel.AddElement-1103"><a href="#CpModel.AddElement-1103"><span class="linenos">1103</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">index</span><span class="p">):</span>
</span><span id="CpModel.AddElement-1104"><a href="#CpModel.AddElement-1104"><span class="linenos">1104</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">variables</span><span class="p">)[</span><span class="nb">int</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span> <span class="o">==</span> <span class="n">target</span><span class="p">)</span>
</span><span id="CpModel.AddElement-1105"><a href="#CpModel.AddElement-1105"><span class="linenos">1105</span></a>
</span><span id="CpModel.AddElement-1106"><a href="#CpModel.AddElement-1106"><span class="linenos">1106</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddElement-1107"><a href="#CpModel.AddElement-1107"><span class="linenos">1107</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddElement-1108"><a href="#CpModel.AddElement-1108"><span class="linenos">1108</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</span><span id="CpModel.AddElement-1109"><a href="#CpModel.AddElement-1109"><span class="linenos">1109</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel.AddElement-1110"><a href="#CpModel.AddElement-1110"><span class="linenos">1110</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">])</span>
</span><span id="CpModel.AddElement-1111"><a href="#CpModel.AddElement-1111"><span class="linenos">1111</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">target</span><span class="p">)</span>
</span><span id="CpModel.AddElement-1112"><a href="#CpModel.AddElement-1112"><span class="linenos">1112</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds the element constraint: <code>variables[index] == target</code>.</p>
</div>


                            </div>
                            <div id="CpModel.AddCircuit" class="classattr">
                                        <input id="CpModel.AddCircuit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddCircuit</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">arcs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddCircuit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddCircuit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddCircuit-1114"><a href="#CpModel.AddCircuit-1114"><span class="linenos">1114</span></a>    <span class="k">def</span> <span class="nf">AddCircuit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arcs</span><span class="p">):</span>
</span><span id="CpModel.AddCircuit-1115"><a href="#CpModel.AddCircuit-1115"><span class="linenos">1115</span></a>        <span class="sd">&quot;&quot;&quot;Adds Circuit(arcs).</span>
</span><span id="CpModel.AddCircuit-1116"><a href="#CpModel.AddCircuit-1116"><span class="linenos">1116</span></a>
</span><span id="CpModel.AddCircuit-1117"><a href="#CpModel.AddCircuit-1117"><span class="linenos">1117</span></a><span class="sd">    Adds a circuit constraint from a sparse list of arcs that encode the graph.</span>
</span><span id="CpModel.AddCircuit-1118"><a href="#CpModel.AddCircuit-1118"><span class="linenos">1118</span></a>
</span><span id="CpModel.AddCircuit-1119"><a href="#CpModel.AddCircuit-1119"><span class="linenos">1119</span></a><span class="sd">    A circuit is a unique Hamiltonian path in a subgraph of the total</span>
</span><span id="CpModel.AddCircuit-1120"><a href="#CpModel.AddCircuit-1120"><span class="linenos">1120</span></a><span class="sd">    graph. In case a node &#39;i&#39; is not in the path, then there must be a</span>
</span><span id="CpModel.AddCircuit-1121"><a href="#CpModel.AddCircuit-1121"><span class="linenos">1121</span></a><span class="sd">    loop arc &#39;i -&gt; i&#39; associated with a true literal. Otherwise</span>
</span><span id="CpModel.AddCircuit-1122"><a href="#CpModel.AddCircuit-1122"><span class="linenos">1122</span></a><span class="sd">    this constraint will fail.</span>
</span><span id="CpModel.AddCircuit-1123"><a href="#CpModel.AddCircuit-1123"><span class="linenos">1123</span></a>
</span><span id="CpModel.AddCircuit-1124"><a href="#CpModel.AddCircuit-1124"><span class="linenos">1124</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.AddCircuit-1125"><a href="#CpModel.AddCircuit-1125"><span class="linenos">1125</span></a><span class="sd">      arcs: a list of arcs. An arc is a tuple (source_node, destination_node,</span>
</span><span id="CpModel.AddCircuit-1126"><a href="#CpModel.AddCircuit-1126"><span class="linenos">1126</span></a><span class="sd">        literal). The arc is selected in the circuit if the literal is true.</span>
</span><span id="CpModel.AddCircuit-1127"><a href="#CpModel.AddCircuit-1127"><span class="linenos">1127</span></a><span class="sd">        Both source_node and destination_node must be integers between 0 and the</span>
</span><span id="CpModel.AddCircuit-1128"><a href="#CpModel.AddCircuit-1128"><span class="linenos">1128</span></a><span class="sd">        number of nodes - 1.</span>
</span><span id="CpModel.AddCircuit-1129"><a href="#CpModel.AddCircuit-1129"><span class="linenos">1129</span></a>
</span><span id="CpModel.AddCircuit-1130"><a href="#CpModel.AddCircuit-1130"><span class="linenos">1130</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.AddCircuit-1131"><a href="#CpModel.AddCircuit-1131"><span class="linenos">1131</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel.AddCircuit-1132"><a href="#CpModel.AddCircuit-1132"><span class="linenos">1132</span></a>
</span><span id="CpModel.AddCircuit-1133"><a href="#CpModel.AddCircuit-1133"><span class="linenos">1133</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel.AddCircuit-1134"><a href="#CpModel.AddCircuit-1134"><span class="linenos">1134</span></a><span class="sd">      ValueError: If the list of arcs is empty.</span>
</span><span id="CpModel.AddCircuit-1135"><a href="#CpModel.AddCircuit-1135"><span class="linenos">1135</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.AddCircuit-1136"><a href="#CpModel.AddCircuit-1136"><span class="linenos">1136</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">arcs</span><span class="p">:</span>
</span><span id="CpModel.AddCircuit-1137"><a href="#CpModel.AddCircuit-1137"><span class="linenos">1137</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;AddCircuit expects a non-empty array of arcs&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddCircuit-1138"><a href="#CpModel.AddCircuit-1138"><span class="linenos">1138</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddCircuit-1139"><a href="#CpModel.AddCircuit-1139"><span class="linenos">1139</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddCircuit-1140"><a href="#CpModel.AddCircuit-1140"><span class="linenos">1140</span></a>        <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">:</span>
</span><span id="CpModel.AddCircuit-1141"><a href="#CpModel.AddCircuit-1141"><span class="linenos">1141</span></a>            <span class="n">tail</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int32</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="CpModel.AddCircuit-1142"><a href="#CpModel.AddCircuit-1142"><span class="linenos">1142</span></a>            <span class="n">head</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int32</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="CpModel.AddCircuit-1143"><a href="#CpModel.AddCircuit-1143"><span class="linenos">1143</span></a>            <span class="n">lit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="CpModel.AddCircuit-1144"><a href="#CpModel.AddCircuit-1144"><span class="linenos">1144</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">tails</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
</span><span id="CpModel.AddCircuit-1145"><a href="#CpModel.AddCircuit-1145"><span class="linenos">1145</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">heads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span id="CpModel.AddCircuit-1146"><a href="#CpModel.AddCircuit-1146"><span class="linenos">1146</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span>
</span><span id="CpModel.AddCircuit-1147"><a href="#CpModel.AddCircuit-1147"><span class="linenos">1147</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds Circuit(arcs).</p>

<p>Adds a circuit constraint from a sparse list of arcs that encode the graph.</p>

<p>A circuit is a unique Hamiltonian path in a subgraph of the total
graph. In case a node 'i' is not in the path, then there must be a
loop arc 'i -> i' associated with a true literal. Otherwise
this constraint will fail.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>arcs:</strong>  a list of arcs. An arc is a tuple (source_node, destination_node,
literal). The arc is selected in the circuit if the literal is true.
Both source_node and destination_node must be integers between 0 and the
number of nodes - 1.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An instance of the <code><a href="#Constraint">Constraint</a></code> class.</p>
</blockquote>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>ValueError:</strong>  If the list of arcs is empty.</li>
</ul>
</div>


                            </div>
                            <div id="CpModel.AddMultipleCircuit" class="classattr">
                                        <input id="CpModel.AddMultipleCircuit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddMultipleCircuit</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">arcs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddMultipleCircuit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddMultipleCircuit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddMultipleCircuit-1149"><a href="#CpModel.AddMultipleCircuit-1149"><span class="linenos">1149</span></a>    <span class="k">def</span> <span class="nf">AddMultipleCircuit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arcs</span><span class="p">):</span>
</span><span id="CpModel.AddMultipleCircuit-1150"><a href="#CpModel.AddMultipleCircuit-1150"><span class="linenos">1150</span></a>        <span class="sd">&quot;&quot;&quot;Adds a multiple circuit constraint, aka the &quot;VRP&quot; constraint.</span>
</span><span id="CpModel.AddMultipleCircuit-1151"><a href="#CpModel.AddMultipleCircuit-1151"><span class="linenos">1151</span></a>
</span><span id="CpModel.AddMultipleCircuit-1152"><a href="#CpModel.AddMultipleCircuit-1152"><span class="linenos">1152</span></a><span class="sd">    The direct graph where arc #i (from tails[i] to head[i]) is present iff</span>
</span><span id="CpModel.AddMultipleCircuit-1153"><a href="#CpModel.AddMultipleCircuit-1153"><span class="linenos">1153</span></a><span class="sd">    literals[i] is true must satisfy this set of properties:</span>
</span><span id="CpModel.AddMultipleCircuit-1154"><a href="#CpModel.AddMultipleCircuit-1154"><span class="linenos">1154</span></a><span class="sd">    - #incoming arcs == 1 except for node 0.</span>
</span><span id="CpModel.AddMultipleCircuit-1155"><a href="#CpModel.AddMultipleCircuit-1155"><span class="linenos">1155</span></a><span class="sd">    - #outgoing arcs == 1 except for node 0.</span>
</span><span id="CpModel.AddMultipleCircuit-1156"><a href="#CpModel.AddMultipleCircuit-1156"><span class="linenos">1156</span></a><span class="sd">    - for node zero, #incoming arcs == #outgoing arcs.</span>
</span><span id="CpModel.AddMultipleCircuit-1157"><a href="#CpModel.AddMultipleCircuit-1157"><span class="linenos">1157</span></a><span class="sd">    - There are no duplicate arcs.</span>
</span><span id="CpModel.AddMultipleCircuit-1158"><a href="#CpModel.AddMultipleCircuit-1158"><span class="linenos">1158</span></a><span class="sd">    - Self-arcs are allowed except for node 0.</span>
</span><span id="CpModel.AddMultipleCircuit-1159"><a href="#CpModel.AddMultipleCircuit-1159"><span class="linenos">1159</span></a><span class="sd">    - There is no cycle in this graph, except through node 0.</span>
</span><span id="CpModel.AddMultipleCircuit-1160"><a href="#CpModel.AddMultipleCircuit-1160"><span class="linenos">1160</span></a>
</span><span id="CpModel.AddMultipleCircuit-1161"><a href="#CpModel.AddMultipleCircuit-1161"><span class="linenos">1161</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.AddMultipleCircuit-1162"><a href="#CpModel.AddMultipleCircuit-1162"><span class="linenos">1162</span></a><span class="sd">      arcs: a list of arcs. An arc is a tuple (source_node, destination_node,</span>
</span><span id="CpModel.AddMultipleCircuit-1163"><a href="#CpModel.AddMultipleCircuit-1163"><span class="linenos">1163</span></a><span class="sd">        literal). The arc is selected in the circuit if the literal is true.</span>
</span><span id="CpModel.AddMultipleCircuit-1164"><a href="#CpModel.AddMultipleCircuit-1164"><span class="linenos">1164</span></a><span class="sd">        Both source_node and destination_node must be integers between 0 and the</span>
</span><span id="CpModel.AddMultipleCircuit-1165"><a href="#CpModel.AddMultipleCircuit-1165"><span class="linenos">1165</span></a><span class="sd">        number of nodes - 1.</span>
</span><span id="CpModel.AddMultipleCircuit-1166"><a href="#CpModel.AddMultipleCircuit-1166"><span class="linenos">1166</span></a>
</span><span id="CpModel.AddMultipleCircuit-1167"><a href="#CpModel.AddMultipleCircuit-1167"><span class="linenos">1167</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.AddMultipleCircuit-1168"><a href="#CpModel.AddMultipleCircuit-1168"><span class="linenos">1168</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel.AddMultipleCircuit-1169"><a href="#CpModel.AddMultipleCircuit-1169"><span class="linenos">1169</span></a>
</span><span id="CpModel.AddMultipleCircuit-1170"><a href="#CpModel.AddMultipleCircuit-1170"><span class="linenos">1170</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel.AddMultipleCircuit-1171"><a href="#CpModel.AddMultipleCircuit-1171"><span class="linenos">1171</span></a><span class="sd">      ValueError: If the list of arcs is empty.</span>
</span><span id="CpModel.AddMultipleCircuit-1172"><a href="#CpModel.AddMultipleCircuit-1172"><span class="linenos">1172</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.AddMultipleCircuit-1173"><a href="#CpModel.AddMultipleCircuit-1173"><span class="linenos">1173</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">arcs</span><span class="p">:</span>
</span><span id="CpModel.AddMultipleCircuit-1174"><a href="#CpModel.AddMultipleCircuit-1174"><span class="linenos">1174</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel.AddMultipleCircuit-1175"><a href="#CpModel.AddMultipleCircuit-1175"><span class="linenos">1175</span></a>                <span class="s1">&#39;AddMultipleCircuit expects a non-empty array of arcs&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddMultipleCircuit-1176"><a href="#CpModel.AddMultipleCircuit-1176"><span class="linenos">1176</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddMultipleCircuit-1177"><a href="#CpModel.AddMultipleCircuit-1177"><span class="linenos">1177</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddMultipleCircuit-1178"><a href="#CpModel.AddMultipleCircuit-1178"><span class="linenos">1178</span></a>        <span class="k">for</span> <span class="n">arc</span> <span class="ow">in</span> <span class="n">arcs</span><span class="p">:</span>
</span><span id="CpModel.AddMultipleCircuit-1179"><a href="#CpModel.AddMultipleCircuit-1179"><span class="linenos">1179</span></a>            <span class="n">tail</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int32</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="CpModel.AddMultipleCircuit-1180"><a href="#CpModel.AddMultipleCircuit-1180"><span class="linenos">1180</span></a>            <span class="n">head</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int32</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="CpModel.AddMultipleCircuit-1181"><a href="#CpModel.AddMultipleCircuit-1181"><span class="linenos">1181</span></a>            <span class="n">lit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">arc</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="CpModel.AddMultipleCircuit-1182"><a href="#CpModel.AddMultipleCircuit-1182"><span class="linenos">1182</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">tails</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
</span><span id="CpModel.AddMultipleCircuit-1183"><a href="#CpModel.AddMultipleCircuit-1183"><span class="linenos">1183</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">heads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span id="CpModel.AddMultipleCircuit-1184"><a href="#CpModel.AddMultipleCircuit-1184"><span class="linenos">1184</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">routes</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span>
</span><span id="CpModel.AddMultipleCircuit-1185"><a href="#CpModel.AddMultipleCircuit-1185"><span class="linenos">1185</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds a multiple circuit constraint, aka the "VRP" constraint.</p>

<p>The direct graph where arc #i (from tails[i] to head[i]) is present iff
literals[i] is true must satisfy this set of properties:</p>

<ul>
<li>#incoming arcs == 1 except for node 0.</li>
<li>#outgoing arcs == 1 except for node 0.</li>
<li>for node zero, #incoming arcs == #outgoing arcs.</li>
<li>There are no duplicate arcs.</li>
<li>Self-arcs are allowed except for node 0.</li>
<li>There is no cycle in this graph, except through node 0.</li>
</ul>

<h6 id="args">Args</h6>

<ul>
<li><strong>arcs:</strong>  a list of arcs. An arc is a tuple (source_node, destination_node,
literal). The arc is selected in the circuit if the literal is true.
Both source_node and destination_node must be integers between 0 and the
number of nodes - 1.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An instance of the <code><a href="#Constraint">Constraint</a></code> class.</p>
</blockquote>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>ValueError:</strong>  If the list of arcs is empty.</li>
</ul>
</div>


                            </div>
                            <div id="CpModel.AddAllowedAssignments" class="classattr">
                                        <input id="CpModel.AddAllowedAssignments-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddAllowedAssignments</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">variables</span>, </span><span class="param"><span class="n">tuples_list</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddAllowedAssignments-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddAllowedAssignments"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddAllowedAssignments-1187"><a href="#CpModel.AddAllowedAssignments-1187"><span class="linenos">1187</span></a>    <span class="k">def</span> <span class="nf">AddAllowedAssignments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">tuples_list</span><span class="p">):</span>
</span><span id="CpModel.AddAllowedAssignments-1188"><a href="#CpModel.AddAllowedAssignments-1188"><span class="linenos">1188</span></a>        <span class="sd">&quot;&quot;&quot;Adds AllowedAssignments(variables, tuples_list).</span>
</span><span id="CpModel.AddAllowedAssignments-1189"><a href="#CpModel.AddAllowedAssignments-1189"><span class="linenos">1189</span></a>
</span><span id="CpModel.AddAllowedAssignments-1190"><a href="#CpModel.AddAllowedAssignments-1190"><span class="linenos">1190</span></a><span class="sd">    An AllowedAssignments constraint is a constraint on an array of variables,</span>
</span><span id="CpModel.AddAllowedAssignments-1191"><a href="#CpModel.AddAllowedAssignments-1191"><span class="linenos">1191</span></a><span class="sd">    which requires that when all variables are assigned values, the resulting</span>
</span><span id="CpModel.AddAllowedAssignments-1192"><a href="#CpModel.AddAllowedAssignments-1192"><span class="linenos">1192</span></a><span class="sd">    array equals one of the  tuples in `tuple_list`.</span>
</span><span id="CpModel.AddAllowedAssignments-1193"><a href="#CpModel.AddAllowedAssignments-1193"><span class="linenos">1193</span></a>
</span><span id="CpModel.AddAllowedAssignments-1194"><a href="#CpModel.AddAllowedAssignments-1194"><span class="linenos">1194</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.AddAllowedAssignments-1195"><a href="#CpModel.AddAllowedAssignments-1195"><span class="linenos">1195</span></a><span class="sd">      variables: A list of variables.</span>
</span><span id="CpModel.AddAllowedAssignments-1196"><a href="#CpModel.AddAllowedAssignments-1196"><span class="linenos">1196</span></a><span class="sd">      tuples_list: A list of admissible tuples. Each tuple must have the same</span>
</span><span id="CpModel.AddAllowedAssignments-1197"><a href="#CpModel.AddAllowedAssignments-1197"><span class="linenos">1197</span></a><span class="sd">        length as the variables, and the ith value of a tuple corresponds to the</span>
</span><span id="CpModel.AddAllowedAssignments-1198"><a href="#CpModel.AddAllowedAssignments-1198"><span class="linenos">1198</span></a><span class="sd">        ith variable.</span>
</span><span id="CpModel.AddAllowedAssignments-1199"><a href="#CpModel.AddAllowedAssignments-1199"><span class="linenos">1199</span></a>
</span><span id="CpModel.AddAllowedAssignments-1200"><a href="#CpModel.AddAllowedAssignments-1200"><span class="linenos">1200</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.AddAllowedAssignments-1201"><a href="#CpModel.AddAllowedAssignments-1201"><span class="linenos">1201</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel.AddAllowedAssignments-1202"><a href="#CpModel.AddAllowedAssignments-1202"><span class="linenos">1202</span></a>
</span><span id="CpModel.AddAllowedAssignments-1203"><a href="#CpModel.AddAllowedAssignments-1203"><span class="linenos">1203</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel.AddAllowedAssignments-1204"><a href="#CpModel.AddAllowedAssignments-1204"><span class="linenos">1204</span></a><span class="sd">      TypeError: If a tuple does not have the same size as the list of</span>
</span><span id="CpModel.AddAllowedAssignments-1205"><a href="#CpModel.AddAllowedAssignments-1205"><span class="linenos">1205</span></a><span class="sd">          variables.</span>
</span><span id="CpModel.AddAllowedAssignments-1206"><a href="#CpModel.AddAllowedAssignments-1206"><span class="linenos">1206</span></a><span class="sd">      ValueError: If the array of variables is empty.</span>
</span><span id="CpModel.AddAllowedAssignments-1207"><a href="#CpModel.AddAllowedAssignments-1207"><span class="linenos">1207</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.AddAllowedAssignments-1208"><a href="#CpModel.AddAllowedAssignments-1208"><span class="linenos">1208</span></a>
</span><span id="CpModel.AddAllowedAssignments-1209"><a href="#CpModel.AddAllowedAssignments-1209"><span class="linenos">1209</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">variables</span><span class="p">:</span>
</span><span id="CpModel.AddAllowedAssignments-1210"><a href="#CpModel.AddAllowedAssignments-1210"><span class="linenos">1210</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel.AddAllowedAssignments-1211"><a href="#CpModel.AddAllowedAssignments-1211"><span class="linenos">1211</span></a>                <span class="s1">&#39;AddAllowedAssignments expects a non-empty variables &#39;</span>
</span><span id="CpModel.AddAllowedAssignments-1212"><a href="#CpModel.AddAllowedAssignments-1212"><span class="linenos">1212</span></a>                <span class="s1">&#39;array&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddAllowedAssignments-1213"><a href="#CpModel.AddAllowedAssignments-1213"><span class="linenos">1213</span></a>
</span><span id="CpModel.AddAllowedAssignments-1214"><a href="#CpModel.AddAllowedAssignments-1214"><span class="linenos">1214</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddAllowedAssignments-1215"><a href="#CpModel.AddAllowedAssignments-1215"><span class="linenos">1215</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddAllowedAssignments-1216"><a href="#CpModel.AddAllowedAssignments-1216"><span class="linenos">1216</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">])</span>
</span><span id="CpModel.AddAllowedAssignments-1217"><a href="#CpModel.AddAllowedAssignments-1217"><span class="linenos">1217</span></a>        <span class="n">arity</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
</span><span id="CpModel.AddAllowedAssignments-1218"><a href="#CpModel.AddAllowedAssignments-1218"><span class="linenos">1218</span></a>        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tuples_list</span><span class="p">:</span>
</span><span id="CpModel.AddAllowedAssignments-1219"><a href="#CpModel.AddAllowedAssignments-1219"><span class="linenos">1219</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">!=</span> <span class="n">arity</span><span class="p">:</span>
</span><span id="CpModel.AddAllowedAssignments-1220"><a href="#CpModel.AddAllowedAssignments-1220"><span class="linenos">1220</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Tuple &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; has the wrong arity&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddAllowedAssignments-1221"><a href="#CpModel.AddAllowedAssignments-1221"><span class="linenos">1221</span></a>            <span class="n">ar</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="CpModel.AddAllowedAssignments-1222"><a href="#CpModel.AddAllowedAssignments-1222"><span class="linenos">1222</span></a>            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">t</span><span class="p">:</span>
</span><span id="CpModel.AddAllowedAssignments-1223"><a href="#CpModel.AddAllowedAssignments-1223"><span class="linenos">1223</span></a>                <span class="n">ar</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="CpModel.AddAllowedAssignments-1224"><a href="#CpModel.AddAllowedAssignments-1224"><span class="linenos">1224</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">ar</span><span class="p">)</span>
</span><span id="CpModel.AddAllowedAssignments-1225"><a href="#CpModel.AddAllowedAssignments-1225"><span class="linenos">1225</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds AllowedAssignments(variables, tuples_list).</p>

<p>An AllowedAssignments constraint is a constraint on an array of variables,
which requires that when all variables are assigned values, the resulting
array equals one of the  tuples in <code>tuple_list</code>.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>variables:</strong>  A list of variables.</li>
<li><strong>tuples_list:</strong>  A list of admissible tuples. Each tuple must have the same
length as the variables, and the ith value of a tuple corresponds to the
ith variable.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An instance of the <code><a href="#Constraint">Constraint</a></code> class.</p>
</blockquote>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>TypeError:</strong>  If a tuple does not have the same size as the list of
variables.</li>
<li><strong>ValueError:</strong>  If the array of variables is empty.</li>
</ul>
</div>


                            </div>
                            <div id="CpModel.AddForbiddenAssignments" class="classattr">
                                        <input id="CpModel.AddForbiddenAssignments-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddForbiddenAssignments</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">variables</span>, </span><span class="param"><span class="n">tuples_list</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddForbiddenAssignments-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddForbiddenAssignments"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddForbiddenAssignments-1227"><a href="#CpModel.AddForbiddenAssignments-1227"><span class="linenos">1227</span></a>    <span class="k">def</span> <span class="nf">AddForbiddenAssignments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">tuples_list</span><span class="p">):</span>
</span><span id="CpModel.AddForbiddenAssignments-1228"><a href="#CpModel.AddForbiddenAssignments-1228"><span class="linenos">1228</span></a>        <span class="sd">&quot;&quot;&quot;Adds AddForbiddenAssignments(variables, [tuples_list]).</span>
</span><span id="CpModel.AddForbiddenAssignments-1229"><a href="#CpModel.AddForbiddenAssignments-1229"><span class="linenos">1229</span></a>
</span><span id="CpModel.AddForbiddenAssignments-1230"><a href="#CpModel.AddForbiddenAssignments-1230"><span class="linenos">1230</span></a><span class="sd">    A ForbiddenAssignments constraint is a constraint on an array of variables</span>
</span><span id="CpModel.AddForbiddenAssignments-1231"><a href="#CpModel.AddForbiddenAssignments-1231"><span class="linenos">1231</span></a><span class="sd">    where the list of impossible combinations is provided in the tuples list.</span>
</span><span id="CpModel.AddForbiddenAssignments-1232"><a href="#CpModel.AddForbiddenAssignments-1232"><span class="linenos">1232</span></a>
</span><span id="CpModel.AddForbiddenAssignments-1233"><a href="#CpModel.AddForbiddenAssignments-1233"><span class="linenos">1233</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.AddForbiddenAssignments-1234"><a href="#CpModel.AddForbiddenAssignments-1234"><span class="linenos">1234</span></a><span class="sd">      variables: A list of variables.</span>
</span><span id="CpModel.AddForbiddenAssignments-1235"><a href="#CpModel.AddForbiddenAssignments-1235"><span class="linenos">1235</span></a><span class="sd">      tuples_list: A list of forbidden tuples. Each tuple must have the same</span>
</span><span id="CpModel.AddForbiddenAssignments-1236"><a href="#CpModel.AddForbiddenAssignments-1236"><span class="linenos">1236</span></a><span class="sd">        length as the variables, and the *i*th value of a tuple corresponds to</span>
</span><span id="CpModel.AddForbiddenAssignments-1237"><a href="#CpModel.AddForbiddenAssignments-1237"><span class="linenos">1237</span></a><span class="sd">        the *i*th variable.</span>
</span><span id="CpModel.AddForbiddenAssignments-1238"><a href="#CpModel.AddForbiddenAssignments-1238"><span class="linenos">1238</span></a>
</span><span id="CpModel.AddForbiddenAssignments-1239"><a href="#CpModel.AddForbiddenAssignments-1239"><span class="linenos">1239</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.AddForbiddenAssignments-1240"><a href="#CpModel.AddForbiddenAssignments-1240"><span class="linenos">1240</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel.AddForbiddenAssignments-1241"><a href="#CpModel.AddForbiddenAssignments-1241"><span class="linenos">1241</span></a>
</span><span id="CpModel.AddForbiddenAssignments-1242"><a href="#CpModel.AddForbiddenAssignments-1242"><span class="linenos">1242</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel.AddForbiddenAssignments-1243"><a href="#CpModel.AddForbiddenAssignments-1243"><span class="linenos">1243</span></a><span class="sd">      TypeError: If a tuple does not have the same size as the list of</span>
</span><span id="CpModel.AddForbiddenAssignments-1244"><a href="#CpModel.AddForbiddenAssignments-1244"><span class="linenos">1244</span></a><span class="sd">                 variables.</span>
</span><span id="CpModel.AddForbiddenAssignments-1245"><a href="#CpModel.AddForbiddenAssignments-1245"><span class="linenos">1245</span></a><span class="sd">      ValueError: If the array of variables is empty.</span>
</span><span id="CpModel.AddForbiddenAssignments-1246"><a href="#CpModel.AddForbiddenAssignments-1246"><span class="linenos">1246</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.AddForbiddenAssignments-1247"><a href="#CpModel.AddForbiddenAssignments-1247"><span class="linenos">1247</span></a>
</span><span id="CpModel.AddForbiddenAssignments-1248"><a href="#CpModel.AddForbiddenAssignments-1248"><span class="linenos">1248</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">variables</span><span class="p">:</span>
</span><span id="CpModel.AddForbiddenAssignments-1249"><a href="#CpModel.AddForbiddenAssignments-1249"><span class="linenos">1249</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel.AddForbiddenAssignments-1250"><a href="#CpModel.AddForbiddenAssignments-1250"><span class="linenos">1250</span></a>                <span class="s1">&#39;AddForbiddenAssignments expects a non-empty variables &#39;</span>
</span><span id="CpModel.AddForbiddenAssignments-1251"><a href="#CpModel.AddForbiddenAssignments-1251"><span class="linenos">1251</span></a>                <span class="s1">&#39;array&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddForbiddenAssignments-1252"><a href="#CpModel.AddForbiddenAssignments-1252"><span class="linenos">1252</span></a>
</span><span id="CpModel.AddForbiddenAssignments-1253"><a href="#CpModel.AddForbiddenAssignments-1253"><span class="linenos">1253</span></a>        <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddForbiddenAssignments-1254"><a href="#CpModel.AddForbiddenAssignments-1254"><span class="linenos">1254</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddAllowedAssignments</span><span class="p">(</span><span class="n">variables</span><span class="p">,</span> <span class="n">tuples_list</span><span class="p">)</span>
</span><span id="CpModel.AddForbiddenAssignments-1255"><a href="#CpModel.AddForbiddenAssignments-1255"><span class="linenos">1255</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">negated</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="CpModel.AddForbiddenAssignments-1256"><a href="#CpModel.AddForbiddenAssignments-1256"><span class="linenos">1256</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds AddForbiddenAssignments(variables, [tuples_list]).</p>

<p>A ForbiddenAssignments constraint is a constraint on an array of variables
where the list of impossible combinations is provided in the tuples list.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>variables:</strong>  A list of variables.</li>
<li><strong>tuples_list:</strong>  A list of forbidden tuples. Each tuple must have the same
length as the variables, and the <em>i</em>th value of a tuple corresponds to
the <em>i</em>th variable.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An instance of the <code><a href="#Constraint">Constraint</a></code> class.</p>
</blockquote>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>TypeError:</strong>  If a tuple does not have the same size as the list of
variables.</li>
<li><strong>ValueError:</strong>  If the array of variables is empty.</li>
</ul>
</div>


                            </div>
                            <div id="CpModel.AddAutomaton" class="classattr">
                                        <input id="CpModel.AddAutomaton-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddAutomaton</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">transition_variables</span>,</span><span class="param">	<span class="n">starting_state</span>,</span><span class="param">	<span class="n">final_states</span>,</span><span class="param">	<span class="n">transition_triples</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddAutomaton-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddAutomaton"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddAutomaton-1258"><a href="#CpModel.AddAutomaton-1258"><span class="linenos">1258</span></a>    <span class="k">def</span> <span class="nf">AddAutomaton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transition_variables</span><span class="p">,</span> <span class="n">starting_state</span><span class="p">,</span> <span class="n">final_states</span><span class="p">,</span>
</span><span id="CpModel.AddAutomaton-1259"><a href="#CpModel.AddAutomaton-1259"><span class="linenos">1259</span></a>                     <span class="n">transition_triples</span><span class="p">):</span>
</span><span id="CpModel.AddAutomaton-1260"><a href="#CpModel.AddAutomaton-1260"><span class="linenos">1260</span></a>        <span class="sd">&quot;&quot;&quot;Adds an automaton constraint.</span>
</span><span id="CpModel.AddAutomaton-1261"><a href="#CpModel.AddAutomaton-1261"><span class="linenos">1261</span></a>
</span><span id="CpModel.AddAutomaton-1262"><a href="#CpModel.AddAutomaton-1262"><span class="linenos">1262</span></a><span class="sd">    An automaton constraint takes a list of variables (of size *n*), an initial</span>
</span><span id="CpModel.AddAutomaton-1263"><a href="#CpModel.AddAutomaton-1263"><span class="linenos">1263</span></a><span class="sd">    state, a set of final states, and a set of transitions. A transition is a</span>
</span><span id="CpModel.AddAutomaton-1264"><a href="#CpModel.AddAutomaton-1264"><span class="linenos">1264</span></a><span class="sd">    triplet (*tail*, *transition*, *head*), where *tail* and *head* are states,</span>
</span><span id="CpModel.AddAutomaton-1265"><a href="#CpModel.AddAutomaton-1265"><span class="linenos">1265</span></a><span class="sd">    and *transition* is the label of an arc from *head* to *tail*,</span>
</span><span id="CpModel.AddAutomaton-1266"><a href="#CpModel.AddAutomaton-1266"><span class="linenos">1266</span></a><span class="sd">    corresponding to the value of one variable in the list of variables.</span>
</span><span id="CpModel.AddAutomaton-1267"><a href="#CpModel.AddAutomaton-1267"><span class="linenos">1267</span></a>
</span><span id="CpModel.AddAutomaton-1268"><a href="#CpModel.AddAutomaton-1268"><span class="linenos">1268</span></a><span class="sd">    This automaton will be unrolled into a flow with *n* + 1 phases. Each phase</span>
</span><span id="CpModel.AddAutomaton-1269"><a href="#CpModel.AddAutomaton-1269"><span class="linenos">1269</span></a><span class="sd">    contains the possible states of the automaton. The first state contains the</span>
</span><span id="CpModel.AddAutomaton-1270"><a href="#CpModel.AddAutomaton-1270"><span class="linenos">1270</span></a><span class="sd">    initial state. The last phase contains the final states.</span>
</span><span id="CpModel.AddAutomaton-1271"><a href="#CpModel.AddAutomaton-1271"><span class="linenos">1271</span></a>
</span><span id="CpModel.AddAutomaton-1272"><a href="#CpModel.AddAutomaton-1272"><span class="linenos">1272</span></a><span class="sd">    Between two consecutive phases *i* and *i* + 1, the automaton creates a set</span>
</span><span id="CpModel.AddAutomaton-1273"><a href="#CpModel.AddAutomaton-1273"><span class="linenos">1273</span></a><span class="sd">    of arcs. For each transition (*tail*, *transition*, *head*), it will add</span>
</span><span id="CpModel.AddAutomaton-1274"><a href="#CpModel.AddAutomaton-1274"><span class="linenos">1274</span></a><span class="sd">    an arc from the state *tail* of phase *i* and the state *head* of phase</span>
</span><span id="CpModel.AddAutomaton-1275"><a href="#CpModel.AddAutomaton-1275"><span class="linenos">1275</span></a><span class="sd">    *i* + 1. This arc is labeled by the value *transition* of the variables</span>
</span><span id="CpModel.AddAutomaton-1276"><a href="#CpModel.AddAutomaton-1276"><span class="linenos">1276</span></a><span class="sd">    `variables[i]`. That is, this arc can only be selected if `variables[i]`</span>
</span><span id="CpModel.AddAutomaton-1277"><a href="#CpModel.AddAutomaton-1277"><span class="linenos">1277</span></a><span class="sd">    is assigned the value *transition*.</span>
</span><span id="CpModel.AddAutomaton-1278"><a href="#CpModel.AddAutomaton-1278"><span class="linenos">1278</span></a>
</span><span id="CpModel.AddAutomaton-1279"><a href="#CpModel.AddAutomaton-1279"><span class="linenos">1279</span></a><span class="sd">    A feasible solution of this constraint is an assignment of variables such</span>
</span><span id="CpModel.AddAutomaton-1280"><a href="#CpModel.AddAutomaton-1280"><span class="linenos">1280</span></a><span class="sd">    that, starting from the initial state in phase 0, there is a path labeled by</span>
</span><span id="CpModel.AddAutomaton-1281"><a href="#CpModel.AddAutomaton-1281"><span class="linenos">1281</span></a><span class="sd">    the values of the variables that ends in one of the final states in the</span>
</span><span id="CpModel.AddAutomaton-1282"><a href="#CpModel.AddAutomaton-1282"><span class="linenos">1282</span></a><span class="sd">    final phase.</span>
</span><span id="CpModel.AddAutomaton-1283"><a href="#CpModel.AddAutomaton-1283"><span class="linenos">1283</span></a>
</span><span id="CpModel.AddAutomaton-1284"><a href="#CpModel.AddAutomaton-1284"><span class="linenos">1284</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.AddAutomaton-1285"><a href="#CpModel.AddAutomaton-1285"><span class="linenos">1285</span></a><span class="sd">      transition_variables: A non-empty list of variables whose values</span>
</span><span id="CpModel.AddAutomaton-1286"><a href="#CpModel.AddAutomaton-1286"><span class="linenos">1286</span></a><span class="sd">        correspond to the labels of the arcs traversed by the automaton.</span>
</span><span id="CpModel.AddAutomaton-1287"><a href="#CpModel.AddAutomaton-1287"><span class="linenos">1287</span></a><span class="sd">      starting_state: The initial state of the automaton.</span>
</span><span id="CpModel.AddAutomaton-1288"><a href="#CpModel.AddAutomaton-1288"><span class="linenos">1288</span></a><span class="sd">      final_states: A non-empty list of admissible final states.</span>
</span><span id="CpModel.AddAutomaton-1289"><a href="#CpModel.AddAutomaton-1289"><span class="linenos">1289</span></a><span class="sd">      transition_triples: A list of transitions for the automaton, in the</span>
</span><span id="CpModel.AddAutomaton-1290"><a href="#CpModel.AddAutomaton-1290"><span class="linenos">1290</span></a><span class="sd">        following format (current_state, variable_value, next_state).</span>
</span><span id="CpModel.AddAutomaton-1291"><a href="#CpModel.AddAutomaton-1291"><span class="linenos">1291</span></a>
</span><span id="CpModel.AddAutomaton-1292"><a href="#CpModel.AddAutomaton-1292"><span class="linenos">1292</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.AddAutomaton-1293"><a href="#CpModel.AddAutomaton-1293"><span class="linenos">1293</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel.AddAutomaton-1294"><a href="#CpModel.AddAutomaton-1294"><span class="linenos">1294</span></a>
</span><span id="CpModel.AddAutomaton-1295"><a href="#CpModel.AddAutomaton-1295"><span class="linenos">1295</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel.AddAutomaton-1296"><a href="#CpModel.AddAutomaton-1296"><span class="linenos">1296</span></a><span class="sd">      ValueError: if `transition_variables`, `final_states`, or</span>
</span><span id="CpModel.AddAutomaton-1297"><a href="#CpModel.AddAutomaton-1297"><span class="linenos">1297</span></a><span class="sd">        `transition_triples` are empty.</span>
</span><span id="CpModel.AddAutomaton-1298"><a href="#CpModel.AddAutomaton-1298"><span class="linenos">1298</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.AddAutomaton-1299"><a href="#CpModel.AddAutomaton-1299"><span class="linenos">1299</span></a>
</span><span id="CpModel.AddAutomaton-1300"><a href="#CpModel.AddAutomaton-1300"><span class="linenos">1300</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">transition_variables</span><span class="p">:</span>
</span><span id="CpModel.AddAutomaton-1301"><a href="#CpModel.AddAutomaton-1301"><span class="linenos">1301</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel.AddAutomaton-1302"><a href="#CpModel.AddAutomaton-1302"><span class="linenos">1302</span></a>                <span class="s1">&#39;AddAutomaton expects a non-empty transition_variables &#39;</span>
</span><span id="CpModel.AddAutomaton-1303"><a href="#CpModel.AddAutomaton-1303"><span class="linenos">1303</span></a>                <span class="s1">&#39;array&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddAutomaton-1304"><a href="#CpModel.AddAutomaton-1304"><span class="linenos">1304</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">final_states</span><span class="p">:</span>
</span><span id="CpModel.AddAutomaton-1305"><a href="#CpModel.AddAutomaton-1305"><span class="linenos">1305</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;AddAutomaton expects some final states&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddAutomaton-1306"><a href="#CpModel.AddAutomaton-1306"><span class="linenos">1306</span></a>
</span><span id="CpModel.AddAutomaton-1307"><a href="#CpModel.AddAutomaton-1307"><span class="linenos">1307</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">transition_triples</span><span class="p">:</span>
</span><span id="CpModel.AddAutomaton-1308"><a href="#CpModel.AddAutomaton-1308"><span class="linenos">1308</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;AddAutomaton expects some transition triples&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddAutomaton-1309"><a href="#CpModel.AddAutomaton-1309"><span class="linenos">1309</span></a>
</span><span id="CpModel.AddAutomaton-1310"><a href="#CpModel.AddAutomaton-1310"><span class="linenos">1310</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddAutomaton-1311"><a href="#CpModel.AddAutomaton-1311"><span class="linenos">1311</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddAutomaton-1312"><a href="#CpModel.AddAutomaton-1312"><span class="linenos">1312</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel.AddAutomaton-1313"><a href="#CpModel.AddAutomaton-1313"><span class="linenos">1313</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">transition_variables</span><span class="p">])</span>
</span><span id="CpModel.AddAutomaton-1314"><a href="#CpModel.AddAutomaton-1314"><span class="linenos">1314</span></a>        <span class="n">starting_state</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">starting_state</span><span class="p">)</span>
</span><span id="CpModel.AddAutomaton-1315"><a href="#CpModel.AddAutomaton-1315"><span class="linenos">1315</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">starting_state</span> <span class="o">=</span> <span class="n">starting_state</span>
</span><span id="CpModel.AddAutomaton-1316"><a href="#CpModel.AddAutomaton-1316"><span class="linenos">1316</span></a>        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">final_states</span><span class="p">:</span>
</span><span id="CpModel.AddAutomaton-1317"><a href="#CpModel.AddAutomaton-1317"><span class="linenos">1317</span></a>            <span class="n">v</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="CpModel.AddAutomaton-1318"><a href="#CpModel.AddAutomaton-1318"><span class="linenos">1318</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">final_states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="CpModel.AddAutomaton-1319"><a href="#CpModel.AddAutomaton-1319"><span class="linenos">1319</span></a>        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">transition_triples</span><span class="p">:</span>
</span><span id="CpModel.AddAutomaton-1320"><a href="#CpModel.AddAutomaton-1320"><span class="linenos">1320</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="CpModel.AddAutomaton-1321"><a href="#CpModel.AddAutomaton-1321"><span class="linenos">1321</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Tuple &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span>
</span><span id="CpModel.AddAutomaton-1322"><a href="#CpModel.AddAutomaton-1322"><span class="linenos">1322</span></a>                                <span class="s1">&#39; has the wrong arity (!= 3)&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddAutomaton-1323"><a href="#CpModel.AddAutomaton-1323"><span class="linenos">1323</span></a>            <span class="n">tail</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="CpModel.AddAutomaton-1324"><a href="#CpModel.AddAutomaton-1324"><span class="linenos">1324</span></a>            <span class="n">label</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="CpModel.AddAutomaton-1325"><a href="#CpModel.AddAutomaton-1325"><span class="linenos">1325</span></a>            <span class="n">head</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</span><span id="CpModel.AddAutomaton-1326"><a href="#CpModel.AddAutomaton-1326"><span class="linenos">1326</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">transition_tail</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tail</span><span class="p">)</span>
</span><span id="CpModel.AddAutomaton-1327"><a href="#CpModel.AddAutomaton-1327"><span class="linenos">1327</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">transition_label</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
</span><span id="CpModel.AddAutomaton-1328"><a href="#CpModel.AddAutomaton-1328"><span class="linenos">1328</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">automaton</span><span class="o">.</span><span class="n">transition_head</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">head</span><span class="p">)</span>
</span><span id="CpModel.AddAutomaton-1329"><a href="#CpModel.AddAutomaton-1329"><span class="linenos">1329</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds an automaton constraint.</p>

<p>An automaton constraint takes a list of variables (of size <em>n</em>), an initial
state, a set of final states, and a set of transitions. A transition is a
triplet (<em>tail</em>, <em>transition</em>, <em>head</em>), where <em>tail</em> and <em>head</em> are states,
and <em>transition</em> is the label of an arc from <em>head</em> to <em>tail</em>,
corresponding to the value of one variable in the list of variables.</p>

<p>This automaton will be unrolled into a flow with <em>n</em> + 1 phases. Each phase
contains the possible states of the automaton. The first state contains the
initial state. The last phase contains the final states.</p>

<p>Between two consecutive phases <em>i</em> and <em>i</em> + 1, the automaton creates a set
of arcs. For each transition (<em>tail</em>, <em>transition</em>, <em>head</em>), it will add
an arc from the state <em>tail</em> of phase <em>i</em> and the state <em>head</em> of phase
<em>i</em> + 1. This arc is labeled by the value <em>transition</em> of the variables
<code>variables[i]</code>. That is, this arc can only be selected if <code>variables[i]</code>
is assigned the value <em>transition</em>.</p>

<p>A feasible solution of this constraint is an assignment of variables such
that, starting from the initial state in phase 0, there is a path labeled by
the values of the variables that ends in one of the final states in the
final phase.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>transition_variables:</strong>  A non-empty list of variables whose values
correspond to the labels of the arcs traversed by the automaton.</li>
<li><strong>starting_state:</strong>  The initial state of the automaton.</li>
<li><strong>final_states:</strong>  A non-empty list of admissible final states.</li>
<li><strong>transition_triples:</strong>  A list of transitions for the automaton, in the
following format (current_state, variable_value, next_state).</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An instance of the <code><a href="#Constraint">Constraint</a></code> class.</p>
</blockquote>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>ValueError:</strong>  if <code>transition_variables</code>, <code>final_states</code>, or
<code>transition_triples</code> are empty.</li>
</ul>
</div>


                            </div>
                            <div id="CpModel.AddInverse" class="classattr">
                                        <input id="CpModel.AddInverse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddInverse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">variables</span>, </span><span class="param"><span class="n">inverse_variables</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddInverse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddInverse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddInverse-1331"><a href="#CpModel.AddInverse-1331"><span class="linenos">1331</span></a>    <span class="k">def</span> <span class="nf">AddInverse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">inverse_variables</span><span class="p">):</span>
</span><span id="CpModel.AddInverse-1332"><a href="#CpModel.AddInverse-1332"><span class="linenos">1332</span></a>        <span class="sd">&quot;&quot;&quot;Adds Inverse(variables, inverse_variables).</span>
</span><span id="CpModel.AddInverse-1333"><a href="#CpModel.AddInverse-1333"><span class="linenos">1333</span></a>
</span><span id="CpModel.AddInverse-1334"><a href="#CpModel.AddInverse-1334"><span class="linenos">1334</span></a><span class="sd">    An inverse constraint enforces that if `variables[i]` is assigned a value</span>
</span><span id="CpModel.AddInverse-1335"><a href="#CpModel.AddInverse-1335"><span class="linenos">1335</span></a><span class="sd">    `j`, then `inverse_variables[j]` is assigned a value `i`. And vice versa.</span>
</span><span id="CpModel.AddInverse-1336"><a href="#CpModel.AddInverse-1336"><span class="linenos">1336</span></a>
</span><span id="CpModel.AddInverse-1337"><a href="#CpModel.AddInverse-1337"><span class="linenos">1337</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.AddInverse-1338"><a href="#CpModel.AddInverse-1338"><span class="linenos">1338</span></a><span class="sd">      variables: An array of integer variables.</span>
</span><span id="CpModel.AddInverse-1339"><a href="#CpModel.AddInverse-1339"><span class="linenos">1339</span></a><span class="sd">      inverse_variables: An array of integer variables.</span>
</span><span id="CpModel.AddInverse-1340"><a href="#CpModel.AddInverse-1340"><span class="linenos">1340</span></a>
</span><span id="CpModel.AddInverse-1341"><a href="#CpModel.AddInverse-1341"><span class="linenos">1341</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.AddInverse-1342"><a href="#CpModel.AddInverse-1342"><span class="linenos">1342</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel.AddInverse-1343"><a href="#CpModel.AddInverse-1343"><span class="linenos">1343</span></a>
</span><span id="CpModel.AddInverse-1344"><a href="#CpModel.AddInverse-1344"><span class="linenos">1344</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel.AddInverse-1345"><a href="#CpModel.AddInverse-1345"><span class="linenos">1345</span></a><span class="sd">      TypeError: if variables and inverse_variables have different lengths, or</span>
</span><span id="CpModel.AddInverse-1346"><a href="#CpModel.AddInverse-1346"><span class="linenos">1346</span></a><span class="sd">          if they are empty.</span>
</span><span id="CpModel.AddInverse-1347"><a href="#CpModel.AddInverse-1347"><span class="linenos">1347</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.AddInverse-1348"><a href="#CpModel.AddInverse-1348"><span class="linenos">1348</span></a>
</span><span id="CpModel.AddInverse-1349"><a href="#CpModel.AddInverse-1349"><span class="linenos">1349</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">variables</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">inverse_variables</span><span class="p">:</span>
</span><span id="CpModel.AddInverse-1350"><a href="#CpModel.AddInverse-1350"><span class="linenos">1350</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel.AddInverse-1351"><a href="#CpModel.AddInverse-1351"><span class="linenos">1351</span></a>                <span class="s1">&#39;The Inverse constraint does not accept empty arrays&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddInverse-1352"><a href="#CpModel.AddInverse-1352"><span class="linenos">1352</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">inverse_variables</span><span class="p">):</span>
</span><span id="CpModel.AddInverse-1353"><a href="#CpModel.AddInverse-1353"><span class="linenos">1353</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel.AddInverse-1354"><a href="#CpModel.AddInverse-1354"><span class="linenos">1354</span></a>                <span class="s1">&#39;In the inverse constraint, the two array variables and&#39;</span>
</span><span id="CpModel.AddInverse-1355"><a href="#CpModel.AddInverse-1355"><span class="linenos">1355</span></a>                <span class="s1">&#39; inverse_variables must have the same length.&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddInverse-1356"><a href="#CpModel.AddInverse-1356"><span class="linenos">1356</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddInverse-1357"><a href="#CpModel.AddInverse-1357"><span class="linenos">1357</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddInverse-1358"><a href="#CpModel.AddInverse-1358"><span class="linenos">1358</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">inverse</span><span class="o">.</span><span class="n">f_direct</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel.AddInverse-1359"><a href="#CpModel.AddInverse-1359"><span class="linenos">1359</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">])</span>
</span><span id="CpModel.AddInverse-1360"><a href="#CpModel.AddInverse-1360"><span class="linenos">1360</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">inverse</span><span class="o">.</span><span class="n">f_inverse</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel.AddInverse-1361"><a href="#CpModel.AddInverse-1361"><span class="linenos">1361</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">inverse_variables</span><span class="p">])</span>
</span><span id="CpModel.AddInverse-1362"><a href="#CpModel.AddInverse-1362"><span class="linenos">1362</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds Inverse(variables, inverse_variables).</p>

<p>An inverse constraint enforces that if <code>variables[i]</code> is assigned a value
<code>j</code>, then <code>inverse_variables[j]</code> is assigned a value <code>i</code>. And vice versa.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>variables:</strong>  An array of integer variables.</li>
<li><strong>inverse_variables:</strong>  An array of integer variables.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An instance of the <code><a href="#Constraint">Constraint</a></code> class.</p>
</blockquote>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>TypeError:</strong>  if variables and inverse_variables have different lengths, or
if they are empty.</li>
</ul>
</div>


                            </div>
                            <div id="CpModel.AddReservoirConstraint" class="classattr">
                                        <input id="CpModel.AddReservoirConstraint-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddReservoirConstraint</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">times</span>, </span><span class="param"><span class="n">level_changes</span>, </span><span class="param"><span class="n">min_level</span>, </span><span class="param"><span class="n">max_level</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddReservoirConstraint-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddReservoirConstraint"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddReservoirConstraint-1364"><a href="#CpModel.AddReservoirConstraint-1364"><span class="linenos">1364</span></a>    <span class="k">def</span> <span class="nf">AddReservoirConstraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">,</span> <span class="n">level_changes</span><span class="p">,</span> <span class="n">min_level</span><span class="p">,</span>
</span><span id="CpModel.AddReservoirConstraint-1365"><a href="#CpModel.AddReservoirConstraint-1365"><span class="linenos">1365</span></a>                               <span class="n">max_level</span><span class="p">):</span>
</span><span id="CpModel.AddReservoirConstraint-1366"><a href="#CpModel.AddReservoirConstraint-1366"><span class="linenos">1366</span></a>        <span class="sd">&quot;&quot;&quot;Adds Reservoir(times, level_changes, min_level, max_level).</span>
</span><span id="CpModel.AddReservoirConstraint-1367"><a href="#CpModel.AddReservoirConstraint-1367"><span class="linenos">1367</span></a>
</span><span id="CpModel.AddReservoirConstraint-1368"><a href="#CpModel.AddReservoirConstraint-1368"><span class="linenos">1368</span></a><span class="sd">    Maintains a reservoir level within bounds. The water level starts at 0, and</span>
</span><span id="CpModel.AddReservoirConstraint-1369"><a href="#CpModel.AddReservoirConstraint-1369"><span class="linenos">1369</span></a><span class="sd">    at any time, it must be between min_level and max_level.</span>
</span><span id="CpModel.AddReservoirConstraint-1370"><a href="#CpModel.AddReservoirConstraint-1370"><span class="linenos">1370</span></a>
</span><span id="CpModel.AddReservoirConstraint-1371"><a href="#CpModel.AddReservoirConstraint-1371"><span class="linenos">1371</span></a><span class="sd">    If the affine expression `times[i]` is assigned a value t, then the current</span>
</span><span id="CpModel.AddReservoirConstraint-1372"><a href="#CpModel.AddReservoirConstraint-1372"><span class="linenos">1372</span></a><span class="sd">    level changes by `level_changes[i]`, which is constant, at time t.</span>
</span><span id="CpModel.AddReservoirConstraint-1373"><a href="#CpModel.AddReservoirConstraint-1373"><span class="linenos">1373</span></a>
</span><span id="CpModel.AddReservoirConstraint-1374"><a href="#CpModel.AddReservoirConstraint-1374"><span class="linenos">1374</span></a><span class="sd">     Note that min level must be &lt;= 0, and the max level must be &gt;= 0. Please</span>
</span><span id="CpModel.AddReservoirConstraint-1375"><a href="#CpModel.AddReservoirConstraint-1375"><span class="linenos">1375</span></a><span class="sd">     use fixed level_changes to simulate initial state.</span>
</span><span id="CpModel.AddReservoirConstraint-1376"><a href="#CpModel.AddReservoirConstraint-1376"><span class="linenos">1376</span></a>
</span><span id="CpModel.AddReservoirConstraint-1377"><a href="#CpModel.AddReservoirConstraint-1377"><span class="linenos">1377</span></a><span class="sd">     Therefore, at any time:</span>
</span><span id="CpModel.AddReservoirConstraint-1378"><a href="#CpModel.AddReservoirConstraint-1378"><span class="linenos">1378</span></a><span class="sd">         sum(level_changes[i] if times[i] &lt;= t) in [min_level, max_level]</span>
</span><span id="CpModel.AddReservoirConstraint-1379"><a href="#CpModel.AddReservoirConstraint-1379"><span class="linenos">1379</span></a>
</span><span id="CpModel.AddReservoirConstraint-1380"><a href="#CpModel.AddReservoirConstraint-1380"><span class="linenos">1380</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.AddReservoirConstraint-1381"><a href="#CpModel.AddReservoirConstraint-1381"><span class="linenos">1381</span></a><span class="sd">      times: A list of affine expressions which specify the time of the filling</span>
</span><span id="CpModel.AddReservoirConstraint-1382"><a href="#CpModel.AddReservoirConstraint-1382"><span class="linenos">1382</span></a><span class="sd">        or emptying the reservoir.</span>
</span><span id="CpModel.AddReservoirConstraint-1383"><a href="#CpModel.AddReservoirConstraint-1383"><span class="linenos">1383</span></a><span class="sd">      level_changes: A list of integer values that specifies the amount of the</span>
</span><span id="CpModel.AddReservoirConstraint-1384"><a href="#CpModel.AddReservoirConstraint-1384"><span class="linenos">1384</span></a><span class="sd">        emptying or filling.</span>
</span><span id="CpModel.AddReservoirConstraint-1385"><a href="#CpModel.AddReservoirConstraint-1385"><span class="linenos">1385</span></a><span class="sd">      min_level: At any time, the level of the reservoir must be greater or</span>
</span><span id="CpModel.AddReservoirConstraint-1386"><a href="#CpModel.AddReservoirConstraint-1386"><span class="linenos">1386</span></a><span class="sd">        equal than the min level.</span>
</span><span id="CpModel.AddReservoirConstraint-1387"><a href="#CpModel.AddReservoirConstraint-1387"><span class="linenos">1387</span></a><span class="sd">      max_level: At any time, the level of the reservoir must be less or equal</span>
</span><span id="CpModel.AddReservoirConstraint-1388"><a href="#CpModel.AddReservoirConstraint-1388"><span class="linenos">1388</span></a><span class="sd">        than the max level.</span>
</span><span id="CpModel.AddReservoirConstraint-1389"><a href="#CpModel.AddReservoirConstraint-1389"><span class="linenos">1389</span></a>
</span><span id="CpModel.AddReservoirConstraint-1390"><a href="#CpModel.AddReservoirConstraint-1390"><span class="linenos">1390</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.AddReservoirConstraint-1391"><a href="#CpModel.AddReservoirConstraint-1391"><span class="linenos">1391</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel.AddReservoirConstraint-1392"><a href="#CpModel.AddReservoirConstraint-1392"><span class="linenos">1392</span></a>
</span><span id="CpModel.AddReservoirConstraint-1393"><a href="#CpModel.AddReservoirConstraint-1393"><span class="linenos">1393</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel.AddReservoirConstraint-1394"><a href="#CpModel.AddReservoirConstraint-1394"><span class="linenos">1394</span></a><span class="sd">      ValueError: if max_level &lt; min_level.</span>
</span><span id="CpModel.AddReservoirConstraint-1395"><a href="#CpModel.AddReservoirConstraint-1395"><span class="linenos">1395</span></a>
</span><span id="CpModel.AddReservoirConstraint-1396"><a href="#CpModel.AddReservoirConstraint-1396"><span class="linenos">1396</span></a><span class="sd">      ValueError: if max_level &lt; 0.</span>
</span><span id="CpModel.AddReservoirConstraint-1397"><a href="#CpModel.AddReservoirConstraint-1397"><span class="linenos">1397</span></a>
</span><span id="CpModel.AddReservoirConstraint-1398"><a href="#CpModel.AddReservoirConstraint-1398"><span class="linenos">1398</span></a><span class="sd">      ValueError: if min_level &gt; 0</span>
</span><span id="CpModel.AddReservoirConstraint-1399"><a href="#CpModel.AddReservoirConstraint-1399"><span class="linenos">1399</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.AddReservoirConstraint-1400"><a href="#CpModel.AddReservoirConstraint-1400"><span class="linenos">1400</span></a>
</span><span id="CpModel.AddReservoirConstraint-1401"><a href="#CpModel.AddReservoirConstraint-1401"><span class="linenos">1401</span></a>        <span class="k">if</span> <span class="n">max_level</span> <span class="o">&lt;</span> <span class="n">min_level</span><span class="p">:</span>
</span><span id="CpModel.AddReservoirConstraint-1402"><a href="#CpModel.AddReservoirConstraint-1402"><span class="linenos">1402</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel.AddReservoirConstraint-1403"><a href="#CpModel.AddReservoirConstraint-1403"><span class="linenos">1403</span></a>                <span class="s1">&#39;Reservoir constraint must have a max_level &gt;= min_level&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddReservoirConstraint-1404"><a href="#CpModel.AddReservoirConstraint-1404"><span class="linenos">1404</span></a>
</span><span id="CpModel.AddReservoirConstraint-1405"><a href="#CpModel.AddReservoirConstraint-1405"><span class="linenos">1405</span></a>        <span class="k">if</span> <span class="n">max_level</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="CpModel.AddReservoirConstraint-1406"><a href="#CpModel.AddReservoirConstraint-1406"><span class="linenos">1406</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Reservoir constraint must have a max_level &gt;= 0&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddReservoirConstraint-1407"><a href="#CpModel.AddReservoirConstraint-1407"><span class="linenos">1407</span></a>
</span><span id="CpModel.AddReservoirConstraint-1408"><a href="#CpModel.AddReservoirConstraint-1408"><span class="linenos">1408</span></a>        <span class="k">if</span> <span class="n">min_level</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="CpModel.AddReservoirConstraint-1409"><a href="#CpModel.AddReservoirConstraint-1409"><span class="linenos">1409</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Reservoir constraint must have a min_level &lt;= 0&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddReservoirConstraint-1410"><a href="#CpModel.AddReservoirConstraint-1410"><span class="linenos">1410</span></a>
</span><span id="CpModel.AddReservoirConstraint-1411"><a href="#CpModel.AddReservoirConstraint-1411"><span class="linenos">1411</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddReservoirConstraint-1412"><a href="#CpModel.AddReservoirConstraint-1412"><span class="linenos">1412</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddReservoirConstraint-1413"><a href="#CpModel.AddReservoirConstraint-1413"><span class="linenos">1413</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">time_exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel.AddReservoirConstraint-1414"><a href="#CpModel.AddReservoirConstraint-1414"><span class="linenos">1414</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">times</span><span class="p">])</span>
</span><span id="CpModel.AddReservoirConstraint-1415"><a href="#CpModel.AddReservoirConstraint-1415"><span class="linenos">1415</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">level_changes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">level_changes</span><span class="p">)</span>
</span><span id="CpModel.AddReservoirConstraint-1416"><a href="#CpModel.AddReservoirConstraint-1416"><span class="linenos">1416</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">min_level</span> <span class="o">=</span> <span class="n">min_level</span>
</span><span id="CpModel.AddReservoirConstraint-1417"><a href="#CpModel.AddReservoirConstraint-1417"><span class="linenos">1417</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">max_level</span> <span class="o">=</span> <span class="n">max_level</span>
</span><span id="CpModel.AddReservoirConstraint-1418"><a href="#CpModel.AddReservoirConstraint-1418"><span class="linenos">1418</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds Reservoir(times, level_changes, min_level, max_level).</p>

<p>Maintains a reservoir level within bounds. The water level starts at 0, and
at any time, it must be between min_level and max_level.</p>

<p>If the affine expression <code>times[i]</code> is assigned a value t, then the current
level changes by <code>level_changes[i]</code>, which is constant, at time t.</p>

<p>Note that min level must be &lt;= 0, and the max level must be &gt;= 0. Please
 use fixed level_changes to simulate initial state.</p>

<p>Therefore, at any time:
     sum(level_changes[i] if times[i] &lt;= t) in [min_level, max_level]</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>times:</strong>  A list of affine expressions which specify the time of the filling
or emptying the reservoir.</li>
<li><strong>level_changes:</strong>  A list of integer values that specifies the amount of the
emptying or filling.</li>
<li><strong>min_level:</strong>  At any time, the level of the reservoir must be greater or
equal than the min level.</li>
<li><strong>max_level:</strong>  At any time, the level of the reservoir must be less or equal
than the max level.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An instance of the <code><a href="#Constraint">Constraint</a></code> class.</p>
</blockquote>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>ValueError:</strong>  if max_level &lt; min_level.</li>
<li><strong>ValueError:</strong>  if max_level &lt; 0.</li>
<li><strong>ValueError:</strong>  if min_level &gt; 0</li>
</ul>
</div>


                            </div>
                            <div id="CpModel.AddReservoirConstraintWithActive" class="classattr">
                                        <input id="CpModel.AddReservoirConstraintWithActive-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddReservoirConstraintWithActive</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">times</span>, </span><span class="param"><span class="n">level_changes</span>, </span><span class="param"><span class="n">actives</span>, </span><span class="param"><span class="n">min_level</span>, </span><span class="param"><span class="n">max_level</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddReservoirConstraintWithActive-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddReservoirConstraintWithActive"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddReservoirConstraintWithActive-1420"><a href="#CpModel.AddReservoirConstraintWithActive-1420"><span class="linenos">1420</span></a>    <span class="k">def</span> <span class="nf">AddReservoirConstraintWithActive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">times</span><span class="p">,</span> <span class="n">level_changes</span><span class="p">,</span> <span class="n">actives</span><span class="p">,</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1421"><a href="#CpModel.AddReservoirConstraintWithActive-1421"><span class="linenos">1421</span></a>                                         <span class="n">min_level</span><span class="p">,</span> <span class="n">max_level</span><span class="p">):</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1422"><a href="#CpModel.AddReservoirConstraintWithActive-1422"><span class="linenos">1422</span></a>        <span class="sd">&quot;&quot;&quot;Adds Reservoir(times, level_changes, actives, min_level, max_level).</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1423"><a href="#CpModel.AddReservoirConstraintWithActive-1423"><span class="linenos">1423</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1424"><a href="#CpModel.AddReservoirConstraintWithActive-1424"><span class="linenos">1424</span></a><span class="sd">    Maintains a reservoir level within bounds. The water level starts at 0, and</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1425"><a href="#CpModel.AddReservoirConstraintWithActive-1425"><span class="linenos">1425</span></a><span class="sd">    at any time, it must be between min_level and max_level.</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1426"><a href="#CpModel.AddReservoirConstraintWithActive-1426"><span class="linenos">1426</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1427"><a href="#CpModel.AddReservoirConstraintWithActive-1427"><span class="linenos">1427</span></a><span class="sd">    If the variable `times[i]` is assigned a value t, and `actives[i]` is</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1428"><a href="#CpModel.AddReservoirConstraintWithActive-1428"><span class="linenos">1428</span></a><span class="sd">    `True`, then the current level changes by `level_changes[i]`, which is</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1429"><a href="#CpModel.AddReservoirConstraintWithActive-1429"><span class="linenos">1429</span></a><span class="sd">    constant,</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1430"><a href="#CpModel.AddReservoirConstraintWithActive-1430"><span class="linenos">1430</span></a><span class="sd">    at time t.</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1431"><a href="#CpModel.AddReservoirConstraintWithActive-1431"><span class="linenos">1431</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1432"><a href="#CpModel.AddReservoirConstraintWithActive-1432"><span class="linenos">1432</span></a><span class="sd">     Note that min level must be &lt;= 0, and the max level must be &gt;= 0. Please</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1433"><a href="#CpModel.AddReservoirConstraintWithActive-1433"><span class="linenos">1433</span></a><span class="sd">     use fixed level_changes to simulate initial state.</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1434"><a href="#CpModel.AddReservoirConstraintWithActive-1434"><span class="linenos">1434</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1435"><a href="#CpModel.AddReservoirConstraintWithActive-1435"><span class="linenos">1435</span></a><span class="sd">     Therefore, at any time:</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1436"><a href="#CpModel.AddReservoirConstraintWithActive-1436"><span class="linenos">1436</span></a><span class="sd">         sum(level_changes[i] * actives[i] if times[i] &lt;= t) in [min_level,</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1437"><a href="#CpModel.AddReservoirConstraintWithActive-1437"><span class="linenos">1437</span></a><span class="sd">         max_level]</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1438"><a href="#CpModel.AddReservoirConstraintWithActive-1438"><span class="linenos">1438</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1439"><a href="#CpModel.AddReservoirConstraintWithActive-1439"><span class="linenos">1439</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1440"><a href="#CpModel.AddReservoirConstraintWithActive-1440"><span class="linenos">1440</span></a><span class="sd">    The array of boolean variables &#39;actives&#39;, if defined, indicates which</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1441"><a href="#CpModel.AddReservoirConstraintWithActive-1441"><span class="linenos">1441</span></a><span class="sd">    actions are actually performed.</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1442"><a href="#CpModel.AddReservoirConstraintWithActive-1442"><span class="linenos">1442</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1443"><a href="#CpModel.AddReservoirConstraintWithActive-1443"><span class="linenos">1443</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1444"><a href="#CpModel.AddReservoirConstraintWithActive-1444"><span class="linenos">1444</span></a><span class="sd">      times: A list of affine expressions which specify the time of the filling</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1445"><a href="#CpModel.AddReservoirConstraintWithActive-1445"><span class="linenos">1445</span></a><span class="sd">        or emptying the reservoir.</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1446"><a href="#CpModel.AddReservoirConstraintWithActive-1446"><span class="linenos">1446</span></a><span class="sd">      level_changes: A list of integer values that specifies the amount of the</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1447"><a href="#CpModel.AddReservoirConstraintWithActive-1447"><span class="linenos">1447</span></a><span class="sd">        emptying or filling.</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1448"><a href="#CpModel.AddReservoirConstraintWithActive-1448"><span class="linenos">1448</span></a><span class="sd">      actives: a list of boolean variables. They indicates if the</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1449"><a href="#CpModel.AddReservoirConstraintWithActive-1449"><span class="linenos">1449</span></a><span class="sd">        emptying/refilling events actually take place.</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1450"><a href="#CpModel.AddReservoirConstraintWithActive-1450"><span class="linenos">1450</span></a><span class="sd">      min_level: At any time, the level of the reservoir must be greater or</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1451"><a href="#CpModel.AddReservoirConstraintWithActive-1451"><span class="linenos">1451</span></a><span class="sd">        equal than the min level.</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1452"><a href="#CpModel.AddReservoirConstraintWithActive-1452"><span class="linenos">1452</span></a><span class="sd">      max_level: At any time, the level of the reservoir must be less or equal</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1453"><a href="#CpModel.AddReservoirConstraintWithActive-1453"><span class="linenos">1453</span></a><span class="sd">        than the max level.</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1454"><a href="#CpModel.AddReservoirConstraintWithActive-1454"><span class="linenos">1454</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1455"><a href="#CpModel.AddReservoirConstraintWithActive-1455"><span class="linenos">1455</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1456"><a href="#CpModel.AddReservoirConstraintWithActive-1456"><span class="linenos">1456</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1457"><a href="#CpModel.AddReservoirConstraintWithActive-1457"><span class="linenos">1457</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1458"><a href="#CpModel.AddReservoirConstraintWithActive-1458"><span class="linenos">1458</span></a><span class="sd">    Raises:</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1459"><a href="#CpModel.AddReservoirConstraintWithActive-1459"><span class="linenos">1459</span></a><span class="sd">      ValueError: if max_level &lt; min_level.</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1460"><a href="#CpModel.AddReservoirConstraintWithActive-1460"><span class="linenos">1460</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1461"><a href="#CpModel.AddReservoirConstraintWithActive-1461"><span class="linenos">1461</span></a><span class="sd">      ValueError: if max_level &lt; 0.</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1462"><a href="#CpModel.AddReservoirConstraintWithActive-1462"><span class="linenos">1462</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1463"><a href="#CpModel.AddReservoirConstraintWithActive-1463"><span class="linenos">1463</span></a><span class="sd">      ValueError: if min_level &gt; 0</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1464"><a href="#CpModel.AddReservoirConstraintWithActive-1464"><span class="linenos">1464</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1465"><a href="#CpModel.AddReservoirConstraintWithActive-1465"><span class="linenos">1465</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1466"><a href="#CpModel.AddReservoirConstraintWithActive-1466"><span class="linenos">1466</span></a>        <span class="k">if</span> <span class="n">max_level</span> <span class="o">&lt;</span> <span class="n">min_level</span><span class="p">:</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1467"><a href="#CpModel.AddReservoirConstraintWithActive-1467"><span class="linenos">1467</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1468"><a href="#CpModel.AddReservoirConstraintWithActive-1468"><span class="linenos">1468</span></a>                <span class="s1">&#39;Reservoir constraint must have a max_level &gt;= min_level&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1469"><a href="#CpModel.AddReservoirConstraintWithActive-1469"><span class="linenos">1469</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1470"><a href="#CpModel.AddReservoirConstraintWithActive-1470"><span class="linenos">1470</span></a>        <span class="k">if</span> <span class="n">max_level</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1471"><a href="#CpModel.AddReservoirConstraintWithActive-1471"><span class="linenos">1471</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Reservoir constraint must have a max_level &gt;= 0&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1472"><a href="#CpModel.AddReservoirConstraintWithActive-1472"><span class="linenos">1472</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1473"><a href="#CpModel.AddReservoirConstraintWithActive-1473"><span class="linenos">1473</span></a>        <span class="k">if</span> <span class="n">min_level</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1474"><a href="#CpModel.AddReservoirConstraintWithActive-1474"><span class="linenos">1474</span></a>            <span class="k">return</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Reservoir constraint must have a min_level &lt;= 0&#39;</span><span class="p">)</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1475"><a href="#CpModel.AddReservoirConstraintWithActive-1475"><span class="linenos">1475</span></a>
</span><span id="CpModel.AddReservoirConstraintWithActive-1476"><a href="#CpModel.AddReservoirConstraintWithActive-1476"><span class="linenos">1476</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1477"><a href="#CpModel.AddReservoirConstraintWithActive-1477"><span class="linenos">1477</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1478"><a href="#CpModel.AddReservoirConstraintWithActive-1478"><span class="linenos">1478</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">time_exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1479"><a href="#CpModel.AddReservoirConstraintWithActive-1479"><span class="linenos">1479</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">times</span><span class="p">])</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1480"><a href="#CpModel.AddReservoirConstraintWithActive-1480"><span class="linenos">1480</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">level_changes</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">level_changes</span><span class="p">)</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1481"><a href="#CpModel.AddReservoirConstraintWithActive-1481"><span class="linenos">1481</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">active_literals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1482"><a href="#CpModel.AddReservoirConstraintWithActive-1482"><span class="linenos">1482</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">actives</span><span class="p">])</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1483"><a href="#CpModel.AddReservoirConstraintWithActive-1483"><span class="linenos">1483</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">min_level</span> <span class="o">=</span> <span class="n">min_level</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1484"><a href="#CpModel.AddReservoirConstraintWithActive-1484"><span class="linenos">1484</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">reservoir</span><span class="o">.</span><span class="n">max_level</span> <span class="o">=</span> <span class="n">max_level</span>
</span><span id="CpModel.AddReservoirConstraintWithActive-1485"><a href="#CpModel.AddReservoirConstraintWithActive-1485"><span class="linenos">1485</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds Reservoir(times, level_changes, actives, min_level, max_level).</p>

<p>Maintains a reservoir level within bounds. The water level starts at 0, and
at any time, it must be between min_level and max_level.</p>

<p>If the variable <code>times[i]</code> is assigned a value t, and <code>actives[i]</code> is
<code>True</code>, then the current level changes by <code>level_changes[i]</code>, which is
constant,
at time t.</p>

<p>Note that min level must be &lt;= 0, and the max level must be &gt;= 0. Please
 use fixed level_changes to simulate initial state.</p>

<p>Therefore, at any time:
     sum(level_changes[i] * actives[i] if times[i] &lt;= t) in [min_level,
     max_level]</p>

<p>The array of boolean variables 'actives', if defined, indicates which
actions are actually performed.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>times:</strong>  A list of affine expressions which specify the time of the filling
or emptying the reservoir.</li>
<li><strong>level_changes:</strong>  A list of integer values that specifies the amount of the
emptying or filling.</li>
<li><strong>actives:</strong>  a list of boolean variables. They indicates if the
emptying/refilling events actually take place.</li>
<li><strong>min_level:</strong>  At any time, the level of the reservoir must be greater or
equal than the min level.</li>
<li><strong>max_level:</strong>  At any time, the level of the reservoir must be less or equal
than the max level.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An instance of the <code><a href="#Constraint">Constraint</a></code> class.</p>
</blockquote>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>ValueError:</strong>  if max_level &lt; min_level.</li>
<li><strong>ValueError:</strong>  if max_level &lt; 0.</li>
<li><strong>ValueError:</strong>  if min_level &gt; 0</li>
</ul>
</div>


                            </div>
                            <div id="CpModel.AddMapDomain" class="classattr">
                                        <input id="CpModel.AddMapDomain-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddMapDomain</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">var</span>, </span><span class="param"><span class="n">bool_var_array</span>, </span><span class="param"><span class="n">offset</span><span class="o">=</span><span class="mi">0</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddMapDomain-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddMapDomain"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddMapDomain-1487"><a href="#CpModel.AddMapDomain-1487"><span class="linenos">1487</span></a>    <span class="k">def</span> <span class="nf">AddMapDomain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">bool_var_array</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="CpModel.AddMapDomain-1488"><a href="#CpModel.AddMapDomain-1488"><span class="linenos">1488</span></a>        <span class="sd">&quot;&quot;&quot;Adds `var == i + offset &lt;=&gt; bool_var_array[i] == true for all i`.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddMapDomain-1489"><a href="#CpModel.AddMapDomain-1489"><span class="linenos">1489</span></a>
</span><span id="CpModel.AddMapDomain-1490"><a href="#CpModel.AddMapDomain-1490"><span class="linenos">1490</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bool_var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bool_var_array</span><span class="p">):</span>
</span><span id="CpModel.AddMapDomain-1491"><a href="#CpModel.AddMapDomain-1491"><span class="linenos">1491</span></a>            <span class="n">b_index</span> <span class="o">=</span> <span class="n">bool_var</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="CpModel.AddMapDomain-1492"><a href="#CpModel.AddMapDomain-1492"><span class="linenos">1492</span></a>            <span class="n">var_index</span> <span class="o">=</span> <span class="n">var</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="CpModel.AddMapDomain-1493"><a href="#CpModel.AddMapDomain-1493"><span class="linenos">1493</span></a>            <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="CpModel.AddMapDomain-1494"><a href="#CpModel.AddMapDomain-1494"><span class="linenos">1494</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var_index</span><span class="p">)</span>
</span><span id="CpModel.AddMapDomain-1495"><a href="#CpModel.AddMapDomain-1495"><span class="linenos">1495</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="CpModel.AddMapDomain-1496"><a href="#CpModel.AddMapDomain-1496"><span class="linenos">1496</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">offset</span> <span class="o">+</span> <span class="n">i</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">i</span><span class="p">])</span>
</span><span id="CpModel.AddMapDomain-1497"><a href="#CpModel.AddMapDomain-1497"><span class="linenos">1497</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b_index</span><span class="p">)</span>
</span><span id="CpModel.AddMapDomain-1498"><a href="#CpModel.AddMapDomain-1498"><span class="linenos">1498</span></a>
</span><span id="CpModel.AddMapDomain-1499"><a href="#CpModel.AddMapDomain-1499"><span class="linenos">1499</span></a>            <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="CpModel.AddMapDomain-1500"><a href="#CpModel.AddMapDomain-1500"><span class="linenos">1500</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">var_index</span><span class="p">)</span>
</span><span id="CpModel.AddMapDomain-1501"><a href="#CpModel.AddMapDomain-1501"><span class="linenos">1501</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="CpModel.AddMapDomain-1502"><a href="#CpModel.AddMapDomain-1502"><span class="linenos">1502</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="o">-</span><span class="n">b_index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="CpModel.AddMapDomain-1503"><a href="#CpModel.AddMapDomain-1503"><span class="linenos">1503</span></a>            <span class="k">if</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;=</span> <span class="n">INT_MIN</span><span class="p">:</span>
</span><span id="CpModel.AddMapDomain-1504"><a href="#CpModel.AddMapDomain-1504"><span class="linenos">1504</span></a>                <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">INT_MIN</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
</span><span id="CpModel.AddMapDomain-1505"><a href="#CpModel.AddMapDomain-1505"><span class="linenos">1505</span></a>            <span class="k">if</span> <span class="n">offset</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">INT_MAX</span><span class="p">:</span>
</span><span id="CpModel.AddMapDomain-1506"><a href="#CpModel.AddMapDomain-1506"><span class="linenos">1506</span></a>                <span class="n">model_ct</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">offset</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">INT_MAX</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>Adds <code>var == i + offset &lt;=&gt; bool_var_array[i] == true for all i</code>.</p>
</div>


                            </div>
                            <div id="CpModel.AddImplication" class="classattr">
                                        <input id="CpModel.AddImplication-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddImplication</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">a</span>, </span><span class="param"><span class="n">b</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddImplication-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddImplication"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddImplication-1508"><a href="#CpModel.AddImplication-1508"><span class="linenos">1508</span></a>    <span class="k">def</span> <span class="nf">AddImplication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
</span><span id="CpModel.AddImplication-1509"><a href="#CpModel.AddImplication-1509"><span class="linenos">1509</span></a>        <span class="sd">&quot;&quot;&quot;Adds `a =&gt; b` (`a` implies `b`).&quot;&quot;&quot;</span>
</span><span id="CpModel.AddImplication-1510"><a href="#CpModel.AddImplication-1510"><span class="linenos">1510</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddImplication-1511"><a href="#CpModel.AddImplication-1511"><span class="linenos">1511</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddImplication-1512"><a href="#CpModel.AddImplication-1512"><span class="linenos">1512</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">bool_or</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
</span><span id="CpModel.AddImplication-1513"><a href="#CpModel.AddImplication-1513"><span class="linenos">1513</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">enforcement_literal</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
</span><span id="CpModel.AddImplication-1514"><a href="#CpModel.AddImplication-1514"><span class="linenos">1514</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds <code>a =&gt; b</code> (<code>a</code> implies <code>b</code>).</p>
</div>


                            </div>
                            <div id="CpModel.AddBoolOr" class="classattr">
                                        <input id="CpModel.AddBoolOr-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddBoolOr</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">literals</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddBoolOr-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddBoolOr"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddBoolOr-1516"><a href="#CpModel.AddBoolOr-1516"><span class="linenos">1516</span></a>    <span class="k">def</span> <span class="nf">AddBoolOr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="CpModel.AddBoolOr-1517"><a href="#CpModel.AddBoolOr-1517"><span class="linenos">1517</span></a>        <span class="sd">&quot;&quot;&quot;Adds `Or(literals) == true`: Sum(literals) &gt;= 1.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddBoolOr-1518"><a href="#CpModel.AddBoolOr-1518"><span class="linenos">1518</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddBoolOr-1519"><a href="#CpModel.AddBoolOr-1519"><span class="linenos">1519</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddBoolOr-1520"><a href="#CpModel.AddBoolOr-1520"><span class="linenos">1520</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">bool_or</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="CpModel.AddBoolOr-1521"><a href="#CpModel.AddBoolOr-1521"><span class="linenos">1521</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="CpModel.AddBoolOr-1522"><a href="#CpModel.AddBoolOr-1522"><span class="linenos">1522</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="CpModel.AddBoolOr-1523"><a href="#CpModel.AddBoolOr-1523"><span class="linenos">1523</span></a>        <span class="p">])</span>
</span><span id="CpModel.AddBoolOr-1524"><a href="#CpModel.AddBoolOr-1524"><span class="linenos">1524</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds <code>Or(literals) == true</code>: Sum(literals) &gt;= 1.</p>
</div>


                            </div>
                            <div id="CpModel.AddAtLeastOne" class="classattr">
                                        <input id="CpModel.AddAtLeastOne-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddAtLeastOne</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">literals</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddAtLeastOne-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddAtLeastOne"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddAtLeastOne-1526"><a href="#CpModel.AddAtLeastOne-1526"><span class="linenos">1526</span></a>    <span class="k">def</span> <span class="nf">AddAtLeastOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="CpModel.AddAtLeastOne-1527"><a href="#CpModel.AddAtLeastOne-1527"><span class="linenos">1527</span></a>        <span class="sd">&quot;&quot;&quot;Same as `AddBoolOr`: `Sum(literals) &gt;= 1`.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddAtLeastOne-1528"><a href="#CpModel.AddAtLeastOne-1528"><span class="linenos">1528</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">AddBoolOr</span><span class="p">(</span><span class="o">*</span><span class="n">literals</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Same as <code><a href="#CpModel.AddBoolOr">AddBoolOr</a></code>: <code>Sum(literals) &gt;= 1</code>.</p>
</div>


                            </div>
                            <div id="CpModel.AddAtMostOne" class="classattr">
                                        <input id="CpModel.AddAtMostOne-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddAtMostOne</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">literals</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddAtMostOne-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddAtMostOne"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddAtMostOne-1530"><a href="#CpModel.AddAtMostOne-1530"><span class="linenos">1530</span></a>    <span class="k">def</span> <span class="nf">AddAtMostOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="CpModel.AddAtMostOne-1531"><a href="#CpModel.AddAtMostOne-1531"><span class="linenos">1531</span></a>        <span class="sd">&quot;&quot;&quot;Adds `AtMostOne(literals)`: `Sum(literals) &lt;= 1`.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddAtMostOne-1532"><a href="#CpModel.AddAtMostOne-1532"><span class="linenos">1532</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddAtMostOne-1533"><a href="#CpModel.AddAtMostOne-1533"><span class="linenos">1533</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddAtMostOne-1534"><a href="#CpModel.AddAtMostOne-1534"><span class="linenos">1534</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">at_most_one</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="CpModel.AddAtMostOne-1535"><a href="#CpModel.AddAtMostOne-1535"><span class="linenos">1535</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="CpModel.AddAtMostOne-1536"><a href="#CpModel.AddAtMostOne-1536"><span class="linenos">1536</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="CpModel.AddAtMostOne-1537"><a href="#CpModel.AddAtMostOne-1537"><span class="linenos">1537</span></a>        <span class="p">])</span>
</span><span id="CpModel.AddAtMostOne-1538"><a href="#CpModel.AddAtMostOne-1538"><span class="linenos">1538</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds <code>AtMostOne(literals)</code>: <code>Sum(literals) &lt;= 1</code>.</p>
</div>


                            </div>
                            <div id="CpModel.AddExactlyOne" class="classattr">
                                        <input id="CpModel.AddExactlyOne-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddExactlyOne</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">literals</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddExactlyOne-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddExactlyOne"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddExactlyOne-1540"><a href="#CpModel.AddExactlyOne-1540"><span class="linenos">1540</span></a>    <span class="k">def</span> <span class="nf">AddExactlyOne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="CpModel.AddExactlyOne-1541"><a href="#CpModel.AddExactlyOne-1541"><span class="linenos">1541</span></a>        <span class="sd">&quot;&quot;&quot;Adds `ExactlyOne(literals)`: `Sum(literals) == 1`.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddExactlyOne-1542"><a href="#CpModel.AddExactlyOne-1542"><span class="linenos">1542</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddExactlyOne-1543"><a href="#CpModel.AddExactlyOne-1543"><span class="linenos">1543</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddExactlyOne-1544"><a href="#CpModel.AddExactlyOne-1544"><span class="linenos">1544</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">exactly_one</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="CpModel.AddExactlyOne-1545"><a href="#CpModel.AddExactlyOne-1545"><span class="linenos">1545</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="CpModel.AddExactlyOne-1546"><a href="#CpModel.AddExactlyOne-1546"><span class="linenos">1546</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="CpModel.AddExactlyOne-1547"><a href="#CpModel.AddExactlyOne-1547"><span class="linenos">1547</span></a>        <span class="p">])</span>
</span><span id="CpModel.AddExactlyOne-1548"><a href="#CpModel.AddExactlyOne-1548"><span class="linenos">1548</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds <code>ExactlyOne(literals)</code>: <code>Sum(literals) == 1</code>.</p>
</div>


                            </div>
                            <div id="CpModel.AddBoolAnd" class="classattr">
                                        <input id="CpModel.AddBoolAnd-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddBoolAnd</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">literals</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddBoolAnd-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddBoolAnd"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddBoolAnd-1550"><a href="#CpModel.AddBoolAnd-1550"><span class="linenos">1550</span></a>    <span class="k">def</span> <span class="nf">AddBoolAnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="CpModel.AddBoolAnd-1551"><a href="#CpModel.AddBoolAnd-1551"><span class="linenos">1551</span></a>        <span class="sd">&quot;&quot;&quot;Adds `And(literals) == true`.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddBoolAnd-1552"><a href="#CpModel.AddBoolAnd-1552"><span class="linenos">1552</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddBoolAnd-1553"><a href="#CpModel.AddBoolAnd-1553"><span class="linenos">1553</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddBoolAnd-1554"><a href="#CpModel.AddBoolAnd-1554"><span class="linenos">1554</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">bool_and</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="CpModel.AddBoolAnd-1555"><a href="#CpModel.AddBoolAnd-1555"><span class="linenos">1555</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="CpModel.AddBoolAnd-1556"><a href="#CpModel.AddBoolAnd-1556"><span class="linenos">1556</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="CpModel.AddBoolAnd-1557"><a href="#CpModel.AddBoolAnd-1557"><span class="linenos">1557</span></a>        <span class="p">])</span>
</span><span id="CpModel.AddBoolAnd-1558"><a href="#CpModel.AddBoolAnd-1558"><span class="linenos">1558</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds <code>And(literals) == true</code>.</p>
</div>


                            </div>
                            <div id="CpModel.AddBoolXOr" class="classattr">
                                        <input id="CpModel.AddBoolXOr-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddBoolXOr</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span><span class="n">literals</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddBoolXOr-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddBoolXOr"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddBoolXOr-1560"><a href="#CpModel.AddBoolXOr-1560"><span class="linenos">1560</span></a>    <span class="k">def</span> <span class="nf">AddBoolXOr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">literals</span><span class="p">):</span>
</span><span id="CpModel.AddBoolXOr-1561"><a href="#CpModel.AddBoolXOr-1561"><span class="linenos">1561</span></a>        <span class="sd">&quot;&quot;&quot;Adds `XOr(literals) == true`.</span>
</span><span id="CpModel.AddBoolXOr-1562"><a href="#CpModel.AddBoolXOr-1562"><span class="linenos">1562</span></a>
</span><span id="CpModel.AddBoolXOr-1563"><a href="#CpModel.AddBoolXOr-1563"><span class="linenos">1563</span></a><span class="sd">    In contrast to AddBoolOr and AddBoolAnd, it does not support</span>
</span><span id="CpModel.AddBoolXOr-1564"><a href="#CpModel.AddBoolXOr-1564"><span class="linenos">1564</span></a><span class="sd">        .OnlyEnforceIf().</span>
</span><span id="CpModel.AddBoolXOr-1565"><a href="#CpModel.AddBoolXOr-1565"><span class="linenos">1565</span></a>
</span><span id="CpModel.AddBoolXOr-1566"><a href="#CpModel.AddBoolXOr-1566"><span class="linenos">1566</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.AddBoolXOr-1567"><a href="#CpModel.AddBoolXOr-1567"><span class="linenos">1567</span></a><span class="sd">      *literals: the list of literals in the constraint.</span>
</span><span id="CpModel.AddBoolXOr-1568"><a href="#CpModel.AddBoolXOr-1568"><span class="linenos">1568</span></a>
</span><span id="CpModel.AddBoolXOr-1569"><a href="#CpModel.AddBoolXOr-1569"><span class="linenos">1569</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.AddBoolXOr-1570"><a href="#CpModel.AddBoolXOr-1570"><span class="linenos">1570</span></a><span class="sd">      An `Constraint` object.</span>
</span><span id="CpModel.AddBoolXOr-1571"><a href="#CpModel.AddBoolXOr-1571"><span class="linenos">1571</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.AddBoolXOr-1572"><a href="#CpModel.AddBoolXOr-1572"><span class="linenos">1572</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddBoolXOr-1573"><a href="#CpModel.AddBoolXOr-1573"><span class="linenos">1573</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddBoolXOr-1574"><a href="#CpModel.AddBoolXOr-1574"><span class="linenos">1574</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">bool_xor</span><span class="o">.</span><span class="n">literals</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="CpModel.AddBoolXOr-1575"><a href="#CpModel.AddBoolXOr-1575"><span class="linenos">1575</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="CpModel.AddBoolXOr-1576"><a href="#CpModel.AddBoolXOr-1576"><span class="linenos">1576</span></a>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">literals</span><span class="p">)</span>
</span><span id="CpModel.AddBoolXOr-1577"><a href="#CpModel.AddBoolXOr-1577"><span class="linenos">1577</span></a>        <span class="p">])</span>
</span><span id="CpModel.AddBoolXOr-1578"><a href="#CpModel.AddBoolXOr-1578"><span class="linenos">1578</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds <code>XOr(literals) == true</code>.</p>

<p>In contrast to AddBoolOr and AddBoolAnd, it does not support
    .OnlyEnforceIf().</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>*literals:</strong>  the list of literals in the constraint.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An <code><a href="#Constraint">Constraint</a></code> object.</p>
</blockquote>
</div>


                            </div>
                            <div id="CpModel.AddMinEquality" class="classattr">
                                        <input id="CpModel.AddMinEquality-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddMinEquality</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target</span>, </span><span class="param"><span class="n">exprs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddMinEquality-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddMinEquality"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddMinEquality-1580"><a href="#CpModel.AddMinEquality-1580"><span class="linenos">1580</span></a>    <span class="k">def</span> <span class="nf">AddMinEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">exprs</span><span class="p">):</span>
</span><span id="CpModel.AddMinEquality-1581"><a href="#CpModel.AddMinEquality-1581"><span class="linenos">1581</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == Min(exprs)`.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddMinEquality-1582"><a href="#CpModel.AddMinEquality-1582"><span class="linenos">1582</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddMinEquality-1583"><a href="#CpModel.AddMinEquality-1583"><span class="linenos">1583</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddMinEquality-1584"><a href="#CpModel.AddMinEquality-1584"><span class="linenos">1584</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel.AddMinEquality-1585"><a href="#CpModel.AddMinEquality-1585"><span class="linenos">1585</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">exprs</span><span class="p">])</span>
</span><span id="CpModel.AddMinEquality-1586"><a href="#CpModel.AddMinEquality-1586"><span class="linenos">1586</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span>
</span><span id="CpModel.AddMinEquality-1587"><a href="#CpModel.AddMinEquality-1587"><span class="linenos">1587</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
</span><span id="CpModel.AddMinEquality-1588"><a href="#CpModel.AddMinEquality-1588"><span class="linenos">1588</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds <code>target == Min(exprs)</code>.</p>
</div>


                            </div>
                            <div id="CpModel.AddMaxEquality" class="classattr">
                                        <input id="CpModel.AddMaxEquality-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddMaxEquality</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target</span>, </span><span class="param"><span class="n">exprs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddMaxEquality-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddMaxEquality"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddMaxEquality-1590"><a href="#CpModel.AddMaxEquality-1590"><span class="linenos">1590</span></a>    <span class="k">def</span> <span class="nf">AddMaxEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">exprs</span><span class="p">):</span>
</span><span id="CpModel.AddMaxEquality-1591"><a href="#CpModel.AddMaxEquality-1591"><span class="linenos">1591</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == Max(exprs)`.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddMaxEquality-1592"><a href="#CpModel.AddMaxEquality-1592"><span class="linenos">1592</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddMaxEquality-1593"><a href="#CpModel.AddMaxEquality-1593"><span class="linenos">1593</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddMaxEquality-1594"><a href="#CpModel.AddMaxEquality-1594"><span class="linenos">1594</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel.AddMaxEquality-1595"><a href="#CpModel.AddMaxEquality-1595"><span class="linenos">1595</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">exprs</span><span class="p">])</span>
</span><span id="CpModel.AddMaxEquality-1596"><a href="#CpModel.AddMaxEquality-1596"><span class="linenos">1596</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="CpModel.AddMaxEquality-1597"><a href="#CpModel.AddMaxEquality-1597"><span class="linenos">1597</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds <code>target == Max(exprs)</code>.</p>
</div>


                            </div>
                            <div id="CpModel.AddDivisionEquality" class="classattr">
                                        <input id="CpModel.AddDivisionEquality-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddDivisionEquality</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target</span>, </span><span class="param"><span class="n">num</span>, </span><span class="param"><span class="n">denom</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddDivisionEquality-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddDivisionEquality"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddDivisionEquality-1599"><a href="#CpModel.AddDivisionEquality-1599"><span class="linenos">1599</span></a>    <span class="k">def</span> <span class="nf">AddDivisionEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">num</span><span class="p">,</span> <span class="n">denom</span><span class="p">):</span>
</span><span id="CpModel.AddDivisionEquality-1600"><a href="#CpModel.AddDivisionEquality-1600"><span class="linenos">1600</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == num // denom` (integer division rounded towards 0).&quot;&quot;&quot;</span>
</span><span id="CpModel.AddDivisionEquality-1601"><a href="#CpModel.AddDivisionEquality-1601"><span class="linenos">1601</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddDivisionEquality-1602"><a href="#CpModel.AddDivisionEquality-1602"><span class="linenos">1602</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddDivisionEquality-1603"><a href="#CpModel.AddDivisionEquality-1603"><span class="linenos">1603</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_div</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
</span><span id="CpModel.AddDivisionEquality-1604"><a href="#CpModel.AddDivisionEquality-1604"><span class="linenos">1604</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_div</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">denom</span><span class="p">))</span>
</span><span id="CpModel.AddDivisionEquality-1605"><a href="#CpModel.AddDivisionEquality-1605"><span class="linenos">1605</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_div</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="CpModel.AddDivisionEquality-1606"><a href="#CpModel.AddDivisionEquality-1606"><span class="linenos">1606</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds <code>target == num // denom</code> (integer division rounded towards 0).</p>
</div>


                            </div>
                            <div id="CpModel.AddAbsEquality" class="classattr">
                                        <input id="CpModel.AddAbsEquality-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddAbsEquality</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target</span>, </span><span class="param"><span class="n">expr</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddAbsEquality-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddAbsEquality"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddAbsEquality-1608"><a href="#CpModel.AddAbsEquality-1608"><span class="linenos">1608</span></a>    <span class="k">def</span> <span class="nf">AddAbsEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">expr</span><span class="p">):</span>
</span><span id="CpModel.AddAbsEquality-1609"><a href="#CpModel.AddAbsEquality-1609"><span class="linenos">1609</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == Abs(var)`.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddAbsEquality-1610"><a href="#CpModel.AddAbsEquality-1610"><span class="linenos">1610</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddAbsEquality-1611"><a href="#CpModel.AddAbsEquality-1611"><span class="linenos">1611</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddAbsEquality-1612"><a href="#CpModel.AddAbsEquality-1612"><span class="linenos">1612</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
</span><span id="CpModel.AddAbsEquality-1613"><a href="#CpModel.AddAbsEquality-1613"><span class="linenos">1613</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="kc">True</span><span class="p">))</span>
</span><span id="CpModel.AddAbsEquality-1614"><a href="#CpModel.AddAbsEquality-1614"><span class="linenos">1614</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">lin_max</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="CpModel.AddAbsEquality-1615"><a href="#CpModel.AddAbsEquality-1615"><span class="linenos">1615</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds <code>target == Abs(var)</code>.</p>
</div>


                            </div>
                            <div id="CpModel.AddModuloEquality" class="classattr">
                                        <input id="CpModel.AddModuloEquality-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddModuloEquality</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target</span>, </span><span class="param"><span class="n">var</span>, </span><span class="param"><span class="n">mod</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddModuloEquality-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddModuloEquality"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddModuloEquality-1617"><a href="#CpModel.AddModuloEquality-1617"><span class="linenos">1617</span></a>    <span class="k">def</span> <span class="nf">AddModuloEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">mod</span><span class="p">):</span>
</span><span id="CpModel.AddModuloEquality-1618"><a href="#CpModel.AddModuloEquality-1618"><span class="linenos">1618</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target = var % mod`.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddModuloEquality-1619"><a href="#CpModel.AddModuloEquality-1619"><span class="linenos">1619</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddModuloEquality-1620"><a href="#CpModel.AddModuloEquality-1620"><span class="linenos">1620</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddModuloEquality-1621"><a href="#CpModel.AddModuloEquality-1621"><span class="linenos">1621</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_mod</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
</span><span id="CpModel.AddModuloEquality-1622"><a href="#CpModel.AddModuloEquality-1622"><span class="linenos">1622</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_mod</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">mod</span><span class="p">))</span>
</span><span id="CpModel.AddModuloEquality-1623"><a href="#CpModel.AddModuloEquality-1623"><span class="linenos">1623</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_mod</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="CpModel.AddModuloEquality-1624"><a href="#CpModel.AddModuloEquality-1624"><span class="linenos">1624</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds <code>target = var % mod</code>.</p>
</div>


                            </div>
                            <div id="CpModel.AddMultiplicationEquality" class="classattr">
                                        <input id="CpModel.AddMultiplicationEquality-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddMultiplicationEquality</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">target</span>, </span><span class="param"><span class="o">*</span><span class="n">expressions</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddMultiplicationEquality-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddMultiplicationEquality"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddMultiplicationEquality-1626"><a href="#CpModel.AddMultiplicationEquality-1626"><span class="linenos">1626</span></a>    <span class="k">def</span> <span class="nf">AddMultiplicationEquality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="o">*</span><span class="n">expressions</span><span class="p">):</span>
</span><span id="CpModel.AddMultiplicationEquality-1627"><a href="#CpModel.AddMultiplicationEquality-1627"><span class="linenos">1627</span></a>        <span class="sd">&quot;&quot;&quot;Adds `target == expressions[0] * .. * expressions[n]`.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddMultiplicationEquality-1628"><a href="#CpModel.AddMultiplicationEquality-1628"><span class="linenos">1628</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddMultiplicationEquality-1629"><a href="#CpModel.AddMultiplicationEquality-1629"><span class="linenos">1629</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddMultiplicationEquality-1630"><a href="#CpModel.AddMultiplicationEquality-1630"><span class="linenos">1630</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_prod</span><span class="o">.</span><span class="n">exprs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span>
</span><span id="CpModel.AddMultiplicationEquality-1631"><a href="#CpModel.AddMultiplicationEquality-1631"><span class="linenos">1631</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="CpModel.AddMultiplicationEquality-1632"><a href="#CpModel.AddMultiplicationEquality-1632"><span class="linenos">1632</span></a>            <span class="k">for</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">expressions</span><span class="p">)</span>
</span><span id="CpModel.AddMultiplicationEquality-1633"><a href="#CpModel.AddMultiplicationEquality-1633"><span class="linenos">1633</span></a>        <span class="p">])</span>
</span><span id="CpModel.AddMultiplicationEquality-1634"><a href="#CpModel.AddMultiplicationEquality-1634"><span class="linenos">1634</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">int_prod</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>
</span><span id="CpModel.AddMultiplicationEquality-1635"><a href="#CpModel.AddMultiplicationEquality-1635"><span class="linenos">1635</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds <code>target == expressions[0] * .. * expressions[n]</code>.</p>
</div>


                            </div>
                            <div id="CpModel.NewIntervalVar" class="classattr">
                                        <input id="CpModel.NewIntervalVar-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">NewIntervalVar</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">start</span>, </span><span class="param"><span class="n">size</span>, </span><span class="param"><span class="n">end</span>, </span><span class="param"><span class="n">name</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.NewIntervalVar-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.NewIntervalVar"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.NewIntervalVar-1639"><a href="#CpModel.NewIntervalVar-1639"><span class="linenos">1639</span></a>    <span class="k">def</span> <span class="nf">NewIntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel.NewIntervalVar-1640"><a href="#CpModel.NewIntervalVar-1640"><span class="linenos">1640</span></a>        <span class="sd">&quot;&quot;&quot;Creates an interval variable from start, size, and end.</span>
</span><span id="CpModel.NewIntervalVar-1641"><a href="#CpModel.NewIntervalVar-1641"><span class="linenos">1641</span></a>
</span><span id="CpModel.NewIntervalVar-1642"><a href="#CpModel.NewIntervalVar-1642"><span class="linenos">1642</span></a><span class="sd">    An interval variable is a constraint, that is itself used in other</span>
</span><span id="CpModel.NewIntervalVar-1643"><a href="#CpModel.NewIntervalVar-1643"><span class="linenos">1643</span></a><span class="sd">    constraints like NoOverlap.</span>
</span><span id="CpModel.NewIntervalVar-1644"><a href="#CpModel.NewIntervalVar-1644"><span class="linenos">1644</span></a>
</span><span id="CpModel.NewIntervalVar-1645"><a href="#CpModel.NewIntervalVar-1645"><span class="linenos">1645</span></a><span class="sd">    Internally, it ensures that `start + size == end`.</span>
</span><span id="CpModel.NewIntervalVar-1646"><a href="#CpModel.NewIntervalVar-1646"><span class="linenos">1646</span></a>
</span><span id="CpModel.NewIntervalVar-1647"><a href="#CpModel.NewIntervalVar-1647"><span class="linenos">1647</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.NewIntervalVar-1648"><a href="#CpModel.NewIntervalVar-1648"><span class="linenos">1648</span></a><span class="sd">      start: The start of the interval. It can be an affine or constant</span>
</span><span id="CpModel.NewIntervalVar-1649"><a href="#CpModel.NewIntervalVar-1649"><span class="linenos">1649</span></a><span class="sd">        expression.</span>
</span><span id="CpModel.NewIntervalVar-1650"><a href="#CpModel.NewIntervalVar-1650"><span class="linenos">1650</span></a><span class="sd">      size: The size of the interval. It can be an affine or constant</span>
</span><span id="CpModel.NewIntervalVar-1651"><a href="#CpModel.NewIntervalVar-1651"><span class="linenos">1651</span></a><span class="sd">        expression.</span>
</span><span id="CpModel.NewIntervalVar-1652"><a href="#CpModel.NewIntervalVar-1652"><span class="linenos">1652</span></a><span class="sd">      end: The end of the interval. It can be an affine or constant expression.</span>
</span><span id="CpModel.NewIntervalVar-1653"><a href="#CpModel.NewIntervalVar-1653"><span class="linenos">1653</span></a><span class="sd">      name: The name of the interval variable.</span>
</span><span id="CpModel.NewIntervalVar-1654"><a href="#CpModel.NewIntervalVar-1654"><span class="linenos">1654</span></a>
</span><span id="CpModel.NewIntervalVar-1655"><a href="#CpModel.NewIntervalVar-1655"><span class="linenos">1655</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.NewIntervalVar-1656"><a href="#CpModel.NewIntervalVar-1656"><span class="linenos">1656</span></a><span class="sd">      An `IntervalVar` object.</span>
</span><span id="CpModel.NewIntervalVar-1657"><a href="#CpModel.NewIntervalVar-1657"><span class="linenos">1657</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.NewIntervalVar-1658"><a href="#CpModel.NewIntervalVar-1658"><span class="linenos">1658</span></a>
</span><span id="CpModel.NewIntervalVar-1659"><a href="#CpModel.NewIntervalVar-1659"><span class="linenos">1659</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span> <span class="o">==</span> <span class="n">end</span><span class="p">)</span>
</span><span id="CpModel.NewIntervalVar-1660"><a href="#CpModel.NewIntervalVar-1660"><span class="linenos">1660</span></a>
</span><span id="CpModel.NewIntervalVar-1661"><a href="#CpModel.NewIntervalVar-1661"><span class="linenos">1661</span></a>        <span class="n">start_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="CpModel.NewIntervalVar-1662"><a href="#CpModel.NewIntervalVar-1662"><span class="linenos">1662</span></a>        <span class="n">size_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="CpModel.NewIntervalVar-1663"><a href="#CpModel.NewIntervalVar-1663"><span class="linenos">1663</span></a>        <span class="n">end_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
</span><span id="CpModel.NewIntervalVar-1664"><a href="#CpModel.NewIntervalVar-1664"><span class="linenos">1664</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">start_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel.NewIntervalVar-1665"><a href="#CpModel.NewIntervalVar-1665"><span class="linenos">1665</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel.NewIntervalVar-1666"><a href="#CpModel.NewIntervalVar-1666"><span class="linenos">1666</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: start must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel.NewIntervalVar-1667"><a href="#CpModel.NewIntervalVar-1667"><span class="linenos">1667</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">size_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel.NewIntervalVar-1668"><a href="#CpModel.NewIntervalVar-1668"><span class="linenos">1668</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel.NewIntervalVar-1669"><a href="#CpModel.NewIntervalVar-1669"><span class="linenos">1669</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: size must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel.NewIntervalVar-1670"><a href="#CpModel.NewIntervalVar-1670"><span class="linenos">1670</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">end_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel.NewIntervalVar-1671"><a href="#CpModel.NewIntervalVar-1671"><span class="linenos">1671</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel.NewIntervalVar-1672"><a href="#CpModel.NewIntervalVar-1672"><span class="linenos">1672</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: end must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel.NewIntervalVar-1673"><a href="#CpModel.NewIntervalVar-1673"><span class="linenos">1673</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">start_expr</span><span class="p">,</span> <span class="n">size_expr</span><span class="p">,</span> <span class="n">end_expr</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CpModel.NewIntervalVar-1674"><a href="#CpModel.NewIntervalVar-1674"><span class="linenos">1674</span></a>                           <span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Creates an interval variable from start, size, and end.</p>

<p>An interval variable is a constraint, that is itself used in other
constraints like NoOverlap.</p>

<p>Internally, it ensures that <code>start + size == end</code>.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>start:</strong>  The start of the interval. It can be an affine or constant
expression.</li>
<li><strong>size:</strong>  The size of the interval. It can be an affine or constant
expression.</li>
<li><strong>end:</strong>  The end of the interval. It can be an affine or constant expression.</li>
<li><strong>name:</strong>  The name of the interval variable.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An <code><a href="#IntervalVar">IntervalVar</a></code> object.</p>
</blockquote>
</div>


                            </div>
                            <div id="CpModel.NewFixedSizeIntervalVar" class="classattr">
                                        <input id="CpModel.NewFixedSizeIntervalVar-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">NewFixedSizeIntervalVar</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">start</span>, </span><span class="param"><span class="n">size</span>, </span><span class="param"><span class="n">name</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.NewFixedSizeIntervalVar-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.NewFixedSizeIntervalVar"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.NewFixedSizeIntervalVar-1676"><a href="#CpModel.NewFixedSizeIntervalVar-1676"><span class="linenos">1676</span></a>    <span class="k">def</span> <span class="nf">NewFixedSizeIntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1677"><a href="#CpModel.NewFixedSizeIntervalVar-1677"><span class="linenos">1677</span></a>        <span class="sd">&quot;&quot;&quot;Creates an interval variable from start, and a fixed size.</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1678"><a href="#CpModel.NewFixedSizeIntervalVar-1678"><span class="linenos">1678</span></a>
</span><span id="CpModel.NewFixedSizeIntervalVar-1679"><a href="#CpModel.NewFixedSizeIntervalVar-1679"><span class="linenos">1679</span></a><span class="sd">    An interval variable is a constraint, that is itself used in other</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1680"><a href="#CpModel.NewFixedSizeIntervalVar-1680"><span class="linenos">1680</span></a><span class="sd">    constraints like NoOverlap.</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1681"><a href="#CpModel.NewFixedSizeIntervalVar-1681"><span class="linenos">1681</span></a>
</span><span id="CpModel.NewFixedSizeIntervalVar-1682"><a href="#CpModel.NewFixedSizeIntervalVar-1682"><span class="linenos">1682</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1683"><a href="#CpModel.NewFixedSizeIntervalVar-1683"><span class="linenos">1683</span></a><span class="sd">      start: The start of the interval. It can be an affine or constant</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1684"><a href="#CpModel.NewFixedSizeIntervalVar-1684"><span class="linenos">1684</span></a><span class="sd">        expression.</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1685"><a href="#CpModel.NewFixedSizeIntervalVar-1685"><span class="linenos">1685</span></a><span class="sd">      size: The size of the interval. It must be an integer value.</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1686"><a href="#CpModel.NewFixedSizeIntervalVar-1686"><span class="linenos">1686</span></a><span class="sd">      name: The name of the interval variable.</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1687"><a href="#CpModel.NewFixedSizeIntervalVar-1687"><span class="linenos">1687</span></a>
</span><span id="CpModel.NewFixedSizeIntervalVar-1688"><a href="#CpModel.NewFixedSizeIntervalVar-1688"><span class="linenos">1688</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1689"><a href="#CpModel.NewFixedSizeIntervalVar-1689"><span class="linenos">1689</span></a><span class="sd">      An `IntervalVar` object.</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1690"><a href="#CpModel.NewFixedSizeIntervalVar-1690"><span class="linenos">1690</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1691"><a href="#CpModel.NewFixedSizeIntervalVar-1691"><span class="linenos">1691</span></a>        <span class="n">size</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1692"><a href="#CpModel.NewFixedSizeIntervalVar-1692"><span class="linenos">1692</span></a>        <span class="n">start_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1693"><a href="#CpModel.NewFixedSizeIntervalVar-1693"><span class="linenos">1693</span></a>        <span class="n">size_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1694"><a href="#CpModel.NewFixedSizeIntervalVar-1694"><span class="linenos">1694</span></a>        <span class="n">end_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span><span class="p">)</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1695"><a href="#CpModel.NewFixedSizeIntervalVar-1695"><span class="linenos">1695</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">start_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1696"><a href="#CpModel.NewFixedSizeIntervalVar-1696"><span class="linenos">1696</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1697"><a href="#CpModel.NewFixedSizeIntervalVar-1697"><span class="linenos">1697</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: start must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1698"><a href="#CpModel.NewFixedSizeIntervalVar-1698"><span class="linenos">1698</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">start_expr</span><span class="p">,</span> <span class="n">size_expr</span><span class="p">,</span> <span class="n">end_expr</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="CpModel.NewFixedSizeIntervalVar-1699"><a href="#CpModel.NewFixedSizeIntervalVar-1699"><span class="linenos">1699</span></a>                           <span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Creates an interval variable from start, and a fixed size.</p>

<p>An interval variable is a constraint, that is itself used in other
constraints like NoOverlap.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>start:</strong>  The start of the interval. It can be an affine or constant
expression.</li>
<li><strong>size:</strong>  The size of the interval. It must be an integer value.</li>
<li><strong>name:</strong>  The name of the interval variable.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An <code><a href="#IntervalVar">IntervalVar</a></code> object.</p>
</blockquote>
</div>


                            </div>
                            <div id="CpModel.NewOptionalIntervalVar" class="classattr">
                                        <input id="CpModel.NewOptionalIntervalVar-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">NewOptionalIntervalVar</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">start</span>, </span><span class="param"><span class="n">size</span>, </span><span class="param"><span class="n">end</span>, </span><span class="param"><span class="n">is_present</span>, </span><span class="param"><span class="n">name</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.NewOptionalIntervalVar-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.NewOptionalIntervalVar"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.NewOptionalIntervalVar-1701"><a href="#CpModel.NewOptionalIntervalVar-1701"><span class="linenos">1701</span></a>    <span class="k">def</span> <span class="nf">NewOptionalIntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">is_present</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel.NewOptionalIntervalVar-1702"><a href="#CpModel.NewOptionalIntervalVar-1702"><span class="linenos">1702</span></a>        <span class="sd">&quot;&quot;&quot;Creates an optional interval var from start, size, end, and is_present.</span>
</span><span id="CpModel.NewOptionalIntervalVar-1703"><a href="#CpModel.NewOptionalIntervalVar-1703"><span class="linenos">1703</span></a>
</span><span id="CpModel.NewOptionalIntervalVar-1704"><a href="#CpModel.NewOptionalIntervalVar-1704"><span class="linenos">1704</span></a><span class="sd">    An optional interval variable is a constraint, that is itself used in other</span>
</span><span id="CpModel.NewOptionalIntervalVar-1705"><a href="#CpModel.NewOptionalIntervalVar-1705"><span class="linenos">1705</span></a><span class="sd">    constraints like NoOverlap. This constraint is protected by an is_present</span>
</span><span id="CpModel.NewOptionalIntervalVar-1706"><a href="#CpModel.NewOptionalIntervalVar-1706"><span class="linenos">1706</span></a><span class="sd">    literal that indicates if it is active or not.</span>
</span><span id="CpModel.NewOptionalIntervalVar-1707"><a href="#CpModel.NewOptionalIntervalVar-1707"><span class="linenos">1707</span></a>
</span><span id="CpModel.NewOptionalIntervalVar-1708"><a href="#CpModel.NewOptionalIntervalVar-1708"><span class="linenos">1708</span></a><span class="sd">    Internally, it ensures that `is_present` implies `start + size == end`.</span>
</span><span id="CpModel.NewOptionalIntervalVar-1709"><a href="#CpModel.NewOptionalIntervalVar-1709"><span class="linenos">1709</span></a>
</span><span id="CpModel.NewOptionalIntervalVar-1710"><a href="#CpModel.NewOptionalIntervalVar-1710"><span class="linenos">1710</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.NewOptionalIntervalVar-1711"><a href="#CpModel.NewOptionalIntervalVar-1711"><span class="linenos">1711</span></a><span class="sd">      start: The start of the interval. It can be an integer value, or an</span>
</span><span id="CpModel.NewOptionalIntervalVar-1712"><a href="#CpModel.NewOptionalIntervalVar-1712"><span class="linenos">1712</span></a><span class="sd">        integer variable.</span>
</span><span id="CpModel.NewOptionalIntervalVar-1713"><a href="#CpModel.NewOptionalIntervalVar-1713"><span class="linenos">1713</span></a><span class="sd">      size: The size of the interval. It can be an integer value, or an integer</span>
</span><span id="CpModel.NewOptionalIntervalVar-1714"><a href="#CpModel.NewOptionalIntervalVar-1714"><span class="linenos">1714</span></a><span class="sd">        variable.</span>
</span><span id="CpModel.NewOptionalIntervalVar-1715"><a href="#CpModel.NewOptionalIntervalVar-1715"><span class="linenos">1715</span></a><span class="sd">      end: The end of the interval. It can be an integer value, or an integer</span>
</span><span id="CpModel.NewOptionalIntervalVar-1716"><a href="#CpModel.NewOptionalIntervalVar-1716"><span class="linenos">1716</span></a><span class="sd">        variable.</span>
</span><span id="CpModel.NewOptionalIntervalVar-1717"><a href="#CpModel.NewOptionalIntervalVar-1717"><span class="linenos">1717</span></a><span class="sd">      is_present: A literal that indicates if the interval is active or not. A</span>
</span><span id="CpModel.NewOptionalIntervalVar-1718"><a href="#CpModel.NewOptionalIntervalVar-1718"><span class="linenos">1718</span></a><span class="sd">        inactive interval is simply ignored by all constraints.</span>
</span><span id="CpModel.NewOptionalIntervalVar-1719"><a href="#CpModel.NewOptionalIntervalVar-1719"><span class="linenos">1719</span></a><span class="sd">      name: The name of the interval variable.</span>
</span><span id="CpModel.NewOptionalIntervalVar-1720"><a href="#CpModel.NewOptionalIntervalVar-1720"><span class="linenos">1720</span></a>
</span><span id="CpModel.NewOptionalIntervalVar-1721"><a href="#CpModel.NewOptionalIntervalVar-1721"><span class="linenos">1721</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.NewOptionalIntervalVar-1722"><a href="#CpModel.NewOptionalIntervalVar-1722"><span class="linenos">1722</span></a><span class="sd">      An `IntervalVar` object.</span>
</span><span id="CpModel.NewOptionalIntervalVar-1723"><a href="#CpModel.NewOptionalIntervalVar-1723"><span class="linenos">1723</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.NewOptionalIntervalVar-1724"><a href="#CpModel.NewOptionalIntervalVar-1724"><span class="linenos">1724</span></a>
</span><span id="CpModel.NewOptionalIntervalVar-1725"><a href="#CpModel.NewOptionalIntervalVar-1725"><span class="linenos">1725</span></a>        <span class="c1"># Add the linear constraint.</span>
</span><span id="CpModel.NewOptionalIntervalVar-1726"><a href="#CpModel.NewOptionalIntervalVar-1726"><span class="linenos">1726</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span> <span class="o">==</span> <span class="n">end</span><span class="p">)</span><span class="o">.</span><span class="n">OnlyEnforceIf</span><span class="p">(</span><span class="n">is_present</span><span class="p">)</span>
</span><span id="CpModel.NewOptionalIntervalVar-1727"><a href="#CpModel.NewOptionalIntervalVar-1727"><span class="linenos">1727</span></a>
</span><span id="CpModel.NewOptionalIntervalVar-1728"><a href="#CpModel.NewOptionalIntervalVar-1728"><span class="linenos">1728</span></a>        <span class="c1"># Creates the IntervalConstraintProto object.</span>
</span><span id="CpModel.NewOptionalIntervalVar-1729"><a href="#CpModel.NewOptionalIntervalVar-1729"><span class="linenos">1729</span></a>        <span class="n">is_present_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">is_present</span><span class="p">)</span>
</span><span id="CpModel.NewOptionalIntervalVar-1730"><a href="#CpModel.NewOptionalIntervalVar-1730"><span class="linenos">1730</span></a>        <span class="n">start_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="CpModel.NewOptionalIntervalVar-1731"><a href="#CpModel.NewOptionalIntervalVar-1731"><span class="linenos">1731</span></a>        <span class="n">size_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="CpModel.NewOptionalIntervalVar-1732"><a href="#CpModel.NewOptionalIntervalVar-1732"><span class="linenos">1732</span></a>        <span class="n">end_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">end</span><span class="p">)</span>
</span><span id="CpModel.NewOptionalIntervalVar-1733"><a href="#CpModel.NewOptionalIntervalVar-1733"><span class="linenos">1733</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">start_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel.NewOptionalIntervalVar-1734"><a href="#CpModel.NewOptionalIntervalVar-1734"><span class="linenos">1734</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel.NewOptionalIntervalVar-1735"><a href="#CpModel.NewOptionalIntervalVar-1735"><span class="linenos">1735</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: start must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel.NewOptionalIntervalVar-1736"><a href="#CpModel.NewOptionalIntervalVar-1736"><span class="linenos">1736</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">size_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel.NewOptionalIntervalVar-1737"><a href="#CpModel.NewOptionalIntervalVar-1737"><span class="linenos">1737</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel.NewOptionalIntervalVar-1738"><a href="#CpModel.NewOptionalIntervalVar-1738"><span class="linenos">1738</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: size must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel.NewOptionalIntervalVar-1739"><a href="#CpModel.NewOptionalIntervalVar-1739"><span class="linenos">1739</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">end_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel.NewOptionalIntervalVar-1740"><a href="#CpModel.NewOptionalIntervalVar-1740"><span class="linenos">1740</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel.NewOptionalIntervalVar-1741"><a href="#CpModel.NewOptionalIntervalVar-1741"><span class="linenos">1741</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: end must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel.NewOptionalIntervalVar-1742"><a href="#CpModel.NewOptionalIntervalVar-1742"><span class="linenos">1742</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">start_expr</span><span class="p">,</span> <span class="n">size_expr</span><span class="p">,</span> <span class="n">end_expr</span><span class="p">,</span>
</span><span id="CpModel.NewOptionalIntervalVar-1743"><a href="#CpModel.NewOptionalIntervalVar-1743"><span class="linenos">1743</span></a>                           <span class="n">is_present_index</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Creates an optional interval var from start, size, end, and is_present.</p>

<p>An optional interval variable is a constraint, that is itself used in other
constraints like NoOverlap. This constraint is protected by an is_present
literal that indicates if it is active or not.</p>

<p>Internally, it ensures that <code>is_present</code> implies <code>start + size == end</code>.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>start:</strong>  The start of the interval. It can be an integer value, or an
integer variable.</li>
<li><strong>size:</strong>  The size of the interval. It can be an integer value, or an integer
variable.</li>
<li><strong>end:</strong>  The end of the interval. It can be an integer value, or an integer
variable.</li>
<li><strong>is_present:</strong>  A literal that indicates if the interval is active or not. A
inactive interval is simply ignored by all constraints.</li>
<li><strong>name:</strong>  The name of the interval variable.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An <code><a href="#IntervalVar">IntervalVar</a></code> object.</p>
</blockquote>
</div>


                            </div>
                            <div id="CpModel.NewOptionalFixedSizeIntervalVar" class="classattr">
                                        <input id="CpModel.NewOptionalFixedSizeIntervalVar-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">NewOptionalFixedSizeIntervalVar</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">start</span>, </span><span class="param"><span class="n">size</span>, </span><span class="param"><span class="n">is_present</span>, </span><span class="param"><span class="n">name</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.NewOptionalFixedSizeIntervalVar-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.NewOptionalFixedSizeIntervalVar"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1745"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1745"><span class="linenos">1745</span></a>    <span class="k">def</span> <span class="nf">NewOptionalFixedSizeIntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">is_present</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1746"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1746"><span class="linenos">1746</span></a>        <span class="sd">&quot;&quot;&quot;Creates an interval variable from start, and a fixed size.</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1747"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1747"><span class="linenos">1747</span></a>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1748"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1748"><span class="linenos">1748</span></a><span class="sd">    An interval variable is a constraint, that is itself used in other</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1749"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1749"><span class="linenos">1749</span></a><span class="sd">    constraints like NoOverlap.</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1750"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1750"><span class="linenos">1750</span></a>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1751"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1751"><span class="linenos">1751</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1752"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1752"><span class="linenos">1752</span></a><span class="sd">      start: The start of the interval. It can be an affine or constant</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1753"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1753"><span class="linenos">1753</span></a><span class="sd">        expression.</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1754"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1754"><span class="linenos">1754</span></a><span class="sd">      size: The size of the interval. It must be an integer value.</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1755"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1755"><span class="linenos">1755</span></a><span class="sd">      is_present: A literal that indicates if the interval is active or not. A</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1756"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1756"><span class="linenos">1756</span></a><span class="sd">        inactive interval is simply ignored by all constraints.</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1757"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1757"><span class="linenos">1757</span></a><span class="sd">      name: The name of the interval variable.</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1758"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1758"><span class="linenos">1758</span></a>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1759"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1759"><span class="linenos">1759</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1760"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1760"><span class="linenos">1760</span></a><span class="sd">      An `IntervalVar` object.</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1761"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1761"><span class="linenos">1761</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1762"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1762"><span class="linenos">1762</span></a>        <span class="n">size</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1763"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1763"><span class="linenos">1763</span></a>        <span class="n">start_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1764"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1764"><span class="linenos">1764</span></a>        <span class="n">size_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1765"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1765"><span class="linenos">1765</span></a>        <span class="n">end_expr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">size</span><span class="p">)</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1766"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1766"><span class="linenos">1766</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">start_expr</span><span class="o">.</span><span class="n">vars</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1767"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1767"><span class="linenos">1767</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1768"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1768"><span class="linenos">1768</span></a>                <span class="s1">&#39;cp_model.NewIntervalVar: start must be affine or constant.&#39;</span><span class="p">)</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1769"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1769"><span class="linenos">1769</span></a>        <span class="n">is_present_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">is_present</span><span class="p">)</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1770"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1770"><span class="linenos">1770</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">start_expr</span><span class="p">,</span> <span class="n">size_expr</span><span class="p">,</span> <span class="n">end_expr</span><span class="p">,</span>
</span><span id="CpModel.NewOptionalFixedSizeIntervalVar-1771"><a href="#CpModel.NewOptionalFixedSizeIntervalVar-1771"><span class="linenos">1771</span></a>                           <span class="n">is_present_index</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Creates an interval variable from start, and a fixed size.</p>

<p>An interval variable is a constraint, that is itself used in other
constraints like NoOverlap.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>start:</strong>  The start of the interval. It can be an affine or constant
expression.</li>
<li><strong>size:</strong>  The size of the interval. It must be an integer value.</li>
<li><strong>is_present:</strong>  A literal that indicates if the interval is active or not. A
inactive interval is simply ignored by all constraints.</li>
<li><strong>name:</strong>  The name of the interval variable.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An <code><a href="#IntervalVar">IntervalVar</a></code> object.</p>
</blockquote>
</div>


                            </div>
                            <div id="CpModel.AddNoOverlap" class="classattr">
                                        <input id="CpModel.AddNoOverlap-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddNoOverlap</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">interval_vars</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddNoOverlap-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddNoOverlap"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddNoOverlap-1773"><a href="#CpModel.AddNoOverlap-1773"><span class="linenos">1773</span></a>    <span class="k">def</span> <span class="nf">AddNoOverlap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interval_vars</span><span class="p">):</span>
</span><span id="CpModel.AddNoOverlap-1774"><a href="#CpModel.AddNoOverlap-1774"><span class="linenos">1774</span></a>        <span class="sd">&quot;&quot;&quot;Adds NoOverlap(interval_vars).</span>
</span><span id="CpModel.AddNoOverlap-1775"><a href="#CpModel.AddNoOverlap-1775"><span class="linenos">1775</span></a>
</span><span id="CpModel.AddNoOverlap-1776"><a href="#CpModel.AddNoOverlap-1776"><span class="linenos">1776</span></a><span class="sd">    A NoOverlap constraint ensures that all present intervals do not overlap</span>
</span><span id="CpModel.AddNoOverlap-1777"><a href="#CpModel.AddNoOverlap-1777"><span class="linenos">1777</span></a><span class="sd">    in time.</span>
</span><span id="CpModel.AddNoOverlap-1778"><a href="#CpModel.AddNoOverlap-1778"><span class="linenos">1778</span></a>
</span><span id="CpModel.AddNoOverlap-1779"><a href="#CpModel.AddNoOverlap-1779"><span class="linenos">1779</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.AddNoOverlap-1780"><a href="#CpModel.AddNoOverlap-1780"><span class="linenos">1780</span></a><span class="sd">      interval_vars: The list of interval variables to constrain.</span>
</span><span id="CpModel.AddNoOverlap-1781"><a href="#CpModel.AddNoOverlap-1781"><span class="linenos">1781</span></a>
</span><span id="CpModel.AddNoOverlap-1782"><a href="#CpModel.AddNoOverlap-1782"><span class="linenos">1782</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.AddNoOverlap-1783"><a href="#CpModel.AddNoOverlap-1783"><span class="linenos">1783</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel.AddNoOverlap-1784"><a href="#CpModel.AddNoOverlap-1784"><span class="linenos">1784</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.AddNoOverlap-1785"><a href="#CpModel.AddNoOverlap-1785"><span class="linenos">1785</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddNoOverlap-1786"><a href="#CpModel.AddNoOverlap-1786"><span class="linenos">1786</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddNoOverlap-1787"><a href="#CpModel.AddNoOverlap-1787"><span class="linenos">1787</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">no_overlap</span><span class="o">.</span><span class="n">intervals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel.AddNoOverlap-1788"><a href="#CpModel.AddNoOverlap-1788"><span class="linenos">1788</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetIntervalIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">interval_vars</span><span class="p">])</span>
</span><span id="CpModel.AddNoOverlap-1789"><a href="#CpModel.AddNoOverlap-1789"><span class="linenos">1789</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds NoOverlap(interval_vars).</p>

<p>A NoOverlap constraint ensures that all present intervals do not overlap
in time.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>interval_vars:</strong>  The list of interval variables to constrain.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An instance of the <code><a href="#Constraint">Constraint</a></code> class.</p>
</blockquote>
</div>


                            </div>
                            <div id="CpModel.AddNoOverlap2D" class="classattr">
                                        <input id="CpModel.AddNoOverlap2D-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddNoOverlap2D</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">x_intervals</span>, </span><span class="param"><span class="n">y_intervals</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddNoOverlap2D-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddNoOverlap2D"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddNoOverlap2D-1791"><a href="#CpModel.AddNoOverlap2D-1791"><span class="linenos">1791</span></a>    <span class="k">def</span> <span class="nf">AddNoOverlap2D</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_intervals</span><span class="p">,</span> <span class="n">y_intervals</span><span class="p">):</span>
</span><span id="CpModel.AddNoOverlap2D-1792"><a href="#CpModel.AddNoOverlap2D-1792"><span class="linenos">1792</span></a>        <span class="sd">&quot;&quot;&quot;Adds NoOverlap2D(x_intervals, y_intervals).</span>
</span><span id="CpModel.AddNoOverlap2D-1793"><a href="#CpModel.AddNoOverlap2D-1793"><span class="linenos">1793</span></a>
</span><span id="CpModel.AddNoOverlap2D-1794"><a href="#CpModel.AddNoOverlap2D-1794"><span class="linenos">1794</span></a><span class="sd">    A NoOverlap2D constraint ensures that all present rectangles do not overlap</span>
</span><span id="CpModel.AddNoOverlap2D-1795"><a href="#CpModel.AddNoOverlap2D-1795"><span class="linenos">1795</span></a><span class="sd">    on a plane. Each rectangle is aligned with the X and Y axis, and is defined</span>
</span><span id="CpModel.AddNoOverlap2D-1796"><a href="#CpModel.AddNoOverlap2D-1796"><span class="linenos">1796</span></a><span class="sd">    by two intervals which represent its projection onto the X and Y axis.</span>
</span><span id="CpModel.AddNoOverlap2D-1797"><a href="#CpModel.AddNoOverlap2D-1797"><span class="linenos">1797</span></a>
</span><span id="CpModel.AddNoOverlap2D-1798"><a href="#CpModel.AddNoOverlap2D-1798"><span class="linenos">1798</span></a><span class="sd">    Furthermore, one box is optional if at least one of the x or y interval is</span>
</span><span id="CpModel.AddNoOverlap2D-1799"><a href="#CpModel.AddNoOverlap2D-1799"><span class="linenos">1799</span></a><span class="sd">    optional.</span>
</span><span id="CpModel.AddNoOverlap2D-1800"><a href="#CpModel.AddNoOverlap2D-1800"><span class="linenos">1800</span></a>
</span><span id="CpModel.AddNoOverlap2D-1801"><a href="#CpModel.AddNoOverlap2D-1801"><span class="linenos">1801</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.AddNoOverlap2D-1802"><a href="#CpModel.AddNoOverlap2D-1802"><span class="linenos">1802</span></a><span class="sd">      x_intervals: The X coordinates of the rectangles.</span>
</span><span id="CpModel.AddNoOverlap2D-1803"><a href="#CpModel.AddNoOverlap2D-1803"><span class="linenos">1803</span></a><span class="sd">      y_intervals: The Y coordinates of the rectangles.</span>
</span><span id="CpModel.AddNoOverlap2D-1804"><a href="#CpModel.AddNoOverlap2D-1804"><span class="linenos">1804</span></a>
</span><span id="CpModel.AddNoOverlap2D-1805"><a href="#CpModel.AddNoOverlap2D-1805"><span class="linenos">1805</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.AddNoOverlap2D-1806"><a href="#CpModel.AddNoOverlap2D-1806"><span class="linenos">1806</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel.AddNoOverlap2D-1807"><a href="#CpModel.AddNoOverlap2D-1807"><span class="linenos">1807</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.AddNoOverlap2D-1808"><a href="#CpModel.AddNoOverlap2D-1808"><span class="linenos">1808</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddNoOverlap2D-1809"><a href="#CpModel.AddNoOverlap2D-1809"><span class="linenos">1809</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddNoOverlap2D-1810"><a href="#CpModel.AddNoOverlap2D-1810"><span class="linenos">1810</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">no_overlap_2d</span><span class="o">.</span><span class="n">x_intervals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel.AddNoOverlap2D-1811"><a href="#CpModel.AddNoOverlap2D-1811"><span class="linenos">1811</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetIntervalIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x_intervals</span><span class="p">])</span>
</span><span id="CpModel.AddNoOverlap2D-1812"><a href="#CpModel.AddNoOverlap2D-1812"><span class="linenos">1812</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">no_overlap_2d</span><span class="o">.</span><span class="n">y_intervals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel.AddNoOverlap2D-1813"><a href="#CpModel.AddNoOverlap2D-1813"><span class="linenos">1813</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetIntervalIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">y_intervals</span><span class="p">])</span>
</span><span id="CpModel.AddNoOverlap2D-1814"><a href="#CpModel.AddNoOverlap2D-1814"><span class="linenos">1814</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds NoOverlap2D(x_intervals, y_intervals).</p>

<p>A NoOverlap2D constraint ensures that all present rectangles do not overlap
on a plane. Each rectangle is aligned with the X and Y axis, and is defined
by two intervals which represent its projection onto the X and Y axis.</p>

<p>Furthermore, one box is optional if at least one of the x or y interval is
optional.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>x_intervals:</strong>  The X coordinates of the rectangles.</li>
<li><strong>y_intervals:</strong>  The Y coordinates of the rectangles.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An instance of the <code><a href="#Constraint">Constraint</a></code> class.</p>
</blockquote>
</div>


                            </div>
                            <div id="CpModel.AddCumulative" class="classattr">
                                        <input id="CpModel.AddCumulative-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddCumulative</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">intervals</span>, </span><span class="param"><span class="n">demands</span>, </span><span class="param"><span class="n">capacity</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddCumulative-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddCumulative"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddCumulative-1816"><a href="#CpModel.AddCumulative-1816"><span class="linenos">1816</span></a>    <span class="k">def</span> <span class="nf">AddCumulative</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">intervals</span><span class="p">,</span> <span class="n">demands</span><span class="p">,</span> <span class="n">capacity</span><span class="p">):</span>
</span><span id="CpModel.AddCumulative-1817"><a href="#CpModel.AddCumulative-1817"><span class="linenos">1817</span></a>        <span class="sd">&quot;&quot;&quot;Adds Cumulative(intervals, demands, capacity).</span>
</span><span id="CpModel.AddCumulative-1818"><a href="#CpModel.AddCumulative-1818"><span class="linenos">1818</span></a>
</span><span id="CpModel.AddCumulative-1819"><a href="#CpModel.AddCumulative-1819"><span class="linenos">1819</span></a><span class="sd">    This constraint enforces that:</span>
</span><span id="CpModel.AddCumulative-1820"><a href="#CpModel.AddCumulative-1820"><span class="linenos">1820</span></a>
</span><span id="CpModel.AddCumulative-1821"><a href="#CpModel.AddCumulative-1821"><span class="linenos">1821</span></a><span class="sd">        for all t:</span>
</span><span id="CpModel.AddCumulative-1822"><a href="#CpModel.AddCumulative-1822"><span class="linenos">1822</span></a><span class="sd">          sum(demands[i]</span>
</span><span id="CpModel.AddCumulative-1823"><a href="#CpModel.AddCumulative-1823"><span class="linenos">1823</span></a><span class="sd">            if (start(intervals[i]) &lt;= t &lt; end(intervals[i])) and</span>
</span><span id="CpModel.AddCumulative-1824"><a href="#CpModel.AddCumulative-1824"><span class="linenos">1824</span></a><span class="sd">            (intervals[i] is present)) &lt;= capacity</span>
</span><span id="CpModel.AddCumulative-1825"><a href="#CpModel.AddCumulative-1825"><span class="linenos">1825</span></a>
</span><span id="CpModel.AddCumulative-1826"><a href="#CpModel.AddCumulative-1826"><span class="linenos">1826</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.AddCumulative-1827"><a href="#CpModel.AddCumulative-1827"><span class="linenos">1827</span></a><span class="sd">      intervals: The list of intervals.</span>
</span><span id="CpModel.AddCumulative-1828"><a href="#CpModel.AddCumulative-1828"><span class="linenos">1828</span></a><span class="sd">      demands: The list of demands for each interval. Each demand must be &gt;= 0.</span>
</span><span id="CpModel.AddCumulative-1829"><a href="#CpModel.AddCumulative-1829"><span class="linenos">1829</span></a><span class="sd">        Each demand can be an integer value, or an integer variable.</span>
</span><span id="CpModel.AddCumulative-1830"><a href="#CpModel.AddCumulative-1830"><span class="linenos">1830</span></a><span class="sd">      capacity: The maximum capacity of the cumulative constraint. It must be a</span>
</span><span id="CpModel.AddCumulative-1831"><a href="#CpModel.AddCumulative-1831"><span class="linenos">1831</span></a><span class="sd">        positive integer value or variable.</span>
</span><span id="CpModel.AddCumulative-1832"><a href="#CpModel.AddCumulative-1832"><span class="linenos">1832</span></a>
</span><span id="CpModel.AddCumulative-1833"><a href="#CpModel.AddCumulative-1833"><span class="linenos">1833</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.AddCumulative-1834"><a href="#CpModel.AddCumulative-1834"><span class="linenos">1834</span></a><span class="sd">      An instance of the `Constraint` class.</span>
</span><span id="CpModel.AddCumulative-1835"><a href="#CpModel.AddCumulative-1835"><span class="linenos">1835</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.AddCumulative-1836"><a href="#CpModel.AddCumulative-1836"><span class="linenos">1836</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="n">Constraint</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">)</span>
</span><span id="CpModel.AddCumulative-1837"><a href="#CpModel.AddCumulative-1837"><span class="linenos">1837</span></a>        <span class="n">model_ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AddCumulative-1838"><a href="#CpModel.AddCumulative-1838"><span class="linenos">1838</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">cumulative</span><span class="o">.</span><span class="n">intervals</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
</span><span id="CpModel.AddCumulative-1839"><a href="#CpModel.AddCumulative-1839"><span class="linenos">1839</span></a>            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">GetIntervalIndex</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">intervals</span><span class="p">])</span>
</span><span id="CpModel.AddCumulative-1840"><a href="#CpModel.AddCumulative-1840"><span class="linenos">1840</span></a>        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">demands</span><span class="p">:</span>
</span><span id="CpModel.AddCumulative-1841"><a href="#CpModel.AddCumulative-1841"><span class="linenos">1841</span></a>            <span class="n">model_ct</span><span class="o">.</span><span class="n">cumulative</span><span class="o">.</span><span class="n">demands</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
</span><span id="CpModel.AddCumulative-1842"><a href="#CpModel.AddCumulative-1842"><span class="linenos">1842</span></a>        <span class="n">model_ct</span><span class="o">.</span><span class="n">cumulative</span><span class="o">.</span><span class="n">capacity</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span>
</span><span id="CpModel.AddCumulative-1843"><a href="#CpModel.AddCumulative-1843"><span class="linenos">1843</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ParseLinearExpression</span><span class="p">(</span><span class="n">capacity</span><span class="p">))</span>
</span><span id="CpModel.AddCumulative-1844"><a href="#CpModel.AddCumulative-1844"><span class="linenos">1844</span></a>        <span class="k">return</span> <span class="n">ct</span>
</span></pre></div>


            <div class="docstring"><p>Adds Cumulative(intervals, demands, capacity).</p>

<h6 id="this-constraint-enforces-that">This constraint enforces that</h6>

<blockquote>
  <p>for all t:
    sum(demands[i]
      if (start(intervals[i]) &lt;= t &lt; end(intervals[i])) and
      (intervals[i] is present)) &lt;= capacity</p>
</blockquote>

<h6 id="args">Args</h6>

<ul>
<li><strong>intervals:</strong>  The list of intervals.</li>
<li><strong>demands:</strong>  The list of demands for each interval. Each demand must be &gt;= 0.
Each demand can be an integer value, or an integer variable.</li>
<li><strong>capacity:</strong>  The maximum capacity of the cumulative constraint. It must be a
positive integer value or variable.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An instance of the <code><a href="#Constraint">Constraint</a></code> class.</p>
</blockquote>
</div>


                            </div>
                            <div id="CpModel.CopyFrom" class="classattr">
                                        <input id="CpModel.CopyFrom-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">CopyFrom</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">other_model</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.CopyFrom-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.CopyFrom"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.CopyFrom-1847"><a href="#CpModel.CopyFrom-1847"><span class="linenos">1847</span></a>    <span class="k">def</span> <span class="nf">CopyFrom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other_model</span><span class="p">):</span>
</span><span id="CpModel.CopyFrom-1848"><a href="#CpModel.CopyFrom-1848"><span class="linenos">1848</span></a>        <span class="sd">&quot;&quot;&quot;Reset the model, and creates a new one from a CpModelProto instance.&quot;&quot;&quot;</span>
</span><span id="CpModel.CopyFrom-1849"><a href="#CpModel.CopyFrom-1849"><span class="linenos">1849</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="n">other_model</span><span class="o">.</span><span class="n">Proto</span><span class="p">())</span>
</span><span id="CpModel.CopyFrom-1850"><a href="#CpModel.CopyFrom-1850"><span class="linenos">1850</span></a>
</span><span id="CpModel.CopyFrom-1851"><a href="#CpModel.CopyFrom-1851"><span class="linenos">1851</span></a>        <span class="c1"># Rebuild constant map.</span>
</span><span id="CpModel.CopyFrom-1852"><a href="#CpModel.CopyFrom-1852"><span class="linenos">1852</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="CpModel.CopyFrom-1853"><a href="#CpModel.CopyFrom-1853"><span class="linenos">1853</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">var</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">):</span>
</span><span id="CpModel.CopyFrom-1854"><a href="#CpModel.CopyFrom-1854"><span class="linenos">1854</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="CpModel.CopyFrom-1855"><a href="#CpModel.CopyFrom-1855"><span class="linenos">1855</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="p">[</span><span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">i</span>
</span></pre></div>


            <div class="docstring"><p>Reset the model, and creates a new one from a CpModelProto instance.</p>
</div>


                            </div>
                            <div id="CpModel.GetBoolVarFromProtoIndex" class="classattr">
                                        <input id="CpModel.GetBoolVarFromProtoIndex-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">GetBoolVarFromProtoIndex</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">index</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.GetBoolVarFromProtoIndex-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.GetBoolVarFromProtoIndex"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.GetBoolVarFromProtoIndex-1857"><a href="#CpModel.GetBoolVarFromProtoIndex-1857"><span class="linenos">1857</span></a>    <span class="k">def</span> <span class="nf">GetBoolVarFromProtoIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
</span><span id="CpModel.GetBoolVarFromProtoIndex-1858"><a href="#CpModel.GetBoolVarFromProtoIndex-1858"><span class="linenos">1858</span></a>        <span class="sd">&quot;&quot;&quot;Returns an already created Boolean variable from its index.&quot;&quot;&quot;</span>
</span><span id="CpModel.GetBoolVarFromProtoIndex-1859"><a href="#CpModel.GetBoolVarFromProtoIndex-1859"><span class="linenos">1859</span></a>        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">):</span>
</span><span id="CpModel.GetBoolVarFromProtoIndex-1860"><a href="#CpModel.GetBoolVarFromProtoIndex-1860"><span class="linenos">1860</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel.GetBoolVarFromProtoIndex-1861"><a href="#CpModel.GetBoolVarFromProtoIndex-1861"><span class="linenos">1861</span></a>                <span class="sa">f</span><span class="s1">&#39;GetBoolVarFromProtoIndex: out of bound index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="CpModel.GetBoolVarFromProtoIndex-1862"><a href="#CpModel.GetBoolVarFromProtoIndex-1862"><span class="linenos">1862</span></a>        <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span id="CpModel.GetBoolVarFromProtoIndex-1863"><a href="#CpModel.GetBoolVarFromProtoIndex-1863"><span class="linenos">1863</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel.GetBoolVarFromProtoIndex-1864"><a href="#CpModel.GetBoolVarFromProtoIndex-1864"><span class="linenos">1864</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel.GetBoolVarFromProtoIndex-1865"><a href="#CpModel.GetBoolVarFromProtoIndex-1865"><span class="linenos">1865</span></a>                <span class="sa">f</span><span class="s1">&#39;GetBoolVarFromProtoIndex: index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1"> does not reference&#39;</span> <span class="o">+</span>
</span><span id="CpModel.GetBoolVarFromProtoIndex-1866"><a href="#CpModel.GetBoolVarFromProtoIndex-1866"><span class="linenos">1866</span></a>                <span class="s1">&#39; a Boolean variable&#39;</span><span class="p">)</span>
</span><span id="CpModel.GetBoolVarFromProtoIndex-1867"><a href="#CpModel.GetBoolVarFromProtoIndex-1867"><span class="linenos">1867</span></a>
</span><span id="CpModel.GetBoolVarFromProtoIndex-1868"><a href="#CpModel.GetBoolVarFromProtoIndex-1868"><span class="linenos">1868</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns an already created Boolean variable from its index.</p>
</div>


                            </div>
                            <div id="CpModel.GetIntVarFromProtoIndex" class="classattr">
                                        <input id="CpModel.GetIntVarFromProtoIndex-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">GetIntVarFromProtoIndex</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">index</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.GetIntVarFromProtoIndex-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.GetIntVarFromProtoIndex"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.GetIntVarFromProtoIndex-1870"><a href="#CpModel.GetIntVarFromProtoIndex-1870"><span class="linenos">1870</span></a>    <span class="k">def</span> <span class="nf">GetIntVarFromProtoIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
</span><span id="CpModel.GetIntVarFromProtoIndex-1871"><a href="#CpModel.GetIntVarFromProtoIndex-1871"><span class="linenos">1871</span></a>        <span class="sd">&quot;&quot;&quot;Returns an already created integer variable from its index.&quot;&quot;&quot;</span>
</span><span id="CpModel.GetIntVarFromProtoIndex-1872"><a href="#CpModel.GetIntVarFromProtoIndex-1872"><span class="linenos">1872</span></a>        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">):</span>
</span><span id="CpModel.GetIntVarFromProtoIndex-1873"><a href="#CpModel.GetIntVarFromProtoIndex-1873"><span class="linenos">1873</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel.GetIntVarFromProtoIndex-1874"><a href="#CpModel.GetIntVarFromProtoIndex-1874"><span class="linenos">1874</span></a>                <span class="sa">f</span><span class="s1">&#39;GetIntVarFromProtoIndex: out of bound index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="CpModel.GetIntVarFromProtoIndex-1875"><a href="#CpModel.GetIntVarFromProtoIndex-1875"><span class="linenos">1875</span></a>        <span class="k">return</span> <span class="n">IntVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns an already created integer variable from its index.</p>
</div>


                            </div>
                            <div id="CpModel.GetIntervalVarFromProtoIndex" class="classattr">
                                        <input id="CpModel.GetIntervalVarFromProtoIndex-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">GetIntervalVarFromProtoIndex</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">index</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.GetIntervalVarFromProtoIndex-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.GetIntervalVarFromProtoIndex"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.GetIntervalVarFromProtoIndex-1877"><a href="#CpModel.GetIntervalVarFromProtoIndex-1877"><span class="linenos">1877</span></a>    <span class="k">def</span> <span class="nf">GetIntervalVarFromProtoIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
</span><span id="CpModel.GetIntervalVarFromProtoIndex-1878"><a href="#CpModel.GetIntervalVarFromProtoIndex-1878"><span class="linenos">1878</span></a>        <span class="sd">&quot;&quot;&quot;Returns an already created interval variable from its index.&quot;&quot;&quot;</span>
</span><span id="CpModel.GetIntervalVarFromProtoIndex-1879"><a href="#CpModel.GetIntervalVarFromProtoIndex-1879"><span class="linenos">1879</span></a>        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">):</span>
</span><span id="CpModel.GetIntervalVarFromProtoIndex-1880"><a href="#CpModel.GetIntervalVarFromProtoIndex-1880"><span class="linenos">1880</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel.GetIntervalVarFromProtoIndex-1881"><a href="#CpModel.GetIntervalVarFromProtoIndex-1881"><span class="linenos">1881</span></a>                <span class="sa">f</span><span class="s1">&#39;GetIntervalVarFromProtoIndex: out of bound index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="CpModel.GetIntervalVarFromProtoIndex-1882"><a href="#CpModel.GetIntervalVarFromProtoIndex-1882"><span class="linenos">1882</span></a>        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">constraints</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
</span><span id="CpModel.GetIntervalVarFromProtoIndex-1883"><a href="#CpModel.GetIntervalVarFromProtoIndex-1883"><span class="linenos">1883</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">ct</span><span class="o">.</span><span class="n">HasField</span><span class="p">(</span><span class="s1">&#39;interval&#39;</span><span class="p">):</span>
</span><span id="CpModel.GetIntervalVarFromProtoIndex-1884"><a href="#CpModel.GetIntervalVarFromProtoIndex-1884"><span class="linenos">1884</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="CpModel.GetIntervalVarFromProtoIndex-1885"><a href="#CpModel.GetIntervalVarFromProtoIndex-1885"><span class="linenos">1885</span></a>                <span class="sa">f</span><span class="s1">&#39;GetIntervalVarFromProtoIndex: index </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s1"> does not reference an&#39;</span>
</span><span id="CpModel.GetIntervalVarFromProtoIndex-1886"><a href="#CpModel.GetIntervalVarFromProtoIndex-1886"><span class="linenos">1886</span></a>                <span class="o">+</span> <span class="s1">&#39; interval variable&#39;</span><span class="p">)</span>
</span><span id="CpModel.GetIntervalVarFromProtoIndex-1887"><a href="#CpModel.GetIntervalVarFromProtoIndex-1887"><span class="linenos">1887</span></a>
</span><span id="CpModel.GetIntervalVarFromProtoIndex-1888"><a href="#CpModel.GetIntervalVarFromProtoIndex-1888"><span class="linenos">1888</span></a>        <span class="k">return</span> <span class="n">IntervalVar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns an already created interval variable from its index.</p>
</div>


                            </div>
                            <div id="CpModel.Proto" class="classattr">
                                        <input id="CpModel.Proto-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Proto</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.Proto-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.Proto"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.Proto-1895"><a href="#CpModel.Proto-1895"><span class="linenos">1895</span></a>    <span class="k">def</span> <span class="nf">Proto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel.Proto-1896"><a href="#CpModel.Proto-1896"><span class="linenos">1896</span></a>        <span class="sd">&quot;&quot;&quot;Returns the underlying CpModelProto.&quot;&quot;&quot;</span>
</span><span id="CpModel.Proto-1897"><a href="#CpModel.Proto-1897"><span class="linenos">1897</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span>
</span></pre></div>


            <div class="docstring"><p>Returns the underlying CpModelProto.</p>
</div>


                            </div>
                            <div id="CpModel.Negated" class="classattr">
                                        <input id="CpModel.Negated-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Negated</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">index</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.Negated-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.Negated"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.Negated-1899"><a href="#CpModel.Negated-1899"><span class="linenos">1899</span></a>    <span class="k">def</span> <span class="nf">Negated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
</span><span id="CpModel.Negated-1900"><a href="#CpModel.Negated-1900"><span class="linenos">1900</span></a>        <span class="k">return</span> <span class="o">-</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span>
</span></pre></div>


    

                            </div>
                            <div id="CpModel.GetOrMakeIndex" class="classattr">
                                        <input id="CpModel.GetOrMakeIndex-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">GetOrMakeIndex</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">arg</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.GetOrMakeIndex-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.GetOrMakeIndex"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.GetOrMakeIndex-1902"><a href="#CpModel.GetOrMakeIndex-1902"><span class="linenos">1902</span></a>    <span class="k">def</span> <span class="nf">GetOrMakeIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="CpModel.GetOrMakeIndex-1903"><a href="#CpModel.GetOrMakeIndex-1903"><span class="linenos">1903</span></a>        <span class="sd">&quot;&quot;&quot;Returns the index of a variable, its negation, or a number.&quot;&quot;&quot;</span>
</span><span id="CpModel.GetOrMakeIndex-1904"><a href="#CpModel.GetOrMakeIndex-1904"><span class="linenos">1904</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpModel.GetOrMakeIndex-1905"><a href="#CpModel.GetOrMakeIndex-1905"><span class="linenos">1905</span></a>            <span class="k">return</span> <span class="n">arg</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="CpModel.GetOrMakeIndex-1906"><a href="#CpModel.GetOrMakeIndex-1906"><span class="linenos">1906</span></a>        <span class="k">elif</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">)</span> <span class="ow">and</span>
</span><span id="CpModel.GetOrMakeIndex-1907"><a href="#CpModel.GetOrMakeIndex-1907"><span class="linenos">1907</span></a>              <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">IntVar</span><span class="p">)</span> <span class="ow">and</span> <span class="n">arg</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="CpModel.GetOrMakeIndex-1908"><a href="#CpModel.GetOrMakeIndex-1908"><span class="linenos">1908</span></a>            <span class="k">return</span> <span class="o">-</span><span class="n">arg</span><span class="o">.</span><span class="n">Expression</span><span class="p">()</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="CpModel.GetOrMakeIndex-1909"><a href="#CpModel.GetOrMakeIndex-1909"><span class="linenos">1909</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="CpModel.GetOrMakeIndex-1910"><a href="#CpModel.GetOrMakeIndex-1910"><span class="linenos">1910</span></a>            <span class="n">arg</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="CpModel.GetOrMakeIndex-1911"><a href="#CpModel.GetOrMakeIndex-1911"><span class="linenos">1911</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndexFromConstant</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="CpModel.GetOrMakeIndex-1912"><a href="#CpModel.GetOrMakeIndex-1912"><span class="linenos">1912</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel.GetOrMakeIndex-1913"><a href="#CpModel.GetOrMakeIndex-1913"><span class="linenos">1913</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;NotSupported: model.GetOrMakeIndex(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span>
</span><span id="CpModel.GetOrMakeIndex-1914"><a href="#CpModel.GetOrMakeIndex-1914"><span class="linenos">1914</span></a>                            <span class="s1">&#39;)&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns the index of a variable, its negation, or a number.</p>
</div>


                            </div>
                            <div id="CpModel.GetOrMakeBooleanIndex" class="classattr">
                                        <input id="CpModel.GetOrMakeBooleanIndex-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">GetOrMakeBooleanIndex</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">arg</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.GetOrMakeBooleanIndex-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.GetOrMakeBooleanIndex"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.GetOrMakeBooleanIndex-1916"><a href="#CpModel.GetOrMakeBooleanIndex-1916"><span class="linenos">1916</span></a>    <span class="k">def</span> <span class="nf">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="CpModel.GetOrMakeBooleanIndex-1917"><a href="#CpModel.GetOrMakeBooleanIndex-1917"><span class="linenos">1917</span></a>        <span class="sd">&quot;&quot;&quot;Returns an index from a boolean expression.&quot;&quot;&quot;</span>
</span><span id="CpModel.GetOrMakeBooleanIndex-1918"><a href="#CpModel.GetOrMakeBooleanIndex-1918"><span class="linenos">1918</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpModel.GetOrMakeBooleanIndex-1919"><a href="#CpModel.GetOrMakeBooleanIndex-1919"><span class="linenos">1919</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">AssertIsBooleanVariable</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="CpModel.GetOrMakeBooleanIndex-1920"><a href="#CpModel.GetOrMakeBooleanIndex-1920"><span class="linenos">1920</span></a>            <span class="k">return</span> <span class="n">arg</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="CpModel.GetOrMakeBooleanIndex-1921"><a href="#CpModel.GetOrMakeBooleanIndex-1921"><span class="linenos">1921</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="CpModel.GetOrMakeBooleanIndex-1922"><a href="#CpModel.GetOrMakeBooleanIndex-1922"><span class="linenos">1922</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">AssertIsBooleanVariable</span><span class="p">(</span><span class="n">arg</span><span class="o">.</span><span class="n">Not</span><span class="p">())</span>
</span><span id="CpModel.GetOrMakeBooleanIndex-1923"><a href="#CpModel.GetOrMakeBooleanIndex-1923"><span class="linenos">1923</span></a>            <span class="k">return</span> <span class="n">arg</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="CpModel.GetOrMakeBooleanIndex-1924"><a href="#CpModel.GetOrMakeBooleanIndex-1924"><span class="linenos">1924</span></a>        <span class="k">elif</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
</span><span id="CpModel.GetOrMakeBooleanIndex-1925"><a href="#CpModel.GetOrMakeBooleanIndex-1925"><span class="linenos">1925</span></a>            <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_boolean</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
</span><span id="CpModel.GetOrMakeBooleanIndex-1926"><a href="#CpModel.GetOrMakeBooleanIndex-1926"><span class="linenos">1926</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndexFromConstant</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">arg</span><span class="p">))</span>
</span><span id="CpModel.GetOrMakeBooleanIndex-1927"><a href="#CpModel.GetOrMakeBooleanIndex-1927"><span class="linenos">1927</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel.GetOrMakeBooleanIndex-1928"><a href="#CpModel.GetOrMakeBooleanIndex-1928"><span class="linenos">1928</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;NotSupported: model.GetOrMakeBooleanIndex(&#39;</span> <span class="o">+</span>
</span><span id="CpModel.GetOrMakeBooleanIndex-1929"><a href="#CpModel.GetOrMakeBooleanIndex-1929"><span class="linenos">1929</span></a>                            <span class="nb">str</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns an index from a boolean expression.</p>
</div>


                            </div>
                            <div id="CpModel.GetIntervalIndex" class="classattr">
                                        <input id="CpModel.GetIntervalIndex-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">GetIntervalIndex</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">arg</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.GetIntervalIndex-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.GetIntervalIndex"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.GetIntervalIndex-1931"><a href="#CpModel.GetIntervalIndex-1931"><span class="linenos">1931</span></a>    <span class="k">def</span> <span class="nf">GetIntervalIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
</span><span id="CpModel.GetIntervalIndex-1932"><a href="#CpModel.GetIntervalIndex-1932"><span class="linenos">1932</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">IntervalVar</span><span class="p">):</span>
</span><span id="CpModel.GetIntervalIndex-1933"><a href="#CpModel.GetIntervalIndex-1933"><span class="linenos">1933</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;NotSupported: model.GetIntervalIndex(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">arg</span><span class="p">)</span>
</span><span id="CpModel.GetIntervalIndex-1934"><a href="#CpModel.GetIntervalIndex-1934"><span class="linenos">1934</span></a>        <span class="k">return</span> <span class="n">arg</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="CpModel.GetOrMakeIndexFromConstant" class="classattr">
                                        <input id="CpModel.GetOrMakeIndexFromConstant-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">GetOrMakeIndexFromConstant</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.GetOrMakeIndexFromConstant-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.GetOrMakeIndexFromConstant"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.GetOrMakeIndexFromConstant-1936"><a href="#CpModel.GetOrMakeIndexFromConstant-1936"><span class="linenos">1936</span></a>    <span class="k">def</span> <span class="nf">GetOrMakeIndexFromConstant</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="CpModel.GetOrMakeIndexFromConstant-1937"><a href="#CpModel.GetOrMakeIndexFromConstant-1937"><span class="linenos">1937</span></a>        <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="p">:</span>
</span><span id="CpModel.GetOrMakeIndexFromConstant-1938"><a href="#CpModel.GetOrMakeIndexFromConstant-1938"><span class="linenos">1938</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
</span><span id="CpModel.GetOrMakeIndexFromConstant-1939"><a href="#CpModel.GetOrMakeIndexFromConstant-1939"><span class="linenos">1939</span></a>        <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
</span><span id="CpModel.GetOrMakeIndexFromConstant-1940"><a href="#CpModel.GetOrMakeIndexFromConstant-1940"><span class="linenos">1940</span></a>        <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="CpModel.GetOrMakeIndexFromConstant-1941"><a href="#CpModel.GetOrMakeIndexFromConstant-1941"><span class="linenos">1941</span></a>        <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">value</span><span class="p">,</span> <span class="n">value</span><span class="p">])</span>
</span><span id="CpModel.GetOrMakeIndexFromConstant-1942"><a href="#CpModel.GetOrMakeIndexFromConstant-1942"><span class="linenos">1942</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__constant_map</span><span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span>
</span><span id="CpModel.GetOrMakeIndexFromConstant-1943"><a href="#CpModel.GetOrMakeIndexFromConstant-1943"><span class="linenos">1943</span></a>        <span class="k">return</span> <span class="n">index</span>
</span></pre></div>


    

                            </div>
                            <div id="CpModel.VarIndexToVarProto" class="classattr">
                                        <input id="CpModel.VarIndexToVarProto-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">VarIndexToVarProto</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">var_index</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.VarIndexToVarProto-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.VarIndexToVarProto"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.VarIndexToVarProto-1945"><a href="#CpModel.VarIndexToVarProto-1945"><span class="linenos">1945</span></a>    <span class="k">def</span> <span class="nf">VarIndexToVarProto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_index</span><span class="p">):</span>
</span><span id="CpModel.VarIndexToVarProto-1946"><a href="#CpModel.VarIndexToVarProto-1946"><span class="linenos">1946</span></a>        <span class="k">if</span> <span class="n">var_index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="CpModel.VarIndexToVarProto-1947"><a href="#CpModel.VarIndexToVarProto-1947"><span class="linenos">1947</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">var_index</span><span class="p">]</span>
</span><span id="CpModel.VarIndexToVarProto-1948"><a href="#CpModel.VarIndexToVarProto-1948"><span class="linenos">1948</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CpModel.VarIndexToVarProto-1949"><a href="#CpModel.VarIndexToVarProto-1949"><span class="linenos">1949</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="o">-</span><span class="n">var_index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
</span></pre></div>


    

                            </div>
                            <div id="CpModel.ParseLinearExpression" class="classattr">
                                        <input id="CpModel.ParseLinearExpression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ParseLinearExpression</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">linear_expr</span>, </span><span class="param"><span class="n">negate</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.ParseLinearExpression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.ParseLinearExpression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.ParseLinearExpression-1951"><a href="#CpModel.ParseLinearExpression-1951"><span class="linenos">1951</span></a>    <span class="k">def</span> <span class="nf">ParseLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_expr</span><span class="p">,</span> <span class="n">negate</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="CpModel.ParseLinearExpression-1952"><a href="#CpModel.ParseLinearExpression-1952"><span class="linenos">1952</span></a>        <span class="sd">&quot;&quot;&quot;Returns a LinearExpressionProto built from a LinearExpr instance.&quot;&quot;&quot;</span>
</span><span id="CpModel.ParseLinearExpression-1953"><a href="#CpModel.ParseLinearExpression-1953"><span class="linenos">1953</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">LinearExpressionProto</span><span class="p">()</span>
</span><span id="CpModel.ParseLinearExpression-1954"><a href="#CpModel.ParseLinearExpression-1954"><span class="linenos">1954</span></a>        <span class="n">mult</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">negate</span> <span class="k">else</span> <span class="mi">1</span>
</span><span id="CpModel.ParseLinearExpression-1955"><a href="#CpModel.ParseLinearExpression-1955"><span class="linenos">1955</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">):</span>
</span><span id="CpModel.ParseLinearExpression-1956"><a href="#CpModel.ParseLinearExpression-1956"><span class="linenos">1956</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">)</span> <span class="o">*</span> <span class="n">mult</span>
</span><span id="CpModel.ParseLinearExpression-1957"><a href="#CpModel.ParseLinearExpression-1957"><span class="linenos">1957</span></a>            <span class="k">return</span> <span class="n">result</span>
</span><span id="CpModel.ParseLinearExpression-1958"><a href="#CpModel.ParseLinearExpression-1958"><span class="linenos">1958</span></a>
</span><span id="CpModel.ParseLinearExpression-1959"><a href="#CpModel.ParseLinearExpression-1959"><span class="linenos">1959</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpModel.ParseLinearExpression-1960"><a href="#CpModel.ParseLinearExpression-1960"><span class="linenos">1960</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">linear_expr</span><span class="p">))</span>
</span><span id="CpModel.ParseLinearExpression-1961"><a href="#CpModel.ParseLinearExpression-1961"><span class="linenos">1961</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mult</span><span class="p">)</span>
</span><span id="CpModel.ParseLinearExpression-1962"><a href="#CpModel.ParseLinearExpression-1962"><span class="linenos">1962</span></a>            <span class="k">return</span> <span class="n">result</span>
</span><span id="CpModel.ParseLinearExpression-1963"><a href="#CpModel.ParseLinearExpression-1963"><span class="linenos">1963</span></a>
</span><span id="CpModel.ParseLinearExpression-1964"><a href="#CpModel.ParseLinearExpression-1964"><span class="linenos">1964</span></a>        <span class="n">coeffs_map</span><span class="p">,</span> <span class="n">constant</span> <span class="o">=</span> <span class="n">linear_expr</span><span class="o">.</span><span class="n">GetIntegerVarValueMap</span><span class="p">()</span>
</span><span id="CpModel.ParseLinearExpression-1965"><a href="#CpModel.ParseLinearExpression-1965"><span class="linenos">1965</span></a>        <span class="n">result</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">constant</span> <span class="o">*</span> <span class="n">mult</span>
</span><span id="CpModel.ParseLinearExpression-1966"><a href="#CpModel.ParseLinearExpression-1966"><span class="linenos">1966</span></a>        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">coeffs_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="CpModel.ParseLinearExpression-1967"><a href="#CpModel.ParseLinearExpression-1967"><span class="linenos">1967</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpModel.ParseLinearExpression-1968"><a href="#CpModel.ParseLinearExpression-1968"><span class="linenos">1968</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Wrong argument&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
</span><span id="CpModel.ParseLinearExpression-1969"><a href="#CpModel.ParseLinearExpression-1969"><span class="linenos">1969</span></a>            <span class="n">c</span> <span class="o">=</span> <span class="n">cmh</span><span class="o">.</span><span class="n">assert_is_int64</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="CpModel.ParseLinearExpression-1970"><a href="#CpModel.ParseLinearExpression-1970"><span class="linenos">1970</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="CpModel.ParseLinearExpression-1971"><a href="#CpModel.ParseLinearExpression-1971"><span class="linenos">1971</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">coeffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span> <span class="n">mult</span><span class="p">)</span>
</span><span id="CpModel.ParseLinearExpression-1972"><a href="#CpModel.ParseLinearExpression-1972"><span class="linenos">1972</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Returns a LinearExpressionProto built from a LinearExpr instance.</p>
</div>


                            </div>
                            <div id="CpModel.Minimize" class="classattr">
                                        <input id="CpModel.Minimize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Minimize</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">obj</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.Minimize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.Minimize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.Minimize-2015"><a href="#CpModel.Minimize-2015"><span class="linenos">2015</span></a>    <span class="k">def</span> <span class="nf">Minimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span><span id="CpModel.Minimize-2016"><a href="#CpModel.Minimize-2016"><span class="linenos">2016</span></a>        <span class="sd">&quot;&quot;&quot;Sets the objective of the model to minimize(obj).&quot;&quot;&quot;</span>
</span><span id="CpModel.Minimize-2017"><a href="#CpModel.Minimize-2017"><span class="linenos">2017</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_SetObjective</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">minimize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Sets the objective of the model to minimize(obj).</p>
</div>


                            </div>
                            <div id="CpModel.Maximize" class="classattr">
                                        <input id="CpModel.Maximize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Maximize</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">obj</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.Maximize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.Maximize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.Maximize-2019"><a href="#CpModel.Maximize-2019"><span class="linenos">2019</span></a>    <span class="k">def</span> <span class="nf">Maximize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
</span><span id="CpModel.Maximize-2020"><a href="#CpModel.Maximize-2020"><span class="linenos">2020</span></a>        <span class="sd">&quot;&quot;&quot;Sets the objective of the model to maximize(obj).&quot;&quot;&quot;</span>
</span><span id="CpModel.Maximize-2021"><a href="#CpModel.Maximize-2021"><span class="linenos">2021</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_SetObjective</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">minimize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Sets the objective of the model to maximize(obj).</p>
</div>


                            </div>
                            <div id="CpModel.HasObjective" class="classattr">
                                        <input id="CpModel.HasObjective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">HasObjective</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.HasObjective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.HasObjective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.HasObjective-2023"><a href="#CpModel.HasObjective-2023"><span class="linenos">2023</span></a>    <span class="k">def</span> <span class="nf">HasObjective</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel.HasObjective-2024"><a href="#CpModel.HasObjective-2024"><span class="linenos">2024</span></a>        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">HasField</span><span class="p">(</span><span class="s1">&#39;objective&#39;</span><span class="p">)</span> <span class="ow">or</span>
</span><span id="CpModel.HasObjective-2025"><a href="#CpModel.HasObjective-2025"><span class="linenos">2025</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">HasField</span><span class="p">(</span><span class="s1">&#39;floating_point_objective&#39;</span><span class="p">))</span>
</span></pre></div>


    

                            </div>
                            <div id="CpModel.ClearObjective" class="classattr">
                                        <input id="CpModel.ClearObjective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ClearObjective</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.ClearObjective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.ClearObjective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.ClearObjective-2027"><a href="#CpModel.ClearObjective-2027"><span class="linenos">2027</span></a>    <span class="k">def</span> <span class="nf">ClearObjective</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel.ClearObjective-2028"><a href="#CpModel.ClearObjective-2028"><span class="linenos">2028</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;objective&#39;</span><span class="p">)</span>
</span><span id="CpModel.ClearObjective-2029"><a href="#CpModel.ClearObjective-2029"><span class="linenos">2029</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;floating_point_objective&#39;</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="CpModel.AddDecisionStrategy" class="classattr">
                                        <input id="CpModel.AddDecisionStrategy-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddDecisionStrategy</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">variables</span>, </span><span class="param"><span class="n">var_strategy</span>, </span><span class="param"><span class="n">domain_strategy</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddDecisionStrategy-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddDecisionStrategy"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddDecisionStrategy-2031"><a href="#CpModel.AddDecisionStrategy-2031"><span class="linenos">2031</span></a>    <span class="k">def</span> <span class="nf">AddDecisionStrategy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">,</span> <span class="n">var_strategy</span><span class="p">,</span> <span class="n">domain_strategy</span><span class="p">):</span>
</span><span id="CpModel.AddDecisionStrategy-2032"><a href="#CpModel.AddDecisionStrategy-2032"><span class="linenos">2032</span></a>        <span class="sd">&quot;&quot;&quot;Adds a search strategy to the model.</span>
</span><span id="CpModel.AddDecisionStrategy-2033"><a href="#CpModel.AddDecisionStrategy-2033"><span class="linenos">2033</span></a>
</span><span id="CpModel.AddDecisionStrategy-2034"><a href="#CpModel.AddDecisionStrategy-2034"><span class="linenos">2034</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.AddDecisionStrategy-2035"><a href="#CpModel.AddDecisionStrategy-2035"><span class="linenos">2035</span></a><span class="sd">      variables: a list of variables this strategy will assign.</span>
</span><span id="CpModel.AddDecisionStrategy-2036"><a href="#CpModel.AddDecisionStrategy-2036"><span class="linenos">2036</span></a><span class="sd">      var_strategy: heuristic to choose the next variable to assign.</span>
</span><span id="CpModel.AddDecisionStrategy-2037"><a href="#CpModel.AddDecisionStrategy-2037"><span class="linenos">2037</span></a><span class="sd">      domain_strategy: heuristic to reduce the domain of the selected variable.</span>
</span><span id="CpModel.AddDecisionStrategy-2038"><a href="#CpModel.AddDecisionStrategy-2038"><span class="linenos">2038</span></a><span class="sd">        Currently, this is advanced code: the union of all strategies added to</span>
</span><span id="CpModel.AddDecisionStrategy-2039"><a href="#CpModel.AddDecisionStrategy-2039"><span class="linenos">2039</span></a><span class="sd">        the model must be complete, i.e. instantiates all variables. Otherwise,</span>
</span><span id="CpModel.AddDecisionStrategy-2040"><a href="#CpModel.AddDecisionStrategy-2040"><span class="linenos">2040</span></a><span class="sd">        Solve() will fail.</span>
</span><span id="CpModel.AddDecisionStrategy-2041"><a href="#CpModel.AddDecisionStrategy-2041"><span class="linenos">2041</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.AddDecisionStrategy-2042"><a href="#CpModel.AddDecisionStrategy-2042"><span class="linenos">2042</span></a>
</span><span id="CpModel.AddDecisionStrategy-2043"><a href="#CpModel.AddDecisionStrategy-2043"><span class="linenos">2043</span></a>        <span class="n">strategy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">search_strategy</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
</span><span id="CpModel.AddDecisionStrategy-2044"><a href="#CpModel.AddDecisionStrategy-2044"><span class="linenos">2044</span></a>        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">:</span>
</span><span id="CpModel.AddDecisionStrategy-2045"><a href="#CpModel.AddDecisionStrategy-2045"><span class="linenos">2045</span></a>            <span class="n">strategy</span><span class="o">.</span><span class="n">variables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="CpModel.AddDecisionStrategy-2046"><a href="#CpModel.AddDecisionStrategy-2046"><span class="linenos">2046</span></a>        <span class="n">strategy</span><span class="o">.</span><span class="n">variable_selection_strategy</span> <span class="o">=</span> <span class="n">var_strategy</span>
</span><span id="CpModel.AddDecisionStrategy-2047"><a href="#CpModel.AddDecisionStrategy-2047"><span class="linenos">2047</span></a>        <span class="n">strategy</span><span class="o">.</span><span class="n">domain_reduction_strategy</span> <span class="o">=</span> <span class="n">domain_strategy</span>
</span></pre></div>


            <div class="docstring"><p>Adds a search strategy to the model.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>variables:</strong>  a list of variables this strategy will assign.</li>
<li><strong>var_strategy:</strong>  heuristic to choose the next variable to assign.</li>
<li><strong>domain_strategy:</strong>  heuristic to reduce the domain of the selected variable.
Currently, this is advanced code: the union of all strategies added to
the model must be complete, i.e. instantiates all variables. Otherwise,
Solve() will fail.</li>
</ul>
</div>


                            </div>
                            <div id="CpModel.ModelStats" class="classattr">
                                        <input id="CpModel.ModelStats-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ModelStats</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.ModelStats-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.ModelStats"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.ModelStats-2049"><a href="#CpModel.ModelStats-2049"><span class="linenos">2049</span></a>    <span class="k">def</span> <span class="nf">ModelStats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel.ModelStats-2050"><a href="#CpModel.ModelStats-2050"><span class="linenos">2050</span></a>        <span class="sd">&quot;&quot;&quot;Returns a string containing some model statistics.&quot;&quot;&quot;</span>
</span><span id="CpModel.ModelStats-2051"><a href="#CpModel.ModelStats-2051"><span class="linenos">2051</span></a>        <span class="k">return</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">CpSatHelper</span><span class="o">.</span><span class="n">SerializedModelStats</span><span class="p">(</span>
</span><span id="CpModel.ModelStats-2052"><a href="#CpModel.ModelStats-2052"><span class="linenos">2052</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Returns a string containing some model statistics.</p>
</div>


                            </div>
                            <div id="CpModel.Validate" class="classattr">
                                        <input id="CpModel.Validate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Validate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.Validate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.Validate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.Validate-2054"><a href="#CpModel.Validate-2054"><span class="linenos">2054</span></a>    <span class="k">def</span> <span class="nf">Validate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel.Validate-2055"><a href="#CpModel.Validate-2055"><span class="linenos">2055</span></a>        <span class="sd">&quot;&quot;&quot;Returns a string indicating that the model is invalid.&quot;&quot;&quot;</span>
</span><span id="CpModel.Validate-2056"><a href="#CpModel.Validate-2056"><span class="linenos">2056</span></a>        <span class="k">return</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">CpSatHelper</span><span class="o">.</span><span class="n">SerializedValidateModel</span><span class="p">(</span>
</span><span id="CpModel.Validate-2057"><a href="#CpModel.Validate-2057"><span class="linenos">2057</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Returns a string indicating that the model is invalid.</p>
</div>


                            </div>
                            <div id="CpModel.ExportToFile" class="classattr">
                                        <input id="CpModel.ExportToFile-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ExportToFile</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">file</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.ExportToFile-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.ExportToFile"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.ExportToFile-2059"><a href="#CpModel.ExportToFile-2059"><span class="linenos">2059</span></a>    <span class="k">def</span> <span class="nf">ExportToFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
</span><span id="CpModel.ExportToFile-2060"><a href="#CpModel.ExportToFile-2060"><span class="linenos">2060</span></a>        <span class="sd">&quot;&quot;&quot;Write the model as a protocol buffer to &#39;file&#39;.</span>
</span><span id="CpModel.ExportToFile-2061"><a href="#CpModel.ExportToFile-2061"><span class="linenos">2061</span></a>
</span><span id="CpModel.ExportToFile-2062"><a href="#CpModel.ExportToFile-2062"><span class="linenos">2062</span></a><span class="sd">    Args:</span>
</span><span id="CpModel.ExportToFile-2063"><a href="#CpModel.ExportToFile-2063"><span class="linenos">2063</span></a><span class="sd">      file: file to write the model to. If the filename ends with &#39;txt&#39;, the</span>
</span><span id="CpModel.ExportToFile-2064"><a href="#CpModel.ExportToFile-2064"><span class="linenos">2064</span></a><span class="sd">        model will be written as a text file, otherwise, the binary format will</span>
</span><span id="CpModel.ExportToFile-2065"><a href="#CpModel.ExportToFile-2065"><span class="linenos">2065</span></a><span class="sd">        be used.</span>
</span><span id="CpModel.ExportToFile-2066"><a href="#CpModel.ExportToFile-2066"><span class="linenos">2066</span></a>
</span><span id="CpModel.ExportToFile-2067"><a href="#CpModel.ExportToFile-2067"><span class="linenos">2067</span></a><span class="sd">    Returns:</span>
</span><span id="CpModel.ExportToFile-2068"><a href="#CpModel.ExportToFile-2068"><span class="linenos">2068</span></a><span class="sd">      True if the model was correctly written.</span>
</span><span id="CpModel.ExportToFile-2069"><a href="#CpModel.ExportToFile-2069"><span class="linenos">2069</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpModel.ExportToFile-2070"><a href="#CpModel.ExportToFile-2070"><span class="linenos">2070</span></a>        <span class="k">return</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">CpSatHelper</span><span class="o">.</span><span class="n">SerializedWriteModelToFile</span><span class="p">(</span>
</span><span id="CpModel.ExportToFile-2071"><a href="#CpModel.ExportToFile-2071"><span class="linenos">2071</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">(),</span> <span class="n">file</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Write the model as a protocol buffer to 'file'.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>file:</strong>  file to write the model to. If the filename ends with 'txt', the
model will be written as a text file, otherwise, the binary format will
be used.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True if the model was correctly written.</p>
</blockquote>
</div>


                            </div>
                            <div id="CpModel.AssertIsBooleanVariable" class="classattr">
                                        <input id="CpModel.AssertIsBooleanVariable-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AssertIsBooleanVariable</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">x</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AssertIsBooleanVariable-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AssertIsBooleanVariable"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AssertIsBooleanVariable-2073"><a href="#CpModel.AssertIsBooleanVariable-2073"><span class="linenos">2073</span></a>    <span class="k">def</span> <span class="nf">AssertIsBooleanVariable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
</span><span id="CpModel.AssertIsBooleanVariable-2074"><a href="#CpModel.AssertIsBooleanVariable-2074"><span class="linenos">2074</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpModel.AssertIsBooleanVariable-2075"><a href="#CpModel.AssertIsBooleanVariable-2075"><span class="linenos">2075</span></a>            <span class="n">var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="CpModel.AssertIsBooleanVariable-2076"><a href="#CpModel.AssertIsBooleanVariable-2076"><span class="linenos">2076</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">var</span><span class="o">.</span><span class="n">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="CpModel.AssertIsBooleanVariable-2077"><a href="#CpModel.AssertIsBooleanVariable-2077"><span class="linenos">2077</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;TypeError: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span>
</span><span id="CpModel.AssertIsBooleanVariable-2078"><a href="#CpModel.AssertIsBooleanVariable-2078"><span class="linenos">2078</span></a>                                <span class="s1">&#39; is not a boolean variable&#39;</span><span class="p">)</span>
</span><span id="CpModel.AssertIsBooleanVariable-2079"><a href="#CpModel.AssertIsBooleanVariable-2079"><span class="linenos">2079</span></a>        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="CpModel.AssertIsBooleanVariable-2080"><a href="#CpModel.AssertIsBooleanVariable-2080"><span class="linenos">2080</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;TypeError: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span>
</span><span id="CpModel.AssertIsBooleanVariable-2081"><a href="#CpModel.AssertIsBooleanVariable-2081"><span class="linenos">2081</span></a>                            <span class="s1">&#39; is not a boolean variable&#39;</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="CpModel.AddHint" class="classattr">
                                        <input id="CpModel.AddHint-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddHint</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">var</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddHint-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddHint"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddHint-2083"><a href="#CpModel.AddHint-2083"><span class="linenos">2083</span></a>    <span class="k">def</span> <span class="nf">AddHint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="CpModel.AddHint-2084"><a href="#CpModel.AddHint-2084"><span class="linenos">2084</span></a>        <span class="sd">&quot;&quot;&quot;Adds &#39;var == value&#39; as a hint to the solver.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddHint-2085"><a href="#CpModel.AddHint-2085"><span class="linenos">2085</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">solution_hint</span><span class="o">.</span><span class="n">vars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeIndex</span><span class="p">(</span><span class="n">var</span><span class="p">))</span>
</span><span id="CpModel.AddHint-2086"><a href="#CpModel.AddHint-2086"><span class="linenos">2086</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">solution_hint</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Adds 'var == value' as a hint to the solver.</p>
</div>


                            </div>
                            <div id="CpModel.ClearHints" class="classattr">
                                        <input id="CpModel.ClearHints-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ClearHints</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.ClearHints-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.ClearHints"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.ClearHints-2088"><a href="#CpModel.ClearHints-2088"><span class="linenos">2088</span></a>    <span class="k">def</span> <span class="nf">ClearHints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel.ClearHints-2089"><a href="#CpModel.ClearHints-2089"><span class="linenos">2089</span></a>        <span class="sd">&quot;&quot;&quot;Remove any solution hint from the model.&quot;&quot;&quot;</span>
</span><span id="CpModel.ClearHints-2090"><a href="#CpModel.ClearHints-2090"><span class="linenos">2090</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;solution_hint&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Remove any solution hint from the model.</p>
</div>


                            </div>
                            <div id="CpModel.AddAssumption" class="classattr">
                                        <input id="CpModel.AddAssumption-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddAssumption</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">lit</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddAssumption-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddAssumption"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddAssumption-2092"><a href="#CpModel.AddAssumption-2092"><span class="linenos">2092</span></a>    <span class="k">def</span> <span class="nf">AddAssumption</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lit</span><span class="p">):</span>
</span><span id="CpModel.AddAssumption-2093"><a href="#CpModel.AddAssumption-2093"><span class="linenos">2093</span></a>        <span class="sd">&quot;&quot;&quot;Add the literal &#39;lit&#39; to the model as assumptions.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddAssumption-2094"><a href="#CpModel.AddAssumption-2094"><span class="linenos">2094</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">assumptions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetOrMakeBooleanIndex</span><span class="p">(</span><span class="n">lit</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Add the literal 'lit' to the model as assumptions.</p>
</div>


                            </div>
                            <div id="CpModel.AddAssumptions" class="classattr">
                                        <input id="CpModel.AddAssumptions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">AddAssumptions</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">literals</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.AddAssumptions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.AddAssumptions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.AddAssumptions-2096"><a href="#CpModel.AddAssumptions-2096"><span class="linenos">2096</span></a>    <span class="k">def</span> <span class="nf">AddAssumptions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">literals</span><span class="p">):</span>
</span><span id="CpModel.AddAssumptions-2097"><a href="#CpModel.AddAssumptions-2097"><span class="linenos">2097</span></a>        <span class="sd">&quot;&quot;&quot;Add the literals to the model as assumptions.&quot;&quot;&quot;</span>
</span><span id="CpModel.AddAssumptions-2098"><a href="#CpModel.AddAssumptions-2098"><span class="linenos">2098</span></a>        <span class="k">for</span> <span class="n">lit</span> <span class="ow">in</span> <span class="n">literals</span><span class="p">:</span>
</span><span id="CpModel.AddAssumptions-2099"><a href="#CpModel.AddAssumptions-2099"><span class="linenos">2099</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">AddAssumption</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Add the literals to the model as assumptions.</p>
</div>


                            </div>
                            <div id="CpModel.ClearAssumptions" class="classattr">
                                        <input id="CpModel.ClearAssumptions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ClearAssumptions</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpModel.ClearAssumptions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpModel.ClearAssumptions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpModel.ClearAssumptions-2101"><a href="#CpModel.ClearAssumptions-2101"><span class="linenos">2101</span></a>    <span class="k">def</span> <span class="nf">ClearAssumptions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpModel.ClearAssumptions-2102"><a href="#CpModel.ClearAssumptions-2102"><span class="linenos">2102</span></a>        <span class="sd">&quot;&quot;&quot;Remove all assumptions from the model.&quot;&quot;&quot;</span>
</span><span id="CpModel.ClearAssumptions-2103"><a href="#CpModel.ClearAssumptions-2103"><span class="linenos">2103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__model</span><span class="o">.</span><span class="n">ClearField</span><span class="p">(</span><span class="s1">&#39;assumptions&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Remove all assumptions from the model.</p>
</div>


                            </div>
                </section>
                <section id="ExpandGeneratorOrTuple">
                            <input id="ExpandGeneratorOrTuple-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ExpandGeneratorOrTuple</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">args</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ExpandGeneratorOrTuple-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ExpandGeneratorOrTuple"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ExpandGeneratorOrTuple-2106"><a href="#ExpandGeneratorOrTuple-2106"><span class="linenos">2106</span></a><span class="k">def</span> <span class="nf">ExpandGeneratorOrTuple</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
</span><span id="ExpandGeneratorOrTuple-2107"><a href="#ExpandGeneratorOrTuple-2107"><span class="linenos">2107</span></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s1">&#39;__len__&#39;</span><span class="p">):</span>  <span class="c1"># Tuple</span>
</span><span id="ExpandGeneratorOrTuple-2108"><a href="#ExpandGeneratorOrTuple-2108"><span class="linenos">2108</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="ExpandGeneratorOrTuple-2109"><a href="#ExpandGeneratorOrTuple-2109"><span class="linenos">2109</span></a>            <span class="k">return</span> <span class="n">args</span>
</span><span id="ExpandGeneratorOrTuple-2110"><a href="#ExpandGeneratorOrTuple-2110"><span class="linenos">2110</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_a_number</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="ExpandGeneratorOrTuple-2111"><a href="#ExpandGeneratorOrTuple-2111"><span class="linenos">2111</span></a>            <span class="k">return</span> <span class="n">args</span>
</span><span id="ExpandGeneratorOrTuple-2112"><a href="#ExpandGeneratorOrTuple-2112"><span class="linenos">2112</span></a>    <span class="c1"># Generator</span>
</span><span id="ExpandGeneratorOrTuple-2113"><a href="#ExpandGeneratorOrTuple-2113"><span class="linenos">2113</span></a>    <span class="k">return</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></pre></div>


    

                </section>
                <section id="EvaluateLinearExpr">
                            <input id="EvaluateLinearExpr-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">EvaluateLinearExpr</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">expression</span>, </span><span class="param"><span class="n">solution</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="EvaluateLinearExpr-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EvaluateLinearExpr"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EvaluateLinearExpr-2116"><a href="#EvaluateLinearExpr-2116"><span class="linenos">2116</span></a><span class="k">def</span> <span class="nf">EvaluateLinearExpr</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">solution</span><span class="p">):</span>
</span><span id="EvaluateLinearExpr-2117"><a href="#EvaluateLinearExpr-2117"><span class="linenos">2117</span></a>    <span class="sd">&quot;&quot;&quot;Evaluate a linear expression against a solution.&quot;&quot;&quot;</span>
</span><span id="EvaluateLinearExpr-2118"><a href="#EvaluateLinearExpr-2118"><span class="linenos">2118</span></a>    <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">expression</span><span class="p">):</span>
</span><span id="EvaluateLinearExpr-2119"><a href="#EvaluateLinearExpr-2119"><span class="linenos">2119</span></a>        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">expression</span><span class="p">)</span>
</span><span id="EvaluateLinearExpr-2120"><a href="#EvaluateLinearExpr-2120"><span class="linenos">2120</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="n">LinearExpr</span><span class="p">):</span>
</span><span id="EvaluateLinearExpr-2121"><a href="#EvaluateLinearExpr-2121"><span class="linenos">2121</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Cannot interpret </span><span class="si">%s</span><span class="s1"> as a linear expression.&#39;</span> <span class="o">%</span>
</span><span id="EvaluateLinearExpr-2122"><a href="#EvaluateLinearExpr-2122"><span class="linenos">2122</span></a>                        <span class="n">expression</span><span class="p">)</span>
</span><span id="EvaluateLinearExpr-2123"><a href="#EvaluateLinearExpr-2123"><span class="linenos">2123</span></a>
</span><span id="EvaluateLinearExpr-2124"><a href="#EvaluateLinearExpr-2124"><span class="linenos">2124</span></a>    <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="EvaluateLinearExpr-2125"><a href="#EvaluateLinearExpr-2125"><span class="linenos">2125</span></a>    <span class="n">to_process</span> <span class="o">=</span> <span class="p">[(</span><span class="n">expression</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</span><span id="EvaluateLinearExpr-2126"><a href="#EvaluateLinearExpr-2126"><span class="linenos">2126</span></a>    <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>
</span><span id="EvaluateLinearExpr-2127"><a href="#EvaluateLinearExpr-2127"><span class="linenos">2127</span></a>        <span class="n">expr</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="EvaluateLinearExpr-2128"><a href="#EvaluateLinearExpr-2128"><span class="linenos">2128</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
</span><span id="EvaluateLinearExpr-2129"><a href="#EvaluateLinearExpr-2129"><span class="linenos">2129</span></a>            <span class="n">value</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="EvaluateLinearExpr-2130"><a href="#EvaluateLinearExpr-2130"><span class="linenos">2130</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">):</span>
</span><span id="EvaluateLinearExpr-2131"><a href="#EvaluateLinearExpr-2131"><span class="linenos">2131</span></a>            <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()))</span>
</span><span id="EvaluateLinearExpr-2132"><a href="#EvaluateLinearExpr-2132"><span class="linenos">2132</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_Sum</span><span class="p">):</span>
</span><span id="EvaluateLinearExpr-2133"><a href="#EvaluateLinearExpr-2133"><span class="linenos">2133</span></a>            <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Left</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="EvaluateLinearExpr-2134"><a href="#EvaluateLinearExpr-2134"><span class="linenos">2134</span></a>            <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Right</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="EvaluateLinearExpr-2135"><a href="#EvaluateLinearExpr-2135"><span class="linenos">2135</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_SumArray</span><span class="p">):</span>
</span><span id="EvaluateLinearExpr-2136"><a href="#EvaluateLinearExpr-2136"><span class="linenos">2136</span></a>            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">():</span>
</span><span id="EvaluateLinearExpr-2137"><a href="#EvaluateLinearExpr-2137"><span class="linenos">2137</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="EvaluateLinearExpr-2138"><a href="#EvaluateLinearExpr-2138"><span class="linenos">2138</span></a>            <span class="n">value</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="EvaluateLinearExpr-2139"><a href="#EvaluateLinearExpr-2139"><span class="linenos">2139</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_WeightedSum</span><span class="p">):</span>
</span><span id="EvaluateLinearExpr-2140"><a href="#EvaluateLinearExpr-2140"><span class="linenos">2140</span></a>            <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">(),</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficients</span><span class="p">()):</span>
</span><span id="EvaluateLinearExpr-2141"><a href="#EvaluateLinearExpr-2141"><span class="linenos">2141</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">c</span><span class="p">))</span>
</span><span id="EvaluateLinearExpr-2142"><a href="#EvaluateLinearExpr-2142"><span class="linenos">2142</span></a>            <span class="n">value</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="EvaluateLinearExpr-2143"><a href="#EvaluateLinearExpr-2143"><span class="linenos">2143</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="EvaluateLinearExpr-2144"><a href="#EvaluateLinearExpr-2144"><span class="linenos">2144</span></a>            <span class="n">value</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">solution</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">Index</span><span class="p">()]</span>
</span><span id="EvaluateLinearExpr-2145"><a href="#EvaluateLinearExpr-2145"><span class="linenos">2145</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="EvaluateLinearExpr-2146"><a href="#EvaluateLinearExpr-2146"><span class="linenos">2146</span></a>            <span class="n">value</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">solution</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()</span><span class="o">.</span><span class="n">Index</span><span class="p">()])</span>
</span><span id="EvaluateLinearExpr-2147"><a href="#EvaluateLinearExpr-2147"><span class="linenos">2147</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="EvaluateLinearExpr-2148"><a href="#EvaluateLinearExpr-2148"><span class="linenos">2148</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cannot interpret </span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="s1"> as a linear expression.&#39;</span><span class="p">)</span>
</span><span id="EvaluateLinearExpr-2149"><a href="#EvaluateLinearExpr-2149"><span class="linenos">2149</span></a>
</span><span id="EvaluateLinearExpr-2150"><a href="#EvaluateLinearExpr-2150"><span class="linenos">2150</span></a>    <span class="k">return</span> <span class="n">value</span>
</span></pre></div>


            <div class="docstring"><p>Evaluate a linear expression against a solution.</p>
</div>


                </section>
                <section id="EvaluateBooleanExpression">
                            <input id="EvaluateBooleanExpression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">EvaluateBooleanExpression</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">literal</span>, </span><span class="param"><span class="n">solution</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="EvaluateBooleanExpression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EvaluateBooleanExpression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EvaluateBooleanExpression-2153"><a href="#EvaluateBooleanExpression-2153"><span class="linenos">2153</span></a><span class="k">def</span> <span class="nf">EvaluateBooleanExpression</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">solution</span><span class="p">):</span>
</span><span id="EvaluateBooleanExpression-2154"><a href="#EvaluateBooleanExpression-2154"><span class="linenos">2154</span></a>    <span class="sd">&quot;&quot;&quot;Evaluate a boolean expression against a solution.&quot;&quot;&quot;</span>
</span><span id="EvaluateBooleanExpression-2155"><a href="#EvaluateBooleanExpression-2155"><span class="linenos">2155</span></a>    <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">literal</span><span class="p">):</span>
</span><span id="EvaluateBooleanExpression-2156"><a href="#EvaluateBooleanExpression-2156"><span class="linenos">2156</span></a>        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">literal</span><span class="p">)</span>
</span><span id="EvaluateBooleanExpression-2157"><a href="#EvaluateBooleanExpression-2157"><span class="linenos">2157</span></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span>
</span><span id="EvaluateBooleanExpression-2158"><a href="#EvaluateBooleanExpression-2158"><span class="linenos">2158</span></a>                                                   <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="EvaluateBooleanExpression-2159"><a href="#EvaluateBooleanExpression-2159"><span class="linenos">2159</span></a>        <span class="n">index</span> <span class="o">=</span> <span class="n">literal</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="EvaluateBooleanExpression-2160"><a href="#EvaluateBooleanExpression-2160"><span class="linenos">2160</span></a>        <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="EvaluateBooleanExpression-2161"><a href="#EvaluateBooleanExpression-2161"><span class="linenos">2161</span></a>            <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">solution</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
</span><span id="EvaluateBooleanExpression-2162"><a href="#EvaluateBooleanExpression-2162"><span class="linenos">2162</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="EvaluateBooleanExpression-2163"><a href="#EvaluateBooleanExpression-2163"><span class="linenos">2163</span></a>            <span class="k">return</span> <span class="ow">not</span> <span class="n">solution</span><span class="o">.</span><span class="n">solution</span><span class="p">[</span><span class="o">-</span><span class="n">index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
</span><span id="EvaluateBooleanExpression-2164"><a href="#EvaluateBooleanExpression-2164"><span class="linenos">2164</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="EvaluateBooleanExpression-2165"><a href="#EvaluateBooleanExpression-2165"><span class="linenos">2165</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cannot interpret </span><span class="si">{</span><span class="n">literal</span><span class="si">}</span><span class="s1"> as a boolean expression.&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Evaluate a boolean expression against a solution.</p>
</div>


                </section>
                <section id="CpSolver">
                            <input id="CpSolver-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">CpSolver</span>:

                <label class="view-source-button" for="CpSolver-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver-2168"><a href="#CpSolver-2168"><span class="linenos">2168</span></a><span class="k">class</span> <span class="nc">CpSolver</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="CpSolver-2169"><a href="#CpSolver-2169"><span class="linenos">2169</span></a>    <span class="sd">&quot;&quot;&quot;Main solver class.</span>
</span><span id="CpSolver-2170"><a href="#CpSolver-2170"><span class="linenos">2170</span></a>
</span><span id="CpSolver-2171"><a href="#CpSolver-2171"><span class="linenos">2171</span></a><span class="sd">  The purpose of this class is to search for a solution to the model provided</span>
</span><span id="CpSolver-2172"><a href="#CpSolver-2172"><span class="linenos">2172</span></a><span class="sd">  to the Solve() method.</span>
</span><span id="CpSolver-2173"><a href="#CpSolver-2173"><span class="linenos">2173</span></a>
</span><span id="CpSolver-2174"><a href="#CpSolver-2174"><span class="linenos">2174</span></a><span class="sd">  Once Solve() is called, this class allows inspecting the solution found</span>
</span><span id="CpSolver-2175"><a href="#CpSolver-2175"><span class="linenos">2175</span></a><span class="sd">  with the Value() and BooleanValue() methods, as well as general statistics</span>
</span><span id="CpSolver-2176"><a href="#CpSolver-2176"><span class="linenos">2176</span></a><span class="sd">  about the solve procedure.</span>
</span><span id="CpSolver-2177"><a href="#CpSolver-2177"><span class="linenos">2177</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="CpSolver-2178"><a href="#CpSolver-2178"><span class="linenos">2178</span></a>
</span><span id="CpSolver-2179"><a href="#CpSolver-2179"><span class="linenos">2179</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver-2180"><a href="#CpSolver-2180"><span class="linenos">2180</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">:</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpSolverResponse</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CpSolver-2181"><a href="#CpSolver-2181"><span class="linenos">2181</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="n">sat_parameters_pb2</span><span class="o">.</span><span class="n">SatParameters</span><span class="p">()</span>
</span><span id="CpSolver-2182"><a href="#CpSolver-2182"><span class="linenos">2182</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_callback</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CpSolver-2183"><a href="#CpSolver-2183"><span class="linenos">2183</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solve_wrapper</span><span class="p">:</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolveWrapper</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CpSolver-2184"><a href="#CpSolver-2184"><span class="linenos">2184</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span id="CpSolver-2185"><a href="#CpSolver-2185"><span class="linenos">2185</span></a>
</span><span id="CpSolver-2186"><a href="#CpSolver-2186"><span class="linenos">2186</span></a>    <span class="k">def</span> <span class="nf">Solve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">solution_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="CpSolver-2187"><a href="#CpSolver-2187"><span class="linenos">2187</span></a>        <span class="sd">&quot;&quot;&quot;Solves a problem and passes each solution to the callback if not null.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2188"><a href="#CpSolver-2188"><span class="linenos">2188</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lock</span><span class="p">:</span>
</span><span id="CpSolver-2189"><a href="#CpSolver-2189"><span class="linenos">2189</span></a>            <span class="n">solve_wrapper</span> <span class="o">=</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolveWrapper</span><span class="p">()</span>
</span><span id="CpSolver-2190"><a href="#CpSolver-2190"><span class="linenos">2190</span></a>
</span><span id="CpSolver-2191"><a href="#CpSolver-2191"><span class="linenos">2191</span></a>        <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolveWrapper</span><span class="o">.</span><span class="n">SetSerializedParameters</span><span class="p">(</span>
</span><span id="CpSolver-2192"><a href="#CpSolver-2192"><span class="linenos">2192</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">(),</span> <span class="n">solve_wrapper</span><span class="p">)</span>
</span><span id="CpSolver-2193"><a href="#CpSolver-2193"><span class="linenos">2193</span></a>        <span class="k">if</span> <span class="n">solution_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CpSolver-2194"><a href="#CpSolver-2194"><span class="linenos">2194</span></a>            <span class="n">solve_wrapper</span><span class="o">.</span><span class="n">AddSolutionCallback</span><span class="p">(</span><span class="n">solution_callback</span><span class="p">)</span>
</span><span id="CpSolver-2195"><a href="#CpSolver-2195"><span class="linenos">2195</span></a>
</span><span id="CpSolver-2196"><a href="#CpSolver-2196"><span class="linenos">2196</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CpSolver-2197"><a href="#CpSolver-2197"><span class="linenos">2197</span></a>            <span class="n">solve_wrapper</span><span class="o">.</span><span class="n">AddLogCallback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_callback</span><span class="p">)</span>
</span><span id="CpSolver-2198"><a href="#CpSolver-2198"><span class="linenos">2198</span></a>
</span><span id="CpSolver-2199"><a href="#CpSolver-2199"><span class="linenos">2199</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpSolverResponse</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
</span><span id="CpSolver-2200"><a href="#CpSolver-2200"><span class="linenos">2200</span></a>            <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolveWrapper</span><span class="o">.</span><span class="n">SerializedSolve</span><span class="p">(</span>
</span><span id="CpSolver-2201"><a href="#CpSolver-2201"><span class="linenos">2201</span></a>                <span class="n">model</span><span class="o">.</span><span class="n">Proto</span><span class="p">()</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">(),</span> <span class="n">solve_wrapper</span><span class="p">))</span>
</span><span id="CpSolver-2202"><a href="#CpSolver-2202"><span class="linenos">2202</span></a>
</span><span id="CpSolver-2203"><a href="#CpSolver-2203"><span class="linenos">2203</span></a>        <span class="k">if</span> <span class="n">solution_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CpSolver-2204"><a href="#CpSolver-2204"><span class="linenos">2204</span></a>            <span class="n">solve_wrapper</span><span class="o">.</span><span class="n">ClearSolutionCallback</span><span class="p">(</span><span class="n">solution_callback</span><span class="p">)</span>
</span><span id="CpSolver-2205"><a href="#CpSolver-2205"><span class="linenos">2205</span></a>
</span><span id="CpSolver-2206"><a href="#CpSolver-2206"><span class="linenos">2206</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lock</span><span class="p">:</span>
</span><span id="CpSolver-2207"><a href="#CpSolver-2207"><span class="linenos">2207</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__solve_wrapper</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CpSolver-2208"><a href="#CpSolver-2208"><span class="linenos">2208</span></a>
</span><span id="CpSolver-2209"><a href="#CpSolver-2209"><span class="linenos">2209</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">status</span>
</span><span id="CpSolver-2210"><a href="#CpSolver-2210"><span class="linenos">2210</span></a>
</span><span id="CpSolver-2211"><a href="#CpSolver-2211"><span class="linenos">2211</span></a>    <span class="k">def</span> <span class="nf">SolveWithSolutionCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
</span><span id="CpSolver-2212"><a href="#CpSolver-2212"><span class="linenos">2212</span></a>        <span class="sd">&quot;&quot;&quot;DEPRECATED Use Solve() with the callback argument.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2213"><a href="#CpSolver-2213"><span class="linenos">2213</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="CpSolver-2214"><a href="#CpSolver-2214"><span class="linenos">2214</span></a>            <span class="s1">&#39;SolveWithSolutionCallback is deprecated; use Solve() with&#39;</span> <span class="o">+</span>
</span><span id="CpSolver-2215"><a href="#CpSolver-2215"><span class="linenos">2215</span></a>            <span class="s1">&#39;the callback argument.&#39;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
</span><span id="CpSolver-2216"><a href="#CpSolver-2216"><span class="linenos">2216</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Solve</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</span><span id="CpSolver-2217"><a href="#CpSolver-2217"><span class="linenos">2217</span></a>
</span><span id="CpSolver-2218"><a href="#CpSolver-2218"><span class="linenos">2218</span></a>    <span class="k">def</span> <span class="nf">SearchForAllSolutions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
</span><span id="CpSolver-2219"><a href="#CpSolver-2219"><span class="linenos">2219</span></a>        <span class="sd">&quot;&quot;&quot;DEPRECATED Use Solve() with the right parameter.</span>
</span><span id="CpSolver-2220"><a href="#CpSolver-2220"><span class="linenos">2220</span></a>
</span><span id="CpSolver-2221"><a href="#CpSolver-2221"><span class="linenos">2221</span></a><span class="sd">    Search for all solutions of a satisfiability problem.</span>
</span><span id="CpSolver-2222"><a href="#CpSolver-2222"><span class="linenos">2222</span></a>
</span><span id="CpSolver-2223"><a href="#CpSolver-2223"><span class="linenos">2223</span></a><span class="sd">    This method searches for all feasible solutions of a given model.</span>
</span><span id="CpSolver-2224"><a href="#CpSolver-2224"><span class="linenos">2224</span></a><span class="sd">    Then it feeds the solution to the callback.</span>
</span><span id="CpSolver-2225"><a href="#CpSolver-2225"><span class="linenos">2225</span></a>
</span><span id="CpSolver-2226"><a href="#CpSolver-2226"><span class="linenos">2226</span></a><span class="sd">    Note that the model cannot contain an objective.</span>
</span><span id="CpSolver-2227"><a href="#CpSolver-2227"><span class="linenos">2227</span></a>
</span><span id="CpSolver-2228"><a href="#CpSolver-2228"><span class="linenos">2228</span></a><span class="sd">    Args:</span>
</span><span id="CpSolver-2229"><a href="#CpSolver-2229"><span class="linenos">2229</span></a><span class="sd">      model: The model to solve.</span>
</span><span id="CpSolver-2230"><a href="#CpSolver-2230"><span class="linenos">2230</span></a><span class="sd">      callback: The callback that will be called at each solution.</span>
</span><span id="CpSolver-2231"><a href="#CpSolver-2231"><span class="linenos">2231</span></a>
</span><span id="CpSolver-2232"><a href="#CpSolver-2232"><span class="linenos">2232</span></a><span class="sd">    Returns:</span>
</span><span id="CpSolver-2233"><a href="#CpSolver-2233"><span class="linenos">2233</span></a><span class="sd">      The status of the solve:</span>
</span><span id="CpSolver-2234"><a href="#CpSolver-2234"><span class="linenos">2234</span></a>
</span><span id="CpSolver-2235"><a href="#CpSolver-2235"><span class="linenos">2235</span></a><span class="sd">      * *FEASIBLE* if some solutions have been found</span>
</span><span id="CpSolver-2236"><a href="#CpSolver-2236"><span class="linenos">2236</span></a><span class="sd">      * *INFEASIBLE* if the solver has proved there are no solution</span>
</span><span id="CpSolver-2237"><a href="#CpSolver-2237"><span class="linenos">2237</span></a><span class="sd">      * *OPTIMAL* if all solutions have been found</span>
</span><span id="CpSolver-2238"><a href="#CpSolver-2238"><span class="linenos">2238</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpSolver-2239"><a href="#CpSolver-2239"><span class="linenos">2239</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="CpSolver-2240"><a href="#CpSolver-2240"><span class="linenos">2240</span></a>            <span class="s1">&#39;SearchForAllSolutions is deprecated; use Solve() with&#39;</span> <span class="o">+</span>
</span><span id="CpSolver-2241"><a href="#CpSolver-2241"><span class="linenos">2241</span></a>            <span class="s1">&#39;enumerate_all_solutions = True.&#39;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
</span><span id="CpSolver-2242"><a href="#CpSolver-2242"><span class="linenos">2242</span></a>        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">HasObjective</span><span class="p">():</span>
</span><span id="CpSolver-2243"><a href="#CpSolver-2243"><span class="linenos">2243</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search for all solutions is only defined on &#39;</span>
</span><span id="CpSolver-2244"><a href="#CpSolver-2244"><span class="linenos">2244</span></a>                            <span class="s1">&#39;satisfiability problems&#39;</span><span class="p">)</span>
</span><span id="CpSolver-2245"><a href="#CpSolver-2245"><span class="linenos">2245</span></a>        <span class="c1"># Store old parameter.</span>
</span><span id="CpSolver-2246"><a href="#CpSolver-2246"><span class="linenos">2246</span></a>        <span class="n">enumerate_all</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">enumerate_all_solutions</span>
</span><span id="CpSolver-2247"><a href="#CpSolver-2247"><span class="linenos">2247</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">enumerate_all_solutions</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="CpSolver-2248"><a href="#CpSolver-2248"><span class="linenos">2248</span></a>
</span><span id="CpSolver-2249"><a href="#CpSolver-2249"><span class="linenos">2249</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">Solve</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</span><span id="CpSolver-2250"><a href="#CpSolver-2250"><span class="linenos">2250</span></a>
</span><span id="CpSolver-2251"><a href="#CpSolver-2251"><span class="linenos">2251</span></a>        <span class="c1"># Restore parameter.</span>
</span><span id="CpSolver-2252"><a href="#CpSolver-2252"><span class="linenos">2252</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">enumerate_all_solutions</span> <span class="o">=</span> <span class="n">enumerate_all</span>
</span><span id="CpSolver-2253"><a href="#CpSolver-2253"><span class="linenos">2253</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">status</span>
</span><span id="CpSolver-2254"><a href="#CpSolver-2254"><span class="linenos">2254</span></a>
</span><span id="CpSolver-2255"><a href="#CpSolver-2255"><span class="linenos">2255</span></a>    <span class="k">def</span> <span class="nf">StopSearch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver-2256"><a href="#CpSolver-2256"><span class="linenos">2256</span></a>        <span class="sd">&quot;&quot;&quot;Stops the current search asynchronously.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2257"><a href="#CpSolver-2257"><span class="linenos">2257</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lock</span><span class="p">:</span>
</span><span id="CpSolver-2258"><a href="#CpSolver-2258"><span class="linenos">2258</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solve_wrapper</span><span class="p">:</span>
</span><span id="CpSolver-2259"><a href="#CpSolver-2259"><span class="linenos">2259</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__solve_wrapper</span><span class="o">.</span><span class="n">StopSearch</span><span class="p">()</span>
</span><span id="CpSolver-2260"><a href="#CpSolver-2260"><span class="linenos">2260</span></a>
</span><span id="CpSolver-2261"><a href="#CpSolver-2261"><span class="linenos">2261</span></a>    <span class="k">def</span> <span class="nf">Value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">):</span>
</span><span id="CpSolver-2262"><a href="#CpSolver-2262"><span class="linenos">2262</span></a>        <span class="sd">&quot;&quot;&quot;Returns the value of a linear expression after solve.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2263"><a href="#CpSolver-2263"><span class="linenos">2263</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">:</span>
</span><span id="CpSolver-2264"><a href="#CpSolver-2264"><span class="linenos">2264</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Solve() has not be called.&#39;</span><span class="p">)</span>
</span><span id="CpSolver-2265"><a href="#CpSolver-2265"><span class="linenos">2265</span></a>        <span class="k">return</span> <span class="n">EvaluateLinearExpr</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">)</span>
</span><span id="CpSolver-2266"><a href="#CpSolver-2266"><span class="linenos">2266</span></a>
</span><span id="CpSolver-2267"><a href="#CpSolver-2267"><span class="linenos">2267</span></a>    <span class="k">def</span> <span class="nf">BooleanValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">literal</span><span class="p">):</span>
</span><span id="CpSolver-2268"><a href="#CpSolver-2268"><span class="linenos">2268</span></a>        <span class="sd">&quot;&quot;&quot;Returns the boolean value of a literal after solve.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2269"><a href="#CpSolver-2269"><span class="linenos">2269</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">:</span>
</span><span id="CpSolver-2270"><a href="#CpSolver-2270"><span class="linenos">2270</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Solve() has not be called.&#39;</span><span class="p">)</span>
</span><span id="CpSolver-2271"><a href="#CpSolver-2271"><span class="linenos">2271</span></a>        <span class="k">return</span> <span class="n">EvaluateBooleanExpression</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">)</span>
</span><span id="CpSolver-2272"><a href="#CpSolver-2272"><span class="linenos">2272</span></a>
</span><span id="CpSolver-2273"><a href="#CpSolver-2273"><span class="linenos">2273</span></a>    <span class="k">def</span> <span class="nf">ObjectiveValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver-2274"><a href="#CpSolver-2274"><span class="linenos">2274</span></a>        <span class="sd">&quot;&quot;&quot;Returns the value of the objective after solve.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2275"><a href="#CpSolver-2275"><span class="linenos">2275</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">objective_value</span>
</span><span id="CpSolver-2276"><a href="#CpSolver-2276"><span class="linenos">2276</span></a>
</span><span id="CpSolver-2277"><a href="#CpSolver-2277"><span class="linenos">2277</span></a>    <span class="k">def</span> <span class="nf">BestObjectiveBound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver-2278"><a href="#CpSolver-2278"><span class="linenos">2278</span></a>        <span class="sd">&quot;&quot;&quot;Returns the best lower (upper) bound found when min(max)imizing.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2279"><a href="#CpSolver-2279"><span class="linenos">2279</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">best_objective_bound</span>
</span><span id="CpSolver-2280"><a href="#CpSolver-2280"><span class="linenos">2280</span></a>
</span><span id="CpSolver-2281"><a href="#CpSolver-2281"><span class="linenos">2281</span></a>    <span class="k">def</span> <span class="nf">StatusName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="CpSolver-2282"><a href="#CpSolver-2282"><span class="linenos">2282</span></a>        <span class="sd">&quot;&quot;&quot;Returns the name of the status returned by Solve().&quot;&quot;&quot;</span>
</span><span id="CpSolver-2283"><a href="#CpSolver-2283"><span class="linenos">2283</span></a>        <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CpSolver-2284"><a href="#CpSolver-2284"><span class="linenos">2284</span></a>            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">status</span>
</span><span id="CpSolver-2285"><a href="#CpSolver-2285"><span class="linenos">2285</span></a>        <span class="k">return</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpSolverStatus</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
</span><span id="CpSolver-2286"><a href="#CpSolver-2286"><span class="linenos">2286</span></a>
</span><span id="CpSolver-2287"><a href="#CpSolver-2287"><span class="linenos">2287</span></a>    <span class="k">def</span> <span class="nf">NumBooleans</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver-2288"><a href="#CpSolver-2288"><span class="linenos">2288</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of boolean variables managed by the SAT solver.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2289"><a href="#CpSolver-2289"><span class="linenos">2289</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">num_booleans</span>
</span><span id="CpSolver-2290"><a href="#CpSolver-2290"><span class="linenos">2290</span></a>
</span><span id="CpSolver-2291"><a href="#CpSolver-2291"><span class="linenos">2291</span></a>    <span class="k">def</span> <span class="nf">NumConflicts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver-2292"><a href="#CpSolver-2292"><span class="linenos">2292</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of conflicts since the creation of the solver.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2293"><a href="#CpSolver-2293"><span class="linenos">2293</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">num_conflicts</span>
</span><span id="CpSolver-2294"><a href="#CpSolver-2294"><span class="linenos">2294</span></a>
</span><span id="CpSolver-2295"><a href="#CpSolver-2295"><span class="linenos">2295</span></a>    <span class="k">def</span> <span class="nf">NumBranches</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver-2296"><a href="#CpSolver-2296"><span class="linenos">2296</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of search branches explored by the solver.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2297"><a href="#CpSolver-2297"><span class="linenos">2297</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">num_branches</span>
</span><span id="CpSolver-2298"><a href="#CpSolver-2298"><span class="linenos">2298</span></a>
</span><span id="CpSolver-2299"><a href="#CpSolver-2299"><span class="linenos">2299</span></a>    <span class="k">def</span> <span class="nf">WallTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver-2300"><a href="#CpSolver-2300"><span class="linenos">2300</span></a>        <span class="sd">&quot;&quot;&quot;Returns the wall time in seconds since the creation of the solver.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2301"><a href="#CpSolver-2301"><span class="linenos">2301</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">wall_time</span>
</span><span id="CpSolver-2302"><a href="#CpSolver-2302"><span class="linenos">2302</span></a>
</span><span id="CpSolver-2303"><a href="#CpSolver-2303"><span class="linenos">2303</span></a>    <span class="k">def</span> <span class="nf">UserTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver-2304"><a href="#CpSolver-2304"><span class="linenos">2304</span></a>        <span class="sd">&quot;&quot;&quot;Returns the user time in seconds since the creation of the solver.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2305"><a href="#CpSolver-2305"><span class="linenos">2305</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">user_time</span>
</span><span id="CpSolver-2306"><a href="#CpSolver-2306"><span class="linenos">2306</span></a>
</span><span id="CpSolver-2307"><a href="#CpSolver-2307"><span class="linenos">2307</span></a>    <span class="k">def</span> <span class="nf">ResponseStats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver-2308"><a href="#CpSolver-2308"><span class="linenos">2308</span></a>        <span class="sd">&quot;&quot;&quot;Returns some statistics on the solution found as a string.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2309"><a href="#CpSolver-2309"><span class="linenos">2309</span></a>        <span class="k">return</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">CpSatHelper</span><span class="o">.</span><span class="n">SerializedSolverResponseStats</span><span class="p">(</span>
</span><span id="CpSolver-2310"><a href="#CpSolver-2310"><span class="linenos">2310</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">())</span>
</span><span id="CpSolver-2311"><a href="#CpSolver-2311"><span class="linenos">2311</span></a>
</span><span id="CpSolver-2312"><a href="#CpSolver-2312"><span class="linenos">2312</span></a>    <span class="k">def</span> <span class="nf">ResponseProto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver-2313"><a href="#CpSolver-2313"><span class="linenos">2313</span></a>        <span class="sd">&quot;&quot;&quot;Returns the response object.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2314"><a href="#CpSolver-2314"><span class="linenos">2314</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span>
</span><span id="CpSolver-2315"><a href="#CpSolver-2315"><span class="linenos">2315</span></a>
</span><span id="CpSolver-2316"><a href="#CpSolver-2316"><span class="linenos">2316</span></a>    <span class="k">def</span> <span class="nf">SufficientAssumptionsForInfeasibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver-2317"><a href="#CpSolver-2317"><span class="linenos">2317</span></a>        <span class="sd">&quot;&quot;&quot;Returns the indices of the infeasible assumptions.&quot;&quot;&quot;</span>
</span><span id="CpSolver-2318"><a href="#CpSolver-2318"><span class="linenos">2318</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">sufficient_assumptions_for_infeasibility</span>
</span><span id="CpSolver-2319"><a href="#CpSolver-2319"><span class="linenos">2319</span></a>
</span><span id="CpSolver-2320"><a href="#CpSolver-2320"><span class="linenos">2320</span></a>    <span class="k">def</span> <span class="nf">SolutionInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver-2321"><a href="#CpSolver-2321"><span class="linenos">2321</span></a>        <span class="sd">&quot;&quot;&quot;Returns some information on the solve process.</span>
</span><span id="CpSolver-2322"><a href="#CpSolver-2322"><span class="linenos">2322</span></a>
</span><span id="CpSolver-2323"><a href="#CpSolver-2323"><span class="linenos">2323</span></a><span class="sd">    Returns some information on how the solution was found, or the reason</span>
</span><span id="CpSolver-2324"><a href="#CpSolver-2324"><span class="linenos">2324</span></a><span class="sd">    why the model or the parameters are invalid.</span>
</span><span id="CpSolver-2325"><a href="#CpSolver-2325"><span class="linenos">2325</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpSolver-2326"><a href="#CpSolver-2326"><span class="linenos">2326</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">solution_info</span>
</span></pre></div>


            <div class="docstring"><p>Main solver class.</p>

<p>The purpose of this class is to search for a solution to the model provided
to the Solve() method.</p>

<p>Once Solve() is called, this class allows inspecting the solution found
with the Value() and BooleanValue() methods, as well as general statistics
about the solve procedure.</p>
</div>


                            <div id="CpSolver.__init__" class="classattr">
                                        <input id="CpSolver.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">CpSolver</span><span class="signature pdoc-code condensed">()</span>

                <label class="view-source-button" for="CpSolver.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.__init__-2179"><a href="#CpSolver.__init__-2179"><span class="linenos">2179</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver.__init__-2180"><a href="#CpSolver.__init__-2180"><span class="linenos">2180</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">:</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpSolverResponse</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CpSolver.__init__-2181"><a href="#CpSolver.__init__-2181"><span class="linenos">2181</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="n">sat_parameters_pb2</span><span class="o">.</span><span class="n">SatParameters</span><span class="p">()</span>
</span><span id="CpSolver.__init__-2182"><a href="#CpSolver.__init__-2182"><span class="linenos">2182</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">log_callback</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CpSolver.__init__-2183"><a href="#CpSolver.__init__-2183"><span class="linenos">2183</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solve_wrapper</span><span class="p">:</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolveWrapper</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CpSolver.__init__-2184"><a href="#CpSolver.__init__-2184"><span class="linenos">2184</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__lock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="CpSolver.Solve" class="classattr">
                                        <input id="CpSolver.Solve-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Solve</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">model</span>, </span><span class="param"><span class="n">solution_callback</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.Solve-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.Solve"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.Solve-2186"><a href="#CpSolver.Solve-2186"><span class="linenos">2186</span></a>    <span class="k">def</span> <span class="nf">Solve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">solution_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="CpSolver.Solve-2187"><a href="#CpSolver.Solve-2187"><span class="linenos">2187</span></a>        <span class="sd">&quot;&quot;&quot;Solves a problem and passes each solution to the callback if not null.&quot;&quot;&quot;</span>
</span><span id="CpSolver.Solve-2188"><a href="#CpSolver.Solve-2188"><span class="linenos">2188</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lock</span><span class="p">:</span>
</span><span id="CpSolver.Solve-2189"><a href="#CpSolver.Solve-2189"><span class="linenos">2189</span></a>            <span class="n">solve_wrapper</span> <span class="o">=</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolveWrapper</span><span class="p">()</span>
</span><span id="CpSolver.Solve-2190"><a href="#CpSolver.Solve-2190"><span class="linenos">2190</span></a>
</span><span id="CpSolver.Solve-2191"><a href="#CpSolver.Solve-2191"><span class="linenos">2191</span></a>        <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolveWrapper</span><span class="o">.</span><span class="n">SetSerializedParameters</span><span class="p">(</span>
</span><span id="CpSolver.Solve-2192"><a href="#CpSolver.Solve-2192"><span class="linenos">2192</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">(),</span> <span class="n">solve_wrapper</span><span class="p">)</span>
</span><span id="CpSolver.Solve-2193"><a href="#CpSolver.Solve-2193"><span class="linenos">2193</span></a>        <span class="k">if</span> <span class="n">solution_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CpSolver.Solve-2194"><a href="#CpSolver.Solve-2194"><span class="linenos">2194</span></a>            <span class="n">solve_wrapper</span><span class="o">.</span><span class="n">AddSolutionCallback</span><span class="p">(</span><span class="n">solution_callback</span><span class="p">)</span>
</span><span id="CpSolver.Solve-2195"><a href="#CpSolver.Solve-2195"><span class="linenos">2195</span></a>
</span><span id="CpSolver.Solve-2196"><a href="#CpSolver.Solve-2196"><span class="linenos">2196</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">log_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CpSolver.Solve-2197"><a href="#CpSolver.Solve-2197"><span class="linenos">2197</span></a>            <span class="n">solve_wrapper</span><span class="o">.</span><span class="n">AddLogCallback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">log_callback</span><span class="p">)</span>
</span><span id="CpSolver.Solve-2198"><a href="#CpSolver.Solve-2198"><span class="linenos">2198</span></a>
</span><span id="CpSolver.Solve-2199"><a href="#CpSolver.Solve-2199"><span class="linenos">2199</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span> <span class="o">=</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpSolverResponse</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
</span><span id="CpSolver.Solve-2200"><a href="#CpSolver.Solve-2200"><span class="linenos">2200</span></a>            <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolveWrapper</span><span class="o">.</span><span class="n">SerializedSolve</span><span class="p">(</span>
</span><span id="CpSolver.Solve-2201"><a href="#CpSolver.Solve-2201"><span class="linenos">2201</span></a>                <span class="n">model</span><span class="o">.</span><span class="n">Proto</span><span class="p">()</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">(),</span> <span class="n">solve_wrapper</span><span class="p">))</span>
</span><span id="CpSolver.Solve-2202"><a href="#CpSolver.Solve-2202"><span class="linenos">2202</span></a>
</span><span id="CpSolver.Solve-2203"><a href="#CpSolver.Solve-2203"><span class="linenos">2203</span></a>        <span class="k">if</span> <span class="n">solution_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CpSolver.Solve-2204"><a href="#CpSolver.Solve-2204"><span class="linenos">2204</span></a>            <span class="n">solve_wrapper</span><span class="o">.</span><span class="n">ClearSolutionCallback</span><span class="p">(</span><span class="n">solution_callback</span><span class="p">)</span>
</span><span id="CpSolver.Solve-2205"><a href="#CpSolver.Solve-2205"><span class="linenos">2205</span></a>
</span><span id="CpSolver.Solve-2206"><a href="#CpSolver.Solve-2206"><span class="linenos">2206</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lock</span><span class="p">:</span>
</span><span id="CpSolver.Solve-2207"><a href="#CpSolver.Solve-2207"><span class="linenos">2207</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__solve_wrapper</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="CpSolver.Solve-2208"><a href="#CpSolver.Solve-2208"><span class="linenos">2208</span></a>
</span><span id="CpSolver.Solve-2209"><a href="#CpSolver.Solve-2209"><span class="linenos">2209</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">status</span>
</span></pre></div>


            <div class="docstring"><p>Solves a problem and passes each solution to the callback if not null.</p>
</div>


                            </div>
                            <div id="CpSolver.SolveWithSolutionCallback" class="classattr">
                                        <input id="CpSolver.SolveWithSolutionCallback-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">SolveWithSolutionCallback</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">model</span>, </span><span class="param"><span class="n">callback</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.SolveWithSolutionCallback-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.SolveWithSolutionCallback"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.SolveWithSolutionCallback-2211"><a href="#CpSolver.SolveWithSolutionCallback-2211"><span class="linenos">2211</span></a>    <span class="k">def</span> <span class="nf">SolveWithSolutionCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
</span><span id="CpSolver.SolveWithSolutionCallback-2212"><a href="#CpSolver.SolveWithSolutionCallback-2212"><span class="linenos">2212</span></a>        <span class="sd">&quot;&quot;&quot;DEPRECATED Use Solve() with the callback argument.&quot;&quot;&quot;</span>
</span><span id="CpSolver.SolveWithSolutionCallback-2213"><a href="#CpSolver.SolveWithSolutionCallback-2213"><span class="linenos">2213</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="CpSolver.SolveWithSolutionCallback-2214"><a href="#CpSolver.SolveWithSolutionCallback-2214"><span class="linenos">2214</span></a>            <span class="s1">&#39;SolveWithSolutionCallback is deprecated; use Solve() with&#39;</span> <span class="o">+</span>
</span><span id="CpSolver.SolveWithSolutionCallback-2215"><a href="#CpSolver.SolveWithSolutionCallback-2215"><span class="linenos">2215</span></a>            <span class="s1">&#39;the callback argument.&#39;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
</span><span id="CpSolver.SolveWithSolutionCallback-2216"><a href="#CpSolver.SolveWithSolutionCallback-2216"><span class="linenos">2216</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Solve</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>DEPRECATED Use Solve() with the callback argument.</p>
</div>


                            </div>
                            <div id="CpSolver.SearchForAllSolutions" class="classattr">
                                        <input id="CpSolver.SearchForAllSolutions-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">SearchForAllSolutions</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">model</span>, </span><span class="param"><span class="n">callback</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.SearchForAllSolutions-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.SearchForAllSolutions"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.SearchForAllSolutions-2218"><a href="#CpSolver.SearchForAllSolutions-2218"><span class="linenos">2218</span></a>    <span class="k">def</span> <span class="nf">SearchForAllSolutions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
</span><span id="CpSolver.SearchForAllSolutions-2219"><a href="#CpSolver.SearchForAllSolutions-2219"><span class="linenos">2219</span></a>        <span class="sd">&quot;&quot;&quot;DEPRECATED Use Solve() with the right parameter.</span>
</span><span id="CpSolver.SearchForAllSolutions-2220"><a href="#CpSolver.SearchForAllSolutions-2220"><span class="linenos">2220</span></a>
</span><span id="CpSolver.SearchForAllSolutions-2221"><a href="#CpSolver.SearchForAllSolutions-2221"><span class="linenos">2221</span></a><span class="sd">    Search for all solutions of a satisfiability problem.</span>
</span><span id="CpSolver.SearchForAllSolutions-2222"><a href="#CpSolver.SearchForAllSolutions-2222"><span class="linenos">2222</span></a>
</span><span id="CpSolver.SearchForAllSolutions-2223"><a href="#CpSolver.SearchForAllSolutions-2223"><span class="linenos">2223</span></a><span class="sd">    This method searches for all feasible solutions of a given model.</span>
</span><span id="CpSolver.SearchForAllSolutions-2224"><a href="#CpSolver.SearchForAllSolutions-2224"><span class="linenos">2224</span></a><span class="sd">    Then it feeds the solution to the callback.</span>
</span><span id="CpSolver.SearchForAllSolutions-2225"><a href="#CpSolver.SearchForAllSolutions-2225"><span class="linenos">2225</span></a>
</span><span id="CpSolver.SearchForAllSolutions-2226"><a href="#CpSolver.SearchForAllSolutions-2226"><span class="linenos">2226</span></a><span class="sd">    Note that the model cannot contain an objective.</span>
</span><span id="CpSolver.SearchForAllSolutions-2227"><a href="#CpSolver.SearchForAllSolutions-2227"><span class="linenos">2227</span></a>
</span><span id="CpSolver.SearchForAllSolutions-2228"><a href="#CpSolver.SearchForAllSolutions-2228"><span class="linenos">2228</span></a><span class="sd">    Args:</span>
</span><span id="CpSolver.SearchForAllSolutions-2229"><a href="#CpSolver.SearchForAllSolutions-2229"><span class="linenos">2229</span></a><span class="sd">      model: The model to solve.</span>
</span><span id="CpSolver.SearchForAllSolutions-2230"><a href="#CpSolver.SearchForAllSolutions-2230"><span class="linenos">2230</span></a><span class="sd">      callback: The callback that will be called at each solution.</span>
</span><span id="CpSolver.SearchForAllSolutions-2231"><a href="#CpSolver.SearchForAllSolutions-2231"><span class="linenos">2231</span></a>
</span><span id="CpSolver.SearchForAllSolutions-2232"><a href="#CpSolver.SearchForAllSolutions-2232"><span class="linenos">2232</span></a><span class="sd">    Returns:</span>
</span><span id="CpSolver.SearchForAllSolutions-2233"><a href="#CpSolver.SearchForAllSolutions-2233"><span class="linenos">2233</span></a><span class="sd">      The status of the solve:</span>
</span><span id="CpSolver.SearchForAllSolutions-2234"><a href="#CpSolver.SearchForAllSolutions-2234"><span class="linenos">2234</span></a>
</span><span id="CpSolver.SearchForAllSolutions-2235"><a href="#CpSolver.SearchForAllSolutions-2235"><span class="linenos">2235</span></a><span class="sd">      * *FEASIBLE* if some solutions have been found</span>
</span><span id="CpSolver.SearchForAllSolutions-2236"><a href="#CpSolver.SearchForAllSolutions-2236"><span class="linenos">2236</span></a><span class="sd">      * *INFEASIBLE* if the solver has proved there are no solution</span>
</span><span id="CpSolver.SearchForAllSolutions-2237"><a href="#CpSolver.SearchForAllSolutions-2237"><span class="linenos">2237</span></a><span class="sd">      * *OPTIMAL* if all solutions have been found</span>
</span><span id="CpSolver.SearchForAllSolutions-2238"><a href="#CpSolver.SearchForAllSolutions-2238"><span class="linenos">2238</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpSolver.SearchForAllSolutions-2239"><a href="#CpSolver.SearchForAllSolutions-2239"><span class="linenos">2239</span></a>        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
</span><span id="CpSolver.SearchForAllSolutions-2240"><a href="#CpSolver.SearchForAllSolutions-2240"><span class="linenos">2240</span></a>            <span class="s1">&#39;SearchForAllSolutions is deprecated; use Solve() with&#39;</span> <span class="o">+</span>
</span><span id="CpSolver.SearchForAllSolutions-2241"><a href="#CpSolver.SearchForAllSolutions-2241"><span class="linenos">2241</span></a>            <span class="s1">&#39;enumerate_all_solutions = True.&#39;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span><span class="p">)</span>
</span><span id="CpSolver.SearchForAllSolutions-2242"><a href="#CpSolver.SearchForAllSolutions-2242"><span class="linenos">2242</span></a>        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">HasObjective</span><span class="p">():</span>
</span><span id="CpSolver.SearchForAllSolutions-2243"><a href="#CpSolver.SearchForAllSolutions-2243"><span class="linenos">2243</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Search for all solutions is only defined on &#39;</span>
</span><span id="CpSolver.SearchForAllSolutions-2244"><a href="#CpSolver.SearchForAllSolutions-2244"><span class="linenos">2244</span></a>                            <span class="s1">&#39;satisfiability problems&#39;</span><span class="p">)</span>
</span><span id="CpSolver.SearchForAllSolutions-2245"><a href="#CpSolver.SearchForAllSolutions-2245"><span class="linenos">2245</span></a>        <span class="c1"># Store old parameter.</span>
</span><span id="CpSolver.SearchForAllSolutions-2246"><a href="#CpSolver.SearchForAllSolutions-2246"><span class="linenos">2246</span></a>        <span class="n">enumerate_all</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">enumerate_all_solutions</span>
</span><span id="CpSolver.SearchForAllSolutions-2247"><a href="#CpSolver.SearchForAllSolutions-2247"><span class="linenos">2247</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">enumerate_all_solutions</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="CpSolver.SearchForAllSolutions-2248"><a href="#CpSolver.SearchForAllSolutions-2248"><span class="linenos">2248</span></a>
</span><span id="CpSolver.SearchForAllSolutions-2249"><a href="#CpSolver.SearchForAllSolutions-2249"><span class="linenos">2249</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">Solve</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</span><span id="CpSolver.SearchForAllSolutions-2250"><a href="#CpSolver.SearchForAllSolutions-2250"><span class="linenos">2250</span></a>
</span><span id="CpSolver.SearchForAllSolutions-2251"><a href="#CpSolver.SearchForAllSolutions-2251"><span class="linenos">2251</span></a>        <span class="c1"># Restore parameter.</span>
</span><span id="CpSolver.SearchForAllSolutions-2252"><a href="#CpSolver.SearchForAllSolutions-2252"><span class="linenos">2252</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">enumerate_all_solutions</span> <span class="o">=</span> <span class="n">enumerate_all</span>
</span><span id="CpSolver.SearchForAllSolutions-2253"><a href="#CpSolver.SearchForAllSolutions-2253"><span class="linenos">2253</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">status</span>
</span></pre></div>


            <div class="docstring"><p>DEPRECATED Use Solve() with the right parameter.</p>

<p>Search for all solutions of a satisfiability problem.</p>

<p>This method searches for all feasible solutions of a given model.
Then it feeds the solution to the callback.</p>

<p>Note that the model cannot contain an objective.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>model:</strong>  The model to solve.</li>
<li><strong>callback:</strong>  The callback that will be called at each solution.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The status of the solve:</p>
  
  <ul>
  <li><em>FEASIBLE</em> if some solutions have been found</li>
  <li><em>INFEASIBLE</em> if the solver has proved there are no solution</li>
  <li><em>OPTIMAL</em> if all solutions have been found</li>
  </ul>
</blockquote>
</div>


                            </div>
                            <div id="CpSolver.StopSearch" class="classattr">
                                        <input id="CpSolver.StopSearch-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">StopSearch</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.StopSearch-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.StopSearch"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.StopSearch-2255"><a href="#CpSolver.StopSearch-2255"><span class="linenos">2255</span></a>    <span class="k">def</span> <span class="nf">StopSearch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver.StopSearch-2256"><a href="#CpSolver.StopSearch-2256"><span class="linenos">2256</span></a>        <span class="sd">&quot;&quot;&quot;Stops the current search asynchronously.&quot;&quot;&quot;</span>
</span><span id="CpSolver.StopSearch-2257"><a href="#CpSolver.StopSearch-2257"><span class="linenos">2257</span></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lock</span><span class="p">:</span>
</span><span id="CpSolver.StopSearch-2258"><a href="#CpSolver.StopSearch-2258"><span class="linenos">2258</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solve_wrapper</span><span class="p">:</span>
</span><span id="CpSolver.StopSearch-2259"><a href="#CpSolver.StopSearch-2259"><span class="linenos">2259</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__solve_wrapper</span><span class="o">.</span><span class="n">StopSearch</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Stops the current search asynchronously.</p>
</div>


                            </div>
                            <div id="CpSolver.Value" class="classattr">
                                        <input id="CpSolver.Value-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Value</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">expression</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.Value-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.Value"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.Value-2261"><a href="#CpSolver.Value-2261"><span class="linenos">2261</span></a>    <span class="k">def</span> <span class="nf">Value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">):</span>
</span><span id="CpSolver.Value-2262"><a href="#CpSolver.Value-2262"><span class="linenos">2262</span></a>        <span class="sd">&quot;&quot;&quot;Returns the value of a linear expression after solve.&quot;&quot;&quot;</span>
</span><span id="CpSolver.Value-2263"><a href="#CpSolver.Value-2263"><span class="linenos">2263</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">:</span>
</span><span id="CpSolver.Value-2264"><a href="#CpSolver.Value-2264"><span class="linenos">2264</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Solve() has not be called.&#39;</span><span class="p">)</span>
</span><span id="CpSolver.Value-2265"><a href="#CpSolver.Value-2265"><span class="linenos">2265</span></a>        <span class="k">return</span> <span class="n">EvaluateLinearExpr</span><span class="p">(</span><span class="n">expression</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns the value of a linear expression after solve.</p>
</div>


                            </div>
                            <div id="CpSolver.BooleanValue" class="classattr">
                                        <input id="CpSolver.BooleanValue-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">BooleanValue</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">literal</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.BooleanValue-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.BooleanValue"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.BooleanValue-2267"><a href="#CpSolver.BooleanValue-2267"><span class="linenos">2267</span></a>    <span class="k">def</span> <span class="nf">BooleanValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">literal</span><span class="p">):</span>
</span><span id="CpSolver.BooleanValue-2268"><a href="#CpSolver.BooleanValue-2268"><span class="linenos">2268</span></a>        <span class="sd">&quot;&quot;&quot;Returns the boolean value of a literal after solve.&quot;&quot;&quot;</span>
</span><span id="CpSolver.BooleanValue-2269"><a href="#CpSolver.BooleanValue-2269"><span class="linenos">2269</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">:</span>
</span><span id="CpSolver.BooleanValue-2270"><a href="#CpSolver.BooleanValue-2270"><span class="linenos">2270</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Solve() has not be called.&#39;</span><span class="p">)</span>
</span><span id="CpSolver.BooleanValue-2271"><a href="#CpSolver.BooleanValue-2271"><span class="linenos">2271</span></a>        <span class="k">return</span> <span class="n">EvaluateBooleanExpression</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns the boolean value of a literal after solve.</p>
</div>


                            </div>
                            <div id="CpSolver.ObjectiveValue" class="classattr">
                                        <input id="CpSolver.ObjectiveValue-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ObjectiveValue</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.ObjectiveValue-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.ObjectiveValue"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.ObjectiveValue-2273"><a href="#CpSolver.ObjectiveValue-2273"><span class="linenos">2273</span></a>    <span class="k">def</span> <span class="nf">ObjectiveValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver.ObjectiveValue-2274"><a href="#CpSolver.ObjectiveValue-2274"><span class="linenos">2274</span></a>        <span class="sd">&quot;&quot;&quot;Returns the value of the objective after solve.&quot;&quot;&quot;</span>
</span><span id="CpSolver.ObjectiveValue-2275"><a href="#CpSolver.ObjectiveValue-2275"><span class="linenos">2275</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">objective_value</span>
</span></pre></div>


            <div class="docstring"><p>Returns the value of the objective after solve.</p>
</div>


                            </div>
                            <div id="CpSolver.BestObjectiveBound" class="classattr">
                                        <input id="CpSolver.BestObjectiveBound-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">BestObjectiveBound</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.BestObjectiveBound-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.BestObjectiveBound"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.BestObjectiveBound-2277"><a href="#CpSolver.BestObjectiveBound-2277"><span class="linenos">2277</span></a>    <span class="k">def</span> <span class="nf">BestObjectiveBound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver.BestObjectiveBound-2278"><a href="#CpSolver.BestObjectiveBound-2278"><span class="linenos">2278</span></a>        <span class="sd">&quot;&quot;&quot;Returns the best lower (upper) bound found when min(max)imizing.&quot;&quot;&quot;</span>
</span><span id="CpSolver.BestObjectiveBound-2279"><a href="#CpSolver.BestObjectiveBound-2279"><span class="linenos">2279</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">best_objective_bound</span>
</span></pre></div>


            <div class="docstring"><p>Returns the best lower (upper) bound found when min(max)imizing.</p>
</div>


                            </div>
                            <div id="CpSolver.StatusName" class="classattr">
                                        <input id="CpSolver.StatusName-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">StatusName</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">status</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.StatusName-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.StatusName"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.StatusName-2281"><a href="#CpSolver.StatusName-2281"><span class="linenos">2281</span></a>    <span class="k">def</span> <span class="nf">StatusName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="CpSolver.StatusName-2282"><a href="#CpSolver.StatusName-2282"><span class="linenos">2282</span></a>        <span class="sd">&quot;&quot;&quot;Returns the name of the status returned by Solve().&quot;&quot;&quot;</span>
</span><span id="CpSolver.StatusName-2283"><a href="#CpSolver.StatusName-2283"><span class="linenos">2283</span></a>        <span class="k">if</span> <span class="n">status</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="CpSolver.StatusName-2284"><a href="#CpSolver.StatusName-2284"><span class="linenos">2284</span></a>            <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">status</span>
</span><span id="CpSolver.StatusName-2285"><a href="#CpSolver.StatusName-2285"><span class="linenos">2285</span></a>        <span class="k">return</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpSolverStatus</span><span class="o">.</span><span class="n">Name</span><span class="p">(</span><span class="n">status</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns the name of the status returned by Solve().</p>
</div>


                            </div>
                            <div id="CpSolver.NumBooleans" class="classattr">
                                        <input id="CpSolver.NumBooleans-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">NumBooleans</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.NumBooleans-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.NumBooleans"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.NumBooleans-2287"><a href="#CpSolver.NumBooleans-2287"><span class="linenos">2287</span></a>    <span class="k">def</span> <span class="nf">NumBooleans</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver.NumBooleans-2288"><a href="#CpSolver.NumBooleans-2288"><span class="linenos">2288</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of boolean variables managed by the SAT solver.&quot;&quot;&quot;</span>
</span><span id="CpSolver.NumBooleans-2289"><a href="#CpSolver.NumBooleans-2289"><span class="linenos">2289</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">num_booleans</span>
</span></pre></div>


            <div class="docstring"><p>Returns the number of boolean variables managed by the SAT solver.</p>
</div>


                            </div>
                            <div id="CpSolver.NumConflicts" class="classattr">
                                        <input id="CpSolver.NumConflicts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">NumConflicts</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.NumConflicts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.NumConflicts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.NumConflicts-2291"><a href="#CpSolver.NumConflicts-2291"><span class="linenos">2291</span></a>    <span class="k">def</span> <span class="nf">NumConflicts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver.NumConflicts-2292"><a href="#CpSolver.NumConflicts-2292"><span class="linenos">2292</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of conflicts since the creation of the solver.&quot;&quot;&quot;</span>
</span><span id="CpSolver.NumConflicts-2293"><a href="#CpSolver.NumConflicts-2293"><span class="linenos">2293</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">num_conflicts</span>
</span></pre></div>


            <div class="docstring"><p>Returns the number of conflicts since the creation of the solver.</p>
</div>


                            </div>
                            <div id="CpSolver.NumBranches" class="classattr">
                                        <input id="CpSolver.NumBranches-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">NumBranches</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.NumBranches-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.NumBranches"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.NumBranches-2295"><a href="#CpSolver.NumBranches-2295"><span class="linenos">2295</span></a>    <span class="k">def</span> <span class="nf">NumBranches</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver.NumBranches-2296"><a href="#CpSolver.NumBranches-2296"><span class="linenos">2296</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of search branches explored by the solver.&quot;&quot;&quot;</span>
</span><span id="CpSolver.NumBranches-2297"><a href="#CpSolver.NumBranches-2297"><span class="linenos">2297</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">num_branches</span>
</span></pre></div>


            <div class="docstring"><p>Returns the number of search branches explored by the solver.</p>
</div>


                            </div>
                            <div id="CpSolver.WallTime" class="classattr">
                                        <input id="CpSolver.WallTime-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">WallTime</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.WallTime-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.WallTime"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.WallTime-2299"><a href="#CpSolver.WallTime-2299"><span class="linenos">2299</span></a>    <span class="k">def</span> <span class="nf">WallTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver.WallTime-2300"><a href="#CpSolver.WallTime-2300"><span class="linenos">2300</span></a>        <span class="sd">&quot;&quot;&quot;Returns the wall time in seconds since the creation of the solver.&quot;&quot;&quot;</span>
</span><span id="CpSolver.WallTime-2301"><a href="#CpSolver.WallTime-2301"><span class="linenos">2301</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">wall_time</span>
</span></pre></div>


            <div class="docstring"><p>Returns the wall time in seconds since the creation of the solver.</p>
</div>


                            </div>
                            <div id="CpSolver.UserTime" class="classattr">
                                        <input id="CpSolver.UserTime-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">UserTime</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.UserTime-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.UserTime"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.UserTime-2303"><a href="#CpSolver.UserTime-2303"><span class="linenos">2303</span></a>    <span class="k">def</span> <span class="nf">UserTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver.UserTime-2304"><a href="#CpSolver.UserTime-2304"><span class="linenos">2304</span></a>        <span class="sd">&quot;&quot;&quot;Returns the user time in seconds since the creation of the solver.&quot;&quot;&quot;</span>
</span><span id="CpSolver.UserTime-2305"><a href="#CpSolver.UserTime-2305"><span class="linenos">2305</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">user_time</span>
</span></pre></div>


            <div class="docstring"><p>Returns the user time in seconds since the creation of the solver.</p>
</div>


                            </div>
                            <div id="CpSolver.ResponseStats" class="classattr">
                                        <input id="CpSolver.ResponseStats-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ResponseStats</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.ResponseStats-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.ResponseStats"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.ResponseStats-2307"><a href="#CpSolver.ResponseStats-2307"><span class="linenos">2307</span></a>    <span class="k">def</span> <span class="nf">ResponseStats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver.ResponseStats-2308"><a href="#CpSolver.ResponseStats-2308"><span class="linenos">2308</span></a>        <span class="sd">&quot;&quot;&quot;Returns some statistics on the solution found as a string.&quot;&quot;&quot;</span>
</span><span id="CpSolver.ResponseStats-2309"><a href="#CpSolver.ResponseStats-2309"><span class="linenos">2309</span></a>        <span class="k">return</span> <span class="n">swig_helper</span><span class="o">.</span><span class="n">CpSatHelper</span><span class="o">.</span><span class="n">SerializedSolverResponseStats</span><span class="p">(</span>
</span><span id="CpSolver.ResponseStats-2310"><a href="#CpSolver.ResponseStats-2310"><span class="linenos">2310</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Returns some statistics on the solution found as a string.</p>
</div>


                            </div>
                            <div id="CpSolver.ResponseProto" class="classattr">
                                        <input id="CpSolver.ResponseProto-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">ResponseProto</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.ResponseProto-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.ResponseProto"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.ResponseProto-2312"><a href="#CpSolver.ResponseProto-2312"><span class="linenos">2312</span></a>    <span class="k">def</span> <span class="nf">ResponseProto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver.ResponseProto-2313"><a href="#CpSolver.ResponseProto-2313"><span class="linenos">2313</span></a>        <span class="sd">&quot;&quot;&quot;Returns the response object.&quot;&quot;&quot;</span>
</span><span id="CpSolver.ResponseProto-2314"><a href="#CpSolver.ResponseProto-2314"><span class="linenos">2314</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span>
</span></pre></div>


            <div class="docstring"><p>Returns the response object.</p>
</div>


                            </div>
                            <div id="CpSolver.SufficientAssumptionsForInfeasibility" class="classattr">
                                        <input id="CpSolver.SufficientAssumptionsForInfeasibility-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">SufficientAssumptionsForInfeasibility</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.SufficientAssumptionsForInfeasibility-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.SufficientAssumptionsForInfeasibility"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.SufficientAssumptionsForInfeasibility-2316"><a href="#CpSolver.SufficientAssumptionsForInfeasibility-2316"><span class="linenos">2316</span></a>    <span class="k">def</span> <span class="nf">SufficientAssumptionsForInfeasibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver.SufficientAssumptionsForInfeasibility-2317"><a href="#CpSolver.SufficientAssumptionsForInfeasibility-2317"><span class="linenos">2317</span></a>        <span class="sd">&quot;&quot;&quot;Returns the indices of the infeasible assumptions.&quot;&quot;&quot;</span>
</span><span id="CpSolver.SufficientAssumptionsForInfeasibility-2318"><a href="#CpSolver.SufficientAssumptionsForInfeasibility-2318"><span class="linenos">2318</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">sufficient_assumptions_for_infeasibility</span>
</span></pre></div>


            <div class="docstring"><p>Returns the indices of the infeasible assumptions.</p>
</div>


                            </div>
                            <div id="CpSolver.SolutionInfo" class="classattr">
                                        <input id="CpSolver.SolutionInfo-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">SolutionInfo</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolver.SolutionInfo-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolver.SolutionInfo"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolver.SolutionInfo-2320"><a href="#CpSolver.SolutionInfo-2320"><span class="linenos">2320</span></a>    <span class="k">def</span> <span class="nf">SolutionInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolver.SolutionInfo-2321"><a href="#CpSolver.SolutionInfo-2321"><span class="linenos">2321</span></a>        <span class="sd">&quot;&quot;&quot;Returns some information on the solve process.</span>
</span><span id="CpSolver.SolutionInfo-2322"><a href="#CpSolver.SolutionInfo-2322"><span class="linenos">2322</span></a>
</span><span id="CpSolver.SolutionInfo-2323"><a href="#CpSolver.SolutionInfo-2323"><span class="linenos">2323</span></a><span class="sd">    Returns some information on how the solution was found, or the reason</span>
</span><span id="CpSolver.SolutionInfo-2324"><a href="#CpSolver.SolutionInfo-2324"><span class="linenos">2324</span></a><span class="sd">    why the model or the parameters are invalid.</span>
</span><span id="CpSolver.SolutionInfo-2325"><a href="#CpSolver.SolutionInfo-2325"><span class="linenos">2325</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpSolver.SolutionInfo-2326"><a href="#CpSolver.SolutionInfo-2326"><span class="linenos">2326</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution</span><span class="o">.</span><span class="n">solution_info</span>
</span></pre></div>


            <div class="docstring"><p>Returns some information on the solve process.</p>

<p>Returns some information on how the solution was found, or the reason
why the model or the parameters are invalid.</p>
</div>


                            </div>
                </section>
                <section id="CpSolverSolutionCallback">
                            <input id="CpSolverSolutionCallback-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">CpSolverSolutionCallback</span><wbr>(<span class="base"><a href="swig_helper.html#SolutionCallback">ortools.sat.python.swig_helper.SolutionCallback</a></span>):

                <label class="view-source-button" for="CpSolverSolutionCallback-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolverSolutionCallback"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolverSolutionCallback-2329"><a href="#CpSolverSolutionCallback-2329"><span class="linenos">2329</span></a><span class="k">class</span> <span class="nc">CpSolverSolutionCallback</span><span class="p">(</span><span class="n">swig_helper</span><span class="o">.</span><span class="n">SolutionCallback</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2330"><a href="#CpSolverSolutionCallback-2330"><span class="linenos">2330</span></a>    <span class="sd">&quot;&quot;&quot;Solution callback.</span>
</span><span id="CpSolverSolutionCallback-2331"><a href="#CpSolverSolutionCallback-2331"><span class="linenos">2331</span></a>
</span><span id="CpSolverSolutionCallback-2332"><a href="#CpSolverSolutionCallback-2332"><span class="linenos">2332</span></a><span class="sd">  This class implements a callback that will be called at each new solution</span>
</span><span id="CpSolverSolutionCallback-2333"><a href="#CpSolverSolutionCallback-2333"><span class="linenos">2333</span></a><span class="sd">  found during search.</span>
</span><span id="CpSolverSolutionCallback-2334"><a href="#CpSolverSolutionCallback-2334"><span class="linenos">2334</span></a>
</span><span id="CpSolverSolutionCallback-2335"><a href="#CpSolverSolutionCallback-2335"><span class="linenos">2335</span></a><span class="sd">  The method OnSolutionCallback() will be called by the solver, and must be</span>
</span><span id="CpSolverSolutionCallback-2336"><a href="#CpSolverSolutionCallback-2336"><span class="linenos">2336</span></a><span class="sd">  implemented. The current solution can be queried using the BooleanValue()</span>
</span><span id="CpSolverSolutionCallback-2337"><a href="#CpSolverSolutionCallback-2337"><span class="linenos">2337</span></a><span class="sd">  and Value() methods.</span>
</span><span id="CpSolverSolutionCallback-2338"><a href="#CpSolverSolutionCallback-2338"><span class="linenos">2338</span></a>
</span><span id="CpSolverSolutionCallback-2339"><a href="#CpSolverSolutionCallback-2339"><span class="linenos">2339</span></a><span class="sd">  It inherits the following methods from its base class:</span>
</span><span id="CpSolverSolutionCallback-2340"><a href="#CpSolverSolutionCallback-2340"><span class="linenos">2340</span></a>
</span><span id="CpSolverSolutionCallback-2341"><a href="#CpSolverSolutionCallback-2341"><span class="linenos">2341</span></a><span class="sd">  * `ObjectiveValue(self)`</span>
</span><span id="CpSolverSolutionCallback-2342"><a href="#CpSolverSolutionCallback-2342"><span class="linenos">2342</span></a><span class="sd">  * `BestObjectiveBound(self)`</span>
</span><span id="CpSolverSolutionCallback-2343"><a href="#CpSolverSolutionCallback-2343"><span class="linenos">2343</span></a><span class="sd">  * `NumBooleans(self)`</span>
</span><span id="CpSolverSolutionCallback-2344"><a href="#CpSolverSolutionCallback-2344"><span class="linenos">2344</span></a><span class="sd">  * `NumConflicts(self)`</span>
</span><span id="CpSolverSolutionCallback-2345"><a href="#CpSolverSolutionCallback-2345"><span class="linenos">2345</span></a><span class="sd">  * `NumBranches(self)`</span>
</span><span id="CpSolverSolutionCallback-2346"><a href="#CpSolverSolutionCallback-2346"><span class="linenos">2346</span></a><span class="sd">  * `WallTime(self)`</span>
</span><span id="CpSolverSolutionCallback-2347"><a href="#CpSolverSolutionCallback-2347"><span class="linenos">2347</span></a><span class="sd">  * `UserTime(self)`</span>
</span><span id="CpSolverSolutionCallback-2348"><a href="#CpSolverSolutionCallback-2348"><span class="linenos">2348</span></a>
</span><span id="CpSolverSolutionCallback-2349"><a href="#CpSolverSolutionCallback-2349"><span class="linenos">2349</span></a><span class="sd">  These methods returns the same information as their counterpart in the</span>
</span><span id="CpSolverSolutionCallback-2350"><a href="#CpSolverSolutionCallback-2350"><span class="linenos">2350</span></a><span class="sd">  `CpSolver` class.</span>
</span><span id="CpSolverSolutionCallback-2351"><a href="#CpSolverSolutionCallback-2351"><span class="linenos">2351</span></a><span class="sd">  &quot;&quot;&quot;</span>
</span><span id="CpSolverSolutionCallback-2352"><a href="#CpSolverSolutionCallback-2352"><span class="linenos">2352</span></a>
</span><span id="CpSolverSolutionCallback-2353"><a href="#CpSolverSolutionCallback-2353"><span class="linenos">2353</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2354"><a href="#CpSolverSolutionCallback-2354"><span class="linenos">2354</span></a>        <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolutionCallback</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="CpSolverSolutionCallback-2355"><a href="#CpSolverSolutionCallback-2355"><span class="linenos">2355</span></a>
</span><span id="CpSolverSolutionCallback-2356"><a href="#CpSolverSolutionCallback-2356"><span class="linenos">2356</span></a>    <span class="k">def</span> <span class="nf">OnSolutionCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2357"><a href="#CpSolverSolutionCallback-2357"><span class="linenos">2357</span></a>        <span class="sd">&quot;&quot;&quot;Proxy for the same method in snake case.&quot;&quot;&quot;</span>
</span><span id="CpSolverSolutionCallback-2358"><a href="#CpSolverSolutionCallback-2358"><span class="linenos">2358</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_solution_callback</span><span class="p">()</span>
</span><span id="CpSolverSolutionCallback-2359"><a href="#CpSolverSolutionCallback-2359"><span class="linenos">2359</span></a>
</span><span id="CpSolverSolutionCallback-2360"><a href="#CpSolverSolutionCallback-2360"><span class="linenos">2360</span></a>    <span class="k">def</span> <span class="nf">BooleanValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lit</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2361"><a href="#CpSolverSolutionCallback-2361"><span class="linenos">2361</span></a>        <span class="sd">&quot;&quot;&quot;Returns the boolean value of a boolean literal.</span>
</span><span id="CpSolverSolutionCallback-2362"><a href="#CpSolverSolutionCallback-2362"><span class="linenos">2362</span></a>
</span><span id="CpSolverSolutionCallback-2363"><a href="#CpSolverSolutionCallback-2363"><span class="linenos">2363</span></a><span class="sd">    Args:</span>
</span><span id="CpSolverSolutionCallback-2364"><a href="#CpSolverSolutionCallback-2364"><span class="linenos">2364</span></a><span class="sd">        lit: A boolean variable or its negation.</span>
</span><span id="CpSolverSolutionCallback-2365"><a href="#CpSolverSolutionCallback-2365"><span class="linenos">2365</span></a>
</span><span id="CpSolverSolutionCallback-2366"><a href="#CpSolverSolutionCallback-2366"><span class="linenos">2366</span></a><span class="sd">    Returns:</span>
</span><span id="CpSolverSolutionCallback-2367"><a href="#CpSolverSolutionCallback-2367"><span class="linenos">2367</span></a><span class="sd">        The Boolean value of the literal in the solution.</span>
</span><span id="CpSolverSolutionCallback-2368"><a href="#CpSolverSolutionCallback-2368"><span class="linenos">2368</span></a>
</span><span id="CpSolverSolutionCallback-2369"><a href="#CpSolverSolutionCallback-2369"><span class="linenos">2369</span></a><span class="sd">    Raises:</span>
</span><span id="CpSolverSolutionCallback-2370"><a href="#CpSolverSolutionCallback-2370"><span class="linenos">2370</span></a><span class="sd">        RuntimeError: if `lit` is not a boolean variable or its negation.</span>
</span><span id="CpSolverSolutionCallback-2371"><a href="#CpSolverSolutionCallback-2371"><span class="linenos">2371</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpSolverSolutionCallback-2372"><a href="#CpSolverSolutionCallback-2372"><span class="linenos">2372</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">HasResponse</span><span class="p">():</span>
</span><span id="CpSolverSolutionCallback-2373"><a href="#CpSolverSolutionCallback-2373"><span class="linenos">2373</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Solve() has not be called.&#39;</span><span class="p">)</span>
</span><span id="CpSolverSolutionCallback-2374"><a href="#CpSolverSolutionCallback-2374"><span class="linenos">2374</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">lit</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2375"><a href="#CpSolverSolutionCallback-2375"><span class="linenos">2375</span></a>            <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span>
</span><span id="CpSolverSolutionCallback-2376"><a href="#CpSolverSolutionCallback-2376"><span class="linenos">2376</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lit</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lit</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2377"><a href="#CpSolverSolutionCallback-2377"><span class="linenos">2377</span></a>            <span class="n">index</span> <span class="o">=</span> <span class="n">lit</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="CpSolverSolutionCallback-2378"><a href="#CpSolverSolutionCallback-2378"><span class="linenos">2378</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">SolutionBooleanValue</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</span><span id="CpSolverSolutionCallback-2379"><a href="#CpSolverSolutionCallback-2379"><span class="linenos">2379</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CpSolverSolutionCallback-2380"><a href="#CpSolverSolutionCallback-2380"><span class="linenos">2380</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cannot interpret </span><span class="si">{</span><span class="n">lit</span><span class="si">}</span><span class="s1"> as a boolean expression.&#39;</span><span class="p">)</span>
</span><span id="CpSolverSolutionCallback-2381"><a href="#CpSolverSolutionCallback-2381"><span class="linenos">2381</span></a>
</span><span id="CpSolverSolutionCallback-2382"><a href="#CpSolverSolutionCallback-2382"><span class="linenos">2382</span></a>    <span class="k">def</span> <span class="nf">Value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2383"><a href="#CpSolverSolutionCallback-2383"><span class="linenos">2383</span></a>        <span class="sd">&quot;&quot;&quot;Evaluates an linear expression in the current solution.</span>
</span><span id="CpSolverSolutionCallback-2384"><a href="#CpSolverSolutionCallback-2384"><span class="linenos">2384</span></a>
</span><span id="CpSolverSolutionCallback-2385"><a href="#CpSolverSolutionCallback-2385"><span class="linenos">2385</span></a><span class="sd">    Args:</span>
</span><span id="CpSolverSolutionCallback-2386"><a href="#CpSolverSolutionCallback-2386"><span class="linenos">2386</span></a><span class="sd">        expression: a linear expression of the model.</span>
</span><span id="CpSolverSolutionCallback-2387"><a href="#CpSolverSolutionCallback-2387"><span class="linenos">2387</span></a>
</span><span id="CpSolverSolutionCallback-2388"><a href="#CpSolverSolutionCallback-2388"><span class="linenos">2388</span></a><span class="sd">    Returns:</span>
</span><span id="CpSolverSolutionCallback-2389"><a href="#CpSolverSolutionCallback-2389"><span class="linenos">2389</span></a><span class="sd">        An integer value equal to the evaluation of the linear expression</span>
</span><span id="CpSolverSolutionCallback-2390"><a href="#CpSolverSolutionCallback-2390"><span class="linenos">2390</span></a><span class="sd">        against the current solution.</span>
</span><span id="CpSolverSolutionCallback-2391"><a href="#CpSolverSolutionCallback-2391"><span class="linenos">2391</span></a>
</span><span id="CpSolverSolutionCallback-2392"><a href="#CpSolverSolutionCallback-2392"><span class="linenos">2392</span></a><span class="sd">    Raises:</span>
</span><span id="CpSolverSolutionCallback-2393"><a href="#CpSolverSolutionCallback-2393"><span class="linenos">2393</span></a><span class="sd">        RuntimeError: if &#39;expression&#39; is not a LinearExpr.</span>
</span><span id="CpSolverSolutionCallback-2394"><a href="#CpSolverSolutionCallback-2394"><span class="linenos">2394</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpSolverSolutionCallback-2395"><a href="#CpSolverSolutionCallback-2395"><span class="linenos">2395</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">HasResponse</span><span class="p">():</span>
</span><span id="CpSolverSolutionCallback-2396"><a href="#CpSolverSolutionCallback-2396"><span class="linenos">2396</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Solve() has not be called.&#39;</span><span class="p">)</span>
</span><span id="CpSolverSolutionCallback-2397"><a href="#CpSolverSolutionCallback-2397"><span class="linenos">2397</span></a>
</span><span id="CpSolverSolutionCallback-2398"><a href="#CpSolverSolutionCallback-2398"><span class="linenos">2398</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="CpSolverSolutionCallback-2399"><a href="#CpSolverSolutionCallback-2399"><span class="linenos">2399</span></a>        <span class="n">to_process</span> <span class="o">=</span> <span class="p">[(</span><span class="n">expression</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</span><span id="CpSolverSolutionCallback-2400"><a href="#CpSolverSolutionCallback-2400"><span class="linenos">2400</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>
</span><span id="CpSolverSolutionCallback-2401"><a href="#CpSolverSolutionCallback-2401"><span class="linenos">2401</span></a>            <span class="n">expr</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="CpSolverSolutionCallback-2402"><a href="#CpSolverSolutionCallback-2402"><span class="linenos">2402</span></a>            <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2403"><a href="#CpSolverSolutionCallback-2403"><span class="linenos">2403</span></a>                <span class="n">value</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="CpSolverSolutionCallback-2404"><a href="#CpSolverSolutionCallback-2404"><span class="linenos">2404</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2405"><a href="#CpSolverSolutionCallback-2405"><span class="linenos">2405</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="CpSolverSolutionCallback-2406"><a href="#CpSolverSolutionCallback-2406"><span class="linenos">2406</span></a>                    <span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()))</span>
</span><span id="CpSolverSolutionCallback-2407"><a href="#CpSolverSolutionCallback-2407"><span class="linenos">2407</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_Sum</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2408"><a href="#CpSolverSolutionCallback-2408"><span class="linenos">2408</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Left</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="CpSolverSolutionCallback-2409"><a href="#CpSolverSolutionCallback-2409"><span class="linenos">2409</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Right</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="CpSolverSolutionCallback-2410"><a href="#CpSolverSolutionCallback-2410"><span class="linenos">2410</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_SumArray</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2411"><a href="#CpSolverSolutionCallback-2411"><span class="linenos">2411</span></a>                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">():</span>
</span><span id="CpSolverSolutionCallback-2412"><a href="#CpSolverSolutionCallback-2412"><span class="linenos">2412</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="CpSolverSolutionCallback-2413"><a href="#CpSolverSolutionCallback-2413"><span class="linenos">2413</span></a>                    <span class="n">value</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="CpSolverSolutionCallback-2414"><a href="#CpSolverSolutionCallback-2414"><span class="linenos">2414</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_WeightedSum</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2415"><a href="#CpSolverSolutionCallback-2415"><span class="linenos">2415</span></a>                <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">(),</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficients</span><span class="p">()):</span>
</span><span id="CpSolverSolutionCallback-2416"><a href="#CpSolverSolutionCallback-2416"><span class="linenos">2416</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">c</span><span class="p">))</span>
</span><span id="CpSolverSolutionCallback-2417"><a href="#CpSolverSolutionCallback-2417"><span class="linenos">2417</span></a>                <span class="n">value</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="CpSolverSolutionCallback-2418"><a href="#CpSolverSolutionCallback-2418"><span class="linenos">2418</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2419"><a href="#CpSolverSolutionCallback-2419"><span class="linenos">2419</span></a>                <span class="n">value</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">SolutionIntegerValue</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="CpSolverSolutionCallback-2420"><a href="#CpSolverSolutionCallback-2420"><span class="linenos">2420</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2421"><a href="#CpSolverSolutionCallback-2421"><span class="linenos">2421</span></a>                <span class="n">value</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span>
</span><span id="CpSolverSolutionCallback-2422"><a href="#CpSolverSolutionCallback-2422"><span class="linenos">2422</span></a>                                  <span class="bp">self</span><span class="o">.</span><span class="n">SolutionIntegerValue</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()</span><span class="o">.</span><span class="n">Index</span><span class="p">()))</span>
</span><span id="CpSolverSolutionCallback-2423"><a href="#CpSolverSolutionCallback-2423"><span class="linenos">2423</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CpSolverSolutionCallback-2424"><a href="#CpSolverSolutionCallback-2424"><span class="linenos">2424</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpSolverSolutionCallback-2425"><a href="#CpSolverSolutionCallback-2425"><span class="linenos">2425</span></a>                    <span class="sa">f</span><span class="s1">&#39;Cannot interpret </span><span class="si">{</span><span class="n">expression</span><span class="si">}</span><span class="s1"> as a linear expression.&#39;</span><span class="p">)</span>
</span><span id="CpSolverSolutionCallback-2426"><a href="#CpSolverSolutionCallback-2426"><span class="linenos">2426</span></a>
</span><span id="CpSolverSolutionCallback-2427"><a href="#CpSolverSolutionCallback-2427"><span class="linenos">2427</span></a>        <span class="k">return</span> <span class="n">value</span>
</span><span id="CpSolverSolutionCallback-2428"><a href="#CpSolverSolutionCallback-2428"><span class="linenos">2428</span></a>
</span><span id="CpSolverSolutionCallback-2429"><a href="#CpSolverSolutionCallback-2429"><span class="linenos">2429</span></a>    <span class="k">def</span> <span class="nf">Response</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback-2430"><a href="#CpSolverSolutionCallback-2430"><span class="linenos">2430</span></a>        <span class="sd">&quot;&quot;&quot;Returns the current solution response.&quot;&quot;&quot;</span>
</span><span id="CpSolverSolutionCallback-2431"><a href="#CpSolverSolutionCallback-2431"><span class="linenos">2431</span></a>        <span class="k">return</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpSolverResponse</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
</span><span id="CpSolverSolutionCallback-2432"><a href="#CpSolverSolutionCallback-2432"><span class="linenos">2432</span></a>            <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolutionCallback</span><span class="o">.</span><span class="n">SerializedResponse</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Solution callback.</p>

<p>This class implements a callback that will be called at each new solution
found during search.</p>

<p>The method OnSolutionCallback() will be called by the solver, and must be
implemented. The current solution can be queried using the BooleanValue()
and Value() methods.</p>

<p>It inherits the following methods from its base class:</p>

<ul>
<li><code>ObjectiveValue(self)</code></li>
<li><code>BestObjectiveBound(self)</code></li>
<li><code>NumBooleans(self)</code></li>
<li><code>NumConflicts(self)</code></li>
<li><code>NumBranches(self)</code></li>
<li><code>WallTime(self)</code></li>
<li><code>UserTime(self)</code></li>
</ul>

<p>These methods returns the same information as their counterpart in the
<code><a href="#CpSolver">CpSolver</a></code> class.</p>
</div>


                            <div id="CpSolverSolutionCallback.__init__" class="classattr">
                                        <input id="CpSolverSolutionCallback.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">CpSolverSolutionCallback</span><span class="signature pdoc-code condensed">()</span>

                <label class="view-source-button" for="CpSolverSolutionCallback.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolverSolutionCallback.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolverSolutionCallback.__init__-2353"><a href="#CpSolverSolutionCallback.__init__-2353"><span class="linenos">2353</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback.__init__-2354"><a href="#CpSolverSolutionCallback.__init__-2354"><span class="linenos">2354</span></a>        <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolutionCallback</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>__init__(self: <a href="swig_helper.html#SolutionCallback">ortools.sat.python.swig_helper.SolutionCallback</a>) -> None</p>
</div>


                            </div>
                            <div id="CpSolverSolutionCallback.OnSolutionCallback" class="classattr">
                                        <input id="CpSolverSolutionCallback.OnSolutionCallback-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">OnSolutionCallback</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolverSolutionCallback.OnSolutionCallback-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolverSolutionCallback.OnSolutionCallback"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolverSolutionCallback.OnSolutionCallback-2356"><a href="#CpSolverSolutionCallback.OnSolutionCallback-2356"><span class="linenos">2356</span></a>    <span class="k">def</span> <span class="nf">OnSolutionCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback.OnSolutionCallback-2357"><a href="#CpSolverSolutionCallback.OnSolutionCallback-2357"><span class="linenos">2357</span></a>        <span class="sd">&quot;&quot;&quot;Proxy for the same method in snake case.&quot;&quot;&quot;</span>
</span><span id="CpSolverSolutionCallback.OnSolutionCallback-2358"><a href="#CpSolverSolutionCallback.OnSolutionCallback-2358"><span class="linenos">2358</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">on_solution_callback</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Proxy for the same method in snake case.</p>
</div>


                            </div>
                            <div id="CpSolverSolutionCallback.BooleanValue" class="classattr">
                                        <input id="CpSolverSolutionCallback.BooleanValue-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">BooleanValue</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">lit</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolverSolutionCallback.BooleanValue-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolverSolutionCallback.BooleanValue"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolverSolutionCallback.BooleanValue-2360"><a href="#CpSolverSolutionCallback.BooleanValue-2360"><span class="linenos">2360</span></a>    <span class="k">def</span> <span class="nf">BooleanValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lit</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2361"><a href="#CpSolverSolutionCallback.BooleanValue-2361"><span class="linenos">2361</span></a>        <span class="sd">&quot;&quot;&quot;Returns the boolean value of a boolean literal.</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2362"><a href="#CpSolverSolutionCallback.BooleanValue-2362"><span class="linenos">2362</span></a>
</span><span id="CpSolverSolutionCallback.BooleanValue-2363"><a href="#CpSolverSolutionCallback.BooleanValue-2363"><span class="linenos">2363</span></a><span class="sd">    Args:</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2364"><a href="#CpSolverSolutionCallback.BooleanValue-2364"><span class="linenos">2364</span></a><span class="sd">        lit: A boolean variable or its negation.</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2365"><a href="#CpSolverSolutionCallback.BooleanValue-2365"><span class="linenos">2365</span></a>
</span><span id="CpSolverSolutionCallback.BooleanValue-2366"><a href="#CpSolverSolutionCallback.BooleanValue-2366"><span class="linenos">2366</span></a><span class="sd">    Returns:</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2367"><a href="#CpSolverSolutionCallback.BooleanValue-2367"><span class="linenos">2367</span></a><span class="sd">        The Boolean value of the literal in the solution.</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2368"><a href="#CpSolverSolutionCallback.BooleanValue-2368"><span class="linenos">2368</span></a>
</span><span id="CpSolverSolutionCallback.BooleanValue-2369"><a href="#CpSolverSolutionCallback.BooleanValue-2369"><span class="linenos">2369</span></a><span class="sd">    Raises:</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2370"><a href="#CpSolverSolutionCallback.BooleanValue-2370"><span class="linenos">2370</span></a><span class="sd">        RuntimeError: if `lit` is not a boolean variable or its negation.</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2371"><a href="#CpSolverSolutionCallback.BooleanValue-2371"><span class="linenos">2371</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2372"><a href="#CpSolverSolutionCallback.BooleanValue-2372"><span class="linenos">2372</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">HasResponse</span><span class="p">():</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2373"><a href="#CpSolverSolutionCallback.BooleanValue-2373"><span class="linenos">2373</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Solve() has not be called.&#39;</span><span class="p">)</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2374"><a href="#CpSolverSolutionCallback.BooleanValue-2374"><span class="linenos">2374</span></a>        <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">lit</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2375"><a href="#CpSolverSolutionCallback.BooleanValue-2375"><span class="linenos">2375</span></a>            <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">lit</span><span class="p">)</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2376"><a href="#CpSolverSolutionCallback.BooleanValue-2376"><span class="linenos">2376</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lit</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lit</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2377"><a href="#CpSolverSolutionCallback.BooleanValue-2377"><span class="linenos">2377</span></a>            <span class="n">index</span> <span class="o">=</span> <span class="n">lit</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2378"><a href="#CpSolverSolutionCallback.BooleanValue-2378"><span class="linenos">2378</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">SolutionBooleanValue</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2379"><a href="#CpSolverSolutionCallback.BooleanValue-2379"><span class="linenos">2379</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="CpSolverSolutionCallback.BooleanValue-2380"><a href="#CpSolverSolutionCallback.BooleanValue-2380"><span class="linenos">2380</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Cannot interpret </span><span class="si">{</span><span class="n">lit</span><span class="si">}</span><span class="s1"> as a boolean expression.&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns the boolean value of a boolean literal.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>lit:</strong>  A boolean variable or its negation.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>The Boolean value of the literal in the solution.</p>
</blockquote>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>RuntimeError:</strong>  if <code>lit</code> is not a boolean variable or its negation.</li>
</ul>
</div>


                            </div>
                            <div id="CpSolverSolutionCallback.Value" class="classattr">
                                        <input id="CpSolverSolutionCallback.Value-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Value</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">expression</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolverSolutionCallback.Value-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolverSolutionCallback.Value"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolverSolutionCallback.Value-2382"><a href="#CpSolverSolutionCallback.Value-2382"><span class="linenos">2382</span></a>    <span class="k">def</span> <span class="nf">Value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback.Value-2383"><a href="#CpSolverSolutionCallback.Value-2383"><span class="linenos">2383</span></a>        <span class="sd">&quot;&quot;&quot;Evaluates an linear expression in the current solution.</span>
</span><span id="CpSolverSolutionCallback.Value-2384"><a href="#CpSolverSolutionCallback.Value-2384"><span class="linenos">2384</span></a>
</span><span id="CpSolverSolutionCallback.Value-2385"><a href="#CpSolverSolutionCallback.Value-2385"><span class="linenos">2385</span></a><span class="sd">    Args:</span>
</span><span id="CpSolverSolutionCallback.Value-2386"><a href="#CpSolverSolutionCallback.Value-2386"><span class="linenos">2386</span></a><span class="sd">        expression: a linear expression of the model.</span>
</span><span id="CpSolverSolutionCallback.Value-2387"><a href="#CpSolverSolutionCallback.Value-2387"><span class="linenos">2387</span></a>
</span><span id="CpSolverSolutionCallback.Value-2388"><a href="#CpSolverSolutionCallback.Value-2388"><span class="linenos">2388</span></a><span class="sd">    Returns:</span>
</span><span id="CpSolverSolutionCallback.Value-2389"><a href="#CpSolverSolutionCallback.Value-2389"><span class="linenos">2389</span></a><span class="sd">        An integer value equal to the evaluation of the linear expression</span>
</span><span id="CpSolverSolutionCallback.Value-2390"><a href="#CpSolverSolutionCallback.Value-2390"><span class="linenos">2390</span></a><span class="sd">        against the current solution.</span>
</span><span id="CpSolverSolutionCallback.Value-2391"><a href="#CpSolverSolutionCallback.Value-2391"><span class="linenos">2391</span></a>
</span><span id="CpSolverSolutionCallback.Value-2392"><a href="#CpSolverSolutionCallback.Value-2392"><span class="linenos">2392</span></a><span class="sd">    Raises:</span>
</span><span id="CpSolverSolutionCallback.Value-2393"><a href="#CpSolverSolutionCallback.Value-2393"><span class="linenos">2393</span></a><span class="sd">        RuntimeError: if &#39;expression&#39; is not a LinearExpr.</span>
</span><span id="CpSolverSolutionCallback.Value-2394"><a href="#CpSolverSolutionCallback.Value-2394"><span class="linenos">2394</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="CpSolverSolutionCallback.Value-2395"><a href="#CpSolverSolutionCallback.Value-2395"><span class="linenos">2395</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">HasResponse</span><span class="p">():</span>
</span><span id="CpSolverSolutionCallback.Value-2396"><a href="#CpSolverSolutionCallback.Value-2396"><span class="linenos">2396</span></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Solve() has not be called.&#39;</span><span class="p">)</span>
</span><span id="CpSolverSolutionCallback.Value-2397"><a href="#CpSolverSolutionCallback.Value-2397"><span class="linenos">2397</span></a>
</span><span id="CpSolverSolutionCallback.Value-2398"><a href="#CpSolverSolutionCallback.Value-2398"><span class="linenos">2398</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="CpSolverSolutionCallback.Value-2399"><a href="#CpSolverSolutionCallback.Value-2399"><span class="linenos">2399</span></a>        <span class="n">to_process</span> <span class="o">=</span> <span class="p">[(</span><span class="n">expression</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
</span><span id="CpSolverSolutionCallback.Value-2400"><a href="#CpSolverSolutionCallback.Value-2400"><span class="linenos">2400</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>
</span><span id="CpSolverSolutionCallback.Value-2401"><a href="#CpSolverSolutionCallback.Value-2401"><span class="linenos">2401</span></a>            <span class="n">expr</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="CpSolverSolutionCallback.Value-2402"><a href="#CpSolverSolutionCallback.Value-2402"><span class="linenos">2402</span></a>            <span class="k">if</span> <span class="n">cmh</span><span class="o">.</span><span class="n">is_integral</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback.Value-2403"><a href="#CpSolverSolutionCallback.Value-2403"><span class="linenos">2403</span></a>                <span class="n">value</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="CpSolverSolutionCallback.Value-2404"><a href="#CpSolverSolutionCallback.Value-2404"><span class="linenos">2404</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_ProductCst</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback.Value-2405"><a href="#CpSolverSolutionCallback.Value-2405"><span class="linenos">2405</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="CpSolverSolutionCallback.Value-2406"><a href="#CpSolverSolutionCallback.Value-2406"><span class="linenos">2406</span></a>                    <span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expression</span><span class="p">(),</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficient</span><span class="p">()))</span>
</span><span id="CpSolverSolutionCallback.Value-2407"><a href="#CpSolverSolutionCallback.Value-2407"><span class="linenos">2407</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_Sum</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback.Value-2408"><a href="#CpSolverSolutionCallback.Value-2408"><span class="linenos">2408</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Left</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="CpSolverSolutionCallback.Value-2409"><a href="#CpSolverSolutionCallback.Value-2409"><span class="linenos">2409</span></a>                <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">expr</span><span class="o">.</span><span class="n">Right</span><span class="p">(),</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="CpSolverSolutionCallback.Value-2410"><a href="#CpSolverSolutionCallback.Value-2410"><span class="linenos">2410</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_SumArray</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback.Value-2411"><a href="#CpSolverSolutionCallback.Value-2411"><span class="linenos">2411</span></a>                <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">():</span>
</span><span id="CpSolverSolutionCallback.Value-2412"><a href="#CpSolverSolutionCallback.Value-2412"><span class="linenos">2412</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span><span class="p">))</span>
</span><span id="CpSolverSolutionCallback.Value-2413"><a href="#CpSolverSolutionCallback.Value-2413"><span class="linenos">2413</span></a>                    <span class="n">value</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="CpSolverSolutionCallback.Value-2414"><a href="#CpSolverSolutionCallback.Value-2414"><span class="linenos">2414</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_WeightedSum</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback.Value-2415"><a href="#CpSolverSolutionCallback.Value-2415"><span class="linenos">2415</span></a>                <span class="k">for</span> <span class="n">e</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Expressions</span><span class="p">(),</span> <span class="n">expr</span><span class="o">.</span><span class="n">Coefficients</span><span class="p">()):</span>
</span><span id="CpSolverSolutionCallback.Value-2416"><a href="#CpSolverSolutionCallback.Value-2416"><span class="linenos">2416</span></a>                    <span class="n">to_process</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">e</span><span class="p">,</span> <span class="n">coeff</span> <span class="o">*</span> <span class="n">c</span><span class="p">))</span>
</span><span id="CpSolverSolutionCallback.Value-2417"><a href="#CpSolverSolutionCallback.Value-2417"><span class="linenos">2417</span></a>                <span class="n">value</span> <span class="o">+=</span> <span class="n">expr</span><span class="o">.</span><span class="n">Constant</span><span class="p">()</span> <span class="o">*</span> <span class="n">coeff</span>
</span><span id="CpSolverSolutionCallback.Value-2418"><a href="#CpSolverSolutionCallback.Value-2418"><span class="linenos">2418</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">IntVar</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback.Value-2419"><a href="#CpSolverSolutionCallback.Value-2419"><span class="linenos">2419</span></a>                <span class="n">value</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">SolutionIntegerValue</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Index</span><span class="p">())</span>
</span><span id="CpSolverSolutionCallback.Value-2420"><a href="#CpSolverSolutionCallback.Value-2420"><span class="linenos">2420</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">_NotBooleanVariable</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback.Value-2421"><a href="#CpSolverSolutionCallback.Value-2421"><span class="linenos">2421</span></a>                <span class="n">value</span> <span class="o">+=</span> <span class="n">coeff</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span>
</span><span id="CpSolverSolutionCallback.Value-2422"><a href="#CpSolverSolutionCallback.Value-2422"><span class="linenos">2422</span></a>                                  <span class="bp">self</span><span class="o">.</span><span class="n">SolutionIntegerValue</span><span class="p">(</span><span class="n">expr</span><span class="o">.</span><span class="n">Not</span><span class="p">()</span><span class="o">.</span><span class="n">Index</span><span class="p">()))</span>
</span><span id="CpSolverSolutionCallback.Value-2423"><a href="#CpSolverSolutionCallback.Value-2423"><span class="linenos">2423</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="CpSolverSolutionCallback.Value-2424"><a href="#CpSolverSolutionCallback.Value-2424"><span class="linenos">2424</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="CpSolverSolutionCallback.Value-2425"><a href="#CpSolverSolutionCallback.Value-2425"><span class="linenos">2425</span></a>                    <span class="sa">f</span><span class="s1">&#39;Cannot interpret </span><span class="si">{</span><span class="n">expression</span><span class="si">}</span><span class="s1"> as a linear expression.&#39;</span><span class="p">)</span>
</span><span id="CpSolverSolutionCallback.Value-2426"><a href="#CpSolverSolutionCallback.Value-2426"><span class="linenos">2426</span></a>
</span><span id="CpSolverSolutionCallback.Value-2427"><a href="#CpSolverSolutionCallback.Value-2427"><span class="linenos">2427</span></a>        <span class="k">return</span> <span class="n">value</span>
</span></pre></div>


            <div class="docstring"><p>Evaluates an linear expression in the current solution.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>expression:</strong>  a linear expression of the model.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>An integer value equal to the evaluation of the linear expression
  against the current solution.</p>
</blockquote>

<h6 id="raises">Raises</h6>

<ul>
<li><strong>RuntimeError:</strong>  if 'expression' is not a LinearExpr.</li>
</ul>
</div>


                            </div>
                            <div id="CpSolverSolutionCallback.Response" class="classattr">
                                        <input id="CpSolverSolutionCallback.Response-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">Response</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="CpSolverSolutionCallback.Response-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CpSolverSolutionCallback.Response"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CpSolverSolutionCallback.Response-2429"><a href="#CpSolverSolutionCallback.Response-2429"><span class="linenos">2429</span></a>    <span class="k">def</span> <span class="nf">Response</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="CpSolverSolutionCallback.Response-2430"><a href="#CpSolverSolutionCallback.Response-2430"><span class="linenos">2430</span></a>        <span class="sd">&quot;&quot;&quot;Returns the current solution response.&quot;&quot;&quot;</span>
</span><span id="CpSolverSolutionCallback.Response-2431"><a href="#CpSolverSolutionCallback.Response-2431"><span class="linenos">2431</span></a>        <span class="k">return</span> <span class="n">cp_model_pb2</span><span class="o">.</span><span class="n">CpSolverResponse</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
</span><span id="CpSolverSolutionCallback.Response-2432"><a href="#CpSolverSolutionCallback.Response-2432"><span class="linenos">2432</span></a>            <span class="n">swig_helper</span><span class="o">.</span><span class="n">SolutionCallback</span><span class="o">.</span><span class="n">SerializedResponse</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Returns the current solution response.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="swig_helper.html#SolutionCallback">ortools.sat.python.swig_helper.SolutionCallback</a></dt>
                                <dd id="CpSolverSolutionCallback.BestObjectiveBound" class="function"><a href="swig_helper.html#SolutionCallback.BestObjectiveBound">BestObjectiveBound</a></dd>
                <dd id="CpSolverSolutionCallback.DeterministicTime" class="function"><a href="swig_helper.html#SolutionCallback.DeterministicTime">DeterministicTime</a></dd>
                <dd id="CpSolverSolutionCallback.HasResponse" class="function"><a href="swig_helper.html#SolutionCallback.HasResponse">HasResponse</a></dd>
                <dd id="CpSolverSolutionCallback.NumBinaryPropagations" class="function"><a href="swig_helper.html#SolutionCallback.NumBinaryPropagations">NumBinaryPropagations</a></dd>
                <dd id="CpSolverSolutionCallback.NumBooleans" class="function"><a href="swig_helper.html#SolutionCallback.NumBooleans">NumBooleans</a></dd>
                <dd id="CpSolverSolutionCallback.NumBranches" class="function"><a href="swig_helper.html#SolutionCallback.NumBranches">NumBranches</a></dd>
                <dd id="CpSolverSolutionCallback.NumConflicts" class="function"><a href="swig_helper.html#SolutionCallback.NumConflicts">NumConflicts</a></dd>
                <dd id="CpSolverSolutionCallback.NumIntegerPropagations" class="function"><a href="swig_helper.html#SolutionCallback.NumIntegerPropagations">NumIntegerPropagations</a></dd>
                <dd id="CpSolverSolutionCallback.ObjectiveValue" class="function"><a href="swig_helper.html#SolutionCallback.ObjectiveValue">ObjectiveValue</a></dd>
                <dd id="CpSolverSolutionCallback.SerializedResponse" class="function"><a href="swig_helper.html#SolutionCallback.SerializedResponse">SerializedResponse</a></dd>
                <dd id="CpSolverSolutionCallback.SolutionBooleanValue" class="function"><a href="swig_helper.html#SolutionCallback.SolutionBooleanValue">SolutionBooleanValue</a></dd>
                <dd id="CpSolverSolutionCallback.SolutionIntegerValue" class="function"><a href="swig_helper.html#SolutionCallback.SolutionIntegerValue">SolutionIntegerValue</a></dd>
                <dd id="CpSolverSolutionCallback.StopSearch" class="function"><a href="swig_helper.html#SolutionCallback.StopSearch">StopSearch</a></dd>
                <dd id="CpSolverSolutionCallback.UserTime" class="function"><a href="swig_helper.html#SolutionCallback.UserTime">UserTime</a></dd>
                <dd id="CpSolverSolutionCallback.WallTime" class="function"><a href="swig_helper.html#SolutionCallback.WallTime">WallTime</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="ObjectiveSolutionPrinter">
                            <input id="ObjectiveSolutionPrinter-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ObjectiveSolutionPrinter</span><wbr>(<span class="base"><a href="#CpSolverSolutionCallback">CpSolverSolutionCallback</a></span>):

                <label class="view-source-button" for="ObjectiveSolutionPrinter-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ObjectiveSolutionPrinter"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ObjectiveSolutionPrinter-2435"><a href="#ObjectiveSolutionPrinter-2435"><span class="linenos">2435</span></a><span class="k">class</span> <span class="nc">ObjectiveSolutionPrinter</span><span class="p">(</span><span class="n">CpSolverSolutionCallback</span><span class="p">):</span>
</span><span id="ObjectiveSolutionPrinter-2436"><a href="#ObjectiveSolutionPrinter-2436"><span class="linenos">2436</span></a>    <span class="sd">&quot;&quot;&quot;Display the objective value and time of intermediate solutions.&quot;&quot;&quot;</span>
</span><span id="ObjectiveSolutionPrinter-2437"><a href="#ObjectiveSolutionPrinter-2437"><span class="linenos">2437</span></a>
</span><span id="ObjectiveSolutionPrinter-2438"><a href="#ObjectiveSolutionPrinter-2438"><span class="linenos">2438</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ObjectiveSolutionPrinter-2439"><a href="#ObjectiveSolutionPrinter-2439"><span class="linenos">2439</span></a>        <span class="n">CpSolverSolutionCallback</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ObjectiveSolutionPrinter-2440"><a href="#ObjectiveSolutionPrinter-2440"><span class="linenos">2440</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ObjectiveSolutionPrinter-2441"><a href="#ObjectiveSolutionPrinter-2441"><span class="linenos">2441</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="ObjectiveSolutionPrinter-2442"><a href="#ObjectiveSolutionPrinter-2442"><span class="linenos">2442</span></a>
</span><span id="ObjectiveSolutionPrinter-2443"><a href="#ObjectiveSolutionPrinter-2443"><span class="linenos">2443</span></a>    <span class="k">def</span> <span class="nf">on_solution_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ObjectiveSolutionPrinter-2444"><a href="#ObjectiveSolutionPrinter-2444"><span class="linenos">2444</span></a>        <span class="sd">&quot;&quot;&quot;Called on each new solution.&quot;&quot;&quot;</span>
</span><span id="ObjectiveSolutionPrinter-2445"><a href="#ObjectiveSolutionPrinter-2445"><span class="linenos">2445</span></a>        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="ObjectiveSolutionPrinter-2446"><a href="#ObjectiveSolutionPrinter-2446"><span class="linenos">2446</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ObjectiveValue</span><span class="p">()</span>
</span><span id="ObjectiveSolutionPrinter-2447"><a href="#ObjectiveSolutionPrinter-2447"><span class="linenos">2447</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Solution </span><span class="si">%i</span><span class="s1">, time = </span><span class="si">%0.2f</span><span class="s1"> s, objective = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span>
</span><span id="ObjectiveSolutionPrinter-2448"><a href="#ObjectiveSolutionPrinter-2448"><span class="linenos">2448</span></a>              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span><span class="p">,</span> <span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
</span><span id="ObjectiveSolutionPrinter-2449"><a href="#ObjectiveSolutionPrinter-2449"><span class="linenos">2449</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="ObjectiveSolutionPrinter-2450"><a href="#ObjectiveSolutionPrinter-2450"><span class="linenos">2450</span></a>
</span><span id="ObjectiveSolutionPrinter-2451"><a href="#ObjectiveSolutionPrinter-2451"><span class="linenos">2451</span></a>    <span class="k">def</span> <span class="nf">solution_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ObjectiveSolutionPrinter-2452"><a href="#ObjectiveSolutionPrinter-2452"><span class="linenos">2452</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of solutions found.&quot;&quot;&quot;</span>
</span><span id="ObjectiveSolutionPrinter-2453"><a href="#ObjectiveSolutionPrinter-2453"><span class="linenos">2453</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span>
</span></pre></div>


            <div class="docstring"><p>Display the objective value and time of intermediate solutions.</p>
</div>


                            <div id="ObjectiveSolutionPrinter.__init__" class="classattr">
                                        <input id="ObjectiveSolutionPrinter.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ObjectiveSolutionPrinter</span><span class="signature pdoc-code condensed">()</span>

                <label class="view-source-button" for="ObjectiveSolutionPrinter.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ObjectiveSolutionPrinter.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ObjectiveSolutionPrinter.__init__-2438"><a href="#ObjectiveSolutionPrinter.__init__-2438"><span class="linenos">2438</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ObjectiveSolutionPrinter.__init__-2439"><a href="#ObjectiveSolutionPrinter.__init__-2439"><span class="linenos">2439</span></a>        <span class="n">CpSolverSolutionCallback</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ObjectiveSolutionPrinter.__init__-2440"><a href="#ObjectiveSolutionPrinter.__init__-2440"><span class="linenos">2440</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ObjectiveSolutionPrinter.__init__-2441"><a href="#ObjectiveSolutionPrinter.__init__-2441"><span class="linenos">2441</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>__init__(self: <a href="swig_helper.html#SolutionCallback">ortools.sat.python.swig_helper.SolutionCallback</a>) -> None</p>
</div>


                            </div>
                            <div id="ObjectiveSolutionPrinter.on_solution_callback" class="classattr">
                                        <input id="ObjectiveSolutionPrinter.on_solution_callback-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_solution_callback</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ObjectiveSolutionPrinter.on_solution_callback-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ObjectiveSolutionPrinter.on_solution_callback"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ObjectiveSolutionPrinter.on_solution_callback-2443"><a href="#ObjectiveSolutionPrinter.on_solution_callback-2443"><span class="linenos">2443</span></a>    <span class="k">def</span> <span class="nf">on_solution_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ObjectiveSolutionPrinter.on_solution_callback-2444"><a href="#ObjectiveSolutionPrinter.on_solution_callback-2444"><span class="linenos">2444</span></a>        <span class="sd">&quot;&quot;&quot;Called on each new solution.&quot;&quot;&quot;</span>
</span><span id="ObjectiveSolutionPrinter.on_solution_callback-2445"><a href="#ObjectiveSolutionPrinter.on_solution_callback-2445"><span class="linenos">2445</span></a>        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="ObjectiveSolutionPrinter.on_solution_callback-2446"><a href="#ObjectiveSolutionPrinter.on_solution_callback-2446"><span class="linenos">2446</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ObjectiveValue</span><span class="p">()</span>
</span><span id="ObjectiveSolutionPrinter.on_solution_callback-2447"><a href="#ObjectiveSolutionPrinter.on_solution_callback-2447"><span class="linenos">2447</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Solution </span><span class="si">%i</span><span class="s1">, time = </span><span class="si">%0.2f</span><span class="s1"> s, objective = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span>
</span><span id="ObjectiveSolutionPrinter.on_solution_callback-2448"><a href="#ObjectiveSolutionPrinter.on_solution_callback-2448"><span class="linenos">2448</span></a>              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span><span class="p">,</span> <span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
</span><span id="ObjectiveSolutionPrinter.on_solution_callback-2449"><a href="#ObjectiveSolutionPrinter.on_solution_callback-2449"><span class="linenos">2449</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span></pre></div>


            <div class="docstring"><p>Called on each new solution.</p>
</div>


                            </div>
                            <div id="ObjectiveSolutionPrinter.solution_count" class="classattr">
                                        <input id="ObjectiveSolutionPrinter.solution_count-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">solution_count</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ObjectiveSolutionPrinter.solution_count-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ObjectiveSolutionPrinter.solution_count"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ObjectiveSolutionPrinter.solution_count-2451"><a href="#ObjectiveSolutionPrinter.solution_count-2451"><span class="linenos">2451</span></a>    <span class="k">def</span> <span class="nf">solution_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ObjectiveSolutionPrinter.solution_count-2452"><a href="#ObjectiveSolutionPrinter.solution_count-2452"><span class="linenos">2452</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of solutions found.&quot;&quot;&quot;</span>
</span><span id="ObjectiveSolutionPrinter.solution_count-2453"><a href="#ObjectiveSolutionPrinter.solution_count-2453"><span class="linenos">2453</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span>
</span></pre></div>


            <div class="docstring"><p>Returns the number of solutions found.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#CpSolverSolutionCallback">CpSolverSolutionCallback</a></dt>
                                <dd id="ObjectiveSolutionPrinter.OnSolutionCallback" class="function"><a href="#CpSolverSolutionCallback.OnSolutionCallback">OnSolutionCallback</a></dd>
                <dd id="ObjectiveSolutionPrinter.BooleanValue" class="function"><a href="#CpSolverSolutionCallback.BooleanValue">BooleanValue</a></dd>
                <dd id="ObjectiveSolutionPrinter.Value" class="function"><a href="#CpSolverSolutionCallback.Value">Value</a></dd>
                <dd id="ObjectiveSolutionPrinter.Response" class="function"><a href="#CpSolverSolutionCallback.Response">Response</a></dd>

            </div>
            <div><dt><a href="swig_helper.html#SolutionCallback">ortools.sat.python.swig_helper.SolutionCallback</a></dt>
                                <dd id="ObjectiveSolutionPrinter.BestObjectiveBound" class="function"><a href="swig_helper.html#SolutionCallback.BestObjectiveBound">BestObjectiveBound</a></dd>
                <dd id="ObjectiveSolutionPrinter.DeterministicTime" class="function"><a href="swig_helper.html#SolutionCallback.DeterministicTime">DeterministicTime</a></dd>
                <dd id="ObjectiveSolutionPrinter.HasResponse" class="function"><a href="swig_helper.html#SolutionCallback.HasResponse">HasResponse</a></dd>
                <dd id="ObjectiveSolutionPrinter.NumBinaryPropagations" class="function"><a href="swig_helper.html#SolutionCallback.NumBinaryPropagations">NumBinaryPropagations</a></dd>
                <dd id="ObjectiveSolutionPrinter.NumBooleans" class="function"><a href="swig_helper.html#SolutionCallback.NumBooleans">NumBooleans</a></dd>
                <dd id="ObjectiveSolutionPrinter.NumBranches" class="function"><a href="swig_helper.html#SolutionCallback.NumBranches">NumBranches</a></dd>
                <dd id="ObjectiveSolutionPrinter.NumConflicts" class="function"><a href="swig_helper.html#SolutionCallback.NumConflicts">NumConflicts</a></dd>
                <dd id="ObjectiveSolutionPrinter.NumIntegerPropagations" class="function"><a href="swig_helper.html#SolutionCallback.NumIntegerPropagations">NumIntegerPropagations</a></dd>
                <dd id="ObjectiveSolutionPrinter.ObjectiveValue" class="function"><a href="swig_helper.html#SolutionCallback.ObjectiveValue">ObjectiveValue</a></dd>
                <dd id="ObjectiveSolutionPrinter.SerializedResponse" class="function"><a href="swig_helper.html#SolutionCallback.SerializedResponse">SerializedResponse</a></dd>
                <dd id="ObjectiveSolutionPrinter.SolutionBooleanValue" class="function"><a href="swig_helper.html#SolutionCallback.SolutionBooleanValue">SolutionBooleanValue</a></dd>
                <dd id="ObjectiveSolutionPrinter.SolutionIntegerValue" class="function"><a href="swig_helper.html#SolutionCallback.SolutionIntegerValue">SolutionIntegerValue</a></dd>
                <dd id="ObjectiveSolutionPrinter.StopSearch" class="function"><a href="swig_helper.html#SolutionCallback.StopSearch">StopSearch</a></dd>
                <dd id="ObjectiveSolutionPrinter.UserTime" class="function"><a href="swig_helper.html#SolutionCallback.UserTime">UserTime</a></dd>
                <dd id="ObjectiveSolutionPrinter.WallTime" class="function"><a href="swig_helper.html#SolutionCallback.WallTime">WallTime</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="VarArrayAndObjectiveSolutionPrinter">
                            <input id="VarArrayAndObjectiveSolutionPrinter-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">VarArrayAndObjectiveSolutionPrinter</span><wbr>(<span class="base"><a href="#CpSolverSolutionCallback">CpSolverSolutionCallback</a></span>):

                <label class="view-source-button" for="VarArrayAndObjectiveSolutionPrinter-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#VarArrayAndObjectiveSolutionPrinter"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="VarArrayAndObjectiveSolutionPrinter-2456"><a href="#VarArrayAndObjectiveSolutionPrinter-2456"><span class="linenos">2456</span></a><span class="k">class</span> <span class="nc">VarArrayAndObjectiveSolutionPrinter</span><span class="p">(</span><span class="n">CpSolverSolutionCallback</span><span class="p">):</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2457"><a href="#VarArrayAndObjectiveSolutionPrinter-2457"><span class="linenos">2457</span></a>    <span class="sd">&quot;&quot;&quot;Print intermediate solutions (objective, variable values, time).&quot;&quot;&quot;</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2458"><a href="#VarArrayAndObjectiveSolutionPrinter-2458"><span class="linenos">2458</span></a>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2459"><a href="#VarArrayAndObjectiveSolutionPrinter-2459"><span class="linenos">2459</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2460"><a href="#VarArrayAndObjectiveSolutionPrinter-2460"><span class="linenos">2460</span></a>        <span class="n">CpSolverSolutionCallback</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2461"><a href="#VarArrayAndObjectiveSolutionPrinter-2461"><span class="linenos">2461</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__variables</span> <span class="o">=</span> <span class="n">variables</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2462"><a href="#VarArrayAndObjectiveSolutionPrinter-2462"><span class="linenos">2462</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2463"><a href="#VarArrayAndObjectiveSolutionPrinter-2463"><span class="linenos">2463</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2464"><a href="#VarArrayAndObjectiveSolutionPrinter-2464"><span class="linenos">2464</span></a>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2465"><a href="#VarArrayAndObjectiveSolutionPrinter-2465"><span class="linenos">2465</span></a>    <span class="k">def</span> <span class="nf">on_solution_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2466"><a href="#VarArrayAndObjectiveSolutionPrinter-2466"><span class="linenos">2466</span></a>        <span class="sd">&quot;&quot;&quot;Called on each new solution.&quot;&quot;&quot;</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2467"><a href="#VarArrayAndObjectiveSolutionPrinter-2467"><span class="linenos">2467</span></a>        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2468"><a href="#VarArrayAndObjectiveSolutionPrinter-2468"><span class="linenos">2468</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ObjectiveValue</span><span class="p">()</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2469"><a href="#VarArrayAndObjectiveSolutionPrinter-2469"><span class="linenos">2469</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Solution </span><span class="si">%i</span><span class="s1">, time = </span><span class="si">%0.2f</span><span class="s1"> s, objective = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2470"><a href="#VarArrayAndObjectiveSolutionPrinter-2470"><span class="linenos">2470</span></a>              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span><span class="p">,</span> <span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2471"><a href="#VarArrayAndObjectiveSolutionPrinter-2471"><span class="linenos">2471</span></a>        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__variables</span><span class="p">:</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2472"><a href="#VarArrayAndObjectiveSolutionPrinter-2472"><span class="linenos">2472</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%s</span><span class="s1"> = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">v</span><span class="p">)),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2473"><a href="#VarArrayAndObjectiveSolutionPrinter-2473"><span class="linenos">2473</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2474"><a href="#VarArrayAndObjectiveSolutionPrinter-2474"><span class="linenos">2474</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2475"><a href="#VarArrayAndObjectiveSolutionPrinter-2475"><span class="linenos">2475</span></a>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2476"><a href="#VarArrayAndObjectiveSolutionPrinter-2476"><span class="linenos">2476</span></a>    <span class="k">def</span> <span class="nf">solution_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2477"><a href="#VarArrayAndObjectiveSolutionPrinter-2477"><span class="linenos">2477</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of solutions found.&quot;&quot;&quot;</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter-2478"><a href="#VarArrayAndObjectiveSolutionPrinter-2478"><span class="linenos">2478</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span>
</span></pre></div>


            <div class="docstring"><p>Print intermediate solutions (objective, variable values, time).</p>
</div>


                            <div id="VarArrayAndObjectiveSolutionPrinter.__init__" class="classattr">
                                        <input id="VarArrayAndObjectiveSolutionPrinter.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">VarArrayAndObjectiveSolutionPrinter</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">variables</span></span>)</span>

                <label class="view-source-button" for="VarArrayAndObjectiveSolutionPrinter.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#VarArrayAndObjectiveSolutionPrinter.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="VarArrayAndObjectiveSolutionPrinter.__init__-2459"><a href="#VarArrayAndObjectiveSolutionPrinter.__init__-2459"><span class="linenos">2459</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.__init__-2460"><a href="#VarArrayAndObjectiveSolutionPrinter.__init__-2460"><span class="linenos">2460</span></a>        <span class="n">CpSolverSolutionCallback</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.__init__-2461"><a href="#VarArrayAndObjectiveSolutionPrinter.__init__-2461"><span class="linenos">2461</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__variables</span> <span class="o">=</span> <span class="n">variables</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.__init__-2462"><a href="#VarArrayAndObjectiveSolutionPrinter.__init__-2462"><span class="linenos">2462</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.__init__-2463"><a href="#VarArrayAndObjectiveSolutionPrinter.__init__-2463"><span class="linenos">2463</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>__init__(self: <a href="swig_helper.html#SolutionCallback">ortools.sat.python.swig_helper.SolutionCallback</a>) -> None</p>
</div>


                            </div>
                            <div id="VarArrayAndObjectiveSolutionPrinter.on_solution_callback" class="classattr">
                                        <input id="VarArrayAndObjectiveSolutionPrinter.on_solution_callback-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_solution_callback</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="VarArrayAndObjectiveSolutionPrinter.on_solution_callback-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#VarArrayAndObjectiveSolutionPrinter.on_solution_callback"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2465"><a href="#VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2465"><span class="linenos">2465</span></a>    <span class="k">def</span> <span class="nf">on_solution_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2466"><a href="#VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2466"><span class="linenos">2466</span></a>        <span class="sd">&quot;&quot;&quot;Called on each new solution.&quot;&quot;&quot;</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2467"><a href="#VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2467"><span class="linenos">2467</span></a>        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2468"><a href="#VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2468"><span class="linenos">2468</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ObjectiveValue</span><span class="p">()</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2469"><a href="#VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2469"><span class="linenos">2469</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Solution </span><span class="si">%i</span><span class="s1">, time = </span><span class="si">%0.2f</span><span class="s1"> s, objective = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2470"><a href="#VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2470"><span class="linenos">2470</span></a>              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span><span class="p">,</span> <span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span><span class="p">,</span> <span class="n">obj</span><span class="p">))</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2471"><a href="#VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2471"><span class="linenos">2471</span></a>        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__variables</span><span class="p">:</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2472"><a href="#VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2472"><span class="linenos">2472</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%s</span><span class="s1"> = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">v</span><span class="p">)),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2473"><a href="#VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2473"><span class="linenos">2473</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2474"><a href="#VarArrayAndObjectiveSolutionPrinter.on_solution_callback-2474"><span class="linenos">2474</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span></pre></div>


            <div class="docstring"><p>Called on each new solution.</p>
</div>


                            </div>
                            <div id="VarArrayAndObjectiveSolutionPrinter.solution_count" class="classattr">
                                        <input id="VarArrayAndObjectiveSolutionPrinter.solution_count-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">solution_count</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="VarArrayAndObjectiveSolutionPrinter.solution_count-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#VarArrayAndObjectiveSolutionPrinter.solution_count"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="VarArrayAndObjectiveSolutionPrinter.solution_count-2476"><a href="#VarArrayAndObjectiveSolutionPrinter.solution_count-2476"><span class="linenos">2476</span></a>    <span class="k">def</span> <span class="nf">solution_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.solution_count-2477"><a href="#VarArrayAndObjectiveSolutionPrinter.solution_count-2477"><span class="linenos">2477</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of solutions found.&quot;&quot;&quot;</span>
</span><span id="VarArrayAndObjectiveSolutionPrinter.solution_count-2478"><a href="#VarArrayAndObjectiveSolutionPrinter.solution_count-2478"><span class="linenos">2478</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span>
</span></pre></div>


            <div class="docstring"><p>Returns the number of solutions found.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#CpSolverSolutionCallback">CpSolverSolutionCallback</a></dt>
                                <dd id="VarArrayAndObjectiveSolutionPrinter.OnSolutionCallback" class="function"><a href="#CpSolverSolutionCallback.OnSolutionCallback">OnSolutionCallback</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.BooleanValue" class="function"><a href="#CpSolverSolutionCallback.BooleanValue">BooleanValue</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.Value" class="function"><a href="#CpSolverSolutionCallback.Value">Value</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.Response" class="function"><a href="#CpSolverSolutionCallback.Response">Response</a></dd>

            </div>
            <div><dt><a href="swig_helper.html#SolutionCallback">ortools.sat.python.swig_helper.SolutionCallback</a></dt>
                                <dd id="VarArrayAndObjectiveSolutionPrinter.BestObjectiveBound" class="function"><a href="swig_helper.html#SolutionCallback.BestObjectiveBound">BestObjectiveBound</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.DeterministicTime" class="function"><a href="swig_helper.html#SolutionCallback.DeterministicTime">DeterministicTime</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.HasResponse" class="function"><a href="swig_helper.html#SolutionCallback.HasResponse">HasResponse</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.NumBinaryPropagations" class="function"><a href="swig_helper.html#SolutionCallback.NumBinaryPropagations">NumBinaryPropagations</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.NumBooleans" class="function"><a href="swig_helper.html#SolutionCallback.NumBooleans">NumBooleans</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.NumBranches" class="function"><a href="swig_helper.html#SolutionCallback.NumBranches">NumBranches</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.NumConflicts" class="function"><a href="swig_helper.html#SolutionCallback.NumConflicts">NumConflicts</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.NumIntegerPropagations" class="function"><a href="swig_helper.html#SolutionCallback.NumIntegerPropagations">NumIntegerPropagations</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.ObjectiveValue" class="function"><a href="swig_helper.html#SolutionCallback.ObjectiveValue">ObjectiveValue</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.SerializedResponse" class="function"><a href="swig_helper.html#SolutionCallback.SerializedResponse">SerializedResponse</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.SolutionBooleanValue" class="function"><a href="swig_helper.html#SolutionCallback.SolutionBooleanValue">SolutionBooleanValue</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.SolutionIntegerValue" class="function"><a href="swig_helper.html#SolutionCallback.SolutionIntegerValue">SolutionIntegerValue</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.StopSearch" class="function"><a href="swig_helper.html#SolutionCallback.StopSearch">StopSearch</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.UserTime" class="function"><a href="swig_helper.html#SolutionCallback.UserTime">UserTime</a></dd>
                <dd id="VarArrayAndObjectiveSolutionPrinter.WallTime" class="function"><a href="swig_helper.html#SolutionCallback.WallTime">WallTime</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="VarArraySolutionPrinter">
                            <input id="VarArraySolutionPrinter-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">VarArraySolutionPrinter</span><wbr>(<span class="base"><a href="#CpSolverSolutionCallback">CpSolverSolutionCallback</a></span>):

                <label class="view-source-button" for="VarArraySolutionPrinter-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#VarArraySolutionPrinter"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="VarArraySolutionPrinter-2481"><a href="#VarArraySolutionPrinter-2481"><span class="linenos">2481</span></a><span class="k">class</span> <span class="nc">VarArraySolutionPrinter</span><span class="p">(</span><span class="n">CpSolverSolutionCallback</span><span class="p">):</span>
</span><span id="VarArraySolutionPrinter-2482"><a href="#VarArraySolutionPrinter-2482"><span class="linenos">2482</span></a>    <span class="sd">&quot;&quot;&quot;Print intermediate solutions (variable values, time).&quot;&quot;&quot;</span>
</span><span id="VarArraySolutionPrinter-2483"><a href="#VarArraySolutionPrinter-2483"><span class="linenos">2483</span></a>
</span><span id="VarArraySolutionPrinter-2484"><a href="#VarArraySolutionPrinter-2484"><span class="linenos">2484</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
</span><span id="VarArraySolutionPrinter-2485"><a href="#VarArraySolutionPrinter-2485"><span class="linenos">2485</span></a>        <span class="n">CpSolverSolutionCallback</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="VarArraySolutionPrinter-2486"><a href="#VarArraySolutionPrinter-2486"><span class="linenos">2486</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__variables</span> <span class="o">=</span> <span class="n">variables</span>
</span><span id="VarArraySolutionPrinter-2487"><a href="#VarArraySolutionPrinter-2487"><span class="linenos">2487</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="VarArraySolutionPrinter-2488"><a href="#VarArraySolutionPrinter-2488"><span class="linenos">2488</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="VarArraySolutionPrinter-2489"><a href="#VarArraySolutionPrinter-2489"><span class="linenos">2489</span></a>
</span><span id="VarArraySolutionPrinter-2490"><a href="#VarArraySolutionPrinter-2490"><span class="linenos">2490</span></a>    <span class="k">def</span> <span class="nf">on_solution_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="VarArraySolutionPrinter-2491"><a href="#VarArraySolutionPrinter-2491"><span class="linenos">2491</span></a>        <span class="sd">&quot;&quot;&quot;Called on each new solution.&quot;&quot;&quot;</span>
</span><span id="VarArraySolutionPrinter-2492"><a href="#VarArraySolutionPrinter-2492"><span class="linenos">2492</span></a>        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="VarArraySolutionPrinter-2493"><a href="#VarArraySolutionPrinter-2493"><span class="linenos">2493</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Solution </span><span class="si">%i</span><span class="s1">, time = </span><span class="si">%0.2f</span><span class="s1"> s&#39;</span> <span class="o">%</span>
</span><span id="VarArraySolutionPrinter-2494"><a href="#VarArraySolutionPrinter-2494"><span class="linenos">2494</span></a>              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span><span class="p">,</span> <span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span><span class="p">))</span>
</span><span id="VarArraySolutionPrinter-2495"><a href="#VarArraySolutionPrinter-2495"><span class="linenos">2495</span></a>        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__variables</span><span class="p">:</span>
</span><span id="VarArraySolutionPrinter-2496"><a href="#VarArraySolutionPrinter-2496"><span class="linenos">2496</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%s</span><span class="s1"> = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">v</span><span class="p">)),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span id="VarArraySolutionPrinter-2497"><a href="#VarArraySolutionPrinter-2497"><span class="linenos">2497</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="VarArraySolutionPrinter-2498"><a href="#VarArraySolutionPrinter-2498"><span class="linenos">2498</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="VarArraySolutionPrinter-2499"><a href="#VarArraySolutionPrinter-2499"><span class="linenos">2499</span></a>
</span><span id="VarArraySolutionPrinter-2500"><a href="#VarArraySolutionPrinter-2500"><span class="linenos">2500</span></a>    <span class="k">def</span> <span class="nf">solution_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="VarArraySolutionPrinter-2501"><a href="#VarArraySolutionPrinter-2501"><span class="linenos">2501</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of solutions found.&quot;&quot;&quot;</span>
</span><span id="VarArraySolutionPrinter-2502"><a href="#VarArraySolutionPrinter-2502"><span class="linenos">2502</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span>
</span></pre></div>


            <div class="docstring"><p>Print intermediate solutions (variable values, time).</p>
</div>


                            <div id="VarArraySolutionPrinter.__init__" class="classattr">
                                        <input id="VarArraySolutionPrinter.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">VarArraySolutionPrinter</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">variables</span></span>)</span>

                <label class="view-source-button" for="VarArraySolutionPrinter.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#VarArraySolutionPrinter.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="VarArraySolutionPrinter.__init__-2484"><a href="#VarArraySolutionPrinter.__init__-2484"><span class="linenos">2484</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variables</span><span class="p">):</span>
</span><span id="VarArraySolutionPrinter.__init__-2485"><a href="#VarArraySolutionPrinter.__init__-2485"><span class="linenos">2485</span></a>        <span class="n">CpSolverSolutionCallback</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="VarArraySolutionPrinter.__init__-2486"><a href="#VarArraySolutionPrinter.__init__-2486"><span class="linenos">2486</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__variables</span> <span class="o">=</span> <span class="n">variables</span>
</span><span id="VarArraySolutionPrinter.__init__-2487"><a href="#VarArraySolutionPrinter.__init__-2487"><span class="linenos">2487</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="VarArraySolutionPrinter.__init__-2488"><a href="#VarArraySolutionPrinter.__init__-2488"><span class="linenos">2488</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>__init__(self: <a href="swig_helper.html#SolutionCallback">ortools.sat.python.swig_helper.SolutionCallback</a>) -> None</p>
</div>


                            </div>
                            <div id="VarArraySolutionPrinter.on_solution_callback" class="classattr">
                                        <input id="VarArraySolutionPrinter.on_solution_callback-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">on_solution_callback</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="VarArraySolutionPrinter.on_solution_callback-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#VarArraySolutionPrinter.on_solution_callback"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="VarArraySolutionPrinter.on_solution_callback-2490"><a href="#VarArraySolutionPrinter.on_solution_callback-2490"><span class="linenos">2490</span></a>    <span class="k">def</span> <span class="nf">on_solution_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="VarArraySolutionPrinter.on_solution_callback-2491"><a href="#VarArraySolutionPrinter.on_solution_callback-2491"><span class="linenos">2491</span></a>        <span class="sd">&quot;&quot;&quot;Called on each new solution.&quot;&quot;&quot;</span>
</span><span id="VarArraySolutionPrinter.on_solution_callback-2492"><a href="#VarArraySolutionPrinter.on_solution_callback-2492"><span class="linenos">2492</span></a>        <span class="n">current_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="VarArraySolutionPrinter.on_solution_callback-2493"><a href="#VarArraySolutionPrinter.on_solution_callback-2493"><span class="linenos">2493</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Solution </span><span class="si">%i</span><span class="s1">, time = </span><span class="si">%0.2f</span><span class="s1"> s&#39;</span> <span class="o">%</span>
</span><span id="VarArraySolutionPrinter.on_solution_callback-2494"><a href="#VarArraySolutionPrinter.on_solution_callback-2494"><span class="linenos">2494</span></a>              <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span><span class="p">,</span> <span class="n">current_time</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">__start_time</span><span class="p">))</span>
</span><span id="VarArraySolutionPrinter.on_solution_callback-2495"><a href="#VarArraySolutionPrinter.on_solution_callback-2495"><span class="linenos">2495</span></a>        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__variables</span><span class="p">:</span>
</span><span id="VarArraySolutionPrinter.on_solution_callback-2496"><a href="#VarArraySolutionPrinter.on_solution_callback-2496"><span class="linenos">2496</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  </span><span class="si">%s</span><span class="s1"> = </span><span class="si">%i</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">v</span><span class="p">)),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span id="VarArraySolutionPrinter.on_solution_callback-2497"><a href="#VarArraySolutionPrinter.on_solution_callback-2497"><span class="linenos">2497</span></a>        <span class="nb">print</span><span class="p">()</span>
</span><span id="VarArraySolutionPrinter.on_solution_callback-2498"><a href="#VarArraySolutionPrinter.on_solution_callback-2498"><span class="linenos">2498</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span></pre></div>


            <div class="docstring"><p>Called on each new solution.</p>
</div>


                            </div>
                            <div id="VarArraySolutionPrinter.solution_count" class="classattr">
                                        <input id="VarArraySolutionPrinter.solution_count-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">solution_count</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="VarArraySolutionPrinter.solution_count-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#VarArraySolutionPrinter.solution_count"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="VarArraySolutionPrinter.solution_count-2500"><a href="#VarArraySolutionPrinter.solution_count-2500"><span class="linenos">2500</span></a>    <span class="k">def</span> <span class="nf">solution_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="VarArraySolutionPrinter.solution_count-2501"><a href="#VarArraySolutionPrinter.solution_count-2501"><span class="linenos">2501</span></a>        <span class="sd">&quot;&quot;&quot;Returns the number of solutions found.&quot;&quot;&quot;</span>
</span><span id="VarArraySolutionPrinter.solution_count-2502"><a href="#VarArraySolutionPrinter.solution_count-2502"><span class="linenos">2502</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__solution_count</span>
</span></pre></div>


            <div class="docstring"><p>Returns the number of solutions found.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#CpSolverSolutionCallback">CpSolverSolutionCallback</a></dt>
                                <dd id="VarArraySolutionPrinter.OnSolutionCallback" class="function"><a href="#CpSolverSolutionCallback.OnSolutionCallback">OnSolutionCallback</a></dd>
                <dd id="VarArraySolutionPrinter.BooleanValue" class="function"><a href="#CpSolverSolutionCallback.BooleanValue">BooleanValue</a></dd>
                <dd id="VarArraySolutionPrinter.Value" class="function"><a href="#CpSolverSolutionCallback.Value">Value</a></dd>
                <dd id="VarArraySolutionPrinter.Response" class="function"><a href="#CpSolverSolutionCallback.Response">Response</a></dd>

            </div>
            <div><dt><a href="swig_helper.html#SolutionCallback">ortools.sat.python.swig_helper.SolutionCallback</a></dt>
                                <dd id="VarArraySolutionPrinter.BestObjectiveBound" class="function"><a href="swig_helper.html#SolutionCallback.BestObjectiveBound">BestObjectiveBound</a></dd>
                <dd id="VarArraySolutionPrinter.DeterministicTime" class="function"><a href="swig_helper.html#SolutionCallback.DeterministicTime">DeterministicTime</a></dd>
                <dd id="VarArraySolutionPrinter.HasResponse" class="function"><a href="swig_helper.html#SolutionCallback.HasResponse">HasResponse</a></dd>
                <dd id="VarArraySolutionPrinter.NumBinaryPropagations" class="function"><a href="swig_helper.html#SolutionCallback.NumBinaryPropagations">NumBinaryPropagations</a></dd>
                <dd id="VarArraySolutionPrinter.NumBooleans" class="function"><a href="swig_helper.html#SolutionCallback.NumBooleans">NumBooleans</a></dd>
                <dd id="VarArraySolutionPrinter.NumBranches" class="function"><a href="swig_helper.html#SolutionCallback.NumBranches">NumBranches</a></dd>
                <dd id="VarArraySolutionPrinter.NumConflicts" class="function"><a href="swig_helper.html#SolutionCallback.NumConflicts">NumConflicts</a></dd>
                <dd id="VarArraySolutionPrinter.NumIntegerPropagations" class="function"><a href="swig_helper.html#SolutionCallback.NumIntegerPropagations">NumIntegerPropagations</a></dd>
                <dd id="VarArraySolutionPrinter.ObjectiveValue" class="function"><a href="swig_helper.html#SolutionCallback.ObjectiveValue">ObjectiveValue</a></dd>
                <dd id="VarArraySolutionPrinter.SerializedResponse" class="function"><a href="swig_helper.html#SolutionCallback.SerializedResponse">SerializedResponse</a></dd>
                <dd id="VarArraySolutionPrinter.SolutionBooleanValue" class="function"><a href="swig_helper.html#SolutionCallback.SolutionBooleanValue">SolutionBooleanValue</a></dd>
                <dd id="VarArraySolutionPrinter.SolutionIntegerValue" class="function"><a href="swig_helper.html#SolutionCallback.SolutionIntegerValue">SolutionIntegerValue</a></dd>
                <dd id="VarArraySolutionPrinter.StopSearch" class="function"><a href="swig_helper.html#SolutionCallback.StopSearch">StopSearch</a></dd>
                <dd id="VarArraySolutionPrinter.UserTime" class="function"><a href="swig_helper.html#SolutionCallback.UserTime">UserTime</a></dd>
                <dd id="VarArraySolutionPrinter.WallTime" class="function"><a href="swig_helper.html#SolutionCallback.WallTime">WallTime</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
</body>
</html>