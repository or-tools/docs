<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.4.0"/>
    <title>ortools.math_opt.python.model API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../python.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;ortools.math_opt.python</a>

            <img src="https://developers.google.com/optimization/images/orLogo.png" class="logo" alt="project logo"/>


            <h2>Contents</h2>
            <ul>
  <li><a href="#we-can-directly-use-linear-combinations-of-variables">We can directly use linear combinations of variables ...</a></li>
  <li><a href="#or-build-them-incrementally">... or build them incrementally.</a></li>
  <li><a href="#may-raise-a-runtimeerror-on-invalid-input-or-internal-solver-errors">May raise a RuntimeError on invalid input or internal solver errors.</a></li>
</ul>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="variable" href="#Storage">Storage</a>
            </li>
            <li>
                    <a class="variable" href="#StorageClass">StorageClass</a>
            </li>
            <li>
                    <a class="variable" href="#LinearTypes">LinearTypes</a>
            </li>
            <li>
                    <a class="variable" href="#QuadraticTypes">QuadraticTypes</a>
            </li>
            <li>
                    <a class="variable" href="#LinearTypesExceptVariable">LinearTypesExceptVariable</a>
            </li>
            <li>
                    <a class="class" href="#UpperBoundedLinearExpression">UpperBoundedLinearExpression</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#UpperBoundedLinearExpression.__init__">UpperBoundedLinearExpression</a>
                        </li>
                        <li>
                                <a class="variable" href="#UpperBoundedLinearExpression.expression">expression</a>
                        </li>
                        <li>
                                <a class="variable" href="#UpperBoundedLinearExpression.upper_bound">upper_bound</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LowerBoundedLinearExpression">LowerBoundedLinearExpression</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LowerBoundedLinearExpression.__init__">LowerBoundedLinearExpression</a>
                        </li>
                        <li>
                                <a class="variable" href="#LowerBoundedLinearExpression.expression">expression</a>
                        </li>
                        <li>
                                <a class="variable" href="#LowerBoundedLinearExpression.lower_bound">lower_bound</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#BoundedLinearExpression">BoundedLinearExpression</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#BoundedLinearExpression.__init__">BoundedLinearExpression</a>
                        </li>
                        <li>
                                <a class="variable" href="#BoundedLinearExpression.expression">expression</a>
                        </li>
                        <li>
                                <a class="variable" href="#BoundedLinearExpression.lower_bound">lower_bound</a>
                        </li>
                        <li>
                                <a class="variable" href="#BoundedLinearExpression.upper_bound">upper_bound</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#VarEqVar">VarEqVar</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#VarEqVar.__init__">VarEqVar</a>
                        </li>
                        <li>
                                <a class="variable" href="#VarEqVar.first_variable">first_variable</a>
                        </li>
                        <li>
                                <a class="variable" href="#VarEqVar.second_variable">second_variable</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="variable" href="#BoundedLinearTypesList">BoundedLinearTypesList</a>
            </li>
            <li>
                    <a class="variable" href="#BoundedLinearTypes">BoundedLinearTypes</a>
            </li>
            <li>
                    <a class="class" href="#QuadraticTermKey">QuadraticTermKey</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#QuadraticTermKey.__init__">QuadraticTermKey</a>
                        </li>
                        <li>
                                <a class="variable" href="#QuadraticTermKey.first_var">first_var</a>
                        </li>
                        <li>
                                <a class="variable" href="#QuadraticTermKey.second_var">second_var</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LinearBase">LinearBase</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#QuadraticBase">QuadraticBase</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#Variable">Variable</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Variable.__init__">Variable</a>
                        </li>
                        <li>
                                <a class="variable" href="#Variable.lower_bound">lower_bound</a>
                        </li>
                        <li>
                                <a class="variable" href="#Variable.upper_bound">upper_bound</a>
                        </li>
                        <li>
                                <a class="variable" href="#Variable.integer">integer</a>
                        </li>
                        <li>
                                <a class="variable" href="#Variable.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Variable.id">id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Variable.model">model</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LinearTerm">LinearTerm</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LinearTerm.__init__">LinearTerm</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearTerm.variable">variable</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearTerm.coefficient">coefficient</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#QuadraticTerm">QuadraticTerm</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#QuadraticTerm.__init__">QuadraticTerm</a>
                        </li>
                        <li>
                                <a class="variable" href="#QuadraticTerm.key">key</a>
                        </li>
                        <li>
                                <a class="variable" href="#QuadraticTerm.coefficient">coefficient</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LinearExpression">LinearExpression</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LinearExpression.__init__">LinearExpression</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearExpression.terms">terms</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearExpression.offset">offset</a>
                        </li>
                        <li>
                                <a class="function" href="#LinearExpression.evaluate">evaluate</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#QuadraticExpression">QuadraticExpression</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#QuadraticExpression.__init__">QuadraticExpression</a>
                        </li>
                        <li>
                                <a class="variable" href="#QuadraticExpression.linear_terms">linear_terms</a>
                        </li>
                        <li>
                                <a class="variable" href="#QuadraticExpression.quadratic_terms">quadratic_terms</a>
                        </li>
                        <li>
                                <a class="variable" href="#QuadraticExpression.offset">offset</a>
                        </li>
                        <li>
                                <a class="function" href="#QuadraticExpression.evaluate">evaluate</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LinearConstraint">LinearConstraint</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LinearConstraint.__init__">LinearConstraint</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearConstraint.lower_bound">lower_bound</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearConstraint.upper_bound">upper_bound</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearConstraint.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearConstraint.id">id</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearConstraint.model">model</a>
                        </li>
                        <li>
                                <a class="function" href="#LinearConstraint.set_coefficient">set_coefficient</a>
                        </li>
                        <li>
                                <a class="function" href="#LinearConstraint.get_coefficient">get_coefficient</a>
                        </li>
                        <li>
                                <a class="function" href="#LinearConstraint.terms">terms</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Objective">Objective</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Objective.__init__">Objective</a>
                        </li>
                        <li>
                                <a class="variable" href="#Objective.is_maximize">is_maximize</a>
                        </li>
                        <li>
                                <a class="variable" href="#Objective.offset">offset</a>
                        </li>
                        <li>
                                <a class="variable" href="#Objective.model">model</a>
                        </li>
                        <li>
                                <a class="function" href="#Objective.set_linear_coefficient">set_linear_coefficient</a>
                        </li>
                        <li>
                                <a class="function" href="#Objective.get_linear_coefficient">get_linear_coefficient</a>
                        </li>
                        <li>
                                <a class="function" href="#Objective.linear_terms">linear_terms</a>
                        </li>
                        <li>
                                <a class="function" href="#Objective.add">add</a>
                        </li>
                        <li>
                                <a class="function" href="#Objective.add_linear">add_linear</a>
                        </li>
                        <li>
                                <a class="function" href="#Objective.add_quadratic">add_quadratic</a>
                        </li>
                        <li>
                                <a class="function" href="#Objective.set_quadratic_coefficient">set_quadratic_coefficient</a>
                        </li>
                        <li>
                                <a class="function" href="#Objective.get_quadratic_coefficient">get_quadratic_coefficient</a>
                        </li>
                        <li>
                                <a class="function" href="#Objective.quadratic_terms">quadratic_terms</a>
                        </li>
                        <li>
                                <a class="function" href="#Objective.as_linear_expression">as_linear_expression</a>
                        </li>
                        <li>
                                <a class="function" href="#Objective.as_quadratic_expression">as_quadratic_expression</a>
                        </li>
                        <li>
                                <a class="function" href="#Objective.clear">clear</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LinearConstraintMatrixEntry">LinearConstraintMatrixEntry</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LinearConstraintMatrixEntry.__init__">LinearConstraintMatrixEntry</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearConstraintMatrixEntry.linear_constraint">linear_constraint</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearConstraintMatrixEntry.variable">variable</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearConstraintMatrixEntry.coefficient">coefficient</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#UpdateTracker">UpdateTracker</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#UpdateTracker.__init__">UpdateTracker</a>
                        </li>
                        <li>
                                <a class="variable" href="#UpdateTracker.storage_update_tracker">storage_update_tracker</a>
                        </li>
                        <li>
                                <a class="function" href="#UpdateTracker.export_update">export_update</a>
                        </li>
                        <li>
                                <a class="function" href="#UpdateTracker.advance_checkpoint">advance_checkpoint</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Model">Model</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Model.__init__">Model</a>
                        </li>
                        <li>
                                <a class="variable" href="#Model.storage">storage</a>
                        </li>
                        <li>
                                <a class="variable" href="#Model.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Model.objective">objective</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.add_variable">add_variable</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.add_integer_variable">add_integer_variable</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.add_binary_variable">add_binary_variable</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.get_variable">get_variable</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.delete_variable">delete_variable</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.variables">variables</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.maximize">maximize</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.maximize_linear_objective">maximize_linear_objective</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.maximize_quadratic_objective">maximize_quadratic_objective</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.minimize">minimize</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.minimize_linear_objective">minimize_linear_objective</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.minimize_quadratic_objective">minimize_quadratic_objective</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.set_objective">set_objective</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.set_linear_objective">set_linear_objective</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.set_quadratic_objective">set_quadratic_objective</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.add_linear_constraint">add_linear_constraint</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.get_linear_constraint">get_linear_constraint</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.delete_linear_constraint">delete_linear_constraint</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.linear_constraints">linear_constraints</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.row_nonzeros">row_nonzeros</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.column_nonzeros">column_nonzeros</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.linear_objective_terms">linear_objective_terms</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.quadratic_objective_terms">quadratic_objective_terms</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.linear_constraint_matrix_entries">linear_constraint_matrix_entries</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.export_model">export_model</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.add_update_tracker">add_update_tracker</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.remove_update_tracker">remove_update_tracker</a>
                        </li>
                        <li>
                                <a class="function" href="#Model.check_compatible">check_compatible</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LinearSum">LinearSum</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LinearSum.__init__">LinearSum</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearSum.elements">elements</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#QuadraticSum">QuadraticSum</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#QuadraticSum.__init__">QuadraticSum</a>
                        </li>
                        <li>
                                <a class="variable" href="#QuadraticSum.elements">elements</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LinearProduct">LinearProduct</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LinearProduct.__init__">LinearProduct</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearProduct.scalar">scalar</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearProduct.linear">linear</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#QuadraticProduct">QuadraticProduct</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#QuadraticProduct.__init__">QuadraticProduct</a>
                        </li>
                        <li>
                                <a class="variable" href="#QuadraticProduct.scalar">scalar</a>
                        </li>
                        <li>
                                <a class="variable" href="#QuadraticProduct.quadratic">quadratic</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LinearLinearProduct">LinearLinearProduct</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LinearLinearProduct.__init__">LinearLinearProduct</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearLinearProduct.first_linear">first_linear</a>
                        </li>
                        <li>
                                <a class="variable" href="#LinearLinearProduct.second_linear">second_linear</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#as_flat_linear_expression">as_flat_linear_expression</a>
            </li>
            <li>
                    <a class="function" href="#as_flat_quadratic_expression">as_flat_quadratic_expression</a>
            </li>
            <li>
                    <a class="class" href="#NormalizedLinearInequality">NormalizedLinearInequality</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#NormalizedLinearInequality.__init__">NormalizedLinearInequality</a>
                        </li>
                        <li>
                                <a class="variable" href="#NormalizedLinearInequality.lb">lb</a>
                        </li>
                        <li>
                                <a class="variable" href="#NormalizedLinearInequality.ub">ub</a>
                        </li>
                        <li>
                                <a class="variable" href="#NormalizedLinearInequality.coefficients">coefficients</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#as_normalized_linear_inequality">as_normalized_linear_inequality</a>
            </li>
    </ul>


            <footer>OR-Tools v9.9</footer>

        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../../ortools.html">ortools</a><wbr>.<a href="./../../math_opt.html">math_opt</a><wbr>.<a href="./../python.html">python</a><wbr>.model    </h1>

                        <div class="docstring"><p>A solver independent library for modeling optimization problems.</p>

<h6 id="example-use-to-model-the-optimization-problem">Example use to model the optimization problem:</h6>

<blockquote>
  <p>max 2.0 * x + y
   s.t. x + y &lt;= 1.5
            x in {0.0, 1.0}
            y in [0.0, 2.5]</p>
  
  <p>model = mathopt.Model(name='my_model')
  x = model.add_binary_variable(name='x')
  y = model.add_variable(lb=0.0, ub=2.5, name='y')</p>
  
  <h1 id="we-can-directly-use-linear-combinations-of-variables">We can directly use linear combinations of variables ...</h1>
  
  <p>model.add_linear_constraint(x + y &lt;= 1.5, name='c')</p>
  
  <h1 id="or-build-them-incrementally">... or build them incrementally.</h1>
  
  <p>objective_expression = 0
  objective_expression += 2 * x
  objective_expression += y
  model.maximize(objective_expression)</p>
  
  <h1 id="may-raise-a-runtimeerror-on-invalid-input-or-internal-solver-errors">May raise a RuntimeError on invalid input or internal solver errors.</h1>
  
  <p>result = mathopt.solve(model, mathopt.SolverType.GSCIP)</p>
  
  <p>if result.termination.reason not in (mathopt.TerminationReason.OPTIMAL,
                                       mathopt.TerminationReason.FEASIBLE):
    raise RuntimeError(f'model failed to solve: {result.termination}')</p>
  
  <p>print(f'Objective value: {result.objective_value()}')
  print(f'Value for variable x: {result.variable_values()[x]}')</p>
</blockquote>
</div>

                        <input id="mod-model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-model-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="c1"># Copyright 2010-2024 Google LLC</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="c1"># you may not use this file except in compliance with the License.</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="c1"># You may obtain a copy of the License at</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="c1">#</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="c1">#     http://www.apache.org/licenses/LICENSE-2.0</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="c1">#</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="c1"># See the License for the specific language governing permissions and</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="c1"># limitations under the License.</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="sd">&quot;&quot;&quot;A solver independent library for modeling optimization problems.</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="sd">Example use to model the optimization problem:</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a><span class="sd">   max 2.0 * x + y</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a><span class="sd">   s.t. x + y &lt;= 1.5</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="sd">            x in {0.0, 1.0}</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a><span class="sd">            y in [0.0, 2.5]</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a><span class="sd">  model = mathopt.Model(name=&#39;my_model&#39;)</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="sd">  x = model.add_binary_variable(name=&#39;x&#39;)</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a><span class="sd">  y = model.add_variable(lb=0.0, ub=2.5, name=&#39;y&#39;)</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a><span class="sd">  # We can directly use linear combinations of variables ...</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a><span class="sd">  model.add_linear_constraint(x + y &lt;= 1.5, name=&#39;c&#39;)</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a><span class="sd">  # ... or build them incrementally.</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a><span class="sd">  objective_expression = 0</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a><span class="sd">  objective_expression += 2 * x</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a><span class="sd">  objective_expression += y</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a><span class="sd">  model.maximize(objective_expression)</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a><span class="sd">  # May raise a RuntimeError on invalid input or internal solver errors.</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a><span class="sd">  result = mathopt.solve(model, mathopt.SolverType.GSCIP)</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a><span class="sd">  if result.termination.reason not in (mathopt.TerminationReason.OPTIMAL,</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a><span class="sd">                                       mathopt.TerminationReason.FEASIBLE):</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a><span class="sd">    raise RuntimeError(f&#39;model failed to solve: {result.termination}&#39;)</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a><span class="sd">  print(f&#39;Objective value: {result.objective_value()}&#39;)</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a><span class="sd">  print(f&#39;Value for variable x: {result.variable_values()[x]}&#39;)</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a><span class="kn">import</span> <span class="nn">abc</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a><span class="kn">import</span> <span class="nn">collections</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a><span class="kn">import</span> <span class="nn">dataclasses</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a><span class="kn">import</span> <span class="nn">math</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a><span class="kn">import</span> <span class="nn">typing</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a>    <span class="n">Any</span><span class="p">,</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a>    <span class="n">DefaultDict</span><span class="p">,</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a>    <span class="n">Deque</span><span class="p">,</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a>    <span class="n">Generic</span><span class="p">,</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a>    <span class="n">Iterable</span><span class="p">,</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a>    <span class="n">Iterator</span><span class="p">,</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a>    <span class="n">Mapping</span><span class="p">,</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a>    <span class="n">NamedTuple</span><span class="p">,</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a>    <span class="n">NoReturn</span><span class="p">,</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a>    <span class="n">Optional</span><span class="p">,</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a>    <span class="n">Protocol</span><span class="p">,</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a>    <span class="n">Tuple</span><span class="p">,</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a>    <span class="n">Type</span><span class="p">,</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a>    <span class="n">TypeVar</span><span class="p">,</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a>    <span class="n">Union</span><span class="p">,</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a><span class="p">)</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a><span class="kn">import</span> <span class="nn">weakref</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a><span class="kn">import</span> <span class="nn">immutabledict</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a><span class="kn">from</span> <span class="nn">ortools.math_opt</span> <span class="kn">import</span> <span class="n">model_pb2</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a><span class="kn">from</span> <span class="nn">ortools.math_opt</span> <span class="kn">import</span> <span class="n">model_update_pb2</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a><span class="kn">from</span> <span class="nn">ortools.math_opt.python</span> <span class="kn">import</span> <span class="n">hash_model_storage</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a><span class="kn">from</span> <span class="nn">ortools.math_opt.python</span> <span class="kn">import</span> <span class="n">model_storage</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a><span class="n">Storage</span> <span class="o">=</span> <span class="n">model_storage</span><span class="o">.</span><span class="n">ModelStorage</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a><span class="n">StorageClass</span> <span class="o">=</span> <span class="n">model_storage</span><span class="o">.</span><span class="n">ModelStorageImplClass</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a><span class="n">LinearTypes</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">]</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a><span class="n">QuadraticTypes</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">,</span> <span class="s2">&quot;QuadraticBase&quot;</span><span class="p">]</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a><span class="n">LinearTypesExceptVariable</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a>    <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">,</span> <span class="s2">&quot;LinearExpression&quot;</span><span class="p">,</span> <span class="s2">&quot;LinearSum&quot;</span><span class="p">,</span> <span class="s2">&quot;LinearProduct&quot;</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a><span class="p">]</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a><span class="n">_CHAINED_COMPARISON_MESSAGE</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a>    <span class="s2">&quot;If you were trying to create a two-sided or &quot;</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a>    <span class="s2">&quot;ranged linear inequality of the form `lb &lt;= &quot;</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a>    <span class="s2">&quot;expr &lt;= ub`, try `(lb &lt;= expr) &lt;= ub` instead&quot;</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a><span class="p">)</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a><span class="n">_EXPRESSION_COMP_EXPRESSION_MESSAGE</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a>    <span class="s2">&quot;This error can occur when adding &quot;</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a>    <span class="s2">&quot;inequalities of the form `(a &lt;= b) &lt;= &quot;</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a>    <span class="s2">&quot;c` where (a, b, c) includes two or more&quot;</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a>    <span class="s2">&quot; non-constant linear expressions&quot;</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a><span class="p">)</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a><span class="k">def</span> <span class="nf">_raise_binary_operator_type_error</span><span class="p">(</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>    <span class="n">operator</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>    <span class="n">lhs</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a>    <span class="n">rhs</span><span class="p">:</span> <span class="n">Type</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>    <span class="n">extra_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Raises TypeError on unsupported operators.&quot;&quot;&quot;</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a>    <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a>        <span class="sa">f</span><span class="s2">&quot;unsupported operand type(s) for </span><span class="si">{</span><span class="n">operator</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">lhs</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2"> and&quot;</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a>        <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">rhs</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>    <span class="p">)</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a>    <span class="k">if</span> <span class="n">extra_message</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a>        <span class="n">message</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">extra_message</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a>    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a><span class="k">def</span> <span class="nf">_raise_ne_not_supported</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a>    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;!= constraints are not supported&quot;</span><span class="p">)</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a><span class="k">class</span> <span class="nc">UpperBoundedLinearExpression</span><span class="p">:</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An inequality of the form expression &lt;= upper_bound.</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a><span class="sd">    Where:</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a><span class="sd">     * expression is a linear expression, and</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a><span class="sd">     * upper_bound is a float</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_expression&quot;</span><span class="p">,</span> <span class="s2">&quot;_upper_bound&quot;</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Operator overloading can be used instead: e.g. `x + y &lt;= 2.0`.&quot;&quot;&quot;</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span> <span class="o">=</span> <span class="n">expression</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">upper_bound</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>    <span class="nd">@property</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a>    <span class="k">def</span> <span class="nf">expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">:</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a>    <span class="nd">@property</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a>    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BoundedLinearExpression&quot;</span><span class="p">:</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expression</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">upper_bound</span><span class="p">)</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a>        <span class="n">_raise_binary_operator_type_error</span><span class="p">(</span><span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">lhs</span><span class="p">))</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a>            <span class="s2">&quot;__bool__ is unsupported for UpperBoundedLinearExpression&quot;</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a>            <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a>            <span class="o">+</span> <span class="n">_CHAINED_COMPARISON_MESSAGE</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a>        <span class="p">)</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="si">!s}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="si">!r}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a><span class="k">class</span> <span class="nc">LowerBoundedLinearExpression</span><span class="p">:</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An inequality of the form expression &gt;= lower_bound.</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a><span class="sd">    Where:</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a><span class="sd">     * expression is a linear expression, and</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a><span class="sd">     * lower_bound is a float</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_expression&quot;</span><span class="p">,</span> <span class="s2">&quot;_lower_bound&quot;</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">,</span> <span class="n">lower_bound</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Operator overloading can be used instead: e.g. `x + y &gt;= 2.0`.&quot;&quot;&quot;</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span> <span class="o">=</span> <span class="n">expression</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">lower_bound</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a>    <span class="nd">@property</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a>    <span class="k">def</span> <span class="nf">expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">:</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a>    <span class="nd">@property</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a>    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BoundedLinearExpression&quot;</span><span class="p">:</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lower_bound</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expression</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>        <span class="n">_raise_binary_operator_type_error</span><span class="p">(</span><span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">rhs</span><span class="p">))</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a>            <span class="s2">&quot;__bool__ is unsupported for LowerBoundedLinearExpression&quot;</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>            <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>            <span class="o">+</span> <span class="n">_CHAINED_COMPARISON_MESSAGE</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a>        <span class="p">)</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="si">!s}</span><span class="s2"> &gt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="si">!r}</span><span class="s2"> &gt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a><span class="k">class</span> <span class="nc">BoundedLinearExpression</span><span class="p">:</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An inequality of the form lower_bound &lt;= expression &lt;= upper_bound.</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a><span class="sd">    Where:</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a><span class="sd">     * expression is a linear expression</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a><span class="sd">     * lower_bound is a float, and</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a><span class="sd">     * upper_bound is a float</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a><span class="sd">    Note: Because of limitations related to Python&#39;s handling of chained</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a><span class="sd">    comparisons, bounded expressions cannot be directly created usign</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a><span class="sd">    overloaded comparisons as in `lower_bound &lt;= expression &lt;= upper_bound`.</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a><span class="sd">    One solution is to wrap one of the inequalities in parenthesis as in</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a><span class="sd">    `(lower_bound &lt;= expression) &lt;= upper_bound`.</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_expression&quot;</span><span class="p">,</span> <span class="s2">&quot;_lower_bound&quot;</span><span class="p">,</span> <span class="s2">&quot;_upper_bound&quot;</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">lower_bound</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span> <span class="o">=</span> <span class="n">expression</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">lower_bound</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">upper_bound</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>    <span class="nd">@property</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>    <span class="k">def</span> <span class="nf">expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">:</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a>    <span class="nd">@property</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a>    <span class="nd">@property</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>            <span class="s2">&quot;__bool__ is unsupported for BoundedLinearExpression&quot;</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>            <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>            <span class="o">+</span> <span class="n">_CHAINED_COMPARISON_MESSAGE</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>        <span class="p">)</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="si">!s}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="si">!r}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a><span class="k">class</span> <span class="nc">VarEqVar</span><span class="p">:</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The result of the equality comparison between two Variable.</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a><span class="sd">    We use an object here to delay the evaluation of equality so that we can use</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a><span class="sd">    the operator== in two use-cases:</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a><span class="sd">      1. when the user want to test that two Variable values references the same</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a><span class="sd">         variable. This is supported by having this object support implicit</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a><span class="sd">         conversion to bool.</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a><span class="sd">      2. when the user want to use the equality to create a constraint of equality</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a><span class="sd">         between two variables.</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_first_variable&quot;</span><span class="p">,</span> <span class="s2">&quot;_second_variable&quot;</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>        <span class="n">first_variable</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">,</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>        <span class="n">second_variable</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">,</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_first_variable</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span> <span class="o">=</span> <span class="n">first_variable</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_second_variable</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span> <span class="o">=</span> <span class="n">second_variable</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>    <span class="nd">@property</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>    <span class="k">def</span> <span class="nf">first_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Variable&quot;</span><span class="p">:</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_variable</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a>    <span class="nd">@property</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a>    <span class="k">def</span> <span class="nf">second_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Variable&quot;</span><span class="p">:</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_variable</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_first_variable</span><span class="o">.</span><span class="n">model</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_variable</span><span class="o">.</span><span class="n">model</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_variable</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_variable</span><span class="o">.</span><span class="n">id</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>        <span class="p">)</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">first_variable</span><span class="si">!s}</span><span class="s2"> == </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_second_variable</span><span class="si">!s}</span><span class="s2">&quot;</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">first_variable</span><span class="si">!r}</span><span class="s2"> == </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_second_variable</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a><span class="n">BoundedLinearTypesList</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>    <span class="n">LowerBoundedLinearExpression</span><span class="p">,</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a>    <span class="n">UpperBoundedLinearExpression</span><span class="p">,</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>    <span class="n">BoundedLinearExpression</span><span class="p">,</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a>    <span class="n">VarEqVar</span><span class="p">,</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a><span class="p">)</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a><span class="n">BoundedLinearTypes</span> <span class="o">=</span> <span class="n">Union</span><span class="p">[</span><span class="n">BoundedLinearTypesList</span><span class="p">]</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a><span class="c1"># TODO(b/231426528): consider using a frozen dataclass.</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a><span class="k">class</span> <span class="nc">QuadraticTermKey</span><span class="p">:</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An id-ordered pair of variables used as a key for quadratic terms.&quot;&quot;&quot;</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_first_var&quot;</span><span class="p">,</span> <span class="s2">&quot;_second_var&quot;</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">):</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Variables a and b will be ordered internally by their ids.&quot;&quot;&quot;</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span> <span class="o">=</span> <span class="n">a</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span> <span class="o">=</span> <span class="n">b</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="o">.</span><span class="n">id</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>    <span class="nd">@property</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>    <span class="k">def</span> <span class="nf">first_var</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Variable&quot;</span><span class="p">:</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a>    <span class="nd">@property</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a>    <span class="k">def</span> <span class="nf">second_var</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Variable&quot;</span><span class="p">:</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;QuadraticTermKey&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a>        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_first_var</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_second_var</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a>        <span class="p">)</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="p">))</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="si">!s}</span><span class="s2"> * </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="si">!s}</span><span class="s2">&quot;</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;QuadraticTermKey(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="si">!r}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="si">!r}</span><span class="s2">)&quot;</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a><span class="k">class</span> <span class="nc">_ProcessedElements</span><span class="p">:</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Auxiliary data class for LinearBase._flatten_once_and_add_to().&quot;&quot;&quot;</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>    <span class="n">terms</span><span class="p">:</span> <span class="n">DefaultDict</span><span class="p">[</span><span class="s2">&quot;Variable&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">dataclasses</span><span class="o">.</span><span class="n">field</span><span class="p">(</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a>        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>    <span class="p">)</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>    <span class="n">offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a><span class="k">class</span> <span class="nc">_QuadraticProcessedElements</span><span class="p">(</span><span class="n">_ProcessedElements</span><span class="p">):</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Auxiliary data class for QuadraticBase._quadratic_flatten_once_and_add_to().&quot;&quot;&quot;</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>    <span class="n">quadratic_terms</span><span class="p">:</span> <span class="n">DefaultDict</span><span class="p">[</span><span class="s2">&quot;QuadraticTermKey&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">dataclasses</span><span class="o">.</span><span class="n">field</span><span class="p">(</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>        <span class="n">default_factory</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>    <span class="p">)</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a><span class="k">class</span> <span class="nc">_ToProcessElements</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Auxiliary to-process stack interface for LinearBase._flatten_once_and_add_to() and QuadraticBase._quadratic_flatten_once_and_add_to().&quot;&quot;&quot;</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">term</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">,</span> <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a linear object and scale to the to-process stack.&quot;&quot;&quot;</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a><span class="n">_T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;_T&quot;</span><span class="p">,</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;LinearBase&quot;</span><span class="p">,</span> <span class="s2">&quot;QuadraticBase&quot;</span><span class="p">])</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a><span class="k">class</span> <span class="nc">_ToProcessElementsImplementation</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">_T</span><span class="p">]):</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Auxiliary data class for LinearBase._flatten_once_and_add_to().&quot;&quot;&quot;</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;_queue&quot;</span><span class="p">,)</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">term</span><span class="p">:</span> <span class="n">_T</span><span class="p">,</span> <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="p">:</span> <span class="n">Deque</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">_T</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">deque</span><span class="p">([(</span><span class="n">term</span><span class="p">,</span> <span class="n">scale</span><span class="p">)])</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">term</span><span class="p">:</span> <span class="n">_T</span><span class="p">,</span> <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">term</span><span class="p">,</span> <span class="n">scale</span><span class="p">))</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a>    <span class="k">def</span> <span class="nf">pop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">_T</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a>        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_queue</span><span class="p">)</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a><span class="n">_LinearToProcessElements</span> <span class="o">=</span> <span class="n">_ToProcessElementsImplementation</span><span class="p">[</span><span class="s2">&quot;LinearBase&quot;</span><span class="p">]</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a><span class="n">_QuadraticToProcessElements</span> <span class="o">=</span> <span class="n">_ToProcessElementsImplementation</span><span class="p">[</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a>    <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;LinearBase&quot;</span><span class="p">,</span> <span class="s2">&quot;QuadraticBase&quot;</span><span class="p">]</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a><span class="p">]</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a><span class="k">class</span> <span class="nc">LinearBase</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">abc</span><span class="o">.</span><span class="n">ABCMeta</span><span class="p">):</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Interface for types that can build linear expressions with +, -, * and /.</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a><span class="sd">    Classes derived from LinearBase (plus float and int scalars) are used to</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a><span class="sd">    build expression trees describing a linear expression. Operations nodes of the</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a><span class="sd">    expression tree include:</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a><span class="sd">      * LinearSum: describes a deferred sum of LinearTypes objects.</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a><span class="sd">      * LinearProduct: describes a deferred product of a scalar and a</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a><span class="sd">        LinearTypes object.</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a><span class="sd">    Leaf nodes of the expression tree include:</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a><span class="sd">      * float and int scalars.</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a><span class="sd">      * Variable: a single variable.</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a><span class="sd">      * LinearTerm: the product of a scalar and a Variable object.</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a><span class="sd">      * LinearExpression: the sum of a scalar and LinearTerm objects.</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a><span class="sd">    LinearBase objects/expression-trees can be used directly to create</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a><span class="sd">    constraints or objective functions. However, to facilitate their inspection,</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a><span class="sd">    any LinearTypes object can be flattened to a LinearExpression</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a><span class="sd">    through:</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a><span class="sd">     as_flat_linear_expression(value: LinearTypes) -&gt; LinearExpression:</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a><span class="sd">    In addition, all LinearBase objects are immutable.</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a><span class="sd">    Performance notes:</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a><span class="sd">    Using an expression tree representation instead of an eager construction of</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a><span class="sd">    LinearExpression objects reduces known inefficiencies associated with the</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a><span class="sd">    use of operator overloading to construct linear expressions. In particular, we</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a><span class="sd">    expect the runtime of as_flat_linear_expression() to be linear in the size of</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a><span class="sd">    the expression tree. Additional performance can gained by using LinearSum(c)</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a><span class="sd">    instead of sum(c) for a container c, as the latter creates len(c) LinearSum</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a><span class="sd">    objects.</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a>    <span class="c1"># TODO(b/216492143): explore requirements for this function so calculation of</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>    <span class="c1"># coefficients and offsets follow expected associativity rules (so approximate</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>    <span class="c1"># float calculations are as expected).</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>    <span class="c1"># TODO(b/216492143): add more details of what subclasses need to do in</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>    <span class="c1"># developers guide.</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>    <span class="k">def</span> <span class="nf">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_ProcessedElements</span><span class="p">,</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_ToProcessElements</span><span class="p">,</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Flatten one level of tree if needed and add to targets.</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a><span class="sd">        Classes derived from LinearBase only need to implement this function</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a><span class="sd">        to enable transformation to LinearExpression through</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a><span class="sd">        as_flat_linear_expression().</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a><span class="sd">        Args:</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a><span class="sd">          scale: multiply elements by this number when processing or adding to</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a><span class="sd">            stack.</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a><span class="sd">          processed_elements: where to add LinearTerms and scalars that can be</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a><span class="sd">            processed immediately.</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a><span class="sd">          target_stack: where to add LinearBase elements that are not scalars or</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a><span class="sd">            LinearTerms (i.e. elements that need further flattening).</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a><span class="sd">            Implementations should append() to this stack to avoid being recursive.</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="n">LinearTypes</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a>        <span class="s2">&quot;BoundedLinearExpression&quot;</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a>    <span class="p">):</span>  <span class="c1"># pytype: disable=signature-mismatch  # overriding-return-type-checks</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a>            <span class="n">_raise_binary_operator_type_error</span><span class="p">(</span><span class="s2">&quot;==&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">rhs</span><span class="p">))</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a>        <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="bp">self</span> <span class="o">-</span> <span class="n">rhs</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a>    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="n">LinearTypes</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a>        <span class="n">NoReturn</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a>    <span class="p">):</span>  <span class="c1"># pytype: disable=signature-mismatch  # overriding-return-type-checks</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a>        <span class="n">_raise_ne_not_supported</span><span class="p">()</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;UpperBoundedLinearExpression&quot;</span><span class="p">:</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>        <span class="o">...</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BoundedLinearExpression&quot;</span><span class="p">:</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>        <span class="o">...</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="s2">&quot;BoundedLinearExpression&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>        <span class="o">...</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">):</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>            <span class="k">return</span> <span class="n">UpperBoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="bp">self</span> <span class="o">-</span> <span class="n">rhs</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">BoundedLinearExpression</span><span class="p">):</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a>            <span class="n">_raise_binary_operator_type_error</span><span class="p">(</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a>                <span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">rhs</span><span class="p">),</span> <span class="n">_EXPRESSION_COMP_EXPRESSION_MESSAGE</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>            <span class="p">)</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>        <span class="n">_raise_binary_operator_type_error</span><span class="p">(</span><span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">rhs</span><span class="p">))</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LowerBoundedLinearExpression&quot;</span><span class="p">:</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a>        <span class="o">...</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BoundedLinearExpression&quot;</span><span class="p">:</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a>        <span class="o">...</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a>    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">:</span> <span class="s2">&quot;BoundedLinearExpression&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a>        <span class="o">...</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a>    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">):</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a>            <span class="k">return</span> <span class="n">LowerBoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">)</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="bp">self</span> <span class="o">-</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">BoundedLinearExpression</span><span class="p">):</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a>            <span class="n">_raise_binary_operator_type_error</span><span class="p">(</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a>                <span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">lhs</span><span class="p">),</span> <span class="n">_EXPRESSION_COMP_EXPRESSION_MESSAGE</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a>            <span class="p">)</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a>        <span class="n">_raise_binary_operator_type_error</span><span class="p">(</span><span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">lhs</span><span class="p">))</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearSum&quot;</span><span class="p">:</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">)):</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a>        <span class="k">return</span> <span class="n">LinearSum</span><span class="p">((</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">))</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a>    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearSum&quot;</span><span class="p">:</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">)):</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>        <span class="k">return</span> <span class="n">LinearSum</span><span class="p">((</span><span class="n">expr</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a>    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearSum&quot;</span><span class="p">:</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">)):</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a>        <span class="k">return</span> <span class="n">LinearSum</span><span class="p">((</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="n">expr</span><span class="p">))</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a>    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearSum&quot;</span><span class="p">:</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">)):</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a>        <span class="k">return</span> <span class="n">LinearSum</span><span class="p">((</span><span class="n">expr</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="p">))</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearProduct&quot;</span><span class="p">:</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>        <span class="o">...</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearLinearProduct&quot;</span><span class="p">:</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>        <span class="o">...</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">)):</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>            <span class="k">return</span> <span class="n">LinearLinearProduct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>        <span class="k">return</span> <span class="n">LinearProduct</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearProduct&quot;</span><span class="p">:</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>        <span class="k">return</span> <span class="n">LinearProduct</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>    <span class="c1"># TODO(b/216492143): explore numerical consequences of 1.0 / constant below.</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearProduct&quot;</span><span class="p">:</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>        <span class="k">return</span> <span class="n">LinearProduct</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">constant</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearProduct&quot;</span><span class="p">:</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>        <span class="k">return</span> <span class="n">LinearProduct</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a><span class="k">class</span> <span class="nc">QuadraticBase</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">abc</span><span class="o">.</span><span class="n">ABCMeta</span><span class="p">):</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Interface for types that can build quadratic expressions with +, -, * and /.</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a><span class="sd">    Classes derived from QuadraticBase and LinearBase (plus float and int scalars)</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a><span class="sd">    are used to build expression trees describing a quadratic expression.</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a><span class="sd">    Operations nodes of the expression tree include:</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a><span class="sd">        * QuadraticSum: describes a deferred sum of QuadraticTypes objects.</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a><span class="sd">        * QuadraticProduct: describes a deferred product of a scalar and a</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a><span class="sd">          QuadraticTypes object.</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a><span class="sd">        * LinearLinearProduct: describes a deferred product of two LinearTypes</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a><span class="sd">          objects.</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a><span class="sd">      Leaf nodes of the expression tree include:</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a><span class="sd">        * float and int scalars.</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a><span class="sd">        * Variable: a single variable.</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a><span class="sd">        * LinearTerm: the product of a scalar and a Variable object.</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a><span class="sd">        * LinearExpression: the sum of a scalar and LinearTerm objects.</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a><span class="sd">        * QuadraticTerm: the product of a scalar and two Variable objects.</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a><span class="sd">        * QuadraticExpression: the sum of a scalar, LinearTerm objects and</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a><span class="sd">          QuadraticTerm objects.</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a><span class="sd">    QuadraticBase objects/expression-trees can be used directly to create</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a><span class="sd">    objective functions. However, to facilitate their inspection, any</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a><span class="sd">    QuadraticTypes object can be flattened to a QuadraticExpression</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a><span class="sd">    through:</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a><span class="sd">     as_flat_quadratic_expression(value: QuadraticTypes) -&gt; QuadraticExpression:</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a><span class="sd">    In addition, all QuadraticBase objects are immutable.</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a><span class="sd">    Performance notes:</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a><span class="sd">    Using an expression tree representation instead of an eager construction of</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a><span class="sd">    QuadraticExpression objects reduces known inefficiencies associated with the</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a><span class="sd">    use of operator overloading to construct quadratic expressions. In particular,</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a><span class="sd">    we expect the runtime of as_flat_quadratic_expression() to be linear in the</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a><span class="sd">    size of the expression tree. Additional performance can gained by using</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a><span class="sd">    QuadraticSum(c) instead of sum(c) for a container c, as the latter creates</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a><span class="sd">    len(c) QuadraticSum objects.</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>    <span class="c1"># TODO(b/216492143): explore requirements for this function so calculation of</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>    <span class="c1"># coefficients and offsets follow expected associativity rules (so approximate</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>    <span class="c1"># float calculations are as expected).</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>    <span class="c1"># TODO(b/216492143): add more details of what subclasses need to do in</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>    <span class="c1"># developers guide.</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>    <span class="k">def</span> <span class="nf">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_QuadraticProcessedElements</span><span class="p">,</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_QuadraticToProcessElements</span><span class="p">,</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Flatten one level of tree if needed and add to targets.</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a><span class="sd">        Classes derived from QuadraticBase only need to implement this function</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a><span class="sd">        to enable transformation to QuadraticExpression through</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a><span class="sd">        as_flat_quadratic_expression().</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a><span class="sd">        Args:</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a><span class="sd">          scale: multiply elements by this number when processing or adding to</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a><span class="sd">            stack.</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a><span class="sd">          processed_elements: where to add linear terms, quadratic terms and scalars</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a><span class="sd">            that can be processed immediately.</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a><span class="sd">          target_stack: where to add LinearBase and QuadraticBase elements that are</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a><span class="sd">            not scalars or linear terms or quadratic terms (i.e. elements that need</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a><span class="sd">            further flattening). Implementations should append() to this stack to</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a><span class="sd">            avoid being recursive.</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticSum&quot;</span><span class="p">:</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">)):</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>        <span class="k">return</span> <span class="n">QuadraticSum</span><span class="p">((</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">))</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticSum&quot;</span><span class="p">:</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">)):</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>        <span class="k">return</span> <span class="n">QuadraticSum</span><span class="p">((</span><span class="n">expr</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticSum&quot;</span><span class="p">:</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">)):</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>        <span class="k">return</span> <span class="n">QuadraticSum</span><span class="p">((</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="n">expr</span><span class="p">))</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticSum&quot;</span><span class="p">:</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">)):</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>        <span class="k">return</span> <span class="n">QuadraticSum</span><span class="p">((</span><span class="n">expr</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="p">))</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticProduct&quot;</span><span class="p">:</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>        <span class="k">return</span> <span class="n">QuadraticProduct</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticProduct&quot;</span><span class="p">:</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>        <span class="k">return</span> <span class="n">QuadraticProduct</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>    <span class="c1"># TODO(b/216492143): explore numerical consequences of 1.0 / constant below.</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticProduct&quot;</span><span class="p">:</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>        <span class="k">return</span> <span class="n">QuadraticProduct</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">constant</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticProduct&quot;</span><span class="p">:</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>        <span class="k">return</span> <span class="n">QuadraticProduct</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a><span class="k">class</span> <span class="nc">Variable</span><span class="p">(</span><span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A decision variable for an optimization model.</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a><span class="sd">    A decision variable takes a value from a domain, either the real numbers or</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a><span class="sd">    the integers, and restricted to be in some interval [lb, ub] (where lb and ub</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a><span class="sd">    can be infinite). The case of lb == ub is allowed, this means the variable</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a><span class="sd">    must take a single value. The case of lb &gt; ub is also allowed, this implies</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a><span class="sd">    that the problem is infeasible.</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a><span class="sd">    A Variable is configured as follows:</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a><span class="sd">      * lower_bound: a float property, lb above. Should not be NaN nor +inf.</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a><span class="sd">      * upper_bound: a float property, ub above. Should not be NaN nor -inf.</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a><span class="sd">      * integer: a bool property, if the domain is integer or continuous.</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a><span class="sd">    The name is optional, read only, and used only for debugging. Non-empty names</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a><span class="sd">    should be distinct.</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a><span class="sd">    Every Variable is associated with a Model (defined below). Note that data</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a><span class="sd">    describing the variable (e.g. lower_bound) is owned by Model.storage, this</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a><span class="sd">    class is simply a reference to that data. Do not create a Variable directly,</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a><span class="sd">    use Model.add_variable() instead.</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;__weakref__&quot;</span><span class="p">,</span> <span class="s2">&quot;_model&quot;</span><span class="p">,</span> <span class="s2">&quot;_id&quot;</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">vid</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do not invoke directly, use Model.add_variable().&quot;&quot;&quot;</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span> <span class="o">=</span> <span class="n">model</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">vid</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a>    <span class="nd">@property</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variable_lb</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>    <span class="nd">@lower_bound</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_variable_lb</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>    <span class="nd">@property</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variable_ub</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>    <span class="nd">@upper_bound</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_variable_ub</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>    <span class="nd">@property</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>    <span class="k">def</span> <span class="nf">integer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variable_is_integer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a>    <span class="nd">@integer</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a>    <span class="k">def</span> <span class="nf">integer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_variable_is_integer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>    <span class="nd">@property</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variable_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>    <span class="nd">@property</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a>    <span class="nd">@property</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a>    <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Model&quot;</span><span class="p">:</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the name, or a string containing the id if the name is empty.&quot;&quot;&quot;</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;variable_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;Variable id: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">, name: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">!r}</span><span class="s2">&gt;&quot;</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;VarEqVar&quot;</span><span class="p">:</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a>        <span class="o">...</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="n">LinearTypesExceptVariable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BoundedLinearExpression&quot;</span><span class="p">:</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>        <span class="o">...</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">):</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">Variable</span><span class="p">):</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>            <span class="k">return</span> <span class="n">VarEqVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">rhs</span><span class="p">)</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>        <span class="o">...</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a>    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="n">LinearTypesExceptVariable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a>        <span class="o">...</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">):</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">Variable</span><span class="p">):</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>            <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">rhs</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a>        <span class="n">_raise_ne_not_supported</span><span class="p">()</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a>        <span class="o">...</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Variable&quot;</span><span class="p">,</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticTerm&quot;</span><span class="p">:</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a>        <span class="o">...</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearLinearProduct&quot;</span><span class="p">:</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>        <span class="o">...</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">)):</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Variable</span><span class="p">):</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>            <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span><span class="n">QuadraticTermKey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LinearTerm</span><span class="p">):</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>            <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>                <span class="n">QuadraticTermKey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">variable</span><span class="p">),</span> <span class="n">other</span><span class="o">.</span><span class="n">coefficient</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>            <span class="p">)</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>            <span class="k">return</span> <span class="n">LinearLinearProduct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>  <span class="c1"># pytype: disable=bad-return-type</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>    <span class="c1"># TODO(b/216492143): explore numerical consequences of 1.0 / constant below.</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a>    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a>    <span class="k">def</span> <span class="nf">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_ProcessedElements</span><span class="p">,</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_ToProcessElements</span><span class="p">,</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a>        <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="o">+=</span> <span class="n">scale</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a><span class="k">class</span> <span class="nc">LinearTerm</span><span class="p">(</span><span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The product of a scalar and a variable.</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a><span class="sd">    This class is immutable.</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_variable&quot;</span><span class="p">,</span> <span class="s2">&quot;_coefficient&quot;</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">:</span> <span class="n">Variable</span> <span class="o">=</span> <span class="n">variable</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">coefficient</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a>    <span class="nd">@property</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a>    <span class="k">def</span> <span class="nf">variable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_variable</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a>    <span class="nd">@property</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>    <span class="k">def</span> <span class="nf">coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a>    <span class="k">def</span> <span class="nf">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_ProcessedElements</span><span class="p">,</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_ToProcessElements</span><span class="p">,</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>        <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>        <span class="o">...</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Variable&quot;</span><span class="p">,</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticTerm&quot;</span><span class="p">:</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>        <span class="o">...</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearLinearProduct&quot;</span><span class="p">:</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>        <span class="o">...</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">)):</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Variable</span><span class="p">):</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>            <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>                <span class="n">QuadraticTermKey</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">,</span> <span class="n">other</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>            <span class="p">)</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LinearTerm</span><span class="p">):</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>            <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>                <span class="n">QuadraticTermKey</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">variable</span><span class="p">),</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">coefficient</span><span class="p">,</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>            <span class="p">)</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a>            <span class="k">return</span> <span class="n">LinearLinearProduct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>  <span class="c1"># pytype: disable=bad-return-type</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">*</span> <span class="n">other</span><span class="p">)</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">*</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">/</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="p">)</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="si">}</span><span class="s2"> * </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;LinearTerm(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="si">!r}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="si">!r}</span><span class="s2">)&quot;</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a><span class="k">class</span> <span class="nc">QuadraticTerm</span><span class="p">(</span><span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The product of a scalar and two variables.</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a><span class="sd">    This class is immutable.</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_key&quot;</span><span class="p">,</span> <span class="s2">&quot;_coefficient&quot;</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">QuadraticTermKey</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">:</span> <span class="n">QuadraticTermKey</span> <span class="o">=</span> <span class="n">key</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">coefficient</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a>    <span class="nd">@property</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>    <span class="k">def</span> <span class="nf">key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QuadraticTermKey</span><span class="p">:</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_key</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a>    <span class="nd">@property</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a>    <span class="k">def</span> <span class="nf">coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>    <span class="k">def</span> <span class="nf">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_QuadraticProcessedElements</span><span class="p">,</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_ToProcessElements</span><span class="p">,</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a>        <span class="n">processed_elements</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticTerm&quot;</span><span class="p">:</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>        <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">*</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticTerm&quot;</span><span class="p">:</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a>        <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">*</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticTerm&quot;</span><span class="p">:</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>        <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">/</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a>    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticTerm&quot;</span><span class="p">:</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>        <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="p">)</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="si">}</span><span class="s2"> * </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="si">!s}</span><span class="s2">&quot;</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;QuadraticTerm(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="si">!r}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="si">}</span><span class="s2">)&quot;</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a><span class="k">class</span> <span class="nc">LinearExpression</span><span class="p">(</span><span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;For variables x, an expression: b + sum_{i in I} a_i * x_i.</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a><span class="sd">    This class is immutable.</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;__weakref__&quot;</span><span class="p">,</span> <span class="s2">&quot;_terms&quot;</span><span class="p">,</span> <span class="s2">&quot;_offset&quot;</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a>    <span class="c1"># TODO(b/216492143): consider initializing from a dictionary.</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">LinearTypes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">()</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a>            <span class="k">return</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a>        <span class="n">to_process</span><span class="p">:</span> <span class="n">_LinearToProcessElements</span> <span class="o">=</span> <span class="n">_LinearToProcessElements</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a>        <span class="n">processed_elements</span> <span class="o">=</span> <span class="n">_ProcessedElements</span><span class="p">()</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a>            <span class="n">linear</span><span class="p">,</span> <span class="n">coef</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a>            <span class="n">linear</span><span class="o">.</span><span class="n">_flatten_once_and_add_to</span><span class="p">(</span><span class="n">coef</span><span class="p">,</span> <span class="n">processed_elements</span><span class="p">,</span> <span class="n">to_process</span><span class="p">)</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a>        <span class="c1"># TODO(b/216492143): explore avoiding this copy.</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">(</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a>        <span class="p">)</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span> <span class="o">=</span> <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>    <span class="nd">@property</span>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>    <span class="k">def</span> <span class="nf">terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a>    <span class="nd">@property</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a>    <span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a>    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_values</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the value of this expression for given variable values.</span>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a><span class="sd">        E.g. if this is 3 * x + 4 and variable_values = {x: 2.0}, then</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a><span class="sd">        evaluate(variable_values) equals 10.0.</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a><span class="sd">        See also mathopt.evaluate_expression(), which works on any type in</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a><span class="sd">        QuadraticTypes.</span>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a><span class="sd">        Args:</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a><span class="sd">          variable_values: Must contain a value for every variable in expression.</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a><span class="sd">        Returns:</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a><span class="sd">          The value of this expression when replacing variables by their value.</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coef</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">var_coef_pair</span><span class="p">:</span> <span class="n">var_coef_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a>        <span class="p">):</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="n">coef</span> <span class="o">*</span> <span class="n">variable_values</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a>    <span class="k">def</span> <span class="nf">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_ProcessedElements</span><span class="p">,</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_ToProcessElements</span><span class="p">,</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">+=</span> <span class="n">val</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a>        <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">scale</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>    <span class="c1"># TODO(b/216492143): change __str__ to match C++ implementation in</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>    <span class="c1"># cl/421649402.</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the name, or a string containing the id if the name is empty.&quot;&quot;&quot;</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>        <span class="n">sorted_keys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a>        <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">sorted_keys</span><span class="p">:</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>            <span class="c1"># TODO(b/216492143): consider how to better deal with `NaN` and try to</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>            <span class="c1"># match C++ implementation in cl/421649402. See TODO for StrAndReprTest in</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>            <span class="c1"># linear_expression_test.py.</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>            <span class="n">coefficient</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>            <span class="k">if</span> <span class="n">coefficient</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a>                <span class="k">continue</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a>            <span class="k">if</span> <span class="n">coefficient</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a>                <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot; + &quot;</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a>                <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot; - &quot;</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">coefficient</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; * &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;LinearExpression(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="si">}</span><span class="s2">, &quot;</span> <span class="o">+</span> <span class="s2">&quot;{&quot;</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a>            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable</span><span class="si">!r}</span><span class="s2">: </span><span class="si">{</span><span class="n">coefficient</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a>            <span class="k">for</span> <span class="n">variable</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a>        <span class="p">)</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;})&quot;</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a><span class="k">class</span> <span class="nc">QuadraticExpression</span><span class="p">(</span><span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;For variables x, an expression: b + sum_{i in I} a_i * x_i + sum_{i,j in I, i&lt;=j} a_i,j * x_i * x_j.</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a><span class="sd">    This class is immutable.</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;__weakref__&quot;</span><span class="p">,</span> <span class="s2">&quot;_linear_terms&quot;</span><span class="p">,</span> <span class="s2">&quot;_quadratic_terms&quot;</span><span class="p">,</span> <span class="s2">&quot;_offset&quot;</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>    <span class="c1"># TODO(b/216492143): consider initializing from a dictionary.</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">()</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>                <span class="n">QuadraticTermKey</span><span class="p">,</span> <span class="nb">float</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>            <span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">()</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>            <span class="k">return</span>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a>        <span class="n">to_process</span><span class="p">:</span> <span class="n">_QuadraticToProcessElements</span> <span class="o">=</span> <span class="n">_QuadraticToProcessElements</span><span class="p">(</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>            <span class="n">other</span><span class="p">,</span> <span class="mf">1.0</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>        <span class="p">)</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>        <span class="n">processed_elements</span> <span class="o">=</span> <span class="n">_QuadraticProcessedElements</span><span class="p">()</span>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>            <span class="n">linear_or_quadratic</span><span class="p">,</span> <span class="n">coef</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">linear_or_quadratic</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>                <span class="n">linear_or_quadratic</span><span class="o">.</span><span class="n">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>                    <span class="n">coef</span><span class="p">,</span> <span class="n">processed_elements</span><span class="p">,</span> <span class="n">to_process</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>                <span class="p">)</span>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>                <span class="n">linear_or_quadratic</span><span class="o">.</span><span class="n">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>                    <span class="n">coef</span><span class="p">,</span> <span class="n">processed_elements</span><span class="p">,</span> <span class="n">to_process</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>                <span class="p">)</span>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>        <span class="c1"># TODO(b/216492143): explore avoiding this copy.</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">(</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>        <span class="p">)</span>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a>            <span class="n">QuadraticTermKey</span><span class="p">,</span> <span class="nb">float</span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a>        <span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">(</span><span class="n">processed_elements</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">)</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span> <span class="o">=</span> <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a>    <span class="nd">@property</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>    <span class="k">def</span> <span class="nf">linear_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a>    <span class="nd">@property</span>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a>    <span class="k">def</span> <span class="nf">quadratic_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">QuadraticTermKey</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a>    <span class="nd">@property</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a>    <span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a>    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_values</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the value of this expression for given variable values.</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a><span class="sd">        E.g. if this is 3 * x * x + 4 and variable_values = {x: 2.0}, then</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a><span class="sd">        evaluate(variable_values) equals 16.0.</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a><span class="sd">        See also mathopt.evaluate_expression(), which works on any type in</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a><span class="sd">        QuadraticTypes.</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a><span class="sd">        Args:</span>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a><span class="sd">          variable_values: Must contain a value for every variable in expression.</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a><span class="sd">        Returns:</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a><span class="sd">          The value of this expression when replacing variables by their value.</span>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coef</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a>            <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">var_coef_pair</span><span class="p">:</span> <span class="n">var_coef_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a>        <span class="p">):</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="n">coef</span> <span class="o">*</span> <span class="n">variable_values</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">coef</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>            <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">quad_coef_pair</span><span class="p">:</span> <span class="p">(</span>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a>                <span class="n">quad_coef_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">first_var</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>                <span class="n">quad_coef_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">second_var</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>            <span class="p">),</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>        <span class="p">):</span>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a>                <span class="n">coef</span> <span class="o">*</span> <span class="n">variable_values</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">first_var</span><span class="p">]</span> <span class="o">*</span> <span class="n">variable_values</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">second_var</span><span class="p">]</span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a>            <span class="p">)</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>    <span class="k">def</span> <span class="nf">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_QuadraticProcessedElements</span><span class="p">,</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_QuadraticToProcessElements</span><span class="p">,</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">+=</span> <span class="n">val</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="n">val</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>        <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">scale</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>    <span class="c1"># TODO(b/216492143): change __str__ to match C++ implementation in</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>    <span class="c1"># cl/421649402.</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>        <span class="n">sorted_linear_keys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>        <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">sorted_linear_keys</span><span class="p">:</span>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>            <span class="c1"># TODO(b/216492143): consider how to better deal with `NaN` and try to</span>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>            <span class="c1"># match C++ implementation in cl/421649402. See TODO for StrAndReprTest in</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>            <span class="c1"># linear_expression_test.py.</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>            <span class="n">coefficient</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>            <span class="k">if</span> <span class="n">coefficient</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>                <span class="k">continue</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a>            <span class="k">if</span> <span class="n">coefficient</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>                <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot; + &quot;</span>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>                <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot; - &quot;</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">coefficient</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; * &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>        <span class="n">sorted_quadratic_keys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">sorted_quadratic_keys</span><span class="p">:</span>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>            <span class="c1"># TODO(b/216492143): consider how to better deal with `NaN` and try to</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a>            <span class="c1"># match C++ implementation in cl/421649402. See TODO for StrAndReprTest in</span>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a>            <span class="c1"># linear_expression_test.py.</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a>            <span class="n">coefficient</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a>            <span class="k">if</span> <span class="n">coefficient</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a>                <span class="k">continue</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a>            <span class="k">if</span> <span class="n">coefficient</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a>                <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot; + &quot;</span>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a>                <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot; - &quot;</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">coefficient</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; * &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;QuadraticExpression(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="si">}</span><span class="s2">, &quot;</span> <span class="o">+</span> <span class="s2">&quot;{&quot;</span>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a>            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable</span><span class="si">!r}</span><span class="s2">: </span><span class="si">{</span><span class="n">coefficient</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a>            <span class="k">for</span> <span class="n">variable</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a>        <span class="p">)</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;}, {&quot;</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">!r}</span><span class="s2">: </span><span class="si">{</span><span class="n">coefficient</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a>        <span class="p">)</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;})&quot;</span>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a><span class="k">class</span> <span class="nc">LinearConstraint</span><span class="p">:</span>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A linear constraint for an optimization model.</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a><span class="sd">    A LinearConstraint adds the following restriction on feasible solutions to an</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a><span class="sd">    optimization model:</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a><span class="sd">      lb &lt;= sum_{i in I} a_i * x_i &lt;= ub</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a><span class="sd">    where x_i are the decision variables of the problem. lb == ub is allowed, this</span>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a><span class="sd">    models the equality constraint:</span>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a><span class="sd">      sum_{i in I} a_i * x_i == b</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a><span class="sd">    lb &gt; ub is also allowed, but the optimization problem will be infeasible.</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a><span class="sd">    A LinearConstraint can be configured as follows:</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a><span class="sd">      * lower_bound: a float property, lb above. Should not be NaN nor +inf.</span>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a><span class="sd">      * upper_bound: a float property, ub above. Should not be NaN nor -inf.</span>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a><span class="sd">      * set_coefficient() and get_coefficient(): get and set the a_i * x_i</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a><span class="sd">        terms. The variable must be from the same model as this constraint, and</span>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a><span class="sd">        the a_i must be finite and not NaN. The coefficient for any variable not</span>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a><span class="sd">        set is 0.0, and setting a coefficient to 0.0 removes it from I above.</span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a><span class="sd">    The name is optional, read only, and used only for debugging. Non-empty names</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a><span class="sd">    should be distinct.</span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a><span class="sd">    Every LinearConstraint is associated with a Model (defined below). Note that</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a><span class="sd">    data describing the linear constraint (e.g. lower_bound) is owned by</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a><span class="sd">    Model.storage, this class is simply a reference to that data. Do not create a</span>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a><span class="sd">    LinearConstraint directly, use Model.add_linear_constraint() instead.</span>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;__weakref__&quot;</span><span class="p">,</span> <span class="s2">&quot;_model&quot;</span><span class="p">,</span> <span class="s2">&quot;_id&quot;</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">cid</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do not invoke directly, use Model.add_linear_constraint().&quot;&quot;&quot;</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span> <span class="o">=</span> <span class="n">model</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">cid</span>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a>    <span class="nd">@property</span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_lb</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a>    <span class="nd">@lower_bound</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_linear_constraint_lb</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a>    <span class="nd">@property</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_ub</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a>    <span class="nd">@upper_bound</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_linear_constraint_ub</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a>    <span class="nd">@property</span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a>    <span class="nd">@property</span>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a>    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a>    <span class="nd">@property</span>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a>    <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Model&quot;</span><span class="p">:</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a>    <span class="k">def</span> <span class="nf">set_coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_linear_constraint_coefficient</span><span class="p">(</span>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">coefficient</span>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a>        <span class="p">)</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a>    <span class="k">def</span> <span class="nf">get_coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_coefficient</span><span class="p">(</span>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">variable</span><span class="o">.</span><span class="n">id</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a>        <span class="p">)</span>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a>    <span class="k">def</span> <span class="nf">terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearTerm</span><span class="p">]:</span>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the variable/coefficient pairs with nonzero coefficient for this linear constraint.&quot;&quot;&quot;</span>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a>        <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">row_nonzeros</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a>            <span class="k">yield</span> <span class="n">LinearTerm</span><span class="p">(</span>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a>                <span class="n">variable</span><span class="o">=</span><span class="n">variable</span><span class="p">,</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a>                <span class="n">coefficient</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_coefficient</span><span class="p">(</span>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">variable</span><span class="o">.</span><span class="n">id</span>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a>                <span class="p">),</span>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a>            <span class="p">)</span>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the name, or a string containing the id if the name is empty.&quot;&quot;&quot;</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;linear_constraint_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;LinearConstraint id: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">, name: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">!r}</span><span class="s2">&gt;&quot;</span>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a><span class="k">class</span> <span class="nc">Objective</span><span class="p">:</span>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The objective for an optimization model.</span>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a><span class="sd">    An objective is either of the form:</span>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a><span class="sd">      min o + sum_{i in I} c_i * x_i + sum_{i, j in I, i &lt;= j} q_i,j * x_i * x_j</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a><span class="sd">    or</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a><span class="sd">      max o + sum_{i in I} c_i * x_i + sum_{(i, j) in Q} q_i,j * x_i * x_j</span>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a><span class="sd">    where x_i are the decision variables of the problem and where all pairs (i, j)</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a><span class="sd">    in Q satisfy i &lt;= j. The values of o, c_i and q_i,j should be finite and not</span>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a><span class="sd">    NaN.</span>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a><span class="sd">    The objective can be configured as follows:</span>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a><span class="sd">      * offset: a float property, o above. Should be finite and not NaN.</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a><span class="sd">      * is_maximize: a bool property, if the objective is to maximize or minimize.</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a><span class="sd">      * set_linear_coefficient and get_linear_coefficient control the c_i * x_i</span>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a><span class="sd">        terms. The variables must be from the same model as this objective, and</span>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a><span class="sd">        the c_i must be finite and not NaN. The coefficient for any variable not</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a><span class="sd">        set is 0.0, and setting a coefficient to 0.0 removes it from I above.</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a><span class="sd">      * set_quadratic_coefficient and get_quadratic_coefficient control the</span>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a><span class="sd">        q_i,j * x_i * x_j terms. The variables must be from the same model as this</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a><span class="sd">        objective, and the q_i,j must be finite and not NaN. The coefficient for</span>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a><span class="sd">        any pair of variables not set is 0.0, and setting a coefficient to 0.0</span>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a><span class="sd">        removes the associated (i,j) from Q above.</span>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a><span class="sd">    Every Objective is associated with a Model (defined below). Note that data</span>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a><span class="sd">    describing the objective (e.g. offset) is owned by Model.storage, this class</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a><span class="sd">    is simply a reference to that data. Do not create an Objective directly,</span>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a><span class="sd">    use Model.objective to access the objective instead.</span>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a><span class="sd">    The objective will be linear if only linear coefficients are set. This can be</span>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a><span class="sd">    useful to avoid solve-time errors with solvers that do not accept quadratic</span>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a><span class="sd">    objectives. To facilitate this linear objective guarantee we provide three</span>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a><span class="sd">    functions to add to the objective:</span>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a><span class="sd">      * add(), which accepts linear or quadratic expressions,</span>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a><span class="sd">      * add_quadratic(), which also accepts linear or quadratic expressions and</span>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a><span class="sd">        can be used to signal a quadratic objective is possible, and</span>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a><span class="sd">      * add_linear(), which only accepts linear expressions and can be used to</span>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a><span class="sd">        guarantee the objective remains linear.</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;_model&quot;</span><span class="p">,)</span>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do no invoke directly, use Model.objective.&quot;&quot;&quot;</span>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span> <span class="o">=</span> <span class="n">model</span>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a>    <span class="nd">@property</span>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a>    <span class="k">def</span> <span class="nf">is_maximize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_is_maximize</span><span class="p">()</span>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a>    <span class="nd">@is_maximize</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a>    <span class="k">def</span> <span class="nf">is_maximize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_maximize</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1360"><a href="#L-1360"><span class="linenos">1360</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_is_maximize</span><span class="p">(</span><span class="n">is_maximize</span><span class="p">)</span>
</span><span id="L-1361"><a href="#L-1361"><span class="linenos">1361</span></a>
</span><span id="L-1362"><a href="#L-1362"><span class="linenos">1362</span></a>    <span class="nd">@property</span>
</span><span id="L-1363"><a href="#L-1363"><span class="linenos">1363</span></a>    <span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-1364"><a href="#L-1364"><span class="linenos">1364</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_objective_offset</span><span class="p">()</span>
</span><span id="L-1365"><a href="#L-1365"><span class="linenos">1365</span></a>
</span><span id="L-1366"><a href="#L-1366"><span class="linenos">1366</span></a>    <span class="nd">@offset</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-1367"><a href="#L-1367"><span class="linenos">1367</span></a>    <span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1368"><a href="#L-1368"><span class="linenos">1368</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_objective_offset</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-1369"><a href="#L-1369"><span class="linenos">1369</span></a>
</span><span id="L-1370"><a href="#L-1370"><span class="linenos">1370</span></a>    <span class="nd">@property</span>
</span><span id="L-1371"><a href="#L-1371"><span class="linenos">1371</span></a>    <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Model&quot;</span><span class="p">:</span>
</span><span id="L-1372"><a href="#L-1372"><span class="linenos">1372</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
</span><span id="L-1373"><a href="#L-1373"><span class="linenos">1373</span></a>
</span><span id="L-1374"><a href="#L-1374"><span class="linenos">1374</span></a>    <span class="k">def</span> <span class="nf">set_linear_coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">coef</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1375"><a href="#L-1375"><span class="linenos">1375</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="L-1376"><a href="#L-1376"><span class="linenos">1376</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_linear_objective_coefficient</span><span class="p">(</span><span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">coef</span><span class="p">)</span>
</span><span id="L-1377"><a href="#L-1377"><span class="linenos">1377</span></a>
</span><span id="L-1378"><a href="#L-1378"><span class="linenos">1378</span></a>    <span class="k">def</span> <span class="nf">get_linear_coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-1379"><a href="#L-1379"><span class="linenos">1379</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="L-1380"><a href="#L-1380"><span class="linenos">1380</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_objective_coefficient</span><span class="p">(</span><span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="L-1381"><a href="#L-1381"><span class="linenos">1381</span></a>
</span><span id="L-1382"><a href="#L-1382"><span class="linenos">1382</span></a>    <span class="k">def</span> <span class="nf">linear_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearTerm</span><span class="p">]:</span>
</span><span id="L-1383"><a href="#L-1383"><span class="linenos">1383</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields variable coefficient pairs for variables with nonzero objective coefficient in undefined order.&quot;&quot;&quot;</span>
</span><span id="L-1384"><a href="#L-1384"><span class="linenos">1384</span></a>        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">linear_objective_terms</span><span class="p">()</span>
</span><span id="L-1385"><a href="#L-1385"><span class="linenos">1385</span></a>
</span><span id="L-1386"><a href="#L-1386"><span class="linenos">1386</span></a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1387"><a href="#L-1387"><span class="linenos">1387</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds the provided expression `objective` to the objective function.</span>
</span><span id="L-1388"><a href="#L-1388"><span class="linenos">1388</span></a>
</span><span id="L-1389"><a href="#L-1389"><span class="linenos">1389</span></a><span class="sd">        To ensure the objective remains linear through type checks, use</span>
</span><span id="L-1390"><a href="#L-1390"><span class="linenos">1390</span></a><span class="sd">        add_linear().</span>
</span><span id="L-1391"><a href="#L-1391"><span class="linenos">1391</span></a>
</span><span id="L-1392"><a href="#L-1392"><span class="linenos">1392</span></a><span class="sd">        Args:</span>
</span><span id="L-1393"><a href="#L-1393"><span class="linenos">1393</span></a><span class="sd">          objective: the expression to add to the objective function.</span>
</span><span id="L-1394"><a href="#L-1394"><span class="linenos">1394</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1395"><a href="#L-1395"><span class="linenos">1395</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-1396"><a href="#L-1396"><span class="linenos">1396</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">add_linear</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="L-1397"><a href="#L-1397"><span class="linenos">1397</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="L-1398"><a href="#L-1398"><span class="linenos">1398</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">add_quadratic</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="L-1399"><a href="#L-1399"><span class="linenos">1399</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1400"><a href="#L-1400"><span class="linenos">1400</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1401"><a href="#L-1401"><span class="linenos">1401</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="L-1402"><a href="#L-1402"><span class="linenos">1402</span></a>                <span class="sa">f</span><span class="s2">&quot;Objective.add(): </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-1403"><a href="#L-1403"><span class="linenos">1403</span></a>            <span class="p">)</span>
</span><span id="L-1404"><a href="#L-1404"><span class="linenos">1404</span></a>
</span><span id="L-1405"><a href="#L-1405"><span class="linenos">1405</span></a>    <span class="k">def</span> <span class="nf">add_linear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1406"><a href="#L-1406"><span class="linenos">1406</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds the provided linear expression `objective` to the objective function.&quot;&quot;&quot;</span>
</span><span id="L-1407"><a href="#L-1407"><span class="linenos">1407</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-1408"><a href="#L-1408"><span class="linenos">1408</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1409"><a href="#L-1409"><span class="linenos">1409</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="L-1410"><a href="#L-1410"><span class="linenos">1410</span></a>                <span class="sa">f</span><span class="s2">&quot;Objective.add_linear(): </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-1411"><a href="#L-1411"><span class="linenos">1411</span></a>            <span class="p">)</span>
</span><span id="L-1412"><a href="#L-1412"><span class="linenos">1412</span></a>        <span class="n">objective_expr</span> <span class="o">=</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="L-1413"><a href="#L-1413"><span class="linenos">1413</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="L-1414"><a href="#L-1414"><span class="linenos">1414</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1415"><a href="#L-1415"><span class="linenos">1415</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_coefficient</span><span class="p">(</span>
</span><span id="L-1416"><a href="#L-1416"><span class="linenos">1416</span></a>                <span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_linear_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">+</span> <span class="n">coefficient</span>
</span><span id="L-1417"><a href="#L-1417"><span class="linenos">1417</span></a>            <span class="p">)</span>
</span><span id="L-1418"><a href="#L-1418"><span class="linenos">1418</span></a>
</span><span id="L-1419"><a href="#L-1419"><span class="linenos">1419</span></a>    <span class="k">def</span> <span class="nf">add_quadratic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1420"><a href="#L-1420"><span class="linenos">1420</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds the provided quadratic expression `objective` to the objective function.&quot;&quot;&quot;</span>
</span><span id="L-1421"><a href="#L-1421"><span class="linenos">1421</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">QuadraticBase</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-1422"><a href="#L-1422"><span class="linenos">1422</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1423"><a href="#L-1423"><span class="linenos">1423</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="L-1424"><a href="#L-1424"><span class="linenos">1424</span></a>                <span class="sa">f</span><span class="s2">&quot;Objective.add(): </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-1425"><a href="#L-1425"><span class="linenos">1425</span></a>            <span class="p">)</span>
</span><span id="L-1426"><a href="#L-1426"><span class="linenos">1426</span></a>        <span class="n">objective_expr</span> <span class="o">=</span> <span class="n">as_flat_quadratic_expression</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="L-1427"><a href="#L-1427"><span class="linenos">1427</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="L-1428"><a href="#L-1428"><span class="linenos">1428</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">linear_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1429"><a href="#L-1429"><span class="linenos">1429</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_coefficient</span><span class="p">(</span>
</span><span id="L-1430"><a href="#L-1430"><span class="linenos">1430</span></a>                <span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_linear_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">+</span> <span class="n">coefficient</span>
</span><span id="L-1431"><a href="#L-1431"><span class="linenos">1431</span></a>            <span class="p">)</span>
</span><span id="L-1432"><a href="#L-1432"><span class="linenos">1432</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1433"><a href="#L-1433"><span class="linenos">1433</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_quadratic_coefficient</span><span class="p">(</span>
</span><span id="L-1434"><a href="#L-1434"><span class="linenos">1434</span></a>                <span class="n">key</span><span class="o">.</span><span class="n">first_var</span><span class="p">,</span>
</span><span id="L-1435"><a href="#L-1435"><span class="linenos">1435</span></a>                <span class="n">key</span><span class="o">.</span><span class="n">second_var</span><span class="p">,</span>
</span><span id="L-1436"><a href="#L-1436"><span class="linenos">1436</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">get_quadratic_coefficient</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">first_var</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">second_var</span><span class="p">)</span>
</span><span id="L-1437"><a href="#L-1437"><span class="linenos">1437</span></a>                <span class="o">+</span> <span class="n">coefficient</span><span class="p">,</span>
</span><span id="L-1438"><a href="#L-1438"><span class="linenos">1438</span></a>            <span class="p">)</span>
</span><span id="L-1439"><a href="#L-1439"><span class="linenos">1439</span></a>
</span><span id="L-1440"><a href="#L-1440"><span class="linenos">1440</span></a>    <span class="k">def</span> <span class="nf">set_quadratic_coefficient</span><span class="p">(</span>
</span><span id="L-1441"><a href="#L-1441"><span class="linenos">1441</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">first_variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">second_variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">coef</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-1442"><a href="#L-1442"><span class="linenos">1442</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1443"><a href="#L-1443"><span class="linenos">1443</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">first_variable</span><span class="p">)</span>
</span><span id="L-1444"><a href="#L-1444"><span class="linenos">1444</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">second_variable</span><span class="p">)</span>
</span><span id="L-1445"><a href="#L-1445"><span class="linenos">1445</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_quadratic_objective_coefficient</span><span class="p">(</span>
</span><span id="L-1446"><a href="#L-1446"><span class="linenos">1446</span></a>            <span class="n">first_variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">second_variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">coef</span>
</span><span id="L-1447"><a href="#L-1447"><span class="linenos">1447</span></a>        <span class="p">)</span>
</span><span id="L-1448"><a href="#L-1448"><span class="linenos">1448</span></a>
</span><span id="L-1449"><a href="#L-1449"><span class="linenos">1449</span></a>    <span class="k">def</span> <span class="nf">get_quadratic_coefficient</span><span class="p">(</span>
</span><span id="L-1450"><a href="#L-1450"><span class="linenos">1450</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">first_variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">second_variable</span><span class="p">:</span> <span class="n">Variable</span>
</span><span id="L-1451"><a href="#L-1451"><span class="linenos">1451</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-1452"><a href="#L-1452"><span class="linenos">1452</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">first_variable</span><span class="p">)</span>
</span><span id="L-1453"><a href="#L-1453"><span class="linenos">1453</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">second_variable</span><span class="p">)</span>
</span><span id="L-1454"><a href="#L-1454"><span class="linenos">1454</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_quadratic_objective_coefficient</span><span class="p">(</span>
</span><span id="L-1455"><a href="#L-1455"><span class="linenos">1455</span></a>            <span class="n">first_variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">second_variable</span><span class="o">.</span><span class="n">id</span>
</span><span id="L-1456"><a href="#L-1456"><span class="linenos">1456</span></a>        <span class="p">)</span>
</span><span id="L-1457"><a href="#L-1457"><span class="linenos">1457</span></a>
</span><span id="L-1458"><a href="#L-1458"><span class="linenos">1458</span></a>    <span class="k">def</span> <span class="nf">quadratic_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">QuadraticTerm</span><span class="p">]:</span>
</span><span id="L-1459"><a href="#L-1459"><span class="linenos">1459</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields quadratic terms with nonzero objective coefficient in undefined order.&quot;&quot;&quot;</span>
</span><span id="L-1460"><a href="#L-1460"><span class="linenos">1460</span></a>        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">quadratic_objective_terms</span><span class="p">()</span>
</span><span id="L-1461"><a href="#L-1461"><span class="linenos">1461</span></a>
</span><span id="L-1462"><a href="#L-1462"><span class="linenos">1462</span></a>    <span class="k">def</span> <span class="nf">as_linear_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearExpression</span><span class="p">:</span>
</span><span id="L-1463"><a href="#L-1463"><span class="linenos">1463</span></a>        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">()):</span>
</span><span id="L-1464"><a href="#L-1464"><span class="linenos">1464</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Cannot get a quadratic objective as a linear expression&quot;</span><span class="p">)</span>
</span><span id="L-1465"><a href="#L-1465"><span class="linenos">1465</span></a>        <span class="k">return</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">+</span> <span class="n">LinearSum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linear_terms</span><span class="p">()))</span>
</span><span id="L-1466"><a href="#L-1466"><span class="linenos">1466</span></a>
</span><span id="L-1467"><a href="#L-1467"><span class="linenos">1467</span></a>    <span class="k">def</span> <span class="nf">as_quadratic_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QuadraticExpression</span><span class="p">:</span>
</span><span id="L-1468"><a href="#L-1468"><span class="linenos">1468</span></a>        <span class="k">return</span> <span class="n">as_flat_quadratic_expression</span><span class="p">(</span>
</span><span id="L-1469"><a href="#L-1469"><span class="linenos">1469</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">offset</span>
</span><span id="L-1470"><a href="#L-1470"><span class="linenos">1470</span></a>            <span class="o">+</span> <span class="n">LinearSum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linear_terms</span><span class="p">())</span>
</span><span id="L-1471"><a href="#L-1471"><span class="linenos">1471</span></a>            <span class="o">+</span> <span class="n">QuadraticSum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">())</span>
</span><span id="L-1472"><a href="#L-1472"><span class="linenos">1472</span></a>        <span class="p">)</span>
</span><span id="L-1473"><a href="#L-1473"><span class="linenos">1473</span></a>
</span><span id="L-1474"><a href="#L-1474"><span class="linenos">1474</span></a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1475"><a href="#L-1475"><span class="linenos">1475</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clears objective coefficients and offset. Does not change direction.&quot;&quot;&quot;</span>
</span><span id="L-1476"><a href="#L-1476"><span class="linenos">1476</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">clear_objective</span><span class="p">()</span>
</span><span id="L-1477"><a href="#L-1477"><span class="linenos">1477</span></a>
</span><span id="L-1478"><a href="#L-1478"><span class="linenos">1478</span></a>
</span><span id="L-1479"><a href="#L-1479"><span class="linenos">1479</span></a><span class="k">class</span> <span class="nc">LinearConstraintMatrixEntry</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="L-1480"><a href="#L-1480"><span class="linenos">1480</span></a>    <span class="n">linear_constraint</span><span class="p">:</span> <span class="n">LinearConstraint</span>
</span><span id="L-1481"><a href="#L-1481"><span class="linenos">1481</span></a>    <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span>
</span><span id="L-1482"><a href="#L-1482"><span class="linenos">1482</span></a>    <span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-1483"><a href="#L-1483"><span class="linenos">1483</span></a>
</span><span id="L-1484"><a href="#L-1484"><span class="linenos">1484</span></a>
</span><span id="L-1485"><a href="#L-1485"><span class="linenos">1485</span></a><span class="k">class</span> <span class="nc">UpdateTracker</span><span class="p">:</span>
</span><span id="L-1486"><a href="#L-1486"><span class="linenos">1486</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tracks updates to an optimization model from a ModelStorage.</span>
</span><span id="L-1487"><a href="#L-1487"><span class="linenos">1487</span></a>
</span><span id="L-1488"><a href="#L-1488"><span class="linenos">1488</span></a><span class="sd">    Do not instantiate directly, instead create through</span>
</span><span id="L-1489"><a href="#L-1489"><span class="linenos">1489</span></a><span class="sd">    ModelStorage.add_update_tracker().</span>
</span><span id="L-1490"><a href="#L-1490"><span class="linenos">1490</span></a>
</span><span id="L-1491"><a href="#L-1491"><span class="linenos">1491</span></a><span class="sd">    Querying an UpdateTracker after calling Model.remove_update_tracker will</span>
</span><span id="L-1492"><a href="#L-1492"><span class="linenos">1492</span></a><span class="sd">    result in a model_storage.UsedUpdateTrackerAfterRemovalError.</span>
</span><span id="L-1493"><a href="#L-1493"><span class="linenos">1493</span></a>
</span><span id="L-1494"><a href="#L-1494"><span class="linenos">1494</span></a><span class="sd">    Example:</span>
</span><span id="L-1495"><a href="#L-1495"><span class="linenos">1495</span></a><span class="sd">      mod = Model()</span>
</span><span id="L-1496"><a href="#L-1496"><span class="linenos">1496</span></a><span class="sd">      x = mod.add_variable(0.0, 1.0, True, &#39;x&#39;)</span>
</span><span id="L-1497"><a href="#L-1497"><span class="linenos">1497</span></a><span class="sd">      y = mod.add_variable(0.0, 1.0, True, &#39;y&#39;)</span>
</span><span id="L-1498"><a href="#L-1498"><span class="linenos">1498</span></a><span class="sd">      tracker = mod.add_update_tracker()</span>
</span><span id="L-1499"><a href="#L-1499"><span class="linenos">1499</span></a><span class="sd">      mod.set_variable_ub(x, 3.0)</span>
</span><span id="L-1500"><a href="#L-1500"><span class="linenos">1500</span></a><span class="sd">      tracker.export_update()</span>
</span><span id="L-1501"><a href="#L-1501"><span class="linenos">1501</span></a><span class="sd">        =&gt; &quot;variable_updates: {upper_bounds: {ids: [0], values[3.0] }&quot;</span>
</span><span id="L-1502"><a href="#L-1502"><span class="linenos">1502</span></a><span class="sd">      mod.set_variable_ub(y, 2.0)</span>
</span><span id="L-1503"><a href="#L-1503"><span class="linenos">1503</span></a><span class="sd">      tracker.export_update()</span>
</span><span id="L-1504"><a href="#L-1504"><span class="linenos">1504</span></a><span class="sd">        =&gt; &quot;variable_updates: {upper_bounds: {ids: [0, 1], values[3.0, 2.0] }&quot;</span>
</span><span id="L-1505"><a href="#L-1505"><span class="linenos">1505</span></a><span class="sd">      tracker.advance_checkpoint()</span>
</span><span id="L-1506"><a href="#L-1506"><span class="linenos">1506</span></a><span class="sd">      tracker.export_update()</span>
</span><span id="L-1507"><a href="#L-1507"><span class="linenos">1507</span></a><span class="sd">        =&gt; None</span>
</span><span id="L-1508"><a href="#L-1508"><span class="linenos">1508</span></a><span class="sd">      mod.set_variable_ub(y, 4.0)</span>
</span><span id="L-1509"><a href="#L-1509"><span class="linenos">1509</span></a><span class="sd">      tracker.export_update()</span>
</span><span id="L-1510"><a href="#L-1510"><span class="linenos">1510</span></a><span class="sd">        =&gt; &quot;variable_updates: {upper_bounds: {ids: [1], values[4.0] }&quot;</span>
</span><span id="L-1511"><a href="#L-1511"><span class="linenos">1511</span></a><span class="sd">      tracker.advance_checkpoint()</span>
</span><span id="L-1512"><a href="#L-1512"><span class="linenos">1512</span></a><span class="sd">      mod.remove_update_tracker(tracker)</span>
</span><span id="L-1513"><a href="#L-1513"><span class="linenos">1513</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1514"><a href="#L-1514"><span class="linenos">1514</span></a>
</span><span id="L-1515"><a href="#L-1515"><span class="linenos">1515</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_update_tracker</span><span class="p">:</span> <span class="n">model_storage</span><span class="o">.</span><span class="n">StorageUpdateTracker</span><span class="p">):</span>
</span><span id="L-1516"><a href="#L-1516"><span class="linenos">1516</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do not invoke directly, use Model.add_update_tracker() instead.&quot;&quot;&quot;</span>
</span><span id="L-1517"><a href="#L-1517"><span class="linenos">1517</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage_update_tracker</span> <span class="o">=</span> <span class="n">storage_update_tracker</span>
</span><span id="L-1518"><a href="#L-1518"><span class="linenos">1518</span></a>
</span><span id="L-1519"><a href="#L-1519"><span class="linenos">1519</span></a>    <span class="k">def</span> <span class="nf">export_update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">model_update_pb2</span><span class="o">.</span><span class="n">ModelUpdateProto</span><span class="p">]:</span>
</span><span id="L-1520"><a href="#L-1520"><span class="linenos">1520</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns changes to the model since last call to checkpoint/creation.&quot;&quot;&quot;</span>
</span><span id="L-1521"><a href="#L-1521"><span class="linenos">1521</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_update_tracker</span><span class="o">.</span><span class="n">export_update</span><span class="p">()</span>
</span><span id="L-1522"><a href="#L-1522"><span class="linenos">1522</span></a>
</span><span id="L-1523"><a href="#L-1523"><span class="linenos">1523</span></a>    <span class="k">def</span> <span class="nf">advance_checkpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1524"><a href="#L-1524"><span class="linenos">1524</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Track changes to the model only after this function call.&quot;&quot;&quot;</span>
</span><span id="L-1525"><a href="#L-1525"><span class="linenos">1525</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_update_tracker</span><span class="o">.</span><span class="n">advance_checkpoint</span><span class="p">()</span>
</span><span id="L-1526"><a href="#L-1526"><span class="linenos">1526</span></a>
</span><span id="L-1527"><a href="#L-1527"><span class="linenos">1527</span></a>
</span><span id="L-1528"><a href="#L-1528"><span class="linenos">1528</span></a><span class="k">class</span> <span class="nc">Model</span><span class="p">:</span>
</span><span id="L-1529"><a href="#L-1529"><span class="linenos">1529</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An optimization model.</span>
</span><span id="L-1530"><a href="#L-1530"><span class="linenos">1530</span></a>
</span><span id="L-1531"><a href="#L-1531"><span class="linenos">1531</span></a><span class="sd">    The objective function of the model can be linear or quadratic, and some</span>
</span><span id="L-1532"><a href="#L-1532"><span class="linenos">1532</span></a><span class="sd">    solvers can only handle linear objective functions. For this reason Model has</span>
</span><span id="L-1533"><a href="#L-1533"><span class="linenos">1533</span></a><span class="sd">    three versions of all objective setting functions:</span>
</span><span id="L-1534"><a href="#L-1534"><span class="linenos">1534</span></a><span class="sd">      * A generic one (e.g. maximize()), which accepts linear or quadratic</span>
</span><span id="L-1535"><a href="#L-1535"><span class="linenos">1535</span></a><span class="sd">        expressions,</span>
</span><span id="L-1536"><a href="#L-1536"><span class="linenos">1536</span></a><span class="sd">      * a quadratic version (e.g. maximize_quadratic_objective()), which also</span>
</span><span id="L-1537"><a href="#L-1537"><span class="linenos">1537</span></a><span class="sd">        accepts linear or quadratic expressions and can be used to signal a</span>
</span><span id="L-1538"><a href="#L-1538"><span class="linenos">1538</span></a><span class="sd">        quadratic objective is possible, and</span>
</span><span id="L-1539"><a href="#L-1539"><span class="linenos">1539</span></a><span class="sd">      * a linear version (e.g. maximize_linear_objective()), which only accepts</span>
</span><span id="L-1540"><a href="#L-1540"><span class="linenos">1540</span></a><span class="sd">        linear expressions and can be used to avoid solve time errors for solvers</span>
</span><span id="L-1541"><a href="#L-1541"><span class="linenos">1541</span></a><span class="sd">        that do not accept quadratic objectives.</span>
</span><span id="L-1542"><a href="#L-1542"><span class="linenos">1542</span></a>
</span><span id="L-1543"><a href="#L-1543"><span class="linenos">1543</span></a><span class="sd">    Attributes:</span>
</span><span id="L-1544"><a href="#L-1544"><span class="linenos">1544</span></a><span class="sd">      name: A description of the problem, can be empty.</span>
</span><span id="L-1545"><a href="#L-1545"><span class="linenos">1545</span></a><span class="sd">      objective: A function to maximize or minimize.</span>
</span><span id="L-1546"><a href="#L-1546"><span class="linenos">1546</span></a><span class="sd">      storage: Implementation detail, do not access directly.</span>
</span><span id="L-1547"><a href="#L-1547"><span class="linenos">1547</span></a><span class="sd">      _variable_ids: Maps variable ids to Variable objects.</span>
</span><span id="L-1548"><a href="#L-1548"><span class="linenos">1548</span></a><span class="sd">      _linear_constraint_ids: Maps linear constraint ids to LinearConstraint</span>
</span><span id="L-1549"><a href="#L-1549"><span class="linenos">1549</span></a><span class="sd">        objects.</span>
</span><span id="L-1550"><a href="#L-1550"><span class="linenos">1550</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1551"><a href="#L-1551"><span class="linenos">1551</span></a>
</span><span id="L-1552"><a href="#L-1552"><span class="linenos">1552</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;storage&quot;</span><span class="p">,</span> <span class="s2">&quot;_variable_ids&quot;</span><span class="p">,</span> <span class="s2">&quot;_linear_constraint_ids&quot;</span><span class="p">,</span> <span class="s2">&quot;_objective&quot;</span>
</span><span id="L-1553"><a href="#L-1553"><span class="linenos">1553</span></a>
</span><span id="L-1554"><a href="#L-1554"><span class="linenos">1554</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-1555"><a href="#L-1555"><span class="linenos">1555</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-1556"><a href="#L-1556"><span class="linenos">1556</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="L-1557"><a href="#L-1557"><span class="linenos">1557</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="L-1558"><a href="#L-1558"><span class="linenos">1558</span></a>        <span class="n">storage_class</span><span class="p">:</span> <span class="n">StorageClass</span> <span class="o">=</span> <span class="n">hash_model_storage</span><span class="o">.</span><span class="n">HashModelStorage</span><span class="p">,</span>
</span><span id="L-1559"><a href="#L-1559"><span class="linenos">1559</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1560"><a href="#L-1560"><span class="linenos">1560</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span> <span class="o">=</span> <span class="n">storage_class</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-1561"><a href="#L-1561"><span class="linenos">1561</span></a>        <span class="c1"># Weak references are used to eliminate reference cycles (so that Model will</span>
</span><span id="L-1562"><a href="#L-1562"><span class="linenos">1562</span></a>        <span class="c1"># be destroyed when we reach zero references, instead of relying on GC cycle</span>
</span><span id="L-1563"><a href="#L-1563"><span class="linenos">1563</span></a>        <span class="c1"># detection). Do not access a variable or constraint from these maps</span>
</span><span id="L-1564"><a href="#L-1564"><span class="linenos">1564</span></a>        <span class="c1"># directly, as they may no longer exist, use _get_or_make_variable() and</span>
</span><span id="L-1565"><a href="#L-1565"><span class="linenos">1565</span></a>        <span class="c1"># _get_or_make_linear_constraint() defined below instead.</span>
</span><span id="L-1566"><a href="#L-1566"><span class="linenos">1566</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_variable_ids</span><span class="p">:</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakValueDictionary</span><span class="p">[</span>
</span><span id="L-1567"><a href="#L-1567"><span class="linenos">1567</span></a>            <span class="nb">int</span><span class="p">,</span> <span class="n">Variable</span>
</span><span id="L-1568"><a href="#L-1568"><span class="linenos">1568</span></a>        <span class="p">]</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakValueDictionary</span><span class="p">()</span>
</span><span id="L-1569"><a href="#L-1569"><span class="linenos">1569</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_linear_constraint_ids</span><span class="p">:</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakValueDictionary</span><span class="p">[</span>
</span><span id="L-1570"><a href="#L-1570"><span class="linenos">1570</span></a>            <span class="nb">int</span><span class="p">,</span> <span class="n">LinearConstraint</span>
</span><span id="L-1571"><a href="#L-1571"><span class="linenos">1571</span></a>        <span class="p">]</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakValueDictionary</span><span class="p">()</span>
</span><span id="L-1572"><a href="#L-1572"><span class="linenos">1572</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="p">:</span> <span class="n">Objective</span> <span class="o">=</span> <span class="n">Objective</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1573"><a href="#L-1573"><span class="linenos">1573</span></a>
</span><span id="L-1574"><a href="#L-1574"><span class="linenos">1574</span></a>    <span class="nd">@property</span>
</span><span id="L-1575"><a href="#L-1575"><span class="linenos">1575</span></a>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-1576"><a href="#L-1576"><span class="linenos">1576</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-1577"><a href="#L-1577"><span class="linenos">1577</span></a>
</span><span id="L-1578"><a href="#L-1578"><span class="linenos">1578</span></a>    <span class="nd">@property</span>
</span><span id="L-1579"><a href="#L-1579"><span class="linenos">1579</span></a>    <span class="k">def</span> <span class="nf">objective</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Objective</span><span class="p">:</span>
</span><span id="L-1580"><a href="#L-1580"><span class="linenos">1580</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span>
</span><span id="L-1581"><a href="#L-1581"><span class="linenos">1581</span></a>
</span><span id="L-1582"><a href="#L-1582"><span class="linenos">1582</span></a>    <span class="k">def</span> <span class="nf">add_variable</span><span class="p">(</span>
</span><span id="L-1583"><a href="#L-1583"><span class="linenos">1583</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-1584"><a href="#L-1584"><span class="linenos">1584</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="L-1585"><a href="#L-1585"><span class="linenos">1585</span></a>        <span class="n">lb</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span>
</span><span id="L-1586"><a href="#L-1586"><span class="linenos">1586</span></a>        <span class="n">ub</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span>
</span><span id="L-1587"><a href="#L-1587"><span class="linenos">1587</span></a>        <span class="n">is_integer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-1588"><a href="#L-1588"><span class="linenos">1588</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="L-1589"><a href="#L-1589"><span class="linenos">1589</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="L-1590"><a href="#L-1590"><span class="linenos">1590</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a decision variable to the optimization model.</span>
</span><span id="L-1591"><a href="#L-1591"><span class="linenos">1591</span></a>
</span><span id="L-1592"><a href="#L-1592"><span class="linenos">1592</span></a><span class="sd">        Args:</span>
</span><span id="L-1593"><a href="#L-1593"><span class="linenos">1593</span></a><span class="sd">          lb: The new variable must take at least this value (a lower bound).</span>
</span><span id="L-1594"><a href="#L-1594"><span class="linenos">1594</span></a><span class="sd">          ub: The new variable must be at most this value (an upper bound).</span>
</span><span id="L-1595"><a href="#L-1595"><span class="linenos">1595</span></a><span class="sd">          is_integer: Indicates if the variable can only take integer values</span>
</span><span id="L-1596"><a href="#L-1596"><span class="linenos">1596</span></a><span class="sd">            (otherwise, the variable can take any continuous value).</span>
</span><span id="L-1597"><a href="#L-1597"><span class="linenos">1597</span></a><span class="sd">          name: For debugging purposes only, but nonempty names must be distinct.</span>
</span><span id="L-1598"><a href="#L-1598"><span class="linenos">1598</span></a>
</span><span id="L-1599"><a href="#L-1599"><span class="linenos">1599</span></a><span class="sd">        Returns:</span>
</span><span id="L-1600"><a href="#L-1600"><span class="linenos">1600</span></a><span class="sd">          A reference to the new decision variable.</span>
</span><span id="L-1601"><a href="#L-1601"><span class="linenos">1601</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1602"><a href="#L-1602"><span class="linenos">1602</span></a>        <span class="n">variable_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">is_integer</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="L-1603"><a href="#L-1603"><span class="linenos">1603</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">Variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_id</span><span class="p">)</span>
</span><span id="L-1604"><a href="#L-1604"><span class="linenos">1604</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_variable_ids</span><span class="p">[</span><span class="n">variable_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="L-1605"><a href="#L-1605"><span class="linenos">1605</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1606"><a href="#L-1606"><span class="linenos">1606</span></a>
</span><span id="L-1607"><a href="#L-1607"><span class="linenos">1607</span></a>    <span class="k">def</span> <span class="nf">add_integer_variable</span><span class="p">(</span>
</span><span id="L-1608"><a href="#L-1608"><span class="linenos">1608</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">lb</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">ub</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-1609"><a href="#L-1609"><span class="linenos">1609</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="L-1610"><a href="#L-1610"><span class="linenos">1610</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">is_integer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-1611"><a href="#L-1611"><span class="linenos">1611</span></a>
</span><span id="L-1612"><a href="#L-1612"><span class="linenos">1612</span></a>    <span class="k">def</span> <span class="nf">add_binary_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="L-1613"><a href="#L-1613"><span class="linenos">1613</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="n">lb</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">is_integer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-1614"><a href="#L-1614"><span class="linenos">1614</span></a>
</span><span id="L-1615"><a href="#L-1615"><span class="linenos">1615</span></a>    <span class="k">def</span> <span class="nf">get_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="L-1616"><a href="#L-1616"><span class="linenos">1616</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the Variable for the id var_id, or raises KeyError.&quot;&quot;&quot;</span>
</span><span id="L-1617"><a href="#L-1617"><span class="linenos">1617</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">variable_exists</span><span class="p">(</span><span class="n">var_id</span><span class="p">):</span>
</span><span id="L-1618"><a href="#L-1618"><span class="linenos">1618</span></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;variable does not exist with id </span><span class="si">{</span><span class="n">var_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-1619"><a href="#L-1619"><span class="linenos">1619</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">var_id</span><span class="p">)</span>
</span><span id="L-1620"><a href="#L-1620"><span class="linenos">1620</span></a>
</span><span id="L-1621"><a href="#L-1621"><span class="linenos">1621</span></a>    <span class="k">def</span> <span class="nf">delete_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1622"><a href="#L-1622"><span class="linenos">1622</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="L-1623"><a href="#L-1623"><span class="linenos">1623</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">delete_variable</span><span class="p">(</span><span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="L-1624"><a href="#L-1624"><span class="linenos">1624</span></a>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_variable_ids</span><span class="p">[</span><span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="L-1625"><a href="#L-1625"><span class="linenos">1625</span></a>
</span><span id="L-1626"><a href="#L-1626"><span class="linenos">1626</span></a>    <span class="k">def</span> <span class="nf">variables</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Variable</span><span class="p">]:</span>
</span><span id="L-1627"><a href="#L-1627"><span class="linenos">1627</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the variables in the order of creation.&quot;&quot;&quot;</span>
</span><span id="L-1628"><a href="#L-1628"><span class="linenos">1628</span></a>        <span class="k">for</span> <span class="n">var_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variables</span><span class="p">():</span>
</span><span id="L-1629"><a href="#L-1629"><span class="linenos">1629</span></a>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">var_id</span><span class="p">)</span>
</span><span id="L-1630"><a href="#L-1630"><span class="linenos">1630</span></a>
</span><span id="L-1631"><a href="#L-1631"><span class="linenos">1631</span></a>    <span class="k">def</span> <span class="nf">maximize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1632"><a href="#L-1632"><span class="linenos">1632</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to maximize the provided expression `objective`.&quot;&quot;&quot;</span>
</span><span id="L-1633"><a href="#L-1633"><span class="linenos">1633</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-1634"><a href="#L-1634"><span class="linenos">1634</span></a>
</span><span id="L-1635"><a href="#L-1635"><span class="linenos">1635</span></a>    <span class="k">def</span> <span class="nf">maximize_linear_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1636"><a href="#L-1636"><span class="linenos">1636</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to maximize the provided linear expression `objective`.&quot;&quot;&quot;</span>
</span><span id="L-1637"><a href="#L-1637"><span class="linenos">1637</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-1638"><a href="#L-1638"><span class="linenos">1638</span></a>
</span><span id="L-1639"><a href="#L-1639"><span class="linenos">1639</span></a>    <span class="k">def</span> <span class="nf">maximize_quadratic_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1640"><a href="#L-1640"><span class="linenos">1640</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to maximize the provided quadratic expression `objective`.&quot;&quot;&quot;</span>
</span><span id="L-1641"><a href="#L-1641"><span class="linenos">1641</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_quadratic_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-1642"><a href="#L-1642"><span class="linenos">1642</span></a>
</span><span id="L-1643"><a href="#L-1643"><span class="linenos">1643</span></a>    <span class="k">def</span> <span class="nf">minimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1644"><a href="#L-1644"><span class="linenos">1644</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to minimize the provided expression `objective`.&quot;&quot;&quot;</span>
</span><span id="L-1645"><a href="#L-1645"><span class="linenos">1645</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1646"><a href="#L-1646"><span class="linenos">1646</span></a>
</span><span id="L-1647"><a href="#L-1647"><span class="linenos">1647</span></a>    <span class="k">def</span> <span class="nf">minimize_linear_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1648"><a href="#L-1648"><span class="linenos">1648</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to minimize the provided linear expression `objective`.&quot;&quot;&quot;</span>
</span><span id="L-1649"><a href="#L-1649"><span class="linenos">1649</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1650"><a href="#L-1650"><span class="linenos">1650</span></a>
</span><span id="L-1651"><a href="#L-1651"><span class="linenos">1651</span></a>    <span class="k">def</span> <span class="nf">minimize_quadratic_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1652"><a href="#L-1652"><span class="linenos">1652</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to minimize the provided quadratic expression `objective`.&quot;&quot;&quot;</span>
</span><span id="L-1653"><a href="#L-1653"><span class="linenos">1653</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_quadratic_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1654"><a href="#L-1654"><span class="linenos">1654</span></a>
</span><span id="L-1655"><a href="#L-1655"><span class="linenos">1655</span></a>    <span class="k">def</span> <span class="nf">set_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">is_maximize</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1656"><a href="#L-1656"><span class="linenos">1656</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to optimize the provided expression `objective`.&quot;&quot;&quot;</span>
</span><span id="L-1657"><a href="#L-1657"><span class="linenos">1657</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-1658"><a href="#L-1658"><span class="linenos">1658</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="n">is_maximize</span><span class="p">)</span>
</span><span id="L-1659"><a href="#L-1659"><span class="linenos">1659</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="L-1660"><a href="#L-1660"><span class="linenos">1660</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_quadratic_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="n">is_maximize</span><span class="p">)</span>
</span><span id="L-1661"><a href="#L-1661"><span class="linenos">1661</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1662"><a href="#L-1662"><span class="linenos">1662</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1663"><a href="#L-1663"><span class="linenos">1663</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="L-1664"><a href="#L-1664"><span class="linenos">1664</span></a>                <span class="sa">f</span><span class="s2">&quot;set_objective: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-1665"><a href="#L-1665"><span class="linenos">1665</span></a>            <span class="p">)</span>
</span><span id="L-1666"><a href="#L-1666"><span class="linenos">1666</span></a>
</span><span id="L-1667"><a href="#L-1667"><span class="linenos">1667</span></a>    <span class="k">def</span> <span class="nf">set_linear_objective</span><span class="p">(</span>
</span><span id="L-1668"><a href="#L-1668"><span class="linenos">1668</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">is_maximize</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="L-1669"><a href="#L-1669"><span class="linenos">1669</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1670"><a href="#L-1670"><span class="linenos">1670</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to optimize the provided linear expression `objective`.&quot;&quot;&quot;</span>
</span><span id="L-1671"><a href="#L-1671"><span class="linenos">1671</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-1672"><a href="#L-1672"><span class="linenos">1672</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1673"><a href="#L-1673"><span class="linenos">1673</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="L-1674"><a href="#L-1674"><span class="linenos">1674</span></a>                <span class="sa">f</span><span class="s2">&quot;set_linear_objective: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-1675"><a href="#L-1675"><span class="linenos">1675</span></a>            <span class="p">)</span>
</span><span id="L-1676"><a href="#L-1676"><span class="linenos">1676</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">clear_objective</span><span class="p">()</span>
</span><span id="L-1677"><a href="#L-1677"><span class="linenos">1677</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">is_maximize</span> <span class="o">=</span> <span class="n">is_maximize</span>
</span><span id="L-1678"><a href="#L-1678"><span class="linenos">1678</span></a>        <span class="n">objective_expr</span> <span class="o">=</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="L-1679"><a href="#L-1679"><span class="linenos">1679</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="L-1680"><a href="#L-1680"><span class="linenos">1680</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1681"><a href="#L-1681"><span class="linenos">1681</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">set_linear_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">)</span>
</span><span id="L-1682"><a href="#L-1682"><span class="linenos">1682</span></a>
</span><span id="L-1683"><a href="#L-1683"><span class="linenos">1683</span></a>    <span class="k">def</span> <span class="nf">set_quadratic_objective</span><span class="p">(</span>
</span><span id="L-1684"><a href="#L-1684"><span class="linenos">1684</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">is_maximize</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="L-1685"><a href="#L-1685"><span class="linenos">1685</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1686"><a href="#L-1686"><span class="linenos">1686</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to optimize the provided linear expression `objective`.&quot;&quot;&quot;</span>
</span><span id="L-1687"><a href="#L-1687"><span class="linenos">1687</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">QuadraticBase</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-1688"><a href="#L-1688"><span class="linenos">1688</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1689"><a href="#L-1689"><span class="linenos">1689</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="L-1690"><a href="#L-1690"><span class="linenos">1690</span></a>                <span class="sa">f</span><span class="s2">&quot;set_quadratic_objective: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-1691"><a href="#L-1691"><span class="linenos">1691</span></a>            <span class="p">)</span>
</span><span id="L-1692"><a href="#L-1692"><span class="linenos">1692</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">clear_objective</span><span class="p">()</span>
</span><span id="L-1693"><a href="#L-1693"><span class="linenos">1693</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">is_maximize</span> <span class="o">=</span> <span class="n">is_maximize</span>
</span><span id="L-1694"><a href="#L-1694"><span class="linenos">1694</span></a>        <span class="n">objective_expr</span> <span class="o">=</span> <span class="n">as_flat_quadratic_expression</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="L-1695"><a href="#L-1695"><span class="linenos">1695</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="L-1696"><a href="#L-1696"><span class="linenos">1696</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">linear_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1697"><a href="#L-1697"><span class="linenos">1697</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">set_linear_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">)</span>
</span><span id="L-1698"><a href="#L-1698"><span class="linenos">1698</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1699"><a href="#L-1699"><span class="linenos">1699</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">set_quadratic_coefficient</span><span class="p">(</span>
</span><span id="L-1700"><a href="#L-1700"><span class="linenos">1700</span></a>                <span class="n">key</span><span class="o">.</span><span class="n">first_var</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">second_var</span><span class="p">,</span> <span class="n">coefficient</span>
</span><span id="L-1701"><a href="#L-1701"><span class="linenos">1701</span></a>            <span class="p">)</span>
</span><span id="L-1702"><a href="#L-1702"><span class="linenos">1702</span></a>
</span><span id="L-1703"><a href="#L-1703"><span class="linenos">1703</span></a>    <span class="c1"># TODO(b/227214976): Update the note below and link to pytype bug number.</span>
</span><span id="L-1704"><a href="#L-1704"><span class="linenos">1704</span></a>    <span class="c1"># Note: bounded_expr&#39;s type includes bool only as a workaround to a pytype</span>
</span><span id="L-1705"><a href="#L-1705"><span class="linenos">1705</span></a>    <span class="c1"># issue. Passing a bool for bounded_expr will raise an error in runtime.</span>
</span><span id="L-1706"><a href="#L-1706"><span class="linenos">1706</span></a>    <span class="k">def</span> <span class="nf">add_linear_constraint</span><span class="p">(</span>
</span><span id="L-1707"><a href="#L-1707"><span class="linenos">1707</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-1708"><a href="#L-1708"><span class="linenos">1708</span></a>        <span class="n">bounded_expr</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">BoundedLinearTypes</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1709"><a href="#L-1709"><span class="linenos">1709</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="L-1710"><a href="#L-1710"><span class="linenos">1710</span></a>        <span class="n">lb</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1711"><a href="#L-1711"><span class="linenos">1711</span></a>        <span class="n">ub</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1712"><a href="#L-1712"><span class="linenos">1712</span></a>        <span class="n">expr</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">LinearTypes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1713"><a href="#L-1713"><span class="linenos">1713</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="L-1714"><a href="#L-1714"><span class="linenos">1714</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearConstraint</span><span class="p">:</span>
</span><span id="L-1715"><a href="#L-1715"><span class="linenos">1715</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a linear constraint to the optimization model.</span>
</span><span id="L-1716"><a href="#L-1716"><span class="linenos">1716</span></a>
</span><span id="L-1717"><a href="#L-1717"><span class="linenos">1717</span></a><span class="sd">        The simplest way to specify the constraint is by passing a one-sided or</span>
</span><span id="L-1718"><a href="#L-1718"><span class="linenos">1718</span></a><span class="sd">        two-sided linear inequality as in:</span>
</span><span id="L-1719"><a href="#L-1719"><span class="linenos">1719</span></a><span class="sd">          * add_linear_constraint(x + y + 1.0 &lt;= 2.0),</span>
</span><span id="L-1720"><a href="#L-1720"><span class="linenos">1720</span></a><span class="sd">          * add_linear_constraint(x + y &gt;= 2.0), or</span>
</span><span id="L-1721"><a href="#L-1721"><span class="linenos">1721</span></a><span class="sd">          * add_linear_constraint((1.0 &lt;= x + y) &lt;= 2.0).</span>
</span><span id="L-1722"><a href="#L-1722"><span class="linenos">1722</span></a>
</span><span id="L-1723"><a href="#L-1723"><span class="linenos">1723</span></a><span class="sd">        Note the extra parenthesis for two-sided linear inequalities, which is</span>
</span><span id="L-1724"><a href="#L-1724"><span class="linenos">1724</span></a><span class="sd">        required due to some language limitations (see</span>
</span><span id="L-1725"><a href="#L-1725"><span class="linenos">1725</span></a><span class="sd">        https://peps.python.org/pep-0335/ and https://peps.python.org/pep-0535/).</span>
</span><span id="L-1726"><a href="#L-1726"><span class="linenos">1726</span></a><span class="sd">        If the parenthesis are omitted, a TypeError will be raised explaining the</span>
</span><span id="L-1727"><a href="#L-1727"><span class="linenos">1727</span></a><span class="sd">        issue (if this error was not raised the first inequality would have been</span>
</span><span id="L-1728"><a href="#L-1728"><span class="linenos">1728</span></a><span class="sd">        silently ignored because of the noted language limitations).</span>
</span><span id="L-1729"><a href="#L-1729"><span class="linenos">1729</span></a>
</span><span id="L-1730"><a href="#L-1730"><span class="linenos">1730</span></a><span class="sd">        The second way to specify the constraint is by setting lb, ub, and/o expr as</span>
</span><span id="L-1731"><a href="#L-1731"><span class="linenos">1731</span></a><span class="sd">        in:</span>
</span><span id="L-1732"><a href="#L-1732"><span class="linenos">1732</span></a><span class="sd">          * add_linear_constraint(expr=x + y + 1.0, ub=2.0),</span>
</span><span id="L-1733"><a href="#L-1733"><span class="linenos">1733</span></a><span class="sd">          * add_linear_constraint(expr=x + y, lb=2.0),</span>
</span><span id="L-1734"><a href="#L-1734"><span class="linenos">1734</span></a><span class="sd">          * add_linear_constraint(expr=x + y, lb=1.0, ub=2.0), or</span>
</span><span id="L-1735"><a href="#L-1735"><span class="linenos">1735</span></a><span class="sd">          * add_linear_constraint(lb=1.0).</span>
</span><span id="L-1736"><a href="#L-1736"><span class="linenos">1736</span></a><span class="sd">        Omitting lb is equivalent to setting it to -math.inf and omiting ub is</span>
</span><span id="L-1737"><a href="#L-1737"><span class="linenos">1737</span></a><span class="sd">        equivalent to setting it to math.inf.</span>
</span><span id="L-1738"><a href="#L-1738"><span class="linenos">1738</span></a>
</span><span id="L-1739"><a href="#L-1739"><span class="linenos">1739</span></a><span class="sd">        These two alternatives are exclusive and a combined call like:</span>
</span><span id="L-1740"><a href="#L-1740"><span class="linenos">1740</span></a><span class="sd">          * add_linear_constraint(x + y &lt;= 2.0, lb=1.0), or</span>
</span><span id="L-1741"><a href="#L-1741"><span class="linenos">1741</span></a><span class="sd">          * add_linear_constraint(x + y &lt;= 2.0, ub=math.inf)</span>
</span><span id="L-1742"><a href="#L-1742"><span class="linenos">1742</span></a><span class="sd">        will raise a ValueError. A ValueError is also raised if expr&#39;s offset is</span>
</span><span id="L-1743"><a href="#L-1743"><span class="linenos">1743</span></a><span class="sd">        infinite.</span>
</span><span id="L-1744"><a href="#L-1744"><span class="linenos">1744</span></a>
</span><span id="L-1745"><a href="#L-1745"><span class="linenos">1745</span></a><span class="sd">        Args:</span>
</span><span id="L-1746"><a href="#L-1746"><span class="linenos">1746</span></a><span class="sd">          bounded_expr: a linear inequality describing the constraint. Cannot be</span>
</span><span id="L-1747"><a href="#L-1747"><span class="linenos">1747</span></a><span class="sd">            specified together with lb, ub, or expr.</span>
</span><span id="L-1748"><a href="#L-1748"><span class="linenos">1748</span></a><span class="sd">          lb: The constraint&#39;s lower bound if bounded_expr is omitted (if both</span>
</span><span id="L-1749"><a href="#L-1749"><span class="linenos">1749</span></a><span class="sd">            bounder_expr and lb are omitted, the lower bound is -math.inf).</span>
</span><span id="L-1750"><a href="#L-1750"><span class="linenos">1750</span></a><span class="sd">          ub: The constraint&#39;s upper bound if bounded_expr is omitted (if both</span>
</span><span id="L-1751"><a href="#L-1751"><span class="linenos">1751</span></a><span class="sd">            bounder_expr and ub are omitted, the upper bound is math.inf).</span>
</span><span id="L-1752"><a href="#L-1752"><span class="linenos">1752</span></a><span class="sd">          expr: The constraint&#39;s linear expression if bounded_expr is omitted.</span>
</span><span id="L-1753"><a href="#L-1753"><span class="linenos">1753</span></a><span class="sd">          name: For debugging purposes only, but nonempty names must be distinct.</span>
</span><span id="L-1754"><a href="#L-1754"><span class="linenos">1754</span></a>
</span><span id="L-1755"><a href="#L-1755"><span class="linenos">1755</span></a><span class="sd">        Returns:</span>
</span><span id="L-1756"><a href="#L-1756"><span class="linenos">1756</span></a><span class="sd">          A reference to the new linear constraint.</span>
</span><span id="L-1757"><a href="#L-1757"><span class="linenos">1757</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1758"><a href="#L-1758"><span class="linenos">1758</span></a>        <span class="n">normalized_inequality</span> <span class="o">=</span> <span class="n">as_normalized_linear_inequality</span><span class="p">(</span>
</span><span id="L-1759"><a href="#L-1759"><span class="linenos">1759</span></a>            <span class="n">bounded_expr</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="n">expr</span>
</span><span id="L-1760"><a href="#L-1760"><span class="linenos">1760</span></a>        <span class="p">)</span>
</span><span id="L-1761"><a href="#L-1761"><span class="linenos">1761</span></a>        <span class="n">lin_con_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">add_linear_constraint</span><span class="p">(</span>
</span><span id="L-1762"><a href="#L-1762"><span class="linenos">1762</span></a>            <span class="n">normalized_inequality</span><span class="o">.</span><span class="n">lb</span><span class="p">,</span> <span class="n">normalized_inequality</span><span class="o">.</span><span class="n">ub</span><span class="p">,</span> <span class="n">name</span>
</span><span id="L-1763"><a href="#L-1763"><span class="linenos">1763</span></a>        <span class="p">)</span>
</span><span id="L-1764"><a href="#L-1764"><span class="linenos">1764</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">LinearConstraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin_con_id</span><span class="p">)</span>
</span><span id="L-1765"><a href="#L-1765"><span class="linenos">1765</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_linear_constraint_ids</span><span class="p">[</span><span class="n">lin_con_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="L-1766"><a href="#L-1766"><span class="linenos">1766</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">normalized_inequality</span><span class="o">.</span><span class="n">coefficients</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-1767"><a href="#L-1767"><span class="linenos">1767</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">set_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">)</span>
</span><span id="L-1768"><a href="#L-1768"><span class="linenos">1768</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1769"><a href="#L-1769"><span class="linenos">1769</span></a>
</span><span id="L-1770"><a href="#L-1770"><span class="linenos">1770</span></a>    <span class="k">def</span> <span class="nf">get_linear_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin_con_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearConstraint</span><span class="p">:</span>
</span><span id="L-1771"><a href="#L-1771"><span class="linenos">1771</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the LinearConstraint for the id lin_con_id.&quot;&quot;&quot;</span>
</span><span id="L-1772"><a href="#L-1772"><span class="linenos">1772</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">linear_constraint_exists</span><span class="p">(</span><span class="n">lin_con_id</span><span class="p">):</span>
</span><span id="L-1773"><a href="#L-1773"><span class="linenos">1773</span></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;linear constraint does not exist with id </span><span class="si">{</span><span class="n">lin_con_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-1774"><a href="#L-1774"><span class="linenos">1774</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_linear_constraint</span><span class="p">(</span><span class="n">lin_con_id</span><span class="p">)</span>
</span><span id="L-1775"><a href="#L-1775"><span class="linenos">1775</span></a>
</span><span id="L-1776"><a href="#L-1776"><span class="linenos">1776</span></a>    <span class="k">def</span> <span class="nf">delete_linear_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_constraint</span><span class="p">:</span> <span class="n">LinearConstraint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1777"><a href="#L-1777"><span class="linenos">1777</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">linear_constraint</span><span class="p">)</span>
</span><span id="L-1778"><a href="#L-1778"><span class="linenos">1778</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">delete_linear_constraint</span><span class="p">(</span><span class="n">linear_constraint</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="L-1779"><a href="#L-1779"><span class="linenos">1779</span></a>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear_constraint_ids</span><span class="p">[</span><span class="n">linear_constraint</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="L-1780"><a href="#L-1780"><span class="linenos">1780</span></a>
</span><span id="L-1781"><a href="#L-1781"><span class="linenos">1781</span></a>    <span class="k">def</span> <span class="nf">linear_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearConstraint</span><span class="p">]:</span>
</span><span id="L-1782"><a href="#L-1782"><span class="linenos">1782</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the linear constraints in the order of creation.&quot;&quot;&quot;</span>
</span><span id="L-1783"><a href="#L-1783"><span class="linenos">1783</span></a>        <span class="k">for</span> <span class="n">lin_con_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraints</span><span class="p">():</span>
</span><span id="L-1784"><a href="#L-1784"><span class="linenos">1784</span></a>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_linear_constraint</span><span class="p">(</span><span class="n">lin_con_id</span><span class="p">)</span>
</span><span id="L-1785"><a href="#L-1785"><span class="linenos">1785</span></a>
</span><span id="L-1786"><a href="#L-1786"><span class="linenos">1786</span></a>    <span class="k">def</span> <span class="nf">row_nonzeros</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_constraint</span><span class="p">:</span> <span class="n">LinearConstraint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Variable</span><span class="p">]:</span>
</span><span id="L-1787"><a href="#L-1787"><span class="linenos">1787</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the variables with nonzero coefficient for this linear constraint.&quot;&quot;&quot;</span>
</span><span id="L-1788"><a href="#L-1788"><span class="linenos">1788</span></a>        <span class="k">for</span> <span class="n">var_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variables_for_linear_constraint</span><span class="p">(</span>
</span><span id="L-1789"><a href="#L-1789"><span class="linenos">1789</span></a>            <span class="n">linear_constraint</span><span class="o">.</span><span class="n">id</span>
</span><span id="L-1790"><a href="#L-1790"><span class="linenos">1790</span></a>        <span class="p">):</span>
</span><span id="L-1791"><a href="#L-1791"><span class="linenos">1791</span></a>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">var_id</span><span class="p">)</span>
</span><span id="L-1792"><a href="#L-1792"><span class="linenos">1792</span></a>
</span><span id="L-1793"><a href="#L-1793"><span class="linenos">1793</span></a>    <span class="k">def</span> <span class="nf">column_nonzeros</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearConstraint</span><span class="p">]:</span>
</span><span id="L-1794"><a href="#L-1794"><span class="linenos">1794</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the linear constraints with nonzero coefficient for this variable.&quot;&quot;&quot;</span>
</span><span id="L-1795"><a href="#L-1795"><span class="linenos">1795</span></a>        <span class="k">for</span> <span class="n">lin_con_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraints_with_variable</span><span class="p">(</span>
</span><span id="L-1796"><a href="#L-1796"><span class="linenos">1796</span></a>            <span class="n">variable</span><span class="o">.</span><span class="n">id</span>
</span><span id="L-1797"><a href="#L-1797"><span class="linenos">1797</span></a>        <span class="p">):</span>
</span><span id="L-1798"><a href="#L-1798"><span class="linenos">1798</span></a>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_linear_constraint</span><span class="p">(</span><span class="n">lin_con_id</span><span class="p">)</span>
</span><span id="L-1799"><a href="#L-1799"><span class="linenos">1799</span></a>
</span><span id="L-1800"><a href="#L-1800"><span class="linenos">1800</span></a>    <span class="k">def</span> <span class="nf">linear_objective_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearTerm</span><span class="p">]:</span>
</span><span id="L-1801"><a href="#L-1801"><span class="linenos">1801</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields variable coefficient pairs for variables with nonzero objective coefficient in undefined order.&quot;&quot;&quot;</span>
</span><span id="L-1802"><a href="#L-1802"><span class="linenos">1802</span></a>        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_objective_coefficients</span><span class="p">():</span>
</span><span id="L-1803"><a href="#L-1803"><span class="linenos">1803</span></a>            <span class="k">yield</span> <span class="n">LinearTerm</span><span class="p">(</span>
</span><span id="L-1804"><a href="#L-1804"><span class="linenos">1804</span></a>                <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">variable_id</span><span class="p">),</span>
</span><span id="L-1805"><a href="#L-1805"><span class="linenos">1805</span></a>                <span class="n">coefficient</span><span class="o">=</span><span class="n">term</span><span class="o">.</span><span class="n">coefficient</span><span class="p">,</span>
</span><span id="L-1806"><a href="#L-1806"><span class="linenos">1806</span></a>            <span class="p">)</span>
</span><span id="L-1807"><a href="#L-1807"><span class="linenos">1807</span></a>
</span><span id="L-1808"><a href="#L-1808"><span class="linenos">1808</span></a>    <span class="k">def</span> <span class="nf">quadratic_objective_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">QuadraticTerm</span><span class="p">]:</span>
</span><span id="L-1809"><a href="#L-1809"><span class="linenos">1809</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the quadratic terms with nonzero objective coefficient in undefined order.&quot;&quot;&quot;</span>
</span><span id="L-1810"><a href="#L-1810"><span class="linenos">1810</span></a>        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_quadratic_objective_coefficients</span><span class="p">():</span>
</span><span id="L-1811"><a href="#L-1811"><span class="linenos">1811</span></a>            <span class="n">var1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">id_key</span><span class="o">.</span><span class="n">id1</span><span class="p">)</span>
</span><span id="L-1812"><a href="#L-1812"><span class="linenos">1812</span></a>            <span class="n">var2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">id_key</span><span class="o">.</span><span class="n">id2</span><span class="p">)</span>
</span><span id="L-1813"><a href="#L-1813"><span class="linenos">1813</span></a>            <span class="k">yield</span> <span class="n">QuadraticTerm</span><span class="p">(</span>
</span><span id="L-1814"><a href="#L-1814"><span class="linenos">1814</span></a>                <span class="n">key</span><span class="o">=</span><span class="n">QuadraticTermKey</span><span class="p">(</span><span class="n">var1</span><span class="p">,</span> <span class="n">var2</span><span class="p">),</span> <span class="n">coefficient</span><span class="o">=</span><span class="n">term</span><span class="o">.</span><span class="n">coefficient</span>
</span><span id="L-1815"><a href="#L-1815"><span class="linenos">1815</span></a>            <span class="p">)</span>
</span><span id="L-1816"><a href="#L-1816"><span class="linenos">1816</span></a>
</span><span id="L-1817"><a href="#L-1817"><span class="linenos">1817</span></a>    <span class="k">def</span> <span class="nf">linear_constraint_matrix_entries</span><span class="p">(</span>
</span><span id="L-1818"><a href="#L-1818"><span class="linenos">1818</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-1819"><a href="#L-1819"><span class="linenos">1819</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearConstraintMatrixEntry</span><span class="p">]:</span>
</span><span id="L-1820"><a href="#L-1820"><span class="linenos">1820</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the nonzero elements of the linear constraint matrix in undefined order.&quot;&quot;&quot;</span>
</span><span id="L-1821"><a href="#L-1821"><span class="linenos">1821</span></a>        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_matrix_entries</span><span class="p">():</span>
</span><span id="L-1822"><a href="#L-1822"><span class="linenos">1822</span></a>            <span class="k">yield</span> <span class="n">LinearConstraintMatrixEntry</span><span class="p">(</span>
</span><span id="L-1823"><a href="#L-1823"><span class="linenos">1823</span></a>                <span class="n">linear_constraint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_linear_constraint</span><span class="p">(</span>
</span><span id="L-1824"><a href="#L-1824"><span class="linenos">1824</span></a>                    <span class="n">entry</span><span class="o">.</span><span class="n">linear_constraint_id</span>
</span><span id="L-1825"><a href="#L-1825"><span class="linenos">1825</span></a>                <span class="p">),</span>
</span><span id="L-1826"><a href="#L-1826"><span class="linenos">1826</span></a>                <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">variable_id</span><span class="p">),</span>
</span><span id="L-1827"><a href="#L-1827"><span class="linenos">1827</span></a>                <span class="n">coefficient</span><span class="o">=</span><span class="n">entry</span><span class="o">.</span><span class="n">coefficient</span><span class="p">,</span>
</span><span id="L-1828"><a href="#L-1828"><span class="linenos">1828</span></a>            <span class="p">)</span>
</span><span id="L-1829"><a href="#L-1829"><span class="linenos">1829</span></a>
</span><span id="L-1830"><a href="#L-1830"><span class="linenos">1830</span></a>    <span class="k">def</span> <span class="nf">export_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">model_pb2</span><span class="o">.</span><span class="n">ModelProto</span><span class="p">:</span>
</span><span id="L-1831"><a href="#L-1831"><span class="linenos">1831</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">export_model</span><span class="p">()</span>
</span><span id="L-1832"><a href="#L-1832"><span class="linenos">1832</span></a>
</span><span id="L-1833"><a href="#L-1833"><span class="linenos">1833</span></a>    <span class="k">def</span> <span class="nf">add_update_tracker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UpdateTracker</span><span class="p">:</span>
</span><span id="L-1834"><a href="#L-1834"><span class="linenos">1834</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates an UpdateTracker registered on this model to view changes.&quot;&quot;&quot;</span>
</span><span id="L-1835"><a href="#L-1835"><span class="linenos">1835</span></a>        <span class="k">return</span> <span class="n">UpdateTracker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">add_update_tracker</span><span class="p">())</span>
</span><span id="L-1836"><a href="#L-1836"><span class="linenos">1836</span></a>
</span><span id="L-1837"><a href="#L-1837"><span class="linenos">1837</span></a>    <span class="k">def</span> <span class="nf">remove_update_tracker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tracker</span><span class="p">:</span> <span class="n">UpdateTracker</span><span class="p">):</span>
</span><span id="L-1838"><a href="#L-1838"><span class="linenos">1838</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stops tracker from getting updates on changes to this model.</span>
</span><span id="L-1839"><a href="#L-1839"><span class="linenos">1839</span></a>
</span><span id="L-1840"><a href="#L-1840"><span class="linenos">1840</span></a><span class="sd">        An error will be raised if tracker was not created by this Model or if</span>
</span><span id="L-1841"><a href="#L-1841"><span class="linenos">1841</span></a><span class="sd">        tracker has been previously removed.</span>
</span><span id="L-1842"><a href="#L-1842"><span class="linenos">1842</span></a>
</span><span id="L-1843"><a href="#L-1843"><span class="linenos">1843</span></a><span class="sd">        Using (via checkpoint or update) an UpdateTracker after it has been removed</span>
</span><span id="L-1844"><a href="#L-1844"><span class="linenos">1844</span></a><span class="sd">        will result in an error.</span>
</span><span id="L-1845"><a href="#L-1845"><span class="linenos">1845</span></a>
</span><span id="L-1846"><a href="#L-1846"><span class="linenos">1846</span></a><span class="sd">        Args:</span>
</span><span id="L-1847"><a href="#L-1847"><span class="linenos">1847</span></a><span class="sd">          tracker: The UpdateTracker to unregister.</span>
</span><span id="L-1848"><a href="#L-1848"><span class="linenos">1848</span></a>
</span><span id="L-1849"><a href="#L-1849"><span class="linenos">1849</span></a><span class="sd">        Raises:</span>
</span><span id="L-1850"><a href="#L-1850"><span class="linenos">1850</span></a><span class="sd">          KeyError: The tracker was created by another model or was already removed.</span>
</span><span id="L-1851"><a href="#L-1851"><span class="linenos">1851</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1852"><a href="#L-1852"><span class="linenos">1852</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">remove_update_tracker</span><span class="p">(</span><span class="n">tracker</span><span class="o">.</span><span class="n">storage_update_tracker</span><span class="p">)</span>
</span><span id="L-1853"><a href="#L-1853"><span class="linenos">1853</span></a>
</span><span id="L-1854"><a href="#L-1854"><span class="linenos">1854</span></a>    <span class="k">def</span> <span class="nf">check_compatible</span><span class="p">(</span>
</span><span id="L-1855"><a href="#L-1855"><span class="linenos">1855</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">var_or_constraint</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="n">LinearConstraint</span><span class="p">]</span>
</span><span id="L-1856"><a href="#L-1856"><span class="linenos">1856</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1857"><a href="#L-1857"><span class="linenos">1857</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Raises a ValueError if the model of var_or_constraint is not self.&quot;&quot;&quot;</span>
</span><span id="L-1858"><a href="#L-1858"><span class="linenos">1858</span></a>        <span class="k">if</span> <span class="n">var_or_constraint</span><span class="o">.</span><span class="n">model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span>
</span><span id="L-1859"><a href="#L-1859"><span class="linenos">1859</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-1860"><a href="#L-1860"><span class="linenos">1860</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">var_or_constraint</span><span class="si">}</span><span class="s2"> is from model </span><span class="si">{</span><span class="n">var_or_constraint</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2"> and&quot;</span>
</span><span id="L-1861"><a href="#L-1861"><span class="linenos">1861</span></a>                <span class="sa">f</span><span class="s2">&quot; cannot be used with model </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1862"><a href="#L-1862"><span class="linenos">1862</span></a>            <span class="p">)</span>
</span><span id="L-1863"><a href="#L-1863"><span class="linenos">1863</span></a>
</span><span id="L-1864"><a href="#L-1864"><span class="linenos">1864</span></a>    <span class="k">def</span> <span class="nf">_get_or_make_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="L-1865"><a href="#L-1865"><span class="linenos">1865</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_variable_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">variable_id</span><span class="p">)</span>
</span><span id="L-1866"><a href="#L-1866"><span class="linenos">1866</span></a>        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
</span><span id="L-1867"><a href="#L-1867"><span class="linenos">1867</span></a>            <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1868"><a href="#L-1868"><span class="linenos">1868</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">Variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_id</span><span class="p">)</span>
</span><span id="L-1869"><a href="#L-1869"><span class="linenos">1869</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_variable_ids</span><span class="p">[</span><span class="n">variable_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="L-1870"><a href="#L-1870"><span class="linenos">1870</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1871"><a href="#L-1871"><span class="linenos">1871</span></a>
</span><span id="L-1872"><a href="#L-1872"><span class="linenos">1872</span></a>    <span class="k">def</span> <span class="nf">_get_or_make_linear_constraint</span><span class="p">(</span>
</span><span id="L-1873"><a href="#L-1873"><span class="linenos">1873</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">linear_constraint_id</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="L-1874"><a href="#L-1874"><span class="linenos">1874</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearConstraint</span><span class="p">:</span>
</span><span id="L-1875"><a href="#L-1875"><span class="linenos">1875</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear_constraint_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">linear_constraint_id</span><span class="p">)</span>
</span><span id="L-1876"><a href="#L-1876"><span class="linenos">1876</span></a>        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
</span><span id="L-1877"><a href="#L-1877"><span class="linenos">1877</span></a>            <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1878"><a href="#L-1878"><span class="linenos">1878</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">LinearConstraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_constraint_id</span><span class="p">)</span>
</span><span id="L-1879"><a href="#L-1879"><span class="linenos">1879</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_linear_constraint_ids</span><span class="p">[</span><span class="n">linear_constraint_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="L-1880"><a href="#L-1880"><span class="linenos">1880</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1881"><a href="#L-1881"><span class="linenos">1881</span></a>
</span><span id="L-1882"><a href="#L-1882"><span class="linenos">1882</span></a>
</span><span id="L-1883"><a href="#L-1883"><span class="linenos">1883</span></a><span class="k">class</span> <span class="nc">LinearSum</span><span class="p">(</span><span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-1884"><a href="#L-1884"><span class="linenos">1884</span></a>    <span class="c1"># TODO(b/216492143): consider what details to move elsewhere and/or replace</span>
</span><span id="L-1885"><a href="#L-1885"><span class="linenos">1885</span></a>    <span class="c1"># by examples, and do complexity analysis.</span>
</span><span id="L-1886"><a href="#L-1886"><span class="linenos">1886</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A deferred sum of LinearBase objects.</span>
</span><span id="L-1887"><a href="#L-1887"><span class="linenos">1887</span></a>
</span><span id="L-1888"><a href="#L-1888"><span class="linenos">1888</span></a><span class="sd">    LinearSum objects are automatically created when two linear objects are added</span>
</span><span id="L-1889"><a href="#L-1889"><span class="linenos">1889</span></a><span class="sd">    and, as noted in the documentation for Linear, can reduce the inefficiencies.</span>
</span><span id="L-1890"><a href="#L-1890"><span class="linenos">1890</span></a><span class="sd">    In particular, they are created when calling sum(iterable) when iterable is</span>
</span><span id="L-1891"><a href="#L-1891"><span class="linenos">1891</span></a><span class="sd">    an Iterable[LinearTypes]. However, using LinearSum(iterable) instead</span>
</span><span id="L-1892"><a href="#L-1892"><span class="linenos">1892</span></a><span class="sd">    can result in additional performance improvements:</span>
</span><span id="L-1893"><a href="#L-1893"><span class="linenos">1893</span></a>
</span><span id="L-1894"><a href="#L-1894"><span class="linenos">1894</span></a><span class="sd">      * sum(iterable): creates a nested set of LinearSum objects (e.g.</span>
</span><span id="L-1895"><a href="#L-1895"><span class="linenos">1895</span></a><span class="sd">        `sum([a, b, c])` is `LinearSum(0, LinearSum(a, LinearSum(b, c)))`).</span>
</span><span id="L-1896"><a href="#L-1896"><span class="linenos">1896</span></a><span class="sd">      * LinearSum(iterable): creates a single LinearSum that saves a tuple with</span>
</span><span id="L-1897"><a href="#L-1897"><span class="linenos">1897</span></a><span class="sd">        all the LinearTypes objects in iterable (e.g.</span>
</span><span id="L-1898"><a href="#L-1898"><span class="linenos">1898</span></a><span class="sd">        `LinearSum([a, b, c])` does not create additional objects).</span>
</span><span id="L-1899"><a href="#L-1899"><span class="linenos">1899</span></a>
</span><span id="L-1900"><a href="#L-1900"><span class="linenos">1900</span></a><span class="sd">    This class is immutable.</span>
</span><span id="L-1901"><a href="#L-1901"><span class="linenos">1901</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1902"><a href="#L-1902"><span class="linenos">1902</span></a>
</span><span id="L-1903"><a href="#L-1903"><span class="linenos">1903</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;__weakref__&quot;</span><span class="p">,</span> <span class="s2">&quot;_elements&quot;</span>
</span><span id="L-1904"><a href="#L-1904"><span class="linenos">1904</span></a>
</span><span id="L-1905"><a href="#L-1905"><span class="linenos">1905</span></a>    <span class="c1"># Potentially unsafe use of Iterable argument is handled by immediate local</span>
</span><span id="L-1906"><a href="#L-1906"><span class="linenos">1906</span></a>    <span class="c1"># storage as tuple.</span>
</span><span id="L-1907"><a href="#L-1907"><span class="linenos">1907</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterable</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">LinearTypes</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1908"><a href="#L-1908"><span class="linenos">1908</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a LinearSum object. A copy of iterable is saved as a tuple.&quot;&quot;&quot;</span>
</span><span id="L-1909"><a href="#L-1909"><span class="linenos">1909</span></a>
</span><span id="L-1910"><a href="#L-1910"><span class="linenos">1910</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
</span><span id="L-1911"><a href="#L-1911"><span class="linenos">1911</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span><span class="p">:</span>
</span><span id="L-1912"><a href="#L-1912"><span class="linenos">1912</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-1913"><a href="#L-1913"><span class="linenos">1913</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1914"><a href="#L-1914"><span class="linenos">1914</span></a>                    <span class="s2">&quot;unsupported type in iterable argument for &quot;</span>
</span><span id="L-1915"><a href="#L-1915"><span class="linenos">1915</span></a>                    <span class="sa">f</span><span class="s2">&quot;LinearSum: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-1916"><a href="#L-1916"><span class="linenos">1916</span></a>                <span class="p">)</span>
</span><span id="L-1917"><a href="#L-1917"><span class="linenos">1917</span></a>
</span><span id="L-1918"><a href="#L-1918"><span class="linenos">1918</span></a>    <span class="nd">@property</span>
</span><span id="L-1919"><a href="#L-1919"><span class="linenos">1919</span></a>    <span class="k">def</span> <span class="nf">elements</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">LinearTypes</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
</span><span id="L-1920"><a href="#L-1920"><span class="linenos">1920</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span>
</span><span id="L-1921"><a href="#L-1921"><span class="linenos">1921</span></a>
</span><span id="L-1922"><a href="#L-1922"><span class="linenos">1922</span></a>    <span class="k">def</span> <span class="nf">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="L-1923"><a href="#L-1923"><span class="linenos">1923</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-1924"><a href="#L-1924"><span class="linenos">1924</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-1925"><a href="#L-1925"><span class="linenos">1925</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_ProcessedElements</span><span class="p">,</span>
</span><span id="L-1926"><a href="#L-1926"><span class="linenos">1926</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_ToProcessElements</span><span class="p">,</span>
</span><span id="L-1927"><a href="#L-1927"><span class="linenos">1927</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1928"><a href="#L-1928"><span class="linenos">1928</span></a>        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span><span class="p">:</span>
</span><span id="L-1929"><a href="#L-1929"><span class="linenos">1929</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-1930"><a href="#L-1930"><span class="linenos">1930</span></a>                <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">scale</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">term</span><span class="p">)</span>
</span><span id="L-1931"><a href="#L-1931"><span class="linenos">1931</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1932"><a href="#L-1932"><span class="linenos">1932</span></a>                <span class="n">target_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
</span><span id="L-1933"><a href="#L-1933"><span class="linenos">1933</span></a>
</span><span id="L-1934"><a href="#L-1934"><span class="linenos">1934</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1935"><a href="#L-1935"><span class="linenos">1935</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="L-1936"><a href="#L-1936"><span class="linenos">1936</span></a>
</span><span id="L-1937"><a href="#L-1937"><span class="linenos">1937</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1938"><a href="#L-1938"><span class="linenos">1938</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;LinearSum((&quot;</span>
</span><span id="L-1939"><a href="#L-1939"><span class="linenos">1939</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">linear</span><span class="p">)</span> <span class="k">for</span> <span class="n">linear</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span><span class="p">)</span>
</span><span id="L-1940"><a href="#L-1940"><span class="linenos">1940</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;))&quot;</span>
</span><span id="L-1941"><a href="#L-1941"><span class="linenos">1941</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1942"><a href="#L-1942"><span class="linenos">1942</span></a>
</span><span id="L-1943"><a href="#L-1943"><span class="linenos">1943</span></a>
</span><span id="L-1944"><a href="#L-1944"><span class="linenos">1944</span></a><span class="k">class</span> <span class="nc">QuadraticSum</span><span class="p">(</span><span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="L-1945"><a href="#L-1945"><span class="linenos">1945</span></a>    <span class="c1"># TODO(b/216492143): consider what details to move elsewhere and/or replace</span>
</span><span id="L-1946"><a href="#L-1946"><span class="linenos">1946</span></a>    <span class="c1"># by examples, and do complexity analysis.</span>
</span><span id="L-1947"><a href="#L-1947"><span class="linenos">1947</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A deferred sum of QuadraticTypes objects.</span>
</span><span id="L-1948"><a href="#L-1948"><span class="linenos">1948</span></a>
</span><span id="L-1949"><a href="#L-1949"><span class="linenos">1949</span></a><span class="sd">    QuadraticSum objects are automatically created when a quadratic object is</span>
</span><span id="L-1950"><a href="#L-1950"><span class="linenos">1950</span></a><span class="sd">    added to quadratic or linear objects and, as has performance optimizations</span>
</span><span id="L-1951"><a href="#L-1951"><span class="linenos">1951</span></a><span class="sd">    similar to LinearSum.</span>
</span><span id="L-1952"><a href="#L-1952"><span class="linenos">1952</span></a>
</span><span id="L-1953"><a href="#L-1953"><span class="linenos">1953</span></a><span class="sd">    This class is immutable.</span>
</span><span id="L-1954"><a href="#L-1954"><span class="linenos">1954</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1955"><a href="#L-1955"><span class="linenos">1955</span></a>
</span><span id="L-1956"><a href="#L-1956"><span class="linenos">1956</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;__weakref__&quot;</span><span class="p">,</span> <span class="s2">&quot;_elements&quot;</span>
</span><span id="L-1957"><a href="#L-1957"><span class="linenos">1957</span></a>
</span><span id="L-1958"><a href="#L-1958"><span class="linenos">1958</span></a>    <span class="c1"># Potentially unsafe use of Iterable argument is handled by immediate local</span>
</span><span id="L-1959"><a href="#L-1959"><span class="linenos">1959</span></a>    <span class="c1"># storage as tuple.</span>
</span><span id="L-1960"><a href="#L-1960"><span class="linenos">1960</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterable</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">QuadraticTypes</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1961"><a href="#L-1961"><span class="linenos">1961</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a QuadraticSum object. A copy of iterable is saved as a tuple.&quot;&quot;&quot;</span>
</span><span id="L-1962"><a href="#L-1962"><span class="linenos">1962</span></a>
</span><span id="L-1963"><a href="#L-1963"><span class="linenos">1963</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
</span><span id="L-1964"><a href="#L-1964"><span class="linenos">1964</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span><span class="p">:</span>
</span><span id="L-1965"><a href="#L-1965"><span class="linenos">1965</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-1966"><a href="#L-1966"><span class="linenos">1966</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-1967"><a href="#L-1967"><span class="linenos">1967</span></a>                    <span class="s2">&quot;unsupported type in iterable argument for &quot;</span>
</span><span id="L-1968"><a href="#L-1968"><span class="linenos">1968</span></a>                    <span class="sa">f</span><span class="s2">&quot;QuadraticSum: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-1969"><a href="#L-1969"><span class="linenos">1969</span></a>                <span class="p">)</span>
</span><span id="L-1970"><a href="#L-1970"><span class="linenos">1970</span></a>
</span><span id="L-1971"><a href="#L-1971"><span class="linenos">1971</span></a>    <span class="nd">@property</span>
</span><span id="L-1972"><a href="#L-1972"><span class="linenos">1972</span></a>    <span class="k">def</span> <span class="nf">elements</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">QuadraticTypes</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
</span><span id="L-1973"><a href="#L-1973"><span class="linenos">1973</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span>
</span><span id="L-1974"><a href="#L-1974"><span class="linenos">1974</span></a>
</span><span id="L-1975"><a href="#L-1975"><span class="linenos">1975</span></a>    <span class="k">def</span> <span class="nf">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="L-1976"><a href="#L-1976"><span class="linenos">1976</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-1977"><a href="#L-1977"><span class="linenos">1977</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-1978"><a href="#L-1978"><span class="linenos">1978</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_QuadraticProcessedElements</span><span class="p">,</span>
</span><span id="L-1979"><a href="#L-1979"><span class="linenos">1979</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_QuadraticToProcessElements</span><span class="p">,</span>
</span><span id="L-1980"><a href="#L-1980"><span class="linenos">1980</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1981"><a href="#L-1981"><span class="linenos">1981</span></a>        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span><span class="p">:</span>
</span><span id="L-1982"><a href="#L-1982"><span class="linenos">1982</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-1983"><a href="#L-1983"><span class="linenos">1983</span></a>                <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">scale</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">term</span><span class="p">)</span>
</span><span id="L-1984"><a href="#L-1984"><span class="linenos">1984</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1985"><a href="#L-1985"><span class="linenos">1985</span></a>                <span class="n">target_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
</span><span id="L-1986"><a href="#L-1986"><span class="linenos">1986</span></a>
</span><span id="L-1987"><a href="#L-1987"><span class="linenos">1987</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1988"><a href="#L-1988"><span class="linenos">1988</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">as_flat_quadratic_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="L-1989"><a href="#L-1989"><span class="linenos">1989</span></a>
</span><span id="L-1990"><a href="#L-1990"><span class="linenos">1990</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1991"><a href="#L-1991"><span class="linenos">1991</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;QuadraticSum((&quot;</span>
</span><span id="L-1992"><a href="#L-1992"><span class="linenos">1992</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">element</span><span class="p">)</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span><span class="p">)</span>
</span><span id="L-1993"><a href="#L-1993"><span class="linenos">1993</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;))&quot;</span>
</span><span id="L-1994"><a href="#L-1994"><span class="linenos">1994</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-1995"><a href="#L-1995"><span class="linenos">1995</span></a>
</span><span id="L-1996"><a href="#L-1996"><span class="linenos">1996</span></a>
</span><span id="L-1997"><a href="#L-1997"><span class="linenos">1997</span></a><span class="k">class</span> <span class="nc">LinearProduct</span><span class="p">(</span><span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-1998"><a href="#L-1998"><span class="linenos">1998</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A deferred multiplication computation for linear expressions.</span>
</span><span id="L-1999"><a href="#L-1999"><span class="linenos">1999</span></a>
</span><span id="L-2000"><a href="#L-2000"><span class="linenos">2000</span></a><span class="sd">    This class is immutable.</span>
</span><span id="L-2001"><a href="#L-2001"><span class="linenos">2001</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2002"><a href="#L-2002"><span class="linenos">2002</span></a>
</span><span id="L-2003"><a href="#L-2003"><span class="linenos">2003</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_scalar&quot;</span><span class="p">,</span> <span class="s2">&quot;_linear&quot;</span>
</span><span id="L-2004"><a href="#L-2004"><span class="linenos">2004</span></a>
</span><span id="L-2005"><a href="#L-2005"><span class="linenos">2005</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">linear</span><span class="p">:</span> <span class="n">LinearBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2006"><a href="#L-2006"><span class="linenos">2006</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scalar</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
</span><span id="L-2007"><a href="#L-2007"><span class="linenos">2007</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-2008"><a href="#L-2008"><span class="linenos">2008</span></a>                <span class="s2">&quot;unsupported type for scalar argument in &quot;</span>
</span><span id="L-2009"><a href="#L-2009"><span class="linenos">2009</span></a>                <span class="sa">f</span><span class="s2">&quot;LinearProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-2010"><a href="#L-2010"><span class="linenos">2010</span></a>            <span class="p">)</span>
</span><span id="L-2011"><a href="#L-2011"><span class="linenos">2011</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">linear</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-2012"><a href="#L-2012"><span class="linenos">2012</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-2013"><a href="#L-2013"><span class="linenos">2013</span></a>                <span class="s2">&quot;unsupported type for linear argument in &quot;</span>
</span><span id="L-2014"><a href="#L-2014"><span class="linenos">2014</span></a>                <span class="sa">f</span><span class="s2">&quot;LinearProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">linear</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-2015"><a href="#L-2015"><span class="linenos">2015</span></a>            <span class="p">)</span>
</span><span id="L-2016"><a href="#L-2016"><span class="linenos">2016</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span>
</span><span id="L-2017"><a href="#L-2017"><span class="linenos">2017</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_linear</span><span class="p">:</span> <span class="n">LinearBase</span> <span class="o">=</span> <span class="n">linear</span>
</span><span id="L-2018"><a href="#L-2018"><span class="linenos">2018</span></a>
</span><span id="L-2019"><a href="#L-2019"><span class="linenos">2019</span></a>    <span class="nd">@property</span>
</span><span id="L-2020"><a href="#L-2020"><span class="linenos">2020</span></a>    <span class="k">def</span> <span class="nf">scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-2021"><a href="#L-2021"><span class="linenos">2021</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span>
</span><span id="L-2022"><a href="#L-2022"><span class="linenos">2022</span></a>
</span><span id="L-2023"><a href="#L-2023"><span class="linenos">2023</span></a>    <span class="nd">@property</span>
</span><span id="L-2024"><a href="#L-2024"><span class="linenos">2024</span></a>    <span class="k">def</span> <span class="nf">linear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearBase</span><span class="p">:</span>
</span><span id="L-2025"><a href="#L-2025"><span class="linenos">2025</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear</span>
</span><span id="L-2026"><a href="#L-2026"><span class="linenos">2026</span></a>
</span><span id="L-2027"><a href="#L-2027"><span class="linenos">2027</span></a>    <span class="k">def</span> <span class="nf">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="L-2028"><a href="#L-2028"><span class="linenos">2028</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-2029"><a href="#L-2029"><span class="linenos">2029</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-2030"><a href="#L-2030"><span class="linenos">2030</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_ProcessedElements</span><span class="p">,</span>
</span><span id="L-2031"><a href="#L-2031"><span class="linenos">2031</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_ToProcessElements</span><span class="p">,</span>
</span><span id="L-2032"><a href="#L-2032"><span class="linenos">2032</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2033"><a href="#L-2033"><span class="linenos">2033</span></a>        <span class="n">target_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_linear</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span> <span class="o">*</span> <span class="n">scale</span><span class="p">)</span>
</span><span id="L-2034"><a href="#L-2034"><span class="linenos">2034</span></a>
</span><span id="L-2035"><a href="#L-2035"><span class="linenos">2035</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2036"><a href="#L-2036"><span class="linenos">2036</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="L-2037"><a href="#L-2037"><span class="linenos">2037</span></a>
</span><span id="L-2038"><a href="#L-2038"><span class="linenos">2038</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2039"><a href="#L-2039"><span class="linenos">2039</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;LinearProduct(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span><span class="si">!r}</span><span class="s2">, &quot;</span>
</span><span id="L-2040"><a href="#L-2040"><span class="linenos">2040</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_linear</span><span class="si">!r}</span><span class="s2">)&quot;</span>
</span><span id="L-2041"><a href="#L-2041"><span class="linenos">2041</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-2042"><a href="#L-2042"><span class="linenos">2042</span></a>
</span><span id="L-2043"><a href="#L-2043"><span class="linenos">2043</span></a>
</span><span id="L-2044"><a href="#L-2044"><span class="linenos">2044</span></a><span class="k">class</span> <span class="nc">QuadraticProduct</span><span class="p">(</span><span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="L-2045"><a href="#L-2045"><span class="linenos">2045</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A deferred multiplication computation for quadratic expressions.</span>
</span><span id="L-2046"><a href="#L-2046"><span class="linenos">2046</span></a>
</span><span id="L-2047"><a href="#L-2047"><span class="linenos">2047</span></a><span class="sd">    This class is immutable.</span>
</span><span id="L-2048"><a href="#L-2048"><span class="linenos">2048</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2049"><a href="#L-2049"><span class="linenos">2049</span></a>
</span><span id="L-2050"><a href="#L-2050"><span class="linenos">2050</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_scalar&quot;</span><span class="p">,</span> <span class="s2">&quot;_quadratic&quot;</span>
</span><span id="L-2051"><a href="#L-2051"><span class="linenos">2051</span></a>
</span><span id="L-2052"><a href="#L-2052"><span class="linenos">2052</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">quadratic</span><span class="p">:</span> <span class="n">QuadraticBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2053"><a href="#L-2053"><span class="linenos">2053</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scalar</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
</span><span id="L-2054"><a href="#L-2054"><span class="linenos">2054</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-2055"><a href="#L-2055"><span class="linenos">2055</span></a>                <span class="s2">&quot;unsupported type for scalar argument in &quot;</span>
</span><span id="L-2056"><a href="#L-2056"><span class="linenos">2056</span></a>                <span class="sa">f</span><span class="s2">&quot;QuadraticProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-2057"><a href="#L-2057"><span class="linenos">2057</span></a>            <span class="p">)</span>
</span><span id="L-2058"><a href="#L-2058"><span class="linenos">2058</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">quadratic</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="L-2059"><a href="#L-2059"><span class="linenos">2059</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-2060"><a href="#L-2060"><span class="linenos">2060</span></a>                <span class="s2">&quot;unsupported type for linear argument in &quot;</span>
</span><span id="L-2061"><a href="#L-2061"><span class="linenos">2061</span></a>                <span class="sa">f</span><span class="s2">&quot;QuadraticProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">quadratic</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-2062"><a href="#L-2062"><span class="linenos">2062</span></a>            <span class="p">)</span>
</span><span id="L-2063"><a href="#L-2063"><span class="linenos">2063</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span>
</span><span id="L-2064"><a href="#L-2064"><span class="linenos">2064</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic</span><span class="p">:</span> <span class="n">QuadraticBase</span> <span class="o">=</span> <span class="n">quadratic</span>
</span><span id="L-2065"><a href="#L-2065"><span class="linenos">2065</span></a>
</span><span id="L-2066"><a href="#L-2066"><span class="linenos">2066</span></a>    <span class="nd">@property</span>
</span><span id="L-2067"><a href="#L-2067"><span class="linenos">2067</span></a>    <span class="k">def</span> <span class="nf">scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="L-2068"><a href="#L-2068"><span class="linenos">2068</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span>
</span><span id="L-2069"><a href="#L-2069"><span class="linenos">2069</span></a>
</span><span id="L-2070"><a href="#L-2070"><span class="linenos">2070</span></a>    <span class="nd">@property</span>
</span><span id="L-2071"><a href="#L-2071"><span class="linenos">2071</span></a>    <span class="k">def</span> <span class="nf">quadratic</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QuadraticBase</span><span class="p">:</span>
</span><span id="L-2072"><a href="#L-2072"><span class="linenos">2072</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic</span>
</span><span id="L-2073"><a href="#L-2073"><span class="linenos">2073</span></a>
</span><span id="L-2074"><a href="#L-2074"><span class="linenos">2074</span></a>    <span class="k">def</span> <span class="nf">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="L-2075"><a href="#L-2075"><span class="linenos">2075</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-2076"><a href="#L-2076"><span class="linenos">2076</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-2077"><a href="#L-2077"><span class="linenos">2077</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_QuadraticProcessedElements</span><span class="p">,</span>
</span><span id="L-2078"><a href="#L-2078"><span class="linenos">2078</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_QuadraticToProcessElements</span><span class="p">,</span>
</span><span id="L-2079"><a href="#L-2079"><span class="linenos">2079</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2080"><a href="#L-2080"><span class="linenos">2080</span></a>        <span class="n">target_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_quadratic</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span> <span class="o">*</span> <span class="n">scale</span><span class="p">)</span>
</span><span id="L-2081"><a href="#L-2081"><span class="linenos">2081</span></a>
</span><span id="L-2082"><a href="#L-2082"><span class="linenos">2082</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2083"><a href="#L-2083"><span class="linenos">2083</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">as_flat_quadratic_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="L-2084"><a href="#L-2084"><span class="linenos">2084</span></a>
</span><span id="L-2085"><a href="#L-2085"><span class="linenos">2085</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2086"><a href="#L-2086"><span class="linenos">2086</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;QuadraticProduct(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_quadratic</span><span class="si">!r}</span><span class="s2">)&quot;</span>
</span><span id="L-2087"><a href="#L-2087"><span class="linenos">2087</span></a>
</span><span id="L-2088"><a href="#L-2088"><span class="linenos">2088</span></a>
</span><span id="L-2089"><a href="#L-2089"><span class="linenos">2089</span></a><span class="k">class</span> <span class="nc">LinearLinearProduct</span><span class="p">(</span><span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="L-2090"><a href="#L-2090"><span class="linenos">2090</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A deferred multiplication of two linear expressions.</span>
</span><span id="L-2091"><a href="#L-2091"><span class="linenos">2091</span></a>
</span><span id="L-2092"><a href="#L-2092"><span class="linenos">2092</span></a><span class="sd">    This class is immutable.</span>
</span><span id="L-2093"><a href="#L-2093"><span class="linenos">2093</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2094"><a href="#L-2094"><span class="linenos">2094</span></a>
</span><span id="L-2095"><a href="#L-2095"><span class="linenos">2095</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_first_linear&quot;</span><span class="p">,</span> <span class="s2">&quot;_second_linear&quot;</span>
</span><span id="L-2096"><a href="#L-2096"><span class="linenos">2096</span></a>
</span><span id="L-2097"><a href="#L-2097"><span class="linenos">2097</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_linear</span><span class="p">:</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="n">second_linear</span><span class="p">:</span> <span class="n">LinearBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2098"><a href="#L-2098"><span class="linenos">2098</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first_linear</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-2099"><a href="#L-2099"><span class="linenos">2099</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-2100"><a href="#L-2100"><span class="linenos">2100</span></a>                <span class="s2">&quot;unsupported type for first_linear argument in &quot;</span>
</span><span id="L-2101"><a href="#L-2101"><span class="linenos">2101</span></a>                <span class="sa">f</span><span class="s2">&quot;LinearLinearProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">first_linear</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-2102"><a href="#L-2102"><span class="linenos">2102</span></a>            <span class="p">)</span>
</span><span id="L-2103"><a href="#L-2103"><span class="linenos">2103</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">second_linear</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="L-2104"><a href="#L-2104"><span class="linenos">2104</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-2105"><a href="#L-2105"><span class="linenos">2105</span></a>                <span class="s2">&quot;unsupported type for second_linear argument in &quot;</span>
</span><span id="L-2106"><a href="#L-2106"><span class="linenos">2106</span></a>                <span class="sa">f</span><span class="s2">&quot;LinearLinearProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">second_linear</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-2107"><a href="#L-2107"><span class="linenos">2107</span></a>            <span class="p">)</span>
</span><span id="L-2108"><a href="#L-2108"><span class="linenos">2108</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_first_linear</span><span class="p">:</span> <span class="n">LinearBase</span> <span class="o">=</span> <span class="n">first_linear</span>
</span><span id="L-2109"><a href="#L-2109"><span class="linenos">2109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_second_linear</span><span class="p">:</span> <span class="n">LinearBase</span> <span class="o">=</span> <span class="n">second_linear</span>
</span><span id="L-2110"><a href="#L-2110"><span class="linenos">2110</span></a>
</span><span id="L-2111"><a href="#L-2111"><span class="linenos">2111</span></a>    <span class="nd">@property</span>
</span><span id="L-2112"><a href="#L-2112"><span class="linenos">2112</span></a>    <span class="k">def</span> <span class="nf">first_linear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearBase</span><span class="p">:</span>
</span><span id="L-2113"><a href="#L-2113"><span class="linenos">2113</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_linear</span>
</span><span id="L-2114"><a href="#L-2114"><span class="linenos">2114</span></a>
</span><span id="L-2115"><a href="#L-2115"><span class="linenos">2115</span></a>    <span class="nd">@property</span>
</span><span id="L-2116"><a href="#L-2116"><span class="linenos">2116</span></a>    <span class="k">def</span> <span class="nf">second_linear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearBase</span><span class="p">:</span>
</span><span id="L-2117"><a href="#L-2117"><span class="linenos">2117</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_linear</span>
</span><span id="L-2118"><a href="#L-2118"><span class="linenos">2118</span></a>
</span><span id="L-2119"><a href="#L-2119"><span class="linenos">2119</span></a>    <span class="k">def</span> <span class="nf">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="L-2120"><a href="#L-2120"><span class="linenos">2120</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-2121"><a href="#L-2121"><span class="linenos">2121</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="L-2122"><a href="#L-2122"><span class="linenos">2122</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_QuadraticProcessedElements</span><span class="p">,</span>
</span><span id="L-2123"><a href="#L-2123"><span class="linenos">2123</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_QuadraticToProcessElements</span><span class="p">,</span>
</span><span id="L-2124"><a href="#L-2124"><span class="linenos">2124</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2125"><a href="#L-2125"><span class="linenos">2125</span></a>        <span class="c1"># A recursion is avoided here because as_flat_linear_expression() must never</span>
</span><span id="L-2126"><a href="#L-2126"><span class="linenos">2126</span></a>        <span class="c1"># call _quadratic_flatten_once_and_add_to().</span>
</span><span id="L-2127"><a href="#L-2127"><span class="linenos">2127</span></a>        <span class="n">first_expression</span> <span class="o">=</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_first_linear</span><span class="p">)</span>
</span><span id="L-2128"><a href="#L-2128"><span class="linenos">2128</span></a>        <span class="n">second_expression</span> <span class="o">=</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_second_linear</span><span class="p">)</span>
</span><span id="L-2129"><a href="#L-2129"><span class="linenos">2129</span></a>        <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="L-2130"><a href="#L-2130"><span class="linenos">2130</span></a>            <span class="n">first_expression</span><span class="o">.</span><span class="n">offset</span> <span class="o">*</span> <span class="n">second_expression</span><span class="o">.</span><span class="n">offset</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="L-2131"><a href="#L-2131"><span class="linenos">2131</span></a>        <span class="p">)</span>
</span><span id="L-2132"><a href="#L-2132"><span class="linenos">2132</span></a>        <span class="k">for</span> <span class="n">first_var</span><span class="p">,</span> <span class="n">first_val</span> <span class="ow">in</span> <span class="n">first_expression</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-2133"><a href="#L-2133"><span class="linenos">2133</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="n">first_var</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="L-2134"><a href="#L-2134"><span class="linenos">2134</span></a>                <span class="n">second_expression</span><span class="o">.</span><span class="n">offset</span> <span class="o">*</span> <span class="n">first_val</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="L-2135"><a href="#L-2135"><span class="linenos">2135</span></a>            <span class="p">)</span>
</span><span id="L-2136"><a href="#L-2136"><span class="linenos">2136</span></a>        <span class="k">for</span> <span class="n">second_var</span><span class="p">,</span> <span class="n">second_val</span> <span class="ow">in</span> <span class="n">second_expression</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-2137"><a href="#L-2137"><span class="linenos">2137</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="n">second_var</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="L-2138"><a href="#L-2138"><span class="linenos">2138</span></a>                <span class="n">first_expression</span><span class="o">.</span><span class="n">offset</span> <span class="o">*</span> <span class="n">second_val</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="L-2139"><a href="#L-2139"><span class="linenos">2139</span></a>            <span class="p">)</span>
</span><span id="L-2140"><a href="#L-2140"><span class="linenos">2140</span></a>
</span><span id="L-2141"><a href="#L-2141"><span class="linenos">2141</span></a>        <span class="k">for</span> <span class="n">first_var</span><span class="p">,</span> <span class="n">first_val</span> <span class="ow">in</span> <span class="n">first_expression</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-2142"><a href="#L-2142"><span class="linenos">2142</span></a>            <span class="k">for</span> <span class="n">second_var</span><span class="p">,</span> <span class="n">second_val</span> <span class="ow">in</span> <span class="n">second_expression</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-2143"><a href="#L-2143"><span class="linenos">2143</span></a>                <span class="n">processed_elements</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">[</span>
</span><span id="L-2144"><a href="#L-2144"><span class="linenos">2144</span></a>                    <span class="n">QuadraticTermKey</span><span class="p">(</span><span class="n">first_var</span><span class="p">,</span> <span class="n">second_var</span><span class="p">)</span>
</span><span id="L-2145"><a href="#L-2145"><span class="linenos">2145</span></a>                <span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="n">first_val</span> <span class="o">*</span> <span class="n">second_val</span> <span class="o">*</span> <span class="n">scale</span><span class="p">)</span>
</span><span id="L-2146"><a href="#L-2146"><span class="linenos">2146</span></a>
</span><span id="L-2147"><a href="#L-2147"><span class="linenos">2147</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2148"><a href="#L-2148"><span class="linenos">2148</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">as_flat_quadratic_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="L-2149"><a href="#L-2149"><span class="linenos">2149</span></a>
</span><span id="L-2150"><a href="#L-2150"><span class="linenos">2150</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-2151"><a href="#L-2151"><span class="linenos">2151</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;LinearLinearProduct(&quot;</span>
</span><span id="L-2152"><a href="#L-2152"><span class="linenos">2152</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_first_linear</span><span class="si">!r}</span><span class="s2">, &quot;</span>
</span><span id="L-2153"><a href="#L-2153"><span class="linenos">2153</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_second_linear</span><span class="si">!r}</span><span class="s2">)&quot;</span>
</span><span id="L-2154"><a href="#L-2154"><span class="linenos">2154</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-2155"><a href="#L-2155"><span class="linenos">2155</span></a>
</span><span id="L-2156"><a href="#L-2156"><span class="linenos">2156</span></a>
</span><span id="L-2157"><a href="#L-2157"><span class="linenos">2157</span></a><span class="k">def</span> <span class="nf">as_flat_linear_expression</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearExpression</span><span class="p">:</span>
</span><span id="L-2158"><a href="#L-2158"><span class="linenos">2158</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts floats, ints and Linear objects to a LinearExpression.&quot;&quot;&quot;</span>
</span><span id="L-2159"><a href="#L-2159"><span class="linenos">2159</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">LinearExpression</span><span class="p">):</span>
</span><span id="L-2160"><a href="#L-2160"><span class="linenos">2160</span></a>        <span class="k">return</span> <span class="n">value</span>
</span><span id="L-2161"><a href="#L-2161"><span class="linenos">2161</span></a>    <span class="k">return</span> <span class="n">LinearExpression</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-2162"><a href="#L-2162"><span class="linenos">2162</span></a>
</span><span id="L-2163"><a href="#L-2163"><span class="linenos">2163</span></a>
</span><span id="L-2164"><a href="#L-2164"><span class="linenos">2164</span></a><span class="k">def</span> <span class="nf">as_flat_quadratic_expression</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QuadraticExpression</span><span class="p">:</span>
</span><span id="L-2165"><a href="#L-2165"><span class="linenos">2165</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts floats, ints, LinearBase and QuadraticBase objects to a QuadraticExpression.&quot;&quot;&quot;</span>
</span><span id="L-2166"><a href="#L-2166"><span class="linenos">2166</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">QuadraticExpression</span><span class="p">):</span>
</span><span id="L-2167"><a href="#L-2167"><span class="linenos">2167</span></a>        <span class="k">return</span> <span class="n">value</span>
</span><span id="L-2168"><a href="#L-2168"><span class="linenos">2168</span></a>    <span class="k">return</span> <span class="n">QuadraticExpression</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-2169"><a href="#L-2169"><span class="linenos">2169</span></a>
</span><span id="L-2170"><a href="#L-2170"><span class="linenos">2170</span></a>
</span><span id="L-2171"><a href="#L-2171"><span class="linenos">2171</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="L-2172"><a href="#L-2172"><span class="linenos">2172</span></a><span class="k">class</span> <span class="nc">NormalizedLinearInequality</span><span class="p">:</span>
</span><span id="L-2173"><a href="#L-2173"><span class="linenos">2173</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an inequality lb &lt;= expr &lt;= ub where expr&#39;s offset is zero.</span>
</span><span id="L-2174"><a href="#L-2174"><span class="linenos">2174</span></a>
</span><span id="L-2175"><a href="#L-2175"><span class="linenos">2175</span></a><span class="sd">    The inequality is of the form:</span>
</span><span id="L-2176"><a href="#L-2176"><span class="linenos">2176</span></a><span class="sd">        lb &lt;= sum_{x in V} coefficients[x] * x &lt;= ub</span>
</span><span id="L-2177"><a href="#L-2177"><span class="linenos">2177</span></a><span class="sd">    where V is the set of keys of coefficients.</span>
</span><span id="L-2178"><a href="#L-2178"><span class="linenos">2178</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2179"><a href="#L-2179"><span class="linenos">2179</span></a>
</span><span id="L-2180"><a href="#L-2180"><span class="linenos">2180</span></a>    <span class="n">lb</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-2181"><a href="#L-2181"><span class="linenos">2181</span></a>    <span class="n">ub</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="L-2182"><a href="#L-2182"><span class="linenos">2182</span></a>    <span class="n">coefficients</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>
</span><span id="L-2183"><a href="#L-2183"><span class="linenos">2183</span></a>
</span><span id="L-2184"><a href="#L-2184"><span class="linenos">2184</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">lb</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ub</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2185"><a href="#L-2185"><span class="linenos">2185</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Raises a ValueError if expr&#39;s offset is infinite.&quot;&quot;&quot;</span>
</span><span id="L-2186"><a href="#L-2186"><span class="linenos">2186</span></a>        <span class="n">flat_expr</span> <span class="o">=</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="L-2187"><a href="#L-2187"><span class="linenos">2187</span></a>        <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">flat_expr</span><span class="o">.</span><span class="n">offset</span><span class="p">):</span>
</span><span id="L-2188"><a href="#L-2188"><span class="linenos">2188</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="L-2189"><a href="#L-2189"><span class="linenos">2189</span></a>                <span class="s2">&quot;Trying to create a linear constraint whose expression has an&quot;</span>
</span><span id="L-2190"><a href="#L-2190"><span class="linenos">2190</span></a>                <span class="s2">&quot; infinite offset.&quot;</span>
</span><span id="L-2191"><a href="#L-2191"><span class="linenos">2191</span></a>            <span class="p">)</span>
</span><span id="L-2192"><a href="#L-2192"><span class="linenos">2192</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">lb</span> <span class="o">=</span> <span class="n">lb</span> <span class="o">-</span> <span class="n">flat_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="L-2193"><a href="#L-2193"><span class="linenos">2193</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ub</span> <span class="o">=</span> <span class="n">ub</span> <span class="o">-</span> <span class="n">flat_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="L-2194"><a href="#L-2194"><span class="linenos">2194</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="n">flat_expr</span><span class="o">.</span><span class="n">terms</span>
</span><span id="L-2195"><a href="#L-2195"><span class="linenos">2195</span></a>
</span><span id="L-2196"><a href="#L-2196"><span class="linenos">2196</span></a>
</span><span id="L-2197"><a href="#L-2197"><span class="linenos">2197</span></a><span class="c1"># TODO(b/227214976): Update the note below and link to pytype bug number.</span>
</span><span id="L-2198"><a href="#L-2198"><span class="linenos">2198</span></a><span class="c1"># Note: bounded_expr&#39;s type includes bool only as a workaround to a pytype</span>
</span><span id="L-2199"><a href="#L-2199"><span class="linenos">2199</span></a><span class="c1"># issue. Passing a bool for bounded_expr will raise an error in runtime.</span>
</span><span id="L-2200"><a href="#L-2200"><span class="linenos">2200</span></a><span class="k">def</span> <span class="nf">as_normalized_linear_inequality</span><span class="p">(</span>
</span><span id="L-2201"><a href="#L-2201"><span class="linenos">2201</span></a>    <span class="n">bounded_expr</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">BoundedLinearTypes</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-2202"><a href="#L-2202"><span class="linenos">2202</span></a>    <span class="o">*</span><span class="p">,</span>
</span><span id="L-2203"><a href="#L-2203"><span class="linenos">2203</span></a>    <span class="n">lb</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-2204"><a href="#L-2204"><span class="linenos">2204</span></a>    <span class="n">ub</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-2205"><a href="#L-2205"><span class="linenos">2205</span></a>    <span class="n">expr</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">LinearTypes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-2206"><a href="#L-2206"><span class="linenos">2206</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NormalizedLinearInequality</span><span class="p">:</span>
</span><span id="L-2207"><a href="#L-2207"><span class="linenos">2207</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts a linear constraint to a NormalizedLinearInequality.</span>
</span><span id="L-2208"><a href="#L-2208"><span class="linenos">2208</span></a>
</span><span id="L-2209"><a href="#L-2209"><span class="linenos">2209</span></a><span class="sd">    The simplest way to specify the constraint is by passing a one-sided or</span>
</span><span id="L-2210"><a href="#L-2210"><span class="linenos">2210</span></a><span class="sd">    two-sided linear inequality as in:</span>
</span><span id="L-2211"><a href="#L-2211"><span class="linenos">2211</span></a><span class="sd">      * as_normalized_linear_inequality(x + y + 1.0 &lt;= 2.0),</span>
</span><span id="L-2212"><a href="#L-2212"><span class="linenos">2212</span></a><span class="sd">      * as_normalized_linear_inequality(x + y &gt;= 2.0), or</span>
</span><span id="L-2213"><a href="#L-2213"><span class="linenos">2213</span></a><span class="sd">      * as_normalized_linear_inequality((1.0 &lt;= x + y) &lt;= 2.0).</span>
</span><span id="L-2214"><a href="#L-2214"><span class="linenos">2214</span></a>
</span><span id="L-2215"><a href="#L-2215"><span class="linenos">2215</span></a><span class="sd">    Note the extra parenthesis for two-sided linear inequalities, which is</span>
</span><span id="L-2216"><a href="#L-2216"><span class="linenos">2216</span></a><span class="sd">    required due to some language limitations (see</span>
</span><span id="L-2217"><a href="#L-2217"><span class="linenos">2217</span></a><span class="sd">    https://peps.python.org/pep-0335/ and https://peps.python.org/pep-0535/).</span>
</span><span id="L-2218"><a href="#L-2218"><span class="linenos">2218</span></a><span class="sd">    If the parenthesis are omitted, a TypeError will be raised explaining the</span>
</span><span id="L-2219"><a href="#L-2219"><span class="linenos">2219</span></a><span class="sd">    issue (if this error was not raised the first inequality would have been</span>
</span><span id="L-2220"><a href="#L-2220"><span class="linenos">2220</span></a><span class="sd">    silently ignored because of the noted language limitations).</span>
</span><span id="L-2221"><a href="#L-2221"><span class="linenos">2221</span></a>
</span><span id="L-2222"><a href="#L-2222"><span class="linenos">2222</span></a><span class="sd">    The second way to specify the constraint is by setting lb, ub, and/o expr as</span>
</span><span id="L-2223"><a href="#L-2223"><span class="linenos">2223</span></a><span class="sd">    in:</span>
</span><span id="L-2224"><a href="#L-2224"><span class="linenos">2224</span></a><span class="sd">      * as_normalized_linear_inequality(expr=x + y + 1.0, ub=2.0),</span>
</span><span id="L-2225"><a href="#L-2225"><span class="linenos">2225</span></a><span class="sd">      * as_normalized_linear_inequality(expr=x + y, lb=2.0),</span>
</span><span id="L-2226"><a href="#L-2226"><span class="linenos">2226</span></a><span class="sd">      * as_normalized_linear_inequality(expr=x + y, lb=1.0, ub=2.0), or</span>
</span><span id="L-2227"><a href="#L-2227"><span class="linenos">2227</span></a><span class="sd">      * as_normalized_linear_inequality(lb=1.0).</span>
</span><span id="L-2228"><a href="#L-2228"><span class="linenos">2228</span></a><span class="sd">    Omitting lb is equivalent to setting it to -math.inf and omiting ub is</span>
</span><span id="L-2229"><a href="#L-2229"><span class="linenos">2229</span></a><span class="sd">    equivalent to setting it to math.inf.</span>
</span><span id="L-2230"><a href="#L-2230"><span class="linenos">2230</span></a>
</span><span id="L-2231"><a href="#L-2231"><span class="linenos">2231</span></a><span class="sd">    These two alternatives are exclusive and a combined call like:</span>
</span><span id="L-2232"><a href="#L-2232"><span class="linenos">2232</span></a><span class="sd">      * as_normalized_linear_inequality(x + y &lt;= 2.0, lb=1.0), or</span>
</span><span id="L-2233"><a href="#L-2233"><span class="linenos">2233</span></a><span class="sd">      * as_normalized_linear_inequality(x + y &lt;= 2.0, ub=math.inf)</span>
</span><span id="L-2234"><a href="#L-2234"><span class="linenos">2234</span></a><span class="sd">    will raise a ValueError. A ValueError is also raised if expr&#39;s offset is</span>
</span><span id="L-2235"><a href="#L-2235"><span class="linenos">2235</span></a><span class="sd">    infinite.</span>
</span><span id="L-2236"><a href="#L-2236"><span class="linenos">2236</span></a>
</span><span id="L-2237"><a href="#L-2237"><span class="linenos">2237</span></a><span class="sd">    Args:</span>
</span><span id="L-2238"><a href="#L-2238"><span class="linenos">2238</span></a><span class="sd">      bounded_expr: a linear inequality describing the constraint. Cannot be</span>
</span><span id="L-2239"><a href="#L-2239"><span class="linenos">2239</span></a><span class="sd">        specified together with lb, ub, or expr.</span>
</span><span id="L-2240"><a href="#L-2240"><span class="linenos">2240</span></a><span class="sd">      lb: The constraint&#39;s lower bound if bounded_expr is omitted (if both</span>
</span><span id="L-2241"><a href="#L-2241"><span class="linenos">2241</span></a><span class="sd">        bounder_expr and lb are omitted, the lower bound is -math.inf).</span>
</span><span id="L-2242"><a href="#L-2242"><span class="linenos">2242</span></a><span class="sd">      ub: The constraint&#39;s upper bound if bounded_expr is omitted (if both</span>
</span><span id="L-2243"><a href="#L-2243"><span class="linenos">2243</span></a><span class="sd">        bounder_expr and ub are omitted, the upper bound is math.inf).</span>
</span><span id="L-2244"><a href="#L-2244"><span class="linenos">2244</span></a><span class="sd">      expr: The constraint&#39;s linear expression if bounded_expr is omitted.</span>
</span><span id="L-2245"><a href="#L-2245"><span class="linenos">2245</span></a>
</span><span id="L-2246"><a href="#L-2246"><span class="linenos">2246</span></a><span class="sd">    Returns:</span>
</span><span id="L-2247"><a href="#L-2247"><span class="linenos">2247</span></a><span class="sd">      A NormalizedLinearInequality representing the linear constraint.</span>
</span><span id="L-2248"><a href="#L-2248"><span class="linenos">2248</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2249"><a href="#L-2249"><span class="linenos">2249</span></a>    <span class="k">if</span> <span class="n">bounded_expr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2250"><a href="#L-2250"><span class="linenos">2250</span></a>        <span class="k">if</span> <span class="n">lb</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2251"><a href="#L-2251"><span class="linenos">2251</span></a>            <span class="n">lb</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span>
</span><span id="L-2252"><a href="#L-2252"><span class="linenos">2252</span></a>        <span class="k">if</span> <span class="n">ub</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2253"><a href="#L-2253"><span class="linenos">2253</span></a>            <span class="n">ub</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span>
</span><span id="L-2254"><a href="#L-2254"><span class="linenos">2254</span></a>        <span class="k">if</span> <span class="n">expr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2255"><a href="#L-2255"><span class="linenos">2255</span></a>            <span class="k">return</span> <span class="n">NormalizedLinearInequality</span><span class="p">(</span><span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-2256"><a href="#L-2256"><span class="linenos">2256</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="L-2257"><a href="#L-2257"><span class="linenos">2257</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-2258"><a href="#L-2258"><span class="linenos">2258</span></a>                <span class="sa">f</span><span class="s2">&quot;unsupported type for expr argument: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-2259"><a href="#L-2259"><span class="linenos">2259</span></a>            <span class="p">)</span>
</span><span id="L-2260"><a href="#L-2260"><span class="linenos">2260</span></a>        <span class="k">return</span> <span class="n">NormalizedLinearInequality</span><span class="p">(</span><span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="n">expr</span><span class="p">)</span>
</span><span id="L-2261"><a href="#L-2261"><span class="linenos">2261</span></a>
</span><span id="L-2262"><a href="#L-2262"><span class="linenos">2262</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bounded_expr</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="L-2263"><a href="#L-2263"><span class="linenos">2263</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-2264"><a href="#L-2264"><span class="linenos">2264</span></a>            <span class="s2">&quot;unsupported type for bounded_expr argument:&quot;</span>
</span><span id="L-2265"><a href="#L-2265"><span class="linenos">2265</span></a>            <span class="s2">&quot; bool. This error can occur when trying to add != constraints &quot;</span>
</span><span id="L-2266"><a href="#L-2266"><span class="linenos">2266</span></a>            <span class="s2">&quot;(which are not supported) or inequalities/equalities with constant &quot;</span>
</span><span id="L-2267"><a href="#L-2267"><span class="linenos">2267</span></a>            <span class="s2">&quot;left-hand-side and right-hand-side (which are redundant or make a &quot;</span>
</span><span id="L-2268"><a href="#L-2268"><span class="linenos">2268</span></a>            <span class="s2">&quot;model infeasible).&quot;</span>
</span><span id="L-2269"><a href="#L-2269"><span class="linenos">2269</span></a>        <span class="p">)</span>
</span><span id="L-2270"><a href="#L-2270"><span class="linenos">2270</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="L-2271"><a href="#L-2271"><span class="linenos">2271</span></a>        <span class="n">bounded_expr</span><span class="p">,</span>
</span><span id="L-2272"><a href="#L-2272"><span class="linenos">2272</span></a>        <span class="p">(</span>
</span><span id="L-2273"><a href="#L-2273"><span class="linenos">2273</span></a>            <span class="n">LowerBoundedLinearExpression</span><span class="p">,</span>
</span><span id="L-2274"><a href="#L-2274"><span class="linenos">2274</span></a>            <span class="n">UpperBoundedLinearExpression</span><span class="p">,</span>
</span><span id="L-2275"><a href="#L-2275"><span class="linenos">2275</span></a>            <span class="n">BoundedLinearExpression</span><span class="p">,</span>
</span><span id="L-2276"><a href="#L-2276"><span class="linenos">2276</span></a>            <span class="n">VarEqVar</span><span class="p">,</span>
</span><span id="L-2277"><a href="#L-2277"><span class="linenos">2277</span></a>        <span class="p">),</span>
</span><span id="L-2278"><a href="#L-2278"><span class="linenos">2278</span></a>    <span class="p">):</span>
</span><span id="L-2279"><a href="#L-2279"><span class="linenos">2279</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="L-2280"><a href="#L-2280"><span class="linenos">2280</span></a>            <span class="sa">f</span><span class="s2">&quot;unsupported type for bounded_expr: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">bounded_expr</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="L-2281"><a href="#L-2281"><span class="linenos">2281</span></a>        <span class="p">)</span>
</span><span id="L-2282"><a href="#L-2282"><span class="linenos">2282</span></a>    <span class="k">if</span> <span class="n">lb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2283"><a href="#L-2283"><span class="linenos">2283</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;lb cannot be specified together with a linear inequality&quot;</span><span class="p">)</span>
</span><span id="L-2284"><a href="#L-2284"><span class="linenos">2284</span></a>    <span class="k">if</span> <span class="n">ub</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2285"><a href="#L-2285"><span class="linenos">2285</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;ub cannot be specified together with a linear inequality&quot;</span><span class="p">)</span>
</span><span id="L-2286"><a href="#L-2286"><span class="linenos">2286</span></a>    <span class="k">if</span> <span class="n">expr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2287"><a href="#L-2287"><span class="linenos">2287</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;expr cannot be specified together with a linear inequality&quot;</span><span class="p">)</span>
</span><span id="L-2288"><a href="#L-2288"><span class="linenos">2288</span></a>
</span><span id="L-2289"><a href="#L-2289"><span class="linenos">2289</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bounded_expr</span><span class="p">,</span> <span class="n">VarEqVar</span><span class="p">):</span>
</span><span id="L-2290"><a href="#L-2290"><span class="linenos">2290</span></a>        <span class="k">return</span> <span class="n">NormalizedLinearInequality</span><span class="p">(</span>
</span><span id="L-2291"><a href="#L-2291"><span class="linenos">2291</span></a>            <span class="n">lb</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-2292"><a href="#L-2292"><span class="linenos">2292</span></a>            <span class="n">ub</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-2293"><a href="#L-2293"><span class="linenos">2293</span></a>            <span class="n">expr</span><span class="o">=</span><span class="n">bounded_expr</span><span class="o">.</span><span class="n">first_variable</span> <span class="o">-</span> <span class="n">bounded_expr</span><span class="o">.</span><span class="n">second_variable</span><span class="p">,</span>
</span><span id="L-2294"><a href="#L-2294"><span class="linenos">2294</span></a>        <span class="p">)</span>
</span><span id="L-2295"><a href="#L-2295"><span class="linenos">2295</span></a>
</span><span id="L-2296"><a href="#L-2296"><span class="linenos">2296</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="L-2297"><a href="#L-2297"><span class="linenos">2297</span></a>        <span class="n">bounded_expr</span><span class="p">,</span> <span class="p">(</span><span class="n">LowerBoundedLinearExpression</span><span class="p">,</span> <span class="n">BoundedLinearExpression</span><span class="p">)</span>
</span><span id="L-2298"><a href="#L-2298"><span class="linenos">2298</span></a>    <span class="p">):</span>
</span><span id="L-2299"><a href="#L-2299"><span class="linenos">2299</span></a>        <span class="n">lb</span> <span class="o">=</span> <span class="n">bounded_expr</span><span class="o">.</span><span class="n">lower_bound</span>
</span><span id="L-2300"><a href="#L-2300"><span class="linenos">2300</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2301"><a href="#L-2301"><span class="linenos">2301</span></a>        <span class="n">lb</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span>
</span><span id="L-2302"><a href="#L-2302"><span class="linenos">2302</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="L-2303"><a href="#L-2303"><span class="linenos">2303</span></a>        <span class="n">bounded_expr</span><span class="p">,</span> <span class="p">(</span><span class="n">UpperBoundedLinearExpression</span><span class="p">,</span> <span class="n">BoundedLinearExpression</span><span class="p">)</span>
</span><span id="L-2304"><a href="#L-2304"><span class="linenos">2304</span></a>    <span class="p">):</span>
</span><span id="L-2305"><a href="#L-2305"><span class="linenos">2305</span></a>        <span class="n">ub</span> <span class="o">=</span> <span class="n">bounded_expr</span><span class="o">.</span><span class="n">upper_bound</span>
</span><span id="L-2306"><a href="#L-2306"><span class="linenos">2306</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-2307"><a href="#L-2307"><span class="linenos">2307</span></a>        <span class="n">ub</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span>
</span><span id="L-2308"><a href="#L-2308"><span class="linenos">2308</span></a>    <span class="k">return</span> <span class="n">NormalizedLinearInequality</span><span class="p">(</span><span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="n">bounded_expr</span><span class="o">.</span><span class="n">expression</span><span class="p">)</span>
</span></pre></div>


            </section>
                <section id="Storage">
                    <div class="attr variable">
            <span class="name">Storage</span>        =
<span class="default_value">&lt;class &#39;<a href="model_storage.html#ModelStorage">ortools.math_opt.python.model_storage.ModelStorage</a>&#39;&gt;</span>

        
    </div>
    <a class="headerlink" href="#Storage"></a>
    
    

                </section>
                <section id="StorageClass">
                    <div class="attr variable">
            <span class="name">StorageClass</span>        =
<span class="default_value">typing.Type[~ModelStorageImpl]</span>

        
    </div>
    <a class="headerlink" href="#StorageClass"></a>
    
    

                </section>
                <section id="LinearTypes">
                    <div class="attr variable">
            <span class="name">LinearTypes</span>        =
<span class="default_value">typing.Union[int, float, ForwardRef(&#39;LinearBase&#39;)]</span>

        
    </div>
    <a class="headerlink" href="#LinearTypes"></a>
    
    

                </section>
                <section id="QuadraticTypes">
                    <div class="attr variable">
            <span class="name">QuadraticTypes</span>        =
<span class="default_value">typing.Union[int, float, ForwardRef(&#39;LinearBase&#39;), ForwardRef(&#39;QuadraticBase&#39;)]</span>

        
    </div>
    <a class="headerlink" href="#QuadraticTypes"></a>
    
    

                </section>
                <section id="LinearTypesExceptVariable">
                    <div class="attr variable">
            <span class="name">LinearTypesExceptVariable</span>        =
<input id="LinearTypesExceptVariable-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="LinearTypesExceptVariable-view-value"></label><span class="default_value">typing.Union[float, int, ForwardRef(&#39;LinearTerm&#39;), ForwardRef(&#39;LinearExpression&#39;), ForwardRef(&#39;LinearSum&#39;), ForwardRef(&#39;LinearProduct&#39;)]</span>

        
    </div>
    <a class="headerlink" href="#LinearTypesExceptVariable"></a>
    
    

                </section>
                <section id="UpperBoundedLinearExpression">
                            <input id="UpperBoundedLinearExpression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">UpperBoundedLinearExpression</span>:

                <label class="view-source-button" for="UpperBoundedLinearExpression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UpperBoundedLinearExpression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UpperBoundedLinearExpression-118"><a href="#UpperBoundedLinearExpression-118"><span class="linenos">118</span></a><span class="k">class</span> <span class="nc">UpperBoundedLinearExpression</span><span class="p">:</span>
</span><span id="UpperBoundedLinearExpression-119"><a href="#UpperBoundedLinearExpression-119"><span class="linenos">119</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An inequality of the form expression &lt;= upper_bound.</span>
</span><span id="UpperBoundedLinearExpression-120"><a href="#UpperBoundedLinearExpression-120"><span class="linenos">120</span></a>
</span><span id="UpperBoundedLinearExpression-121"><a href="#UpperBoundedLinearExpression-121"><span class="linenos">121</span></a><span class="sd">    Where:</span>
</span><span id="UpperBoundedLinearExpression-122"><a href="#UpperBoundedLinearExpression-122"><span class="linenos">122</span></a><span class="sd">     * expression is a linear expression, and</span>
</span><span id="UpperBoundedLinearExpression-123"><a href="#UpperBoundedLinearExpression-123"><span class="linenos">123</span></a><span class="sd">     * upper_bound is a float</span>
</span><span id="UpperBoundedLinearExpression-124"><a href="#UpperBoundedLinearExpression-124"><span class="linenos">124</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="UpperBoundedLinearExpression-125"><a href="#UpperBoundedLinearExpression-125"><span class="linenos">125</span></a>
</span><span id="UpperBoundedLinearExpression-126"><a href="#UpperBoundedLinearExpression-126"><span class="linenos">126</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_expression&quot;</span><span class="p">,</span> <span class="s2">&quot;_upper_bound&quot;</span>
</span><span id="UpperBoundedLinearExpression-127"><a href="#UpperBoundedLinearExpression-127"><span class="linenos">127</span></a>
</span><span id="UpperBoundedLinearExpression-128"><a href="#UpperBoundedLinearExpression-128"><span class="linenos">128</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="UpperBoundedLinearExpression-129"><a href="#UpperBoundedLinearExpression-129"><span class="linenos">129</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Operator overloading can be used instead: e.g. `x + y &lt;= 2.0`.&quot;&quot;&quot;</span>
</span><span id="UpperBoundedLinearExpression-130"><a href="#UpperBoundedLinearExpression-130"><span class="linenos">130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span> <span class="o">=</span> <span class="n">expression</span>
</span><span id="UpperBoundedLinearExpression-131"><a href="#UpperBoundedLinearExpression-131"><span class="linenos">131</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">upper_bound</span>
</span><span id="UpperBoundedLinearExpression-132"><a href="#UpperBoundedLinearExpression-132"><span class="linenos">132</span></a>
</span><span id="UpperBoundedLinearExpression-133"><a href="#UpperBoundedLinearExpression-133"><span class="linenos">133</span></a>    <span class="nd">@property</span>
</span><span id="UpperBoundedLinearExpression-134"><a href="#UpperBoundedLinearExpression-134"><span class="linenos">134</span></a>    <span class="k">def</span> <span class="nf">expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">:</span>
</span><span id="UpperBoundedLinearExpression-135"><a href="#UpperBoundedLinearExpression-135"><span class="linenos">135</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span>
</span><span id="UpperBoundedLinearExpression-136"><a href="#UpperBoundedLinearExpression-136"><span class="linenos">136</span></a>
</span><span id="UpperBoundedLinearExpression-137"><a href="#UpperBoundedLinearExpression-137"><span class="linenos">137</span></a>    <span class="nd">@property</span>
</span><span id="UpperBoundedLinearExpression-138"><a href="#UpperBoundedLinearExpression-138"><span class="linenos">138</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="UpperBoundedLinearExpression-139"><a href="#UpperBoundedLinearExpression-139"><span class="linenos">139</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span>
</span><span id="UpperBoundedLinearExpression-140"><a href="#UpperBoundedLinearExpression-140"><span class="linenos">140</span></a>
</span><span id="UpperBoundedLinearExpression-141"><a href="#UpperBoundedLinearExpression-141"><span class="linenos">141</span></a>    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BoundedLinearExpression&quot;</span><span class="p">:</span>
</span><span id="UpperBoundedLinearExpression-142"><a href="#UpperBoundedLinearExpression-142"><span class="linenos">142</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="UpperBoundedLinearExpression-143"><a href="#UpperBoundedLinearExpression-143"><span class="linenos">143</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expression</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">upper_bound</span><span class="p">)</span>
</span><span id="UpperBoundedLinearExpression-144"><a href="#UpperBoundedLinearExpression-144"><span class="linenos">144</span></a>        <span class="n">_raise_binary_operator_type_error</span><span class="p">(</span><span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">lhs</span><span class="p">))</span>
</span><span id="UpperBoundedLinearExpression-145"><a href="#UpperBoundedLinearExpression-145"><span class="linenos">145</span></a>
</span><span id="UpperBoundedLinearExpression-146"><a href="#UpperBoundedLinearExpression-146"><span class="linenos">146</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="UpperBoundedLinearExpression-147"><a href="#UpperBoundedLinearExpression-147"><span class="linenos">147</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="UpperBoundedLinearExpression-148"><a href="#UpperBoundedLinearExpression-148"><span class="linenos">148</span></a>            <span class="s2">&quot;__bool__ is unsupported for UpperBoundedLinearExpression&quot;</span>
</span><span id="UpperBoundedLinearExpression-149"><a href="#UpperBoundedLinearExpression-149"><span class="linenos">149</span></a>            <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="UpperBoundedLinearExpression-150"><a href="#UpperBoundedLinearExpression-150"><span class="linenos">150</span></a>            <span class="o">+</span> <span class="n">_CHAINED_COMPARISON_MESSAGE</span>
</span><span id="UpperBoundedLinearExpression-151"><a href="#UpperBoundedLinearExpression-151"><span class="linenos">151</span></a>        <span class="p">)</span>
</span><span id="UpperBoundedLinearExpression-152"><a href="#UpperBoundedLinearExpression-152"><span class="linenos">152</span></a>
</span><span id="UpperBoundedLinearExpression-153"><a href="#UpperBoundedLinearExpression-153"><span class="linenos">153</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="UpperBoundedLinearExpression-154"><a href="#UpperBoundedLinearExpression-154"><span class="linenos">154</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="si">!s}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="UpperBoundedLinearExpression-155"><a href="#UpperBoundedLinearExpression-155"><span class="linenos">155</span></a>
</span><span id="UpperBoundedLinearExpression-156"><a href="#UpperBoundedLinearExpression-156"><span class="linenos">156</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="UpperBoundedLinearExpression-157"><a href="#UpperBoundedLinearExpression-157"><span class="linenos">157</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="si">!r}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>An inequality of the form expression &lt;= upper_bound.</p>

<h6 id="where">Where:</h6>

<blockquote>
  <ul>
  <li>expression is a linear expression, and</li>
  <li>upper_bound is a float</li>
  </ul>
</blockquote>
</div>


                            <div id="UpperBoundedLinearExpression.__init__" class="classattr">
                                        <input id="UpperBoundedLinearExpression.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">UpperBoundedLinearExpression</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">expression</span><span class="p">:</span> <span class="n"><a href="#LinearBase">LinearBase</a></span>,</span><span class="param">	<span class="n">upper_bound</span><span class="p">:</span> <span class="nb">float</span></span>)</span>

                <label class="view-source-button" for="UpperBoundedLinearExpression.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UpperBoundedLinearExpression.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UpperBoundedLinearExpression.__init__-128"><a href="#UpperBoundedLinearExpression.__init__-128"><span class="linenos">128</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="UpperBoundedLinearExpression.__init__-129"><a href="#UpperBoundedLinearExpression.__init__-129"><span class="linenos">129</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Operator overloading can be used instead: e.g. `x + y &lt;= 2.0`.&quot;&quot;&quot;</span>
</span><span id="UpperBoundedLinearExpression.__init__-130"><a href="#UpperBoundedLinearExpression.__init__-130"><span class="linenos">130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span> <span class="o">=</span> <span class="n">expression</span>
</span><span id="UpperBoundedLinearExpression.__init__-131"><a href="#UpperBoundedLinearExpression.__init__-131"><span class="linenos">131</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">upper_bound</span>
</span></pre></div>


            <div class="docstring"><p>Operator overloading can be used instead: e.g. <code>x + y &lt;= 2.0</code>.</p>
</div>


                            </div>
                            <div id="UpperBoundedLinearExpression.expression" class="classattr">
                                        <input id="UpperBoundedLinearExpression.expression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">expression</span><span class="annotation">: <a href="#LinearBase">LinearBase</a></span>

                <label class="view-source-button" for="UpperBoundedLinearExpression.expression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UpperBoundedLinearExpression.expression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UpperBoundedLinearExpression.expression-133"><a href="#UpperBoundedLinearExpression.expression-133"><span class="linenos">133</span></a>    <span class="nd">@property</span>
</span><span id="UpperBoundedLinearExpression.expression-134"><a href="#UpperBoundedLinearExpression.expression-134"><span class="linenos">134</span></a>    <span class="k">def</span> <span class="nf">expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">:</span>
</span><span id="UpperBoundedLinearExpression.expression-135"><a href="#UpperBoundedLinearExpression.expression-135"><span class="linenos">135</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span>
</span></pre></div>


    

                            </div>
                            <div id="UpperBoundedLinearExpression.upper_bound" class="classattr">
                                        <input id="UpperBoundedLinearExpression.upper_bound-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">upper_bound</span><span class="annotation">: float</span>

                <label class="view-source-button" for="UpperBoundedLinearExpression.upper_bound-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UpperBoundedLinearExpression.upper_bound"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UpperBoundedLinearExpression.upper_bound-137"><a href="#UpperBoundedLinearExpression.upper_bound-137"><span class="linenos">137</span></a>    <span class="nd">@property</span>
</span><span id="UpperBoundedLinearExpression.upper_bound-138"><a href="#UpperBoundedLinearExpression.upper_bound-138"><span class="linenos">138</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="UpperBoundedLinearExpression.upper_bound-139"><a href="#UpperBoundedLinearExpression.upper_bound-139"><span class="linenos">139</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="LowerBoundedLinearExpression">
                            <input id="LowerBoundedLinearExpression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LowerBoundedLinearExpression</span>:

                <label class="view-source-button" for="LowerBoundedLinearExpression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LowerBoundedLinearExpression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LowerBoundedLinearExpression-160"><a href="#LowerBoundedLinearExpression-160"><span class="linenos">160</span></a><span class="k">class</span> <span class="nc">LowerBoundedLinearExpression</span><span class="p">:</span>
</span><span id="LowerBoundedLinearExpression-161"><a href="#LowerBoundedLinearExpression-161"><span class="linenos">161</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An inequality of the form expression &gt;= lower_bound.</span>
</span><span id="LowerBoundedLinearExpression-162"><a href="#LowerBoundedLinearExpression-162"><span class="linenos">162</span></a>
</span><span id="LowerBoundedLinearExpression-163"><a href="#LowerBoundedLinearExpression-163"><span class="linenos">163</span></a><span class="sd">    Where:</span>
</span><span id="LowerBoundedLinearExpression-164"><a href="#LowerBoundedLinearExpression-164"><span class="linenos">164</span></a><span class="sd">     * expression is a linear expression, and</span>
</span><span id="LowerBoundedLinearExpression-165"><a href="#LowerBoundedLinearExpression-165"><span class="linenos">165</span></a><span class="sd">     * lower_bound is a float</span>
</span><span id="LowerBoundedLinearExpression-166"><a href="#LowerBoundedLinearExpression-166"><span class="linenos">166</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="LowerBoundedLinearExpression-167"><a href="#LowerBoundedLinearExpression-167"><span class="linenos">167</span></a>
</span><span id="LowerBoundedLinearExpression-168"><a href="#LowerBoundedLinearExpression-168"><span class="linenos">168</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_expression&quot;</span><span class="p">,</span> <span class="s2">&quot;_lower_bound&quot;</span>
</span><span id="LowerBoundedLinearExpression-169"><a href="#LowerBoundedLinearExpression-169"><span class="linenos">169</span></a>
</span><span id="LowerBoundedLinearExpression-170"><a href="#LowerBoundedLinearExpression-170"><span class="linenos">170</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">,</span> <span class="n">lower_bound</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LowerBoundedLinearExpression-171"><a href="#LowerBoundedLinearExpression-171"><span class="linenos">171</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Operator overloading can be used instead: e.g. `x + y &gt;= 2.0`.&quot;&quot;&quot;</span>
</span><span id="LowerBoundedLinearExpression-172"><a href="#LowerBoundedLinearExpression-172"><span class="linenos">172</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span> <span class="o">=</span> <span class="n">expression</span>
</span><span id="LowerBoundedLinearExpression-173"><a href="#LowerBoundedLinearExpression-173"><span class="linenos">173</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">lower_bound</span>
</span><span id="LowerBoundedLinearExpression-174"><a href="#LowerBoundedLinearExpression-174"><span class="linenos">174</span></a>
</span><span id="LowerBoundedLinearExpression-175"><a href="#LowerBoundedLinearExpression-175"><span class="linenos">175</span></a>    <span class="nd">@property</span>
</span><span id="LowerBoundedLinearExpression-176"><a href="#LowerBoundedLinearExpression-176"><span class="linenos">176</span></a>    <span class="k">def</span> <span class="nf">expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">:</span>
</span><span id="LowerBoundedLinearExpression-177"><a href="#LowerBoundedLinearExpression-177"><span class="linenos">177</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span>
</span><span id="LowerBoundedLinearExpression-178"><a href="#LowerBoundedLinearExpression-178"><span class="linenos">178</span></a>
</span><span id="LowerBoundedLinearExpression-179"><a href="#LowerBoundedLinearExpression-179"><span class="linenos">179</span></a>    <span class="nd">@property</span>
</span><span id="LowerBoundedLinearExpression-180"><a href="#LowerBoundedLinearExpression-180"><span class="linenos">180</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LowerBoundedLinearExpression-181"><a href="#LowerBoundedLinearExpression-181"><span class="linenos">181</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span>
</span><span id="LowerBoundedLinearExpression-182"><a href="#LowerBoundedLinearExpression-182"><span class="linenos">182</span></a>
</span><span id="LowerBoundedLinearExpression-183"><a href="#LowerBoundedLinearExpression-183"><span class="linenos">183</span></a>    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BoundedLinearExpression&quot;</span><span class="p">:</span>
</span><span id="LowerBoundedLinearExpression-184"><a href="#LowerBoundedLinearExpression-184"><span class="linenos">184</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="LowerBoundedLinearExpression-185"><a href="#LowerBoundedLinearExpression-185"><span class="linenos">185</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lower_bound</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">expression</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
</span><span id="LowerBoundedLinearExpression-186"><a href="#LowerBoundedLinearExpression-186"><span class="linenos">186</span></a>        <span class="n">_raise_binary_operator_type_error</span><span class="p">(</span><span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">rhs</span><span class="p">))</span>
</span><span id="LowerBoundedLinearExpression-187"><a href="#LowerBoundedLinearExpression-187"><span class="linenos">187</span></a>
</span><span id="LowerBoundedLinearExpression-188"><a href="#LowerBoundedLinearExpression-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="LowerBoundedLinearExpression-189"><a href="#LowerBoundedLinearExpression-189"><span class="linenos">189</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="LowerBoundedLinearExpression-190"><a href="#LowerBoundedLinearExpression-190"><span class="linenos">190</span></a>            <span class="s2">&quot;__bool__ is unsupported for LowerBoundedLinearExpression&quot;</span>
</span><span id="LowerBoundedLinearExpression-191"><a href="#LowerBoundedLinearExpression-191"><span class="linenos">191</span></a>            <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="LowerBoundedLinearExpression-192"><a href="#LowerBoundedLinearExpression-192"><span class="linenos">192</span></a>            <span class="o">+</span> <span class="n">_CHAINED_COMPARISON_MESSAGE</span>
</span><span id="LowerBoundedLinearExpression-193"><a href="#LowerBoundedLinearExpression-193"><span class="linenos">193</span></a>        <span class="p">)</span>
</span><span id="LowerBoundedLinearExpression-194"><a href="#LowerBoundedLinearExpression-194"><span class="linenos">194</span></a>
</span><span id="LowerBoundedLinearExpression-195"><a href="#LowerBoundedLinearExpression-195"><span class="linenos">195</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LowerBoundedLinearExpression-196"><a href="#LowerBoundedLinearExpression-196"><span class="linenos">196</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="si">!s}</span><span class="s2"> &gt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="LowerBoundedLinearExpression-197"><a href="#LowerBoundedLinearExpression-197"><span class="linenos">197</span></a>
</span><span id="LowerBoundedLinearExpression-198"><a href="#LowerBoundedLinearExpression-198"><span class="linenos">198</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LowerBoundedLinearExpression-199"><a href="#LowerBoundedLinearExpression-199"><span class="linenos">199</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="si">!r}</span><span class="s2"> &gt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>An inequality of the form expression &gt;= lower_bound.</p>

<h6 id="where">Where:</h6>

<blockquote>
  <ul>
  <li>expression is a linear expression, and</li>
  <li>lower_bound is a float</li>
  </ul>
</blockquote>
</div>


                            <div id="LowerBoundedLinearExpression.__init__" class="classattr">
                                        <input id="LowerBoundedLinearExpression.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">LowerBoundedLinearExpression</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">expression</span><span class="p">:</span> <span class="n"><a href="#LinearBase">LinearBase</a></span>,</span><span class="param">	<span class="n">lower_bound</span><span class="p">:</span> <span class="nb">float</span></span>)</span>

                <label class="view-source-button" for="LowerBoundedLinearExpression.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LowerBoundedLinearExpression.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LowerBoundedLinearExpression.__init__-170"><a href="#LowerBoundedLinearExpression.__init__-170"><span class="linenos">170</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">,</span> <span class="n">lower_bound</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LowerBoundedLinearExpression.__init__-171"><a href="#LowerBoundedLinearExpression.__init__-171"><span class="linenos">171</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Operator overloading can be used instead: e.g. `x + y &gt;= 2.0`.&quot;&quot;&quot;</span>
</span><span id="LowerBoundedLinearExpression.__init__-172"><a href="#LowerBoundedLinearExpression.__init__-172"><span class="linenos">172</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span> <span class="o">=</span> <span class="n">expression</span>
</span><span id="LowerBoundedLinearExpression.__init__-173"><a href="#LowerBoundedLinearExpression.__init__-173"><span class="linenos">173</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">lower_bound</span>
</span></pre></div>


            <div class="docstring"><p>Operator overloading can be used instead: e.g. <code>x + y &gt;= 2.0</code>.</p>
</div>


                            </div>
                            <div id="LowerBoundedLinearExpression.expression" class="classattr">
                                        <input id="LowerBoundedLinearExpression.expression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">expression</span><span class="annotation">: <a href="#LinearBase">LinearBase</a></span>

                <label class="view-source-button" for="LowerBoundedLinearExpression.expression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LowerBoundedLinearExpression.expression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LowerBoundedLinearExpression.expression-175"><a href="#LowerBoundedLinearExpression.expression-175"><span class="linenos">175</span></a>    <span class="nd">@property</span>
</span><span id="LowerBoundedLinearExpression.expression-176"><a href="#LowerBoundedLinearExpression.expression-176"><span class="linenos">176</span></a>    <span class="k">def</span> <span class="nf">expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">:</span>
</span><span id="LowerBoundedLinearExpression.expression-177"><a href="#LowerBoundedLinearExpression.expression-177"><span class="linenos">177</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span>
</span></pre></div>


    

                            </div>
                            <div id="LowerBoundedLinearExpression.lower_bound" class="classattr">
                                        <input id="LowerBoundedLinearExpression.lower_bound-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">lower_bound</span><span class="annotation">: float</span>

                <label class="view-source-button" for="LowerBoundedLinearExpression.lower_bound-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LowerBoundedLinearExpression.lower_bound"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LowerBoundedLinearExpression.lower_bound-179"><a href="#LowerBoundedLinearExpression.lower_bound-179"><span class="linenos">179</span></a>    <span class="nd">@property</span>
</span><span id="LowerBoundedLinearExpression.lower_bound-180"><a href="#LowerBoundedLinearExpression.lower_bound-180"><span class="linenos">180</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LowerBoundedLinearExpression.lower_bound-181"><a href="#LowerBoundedLinearExpression.lower_bound-181"><span class="linenos">181</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="BoundedLinearExpression">
                            <input id="BoundedLinearExpression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">BoundedLinearExpression</span>:

                <label class="view-source-button" for="BoundedLinearExpression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BoundedLinearExpression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BoundedLinearExpression-202"><a href="#BoundedLinearExpression-202"><span class="linenos">202</span></a><span class="k">class</span> <span class="nc">BoundedLinearExpression</span><span class="p">:</span>
</span><span id="BoundedLinearExpression-203"><a href="#BoundedLinearExpression-203"><span class="linenos">203</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An inequality of the form lower_bound &lt;= expression &lt;= upper_bound.</span>
</span><span id="BoundedLinearExpression-204"><a href="#BoundedLinearExpression-204"><span class="linenos">204</span></a>
</span><span id="BoundedLinearExpression-205"><a href="#BoundedLinearExpression-205"><span class="linenos">205</span></a><span class="sd">    Where:</span>
</span><span id="BoundedLinearExpression-206"><a href="#BoundedLinearExpression-206"><span class="linenos">206</span></a><span class="sd">     * expression is a linear expression</span>
</span><span id="BoundedLinearExpression-207"><a href="#BoundedLinearExpression-207"><span class="linenos">207</span></a><span class="sd">     * lower_bound is a float, and</span>
</span><span id="BoundedLinearExpression-208"><a href="#BoundedLinearExpression-208"><span class="linenos">208</span></a><span class="sd">     * upper_bound is a float</span>
</span><span id="BoundedLinearExpression-209"><a href="#BoundedLinearExpression-209"><span class="linenos">209</span></a>
</span><span id="BoundedLinearExpression-210"><a href="#BoundedLinearExpression-210"><span class="linenos">210</span></a><span class="sd">    Note: Because of limitations related to Python&#39;s handling of chained</span>
</span><span id="BoundedLinearExpression-211"><a href="#BoundedLinearExpression-211"><span class="linenos">211</span></a><span class="sd">    comparisons, bounded expressions cannot be directly created usign</span>
</span><span id="BoundedLinearExpression-212"><a href="#BoundedLinearExpression-212"><span class="linenos">212</span></a><span class="sd">    overloaded comparisons as in `lower_bound &lt;= expression &lt;= upper_bound`.</span>
</span><span id="BoundedLinearExpression-213"><a href="#BoundedLinearExpression-213"><span class="linenos">213</span></a><span class="sd">    One solution is to wrap one of the inequalities in parenthesis as in</span>
</span><span id="BoundedLinearExpression-214"><a href="#BoundedLinearExpression-214"><span class="linenos">214</span></a><span class="sd">    `(lower_bound &lt;= expression) &lt;= upper_bound`.</span>
</span><span id="BoundedLinearExpression-215"><a href="#BoundedLinearExpression-215"><span class="linenos">215</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="BoundedLinearExpression-216"><a href="#BoundedLinearExpression-216"><span class="linenos">216</span></a>
</span><span id="BoundedLinearExpression-217"><a href="#BoundedLinearExpression-217"><span class="linenos">217</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_expression&quot;</span><span class="p">,</span> <span class="s2">&quot;_lower_bound&quot;</span><span class="p">,</span> <span class="s2">&quot;_upper_bound&quot;</span>
</span><span id="BoundedLinearExpression-218"><a href="#BoundedLinearExpression-218"><span class="linenos">218</span></a>
</span><span id="BoundedLinearExpression-219"><a href="#BoundedLinearExpression-219"><span class="linenos">219</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="BoundedLinearExpression-220"><a href="#BoundedLinearExpression-220"><span class="linenos">220</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">lower_bound</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="BoundedLinearExpression-221"><a href="#BoundedLinearExpression-221"><span class="linenos">221</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BoundedLinearExpression-222"><a href="#BoundedLinearExpression-222"><span class="linenos">222</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span> <span class="o">=</span> <span class="n">expression</span>
</span><span id="BoundedLinearExpression-223"><a href="#BoundedLinearExpression-223"><span class="linenos">223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">lower_bound</span>
</span><span id="BoundedLinearExpression-224"><a href="#BoundedLinearExpression-224"><span class="linenos">224</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">upper_bound</span>
</span><span id="BoundedLinearExpression-225"><a href="#BoundedLinearExpression-225"><span class="linenos">225</span></a>
</span><span id="BoundedLinearExpression-226"><a href="#BoundedLinearExpression-226"><span class="linenos">226</span></a>    <span class="nd">@property</span>
</span><span id="BoundedLinearExpression-227"><a href="#BoundedLinearExpression-227"><span class="linenos">227</span></a>    <span class="k">def</span> <span class="nf">expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">:</span>
</span><span id="BoundedLinearExpression-228"><a href="#BoundedLinearExpression-228"><span class="linenos">228</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span>
</span><span id="BoundedLinearExpression-229"><a href="#BoundedLinearExpression-229"><span class="linenos">229</span></a>
</span><span id="BoundedLinearExpression-230"><a href="#BoundedLinearExpression-230"><span class="linenos">230</span></a>    <span class="nd">@property</span>
</span><span id="BoundedLinearExpression-231"><a href="#BoundedLinearExpression-231"><span class="linenos">231</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="BoundedLinearExpression-232"><a href="#BoundedLinearExpression-232"><span class="linenos">232</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span>
</span><span id="BoundedLinearExpression-233"><a href="#BoundedLinearExpression-233"><span class="linenos">233</span></a>
</span><span id="BoundedLinearExpression-234"><a href="#BoundedLinearExpression-234"><span class="linenos">234</span></a>    <span class="nd">@property</span>
</span><span id="BoundedLinearExpression-235"><a href="#BoundedLinearExpression-235"><span class="linenos">235</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="BoundedLinearExpression-236"><a href="#BoundedLinearExpression-236"><span class="linenos">236</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span>
</span><span id="BoundedLinearExpression-237"><a href="#BoundedLinearExpression-237"><span class="linenos">237</span></a>
</span><span id="BoundedLinearExpression-238"><a href="#BoundedLinearExpression-238"><span class="linenos">238</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="BoundedLinearExpression-239"><a href="#BoundedLinearExpression-239"><span class="linenos">239</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="BoundedLinearExpression-240"><a href="#BoundedLinearExpression-240"><span class="linenos">240</span></a>            <span class="s2">&quot;__bool__ is unsupported for BoundedLinearExpression&quot;</span>
</span><span id="BoundedLinearExpression-241"><a href="#BoundedLinearExpression-241"><span class="linenos">241</span></a>            <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="BoundedLinearExpression-242"><a href="#BoundedLinearExpression-242"><span class="linenos">242</span></a>            <span class="o">+</span> <span class="n">_CHAINED_COMPARISON_MESSAGE</span>
</span><span id="BoundedLinearExpression-243"><a href="#BoundedLinearExpression-243"><span class="linenos">243</span></a>        <span class="p">)</span>
</span><span id="BoundedLinearExpression-244"><a href="#BoundedLinearExpression-244"><span class="linenos">244</span></a>
</span><span id="BoundedLinearExpression-245"><a href="#BoundedLinearExpression-245"><span class="linenos">245</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="BoundedLinearExpression-246"><a href="#BoundedLinearExpression-246"><span class="linenos">246</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="si">!s}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="BoundedLinearExpression-247"><a href="#BoundedLinearExpression-247"><span class="linenos">247</span></a>
</span><span id="BoundedLinearExpression-248"><a href="#BoundedLinearExpression-248"><span class="linenos">248</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="BoundedLinearExpression-249"><a href="#BoundedLinearExpression-249"><span class="linenos">249</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span><span class="si">}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="si">!r}</span><span class="s2"> &lt;= </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>An inequality of the form lower_bound &lt;= expression &lt;= upper_bound.</p>

<h6 id="where">Where:</h6>

<blockquote>
  <ul>
  <li>expression is a linear expression</li>
  <li>lower_bound is a float, and</li>
  <li>upper_bound is a float</li>
  </ul>
</blockquote>

<p>Note: Because of limitations related to Python's handling of chained
comparisons, bounded expressions cannot be directly created usign
overloaded comparisons as in <code>lower_bound &lt;= expression &lt;= upper_bound</code>.
One solution is to wrap one of the inequalities in parenthesis as in
<code>(lower_bound &lt;= expression) &lt;= upper_bound</code>.</p>
</div>


                            <div id="BoundedLinearExpression.__init__" class="classattr">
                                        <input id="BoundedLinearExpression.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">BoundedLinearExpression</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">lower_bound</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">expression</span><span class="p">:</span> <span class="n"><a href="#LinearBase">LinearBase</a></span>,</span><span class="param">	<span class="n">upper_bound</span><span class="p">:</span> <span class="nb">float</span></span>)</span>

                <label class="view-source-button" for="BoundedLinearExpression.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BoundedLinearExpression.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BoundedLinearExpression.__init__-219"><a href="#BoundedLinearExpression.__init__-219"><span class="linenos">219</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="BoundedLinearExpression.__init__-220"><a href="#BoundedLinearExpression.__init__-220"><span class="linenos">220</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">lower_bound</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">,</span> <span class="n">upper_bound</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="BoundedLinearExpression.__init__-221"><a href="#BoundedLinearExpression.__init__-221"><span class="linenos">221</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BoundedLinearExpression.__init__-222"><a href="#BoundedLinearExpression.__init__-222"><span class="linenos">222</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span> <span class="o">=</span> <span class="n">expression</span>
</span><span id="BoundedLinearExpression.__init__-223"><a href="#BoundedLinearExpression.__init__-223"><span class="linenos">223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">lower_bound</span>
</span><span id="BoundedLinearExpression.__init__-224"><a href="#BoundedLinearExpression.__init__-224"><span class="linenos">224</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">upper_bound</span>
</span></pre></div>


    

                            </div>
                            <div id="BoundedLinearExpression.expression" class="classattr">
                                        <input id="BoundedLinearExpression.expression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">expression</span><span class="annotation">: <a href="#LinearBase">LinearBase</a></span>

                <label class="view-source-button" for="BoundedLinearExpression.expression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BoundedLinearExpression.expression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BoundedLinearExpression.expression-226"><a href="#BoundedLinearExpression.expression-226"><span class="linenos">226</span></a>    <span class="nd">@property</span>
</span><span id="BoundedLinearExpression.expression-227"><a href="#BoundedLinearExpression.expression-227"><span class="linenos">227</span></a>    <span class="k">def</span> <span class="nf">expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">:</span>
</span><span id="BoundedLinearExpression.expression-228"><a href="#BoundedLinearExpression.expression-228"><span class="linenos">228</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_expression</span>
</span></pre></div>


    

                            </div>
                            <div id="BoundedLinearExpression.lower_bound" class="classattr">
                                        <input id="BoundedLinearExpression.lower_bound-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">lower_bound</span><span class="annotation">: float</span>

                <label class="view-source-button" for="BoundedLinearExpression.lower_bound-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BoundedLinearExpression.lower_bound"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BoundedLinearExpression.lower_bound-230"><a href="#BoundedLinearExpression.lower_bound-230"><span class="linenos">230</span></a>    <span class="nd">@property</span>
</span><span id="BoundedLinearExpression.lower_bound-231"><a href="#BoundedLinearExpression.lower_bound-231"><span class="linenos">231</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="BoundedLinearExpression.lower_bound-232"><a href="#BoundedLinearExpression.lower_bound-232"><span class="linenos">232</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lower_bound</span>
</span></pre></div>


    

                            </div>
                            <div id="BoundedLinearExpression.upper_bound" class="classattr">
                                        <input id="BoundedLinearExpression.upper_bound-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">upper_bound</span><span class="annotation">: float</span>

                <label class="view-source-button" for="BoundedLinearExpression.upper_bound-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BoundedLinearExpression.upper_bound"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BoundedLinearExpression.upper_bound-234"><a href="#BoundedLinearExpression.upper_bound-234"><span class="linenos">234</span></a>    <span class="nd">@property</span>
</span><span id="BoundedLinearExpression.upper_bound-235"><a href="#BoundedLinearExpression.upper_bound-235"><span class="linenos">235</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="BoundedLinearExpression.upper_bound-236"><a href="#BoundedLinearExpression.upper_bound-236"><span class="linenos">236</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_upper_bound</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="VarEqVar">
                            <input id="VarEqVar-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">VarEqVar</span>:

                <label class="view-source-button" for="VarEqVar-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#VarEqVar"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="VarEqVar-252"><a href="#VarEqVar-252"><span class="linenos">252</span></a><span class="k">class</span> <span class="nc">VarEqVar</span><span class="p">:</span>
</span><span id="VarEqVar-253"><a href="#VarEqVar-253"><span class="linenos">253</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The result of the equality comparison between two Variable.</span>
</span><span id="VarEqVar-254"><a href="#VarEqVar-254"><span class="linenos">254</span></a>
</span><span id="VarEqVar-255"><a href="#VarEqVar-255"><span class="linenos">255</span></a><span class="sd">    We use an object here to delay the evaluation of equality so that we can use</span>
</span><span id="VarEqVar-256"><a href="#VarEqVar-256"><span class="linenos">256</span></a><span class="sd">    the operator== in two use-cases:</span>
</span><span id="VarEqVar-257"><a href="#VarEqVar-257"><span class="linenos">257</span></a>
</span><span id="VarEqVar-258"><a href="#VarEqVar-258"><span class="linenos">258</span></a><span class="sd">      1. when the user want to test that two Variable values references the same</span>
</span><span id="VarEqVar-259"><a href="#VarEqVar-259"><span class="linenos">259</span></a><span class="sd">         variable. This is supported by having this object support implicit</span>
</span><span id="VarEqVar-260"><a href="#VarEqVar-260"><span class="linenos">260</span></a><span class="sd">         conversion to bool.</span>
</span><span id="VarEqVar-261"><a href="#VarEqVar-261"><span class="linenos">261</span></a>
</span><span id="VarEqVar-262"><a href="#VarEqVar-262"><span class="linenos">262</span></a><span class="sd">      2. when the user want to use the equality to create a constraint of equality</span>
</span><span id="VarEqVar-263"><a href="#VarEqVar-263"><span class="linenos">263</span></a><span class="sd">         between two variables.</span>
</span><span id="VarEqVar-264"><a href="#VarEqVar-264"><span class="linenos">264</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="VarEqVar-265"><a href="#VarEqVar-265"><span class="linenos">265</span></a>
</span><span id="VarEqVar-266"><a href="#VarEqVar-266"><span class="linenos">266</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_first_variable&quot;</span><span class="p">,</span> <span class="s2">&quot;_second_variable&quot;</span>
</span><span id="VarEqVar-267"><a href="#VarEqVar-267"><span class="linenos">267</span></a>
</span><span id="VarEqVar-268"><a href="#VarEqVar-268"><span class="linenos">268</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="VarEqVar-269"><a href="#VarEqVar-269"><span class="linenos">269</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="VarEqVar-270"><a href="#VarEqVar-270"><span class="linenos">270</span></a>        <span class="n">first_variable</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">,</span>
</span><span id="VarEqVar-271"><a href="#VarEqVar-271"><span class="linenos">271</span></a>        <span class="n">second_variable</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">,</span>
</span><span id="VarEqVar-272"><a href="#VarEqVar-272"><span class="linenos">272</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="VarEqVar-273"><a href="#VarEqVar-273"><span class="linenos">273</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_first_variable</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span> <span class="o">=</span> <span class="n">first_variable</span>
</span><span id="VarEqVar-274"><a href="#VarEqVar-274"><span class="linenos">274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_second_variable</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span> <span class="o">=</span> <span class="n">second_variable</span>
</span><span id="VarEqVar-275"><a href="#VarEqVar-275"><span class="linenos">275</span></a>
</span><span id="VarEqVar-276"><a href="#VarEqVar-276"><span class="linenos">276</span></a>    <span class="nd">@property</span>
</span><span id="VarEqVar-277"><a href="#VarEqVar-277"><span class="linenos">277</span></a>    <span class="k">def</span> <span class="nf">first_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Variable&quot;</span><span class="p">:</span>
</span><span id="VarEqVar-278"><a href="#VarEqVar-278"><span class="linenos">278</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_variable</span>
</span><span id="VarEqVar-279"><a href="#VarEqVar-279"><span class="linenos">279</span></a>
</span><span id="VarEqVar-280"><a href="#VarEqVar-280"><span class="linenos">280</span></a>    <span class="nd">@property</span>
</span><span id="VarEqVar-281"><a href="#VarEqVar-281"><span class="linenos">281</span></a>    <span class="k">def</span> <span class="nf">second_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Variable&quot;</span><span class="p">:</span>
</span><span id="VarEqVar-282"><a href="#VarEqVar-282"><span class="linenos">282</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_variable</span>
</span><span id="VarEqVar-283"><a href="#VarEqVar-283"><span class="linenos">283</span></a>
</span><span id="VarEqVar-284"><a href="#VarEqVar-284"><span class="linenos">284</span></a>    <span class="k">def</span> <span class="fm">__bool__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="VarEqVar-285"><a href="#VarEqVar-285"><span class="linenos">285</span></a>        <span class="k">return</span> <span class="p">(</span>
</span><span id="VarEqVar-286"><a href="#VarEqVar-286"><span class="linenos">286</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_first_variable</span><span class="o">.</span><span class="n">model</span> <span class="ow">is</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_variable</span><span class="o">.</span><span class="n">model</span>
</span><span id="VarEqVar-287"><a href="#VarEqVar-287"><span class="linenos">287</span></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_variable</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_variable</span><span class="o">.</span><span class="n">id</span>
</span><span id="VarEqVar-288"><a href="#VarEqVar-288"><span class="linenos">288</span></a>        <span class="p">)</span>
</span><span id="VarEqVar-289"><a href="#VarEqVar-289"><span class="linenos">289</span></a>
</span><span id="VarEqVar-290"><a href="#VarEqVar-290"><span class="linenos">290</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="VarEqVar-291"><a href="#VarEqVar-291"><span class="linenos">291</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">first_variable</span><span class="si">!s}</span><span class="s2"> == </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_second_variable</span><span class="si">!s}</span><span class="s2">&quot;</span>
</span><span id="VarEqVar-292"><a href="#VarEqVar-292"><span class="linenos">292</span></a>
</span><span id="VarEqVar-293"><a href="#VarEqVar-293"><span class="linenos">293</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="VarEqVar-294"><a href="#VarEqVar-294"><span class="linenos">294</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">first_variable</span><span class="si">!r}</span><span class="s2"> == </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_second_variable</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The result of the equality comparison between two Variable.</p>

<p>We use an object here to delay the evaluation of equality so that we can use
the operator== in two use-cases:</p>

<ol>
<li><p>when the user want to test that two Variable values references the same
 variable. This is supported by having this object support implicit
 conversion to bool.</p></li>
<li><p>when the user want to use the equality to create a constraint of equality
 between two variables.</p></li>
</ol>
</div>


                            <div id="VarEqVar.__init__" class="classattr">
                                        <input id="VarEqVar.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">VarEqVar</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">first_variable</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span>,</span><span class="param">	<span class="n">second_variable</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span></span>)</span>

                <label class="view-source-button" for="VarEqVar.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#VarEqVar.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="VarEqVar.__init__-268"><a href="#VarEqVar.__init__-268"><span class="linenos">268</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="VarEqVar.__init__-269"><a href="#VarEqVar.__init__-269"><span class="linenos">269</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="VarEqVar.__init__-270"><a href="#VarEqVar.__init__-270"><span class="linenos">270</span></a>        <span class="n">first_variable</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">,</span>
</span><span id="VarEqVar.__init__-271"><a href="#VarEqVar.__init__-271"><span class="linenos">271</span></a>        <span class="n">second_variable</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">,</span>
</span><span id="VarEqVar.__init__-272"><a href="#VarEqVar.__init__-272"><span class="linenos">272</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="VarEqVar.__init__-273"><a href="#VarEqVar.__init__-273"><span class="linenos">273</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_first_variable</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span> <span class="o">=</span> <span class="n">first_variable</span>
</span><span id="VarEqVar.__init__-274"><a href="#VarEqVar.__init__-274"><span class="linenos">274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_second_variable</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span> <span class="o">=</span> <span class="n">second_variable</span>
</span></pre></div>


    

                            </div>
                            <div id="VarEqVar.first_variable" class="classattr">
                                        <input id="VarEqVar.first_variable-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">first_variable</span><span class="annotation">: <a href="#Variable">Variable</a></span>

                <label class="view-source-button" for="VarEqVar.first_variable-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#VarEqVar.first_variable"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="VarEqVar.first_variable-276"><a href="#VarEqVar.first_variable-276"><span class="linenos">276</span></a>    <span class="nd">@property</span>
</span><span id="VarEqVar.first_variable-277"><a href="#VarEqVar.first_variable-277"><span class="linenos">277</span></a>    <span class="k">def</span> <span class="nf">first_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Variable&quot;</span><span class="p">:</span>
</span><span id="VarEqVar.first_variable-278"><a href="#VarEqVar.first_variable-278"><span class="linenos">278</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_variable</span>
</span></pre></div>


    

                            </div>
                            <div id="VarEqVar.second_variable" class="classattr">
                                        <input id="VarEqVar.second_variable-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">second_variable</span><span class="annotation">: <a href="#Variable">Variable</a></span>

                <label class="view-source-button" for="VarEqVar.second_variable-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#VarEqVar.second_variable"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="VarEqVar.second_variable-280"><a href="#VarEqVar.second_variable-280"><span class="linenos">280</span></a>    <span class="nd">@property</span>
</span><span id="VarEqVar.second_variable-281"><a href="#VarEqVar.second_variable-281"><span class="linenos">281</span></a>    <span class="k">def</span> <span class="nf">second_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Variable&quot;</span><span class="p">:</span>
</span><span id="VarEqVar.second_variable-282"><a href="#VarEqVar.second_variable-282"><span class="linenos">282</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_variable</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="BoundedLinearTypesList">
                    <div class="attr variable">
            <span class="name">BoundedLinearTypesList</span>        =
<input id="BoundedLinearTypesList-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="BoundedLinearTypesList-view-value"></label><span class="default_value">(&lt;class &#39;<a href="#LowerBoundedLinearExpression">LowerBoundedLinearExpression</a>&#39;&gt;, &lt;class &#39;<a href="#UpperBoundedLinearExpression">UpperBoundedLinearExpression</a>&#39;&gt;, &lt;class &#39;<a href="#BoundedLinearExpression">BoundedLinearExpression</a>&#39;&gt;, &lt;class &#39;<a href="#VarEqVar">VarEqVar</a>&#39;&gt;)</span>

        
    </div>
    <a class="headerlink" href="#BoundedLinearTypesList"></a>
    
    

                </section>
                <section id="BoundedLinearTypes">
                    <div class="attr variable">
            <span class="name">BoundedLinearTypes</span>        =
<input id="BoundedLinearTypes-view-value" class="view-value-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
            <label class="view-value-button pdoc-button" for="BoundedLinearTypes-view-value"></label><span class="default_value">typing.Union[<a href="#LowerBoundedLinearExpression">LowerBoundedLinearExpression</a>, <a href="#UpperBoundedLinearExpression">UpperBoundedLinearExpression</a>, <a href="#BoundedLinearExpression">BoundedLinearExpression</a>, <a href="#VarEqVar">VarEqVar</a>]</span>

        
    </div>
    <a class="headerlink" href="#BoundedLinearTypes"></a>
    
    

                </section>
                <section id="QuadraticTermKey">
                            <input id="QuadraticTermKey-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">QuadraticTermKey</span>:

                <label class="view-source-button" for="QuadraticTermKey-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticTermKey"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticTermKey-307"><a href="#QuadraticTermKey-307"><span class="linenos">307</span></a><span class="k">class</span> <span class="nc">QuadraticTermKey</span><span class="p">:</span>
</span><span id="QuadraticTermKey-308"><a href="#QuadraticTermKey-308"><span class="linenos">308</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An id-ordered pair of variables used as a key for quadratic terms.&quot;&quot;&quot;</span>
</span><span id="QuadraticTermKey-309"><a href="#QuadraticTermKey-309"><span class="linenos">309</span></a>
</span><span id="QuadraticTermKey-310"><a href="#QuadraticTermKey-310"><span class="linenos">310</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_first_var&quot;</span><span class="p">,</span> <span class="s2">&quot;_second_var&quot;</span>
</span><span id="QuadraticTermKey-311"><a href="#QuadraticTermKey-311"><span class="linenos">311</span></a>
</span><span id="QuadraticTermKey-312"><a href="#QuadraticTermKey-312"><span class="linenos">312</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">):</span>
</span><span id="QuadraticTermKey-313"><a href="#QuadraticTermKey-313"><span class="linenos">313</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Variables a and b will be ordered internally by their ids.&quot;&quot;&quot;</span>
</span><span id="QuadraticTermKey-314"><a href="#QuadraticTermKey-314"><span class="linenos">314</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span> <span class="o">=</span> <span class="n">a</span>
</span><span id="QuadraticTermKey-315"><a href="#QuadraticTermKey-315"><span class="linenos">315</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span> <span class="o">=</span> <span class="n">b</span>
</span><span id="QuadraticTermKey-316"><a href="#QuadraticTermKey-316"><span class="linenos">316</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="o">.</span><span class="n">id</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
</span><span id="QuadraticTermKey-317"><a href="#QuadraticTermKey-317"><span class="linenos">317</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span>
</span><span id="QuadraticTermKey-318"><a href="#QuadraticTermKey-318"><span class="linenos">318</span></a>
</span><span id="QuadraticTermKey-319"><a href="#QuadraticTermKey-319"><span class="linenos">319</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticTermKey-320"><a href="#QuadraticTermKey-320"><span class="linenos">320</span></a>    <span class="k">def</span> <span class="nf">first_var</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Variable&quot;</span><span class="p">:</span>
</span><span id="QuadraticTermKey-321"><a href="#QuadraticTermKey-321"><span class="linenos">321</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span>
</span><span id="QuadraticTermKey-322"><a href="#QuadraticTermKey-322"><span class="linenos">322</span></a>
</span><span id="QuadraticTermKey-323"><a href="#QuadraticTermKey-323"><span class="linenos">323</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticTermKey-324"><a href="#QuadraticTermKey-324"><span class="linenos">324</span></a>    <span class="k">def</span> <span class="nf">second_var</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Variable&quot;</span><span class="p">:</span>
</span><span id="QuadraticTermKey-325"><a href="#QuadraticTermKey-325"><span class="linenos">325</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span>
</span><span id="QuadraticTermKey-326"><a href="#QuadraticTermKey-326"><span class="linenos">326</span></a>
</span><span id="QuadraticTermKey-327"><a href="#QuadraticTermKey-327"><span class="linenos">327</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;QuadraticTermKey&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="QuadraticTermKey-328"><a href="#QuadraticTermKey-328"><span class="linenos">328</span></a>        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span>
</span><span id="QuadraticTermKey-329"><a href="#QuadraticTermKey-329"><span class="linenos">329</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_first_var</span>
</span><span id="QuadraticTermKey-330"><a href="#QuadraticTermKey-330"><span class="linenos">330</span></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_second_var</span>
</span><span id="QuadraticTermKey-331"><a href="#QuadraticTermKey-331"><span class="linenos">331</span></a>        <span class="p">)</span>
</span><span id="QuadraticTermKey-332"><a href="#QuadraticTermKey-332"><span class="linenos">332</span></a>
</span><span id="QuadraticTermKey-333"><a href="#QuadraticTermKey-333"><span class="linenos">333</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="QuadraticTermKey-334"><a href="#QuadraticTermKey-334"><span class="linenos">334</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="p">))</span>
</span><span id="QuadraticTermKey-335"><a href="#QuadraticTermKey-335"><span class="linenos">335</span></a>
</span><span id="QuadraticTermKey-336"><a href="#QuadraticTermKey-336"><span class="linenos">336</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="QuadraticTermKey-337"><a href="#QuadraticTermKey-337"><span class="linenos">337</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="si">!s}</span><span class="s2"> * </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="si">!s}</span><span class="s2">&quot;</span>
</span><span id="QuadraticTermKey-338"><a href="#QuadraticTermKey-338"><span class="linenos">338</span></a>
</span><span id="QuadraticTermKey-339"><a href="#QuadraticTermKey-339"><span class="linenos">339</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="QuadraticTermKey-340"><a href="#QuadraticTermKey-340"><span class="linenos">340</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;QuadraticTermKey(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="si">!r}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="si">!r}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>An id-ordered pair of variables used as a key for quadratic terms.</p>
</div>


                            <div id="QuadraticTermKey.__init__" class="classattr">
                                        <input id="QuadraticTermKey.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">QuadraticTermKey</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">a</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span>,</span><span class="param">	<span class="n">b</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span></span>)</span>

                <label class="view-source-button" for="QuadraticTermKey.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticTermKey.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticTermKey.__init__-312"><a href="#QuadraticTermKey.__init__-312"><span class="linenos">312</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">):</span>
</span><span id="QuadraticTermKey.__init__-313"><a href="#QuadraticTermKey.__init__-313"><span class="linenos">313</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Variables a and b will be ordered internally by their ids.&quot;&quot;&quot;</span>
</span><span id="QuadraticTermKey.__init__-314"><a href="#QuadraticTermKey.__init__-314"><span class="linenos">314</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span> <span class="o">=</span> <span class="n">a</span>
</span><span id="QuadraticTermKey.__init__-315"><a href="#QuadraticTermKey.__init__-315"><span class="linenos">315</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span> <span class="o">=</span> <span class="n">b</span>
</span><span id="QuadraticTermKey.__init__-316"><a href="#QuadraticTermKey.__init__-316"><span class="linenos">316</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="o">.</span><span class="n">id</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
</span><span id="QuadraticTermKey.__init__-317"><a href="#QuadraticTermKey.__init__-317"><span class="linenos">317</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span>
</span></pre></div>


            <div class="docstring"><p>Variables a and b will be ordered internally by their ids.</p>
</div>


                            </div>
                            <div id="QuadraticTermKey.first_var" class="classattr">
                                        <input id="QuadraticTermKey.first_var-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">first_var</span><span class="annotation">: <a href="#Variable">Variable</a></span>

                <label class="view-source-button" for="QuadraticTermKey.first_var-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticTermKey.first_var"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticTermKey.first_var-319"><a href="#QuadraticTermKey.first_var-319"><span class="linenos">319</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticTermKey.first_var-320"><a href="#QuadraticTermKey.first_var-320"><span class="linenos">320</span></a>    <span class="k">def</span> <span class="nf">first_var</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Variable&quot;</span><span class="p">:</span>
</span><span id="QuadraticTermKey.first_var-321"><a href="#QuadraticTermKey.first_var-321"><span class="linenos">321</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_var</span>
</span></pre></div>


    

                            </div>
                            <div id="QuadraticTermKey.second_var" class="classattr">
                                        <input id="QuadraticTermKey.second_var-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">second_var</span><span class="annotation">: <a href="#Variable">Variable</a></span>

                <label class="view-source-button" for="QuadraticTermKey.second_var-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticTermKey.second_var"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticTermKey.second_var-323"><a href="#QuadraticTermKey.second_var-323"><span class="linenos">323</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticTermKey.second_var-324"><a href="#QuadraticTermKey.second_var-324"><span class="linenos">324</span></a>    <span class="k">def</span> <span class="nf">second_var</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Variable&quot;</span><span class="p">:</span>
</span><span id="QuadraticTermKey.second_var-325"><a href="#QuadraticTermKey.second_var-325"><span class="linenos">325</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_var</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="LinearBase">
                            <input id="LinearBase-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LinearBase</span>:

                <label class="view-source-button" for="LinearBase-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearBase"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearBase-398"><a href="#LinearBase-398"><span class="linenos">398</span></a><span class="k">class</span> <span class="nc">LinearBase</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">abc</span><span class="o">.</span><span class="n">ABCMeta</span><span class="p">):</span>
</span><span id="LinearBase-399"><a href="#LinearBase-399"><span class="linenos">399</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Interface for types that can build linear expressions with +, -, * and /.</span>
</span><span id="LinearBase-400"><a href="#LinearBase-400"><span class="linenos">400</span></a>
</span><span id="LinearBase-401"><a href="#LinearBase-401"><span class="linenos">401</span></a><span class="sd">    Classes derived from LinearBase (plus float and int scalars) are used to</span>
</span><span id="LinearBase-402"><a href="#LinearBase-402"><span class="linenos">402</span></a><span class="sd">    build expression trees describing a linear expression. Operations nodes of the</span>
</span><span id="LinearBase-403"><a href="#LinearBase-403"><span class="linenos">403</span></a><span class="sd">    expression tree include:</span>
</span><span id="LinearBase-404"><a href="#LinearBase-404"><span class="linenos">404</span></a>
</span><span id="LinearBase-405"><a href="#LinearBase-405"><span class="linenos">405</span></a><span class="sd">      * LinearSum: describes a deferred sum of LinearTypes objects.</span>
</span><span id="LinearBase-406"><a href="#LinearBase-406"><span class="linenos">406</span></a><span class="sd">      * LinearProduct: describes a deferred product of a scalar and a</span>
</span><span id="LinearBase-407"><a href="#LinearBase-407"><span class="linenos">407</span></a><span class="sd">        LinearTypes object.</span>
</span><span id="LinearBase-408"><a href="#LinearBase-408"><span class="linenos">408</span></a>
</span><span id="LinearBase-409"><a href="#LinearBase-409"><span class="linenos">409</span></a><span class="sd">    Leaf nodes of the expression tree include:</span>
</span><span id="LinearBase-410"><a href="#LinearBase-410"><span class="linenos">410</span></a>
</span><span id="LinearBase-411"><a href="#LinearBase-411"><span class="linenos">411</span></a><span class="sd">      * float and int scalars.</span>
</span><span id="LinearBase-412"><a href="#LinearBase-412"><span class="linenos">412</span></a><span class="sd">      * Variable: a single variable.</span>
</span><span id="LinearBase-413"><a href="#LinearBase-413"><span class="linenos">413</span></a><span class="sd">      * LinearTerm: the product of a scalar and a Variable object.</span>
</span><span id="LinearBase-414"><a href="#LinearBase-414"><span class="linenos">414</span></a><span class="sd">      * LinearExpression: the sum of a scalar and LinearTerm objects.</span>
</span><span id="LinearBase-415"><a href="#LinearBase-415"><span class="linenos">415</span></a>
</span><span id="LinearBase-416"><a href="#LinearBase-416"><span class="linenos">416</span></a><span class="sd">    LinearBase objects/expression-trees can be used directly to create</span>
</span><span id="LinearBase-417"><a href="#LinearBase-417"><span class="linenos">417</span></a><span class="sd">    constraints or objective functions. However, to facilitate their inspection,</span>
</span><span id="LinearBase-418"><a href="#LinearBase-418"><span class="linenos">418</span></a><span class="sd">    any LinearTypes object can be flattened to a LinearExpression</span>
</span><span id="LinearBase-419"><a href="#LinearBase-419"><span class="linenos">419</span></a><span class="sd">    through:</span>
</span><span id="LinearBase-420"><a href="#LinearBase-420"><span class="linenos">420</span></a>
</span><span id="LinearBase-421"><a href="#LinearBase-421"><span class="linenos">421</span></a><span class="sd">     as_flat_linear_expression(value: LinearTypes) -&gt; LinearExpression:</span>
</span><span id="LinearBase-422"><a href="#LinearBase-422"><span class="linenos">422</span></a>
</span><span id="LinearBase-423"><a href="#LinearBase-423"><span class="linenos">423</span></a><span class="sd">    In addition, all LinearBase objects are immutable.</span>
</span><span id="LinearBase-424"><a href="#LinearBase-424"><span class="linenos">424</span></a>
</span><span id="LinearBase-425"><a href="#LinearBase-425"><span class="linenos">425</span></a><span class="sd">    Performance notes:</span>
</span><span id="LinearBase-426"><a href="#LinearBase-426"><span class="linenos">426</span></a>
</span><span id="LinearBase-427"><a href="#LinearBase-427"><span class="linenos">427</span></a><span class="sd">    Using an expression tree representation instead of an eager construction of</span>
</span><span id="LinearBase-428"><a href="#LinearBase-428"><span class="linenos">428</span></a><span class="sd">    LinearExpression objects reduces known inefficiencies associated with the</span>
</span><span id="LinearBase-429"><a href="#LinearBase-429"><span class="linenos">429</span></a><span class="sd">    use of operator overloading to construct linear expressions. In particular, we</span>
</span><span id="LinearBase-430"><a href="#LinearBase-430"><span class="linenos">430</span></a><span class="sd">    expect the runtime of as_flat_linear_expression() to be linear in the size of</span>
</span><span id="LinearBase-431"><a href="#LinearBase-431"><span class="linenos">431</span></a><span class="sd">    the expression tree. Additional performance can gained by using LinearSum(c)</span>
</span><span id="LinearBase-432"><a href="#LinearBase-432"><span class="linenos">432</span></a><span class="sd">    instead of sum(c) for a container c, as the latter creates len(c) LinearSum</span>
</span><span id="LinearBase-433"><a href="#LinearBase-433"><span class="linenos">433</span></a><span class="sd">    objects.</span>
</span><span id="LinearBase-434"><a href="#LinearBase-434"><span class="linenos">434</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="LinearBase-435"><a href="#LinearBase-435"><span class="linenos">435</span></a>
</span><span id="LinearBase-436"><a href="#LinearBase-436"><span class="linenos">436</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>
</span><span id="LinearBase-437"><a href="#LinearBase-437"><span class="linenos">437</span></a>
</span><span id="LinearBase-438"><a href="#LinearBase-438"><span class="linenos">438</span></a>    <span class="c1"># TODO(b/216492143): explore requirements for this function so calculation of</span>
</span><span id="LinearBase-439"><a href="#LinearBase-439"><span class="linenos">439</span></a>    <span class="c1"># coefficients and offsets follow expected associativity rules (so approximate</span>
</span><span id="LinearBase-440"><a href="#LinearBase-440"><span class="linenos">440</span></a>    <span class="c1"># float calculations are as expected).</span>
</span><span id="LinearBase-441"><a href="#LinearBase-441"><span class="linenos">441</span></a>    <span class="c1"># TODO(b/216492143): add more details of what subclasses need to do in</span>
</span><span id="LinearBase-442"><a href="#LinearBase-442"><span class="linenos">442</span></a>    <span class="c1"># developers guide.</span>
</span><span id="LinearBase-443"><a href="#LinearBase-443"><span class="linenos">443</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="LinearBase-444"><a href="#LinearBase-444"><span class="linenos">444</span></a>    <span class="k">def</span> <span class="nf">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="LinearBase-445"><a href="#LinearBase-445"><span class="linenos">445</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="LinearBase-446"><a href="#LinearBase-446"><span class="linenos">446</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="LinearBase-447"><a href="#LinearBase-447"><span class="linenos">447</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_ProcessedElements</span><span class="p">,</span>
</span><span id="LinearBase-448"><a href="#LinearBase-448"><span class="linenos">448</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_ToProcessElements</span><span class="p">,</span>
</span><span id="LinearBase-449"><a href="#LinearBase-449"><span class="linenos">449</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearBase-450"><a href="#LinearBase-450"><span class="linenos">450</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Flatten one level of tree if needed and add to targets.</span>
</span><span id="LinearBase-451"><a href="#LinearBase-451"><span class="linenos">451</span></a>
</span><span id="LinearBase-452"><a href="#LinearBase-452"><span class="linenos">452</span></a><span class="sd">        Classes derived from LinearBase only need to implement this function</span>
</span><span id="LinearBase-453"><a href="#LinearBase-453"><span class="linenos">453</span></a><span class="sd">        to enable transformation to LinearExpression through</span>
</span><span id="LinearBase-454"><a href="#LinearBase-454"><span class="linenos">454</span></a><span class="sd">        as_flat_linear_expression().</span>
</span><span id="LinearBase-455"><a href="#LinearBase-455"><span class="linenos">455</span></a>
</span><span id="LinearBase-456"><a href="#LinearBase-456"><span class="linenos">456</span></a><span class="sd">        Args:</span>
</span><span id="LinearBase-457"><a href="#LinearBase-457"><span class="linenos">457</span></a><span class="sd">          scale: multiply elements by this number when processing or adding to</span>
</span><span id="LinearBase-458"><a href="#LinearBase-458"><span class="linenos">458</span></a><span class="sd">            stack.</span>
</span><span id="LinearBase-459"><a href="#LinearBase-459"><span class="linenos">459</span></a><span class="sd">          processed_elements: where to add LinearTerms and scalars that can be</span>
</span><span id="LinearBase-460"><a href="#LinearBase-460"><span class="linenos">460</span></a><span class="sd">            processed immediately.</span>
</span><span id="LinearBase-461"><a href="#LinearBase-461"><span class="linenos">461</span></a><span class="sd">          target_stack: where to add LinearBase elements that are not scalars or</span>
</span><span id="LinearBase-462"><a href="#LinearBase-462"><span class="linenos">462</span></a><span class="sd">            LinearTerms (i.e. elements that need further flattening).</span>
</span><span id="LinearBase-463"><a href="#LinearBase-463"><span class="linenos">463</span></a><span class="sd">            Implementations should append() to this stack to avoid being recursive.</span>
</span><span id="LinearBase-464"><a href="#LinearBase-464"><span class="linenos">464</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LinearBase-465"><a href="#LinearBase-465"><span class="linenos">465</span></a>
</span><span id="LinearBase-466"><a href="#LinearBase-466"><span class="linenos">466</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span>
</span><span id="LinearBase-467"><a href="#LinearBase-467"><span class="linenos">467</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="n">LinearTypes</span>
</span><span id="LinearBase-468"><a href="#LinearBase-468"><span class="linenos">468</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span>
</span><span id="LinearBase-469"><a href="#LinearBase-469"><span class="linenos">469</span></a>        <span class="s2">&quot;BoundedLinearExpression&quot;</span>
</span><span id="LinearBase-470"><a href="#LinearBase-470"><span class="linenos">470</span></a>    <span class="p">):</span>  <span class="c1"># pytype: disable=signature-mismatch  # overriding-return-type-checks</span>
</span><span id="LinearBase-471"><a href="#LinearBase-471"><span class="linenos">471</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="LinearBase-472"><a href="#LinearBase-472"><span class="linenos">472</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
</span><span id="LinearBase-473"><a href="#LinearBase-473"><span class="linenos">473</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearBase-474"><a href="#LinearBase-474"><span class="linenos">474</span></a>            <span class="n">_raise_binary_operator_type_error</span><span class="p">(</span><span class="s2">&quot;==&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">rhs</span><span class="p">))</span>
</span><span id="LinearBase-475"><a href="#LinearBase-475"><span class="linenos">475</span></a>        <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="bp">self</span> <span class="o">-</span> <span class="n">rhs</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span id="LinearBase-476"><a href="#LinearBase-476"><span class="linenos">476</span></a>
</span><span id="LinearBase-477"><a href="#LinearBase-477"><span class="linenos">477</span></a>    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span>
</span><span id="LinearBase-478"><a href="#LinearBase-478"><span class="linenos">478</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="n">LinearTypes</span>
</span><span id="LinearBase-479"><a href="#LinearBase-479"><span class="linenos">479</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span>
</span><span id="LinearBase-480"><a href="#LinearBase-480"><span class="linenos">480</span></a>        <span class="n">NoReturn</span>
</span><span id="LinearBase-481"><a href="#LinearBase-481"><span class="linenos">481</span></a>    <span class="p">):</span>  <span class="c1"># pytype: disable=signature-mismatch  # overriding-return-type-checks</span>
</span><span id="LinearBase-482"><a href="#LinearBase-482"><span class="linenos">482</span></a>        <span class="n">_raise_ne_not_supported</span><span class="p">()</span>
</span><span id="LinearBase-483"><a href="#LinearBase-483"><span class="linenos">483</span></a>
</span><span id="LinearBase-484"><a href="#LinearBase-484"><span class="linenos">484</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="LinearBase-485"><a href="#LinearBase-485"><span class="linenos">485</span></a>    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;UpperBoundedLinearExpression&quot;</span><span class="p">:</span>
</span><span id="LinearBase-486"><a href="#LinearBase-486"><span class="linenos">486</span></a>        <span class="o">...</span>
</span><span id="LinearBase-487"><a href="#LinearBase-487"><span class="linenos">487</span></a>
</span><span id="LinearBase-488"><a href="#LinearBase-488"><span class="linenos">488</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="LinearBase-489"><a href="#LinearBase-489"><span class="linenos">489</span></a>    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BoundedLinearExpression&quot;</span><span class="p">:</span>
</span><span id="LinearBase-490"><a href="#LinearBase-490"><span class="linenos">490</span></a>        <span class="o">...</span>
</span><span id="LinearBase-491"><a href="#LinearBase-491"><span class="linenos">491</span></a>
</span><span id="LinearBase-492"><a href="#LinearBase-492"><span class="linenos">492</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="LinearBase-493"><a href="#LinearBase-493"><span class="linenos">493</span></a>    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="s2">&quot;BoundedLinearExpression&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
</span><span id="LinearBase-494"><a href="#LinearBase-494"><span class="linenos">494</span></a>        <span class="o">...</span>
</span><span id="LinearBase-495"><a href="#LinearBase-495"><span class="linenos">495</span></a>
</span><span id="LinearBase-496"><a href="#LinearBase-496"><span class="linenos">496</span></a>    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">):</span>
</span><span id="LinearBase-497"><a href="#LinearBase-497"><span class="linenos">497</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="LinearBase-498"><a href="#LinearBase-498"><span class="linenos">498</span></a>            <span class="k">return</span> <span class="n">UpperBoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
</span><span id="LinearBase-499"><a href="#LinearBase-499"><span class="linenos">499</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearBase-500"><a href="#LinearBase-500"><span class="linenos">500</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="bp">self</span> <span class="o">-</span> <span class="n">rhs</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
</span><span id="LinearBase-501"><a href="#LinearBase-501"><span class="linenos">501</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">BoundedLinearExpression</span><span class="p">):</span>
</span><span id="LinearBase-502"><a href="#LinearBase-502"><span class="linenos">502</span></a>            <span class="n">_raise_binary_operator_type_error</span><span class="p">(</span>
</span><span id="LinearBase-503"><a href="#LinearBase-503"><span class="linenos">503</span></a>                <span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">rhs</span><span class="p">),</span> <span class="n">_EXPRESSION_COMP_EXPRESSION_MESSAGE</span>
</span><span id="LinearBase-504"><a href="#LinearBase-504"><span class="linenos">504</span></a>            <span class="p">)</span>
</span><span id="LinearBase-505"><a href="#LinearBase-505"><span class="linenos">505</span></a>        <span class="n">_raise_binary_operator_type_error</span><span class="p">(</span><span class="s2">&quot;&lt;=&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">rhs</span><span class="p">))</span>
</span><span id="LinearBase-506"><a href="#LinearBase-506"><span class="linenos">506</span></a>
</span><span id="LinearBase-507"><a href="#LinearBase-507"><span class="linenos">507</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="LinearBase-508"><a href="#LinearBase-508"><span class="linenos">508</span></a>    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LowerBoundedLinearExpression&quot;</span><span class="p">:</span>
</span><span id="LinearBase-509"><a href="#LinearBase-509"><span class="linenos">509</span></a>        <span class="o">...</span>
</span><span id="LinearBase-510"><a href="#LinearBase-510"><span class="linenos">510</span></a>
</span><span id="LinearBase-511"><a href="#LinearBase-511"><span class="linenos">511</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="LinearBase-512"><a href="#LinearBase-512"><span class="linenos">512</span></a>    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BoundedLinearExpression&quot;</span><span class="p">:</span>
</span><span id="LinearBase-513"><a href="#LinearBase-513"><span class="linenos">513</span></a>        <span class="o">...</span>
</span><span id="LinearBase-514"><a href="#LinearBase-514"><span class="linenos">514</span></a>
</span><span id="LinearBase-515"><a href="#LinearBase-515"><span class="linenos">515</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="LinearBase-516"><a href="#LinearBase-516"><span class="linenos">516</span></a>    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">:</span> <span class="s2">&quot;BoundedLinearExpression&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
</span><span id="LinearBase-517"><a href="#LinearBase-517"><span class="linenos">517</span></a>        <span class="o">...</span>
</span><span id="LinearBase-518"><a href="#LinearBase-518"><span class="linenos">518</span></a>
</span><span id="LinearBase-519"><a href="#LinearBase-519"><span class="linenos">519</span></a>    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">):</span>
</span><span id="LinearBase-520"><a href="#LinearBase-520"><span class="linenos">520</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="LinearBase-521"><a href="#LinearBase-521"><span class="linenos">521</span></a>            <span class="k">return</span> <span class="n">LowerBoundedLinearExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lhs</span><span class="p">)</span>
</span><span id="LinearBase-522"><a href="#LinearBase-522"><span class="linenos">522</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearBase-523"><a href="#LinearBase-523"><span class="linenos">523</span></a>            <span class="k">return</span> <span class="n">BoundedLinearExpression</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="bp">self</span> <span class="o">-</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>
</span><span id="LinearBase-524"><a href="#LinearBase-524"><span class="linenos">524</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">BoundedLinearExpression</span><span class="p">):</span>
</span><span id="LinearBase-525"><a href="#LinearBase-525"><span class="linenos">525</span></a>            <span class="n">_raise_binary_operator_type_error</span><span class="p">(</span>
</span><span id="LinearBase-526"><a href="#LinearBase-526"><span class="linenos">526</span></a>                <span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">lhs</span><span class="p">),</span> <span class="n">_EXPRESSION_COMP_EXPRESSION_MESSAGE</span>
</span><span id="LinearBase-527"><a href="#LinearBase-527"><span class="linenos">527</span></a>            <span class="p">)</span>
</span><span id="LinearBase-528"><a href="#LinearBase-528"><span class="linenos">528</span></a>        <span class="n">_raise_binary_operator_type_error</span><span class="p">(</span><span class="s2">&quot;&gt;=&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">lhs</span><span class="p">))</span>
</span><span id="LinearBase-529"><a href="#LinearBase-529"><span class="linenos">529</span></a>
</span><span id="LinearBase-530"><a href="#LinearBase-530"><span class="linenos">530</span></a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearSum&quot;</span><span class="p">:</span>
</span><span id="LinearBase-531"><a href="#LinearBase-531"><span class="linenos">531</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">)):</span>
</span><span id="LinearBase-532"><a href="#LinearBase-532"><span class="linenos">532</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="LinearBase-533"><a href="#LinearBase-533"><span class="linenos">533</span></a>        <span class="k">return</span> <span class="n">LinearSum</span><span class="p">((</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">))</span>
</span><span id="LinearBase-534"><a href="#LinearBase-534"><span class="linenos">534</span></a>
</span><span id="LinearBase-535"><a href="#LinearBase-535"><span class="linenos">535</span></a>    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearSum&quot;</span><span class="p">:</span>
</span><span id="LinearBase-536"><a href="#LinearBase-536"><span class="linenos">536</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">)):</span>
</span><span id="LinearBase-537"><a href="#LinearBase-537"><span class="linenos">537</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="LinearBase-538"><a href="#LinearBase-538"><span class="linenos">538</span></a>        <span class="k">return</span> <span class="n">LinearSum</span><span class="p">((</span><span class="n">expr</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
</span><span id="LinearBase-539"><a href="#LinearBase-539"><span class="linenos">539</span></a>
</span><span id="LinearBase-540"><a href="#LinearBase-540"><span class="linenos">540</span></a>    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearSum&quot;</span><span class="p">:</span>
</span><span id="LinearBase-541"><a href="#LinearBase-541"><span class="linenos">541</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">)):</span>
</span><span id="LinearBase-542"><a href="#LinearBase-542"><span class="linenos">542</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="LinearBase-543"><a href="#LinearBase-543"><span class="linenos">543</span></a>        <span class="k">return</span> <span class="n">LinearSum</span><span class="p">((</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="n">expr</span><span class="p">))</span>
</span><span id="LinearBase-544"><a href="#LinearBase-544"><span class="linenos">544</span></a>
</span><span id="LinearBase-545"><a href="#LinearBase-545"><span class="linenos">545</span></a>    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearSum&quot;</span><span class="p">:</span>
</span><span id="LinearBase-546"><a href="#LinearBase-546"><span class="linenos">546</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">)):</span>
</span><span id="LinearBase-547"><a href="#LinearBase-547"><span class="linenos">547</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="LinearBase-548"><a href="#LinearBase-548"><span class="linenos">548</span></a>        <span class="k">return</span> <span class="n">LinearSum</span><span class="p">((</span><span class="n">expr</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="p">))</span>
</span><span id="LinearBase-549"><a href="#LinearBase-549"><span class="linenos">549</span></a>
</span><span id="LinearBase-550"><a href="#LinearBase-550"><span class="linenos">550</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="LinearBase-551"><a href="#LinearBase-551"><span class="linenos">551</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearProduct&quot;</span><span class="p">:</span>
</span><span id="LinearBase-552"><a href="#LinearBase-552"><span class="linenos">552</span></a>        <span class="o">...</span>
</span><span id="LinearBase-553"><a href="#LinearBase-553"><span class="linenos">553</span></a>
</span><span id="LinearBase-554"><a href="#LinearBase-554"><span class="linenos">554</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="LinearBase-555"><a href="#LinearBase-555"><span class="linenos">555</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearLinearProduct&quot;</span><span class="p">:</span>
</span><span id="LinearBase-556"><a href="#LinearBase-556"><span class="linenos">556</span></a>        <span class="o">...</span>
</span><span id="LinearBase-557"><a href="#LinearBase-557"><span class="linenos">557</span></a>
</span><span id="LinearBase-558"><a href="#LinearBase-558"><span class="linenos">558</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="LinearBase-559"><a href="#LinearBase-559"><span class="linenos">559</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">)):</span>
</span><span id="LinearBase-560"><a href="#LinearBase-560"><span class="linenos">560</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="LinearBase-561"><a href="#LinearBase-561"><span class="linenos">561</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearBase-562"><a href="#LinearBase-562"><span class="linenos">562</span></a>            <span class="k">return</span> <span class="n">LinearLinearProduct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</span><span id="LinearBase-563"><a href="#LinearBase-563"><span class="linenos">563</span></a>        <span class="k">return</span> <span class="n">LinearProduct</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="LinearBase-564"><a href="#LinearBase-564"><span class="linenos">564</span></a>
</span><span id="LinearBase-565"><a href="#LinearBase-565"><span class="linenos">565</span></a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearProduct&quot;</span><span class="p">:</span>
</span><span id="LinearBase-566"><a href="#LinearBase-566"><span class="linenos">566</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="LinearBase-567"><a href="#LinearBase-567"><span class="linenos">567</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="LinearBase-568"><a href="#LinearBase-568"><span class="linenos">568</span></a>        <span class="k">return</span> <span class="n">LinearProduct</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="LinearBase-569"><a href="#LinearBase-569"><span class="linenos">569</span></a>
</span><span id="LinearBase-570"><a href="#LinearBase-570"><span class="linenos">570</span></a>    <span class="c1"># TODO(b/216492143): explore numerical consequences of 1.0 / constant below.</span>
</span><span id="LinearBase-571"><a href="#LinearBase-571"><span class="linenos">571</span></a>    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearProduct&quot;</span><span class="p">:</span>
</span><span id="LinearBase-572"><a href="#LinearBase-572"><span class="linenos">572</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="LinearBase-573"><a href="#LinearBase-573"><span class="linenos">573</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="LinearBase-574"><a href="#LinearBase-574"><span class="linenos">574</span></a>        <span class="k">return</span> <span class="n">LinearProduct</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">constant</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="LinearBase-575"><a href="#LinearBase-575"><span class="linenos">575</span></a>
</span><span id="LinearBase-576"><a href="#LinearBase-576"><span class="linenos">576</span></a>    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearProduct&quot;</span><span class="p">:</span>
</span><span id="LinearBase-577"><a href="#LinearBase-577"><span class="linenos">577</span></a>        <span class="k">return</span> <span class="n">LinearProduct</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Interface for types that can build linear expressions with +, -, * and /.</p>

<p>Classes derived from LinearBase (plus float and int scalars) are used to
build expression trees describing a linear expression. Operations nodes of the
expression tree include:</p>

<ul>
<li>LinearSum: describes a deferred sum of LinearTypes objects.</li>
<li>LinearProduct: describes a deferred product of a scalar and a
LinearTypes object.</li>
</ul>

<h6 id="leaf-nodes-of-the-expression-tree-include">Leaf nodes of the expression tree include:</h6>

<blockquote>
  <ul>
  <li>float and int scalars.</li>
  <li>Variable: a single variable.</li>
  <li>LinearTerm: the product of a scalar and a Variable object.</li>
  <li>LinearExpression: the sum of a scalar and LinearTerm objects.</li>
  </ul>
</blockquote>

<p>LinearBase objects/expression-trees can be used directly to create
constraints or objective functions. However, to facilitate their inspection,
any LinearTypes object can be flattened to a LinearExpression
through:</p>

<p>as_flat_linear_expression(value: LinearTypes) -> LinearExpression:</p>

<p>In addition, all LinearBase objects are immutable.</p>

<p>Performance notes:</p>

<p>Using an expression tree representation instead of an eager construction of
LinearExpression objects reduces known inefficiencies associated with the
use of operator overloading to construct linear expressions. In particular, we
expect the runtime of as_flat_linear_expression() to be linear in the size of
the expression tree. Additional performance can gained by using LinearSum(c)
instead of sum(c) for a container c, as the latter creates len(c) LinearSum
objects.</p>
</div>


                </section>
                <section id="QuadraticBase">
                            <input id="QuadraticBase-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">QuadraticBase</span>:

                <label class="view-source-button" for="QuadraticBase-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticBase"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticBase-580"><a href="#QuadraticBase-580"><span class="linenos">580</span></a><span class="k">class</span> <span class="nc">QuadraticBase</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">abc</span><span class="o">.</span><span class="n">ABCMeta</span><span class="p">):</span>
</span><span id="QuadraticBase-581"><a href="#QuadraticBase-581"><span class="linenos">581</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Interface for types that can build quadratic expressions with +, -, * and /.</span>
</span><span id="QuadraticBase-582"><a href="#QuadraticBase-582"><span class="linenos">582</span></a>
</span><span id="QuadraticBase-583"><a href="#QuadraticBase-583"><span class="linenos">583</span></a><span class="sd">    Classes derived from QuadraticBase and LinearBase (plus float and int scalars)</span>
</span><span id="QuadraticBase-584"><a href="#QuadraticBase-584"><span class="linenos">584</span></a><span class="sd">    are used to build expression trees describing a quadratic expression.</span>
</span><span id="QuadraticBase-585"><a href="#QuadraticBase-585"><span class="linenos">585</span></a><span class="sd">    Operations nodes of the expression tree include:</span>
</span><span id="QuadraticBase-586"><a href="#QuadraticBase-586"><span class="linenos">586</span></a>
</span><span id="QuadraticBase-587"><a href="#QuadraticBase-587"><span class="linenos">587</span></a><span class="sd">        * QuadraticSum: describes a deferred sum of QuadraticTypes objects.</span>
</span><span id="QuadraticBase-588"><a href="#QuadraticBase-588"><span class="linenos">588</span></a><span class="sd">        * QuadraticProduct: describes a deferred product of a scalar and a</span>
</span><span id="QuadraticBase-589"><a href="#QuadraticBase-589"><span class="linenos">589</span></a><span class="sd">          QuadraticTypes object.</span>
</span><span id="QuadraticBase-590"><a href="#QuadraticBase-590"><span class="linenos">590</span></a><span class="sd">        * LinearLinearProduct: describes a deferred product of two LinearTypes</span>
</span><span id="QuadraticBase-591"><a href="#QuadraticBase-591"><span class="linenos">591</span></a><span class="sd">          objects.</span>
</span><span id="QuadraticBase-592"><a href="#QuadraticBase-592"><span class="linenos">592</span></a>
</span><span id="QuadraticBase-593"><a href="#QuadraticBase-593"><span class="linenos">593</span></a><span class="sd">      Leaf nodes of the expression tree include:</span>
</span><span id="QuadraticBase-594"><a href="#QuadraticBase-594"><span class="linenos">594</span></a>
</span><span id="QuadraticBase-595"><a href="#QuadraticBase-595"><span class="linenos">595</span></a><span class="sd">        * float and int scalars.</span>
</span><span id="QuadraticBase-596"><a href="#QuadraticBase-596"><span class="linenos">596</span></a><span class="sd">        * Variable: a single variable.</span>
</span><span id="QuadraticBase-597"><a href="#QuadraticBase-597"><span class="linenos">597</span></a><span class="sd">        * LinearTerm: the product of a scalar and a Variable object.</span>
</span><span id="QuadraticBase-598"><a href="#QuadraticBase-598"><span class="linenos">598</span></a><span class="sd">        * LinearExpression: the sum of a scalar and LinearTerm objects.</span>
</span><span id="QuadraticBase-599"><a href="#QuadraticBase-599"><span class="linenos">599</span></a><span class="sd">        * QuadraticTerm: the product of a scalar and two Variable objects.</span>
</span><span id="QuadraticBase-600"><a href="#QuadraticBase-600"><span class="linenos">600</span></a><span class="sd">        * QuadraticExpression: the sum of a scalar, LinearTerm objects and</span>
</span><span id="QuadraticBase-601"><a href="#QuadraticBase-601"><span class="linenos">601</span></a><span class="sd">          QuadraticTerm objects.</span>
</span><span id="QuadraticBase-602"><a href="#QuadraticBase-602"><span class="linenos">602</span></a>
</span><span id="QuadraticBase-603"><a href="#QuadraticBase-603"><span class="linenos">603</span></a><span class="sd">    QuadraticBase objects/expression-trees can be used directly to create</span>
</span><span id="QuadraticBase-604"><a href="#QuadraticBase-604"><span class="linenos">604</span></a><span class="sd">    objective functions. However, to facilitate their inspection, any</span>
</span><span id="QuadraticBase-605"><a href="#QuadraticBase-605"><span class="linenos">605</span></a><span class="sd">    QuadraticTypes object can be flattened to a QuadraticExpression</span>
</span><span id="QuadraticBase-606"><a href="#QuadraticBase-606"><span class="linenos">606</span></a><span class="sd">    through:</span>
</span><span id="QuadraticBase-607"><a href="#QuadraticBase-607"><span class="linenos">607</span></a>
</span><span id="QuadraticBase-608"><a href="#QuadraticBase-608"><span class="linenos">608</span></a><span class="sd">     as_flat_quadratic_expression(value: QuadraticTypes) -&gt; QuadraticExpression:</span>
</span><span id="QuadraticBase-609"><a href="#QuadraticBase-609"><span class="linenos">609</span></a>
</span><span id="QuadraticBase-610"><a href="#QuadraticBase-610"><span class="linenos">610</span></a><span class="sd">    In addition, all QuadraticBase objects are immutable.</span>
</span><span id="QuadraticBase-611"><a href="#QuadraticBase-611"><span class="linenos">611</span></a>
</span><span id="QuadraticBase-612"><a href="#QuadraticBase-612"><span class="linenos">612</span></a><span class="sd">    Performance notes:</span>
</span><span id="QuadraticBase-613"><a href="#QuadraticBase-613"><span class="linenos">613</span></a>
</span><span id="QuadraticBase-614"><a href="#QuadraticBase-614"><span class="linenos">614</span></a><span class="sd">    Using an expression tree representation instead of an eager construction of</span>
</span><span id="QuadraticBase-615"><a href="#QuadraticBase-615"><span class="linenos">615</span></a><span class="sd">    QuadraticExpression objects reduces known inefficiencies associated with the</span>
</span><span id="QuadraticBase-616"><a href="#QuadraticBase-616"><span class="linenos">616</span></a><span class="sd">    use of operator overloading to construct quadratic expressions. In particular,</span>
</span><span id="QuadraticBase-617"><a href="#QuadraticBase-617"><span class="linenos">617</span></a><span class="sd">    we expect the runtime of as_flat_quadratic_expression() to be linear in the</span>
</span><span id="QuadraticBase-618"><a href="#QuadraticBase-618"><span class="linenos">618</span></a><span class="sd">    size of the expression tree. Additional performance can gained by using</span>
</span><span id="QuadraticBase-619"><a href="#QuadraticBase-619"><span class="linenos">619</span></a><span class="sd">    QuadraticSum(c) instead of sum(c) for a container c, as the latter creates</span>
</span><span id="QuadraticBase-620"><a href="#QuadraticBase-620"><span class="linenos">620</span></a><span class="sd">    len(c) QuadraticSum objects.</span>
</span><span id="QuadraticBase-621"><a href="#QuadraticBase-621"><span class="linenos">621</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="QuadraticBase-622"><a href="#QuadraticBase-622"><span class="linenos">622</span></a>
</span><span id="QuadraticBase-623"><a href="#QuadraticBase-623"><span class="linenos">623</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>
</span><span id="QuadraticBase-624"><a href="#QuadraticBase-624"><span class="linenos">624</span></a>
</span><span id="QuadraticBase-625"><a href="#QuadraticBase-625"><span class="linenos">625</span></a>    <span class="c1"># TODO(b/216492143): explore requirements for this function so calculation of</span>
</span><span id="QuadraticBase-626"><a href="#QuadraticBase-626"><span class="linenos">626</span></a>    <span class="c1"># coefficients and offsets follow expected associativity rules (so approximate</span>
</span><span id="QuadraticBase-627"><a href="#QuadraticBase-627"><span class="linenos">627</span></a>    <span class="c1"># float calculations are as expected).</span>
</span><span id="QuadraticBase-628"><a href="#QuadraticBase-628"><span class="linenos">628</span></a>    <span class="c1"># TODO(b/216492143): add more details of what subclasses need to do in</span>
</span><span id="QuadraticBase-629"><a href="#QuadraticBase-629"><span class="linenos">629</span></a>    <span class="c1"># developers guide.</span>
</span><span id="QuadraticBase-630"><a href="#QuadraticBase-630"><span class="linenos">630</span></a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
</span><span id="QuadraticBase-631"><a href="#QuadraticBase-631"><span class="linenos">631</span></a>    <span class="k">def</span> <span class="nf">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="QuadraticBase-632"><a href="#QuadraticBase-632"><span class="linenos">632</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="QuadraticBase-633"><a href="#QuadraticBase-633"><span class="linenos">633</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="QuadraticBase-634"><a href="#QuadraticBase-634"><span class="linenos">634</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_QuadraticProcessedElements</span><span class="p">,</span>
</span><span id="QuadraticBase-635"><a href="#QuadraticBase-635"><span class="linenos">635</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_QuadraticToProcessElements</span><span class="p">,</span>
</span><span id="QuadraticBase-636"><a href="#QuadraticBase-636"><span class="linenos">636</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="QuadraticBase-637"><a href="#QuadraticBase-637"><span class="linenos">637</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Flatten one level of tree if needed and add to targets.</span>
</span><span id="QuadraticBase-638"><a href="#QuadraticBase-638"><span class="linenos">638</span></a>
</span><span id="QuadraticBase-639"><a href="#QuadraticBase-639"><span class="linenos">639</span></a><span class="sd">        Classes derived from QuadraticBase only need to implement this function</span>
</span><span id="QuadraticBase-640"><a href="#QuadraticBase-640"><span class="linenos">640</span></a><span class="sd">        to enable transformation to QuadraticExpression through</span>
</span><span id="QuadraticBase-641"><a href="#QuadraticBase-641"><span class="linenos">641</span></a><span class="sd">        as_flat_quadratic_expression().</span>
</span><span id="QuadraticBase-642"><a href="#QuadraticBase-642"><span class="linenos">642</span></a>
</span><span id="QuadraticBase-643"><a href="#QuadraticBase-643"><span class="linenos">643</span></a><span class="sd">        Args:</span>
</span><span id="QuadraticBase-644"><a href="#QuadraticBase-644"><span class="linenos">644</span></a><span class="sd">          scale: multiply elements by this number when processing or adding to</span>
</span><span id="QuadraticBase-645"><a href="#QuadraticBase-645"><span class="linenos">645</span></a><span class="sd">            stack.</span>
</span><span id="QuadraticBase-646"><a href="#QuadraticBase-646"><span class="linenos">646</span></a><span class="sd">          processed_elements: where to add linear terms, quadratic terms and scalars</span>
</span><span id="QuadraticBase-647"><a href="#QuadraticBase-647"><span class="linenos">647</span></a><span class="sd">            that can be processed immediately.</span>
</span><span id="QuadraticBase-648"><a href="#QuadraticBase-648"><span class="linenos">648</span></a><span class="sd">          target_stack: where to add LinearBase and QuadraticBase elements that are</span>
</span><span id="QuadraticBase-649"><a href="#QuadraticBase-649"><span class="linenos">649</span></a><span class="sd">            not scalars or linear terms or quadratic terms (i.e. elements that need</span>
</span><span id="QuadraticBase-650"><a href="#QuadraticBase-650"><span class="linenos">650</span></a><span class="sd">            further flattening). Implementations should append() to this stack to</span>
</span><span id="QuadraticBase-651"><a href="#QuadraticBase-651"><span class="linenos">651</span></a><span class="sd">            avoid being recursive.</span>
</span><span id="QuadraticBase-652"><a href="#QuadraticBase-652"><span class="linenos">652</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="QuadraticBase-653"><a href="#QuadraticBase-653"><span class="linenos">653</span></a>
</span><span id="QuadraticBase-654"><a href="#QuadraticBase-654"><span class="linenos">654</span></a>    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticSum&quot;</span><span class="p">:</span>
</span><span id="QuadraticBase-655"><a href="#QuadraticBase-655"><span class="linenos">655</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">)):</span>
</span><span id="QuadraticBase-656"><a href="#QuadraticBase-656"><span class="linenos">656</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="QuadraticBase-657"><a href="#QuadraticBase-657"><span class="linenos">657</span></a>        <span class="k">return</span> <span class="n">QuadraticSum</span><span class="p">((</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">))</span>
</span><span id="QuadraticBase-658"><a href="#QuadraticBase-658"><span class="linenos">658</span></a>
</span><span id="QuadraticBase-659"><a href="#QuadraticBase-659"><span class="linenos">659</span></a>    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticSum&quot;</span><span class="p">:</span>
</span><span id="QuadraticBase-660"><a href="#QuadraticBase-660"><span class="linenos">660</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">)):</span>
</span><span id="QuadraticBase-661"><a href="#QuadraticBase-661"><span class="linenos">661</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="QuadraticBase-662"><a href="#QuadraticBase-662"><span class="linenos">662</span></a>        <span class="k">return</span> <span class="n">QuadraticSum</span><span class="p">((</span><span class="n">expr</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
</span><span id="QuadraticBase-663"><a href="#QuadraticBase-663"><span class="linenos">663</span></a>
</span><span id="QuadraticBase-664"><a href="#QuadraticBase-664"><span class="linenos">664</span></a>    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticSum&quot;</span><span class="p">:</span>
</span><span id="QuadraticBase-665"><a href="#QuadraticBase-665"><span class="linenos">665</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">)):</span>
</span><span id="QuadraticBase-666"><a href="#QuadraticBase-666"><span class="linenos">666</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="QuadraticBase-667"><a href="#QuadraticBase-667"><span class="linenos">667</span></a>        <span class="k">return</span> <span class="n">QuadraticSum</span><span class="p">((</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="n">expr</span><span class="p">))</span>
</span><span id="QuadraticBase-668"><a href="#QuadraticBase-668"><span class="linenos">668</span></a>
</span><span id="QuadraticBase-669"><a href="#QuadraticBase-669"><span class="linenos">669</span></a>    <span class="k">def</span> <span class="fm">__rsub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticSum&quot;</span><span class="p">:</span>
</span><span id="QuadraticBase-670"><a href="#QuadraticBase-670"><span class="linenos">670</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">)):</span>
</span><span id="QuadraticBase-671"><a href="#QuadraticBase-671"><span class="linenos">671</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="QuadraticBase-672"><a href="#QuadraticBase-672"><span class="linenos">672</span></a>        <span class="k">return</span> <span class="n">QuadraticSum</span><span class="p">((</span><span class="n">expr</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="p">))</span>
</span><span id="QuadraticBase-673"><a href="#QuadraticBase-673"><span class="linenos">673</span></a>
</span><span id="QuadraticBase-674"><a href="#QuadraticBase-674"><span class="linenos">674</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticProduct&quot;</span><span class="p">:</span>
</span><span id="QuadraticBase-675"><a href="#QuadraticBase-675"><span class="linenos">675</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="QuadraticBase-676"><a href="#QuadraticBase-676"><span class="linenos">676</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="QuadraticBase-677"><a href="#QuadraticBase-677"><span class="linenos">677</span></a>        <span class="k">return</span> <span class="n">QuadraticProduct</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="QuadraticBase-678"><a href="#QuadraticBase-678"><span class="linenos">678</span></a>
</span><span id="QuadraticBase-679"><a href="#QuadraticBase-679"><span class="linenos">679</span></a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticProduct&quot;</span><span class="p">:</span>
</span><span id="QuadraticBase-680"><a href="#QuadraticBase-680"><span class="linenos">680</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="QuadraticBase-681"><a href="#QuadraticBase-681"><span class="linenos">681</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="QuadraticBase-682"><a href="#QuadraticBase-682"><span class="linenos">682</span></a>        <span class="k">return</span> <span class="n">QuadraticProduct</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="QuadraticBase-683"><a href="#QuadraticBase-683"><span class="linenos">683</span></a>
</span><span id="QuadraticBase-684"><a href="#QuadraticBase-684"><span class="linenos">684</span></a>    <span class="c1"># TODO(b/216492143): explore numerical consequences of 1.0 / constant below.</span>
</span><span id="QuadraticBase-685"><a href="#QuadraticBase-685"><span class="linenos">685</span></a>    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticProduct&quot;</span><span class="p">:</span>
</span><span id="QuadraticBase-686"><a href="#QuadraticBase-686"><span class="linenos">686</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="QuadraticBase-687"><a href="#QuadraticBase-687"><span class="linenos">687</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="QuadraticBase-688"><a href="#QuadraticBase-688"><span class="linenos">688</span></a>        <span class="k">return</span> <span class="n">QuadraticProduct</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">constant</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="QuadraticBase-689"><a href="#QuadraticBase-689"><span class="linenos">689</span></a>
</span><span id="QuadraticBase-690"><a href="#QuadraticBase-690"><span class="linenos">690</span></a>    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticProduct&quot;</span><span class="p">:</span>
</span><span id="QuadraticBase-691"><a href="#QuadraticBase-691"><span class="linenos">691</span></a>        <span class="k">return</span> <span class="n">QuadraticProduct</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Interface for types that can build quadratic expressions with +, -, * and /.</p>

<p>Classes derived from QuadraticBase and LinearBase (plus float and int scalars)
are used to build expression trees describing a quadratic expression.</p>

<h6 id="operations-nodes-of-the-expression-tree-include">Operations nodes of the expression tree include:</h6>

<blockquote>
  <ul>
  <li>QuadraticSum: describes a deferred sum of QuadraticTypes objects.
  <ul>
  <li>QuadraticProduct: describes a deferred product of a scalar and a
  QuadraticTypes object.</li>
  <li>LinearLinearProduct: describes a deferred product of two LinearTypes
  objects.</li>
  </ul></li>
  </ul>
  
  <p>Leaf nodes of the expression tree include:</p>
  
  <ul>
  <li>float and int scalars.</li>
  <li>Variable: a single variable.</li>
  <li>LinearTerm: the product of a scalar and a Variable object.</li>
  <li>LinearExpression: the sum of a scalar and LinearTerm objects.</li>
  <li>QuadraticTerm: the product of a scalar and two Variable objects.</li>
  <li>QuadraticExpression: the sum of a scalar, LinearTerm objects and
  QuadraticTerm objects.</li>
  </ul>
</blockquote>

<p>QuadraticBase objects/expression-trees can be used directly to create
objective functions. However, to facilitate their inspection, any
QuadraticTypes object can be flattened to a QuadraticExpression
through:</p>

<p>as_flat_quadratic_expression(value: QuadraticTypes) -> QuadraticExpression:</p>

<p>In addition, all QuadraticBase objects are immutable.</p>

<p>Performance notes:</p>

<p>Using an expression tree representation instead of an eager construction of
QuadraticExpression objects reduces known inefficiencies associated with the
use of operator overloading to construct quadratic expressions. In particular,
we expect the runtime of as_flat_quadratic_expression() to be linear in the
size of the expression tree. Additional performance can gained by using
QuadraticSum(c) instead of sum(c) for a container c, as the latter creates
len(c) QuadraticSum objects.</p>
</div>


                </section>
                <section id="Variable">
                            <input id="Variable-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Variable</span><wbr>(<span class="base"><a href="#LinearBase">LinearBase</a></span>):

                <label class="view-source-button" for="Variable-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Variable"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Variable-694"><a href="#Variable-694"><span class="linenos">694</span></a><span class="k">class</span> <span class="nc">Variable</span><span class="p">(</span><span class="n">LinearBase</span><span class="p">):</span>
</span><span id="Variable-695"><a href="#Variable-695"><span class="linenos">695</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A decision variable for an optimization model.</span>
</span><span id="Variable-696"><a href="#Variable-696"><span class="linenos">696</span></a>
</span><span id="Variable-697"><a href="#Variable-697"><span class="linenos">697</span></a><span class="sd">    A decision variable takes a value from a domain, either the real numbers or</span>
</span><span id="Variable-698"><a href="#Variable-698"><span class="linenos">698</span></a><span class="sd">    the integers, and restricted to be in some interval [lb, ub] (where lb and ub</span>
</span><span id="Variable-699"><a href="#Variable-699"><span class="linenos">699</span></a><span class="sd">    can be infinite). The case of lb == ub is allowed, this means the variable</span>
</span><span id="Variable-700"><a href="#Variable-700"><span class="linenos">700</span></a><span class="sd">    must take a single value. The case of lb &gt; ub is also allowed, this implies</span>
</span><span id="Variable-701"><a href="#Variable-701"><span class="linenos">701</span></a><span class="sd">    that the problem is infeasible.</span>
</span><span id="Variable-702"><a href="#Variable-702"><span class="linenos">702</span></a>
</span><span id="Variable-703"><a href="#Variable-703"><span class="linenos">703</span></a><span class="sd">    A Variable is configured as follows:</span>
</span><span id="Variable-704"><a href="#Variable-704"><span class="linenos">704</span></a><span class="sd">      * lower_bound: a float property, lb above. Should not be NaN nor +inf.</span>
</span><span id="Variable-705"><a href="#Variable-705"><span class="linenos">705</span></a><span class="sd">      * upper_bound: a float property, ub above. Should not be NaN nor -inf.</span>
</span><span id="Variable-706"><a href="#Variable-706"><span class="linenos">706</span></a><span class="sd">      * integer: a bool property, if the domain is integer or continuous.</span>
</span><span id="Variable-707"><a href="#Variable-707"><span class="linenos">707</span></a>
</span><span id="Variable-708"><a href="#Variable-708"><span class="linenos">708</span></a><span class="sd">    The name is optional, read only, and used only for debugging. Non-empty names</span>
</span><span id="Variable-709"><a href="#Variable-709"><span class="linenos">709</span></a><span class="sd">    should be distinct.</span>
</span><span id="Variable-710"><a href="#Variable-710"><span class="linenos">710</span></a>
</span><span id="Variable-711"><a href="#Variable-711"><span class="linenos">711</span></a><span class="sd">    Every Variable is associated with a Model (defined below). Note that data</span>
</span><span id="Variable-712"><a href="#Variable-712"><span class="linenos">712</span></a><span class="sd">    describing the variable (e.g. lower_bound) is owned by Model.storage, this</span>
</span><span id="Variable-713"><a href="#Variable-713"><span class="linenos">713</span></a><span class="sd">    class is simply a reference to that data. Do not create a Variable directly,</span>
</span><span id="Variable-714"><a href="#Variable-714"><span class="linenos">714</span></a><span class="sd">    use Model.add_variable() instead.</span>
</span><span id="Variable-715"><a href="#Variable-715"><span class="linenos">715</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Variable-716"><a href="#Variable-716"><span class="linenos">716</span></a>
</span><span id="Variable-717"><a href="#Variable-717"><span class="linenos">717</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;__weakref__&quot;</span><span class="p">,</span> <span class="s2">&quot;_model&quot;</span><span class="p">,</span> <span class="s2">&quot;_id&quot;</span>
</span><span id="Variable-718"><a href="#Variable-718"><span class="linenos">718</span></a>
</span><span id="Variable-719"><a href="#Variable-719"><span class="linenos">719</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">vid</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Variable-720"><a href="#Variable-720"><span class="linenos">720</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do not invoke directly, use Model.add_variable().&quot;&quot;&quot;</span>
</span><span id="Variable-721"><a href="#Variable-721"><span class="linenos">721</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span> <span class="o">=</span> <span class="n">model</span>
</span><span id="Variable-722"><a href="#Variable-722"><span class="linenos">722</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">vid</span>
</span><span id="Variable-723"><a href="#Variable-723"><span class="linenos">723</span></a>
</span><span id="Variable-724"><a href="#Variable-724"><span class="linenos">724</span></a>    <span class="nd">@property</span>
</span><span id="Variable-725"><a href="#Variable-725"><span class="linenos">725</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Variable-726"><a href="#Variable-726"><span class="linenos">726</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variable_lb</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span><span id="Variable-727"><a href="#Variable-727"><span class="linenos">727</span></a>
</span><span id="Variable-728"><a href="#Variable-728"><span class="linenos">728</span></a>    <span class="nd">@lower_bound</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Variable-729"><a href="#Variable-729"><span class="linenos">729</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Variable-730"><a href="#Variable-730"><span class="linenos">730</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_variable_lb</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="Variable-731"><a href="#Variable-731"><span class="linenos">731</span></a>
</span><span id="Variable-732"><a href="#Variable-732"><span class="linenos">732</span></a>    <span class="nd">@property</span>
</span><span id="Variable-733"><a href="#Variable-733"><span class="linenos">733</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Variable-734"><a href="#Variable-734"><span class="linenos">734</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variable_ub</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span><span id="Variable-735"><a href="#Variable-735"><span class="linenos">735</span></a>
</span><span id="Variable-736"><a href="#Variable-736"><span class="linenos">736</span></a>    <span class="nd">@upper_bound</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Variable-737"><a href="#Variable-737"><span class="linenos">737</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Variable-738"><a href="#Variable-738"><span class="linenos">738</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_variable_ub</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="Variable-739"><a href="#Variable-739"><span class="linenos">739</span></a>
</span><span id="Variable-740"><a href="#Variable-740"><span class="linenos">740</span></a>    <span class="nd">@property</span>
</span><span id="Variable-741"><a href="#Variable-741"><span class="linenos">741</span></a>    <span class="k">def</span> <span class="nf">integer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Variable-742"><a href="#Variable-742"><span class="linenos">742</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variable_is_integer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span><span id="Variable-743"><a href="#Variable-743"><span class="linenos">743</span></a>
</span><span id="Variable-744"><a href="#Variable-744"><span class="linenos">744</span></a>    <span class="nd">@integer</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Variable-745"><a href="#Variable-745"><span class="linenos">745</span></a>    <span class="k">def</span> <span class="nf">integer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Variable-746"><a href="#Variable-746"><span class="linenos">746</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_variable_is_integer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="Variable-747"><a href="#Variable-747"><span class="linenos">747</span></a>
</span><span id="Variable-748"><a href="#Variable-748"><span class="linenos">748</span></a>    <span class="nd">@property</span>
</span><span id="Variable-749"><a href="#Variable-749"><span class="linenos">749</span></a>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Variable-750"><a href="#Variable-750"><span class="linenos">750</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variable_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span><span id="Variable-751"><a href="#Variable-751"><span class="linenos">751</span></a>
</span><span id="Variable-752"><a href="#Variable-752"><span class="linenos">752</span></a>    <span class="nd">@property</span>
</span><span id="Variable-753"><a href="#Variable-753"><span class="linenos">753</span></a>    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Variable-754"><a href="#Variable-754"><span class="linenos">754</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
</span><span id="Variable-755"><a href="#Variable-755"><span class="linenos">755</span></a>
</span><span id="Variable-756"><a href="#Variable-756"><span class="linenos">756</span></a>    <span class="nd">@property</span>
</span><span id="Variable-757"><a href="#Variable-757"><span class="linenos">757</span></a>    <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Model&quot;</span><span class="p">:</span>
</span><span id="Variable-758"><a href="#Variable-758"><span class="linenos">758</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
</span><span id="Variable-759"><a href="#Variable-759"><span class="linenos">759</span></a>
</span><span id="Variable-760"><a href="#Variable-760"><span class="linenos">760</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Variable-761"><a href="#Variable-761"><span class="linenos">761</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the name, or a string containing the id if the name is empty.&quot;&quot;&quot;</span>
</span><span id="Variable-762"><a href="#Variable-762"><span class="linenos">762</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;variable_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Variable-763"><a href="#Variable-763"><span class="linenos">763</span></a>
</span><span id="Variable-764"><a href="#Variable-764"><span class="linenos">764</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Variable-765"><a href="#Variable-765"><span class="linenos">765</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;Variable id: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">, name: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">!r}</span><span class="s2">&gt;&quot;</span>
</span><span id="Variable-766"><a href="#Variable-766"><span class="linenos">766</span></a>
</span><span id="Variable-767"><a href="#Variable-767"><span class="linenos">767</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="Variable-768"><a href="#Variable-768"><span class="linenos">768</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;VarEqVar&quot;</span><span class="p">:</span>
</span><span id="Variable-769"><a href="#Variable-769"><span class="linenos">769</span></a>        <span class="o">...</span>
</span><span id="Variable-770"><a href="#Variable-770"><span class="linenos">770</span></a>
</span><span id="Variable-771"><a href="#Variable-771"><span class="linenos">771</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="Variable-772"><a href="#Variable-772"><span class="linenos">772</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="n">LinearTypesExceptVariable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;BoundedLinearExpression&quot;</span><span class="p">:</span>
</span><span id="Variable-773"><a href="#Variable-773"><span class="linenos">773</span></a>        <span class="o">...</span>
</span><span id="Variable-774"><a href="#Variable-774"><span class="linenos">774</span></a>
</span><span id="Variable-775"><a href="#Variable-775"><span class="linenos">775</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">):</span>
</span><span id="Variable-776"><a href="#Variable-776"><span class="linenos">776</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">Variable</span><span class="p">):</span>
</span><span id="Variable-777"><a href="#Variable-777"><span class="linenos">777</span></a>            <span class="k">return</span> <span class="n">VarEqVar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
</span><span id="Variable-778"><a href="#Variable-778"><span class="linenos">778</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">rhs</span><span class="p">)</span>
</span><span id="Variable-779"><a href="#Variable-779"><span class="linenos">779</span></a>
</span><span id="Variable-780"><a href="#Variable-780"><span class="linenos">780</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="Variable-781"><a href="#Variable-781"><span class="linenos">781</span></a>    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="s2">&quot;Variable&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Variable-782"><a href="#Variable-782"><span class="linenos">782</span></a>        <span class="o">...</span>
</span><span id="Variable-783"><a href="#Variable-783"><span class="linenos">783</span></a>
</span><span id="Variable-784"><a href="#Variable-784"><span class="linenos">784</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="Variable-785"><a href="#Variable-785"><span class="linenos">785</span></a>    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">:</span> <span class="n">LinearTypesExceptVariable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
</span><span id="Variable-786"><a href="#Variable-786"><span class="linenos">786</span></a>        <span class="o">...</span>
</span><span id="Variable-787"><a href="#Variable-787"><span class="linenos">787</span></a>
</span><span id="Variable-788"><a href="#Variable-788"><span class="linenos">788</span></a>    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rhs</span><span class="p">):</span>
</span><span id="Variable-789"><a href="#Variable-789"><span class="linenos">789</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">Variable</span><span class="p">):</span>
</span><span id="Variable-790"><a href="#Variable-790"><span class="linenos">790</span></a>            <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span> <span class="o">==</span> <span class="n">rhs</span>
</span><span id="Variable-791"><a href="#Variable-791"><span class="linenos">791</span></a>        <span class="n">_raise_ne_not_supported</span><span class="p">()</span>
</span><span id="Variable-792"><a href="#Variable-792"><span class="linenos">792</span></a>
</span><span id="Variable-793"><a href="#Variable-793"><span class="linenos">793</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Variable-794"><a href="#Variable-794"><span class="linenos">794</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
</span><span id="Variable-795"><a href="#Variable-795"><span class="linenos">795</span></a>
</span><span id="Variable-796"><a href="#Variable-796"><span class="linenos">796</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="Variable-797"><a href="#Variable-797"><span class="linenos">797</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="Variable-798"><a href="#Variable-798"><span class="linenos">798</span></a>        <span class="o">...</span>
</span><span id="Variable-799"><a href="#Variable-799"><span class="linenos">799</span></a>
</span><span id="Variable-800"><a href="#Variable-800"><span class="linenos">800</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="Variable-801"><a href="#Variable-801"><span class="linenos">801</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Variable&quot;</span><span class="p">,</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticTerm&quot;</span><span class="p">:</span>
</span><span id="Variable-802"><a href="#Variable-802"><span class="linenos">802</span></a>        <span class="o">...</span>
</span><span id="Variable-803"><a href="#Variable-803"><span class="linenos">803</span></a>
</span><span id="Variable-804"><a href="#Variable-804"><span class="linenos">804</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="Variable-805"><a href="#Variable-805"><span class="linenos">805</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearLinearProduct&quot;</span><span class="p">:</span>
</span><span id="Variable-806"><a href="#Variable-806"><span class="linenos">806</span></a>        <span class="o">...</span>
</span><span id="Variable-807"><a href="#Variable-807"><span class="linenos">807</span></a>
</span><span id="Variable-808"><a href="#Variable-808"><span class="linenos">808</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="Variable-809"><a href="#Variable-809"><span class="linenos">809</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">)):</span>
</span><span id="Variable-810"><a href="#Variable-810"><span class="linenos">810</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="Variable-811"><a href="#Variable-811"><span class="linenos">811</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Variable</span><span class="p">):</span>
</span><span id="Variable-812"><a href="#Variable-812"><span class="linenos">812</span></a>            <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span><span class="n">QuadraticTermKey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span id="Variable-813"><a href="#Variable-813"><span class="linenos">813</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LinearTerm</span><span class="p">):</span>
</span><span id="Variable-814"><a href="#Variable-814"><span class="linenos">814</span></a>            <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span>
</span><span id="Variable-815"><a href="#Variable-815"><span class="linenos">815</span></a>                <span class="n">QuadraticTermKey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">variable</span><span class="p">),</span> <span class="n">other</span><span class="o">.</span><span class="n">coefficient</span>
</span><span id="Variable-816"><a href="#Variable-816"><span class="linenos">816</span></a>            <span class="p">)</span>
</span><span id="Variable-817"><a href="#Variable-817"><span class="linenos">817</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="Variable-818"><a href="#Variable-818"><span class="linenos">818</span></a>            <span class="k">return</span> <span class="n">LinearLinearProduct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>  <span class="c1"># pytype: disable=bad-return-type</span>
</span><span id="Variable-819"><a href="#Variable-819"><span class="linenos">819</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
</span><span id="Variable-820"><a href="#Variable-820"><span class="linenos">820</span></a>
</span><span id="Variable-821"><a href="#Variable-821"><span class="linenos">821</span></a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="Variable-822"><a href="#Variable-822"><span class="linenos">822</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Variable-823"><a href="#Variable-823"><span class="linenos">823</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="Variable-824"><a href="#Variable-824"><span class="linenos">824</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="Variable-825"><a href="#Variable-825"><span class="linenos">825</span></a>
</span><span id="Variable-826"><a href="#Variable-826"><span class="linenos">826</span></a>    <span class="c1"># TODO(b/216492143): explore numerical consequences of 1.0 / constant below.</span>
</span><span id="Variable-827"><a href="#Variable-827"><span class="linenos">827</span></a>    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="Variable-828"><a href="#Variable-828"><span class="linenos">828</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Variable-829"><a href="#Variable-829"><span class="linenos">829</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="Variable-830"><a href="#Variable-830"><span class="linenos">830</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="Variable-831"><a href="#Variable-831"><span class="linenos">831</span></a>
</span><span id="Variable-832"><a href="#Variable-832"><span class="linenos">832</span></a>    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="Variable-833"><a href="#Variable-833"><span class="linenos">833</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
</span><span id="Variable-834"><a href="#Variable-834"><span class="linenos">834</span></a>
</span><span id="Variable-835"><a href="#Variable-835"><span class="linenos">835</span></a>    <span class="k">def</span> <span class="nf">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="Variable-836"><a href="#Variable-836"><span class="linenos">836</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Variable-837"><a href="#Variable-837"><span class="linenos">837</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Variable-838"><a href="#Variable-838"><span class="linenos">838</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_ProcessedElements</span><span class="p">,</span>
</span><span id="Variable-839"><a href="#Variable-839"><span class="linenos">839</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_ToProcessElements</span><span class="p">,</span>
</span><span id="Variable-840"><a href="#Variable-840"><span class="linenos">840</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Variable-841"><a href="#Variable-841"><span class="linenos">841</span></a>        <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="bp">self</span><span class="p">]</span> <span class="o">+=</span> <span class="n">scale</span>
</span></pre></div>


            <div class="docstring"><p>A decision variable for an optimization model.</p>

<p>A decision variable takes a value from a domain, either the real numbers or
the integers, and restricted to be in some interval [lb, ub] (where lb and ub
can be infinite). The case of lb == ub is allowed, this means the variable
must take a single value. The case of lb &gt; ub is also allowed, this implies
that the problem is infeasible.</p>

<h6 id="a-variable-is-configured-as-follows">A Variable is configured as follows:</h6>

<blockquote>
  <ul>
  <li>lower_bound: a float property, lb above. Should not be NaN nor +inf.</li>
  <li>upper_bound: a float property, ub above. Should not be NaN nor -inf.</li>
  <li>integer: a bool property, if the domain is integer or continuous.</li>
  </ul>
</blockquote>

<p>The name is optional, read only, and used only for debugging. Non-empty names
should be distinct.</p>

<p>Every Variable is associated with a Model (defined below). Note that data
describing the variable (e.g. lower_bound) is owned by <a href="#Model.storage">Model.storage</a>, this
class is simply a reference to that data. Do not create a Variable directly,
use <a href="#Model.add_variable">Model.add_variable()</a> instead.</p>
</div>


                            <div id="Variable.__init__" class="classattr">
                                        <input id="Variable.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Variable</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">model</span><span class="p">:</span> <span class="n"><a href="#Model">Model</a></span>, </span><span class="param"><span class="n">vid</span><span class="p">:</span> <span class="nb">int</span></span>)</span>

                <label class="view-source-button" for="Variable.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Variable.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Variable.__init__-719"><a href="#Variable.__init__-719"><span class="linenos">719</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">vid</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Variable.__init__-720"><a href="#Variable.__init__-720"><span class="linenos">720</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do not invoke directly, use Model.add_variable().&quot;&quot;&quot;</span>
</span><span id="Variable.__init__-721"><a href="#Variable.__init__-721"><span class="linenos">721</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span> <span class="o">=</span> <span class="n">model</span>
</span><span id="Variable.__init__-722"><a href="#Variable.__init__-722"><span class="linenos">722</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">vid</span>
</span></pre></div>


            <div class="docstring"><p>Do not invoke directly, use <a href="#Model.add_variable">Model.add_variable()</a>.</p>
</div>


                            </div>
                            <div id="Variable.lower_bound" class="classattr">
                                        <input id="Variable.lower_bound-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">lower_bound</span><span class="annotation">: float</span>

                <label class="view-source-button" for="Variable.lower_bound-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Variable.lower_bound"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Variable.lower_bound-724"><a href="#Variable.lower_bound-724"><span class="linenos">724</span></a>    <span class="nd">@property</span>
</span><span id="Variable.lower_bound-725"><a href="#Variable.lower_bound-725"><span class="linenos">725</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Variable.lower_bound-726"><a href="#Variable.lower_bound-726"><span class="linenos">726</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variable_lb</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Variable.upper_bound" class="classattr">
                                        <input id="Variable.upper_bound-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">upper_bound</span><span class="annotation">: float</span>

                <label class="view-source-button" for="Variable.upper_bound-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Variable.upper_bound"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Variable.upper_bound-732"><a href="#Variable.upper_bound-732"><span class="linenos">732</span></a>    <span class="nd">@property</span>
</span><span id="Variable.upper_bound-733"><a href="#Variable.upper_bound-733"><span class="linenos">733</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Variable.upper_bound-734"><a href="#Variable.upper_bound-734"><span class="linenos">734</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variable_ub</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Variable.integer" class="classattr">
                                        <input id="Variable.integer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">integer</span><span class="annotation">: bool</span>

                <label class="view-source-button" for="Variable.integer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Variable.integer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Variable.integer-740"><a href="#Variable.integer-740"><span class="linenos">740</span></a>    <span class="nd">@property</span>
</span><span id="Variable.integer-741"><a href="#Variable.integer-741"><span class="linenos">741</span></a>    <span class="k">def</span> <span class="nf">integer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Variable.integer-742"><a href="#Variable.integer-742"><span class="linenos">742</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variable_is_integer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Variable.name" class="classattr">
                                        <input id="Variable.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="Variable.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Variable.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Variable.name-748"><a href="#Variable.name-748"><span class="linenos">748</span></a>    <span class="nd">@property</span>
</span><span id="Variable.name-749"><a href="#Variable.name-749"><span class="linenos">749</span></a>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Variable.name-750"><a href="#Variable.name-750"><span class="linenos">750</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variable_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Variable.id" class="classattr">
                                        <input id="Variable.id-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">id</span><span class="annotation">: int</span>

                <label class="view-source-button" for="Variable.id-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Variable.id"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Variable.id-752"><a href="#Variable.id-752"><span class="linenos">752</span></a>    <span class="nd">@property</span>
</span><span id="Variable.id-753"><a href="#Variable.id-753"><span class="linenos">753</span></a>    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="Variable.id-754"><a href="#Variable.id-754"><span class="linenos">754</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
</span></pre></div>


    

                            </div>
                            <div id="Variable.model" class="classattr">
                                        <input id="Variable.model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">model</span><span class="annotation">: <a href="#Model">Model</a></span>

                <label class="view-source-button" for="Variable.model-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Variable.model"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Variable.model-756"><a href="#Variable.model-756"><span class="linenos">756</span></a>    <span class="nd">@property</span>
</span><span id="Variable.model-757"><a href="#Variable.model-757"><span class="linenos">757</span></a>    <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Model&quot;</span><span class="p">:</span>
</span><span id="Variable.model-758"><a href="#Variable.model-758"><span class="linenos">758</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="LinearTerm">
                            <input id="LinearTerm-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LinearTerm</span><wbr>(<span class="base"><a href="#LinearBase">LinearBase</a></span>):

                <label class="view-source-button" for="LinearTerm-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearTerm"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearTerm-844"><a href="#LinearTerm-844"><span class="linenos">844</span></a><span class="k">class</span> <span class="nc">LinearTerm</span><span class="p">(</span><span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearTerm-845"><a href="#LinearTerm-845"><span class="linenos">845</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The product of a scalar and a variable.</span>
</span><span id="LinearTerm-846"><a href="#LinearTerm-846"><span class="linenos">846</span></a>
</span><span id="LinearTerm-847"><a href="#LinearTerm-847"><span class="linenos">847</span></a><span class="sd">    This class is immutable.</span>
</span><span id="LinearTerm-848"><a href="#LinearTerm-848"><span class="linenos">848</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="LinearTerm-849"><a href="#LinearTerm-849"><span class="linenos">849</span></a>
</span><span id="LinearTerm-850"><a href="#LinearTerm-850"><span class="linenos">850</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_variable&quot;</span><span class="p">,</span> <span class="s2">&quot;_coefficient&quot;</span>
</span><span id="LinearTerm-851"><a href="#LinearTerm-851"><span class="linenos">851</span></a>
</span><span id="LinearTerm-852"><a href="#LinearTerm-852"><span class="linenos">852</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearTerm-853"><a href="#LinearTerm-853"><span class="linenos">853</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">:</span> <span class="n">Variable</span> <span class="o">=</span> <span class="n">variable</span>
</span><span id="LinearTerm-854"><a href="#LinearTerm-854"><span class="linenos">854</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">coefficient</span>
</span><span id="LinearTerm-855"><a href="#LinearTerm-855"><span class="linenos">855</span></a>
</span><span id="LinearTerm-856"><a href="#LinearTerm-856"><span class="linenos">856</span></a>    <span class="nd">@property</span>
</span><span id="LinearTerm-857"><a href="#LinearTerm-857"><span class="linenos">857</span></a>    <span class="k">def</span> <span class="nf">variable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="LinearTerm-858"><a href="#LinearTerm-858"><span class="linenos">858</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_variable</span>
</span><span id="LinearTerm-859"><a href="#LinearTerm-859"><span class="linenos">859</span></a>
</span><span id="LinearTerm-860"><a href="#LinearTerm-860"><span class="linenos">860</span></a>    <span class="nd">@property</span>
</span><span id="LinearTerm-861"><a href="#LinearTerm-861"><span class="linenos">861</span></a>    <span class="k">def</span> <span class="nf">coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LinearTerm-862"><a href="#LinearTerm-862"><span class="linenos">862</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span>
</span><span id="LinearTerm-863"><a href="#LinearTerm-863"><span class="linenos">863</span></a>
</span><span id="LinearTerm-864"><a href="#LinearTerm-864"><span class="linenos">864</span></a>    <span class="k">def</span> <span class="nf">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="LinearTerm-865"><a href="#LinearTerm-865"><span class="linenos">865</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="LinearTerm-866"><a href="#LinearTerm-866"><span class="linenos">866</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="LinearTerm-867"><a href="#LinearTerm-867"><span class="linenos">867</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_ProcessedElements</span><span class="p">,</span>
</span><span id="LinearTerm-868"><a href="#LinearTerm-868"><span class="linenos">868</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_ToProcessElements</span><span class="p">,</span>
</span><span id="LinearTerm-869"><a href="#LinearTerm-869"><span class="linenos">869</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearTerm-870"><a href="#LinearTerm-870"><span class="linenos">870</span></a>        <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="LinearTerm-871"><a href="#LinearTerm-871"><span class="linenos">871</span></a>
</span><span id="LinearTerm-872"><a href="#LinearTerm-872"><span class="linenos">872</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="LinearTerm-873"><a href="#LinearTerm-873"><span class="linenos">873</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="LinearTerm-874"><a href="#LinearTerm-874"><span class="linenos">874</span></a>        <span class="o">...</span>
</span><span id="LinearTerm-875"><a href="#LinearTerm-875"><span class="linenos">875</span></a>
</span><span id="LinearTerm-876"><a href="#LinearTerm-876"><span class="linenos">876</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="LinearTerm-877"><a href="#LinearTerm-877"><span class="linenos">877</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="s2">&quot;Variable&quot;</span><span class="p">,</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticTerm&quot;</span><span class="p">:</span>
</span><span id="LinearTerm-878"><a href="#LinearTerm-878"><span class="linenos">878</span></a>        <span class="o">...</span>
</span><span id="LinearTerm-879"><a href="#LinearTerm-879"><span class="linenos">879</span></a>
</span><span id="LinearTerm-880"><a href="#LinearTerm-880"><span class="linenos">880</span></a>    <span class="nd">@typing</span><span class="o">.</span><span class="n">overload</span>
</span><span id="LinearTerm-881"><a href="#LinearTerm-881"><span class="linenos">881</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="s2">&quot;LinearBase&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearLinearProduct&quot;</span><span class="p">:</span>
</span><span id="LinearTerm-882"><a href="#LinearTerm-882"><span class="linenos">882</span></a>        <span class="o">...</span>
</span><span id="LinearTerm-883"><a href="#LinearTerm-883"><span class="linenos">883</span></a>
</span><span id="LinearTerm-884"><a href="#LinearTerm-884"><span class="linenos">884</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
</span><span id="LinearTerm-885"><a href="#LinearTerm-885"><span class="linenos">885</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">)):</span>
</span><span id="LinearTerm-886"><a href="#LinearTerm-886"><span class="linenos">886</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="LinearTerm-887"><a href="#LinearTerm-887"><span class="linenos">887</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Variable</span><span class="p">):</span>
</span><span id="LinearTerm-888"><a href="#LinearTerm-888"><span class="linenos">888</span></a>            <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span>
</span><span id="LinearTerm-889"><a href="#LinearTerm-889"><span class="linenos">889</span></a>                <span class="n">QuadraticTermKey</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">,</span> <span class="n">other</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span>
</span><span id="LinearTerm-890"><a href="#LinearTerm-890"><span class="linenos">890</span></a>            <span class="p">)</span>
</span><span id="LinearTerm-891"><a href="#LinearTerm-891"><span class="linenos">891</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LinearTerm</span><span class="p">):</span>
</span><span id="LinearTerm-892"><a href="#LinearTerm-892"><span class="linenos">892</span></a>            <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span>
</span><span id="LinearTerm-893"><a href="#LinearTerm-893"><span class="linenos">893</span></a>                <span class="n">QuadraticTermKey</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">variable</span><span class="p">),</span>
</span><span id="LinearTerm-894"><a href="#LinearTerm-894"><span class="linenos">894</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">coefficient</span><span class="p">,</span>
</span><span id="LinearTerm-895"><a href="#LinearTerm-895"><span class="linenos">895</span></a>            <span class="p">)</span>
</span><span id="LinearTerm-896"><a href="#LinearTerm-896"><span class="linenos">896</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearTerm-897"><a href="#LinearTerm-897"><span class="linenos">897</span></a>            <span class="k">return</span> <span class="n">LinearLinearProduct</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>  <span class="c1"># pytype: disable=bad-return-type</span>
</span><span id="LinearTerm-898"><a href="#LinearTerm-898"><span class="linenos">898</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">*</span> <span class="n">other</span><span class="p">)</span>
</span><span id="LinearTerm-899"><a href="#LinearTerm-899"><span class="linenos">899</span></a>
</span><span id="LinearTerm-900"><a href="#LinearTerm-900"><span class="linenos">900</span></a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="LinearTerm-901"><a href="#LinearTerm-901"><span class="linenos">901</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="LinearTerm-902"><a href="#LinearTerm-902"><span class="linenos">902</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="LinearTerm-903"><a href="#LinearTerm-903"><span class="linenos">903</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">*</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="LinearTerm-904"><a href="#LinearTerm-904"><span class="linenos">904</span></a>
</span><span id="LinearTerm-905"><a href="#LinearTerm-905"><span class="linenos">905</span></a>    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="LinearTerm-906"><a href="#LinearTerm-906"><span class="linenos">906</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="LinearTerm-907"><a href="#LinearTerm-907"><span class="linenos">907</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="LinearTerm-908"><a href="#LinearTerm-908"><span class="linenos">908</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">/</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="LinearTerm-909"><a href="#LinearTerm-909"><span class="linenos">909</span></a>
</span><span id="LinearTerm-910"><a href="#LinearTerm-910"><span class="linenos">910</span></a>    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;LinearTerm&quot;</span><span class="p">:</span>
</span><span id="LinearTerm-911"><a href="#LinearTerm-911"><span class="linenos">911</span></a>        <span class="k">return</span> <span class="n">LinearTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="p">)</span>
</span><span id="LinearTerm-912"><a href="#LinearTerm-912"><span class="linenos">912</span></a>
</span><span id="LinearTerm-913"><a href="#LinearTerm-913"><span class="linenos">913</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearTerm-914"><a href="#LinearTerm-914"><span class="linenos">914</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="si">}</span><span class="s2"> * </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="LinearTerm-915"><a href="#LinearTerm-915"><span class="linenos">915</span></a>
</span><span id="LinearTerm-916"><a href="#LinearTerm-916"><span class="linenos">916</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearTerm-917"><a href="#LinearTerm-917"><span class="linenos">917</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;LinearTerm(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="si">!r}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="si">!r}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The product of a scalar and a variable.</p>

<p>This class is immutable.</p>
</div>


                            <div id="LinearTerm.__init__" class="classattr">
                                        <input id="LinearTerm.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">LinearTerm</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">variable</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span>, </span><span class="param"><span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span></span>)</span>

                <label class="view-source-button" for="LinearTerm.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearTerm.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearTerm.__init__-852"><a href="#LinearTerm.__init__-852"><span class="linenos">852</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearTerm.__init__-853"><a href="#LinearTerm.__init__-853"><span class="linenos">853</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_variable</span><span class="p">:</span> <span class="n">Variable</span> <span class="o">=</span> <span class="n">variable</span>
</span><span id="LinearTerm.__init__-854"><a href="#LinearTerm.__init__-854"><span class="linenos">854</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">coefficient</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearTerm.variable" class="classattr">
                                        <input id="LinearTerm.variable-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">variable</span><span class="annotation">: <a href="#Variable">Variable</a></span>

                <label class="view-source-button" for="LinearTerm.variable-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearTerm.variable"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearTerm.variable-856"><a href="#LinearTerm.variable-856"><span class="linenos">856</span></a>    <span class="nd">@property</span>
</span><span id="LinearTerm.variable-857"><a href="#LinearTerm.variable-857"><span class="linenos">857</span></a>    <span class="k">def</span> <span class="nf">variable</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="LinearTerm.variable-858"><a href="#LinearTerm.variable-858"><span class="linenos">858</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_variable</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearTerm.coefficient" class="classattr">
                                        <input id="LinearTerm.coefficient-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">coefficient</span><span class="annotation">: float</span>

                <label class="view-source-button" for="LinearTerm.coefficient-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearTerm.coefficient"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearTerm.coefficient-860"><a href="#LinearTerm.coefficient-860"><span class="linenos">860</span></a>    <span class="nd">@property</span>
</span><span id="LinearTerm.coefficient-861"><a href="#LinearTerm.coefficient-861"><span class="linenos">861</span></a>    <span class="k">def</span> <span class="nf">coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LinearTerm.coefficient-862"><a href="#LinearTerm.coefficient-862"><span class="linenos">862</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="QuadraticTerm">
                            <input id="QuadraticTerm-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">QuadraticTerm</span><wbr>(<span class="base"><a href="#QuadraticBase">QuadraticBase</a></span>):

                <label class="view-source-button" for="QuadraticTerm-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticTerm"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticTerm-920"><a href="#QuadraticTerm-920"><span class="linenos">920</span></a><span class="k">class</span> <span class="nc">QuadraticTerm</span><span class="p">(</span><span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="QuadraticTerm-921"><a href="#QuadraticTerm-921"><span class="linenos">921</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The product of a scalar and two variables.</span>
</span><span id="QuadraticTerm-922"><a href="#QuadraticTerm-922"><span class="linenos">922</span></a>
</span><span id="QuadraticTerm-923"><a href="#QuadraticTerm-923"><span class="linenos">923</span></a><span class="sd">    This class is immutable.</span>
</span><span id="QuadraticTerm-924"><a href="#QuadraticTerm-924"><span class="linenos">924</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="QuadraticTerm-925"><a href="#QuadraticTerm-925"><span class="linenos">925</span></a>
</span><span id="QuadraticTerm-926"><a href="#QuadraticTerm-926"><span class="linenos">926</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_key&quot;</span><span class="p">,</span> <span class="s2">&quot;_coefficient&quot;</span>
</span><span id="QuadraticTerm-927"><a href="#QuadraticTerm-927"><span class="linenos">927</span></a>
</span><span id="QuadraticTerm-928"><a href="#QuadraticTerm-928"><span class="linenos">928</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">QuadraticTermKey</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="QuadraticTerm-929"><a href="#QuadraticTerm-929"><span class="linenos">929</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">:</span> <span class="n">QuadraticTermKey</span> <span class="o">=</span> <span class="n">key</span>
</span><span id="QuadraticTerm-930"><a href="#QuadraticTerm-930"><span class="linenos">930</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">coefficient</span>
</span><span id="QuadraticTerm-931"><a href="#QuadraticTerm-931"><span class="linenos">931</span></a>
</span><span id="QuadraticTerm-932"><a href="#QuadraticTerm-932"><span class="linenos">932</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticTerm-933"><a href="#QuadraticTerm-933"><span class="linenos">933</span></a>    <span class="k">def</span> <span class="nf">key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QuadraticTermKey</span><span class="p">:</span>
</span><span id="QuadraticTerm-934"><a href="#QuadraticTerm-934"><span class="linenos">934</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_key</span>
</span><span id="QuadraticTerm-935"><a href="#QuadraticTerm-935"><span class="linenos">935</span></a>
</span><span id="QuadraticTerm-936"><a href="#QuadraticTerm-936"><span class="linenos">936</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticTerm-937"><a href="#QuadraticTerm-937"><span class="linenos">937</span></a>    <span class="k">def</span> <span class="nf">coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="QuadraticTerm-938"><a href="#QuadraticTerm-938"><span class="linenos">938</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span>
</span><span id="QuadraticTerm-939"><a href="#QuadraticTerm-939"><span class="linenos">939</span></a>
</span><span id="QuadraticTerm-940"><a href="#QuadraticTerm-940"><span class="linenos">940</span></a>    <span class="k">def</span> <span class="nf">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="QuadraticTerm-941"><a href="#QuadraticTerm-941"><span class="linenos">941</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="QuadraticTerm-942"><a href="#QuadraticTerm-942"><span class="linenos">942</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="QuadraticTerm-943"><a href="#QuadraticTerm-943"><span class="linenos">943</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_QuadraticProcessedElements</span><span class="p">,</span>
</span><span id="QuadraticTerm-944"><a href="#QuadraticTerm-944"><span class="linenos">944</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_ToProcessElements</span><span class="p">,</span>
</span><span id="QuadraticTerm-945"><a href="#QuadraticTerm-945"><span class="linenos">945</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="QuadraticTerm-946"><a href="#QuadraticTerm-946"><span class="linenos">946</span></a>        <span class="n">processed_elements</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">]</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="QuadraticTerm-947"><a href="#QuadraticTerm-947"><span class="linenos">947</span></a>
</span><span id="QuadraticTerm-948"><a href="#QuadraticTerm-948"><span class="linenos">948</span></a>    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticTerm&quot;</span><span class="p">:</span>
</span><span id="QuadraticTerm-949"><a href="#QuadraticTerm-949"><span class="linenos">949</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="QuadraticTerm-950"><a href="#QuadraticTerm-950"><span class="linenos">950</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="QuadraticTerm-951"><a href="#QuadraticTerm-951"><span class="linenos">951</span></a>        <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">*</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="QuadraticTerm-952"><a href="#QuadraticTerm-952"><span class="linenos">952</span></a>
</span><span id="QuadraticTerm-953"><a href="#QuadraticTerm-953"><span class="linenos">953</span></a>    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticTerm&quot;</span><span class="p">:</span>
</span><span id="QuadraticTerm-954"><a href="#QuadraticTerm-954"><span class="linenos">954</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="QuadraticTerm-955"><a href="#QuadraticTerm-955"><span class="linenos">955</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="QuadraticTerm-956"><a href="#QuadraticTerm-956"><span class="linenos">956</span></a>        <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">*</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="QuadraticTerm-957"><a href="#QuadraticTerm-957"><span class="linenos">957</span></a>
</span><span id="QuadraticTerm-958"><a href="#QuadraticTerm-958"><span class="linenos">958</span></a>    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constant</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticTerm&quot;</span><span class="p">:</span>
</span><span id="QuadraticTerm-959"><a href="#QuadraticTerm-959"><span class="linenos">959</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">constant</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="QuadraticTerm-960"><a href="#QuadraticTerm-960"><span class="linenos">960</span></a>            <span class="k">return</span> <span class="bp">NotImplemented</span>
</span><span id="QuadraticTerm-961"><a href="#QuadraticTerm-961"><span class="linenos">961</span></a>        <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span> <span class="o">/</span> <span class="n">constant</span><span class="p">)</span>
</span><span id="QuadraticTerm-962"><a href="#QuadraticTerm-962"><span class="linenos">962</span></a>
</span><span id="QuadraticTerm-963"><a href="#QuadraticTerm-963"><span class="linenos">963</span></a>    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;QuadraticTerm&quot;</span><span class="p">:</span>
</span><span id="QuadraticTerm-964"><a href="#QuadraticTerm-964"><span class="linenos">964</span></a>        <span class="k">return</span> <span class="n">QuadraticTerm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="p">)</span>
</span><span id="QuadraticTerm-965"><a href="#QuadraticTerm-965"><span class="linenos">965</span></a>
</span><span id="QuadraticTerm-966"><a href="#QuadraticTerm-966"><span class="linenos">966</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="QuadraticTerm-967"><a href="#QuadraticTerm-967"><span class="linenos">967</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="si">}</span><span class="s2"> * </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="si">!s}</span><span class="s2">&quot;</span>
</span><span id="QuadraticTerm-968"><a href="#QuadraticTerm-968"><span class="linenos">968</span></a>
</span><span id="QuadraticTerm-969"><a href="#QuadraticTerm-969"><span class="linenos">969</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="QuadraticTerm-970"><a href="#QuadraticTerm-970"><span class="linenos">970</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;QuadraticTerm(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="si">!r}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="si">}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>The product of a scalar and two variables.</p>

<p>This class is immutable.</p>
</div>


                            <div id="QuadraticTerm.__init__" class="classattr">
                                        <input id="QuadraticTerm.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">QuadraticTerm</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">key</span><span class="p">:</span> <span class="n"><a href="#QuadraticTermKey">QuadraticTermKey</a></span>,</span><span class="param">	<span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span></span>)</span>

                <label class="view-source-button" for="QuadraticTerm.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticTerm.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticTerm.__init__-928"><a href="#QuadraticTerm.__init__-928"><span class="linenos">928</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="n">QuadraticTermKey</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="QuadraticTerm.__init__-929"><a href="#QuadraticTerm.__init__-929"><span class="linenos">929</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">:</span> <span class="n">QuadraticTermKey</span> <span class="o">=</span> <span class="n">key</span>
</span><span id="QuadraticTerm.__init__-930"><a href="#QuadraticTerm.__init__-930"><span class="linenos">930</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">coefficient</span>
</span></pre></div>


    

                            </div>
                            <div id="QuadraticTerm.key" class="classattr">
                                        <input id="QuadraticTerm.key-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">key</span><span class="annotation">: <a href="#QuadraticTermKey">QuadraticTermKey</a></span>

                <label class="view-source-button" for="QuadraticTerm.key-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticTerm.key"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticTerm.key-932"><a href="#QuadraticTerm.key-932"><span class="linenos">932</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticTerm.key-933"><a href="#QuadraticTerm.key-933"><span class="linenos">933</span></a>    <span class="k">def</span> <span class="nf">key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QuadraticTermKey</span><span class="p">:</span>
</span><span id="QuadraticTerm.key-934"><a href="#QuadraticTerm.key-934"><span class="linenos">934</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_key</span>
</span></pre></div>


    

                            </div>
                            <div id="QuadraticTerm.coefficient" class="classattr">
                                        <input id="QuadraticTerm.coefficient-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">coefficient</span><span class="annotation">: float</span>

                <label class="view-source-button" for="QuadraticTerm.coefficient-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticTerm.coefficient"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticTerm.coefficient-936"><a href="#QuadraticTerm.coefficient-936"><span class="linenos">936</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticTerm.coefficient-937"><a href="#QuadraticTerm.coefficient-937"><span class="linenos">937</span></a>    <span class="k">def</span> <span class="nf">coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="QuadraticTerm.coefficient-938"><a href="#QuadraticTerm.coefficient-938"><span class="linenos">938</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_coefficient</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="LinearExpression">
                            <input id="LinearExpression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LinearExpression</span><wbr>(<span class="base"><a href="#LinearBase">LinearBase</a></span>):

                <label class="view-source-button" for="LinearExpression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearExpression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearExpression-973"><a href="#LinearExpression-973"><span class="linenos"> 973</span></a><span class="k">class</span> <span class="nc">LinearExpression</span><span class="p">(</span><span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearExpression-974"><a href="#LinearExpression-974"><span class="linenos"> 974</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;For variables x, an expression: b + sum_{i in I} a_i * x_i.</span>
</span><span id="LinearExpression-975"><a href="#LinearExpression-975"><span class="linenos"> 975</span></a>
</span><span id="LinearExpression-976"><a href="#LinearExpression-976"><span class="linenos"> 976</span></a><span class="sd">    This class is immutable.</span>
</span><span id="LinearExpression-977"><a href="#LinearExpression-977"><span class="linenos"> 977</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="LinearExpression-978"><a href="#LinearExpression-978"><span class="linenos"> 978</span></a>
</span><span id="LinearExpression-979"><a href="#LinearExpression-979"><span class="linenos"> 979</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;__weakref__&quot;</span><span class="p">,</span> <span class="s2">&quot;_terms&quot;</span><span class="p">,</span> <span class="s2">&quot;_offset&quot;</span>
</span><span id="LinearExpression-980"><a href="#LinearExpression-980"><span class="linenos"> 980</span></a>
</span><span id="LinearExpression-981"><a href="#LinearExpression-981"><span class="linenos"> 981</span></a>    <span class="c1"># TODO(b/216492143): consider initializing from a dictionary.</span>
</span><span id="LinearExpression-982"><a href="#LinearExpression-982"><span class="linenos"> 982</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">LinearTypes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearExpression-983"><a href="#LinearExpression-983"><span class="linenos"> 983</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="LinearExpression-984"><a href="#LinearExpression-984"><span class="linenos"> 984</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="LinearExpression-985"><a href="#LinearExpression-985"><span class="linenos"> 985</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="LinearExpression-986"><a href="#LinearExpression-986"><span class="linenos"> 986</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">()</span>
</span><span id="LinearExpression-987"><a href="#LinearExpression-987"><span class="linenos"> 987</span></a>            <span class="k">return</span>
</span><span id="LinearExpression-988"><a href="#LinearExpression-988"><span class="linenos"> 988</span></a>
</span><span id="LinearExpression-989"><a href="#LinearExpression-989"><span class="linenos"> 989</span></a>        <span class="n">to_process</span><span class="p">:</span> <span class="n">_LinearToProcessElements</span> <span class="o">=</span> <span class="n">_LinearToProcessElements</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span id="LinearExpression-990"><a href="#LinearExpression-990"><span class="linenos"> 990</span></a>        <span class="n">processed_elements</span> <span class="o">=</span> <span class="n">_ProcessedElements</span><span class="p">()</span>
</span><span id="LinearExpression-991"><a href="#LinearExpression-991"><span class="linenos"> 991</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>
</span><span id="LinearExpression-992"><a href="#LinearExpression-992"><span class="linenos"> 992</span></a>            <span class="n">linear</span><span class="p">,</span> <span class="n">coef</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="LinearExpression-993"><a href="#LinearExpression-993"><span class="linenos"> 993</span></a>            <span class="n">linear</span><span class="o">.</span><span class="n">_flatten_once_and_add_to</span><span class="p">(</span><span class="n">coef</span><span class="p">,</span> <span class="n">processed_elements</span><span class="p">,</span> <span class="n">to_process</span><span class="p">)</span>
</span><span id="LinearExpression-994"><a href="#LinearExpression-994"><span class="linenos"> 994</span></a>        <span class="c1"># TODO(b/216492143): explore avoiding this copy.</span>
</span><span id="LinearExpression-995"><a href="#LinearExpression-995"><span class="linenos"> 995</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">(</span>
</span><span id="LinearExpression-996"><a href="#LinearExpression-996"><span class="linenos"> 996</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span>
</span><span id="LinearExpression-997"><a href="#LinearExpression-997"><span class="linenos"> 997</span></a>        <span class="p">)</span>
</span><span id="LinearExpression-998"><a href="#LinearExpression-998"><span class="linenos"> 998</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span> <span class="o">=</span> <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span>
</span><span id="LinearExpression-999"><a href="#LinearExpression-999"><span class="linenos"> 999</span></a>
</span><span id="LinearExpression-1000"><a href="#LinearExpression-1000"><span class="linenos">1000</span></a>    <span class="nd">@property</span>
</span><span id="LinearExpression-1001"><a href="#LinearExpression-1001"><span class="linenos">1001</span></a>    <span class="k">def</span> <span class="nf">terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="LinearExpression-1002"><a href="#LinearExpression-1002"><span class="linenos">1002</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span>
</span><span id="LinearExpression-1003"><a href="#LinearExpression-1003"><span class="linenos">1003</span></a>
</span><span id="LinearExpression-1004"><a href="#LinearExpression-1004"><span class="linenos">1004</span></a>    <span class="nd">@property</span>
</span><span id="LinearExpression-1005"><a href="#LinearExpression-1005"><span class="linenos">1005</span></a>    <span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LinearExpression-1006"><a href="#LinearExpression-1006"><span class="linenos">1006</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span>
</span><span id="LinearExpression-1007"><a href="#LinearExpression-1007"><span class="linenos">1007</span></a>
</span><span id="LinearExpression-1008"><a href="#LinearExpression-1008"><span class="linenos">1008</span></a>    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_values</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LinearExpression-1009"><a href="#LinearExpression-1009"><span class="linenos">1009</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the value of this expression for given variable values.</span>
</span><span id="LinearExpression-1010"><a href="#LinearExpression-1010"><span class="linenos">1010</span></a>
</span><span id="LinearExpression-1011"><a href="#LinearExpression-1011"><span class="linenos">1011</span></a><span class="sd">        E.g. if this is 3 * x + 4 and variable_values = {x: 2.0}, then</span>
</span><span id="LinearExpression-1012"><a href="#LinearExpression-1012"><span class="linenos">1012</span></a><span class="sd">        evaluate(variable_values) equals 10.0.</span>
</span><span id="LinearExpression-1013"><a href="#LinearExpression-1013"><span class="linenos">1013</span></a>
</span><span id="LinearExpression-1014"><a href="#LinearExpression-1014"><span class="linenos">1014</span></a><span class="sd">        See also mathopt.evaluate_expression(), which works on any type in</span>
</span><span id="LinearExpression-1015"><a href="#LinearExpression-1015"><span class="linenos">1015</span></a><span class="sd">        QuadraticTypes.</span>
</span><span id="LinearExpression-1016"><a href="#LinearExpression-1016"><span class="linenos">1016</span></a>
</span><span id="LinearExpression-1017"><a href="#LinearExpression-1017"><span class="linenos">1017</span></a><span class="sd">        Args:</span>
</span><span id="LinearExpression-1018"><a href="#LinearExpression-1018"><span class="linenos">1018</span></a><span class="sd">          variable_values: Must contain a value for every variable in expression.</span>
</span><span id="LinearExpression-1019"><a href="#LinearExpression-1019"><span class="linenos">1019</span></a>
</span><span id="LinearExpression-1020"><a href="#LinearExpression-1020"><span class="linenos">1020</span></a><span class="sd">        Returns:</span>
</span><span id="LinearExpression-1021"><a href="#LinearExpression-1021"><span class="linenos">1021</span></a><span class="sd">          The value of this expression when replacing variables by their value.</span>
</span><span id="LinearExpression-1022"><a href="#LinearExpression-1022"><span class="linenos">1022</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LinearExpression-1023"><a href="#LinearExpression-1023"><span class="linenos">1023</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span>
</span><span id="LinearExpression-1024"><a href="#LinearExpression-1024"><span class="linenos">1024</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coef</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span>
</span><span id="LinearExpression-1025"><a href="#LinearExpression-1025"><span class="linenos">1025</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">var_coef_pair</span><span class="p">:</span> <span class="n">var_coef_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
</span><span id="LinearExpression-1026"><a href="#LinearExpression-1026"><span class="linenos">1026</span></a>        <span class="p">):</span>
</span><span id="LinearExpression-1027"><a href="#LinearExpression-1027"><span class="linenos">1027</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="n">coef</span> <span class="o">*</span> <span class="n">variable_values</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
</span><span id="LinearExpression-1028"><a href="#LinearExpression-1028"><span class="linenos">1028</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="LinearExpression-1029"><a href="#LinearExpression-1029"><span class="linenos">1029</span></a>
</span><span id="LinearExpression-1030"><a href="#LinearExpression-1030"><span class="linenos">1030</span></a>    <span class="k">def</span> <span class="nf">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="LinearExpression-1031"><a href="#LinearExpression-1031"><span class="linenos">1031</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="LinearExpression-1032"><a href="#LinearExpression-1032"><span class="linenos">1032</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="LinearExpression-1033"><a href="#LinearExpression-1033"><span class="linenos">1033</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_ProcessedElements</span><span class="p">,</span>
</span><span id="LinearExpression-1034"><a href="#LinearExpression-1034"><span class="linenos">1034</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_ToProcessElements</span><span class="p">,</span>
</span><span id="LinearExpression-1035"><a href="#LinearExpression-1035"><span class="linenos">1035</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearExpression-1036"><a href="#LinearExpression-1036"><span class="linenos">1036</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="LinearExpression-1037"><a href="#LinearExpression-1037"><span class="linenos">1037</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">+=</span> <span class="n">val</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="LinearExpression-1038"><a href="#LinearExpression-1038"><span class="linenos">1038</span></a>        <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">scale</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span>
</span><span id="LinearExpression-1039"><a href="#LinearExpression-1039"><span class="linenos">1039</span></a>
</span><span id="LinearExpression-1040"><a href="#LinearExpression-1040"><span class="linenos">1040</span></a>    <span class="c1"># TODO(b/216492143): change __str__ to match C++ implementation in</span>
</span><span id="LinearExpression-1041"><a href="#LinearExpression-1041"><span class="linenos">1041</span></a>    <span class="c1"># cl/421649402.</span>
</span><span id="LinearExpression-1042"><a href="#LinearExpression-1042"><span class="linenos">1042</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearExpression-1043"><a href="#LinearExpression-1043"><span class="linenos">1043</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the name, or a string containing the id if the name is empty.&quot;&quot;&quot;</span>
</span><span id="LinearExpression-1044"><a href="#LinearExpression-1044"><span class="linenos">1044</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
</span><span id="LinearExpression-1045"><a href="#LinearExpression-1045"><span class="linenos">1045</span></a>        <span class="n">sorted_keys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
</span><span id="LinearExpression-1046"><a href="#LinearExpression-1046"><span class="linenos">1046</span></a>        <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">sorted_keys</span><span class="p">:</span>
</span><span id="LinearExpression-1047"><a href="#LinearExpression-1047"><span class="linenos">1047</span></a>            <span class="c1"># TODO(b/216492143): consider how to better deal with `NaN` and try to</span>
</span><span id="LinearExpression-1048"><a href="#LinearExpression-1048"><span class="linenos">1048</span></a>            <span class="c1"># match C++ implementation in cl/421649402. See TODO for StrAndReprTest in</span>
</span><span id="LinearExpression-1049"><a href="#LinearExpression-1049"><span class="linenos">1049</span></a>            <span class="c1"># linear_expression_test.py.</span>
</span><span id="LinearExpression-1050"><a href="#LinearExpression-1050"><span class="linenos">1050</span></a>            <span class="n">coefficient</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span>
</span><span id="LinearExpression-1051"><a href="#LinearExpression-1051"><span class="linenos">1051</span></a>            <span class="k">if</span> <span class="n">coefficient</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span id="LinearExpression-1052"><a href="#LinearExpression-1052"><span class="linenos">1052</span></a>                <span class="k">continue</span>
</span><span id="LinearExpression-1053"><a href="#LinearExpression-1053"><span class="linenos">1053</span></a>            <span class="k">if</span> <span class="n">coefficient</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="LinearExpression-1054"><a href="#LinearExpression-1054"><span class="linenos">1054</span></a>                <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot; + &quot;</span>
</span><span id="LinearExpression-1055"><a href="#LinearExpression-1055"><span class="linenos">1055</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="LinearExpression-1056"><a href="#LinearExpression-1056"><span class="linenos">1056</span></a>                <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot; - &quot;</span>
</span><span id="LinearExpression-1057"><a href="#LinearExpression-1057"><span class="linenos">1057</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">coefficient</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; * &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="LinearExpression-1058"><a href="#LinearExpression-1058"><span class="linenos">1058</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="LinearExpression-1059"><a href="#LinearExpression-1059"><span class="linenos">1059</span></a>
</span><span id="LinearExpression-1060"><a href="#LinearExpression-1060"><span class="linenos">1060</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearExpression-1061"><a href="#LinearExpression-1061"><span class="linenos">1061</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;LinearExpression(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="si">}</span><span class="s2">, &quot;</span> <span class="o">+</span> <span class="s2">&quot;{&quot;</span>
</span><span id="LinearExpression-1062"><a href="#LinearExpression-1062"><span class="linenos">1062</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="LinearExpression-1063"><a href="#LinearExpression-1063"><span class="linenos">1063</span></a>            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable</span><span class="si">!r}</span><span class="s2">: </span><span class="si">{</span><span class="n">coefficient</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="LinearExpression-1064"><a href="#LinearExpression-1064"><span class="linenos">1064</span></a>            <span class="k">for</span> <span class="n">variable</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="LinearExpression-1065"><a href="#LinearExpression-1065"><span class="linenos">1065</span></a>        <span class="p">)</span>
</span><span id="LinearExpression-1066"><a href="#LinearExpression-1066"><span class="linenos">1066</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;})&quot;</span>
</span><span id="LinearExpression-1067"><a href="#LinearExpression-1067"><span class="linenos">1067</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>For variables x, an expression: b + sum_{i in I} a_i * x_i.</p>

<p>This class is immutable.</p>
</div>


                            <div id="LinearExpression.__init__" class="classattr">
                                        <input id="LinearExpression.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">LinearExpression</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">other</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span></span>)</span>

                <label class="view-source-button" for="LinearExpression.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearExpression.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearExpression.__init__-982"><a href="#LinearExpression.__init__-982"><span class="linenos">982</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">LinearTypes</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearExpression.__init__-983"><a href="#LinearExpression.__init__-983"><span class="linenos">983</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="LinearExpression.__init__-984"><a href="#LinearExpression.__init__-984"><span class="linenos">984</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="LinearExpression.__init__-985"><a href="#LinearExpression.__init__-985"><span class="linenos">985</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="LinearExpression.__init__-986"><a href="#LinearExpression.__init__-986"><span class="linenos">986</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">()</span>
</span><span id="LinearExpression.__init__-987"><a href="#LinearExpression.__init__-987"><span class="linenos">987</span></a>            <span class="k">return</span>
</span><span id="LinearExpression.__init__-988"><a href="#LinearExpression.__init__-988"><span class="linenos">988</span></a>
</span><span id="LinearExpression.__init__-989"><a href="#LinearExpression.__init__-989"><span class="linenos">989</span></a>        <span class="n">to_process</span><span class="p">:</span> <span class="n">_LinearToProcessElements</span> <span class="o">=</span> <span class="n">_LinearToProcessElements</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span id="LinearExpression.__init__-990"><a href="#LinearExpression.__init__-990"><span class="linenos">990</span></a>        <span class="n">processed_elements</span> <span class="o">=</span> <span class="n">_ProcessedElements</span><span class="p">()</span>
</span><span id="LinearExpression.__init__-991"><a href="#LinearExpression.__init__-991"><span class="linenos">991</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>
</span><span id="LinearExpression.__init__-992"><a href="#LinearExpression.__init__-992"><span class="linenos">992</span></a>            <span class="n">linear</span><span class="p">,</span> <span class="n">coef</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="LinearExpression.__init__-993"><a href="#LinearExpression.__init__-993"><span class="linenos">993</span></a>            <span class="n">linear</span><span class="o">.</span><span class="n">_flatten_once_and_add_to</span><span class="p">(</span><span class="n">coef</span><span class="p">,</span> <span class="n">processed_elements</span><span class="p">,</span> <span class="n">to_process</span><span class="p">)</span>
</span><span id="LinearExpression.__init__-994"><a href="#LinearExpression.__init__-994"><span class="linenos">994</span></a>        <span class="c1"># TODO(b/216492143): explore avoiding this copy.</span>
</span><span id="LinearExpression.__init__-995"><a href="#LinearExpression.__init__-995"><span class="linenos">995</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">(</span>
</span><span id="LinearExpression.__init__-996"><a href="#LinearExpression.__init__-996"><span class="linenos">996</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span>
</span><span id="LinearExpression.__init__-997"><a href="#LinearExpression.__init__-997"><span class="linenos">997</span></a>        <span class="p">)</span>
</span><span id="LinearExpression.__init__-998"><a href="#LinearExpression.__init__-998"><span class="linenos">998</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span> <span class="o">=</span> <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearExpression.terms" class="classattr">
                                        <input id="LinearExpression.terms-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">terms</span><span class="annotation">: Mapping[<a href="#Variable">Variable</a>, float]</span>

                <label class="view-source-button" for="LinearExpression.terms-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearExpression.terms"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearExpression.terms-1000"><a href="#LinearExpression.terms-1000"><span class="linenos">1000</span></a>    <span class="nd">@property</span>
</span><span id="LinearExpression.terms-1001"><a href="#LinearExpression.terms-1001"><span class="linenos">1001</span></a>    <span class="k">def</span> <span class="nf">terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="LinearExpression.terms-1002"><a href="#LinearExpression.terms-1002"><span class="linenos">1002</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearExpression.offset" class="classattr">
                                        <input id="LinearExpression.offset-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">offset</span><span class="annotation">: float</span>

                <label class="view-source-button" for="LinearExpression.offset-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearExpression.offset"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearExpression.offset-1004"><a href="#LinearExpression.offset-1004"><span class="linenos">1004</span></a>    <span class="nd">@property</span>
</span><span id="LinearExpression.offset-1005"><a href="#LinearExpression.offset-1005"><span class="linenos">1005</span></a>    <span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LinearExpression.offset-1006"><a href="#LinearExpression.offset-1006"><span class="linenos">1006</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearExpression.evaluate" class="classattr">
                                        <input id="LinearExpression.evaluate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">evaluate</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">variable_values</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n"><a href="#Variable">Variable</a></span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">float</span>:</span></span>

                <label class="view-source-button" for="LinearExpression.evaluate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearExpression.evaluate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearExpression.evaluate-1008"><a href="#LinearExpression.evaluate-1008"><span class="linenos">1008</span></a>    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_values</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LinearExpression.evaluate-1009"><a href="#LinearExpression.evaluate-1009"><span class="linenos">1009</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the value of this expression for given variable values.</span>
</span><span id="LinearExpression.evaluate-1010"><a href="#LinearExpression.evaluate-1010"><span class="linenos">1010</span></a>
</span><span id="LinearExpression.evaluate-1011"><a href="#LinearExpression.evaluate-1011"><span class="linenos">1011</span></a><span class="sd">        E.g. if this is 3 * x + 4 and variable_values = {x: 2.0}, then</span>
</span><span id="LinearExpression.evaluate-1012"><a href="#LinearExpression.evaluate-1012"><span class="linenos">1012</span></a><span class="sd">        evaluate(variable_values) equals 10.0.</span>
</span><span id="LinearExpression.evaluate-1013"><a href="#LinearExpression.evaluate-1013"><span class="linenos">1013</span></a>
</span><span id="LinearExpression.evaluate-1014"><a href="#LinearExpression.evaluate-1014"><span class="linenos">1014</span></a><span class="sd">        See also mathopt.evaluate_expression(), which works on any type in</span>
</span><span id="LinearExpression.evaluate-1015"><a href="#LinearExpression.evaluate-1015"><span class="linenos">1015</span></a><span class="sd">        QuadraticTypes.</span>
</span><span id="LinearExpression.evaluate-1016"><a href="#LinearExpression.evaluate-1016"><span class="linenos">1016</span></a>
</span><span id="LinearExpression.evaluate-1017"><a href="#LinearExpression.evaluate-1017"><span class="linenos">1017</span></a><span class="sd">        Args:</span>
</span><span id="LinearExpression.evaluate-1018"><a href="#LinearExpression.evaluate-1018"><span class="linenos">1018</span></a><span class="sd">          variable_values: Must contain a value for every variable in expression.</span>
</span><span id="LinearExpression.evaluate-1019"><a href="#LinearExpression.evaluate-1019"><span class="linenos">1019</span></a>
</span><span id="LinearExpression.evaluate-1020"><a href="#LinearExpression.evaluate-1020"><span class="linenos">1020</span></a><span class="sd">        Returns:</span>
</span><span id="LinearExpression.evaluate-1021"><a href="#LinearExpression.evaluate-1021"><span class="linenos">1021</span></a><span class="sd">          The value of this expression when replacing variables by their value.</span>
</span><span id="LinearExpression.evaluate-1022"><a href="#LinearExpression.evaluate-1022"><span class="linenos">1022</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LinearExpression.evaluate-1023"><a href="#LinearExpression.evaluate-1023"><span class="linenos">1023</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span>
</span><span id="LinearExpression.evaluate-1024"><a href="#LinearExpression.evaluate-1024"><span class="linenos">1024</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coef</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span>
</span><span id="LinearExpression.evaluate-1025"><a href="#LinearExpression.evaluate-1025"><span class="linenos">1025</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_terms</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">var_coef_pair</span><span class="p">:</span> <span class="n">var_coef_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
</span><span id="LinearExpression.evaluate-1026"><a href="#LinearExpression.evaluate-1026"><span class="linenos">1026</span></a>        <span class="p">):</span>
</span><span id="LinearExpression.evaluate-1027"><a href="#LinearExpression.evaluate-1027"><span class="linenos">1027</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="n">coef</span> <span class="o">*</span> <span class="n">variable_values</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
</span><span id="LinearExpression.evaluate-1028"><a href="#LinearExpression.evaluate-1028"><span class="linenos">1028</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Returns the value of this expression for given variable values.</p>

<p>E.g. if this is 3 * x + 4 and variable_values = {x: 2.0}, then
evaluate(variable_values) equals 10.0.</p>

<p>See also mathopt.evaluate_expression(), which works on any type in
QuadraticTypes.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>variable_values:</strong>  Must contain a value for every variable in expression.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>The value of this expression when replacing variables by their value.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="QuadraticExpression">
                            <input id="QuadraticExpression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">QuadraticExpression</span><wbr>(<span class="base"><a href="#QuadraticBase">QuadraticBase</a></span>):

                <label class="view-source-button" for="QuadraticExpression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticExpression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticExpression-1070"><a href="#QuadraticExpression-1070"><span class="linenos">1070</span></a><span class="k">class</span> <span class="nc">QuadraticExpression</span><span class="p">(</span><span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="QuadraticExpression-1071"><a href="#QuadraticExpression-1071"><span class="linenos">1071</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;For variables x, an expression: b + sum_{i in I} a_i * x_i + sum_{i,j in I, i&lt;=j} a_i,j * x_i * x_j.</span>
</span><span id="QuadraticExpression-1072"><a href="#QuadraticExpression-1072"><span class="linenos">1072</span></a>
</span><span id="QuadraticExpression-1073"><a href="#QuadraticExpression-1073"><span class="linenos">1073</span></a><span class="sd">    This class is immutable.</span>
</span><span id="QuadraticExpression-1074"><a href="#QuadraticExpression-1074"><span class="linenos">1074</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="QuadraticExpression-1075"><a href="#QuadraticExpression-1075"><span class="linenos">1075</span></a>
</span><span id="QuadraticExpression-1076"><a href="#QuadraticExpression-1076"><span class="linenos">1076</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;__weakref__&quot;</span><span class="p">,</span> <span class="s2">&quot;_linear_terms&quot;</span><span class="p">,</span> <span class="s2">&quot;_quadratic_terms&quot;</span><span class="p">,</span> <span class="s2">&quot;_offset&quot;</span>
</span><span id="QuadraticExpression-1077"><a href="#QuadraticExpression-1077"><span class="linenos">1077</span></a>
</span><span id="QuadraticExpression-1078"><a href="#QuadraticExpression-1078"><span class="linenos">1078</span></a>    <span class="c1"># TODO(b/216492143): consider initializing from a dictionary.</span>
</span><span id="QuadraticExpression-1079"><a href="#QuadraticExpression-1079"><span class="linenos">1079</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="QuadraticExpression-1080"><a href="#QuadraticExpression-1080"><span class="linenos">1080</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="QuadraticExpression-1081"><a href="#QuadraticExpression-1081"><span class="linenos">1081</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="QuadraticExpression-1082"><a href="#QuadraticExpression-1082"><span class="linenos">1082</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="QuadraticExpression-1083"><a href="#QuadraticExpression-1083"><span class="linenos">1083</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">()</span>
</span><span id="QuadraticExpression-1084"><a href="#QuadraticExpression-1084"><span class="linenos">1084</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span>
</span><span id="QuadraticExpression-1085"><a href="#QuadraticExpression-1085"><span class="linenos">1085</span></a>                <span class="n">QuadraticTermKey</span><span class="p">,</span> <span class="nb">float</span>
</span><span id="QuadraticExpression-1086"><a href="#QuadraticExpression-1086"><span class="linenos">1086</span></a>            <span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">()</span>
</span><span id="QuadraticExpression-1087"><a href="#QuadraticExpression-1087"><span class="linenos">1087</span></a>            <span class="k">return</span>
</span><span id="QuadraticExpression-1088"><a href="#QuadraticExpression-1088"><span class="linenos">1088</span></a>
</span><span id="QuadraticExpression-1089"><a href="#QuadraticExpression-1089"><span class="linenos">1089</span></a>        <span class="n">to_process</span><span class="p">:</span> <span class="n">_QuadraticToProcessElements</span> <span class="o">=</span> <span class="n">_QuadraticToProcessElements</span><span class="p">(</span>
</span><span id="QuadraticExpression-1090"><a href="#QuadraticExpression-1090"><span class="linenos">1090</span></a>            <span class="n">other</span><span class="p">,</span> <span class="mf">1.0</span>
</span><span id="QuadraticExpression-1091"><a href="#QuadraticExpression-1091"><span class="linenos">1091</span></a>        <span class="p">)</span>
</span><span id="QuadraticExpression-1092"><a href="#QuadraticExpression-1092"><span class="linenos">1092</span></a>        <span class="n">processed_elements</span> <span class="o">=</span> <span class="n">_QuadraticProcessedElements</span><span class="p">()</span>
</span><span id="QuadraticExpression-1093"><a href="#QuadraticExpression-1093"><span class="linenos">1093</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>
</span><span id="QuadraticExpression-1094"><a href="#QuadraticExpression-1094"><span class="linenos">1094</span></a>            <span class="n">linear_or_quadratic</span><span class="p">,</span> <span class="n">coef</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="QuadraticExpression-1095"><a href="#QuadraticExpression-1095"><span class="linenos">1095</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">linear_or_quadratic</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="QuadraticExpression-1096"><a href="#QuadraticExpression-1096"><span class="linenos">1096</span></a>                <span class="n">linear_or_quadratic</span><span class="o">.</span><span class="n">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="QuadraticExpression-1097"><a href="#QuadraticExpression-1097"><span class="linenos">1097</span></a>                    <span class="n">coef</span><span class="p">,</span> <span class="n">processed_elements</span><span class="p">,</span> <span class="n">to_process</span>
</span><span id="QuadraticExpression-1098"><a href="#QuadraticExpression-1098"><span class="linenos">1098</span></a>                <span class="p">)</span>
</span><span id="QuadraticExpression-1099"><a href="#QuadraticExpression-1099"><span class="linenos">1099</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="QuadraticExpression-1100"><a href="#QuadraticExpression-1100"><span class="linenos">1100</span></a>                <span class="n">linear_or_quadratic</span><span class="o">.</span><span class="n">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="QuadraticExpression-1101"><a href="#QuadraticExpression-1101"><span class="linenos">1101</span></a>                    <span class="n">coef</span><span class="p">,</span> <span class="n">processed_elements</span><span class="p">,</span> <span class="n">to_process</span>
</span><span id="QuadraticExpression-1102"><a href="#QuadraticExpression-1102"><span class="linenos">1102</span></a>                <span class="p">)</span>
</span><span id="QuadraticExpression-1103"><a href="#QuadraticExpression-1103"><span class="linenos">1103</span></a>        <span class="c1"># TODO(b/216492143): explore avoiding this copy.</span>
</span><span id="QuadraticExpression-1104"><a href="#QuadraticExpression-1104"><span class="linenos">1104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">(</span>
</span><span id="QuadraticExpression-1105"><a href="#QuadraticExpression-1105"><span class="linenos">1105</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span>
</span><span id="QuadraticExpression-1106"><a href="#QuadraticExpression-1106"><span class="linenos">1106</span></a>        <span class="p">)</span>
</span><span id="QuadraticExpression-1107"><a href="#QuadraticExpression-1107"><span class="linenos">1107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span>
</span><span id="QuadraticExpression-1108"><a href="#QuadraticExpression-1108"><span class="linenos">1108</span></a>            <span class="n">QuadraticTermKey</span><span class="p">,</span> <span class="nb">float</span>
</span><span id="QuadraticExpression-1109"><a href="#QuadraticExpression-1109"><span class="linenos">1109</span></a>        <span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">(</span><span class="n">processed_elements</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">)</span>
</span><span id="QuadraticExpression-1110"><a href="#QuadraticExpression-1110"><span class="linenos">1110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span> <span class="o">=</span> <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span>
</span><span id="QuadraticExpression-1111"><a href="#QuadraticExpression-1111"><span class="linenos">1111</span></a>
</span><span id="QuadraticExpression-1112"><a href="#QuadraticExpression-1112"><span class="linenos">1112</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticExpression-1113"><a href="#QuadraticExpression-1113"><span class="linenos">1113</span></a>    <span class="k">def</span> <span class="nf">linear_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="QuadraticExpression-1114"><a href="#QuadraticExpression-1114"><span class="linenos">1114</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span>
</span><span id="QuadraticExpression-1115"><a href="#QuadraticExpression-1115"><span class="linenos">1115</span></a>
</span><span id="QuadraticExpression-1116"><a href="#QuadraticExpression-1116"><span class="linenos">1116</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticExpression-1117"><a href="#QuadraticExpression-1117"><span class="linenos">1117</span></a>    <span class="k">def</span> <span class="nf">quadratic_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">QuadraticTermKey</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="QuadraticExpression-1118"><a href="#QuadraticExpression-1118"><span class="linenos">1118</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span>
</span><span id="QuadraticExpression-1119"><a href="#QuadraticExpression-1119"><span class="linenos">1119</span></a>
</span><span id="QuadraticExpression-1120"><a href="#QuadraticExpression-1120"><span class="linenos">1120</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticExpression-1121"><a href="#QuadraticExpression-1121"><span class="linenos">1121</span></a>    <span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="QuadraticExpression-1122"><a href="#QuadraticExpression-1122"><span class="linenos">1122</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span>
</span><span id="QuadraticExpression-1123"><a href="#QuadraticExpression-1123"><span class="linenos">1123</span></a>
</span><span id="QuadraticExpression-1124"><a href="#QuadraticExpression-1124"><span class="linenos">1124</span></a>    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_values</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="QuadraticExpression-1125"><a href="#QuadraticExpression-1125"><span class="linenos">1125</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the value of this expression for given variable values.</span>
</span><span id="QuadraticExpression-1126"><a href="#QuadraticExpression-1126"><span class="linenos">1126</span></a>
</span><span id="QuadraticExpression-1127"><a href="#QuadraticExpression-1127"><span class="linenos">1127</span></a><span class="sd">        E.g. if this is 3 * x * x + 4 and variable_values = {x: 2.0}, then</span>
</span><span id="QuadraticExpression-1128"><a href="#QuadraticExpression-1128"><span class="linenos">1128</span></a><span class="sd">        evaluate(variable_values) equals 16.0.</span>
</span><span id="QuadraticExpression-1129"><a href="#QuadraticExpression-1129"><span class="linenos">1129</span></a>
</span><span id="QuadraticExpression-1130"><a href="#QuadraticExpression-1130"><span class="linenos">1130</span></a><span class="sd">        See also mathopt.evaluate_expression(), which works on any type in</span>
</span><span id="QuadraticExpression-1131"><a href="#QuadraticExpression-1131"><span class="linenos">1131</span></a><span class="sd">        QuadraticTypes.</span>
</span><span id="QuadraticExpression-1132"><a href="#QuadraticExpression-1132"><span class="linenos">1132</span></a>
</span><span id="QuadraticExpression-1133"><a href="#QuadraticExpression-1133"><span class="linenos">1133</span></a><span class="sd">        Args:</span>
</span><span id="QuadraticExpression-1134"><a href="#QuadraticExpression-1134"><span class="linenos">1134</span></a><span class="sd">          variable_values: Must contain a value for every variable in expression.</span>
</span><span id="QuadraticExpression-1135"><a href="#QuadraticExpression-1135"><span class="linenos">1135</span></a>
</span><span id="QuadraticExpression-1136"><a href="#QuadraticExpression-1136"><span class="linenos">1136</span></a><span class="sd">        Returns:</span>
</span><span id="QuadraticExpression-1137"><a href="#QuadraticExpression-1137"><span class="linenos">1137</span></a><span class="sd">          The value of this expression when replacing variables by their value.</span>
</span><span id="QuadraticExpression-1138"><a href="#QuadraticExpression-1138"><span class="linenos">1138</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="QuadraticExpression-1139"><a href="#QuadraticExpression-1139"><span class="linenos">1139</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span>
</span><span id="QuadraticExpression-1140"><a href="#QuadraticExpression-1140"><span class="linenos">1140</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coef</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span>
</span><span id="QuadraticExpression-1141"><a href="#QuadraticExpression-1141"><span class="linenos">1141</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
</span><span id="QuadraticExpression-1142"><a href="#QuadraticExpression-1142"><span class="linenos">1142</span></a>            <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">var_coef_pair</span><span class="p">:</span> <span class="n">var_coef_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="QuadraticExpression-1143"><a href="#QuadraticExpression-1143"><span class="linenos">1143</span></a>        <span class="p">):</span>
</span><span id="QuadraticExpression-1144"><a href="#QuadraticExpression-1144"><span class="linenos">1144</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="n">coef</span> <span class="o">*</span> <span class="n">variable_values</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
</span><span id="QuadraticExpression-1145"><a href="#QuadraticExpression-1145"><span class="linenos">1145</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">coef</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span>
</span><span id="QuadraticExpression-1146"><a href="#QuadraticExpression-1146"><span class="linenos">1146</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
</span><span id="QuadraticExpression-1147"><a href="#QuadraticExpression-1147"><span class="linenos">1147</span></a>            <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">quad_coef_pair</span><span class="p">:</span> <span class="p">(</span>
</span><span id="QuadraticExpression-1148"><a href="#QuadraticExpression-1148"><span class="linenos">1148</span></a>                <span class="n">quad_coef_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">first_var</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="QuadraticExpression-1149"><a href="#QuadraticExpression-1149"><span class="linenos">1149</span></a>                <span class="n">quad_coef_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">second_var</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="QuadraticExpression-1150"><a href="#QuadraticExpression-1150"><span class="linenos">1150</span></a>            <span class="p">),</span>
</span><span id="QuadraticExpression-1151"><a href="#QuadraticExpression-1151"><span class="linenos">1151</span></a>        <span class="p">):</span>
</span><span id="QuadraticExpression-1152"><a href="#QuadraticExpression-1152"><span class="linenos">1152</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="QuadraticExpression-1153"><a href="#QuadraticExpression-1153"><span class="linenos">1153</span></a>                <span class="n">coef</span> <span class="o">*</span> <span class="n">variable_values</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">first_var</span><span class="p">]</span> <span class="o">*</span> <span class="n">variable_values</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">second_var</span><span class="p">]</span>
</span><span id="QuadraticExpression-1154"><a href="#QuadraticExpression-1154"><span class="linenos">1154</span></a>            <span class="p">)</span>
</span><span id="QuadraticExpression-1155"><a href="#QuadraticExpression-1155"><span class="linenos">1155</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="QuadraticExpression-1156"><a href="#QuadraticExpression-1156"><span class="linenos">1156</span></a>
</span><span id="QuadraticExpression-1157"><a href="#QuadraticExpression-1157"><span class="linenos">1157</span></a>    <span class="k">def</span> <span class="nf">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="QuadraticExpression-1158"><a href="#QuadraticExpression-1158"><span class="linenos">1158</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="QuadraticExpression-1159"><a href="#QuadraticExpression-1159"><span class="linenos">1159</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="QuadraticExpression-1160"><a href="#QuadraticExpression-1160"><span class="linenos">1160</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_QuadraticProcessedElements</span><span class="p">,</span>
</span><span id="QuadraticExpression-1161"><a href="#QuadraticExpression-1161"><span class="linenos">1161</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_QuadraticToProcessElements</span><span class="p">,</span>
</span><span id="QuadraticExpression-1162"><a href="#QuadraticExpression-1162"><span class="linenos">1162</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="QuadraticExpression-1163"><a href="#QuadraticExpression-1163"><span class="linenos">1163</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="QuadraticExpression-1164"><a href="#QuadraticExpression-1164"><span class="linenos">1164</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">+=</span> <span class="n">val</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="QuadraticExpression-1165"><a href="#QuadraticExpression-1165"><span class="linenos">1165</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="QuadraticExpression-1166"><a href="#QuadraticExpression-1166"><span class="linenos">1166</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="n">val</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="QuadraticExpression-1167"><a href="#QuadraticExpression-1167"><span class="linenos">1167</span></a>        <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">scale</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">offset</span>
</span><span id="QuadraticExpression-1168"><a href="#QuadraticExpression-1168"><span class="linenos">1168</span></a>
</span><span id="QuadraticExpression-1169"><a href="#QuadraticExpression-1169"><span class="linenos">1169</span></a>    <span class="c1"># TODO(b/216492143): change __str__ to match C++ implementation in</span>
</span><span id="QuadraticExpression-1170"><a href="#QuadraticExpression-1170"><span class="linenos">1170</span></a>    <span class="c1"># cl/421649402.</span>
</span><span id="QuadraticExpression-1171"><a href="#QuadraticExpression-1171"><span class="linenos">1171</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="QuadraticExpression-1172"><a href="#QuadraticExpression-1172"><span class="linenos">1172</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
</span><span id="QuadraticExpression-1173"><a href="#QuadraticExpression-1173"><span class="linenos">1173</span></a>        <span class="n">sorted_linear_keys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
</span><span id="QuadraticExpression-1174"><a href="#QuadraticExpression-1174"><span class="linenos">1174</span></a>        <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">sorted_linear_keys</span><span class="p">:</span>
</span><span id="QuadraticExpression-1175"><a href="#QuadraticExpression-1175"><span class="linenos">1175</span></a>            <span class="c1"># TODO(b/216492143): consider how to better deal with `NaN` and try to</span>
</span><span id="QuadraticExpression-1176"><a href="#QuadraticExpression-1176"><span class="linenos">1176</span></a>            <span class="c1"># match C++ implementation in cl/421649402. See TODO for StrAndReprTest in</span>
</span><span id="QuadraticExpression-1177"><a href="#QuadraticExpression-1177"><span class="linenos">1177</span></a>            <span class="c1"># linear_expression_test.py.</span>
</span><span id="QuadraticExpression-1178"><a href="#QuadraticExpression-1178"><span class="linenos">1178</span></a>            <span class="n">coefficient</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="p">[</span><span class="n">variable</span><span class="p">]</span>
</span><span id="QuadraticExpression-1179"><a href="#QuadraticExpression-1179"><span class="linenos">1179</span></a>            <span class="k">if</span> <span class="n">coefficient</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span id="QuadraticExpression-1180"><a href="#QuadraticExpression-1180"><span class="linenos">1180</span></a>                <span class="k">continue</span>
</span><span id="QuadraticExpression-1181"><a href="#QuadraticExpression-1181"><span class="linenos">1181</span></a>            <span class="k">if</span> <span class="n">coefficient</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="QuadraticExpression-1182"><a href="#QuadraticExpression-1182"><span class="linenos">1182</span></a>                <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot; + &quot;</span>
</span><span id="QuadraticExpression-1183"><a href="#QuadraticExpression-1183"><span class="linenos">1183</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="QuadraticExpression-1184"><a href="#QuadraticExpression-1184"><span class="linenos">1184</span></a>                <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot; - &quot;</span>
</span><span id="QuadraticExpression-1185"><a href="#QuadraticExpression-1185"><span class="linenos">1185</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">coefficient</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; * &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="QuadraticExpression-1186"><a href="#QuadraticExpression-1186"><span class="linenos">1186</span></a>        <span class="n">sorted_quadratic_keys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
</span><span id="QuadraticExpression-1187"><a href="#QuadraticExpression-1187"><span class="linenos">1187</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">sorted_quadratic_keys</span><span class="p">:</span>
</span><span id="QuadraticExpression-1188"><a href="#QuadraticExpression-1188"><span class="linenos">1188</span></a>            <span class="c1"># TODO(b/216492143): consider how to better deal with `NaN` and try to</span>
</span><span id="QuadraticExpression-1189"><a href="#QuadraticExpression-1189"><span class="linenos">1189</span></a>            <span class="c1"># match C++ implementation in cl/421649402. See TODO for StrAndReprTest in</span>
</span><span id="QuadraticExpression-1190"><a href="#QuadraticExpression-1190"><span class="linenos">1190</span></a>            <span class="c1"># linear_expression_test.py.</span>
</span><span id="QuadraticExpression-1191"><a href="#QuadraticExpression-1191"><span class="linenos">1191</span></a>            <span class="n">coefficient</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</span><span id="QuadraticExpression-1192"><a href="#QuadraticExpression-1192"><span class="linenos">1192</span></a>            <span class="k">if</span> <span class="n">coefficient</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
</span><span id="QuadraticExpression-1193"><a href="#QuadraticExpression-1193"><span class="linenos">1193</span></a>                <span class="k">continue</span>
</span><span id="QuadraticExpression-1194"><a href="#QuadraticExpression-1194"><span class="linenos">1194</span></a>            <span class="k">if</span> <span class="n">coefficient</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="QuadraticExpression-1195"><a href="#QuadraticExpression-1195"><span class="linenos">1195</span></a>                <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot; + &quot;</span>
</span><span id="QuadraticExpression-1196"><a href="#QuadraticExpression-1196"><span class="linenos">1196</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="QuadraticExpression-1197"><a href="#QuadraticExpression-1197"><span class="linenos">1197</span></a>                <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot; - &quot;</span>
</span><span id="QuadraticExpression-1198"><a href="#QuadraticExpression-1198"><span class="linenos">1198</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">coefficient</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; * &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span><span id="QuadraticExpression-1199"><a href="#QuadraticExpression-1199"><span class="linenos">1199</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="QuadraticExpression-1200"><a href="#QuadraticExpression-1200"><span class="linenos">1200</span></a>
</span><span id="QuadraticExpression-1201"><a href="#QuadraticExpression-1201"><span class="linenos">1201</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="QuadraticExpression-1202"><a href="#QuadraticExpression-1202"><span class="linenos">1202</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;QuadraticExpression(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span><span class="si">}</span><span class="s2">, &quot;</span> <span class="o">+</span> <span class="s2">&quot;{&quot;</span>
</span><span id="QuadraticExpression-1203"><a href="#QuadraticExpression-1203"><span class="linenos">1203</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="QuadraticExpression-1204"><a href="#QuadraticExpression-1204"><span class="linenos">1204</span></a>            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">variable</span><span class="si">!r}</span><span class="s2">: </span><span class="si">{</span><span class="n">coefficient</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="QuadraticExpression-1205"><a href="#QuadraticExpression-1205"><span class="linenos">1205</span></a>            <span class="k">for</span> <span class="n">variable</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="QuadraticExpression-1206"><a href="#QuadraticExpression-1206"><span class="linenos">1206</span></a>        <span class="p">)</span>
</span><span id="QuadraticExpression-1207"><a href="#QuadraticExpression-1207"><span class="linenos">1207</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;}, {&quot;</span>
</span><span id="QuadraticExpression-1208"><a href="#QuadraticExpression-1208"><span class="linenos">1208</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="QuadraticExpression-1209"><a href="#QuadraticExpression-1209"><span class="linenos">1209</span></a>            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">!r}</span><span class="s2">: </span><span class="si">{</span><span class="n">coefficient</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="QuadraticExpression-1210"><a href="#QuadraticExpression-1210"><span class="linenos">1210</span></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</span><span id="QuadraticExpression-1211"><a href="#QuadraticExpression-1211"><span class="linenos">1211</span></a>        <span class="p">)</span>
</span><span id="QuadraticExpression-1212"><a href="#QuadraticExpression-1212"><span class="linenos">1212</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;})&quot;</span>
</span><span id="QuadraticExpression-1213"><a href="#QuadraticExpression-1213"><span class="linenos">1213</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>For variables x, an expression: b + sum_{i in I} a_i * x_i + sum_{i,j in I, i&lt;=j} a_i,j * x_i * x_j.</p>

<p>This class is immutable.</p>
</div>


                            <div id="QuadraticExpression.__init__" class="classattr">
                                        <input id="QuadraticExpression.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">QuadraticExpression</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">other</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">,</span> <span class="n"><a href="#QuadraticBase">QuadraticBase</a></span><span class="p">]</span></span>)</span>

                <label class="view-source-button" for="QuadraticExpression.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticExpression.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticExpression.__init__-1079"><a href="#QuadraticExpression.__init__-1079"><span class="linenos">1079</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="QuadraticExpression.__init__-1080"><a href="#QuadraticExpression.__init__-1080"><span class="linenos">1080</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="QuadraticExpression.__init__-1081"><a href="#QuadraticExpression.__init__-1081"><span class="linenos">1081</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="QuadraticExpression.__init__-1082"><a href="#QuadraticExpression.__init__-1082"><span class="linenos">1082</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span id="QuadraticExpression.__init__-1083"><a href="#QuadraticExpression.__init__-1083"><span class="linenos">1083</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">()</span>
</span><span id="QuadraticExpression.__init__-1084"><a href="#QuadraticExpression.__init__-1084"><span class="linenos">1084</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span>
</span><span id="QuadraticExpression.__init__-1085"><a href="#QuadraticExpression.__init__-1085"><span class="linenos">1085</span></a>                <span class="n">QuadraticTermKey</span><span class="p">,</span> <span class="nb">float</span>
</span><span id="QuadraticExpression.__init__-1086"><a href="#QuadraticExpression.__init__-1086"><span class="linenos">1086</span></a>            <span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">()</span>
</span><span id="QuadraticExpression.__init__-1087"><a href="#QuadraticExpression.__init__-1087"><span class="linenos">1087</span></a>            <span class="k">return</span>
</span><span id="QuadraticExpression.__init__-1088"><a href="#QuadraticExpression.__init__-1088"><span class="linenos">1088</span></a>
</span><span id="QuadraticExpression.__init__-1089"><a href="#QuadraticExpression.__init__-1089"><span class="linenos">1089</span></a>        <span class="n">to_process</span><span class="p">:</span> <span class="n">_QuadraticToProcessElements</span> <span class="o">=</span> <span class="n">_QuadraticToProcessElements</span><span class="p">(</span>
</span><span id="QuadraticExpression.__init__-1090"><a href="#QuadraticExpression.__init__-1090"><span class="linenos">1090</span></a>            <span class="n">other</span><span class="p">,</span> <span class="mf">1.0</span>
</span><span id="QuadraticExpression.__init__-1091"><a href="#QuadraticExpression.__init__-1091"><span class="linenos">1091</span></a>        <span class="p">)</span>
</span><span id="QuadraticExpression.__init__-1092"><a href="#QuadraticExpression.__init__-1092"><span class="linenos">1092</span></a>        <span class="n">processed_elements</span> <span class="o">=</span> <span class="n">_QuadraticProcessedElements</span><span class="p">()</span>
</span><span id="QuadraticExpression.__init__-1093"><a href="#QuadraticExpression.__init__-1093"><span class="linenos">1093</span></a>        <span class="k">while</span> <span class="n">to_process</span><span class="p">:</span>
</span><span id="QuadraticExpression.__init__-1094"><a href="#QuadraticExpression.__init__-1094"><span class="linenos">1094</span></a>            <span class="n">linear_or_quadratic</span><span class="p">,</span> <span class="n">coef</span> <span class="o">=</span> <span class="n">to_process</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</span><span id="QuadraticExpression.__init__-1095"><a href="#QuadraticExpression.__init__-1095"><span class="linenos">1095</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">linear_or_quadratic</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="QuadraticExpression.__init__-1096"><a href="#QuadraticExpression.__init__-1096"><span class="linenos">1096</span></a>                <span class="n">linear_or_quadratic</span><span class="o">.</span><span class="n">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="QuadraticExpression.__init__-1097"><a href="#QuadraticExpression.__init__-1097"><span class="linenos">1097</span></a>                    <span class="n">coef</span><span class="p">,</span> <span class="n">processed_elements</span><span class="p">,</span> <span class="n">to_process</span>
</span><span id="QuadraticExpression.__init__-1098"><a href="#QuadraticExpression.__init__-1098"><span class="linenos">1098</span></a>                <span class="p">)</span>
</span><span id="QuadraticExpression.__init__-1099"><a href="#QuadraticExpression.__init__-1099"><span class="linenos">1099</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="QuadraticExpression.__init__-1100"><a href="#QuadraticExpression.__init__-1100"><span class="linenos">1100</span></a>                <span class="n">linear_or_quadratic</span><span class="o">.</span><span class="n">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="QuadraticExpression.__init__-1101"><a href="#QuadraticExpression.__init__-1101"><span class="linenos">1101</span></a>                    <span class="n">coef</span><span class="p">,</span> <span class="n">processed_elements</span><span class="p">,</span> <span class="n">to_process</span>
</span><span id="QuadraticExpression.__init__-1102"><a href="#QuadraticExpression.__init__-1102"><span class="linenos">1102</span></a>                <span class="p">)</span>
</span><span id="QuadraticExpression.__init__-1103"><a href="#QuadraticExpression.__init__-1103"><span class="linenos">1103</span></a>        <span class="c1"># TODO(b/216492143): explore avoiding this copy.</span>
</span><span id="QuadraticExpression.__init__-1104"><a href="#QuadraticExpression.__init__-1104"><span class="linenos">1104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">(</span>
</span><span id="QuadraticExpression.__init__-1105"><a href="#QuadraticExpression.__init__-1105"><span class="linenos">1105</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span>
</span><span id="QuadraticExpression.__init__-1106"><a href="#QuadraticExpression.__init__-1106"><span class="linenos">1106</span></a>        <span class="p">)</span>
</span><span id="QuadraticExpression.__init__-1107"><a href="#QuadraticExpression.__init__-1107"><span class="linenos">1107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span>
</span><span id="QuadraticExpression.__init__-1108"><a href="#QuadraticExpression.__init__-1108"><span class="linenos">1108</span></a>            <span class="n">QuadraticTermKey</span><span class="p">,</span> <span class="nb">float</span>
</span><span id="QuadraticExpression.__init__-1109"><a href="#QuadraticExpression.__init__-1109"><span class="linenos">1109</span></a>        <span class="p">]</span> <span class="o">=</span> <span class="n">immutabledict</span><span class="o">.</span><span class="n">immutabledict</span><span class="p">(</span><span class="n">processed_elements</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">)</span>
</span><span id="QuadraticExpression.__init__-1110"><a href="#QuadraticExpression.__init__-1110"><span class="linenos">1110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span> <span class="o">=</span> <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span>
</span></pre></div>


    

                            </div>
                            <div id="QuadraticExpression.linear_terms" class="classattr">
                                        <input id="QuadraticExpression.linear_terms-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">linear_terms</span><span class="annotation">: Mapping[<a href="#Variable">Variable</a>, float]</span>

                <label class="view-source-button" for="QuadraticExpression.linear_terms-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticExpression.linear_terms"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticExpression.linear_terms-1112"><a href="#QuadraticExpression.linear_terms-1112"><span class="linenos">1112</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticExpression.linear_terms-1113"><a href="#QuadraticExpression.linear_terms-1113"><span class="linenos">1113</span></a>    <span class="k">def</span> <span class="nf">linear_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="QuadraticExpression.linear_terms-1114"><a href="#QuadraticExpression.linear_terms-1114"><span class="linenos">1114</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span>
</span></pre></div>


    

                            </div>
                            <div id="QuadraticExpression.quadratic_terms" class="classattr">
                                        <input id="QuadraticExpression.quadratic_terms-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">quadratic_terms</span><span class="annotation">: Mapping[<a href="#QuadraticTermKey">QuadraticTermKey</a>, float]</span>

                <label class="view-source-button" for="QuadraticExpression.quadratic_terms-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticExpression.quadratic_terms"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticExpression.quadratic_terms-1116"><a href="#QuadraticExpression.quadratic_terms-1116"><span class="linenos">1116</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticExpression.quadratic_terms-1117"><a href="#QuadraticExpression.quadratic_terms-1117"><span class="linenos">1117</span></a>    <span class="k">def</span> <span class="nf">quadratic_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">QuadraticTermKey</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
</span><span id="QuadraticExpression.quadratic_terms-1118"><a href="#QuadraticExpression.quadratic_terms-1118"><span class="linenos">1118</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span>
</span></pre></div>


    

                            </div>
                            <div id="QuadraticExpression.offset" class="classattr">
                                        <input id="QuadraticExpression.offset-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">offset</span><span class="annotation">: float</span>

                <label class="view-source-button" for="QuadraticExpression.offset-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticExpression.offset"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticExpression.offset-1120"><a href="#QuadraticExpression.offset-1120"><span class="linenos">1120</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticExpression.offset-1121"><a href="#QuadraticExpression.offset-1121"><span class="linenos">1121</span></a>    <span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="QuadraticExpression.offset-1122"><a href="#QuadraticExpression.offset-1122"><span class="linenos">1122</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span>
</span></pre></div>


    

                            </div>
                            <div id="QuadraticExpression.evaluate" class="classattr">
                                        <input id="QuadraticExpression.evaluate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">evaluate</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">variable_values</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n"><a href="#Variable">Variable</a></span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">float</span>:</span></span>

                <label class="view-source-button" for="QuadraticExpression.evaluate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticExpression.evaluate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticExpression.evaluate-1124"><a href="#QuadraticExpression.evaluate-1124"><span class="linenos">1124</span></a>    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_values</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="QuadraticExpression.evaluate-1125"><a href="#QuadraticExpression.evaluate-1125"><span class="linenos">1125</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the value of this expression for given variable values.</span>
</span><span id="QuadraticExpression.evaluate-1126"><a href="#QuadraticExpression.evaluate-1126"><span class="linenos">1126</span></a>
</span><span id="QuadraticExpression.evaluate-1127"><a href="#QuadraticExpression.evaluate-1127"><span class="linenos">1127</span></a><span class="sd">        E.g. if this is 3 * x * x + 4 and variable_values = {x: 2.0}, then</span>
</span><span id="QuadraticExpression.evaluate-1128"><a href="#QuadraticExpression.evaluate-1128"><span class="linenos">1128</span></a><span class="sd">        evaluate(variable_values) equals 16.0.</span>
</span><span id="QuadraticExpression.evaluate-1129"><a href="#QuadraticExpression.evaluate-1129"><span class="linenos">1129</span></a>
</span><span id="QuadraticExpression.evaluate-1130"><a href="#QuadraticExpression.evaluate-1130"><span class="linenos">1130</span></a><span class="sd">        See also mathopt.evaluate_expression(), which works on any type in</span>
</span><span id="QuadraticExpression.evaluate-1131"><a href="#QuadraticExpression.evaluate-1131"><span class="linenos">1131</span></a><span class="sd">        QuadraticTypes.</span>
</span><span id="QuadraticExpression.evaluate-1132"><a href="#QuadraticExpression.evaluate-1132"><span class="linenos">1132</span></a>
</span><span id="QuadraticExpression.evaluate-1133"><a href="#QuadraticExpression.evaluate-1133"><span class="linenos">1133</span></a><span class="sd">        Args:</span>
</span><span id="QuadraticExpression.evaluate-1134"><a href="#QuadraticExpression.evaluate-1134"><span class="linenos">1134</span></a><span class="sd">          variable_values: Must contain a value for every variable in expression.</span>
</span><span id="QuadraticExpression.evaluate-1135"><a href="#QuadraticExpression.evaluate-1135"><span class="linenos">1135</span></a>
</span><span id="QuadraticExpression.evaluate-1136"><a href="#QuadraticExpression.evaluate-1136"><span class="linenos">1136</span></a><span class="sd">        Returns:</span>
</span><span id="QuadraticExpression.evaluate-1137"><a href="#QuadraticExpression.evaluate-1137"><span class="linenos">1137</span></a><span class="sd">          The value of this expression when replacing variables by their value.</span>
</span><span id="QuadraticExpression.evaluate-1138"><a href="#QuadraticExpression.evaluate-1138"><span class="linenos">1138</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="QuadraticExpression.evaluate-1139"><a href="#QuadraticExpression.evaluate-1139"><span class="linenos">1139</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_offset</span>
</span><span id="QuadraticExpression.evaluate-1140"><a href="#QuadraticExpression.evaluate-1140"><span class="linenos">1140</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coef</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span>
</span><span id="QuadraticExpression.evaluate-1141"><a href="#QuadraticExpression.evaluate-1141"><span class="linenos">1141</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_linear_terms</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
</span><span id="QuadraticExpression.evaluate-1142"><a href="#QuadraticExpression.evaluate-1142"><span class="linenos">1142</span></a>            <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">var_coef_pair</span><span class="p">:</span> <span class="n">var_coef_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="QuadraticExpression.evaluate-1143"><a href="#QuadraticExpression.evaluate-1143"><span class="linenos">1143</span></a>        <span class="p">):</span>
</span><span id="QuadraticExpression.evaluate-1144"><a href="#QuadraticExpression.evaluate-1144"><span class="linenos">1144</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="n">coef</span> <span class="o">*</span> <span class="n">variable_values</span><span class="p">[</span><span class="n">var</span><span class="p">]</span>
</span><span id="QuadraticExpression.evaluate-1145"><a href="#QuadraticExpression.evaluate-1145"><span class="linenos">1145</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">coef</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span>
</span><span id="QuadraticExpression.evaluate-1146"><a href="#QuadraticExpression.evaluate-1146"><span class="linenos">1146</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic_terms</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span>
</span><span id="QuadraticExpression.evaluate-1147"><a href="#QuadraticExpression.evaluate-1147"><span class="linenos">1147</span></a>            <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">quad_coef_pair</span><span class="p">:</span> <span class="p">(</span>
</span><span id="QuadraticExpression.evaluate-1148"><a href="#QuadraticExpression.evaluate-1148"><span class="linenos">1148</span></a>                <span class="n">quad_coef_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">first_var</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="QuadraticExpression.evaluate-1149"><a href="#QuadraticExpression.evaluate-1149"><span class="linenos">1149</span></a>                <span class="n">quad_coef_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">second_var</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
</span><span id="QuadraticExpression.evaluate-1150"><a href="#QuadraticExpression.evaluate-1150"><span class="linenos">1150</span></a>            <span class="p">),</span>
</span><span id="QuadraticExpression.evaluate-1151"><a href="#QuadraticExpression.evaluate-1151"><span class="linenos">1151</span></a>        <span class="p">):</span>
</span><span id="QuadraticExpression.evaluate-1152"><a href="#QuadraticExpression.evaluate-1152"><span class="linenos">1152</span></a>            <span class="n">result</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="QuadraticExpression.evaluate-1153"><a href="#QuadraticExpression.evaluate-1153"><span class="linenos">1153</span></a>                <span class="n">coef</span> <span class="o">*</span> <span class="n">variable_values</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">first_var</span><span class="p">]</span> <span class="o">*</span> <span class="n">variable_values</span><span class="p">[</span><span class="n">key</span><span class="o">.</span><span class="n">second_var</span><span class="p">]</span>
</span><span id="QuadraticExpression.evaluate-1154"><a href="#QuadraticExpression.evaluate-1154"><span class="linenos">1154</span></a>            <span class="p">)</span>
</span><span id="QuadraticExpression.evaluate-1155"><a href="#QuadraticExpression.evaluate-1155"><span class="linenos">1155</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Returns the value of this expression for given variable values.</p>

<p>E.g. if this is 3 * x * x + 4 and variable_values = {x: 2.0}, then
evaluate(variable_values) equals 16.0.</p>

<p>See also mathopt.evaluate_expression(), which works on any type in
QuadraticTypes.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>variable_values:</strong>  Must contain a value for every variable in expression.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>The value of this expression when replacing variables by their value.</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="LinearConstraint">
                            <input id="LinearConstraint-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LinearConstraint</span>:

                <label class="view-source-button" for="LinearConstraint-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearConstraint"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearConstraint-1216"><a href="#LinearConstraint-1216"><span class="linenos">1216</span></a><span class="k">class</span> <span class="nc">LinearConstraint</span><span class="p">:</span>
</span><span id="LinearConstraint-1217"><a href="#LinearConstraint-1217"><span class="linenos">1217</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A linear constraint for an optimization model.</span>
</span><span id="LinearConstraint-1218"><a href="#LinearConstraint-1218"><span class="linenos">1218</span></a>
</span><span id="LinearConstraint-1219"><a href="#LinearConstraint-1219"><span class="linenos">1219</span></a><span class="sd">    A LinearConstraint adds the following restriction on feasible solutions to an</span>
</span><span id="LinearConstraint-1220"><a href="#LinearConstraint-1220"><span class="linenos">1220</span></a><span class="sd">    optimization model:</span>
</span><span id="LinearConstraint-1221"><a href="#LinearConstraint-1221"><span class="linenos">1221</span></a><span class="sd">      lb &lt;= sum_{i in I} a_i * x_i &lt;= ub</span>
</span><span id="LinearConstraint-1222"><a href="#LinearConstraint-1222"><span class="linenos">1222</span></a><span class="sd">    where x_i are the decision variables of the problem. lb == ub is allowed, this</span>
</span><span id="LinearConstraint-1223"><a href="#LinearConstraint-1223"><span class="linenos">1223</span></a><span class="sd">    models the equality constraint:</span>
</span><span id="LinearConstraint-1224"><a href="#LinearConstraint-1224"><span class="linenos">1224</span></a><span class="sd">      sum_{i in I} a_i * x_i == b</span>
</span><span id="LinearConstraint-1225"><a href="#LinearConstraint-1225"><span class="linenos">1225</span></a><span class="sd">    lb &gt; ub is also allowed, but the optimization problem will be infeasible.</span>
</span><span id="LinearConstraint-1226"><a href="#LinearConstraint-1226"><span class="linenos">1226</span></a>
</span><span id="LinearConstraint-1227"><a href="#LinearConstraint-1227"><span class="linenos">1227</span></a><span class="sd">    A LinearConstraint can be configured as follows:</span>
</span><span id="LinearConstraint-1228"><a href="#LinearConstraint-1228"><span class="linenos">1228</span></a><span class="sd">      * lower_bound: a float property, lb above. Should not be NaN nor +inf.</span>
</span><span id="LinearConstraint-1229"><a href="#LinearConstraint-1229"><span class="linenos">1229</span></a><span class="sd">      * upper_bound: a float property, ub above. Should not be NaN nor -inf.</span>
</span><span id="LinearConstraint-1230"><a href="#LinearConstraint-1230"><span class="linenos">1230</span></a><span class="sd">      * set_coefficient() and get_coefficient(): get and set the a_i * x_i</span>
</span><span id="LinearConstraint-1231"><a href="#LinearConstraint-1231"><span class="linenos">1231</span></a><span class="sd">        terms. The variable must be from the same model as this constraint, and</span>
</span><span id="LinearConstraint-1232"><a href="#LinearConstraint-1232"><span class="linenos">1232</span></a><span class="sd">        the a_i must be finite and not NaN. The coefficient for any variable not</span>
</span><span id="LinearConstraint-1233"><a href="#LinearConstraint-1233"><span class="linenos">1233</span></a><span class="sd">        set is 0.0, and setting a coefficient to 0.0 removes it from I above.</span>
</span><span id="LinearConstraint-1234"><a href="#LinearConstraint-1234"><span class="linenos">1234</span></a>
</span><span id="LinearConstraint-1235"><a href="#LinearConstraint-1235"><span class="linenos">1235</span></a><span class="sd">    The name is optional, read only, and used only for debugging. Non-empty names</span>
</span><span id="LinearConstraint-1236"><a href="#LinearConstraint-1236"><span class="linenos">1236</span></a><span class="sd">    should be distinct.</span>
</span><span id="LinearConstraint-1237"><a href="#LinearConstraint-1237"><span class="linenos">1237</span></a>
</span><span id="LinearConstraint-1238"><a href="#LinearConstraint-1238"><span class="linenos">1238</span></a><span class="sd">    Every LinearConstraint is associated with a Model (defined below). Note that</span>
</span><span id="LinearConstraint-1239"><a href="#LinearConstraint-1239"><span class="linenos">1239</span></a><span class="sd">    data describing the linear constraint (e.g. lower_bound) is owned by</span>
</span><span id="LinearConstraint-1240"><a href="#LinearConstraint-1240"><span class="linenos">1240</span></a><span class="sd">    Model.storage, this class is simply a reference to that data. Do not create a</span>
</span><span id="LinearConstraint-1241"><a href="#LinearConstraint-1241"><span class="linenos">1241</span></a><span class="sd">    LinearConstraint directly, use Model.add_linear_constraint() instead.</span>
</span><span id="LinearConstraint-1242"><a href="#LinearConstraint-1242"><span class="linenos">1242</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="LinearConstraint-1243"><a href="#LinearConstraint-1243"><span class="linenos">1243</span></a>
</span><span id="LinearConstraint-1244"><a href="#LinearConstraint-1244"><span class="linenos">1244</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;__weakref__&quot;</span><span class="p">,</span> <span class="s2">&quot;_model&quot;</span><span class="p">,</span> <span class="s2">&quot;_id&quot;</span>
</span><span id="LinearConstraint-1245"><a href="#LinearConstraint-1245"><span class="linenos">1245</span></a>
</span><span id="LinearConstraint-1246"><a href="#LinearConstraint-1246"><span class="linenos">1246</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">cid</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearConstraint-1247"><a href="#LinearConstraint-1247"><span class="linenos">1247</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do not invoke directly, use Model.add_linear_constraint().&quot;&quot;&quot;</span>
</span><span id="LinearConstraint-1248"><a href="#LinearConstraint-1248"><span class="linenos">1248</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span> <span class="o">=</span> <span class="n">model</span>
</span><span id="LinearConstraint-1249"><a href="#LinearConstraint-1249"><span class="linenos">1249</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">cid</span>
</span><span id="LinearConstraint-1250"><a href="#LinearConstraint-1250"><span class="linenos">1250</span></a>
</span><span id="LinearConstraint-1251"><a href="#LinearConstraint-1251"><span class="linenos">1251</span></a>    <span class="nd">@property</span>
</span><span id="LinearConstraint-1252"><a href="#LinearConstraint-1252"><span class="linenos">1252</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LinearConstraint-1253"><a href="#LinearConstraint-1253"><span class="linenos">1253</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_lb</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span><span id="LinearConstraint-1254"><a href="#LinearConstraint-1254"><span class="linenos">1254</span></a>
</span><span id="LinearConstraint-1255"><a href="#LinearConstraint-1255"><span class="linenos">1255</span></a>    <span class="nd">@lower_bound</span><span class="o">.</span><span class="n">setter</span>
</span><span id="LinearConstraint-1256"><a href="#LinearConstraint-1256"><span class="linenos">1256</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearConstraint-1257"><a href="#LinearConstraint-1257"><span class="linenos">1257</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_linear_constraint_lb</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="LinearConstraint-1258"><a href="#LinearConstraint-1258"><span class="linenos">1258</span></a>
</span><span id="LinearConstraint-1259"><a href="#LinearConstraint-1259"><span class="linenos">1259</span></a>    <span class="nd">@property</span>
</span><span id="LinearConstraint-1260"><a href="#LinearConstraint-1260"><span class="linenos">1260</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LinearConstraint-1261"><a href="#LinearConstraint-1261"><span class="linenos">1261</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_ub</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span><span id="LinearConstraint-1262"><a href="#LinearConstraint-1262"><span class="linenos">1262</span></a>
</span><span id="LinearConstraint-1263"><a href="#LinearConstraint-1263"><span class="linenos">1263</span></a>    <span class="nd">@upper_bound</span><span class="o">.</span><span class="n">setter</span>
</span><span id="LinearConstraint-1264"><a href="#LinearConstraint-1264"><span class="linenos">1264</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearConstraint-1265"><a href="#LinearConstraint-1265"><span class="linenos">1265</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_linear_constraint_ub</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="LinearConstraint-1266"><a href="#LinearConstraint-1266"><span class="linenos">1266</span></a>
</span><span id="LinearConstraint-1267"><a href="#LinearConstraint-1267"><span class="linenos">1267</span></a>    <span class="nd">@property</span>
</span><span id="LinearConstraint-1268"><a href="#LinearConstraint-1268"><span class="linenos">1268</span></a>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="LinearConstraint-1269"><a href="#LinearConstraint-1269"><span class="linenos">1269</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span><span id="LinearConstraint-1270"><a href="#LinearConstraint-1270"><span class="linenos">1270</span></a>
</span><span id="LinearConstraint-1271"><a href="#LinearConstraint-1271"><span class="linenos">1271</span></a>    <span class="nd">@property</span>
</span><span id="LinearConstraint-1272"><a href="#LinearConstraint-1272"><span class="linenos">1272</span></a>    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="LinearConstraint-1273"><a href="#LinearConstraint-1273"><span class="linenos">1273</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
</span><span id="LinearConstraint-1274"><a href="#LinearConstraint-1274"><span class="linenos">1274</span></a>
</span><span id="LinearConstraint-1275"><a href="#LinearConstraint-1275"><span class="linenos">1275</span></a>    <span class="nd">@property</span>
</span><span id="LinearConstraint-1276"><a href="#LinearConstraint-1276"><span class="linenos">1276</span></a>    <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Model&quot;</span><span class="p">:</span>
</span><span id="LinearConstraint-1277"><a href="#LinearConstraint-1277"><span class="linenos">1277</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
</span><span id="LinearConstraint-1278"><a href="#LinearConstraint-1278"><span class="linenos">1278</span></a>
</span><span id="LinearConstraint-1279"><a href="#LinearConstraint-1279"><span class="linenos">1279</span></a>    <span class="k">def</span> <span class="nf">set_coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearConstraint-1280"><a href="#LinearConstraint-1280"><span class="linenos">1280</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="LinearConstraint-1281"><a href="#LinearConstraint-1281"><span class="linenos">1281</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_linear_constraint_coefficient</span><span class="p">(</span>
</span><span id="LinearConstraint-1282"><a href="#LinearConstraint-1282"><span class="linenos">1282</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">coefficient</span>
</span><span id="LinearConstraint-1283"><a href="#LinearConstraint-1283"><span class="linenos">1283</span></a>        <span class="p">)</span>
</span><span id="LinearConstraint-1284"><a href="#LinearConstraint-1284"><span class="linenos">1284</span></a>
</span><span id="LinearConstraint-1285"><a href="#LinearConstraint-1285"><span class="linenos">1285</span></a>    <span class="k">def</span> <span class="nf">get_coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LinearConstraint-1286"><a href="#LinearConstraint-1286"><span class="linenos">1286</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="LinearConstraint-1287"><a href="#LinearConstraint-1287"><span class="linenos">1287</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_coefficient</span><span class="p">(</span>
</span><span id="LinearConstraint-1288"><a href="#LinearConstraint-1288"><span class="linenos">1288</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">variable</span><span class="o">.</span><span class="n">id</span>
</span><span id="LinearConstraint-1289"><a href="#LinearConstraint-1289"><span class="linenos">1289</span></a>        <span class="p">)</span>
</span><span id="LinearConstraint-1290"><a href="#LinearConstraint-1290"><span class="linenos">1290</span></a>
</span><span id="LinearConstraint-1291"><a href="#LinearConstraint-1291"><span class="linenos">1291</span></a>    <span class="k">def</span> <span class="nf">terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearTerm</span><span class="p">]:</span>
</span><span id="LinearConstraint-1292"><a href="#LinearConstraint-1292"><span class="linenos">1292</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the variable/coefficient pairs with nonzero coefficient for this linear constraint.&quot;&quot;&quot;</span>
</span><span id="LinearConstraint-1293"><a href="#LinearConstraint-1293"><span class="linenos">1293</span></a>        <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">row_nonzeros</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearConstraint-1294"><a href="#LinearConstraint-1294"><span class="linenos">1294</span></a>            <span class="k">yield</span> <span class="n">LinearTerm</span><span class="p">(</span>
</span><span id="LinearConstraint-1295"><a href="#LinearConstraint-1295"><span class="linenos">1295</span></a>                <span class="n">variable</span><span class="o">=</span><span class="n">variable</span><span class="p">,</span>
</span><span id="LinearConstraint-1296"><a href="#LinearConstraint-1296"><span class="linenos">1296</span></a>                <span class="n">coefficient</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_coefficient</span><span class="p">(</span>
</span><span id="LinearConstraint-1297"><a href="#LinearConstraint-1297"><span class="linenos">1297</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">variable</span><span class="o">.</span><span class="n">id</span>
</span><span id="LinearConstraint-1298"><a href="#LinearConstraint-1298"><span class="linenos">1298</span></a>                <span class="p">),</span>
</span><span id="LinearConstraint-1299"><a href="#LinearConstraint-1299"><span class="linenos">1299</span></a>            <span class="p">)</span>
</span><span id="LinearConstraint-1300"><a href="#LinearConstraint-1300"><span class="linenos">1300</span></a>
</span><span id="LinearConstraint-1301"><a href="#LinearConstraint-1301"><span class="linenos">1301</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearConstraint-1302"><a href="#LinearConstraint-1302"><span class="linenos">1302</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the name, or a string containing the id if the name is empty.&quot;&quot;&quot;</span>
</span><span id="LinearConstraint-1303"><a href="#LinearConstraint-1303"><span class="linenos">1303</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;linear_constraint_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="LinearConstraint-1304"><a href="#LinearConstraint-1304"><span class="linenos">1304</span></a>
</span><span id="LinearConstraint-1305"><a href="#LinearConstraint-1305"><span class="linenos">1305</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearConstraint-1306"><a href="#LinearConstraint-1306"><span class="linenos">1306</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;LinearConstraint id: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">, name: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">!r}</span><span class="s2">&gt;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A linear constraint for an optimization model.</p>

<p>A LinearConstraint adds the following restriction on feasible solutions to an
optimization model:
  lb &lt;= sum_{i in I} a_i * x_i &lt;= ub
where x_i are the decision variables of the problem. lb == ub is allowed, this
models the equality constraint:
  sum_{i in I} a_i * x_i == b
lb &gt; ub is also allowed, but the optimization problem will be infeasible.</p>

<h6 id="a-linearconstraint-can-be-configured-as-follows">A LinearConstraint can be configured as follows:</h6>

<blockquote>
  <ul>
  <li>lower_bound: a float property, lb above. Should not be NaN nor +inf.</li>
  <li>upper_bound: a float property, ub above. Should not be NaN nor -inf.</li>
  <li>set_coefficient() and get_coefficient(): get and set the a_i * x_i
  terms. The variable must be from the same model as this constraint, and
  the a_i must be finite and not NaN. The coefficient for any variable not
  set is 0.0, and setting a coefficient to 0.0 removes it from I above.</li>
  </ul>
</blockquote>

<p>The name is optional, read only, and used only for debugging. Non-empty names
should be distinct.</p>

<p>Every LinearConstraint is associated with a Model (defined below). Note that
data describing the linear constraint (e.g. lower_bound) is owned by
<a href="#Model.storage">Model.storage</a>, this class is simply a reference to that data. Do not create a
LinearConstraint directly, use <a href="#Model.add_linear_constraint">Model.add_linear_constraint()</a> instead.</p>
</div>


                            <div id="LinearConstraint.__init__" class="classattr">
                                        <input id="LinearConstraint.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">LinearConstraint</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">model</span><span class="p">:</span> <span class="n"><a href="#Model">Model</a></span>, </span><span class="param"><span class="n">cid</span><span class="p">:</span> <span class="nb">int</span></span>)</span>

                <label class="view-source-button" for="LinearConstraint.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearConstraint.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearConstraint.__init__-1246"><a href="#LinearConstraint.__init__-1246"><span class="linenos">1246</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">,</span> <span class="n">cid</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearConstraint.__init__-1247"><a href="#LinearConstraint.__init__-1247"><span class="linenos">1247</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do not invoke directly, use Model.add_linear_constraint().&quot;&quot;&quot;</span>
</span><span id="LinearConstraint.__init__-1248"><a href="#LinearConstraint.__init__-1248"><span class="linenos">1248</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span> <span class="o">=</span> <span class="n">model</span>
</span><span id="LinearConstraint.__init__-1249"><a href="#LinearConstraint.__init__-1249"><span class="linenos">1249</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">cid</span>
</span></pre></div>


            <div class="docstring"><p>Do not invoke directly, use <a href="#Model.add_linear_constraint">Model.add_linear_constraint()</a>.</p>
</div>


                            </div>
                            <div id="LinearConstraint.lower_bound" class="classattr">
                                        <input id="LinearConstraint.lower_bound-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">lower_bound</span><span class="annotation">: float</span>

                <label class="view-source-button" for="LinearConstraint.lower_bound-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearConstraint.lower_bound"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearConstraint.lower_bound-1251"><a href="#LinearConstraint.lower_bound-1251"><span class="linenos">1251</span></a>    <span class="nd">@property</span>
</span><span id="LinearConstraint.lower_bound-1252"><a href="#LinearConstraint.lower_bound-1252"><span class="linenos">1252</span></a>    <span class="k">def</span> <span class="nf">lower_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LinearConstraint.lower_bound-1253"><a href="#LinearConstraint.lower_bound-1253"><span class="linenos">1253</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_lb</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearConstraint.upper_bound" class="classattr">
                                        <input id="LinearConstraint.upper_bound-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">upper_bound</span><span class="annotation">: float</span>

                <label class="view-source-button" for="LinearConstraint.upper_bound-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearConstraint.upper_bound"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearConstraint.upper_bound-1259"><a href="#LinearConstraint.upper_bound-1259"><span class="linenos">1259</span></a>    <span class="nd">@property</span>
</span><span id="LinearConstraint.upper_bound-1260"><a href="#LinearConstraint.upper_bound-1260"><span class="linenos">1260</span></a>    <span class="k">def</span> <span class="nf">upper_bound</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LinearConstraint.upper_bound-1261"><a href="#LinearConstraint.upper_bound-1261"><span class="linenos">1261</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_ub</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearConstraint.name" class="classattr">
                                        <input id="LinearConstraint.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="LinearConstraint.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearConstraint.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearConstraint.name-1267"><a href="#LinearConstraint.name-1267"><span class="linenos">1267</span></a>    <span class="nd">@property</span>
</span><span id="LinearConstraint.name-1268"><a href="#LinearConstraint.name-1268"><span class="linenos">1268</span></a>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="LinearConstraint.name-1269"><a href="#LinearConstraint.name-1269"><span class="linenos">1269</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearConstraint.id" class="classattr">
                                        <input id="LinearConstraint.id-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">id</span><span class="annotation">: int</span>

                <label class="view-source-button" for="LinearConstraint.id-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearConstraint.id"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearConstraint.id-1271"><a href="#LinearConstraint.id-1271"><span class="linenos">1271</span></a>    <span class="nd">@property</span>
</span><span id="LinearConstraint.id-1272"><a href="#LinearConstraint.id-1272"><span class="linenos">1272</span></a>    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="LinearConstraint.id-1273"><a href="#LinearConstraint.id-1273"><span class="linenos">1273</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearConstraint.model" class="classattr">
                                        <input id="LinearConstraint.model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">model</span><span class="annotation">: <a href="#Model">Model</a></span>

                <label class="view-source-button" for="LinearConstraint.model-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearConstraint.model"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearConstraint.model-1275"><a href="#LinearConstraint.model-1275"><span class="linenos">1275</span></a>    <span class="nd">@property</span>
</span><span id="LinearConstraint.model-1276"><a href="#LinearConstraint.model-1276"><span class="linenos">1276</span></a>    <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Model&quot;</span><span class="p">:</span>
</span><span id="LinearConstraint.model-1277"><a href="#LinearConstraint.model-1277"><span class="linenos">1277</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearConstraint.set_coefficient" class="classattr">
                                        <input id="LinearConstraint.set_coefficient-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_coefficient</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">variable</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span>,</span><span class="param">	<span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="LinearConstraint.set_coefficient-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearConstraint.set_coefficient"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearConstraint.set_coefficient-1279"><a href="#LinearConstraint.set_coefficient-1279"><span class="linenos">1279</span></a>    <span class="k">def</span> <span class="nf">set_coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearConstraint.set_coefficient-1280"><a href="#LinearConstraint.set_coefficient-1280"><span class="linenos">1280</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="LinearConstraint.set_coefficient-1281"><a href="#LinearConstraint.set_coefficient-1281"><span class="linenos">1281</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_linear_constraint_coefficient</span><span class="p">(</span>
</span><span id="LinearConstraint.set_coefficient-1282"><a href="#LinearConstraint.set_coefficient-1282"><span class="linenos">1282</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">coefficient</span>
</span><span id="LinearConstraint.set_coefficient-1283"><a href="#LinearConstraint.set_coefficient-1283"><span class="linenos">1283</span></a>        <span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearConstraint.get_coefficient" class="classattr">
                                        <input id="LinearConstraint.get_coefficient-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_coefficient</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">variable</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span></span><span class="return-annotation">) -> <span class="nb">float</span>:</span></span>

                <label class="view-source-button" for="LinearConstraint.get_coefficient-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearConstraint.get_coefficient"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearConstraint.get_coefficient-1285"><a href="#LinearConstraint.get_coefficient-1285"><span class="linenos">1285</span></a>    <span class="k">def</span> <span class="nf">get_coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LinearConstraint.get_coefficient-1286"><a href="#LinearConstraint.get_coefficient-1286"><span class="linenos">1286</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="LinearConstraint.get_coefficient-1287"><a href="#LinearConstraint.get_coefficient-1287"><span class="linenos">1287</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_coefficient</span><span class="p">(</span>
</span><span id="LinearConstraint.get_coefficient-1288"><a href="#LinearConstraint.get_coefficient-1288"><span class="linenos">1288</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">variable</span><span class="o">.</span><span class="n">id</span>
</span><span id="LinearConstraint.get_coefficient-1289"><a href="#LinearConstraint.get_coefficient-1289"><span class="linenos">1289</span></a>        <span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearConstraint.terms" class="classattr">
                                        <input id="LinearConstraint.terms-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">terms</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterator</span><span class="p">[</span><span class="n"><a href="#LinearTerm">LinearTerm</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="LinearConstraint.terms-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearConstraint.terms"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearConstraint.terms-1291"><a href="#LinearConstraint.terms-1291"><span class="linenos">1291</span></a>    <span class="k">def</span> <span class="nf">terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearTerm</span><span class="p">]:</span>
</span><span id="LinearConstraint.terms-1292"><a href="#LinearConstraint.terms-1292"><span class="linenos">1292</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the variable/coefficient pairs with nonzero coefficient for this linear constraint.&quot;&quot;&quot;</span>
</span><span id="LinearConstraint.terms-1293"><a href="#LinearConstraint.terms-1293"><span class="linenos">1293</span></a>        <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">row_nonzeros</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearConstraint.terms-1294"><a href="#LinearConstraint.terms-1294"><span class="linenos">1294</span></a>            <span class="k">yield</span> <span class="n">LinearTerm</span><span class="p">(</span>
</span><span id="LinearConstraint.terms-1295"><a href="#LinearConstraint.terms-1295"><span class="linenos">1295</span></a>                <span class="n">variable</span><span class="o">=</span><span class="n">variable</span><span class="p">,</span>
</span><span id="LinearConstraint.terms-1296"><a href="#LinearConstraint.terms-1296"><span class="linenos">1296</span></a>                <span class="n">coefficient</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_coefficient</span><span class="p">(</span>
</span><span id="LinearConstraint.terms-1297"><a href="#LinearConstraint.terms-1297"><span class="linenos">1297</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">variable</span><span class="o">.</span><span class="n">id</span>
</span><span id="LinearConstraint.terms-1298"><a href="#LinearConstraint.terms-1298"><span class="linenos">1298</span></a>                <span class="p">),</span>
</span><span id="LinearConstraint.terms-1299"><a href="#LinearConstraint.terms-1299"><span class="linenos">1299</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Yields the variable/coefficient pairs with nonzero coefficient for this linear constraint.</p>
</div>


                            </div>
                </section>
                <section id="Objective">
                            <input id="Objective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Objective</span>:

                <label class="view-source-button" for="Objective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective-1309"><a href="#Objective-1309"><span class="linenos">1309</span></a><span class="k">class</span> <span class="nc">Objective</span><span class="p">:</span>
</span><span id="Objective-1310"><a href="#Objective-1310"><span class="linenos">1310</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The objective for an optimization model.</span>
</span><span id="Objective-1311"><a href="#Objective-1311"><span class="linenos">1311</span></a>
</span><span id="Objective-1312"><a href="#Objective-1312"><span class="linenos">1312</span></a><span class="sd">    An objective is either of the form:</span>
</span><span id="Objective-1313"><a href="#Objective-1313"><span class="linenos">1313</span></a><span class="sd">      min o + sum_{i in I} c_i * x_i + sum_{i, j in I, i &lt;= j} q_i,j * x_i * x_j</span>
</span><span id="Objective-1314"><a href="#Objective-1314"><span class="linenos">1314</span></a><span class="sd">    or</span>
</span><span id="Objective-1315"><a href="#Objective-1315"><span class="linenos">1315</span></a><span class="sd">      max o + sum_{i in I} c_i * x_i + sum_{(i, j) in Q} q_i,j * x_i * x_j</span>
</span><span id="Objective-1316"><a href="#Objective-1316"><span class="linenos">1316</span></a><span class="sd">    where x_i are the decision variables of the problem and where all pairs (i, j)</span>
</span><span id="Objective-1317"><a href="#Objective-1317"><span class="linenos">1317</span></a><span class="sd">    in Q satisfy i &lt;= j. The values of o, c_i and q_i,j should be finite and not</span>
</span><span id="Objective-1318"><a href="#Objective-1318"><span class="linenos">1318</span></a><span class="sd">    NaN.</span>
</span><span id="Objective-1319"><a href="#Objective-1319"><span class="linenos">1319</span></a>
</span><span id="Objective-1320"><a href="#Objective-1320"><span class="linenos">1320</span></a><span class="sd">    The objective can be configured as follows:</span>
</span><span id="Objective-1321"><a href="#Objective-1321"><span class="linenos">1321</span></a><span class="sd">      * offset: a float property, o above. Should be finite and not NaN.</span>
</span><span id="Objective-1322"><a href="#Objective-1322"><span class="linenos">1322</span></a><span class="sd">      * is_maximize: a bool property, if the objective is to maximize or minimize.</span>
</span><span id="Objective-1323"><a href="#Objective-1323"><span class="linenos">1323</span></a><span class="sd">      * set_linear_coefficient and get_linear_coefficient control the c_i * x_i</span>
</span><span id="Objective-1324"><a href="#Objective-1324"><span class="linenos">1324</span></a><span class="sd">        terms. The variables must be from the same model as this objective, and</span>
</span><span id="Objective-1325"><a href="#Objective-1325"><span class="linenos">1325</span></a><span class="sd">        the c_i must be finite and not NaN. The coefficient for any variable not</span>
</span><span id="Objective-1326"><a href="#Objective-1326"><span class="linenos">1326</span></a><span class="sd">        set is 0.0, and setting a coefficient to 0.0 removes it from I above.</span>
</span><span id="Objective-1327"><a href="#Objective-1327"><span class="linenos">1327</span></a><span class="sd">      * set_quadratic_coefficient and get_quadratic_coefficient control the</span>
</span><span id="Objective-1328"><a href="#Objective-1328"><span class="linenos">1328</span></a><span class="sd">        q_i,j * x_i * x_j terms. The variables must be from the same model as this</span>
</span><span id="Objective-1329"><a href="#Objective-1329"><span class="linenos">1329</span></a><span class="sd">        objective, and the q_i,j must be finite and not NaN. The coefficient for</span>
</span><span id="Objective-1330"><a href="#Objective-1330"><span class="linenos">1330</span></a><span class="sd">        any pair of variables not set is 0.0, and setting a coefficient to 0.0</span>
</span><span id="Objective-1331"><a href="#Objective-1331"><span class="linenos">1331</span></a><span class="sd">        removes the associated (i,j) from Q above.</span>
</span><span id="Objective-1332"><a href="#Objective-1332"><span class="linenos">1332</span></a>
</span><span id="Objective-1333"><a href="#Objective-1333"><span class="linenos">1333</span></a><span class="sd">    Every Objective is associated with a Model (defined below). Note that data</span>
</span><span id="Objective-1334"><a href="#Objective-1334"><span class="linenos">1334</span></a><span class="sd">    describing the objective (e.g. offset) is owned by Model.storage, this class</span>
</span><span id="Objective-1335"><a href="#Objective-1335"><span class="linenos">1335</span></a><span class="sd">    is simply a reference to that data. Do not create an Objective directly,</span>
</span><span id="Objective-1336"><a href="#Objective-1336"><span class="linenos">1336</span></a><span class="sd">    use Model.objective to access the objective instead.</span>
</span><span id="Objective-1337"><a href="#Objective-1337"><span class="linenos">1337</span></a>
</span><span id="Objective-1338"><a href="#Objective-1338"><span class="linenos">1338</span></a><span class="sd">    The objective will be linear if only linear coefficients are set. This can be</span>
</span><span id="Objective-1339"><a href="#Objective-1339"><span class="linenos">1339</span></a><span class="sd">    useful to avoid solve-time errors with solvers that do not accept quadratic</span>
</span><span id="Objective-1340"><a href="#Objective-1340"><span class="linenos">1340</span></a><span class="sd">    objectives. To facilitate this linear objective guarantee we provide three</span>
</span><span id="Objective-1341"><a href="#Objective-1341"><span class="linenos">1341</span></a><span class="sd">    functions to add to the objective:</span>
</span><span id="Objective-1342"><a href="#Objective-1342"><span class="linenos">1342</span></a><span class="sd">      * add(), which accepts linear or quadratic expressions,</span>
</span><span id="Objective-1343"><a href="#Objective-1343"><span class="linenos">1343</span></a><span class="sd">      * add_quadratic(), which also accepts linear or quadratic expressions and</span>
</span><span id="Objective-1344"><a href="#Objective-1344"><span class="linenos">1344</span></a><span class="sd">        can be used to signal a quadratic objective is possible, and</span>
</span><span id="Objective-1345"><a href="#Objective-1345"><span class="linenos">1345</span></a><span class="sd">      * add_linear(), which only accepts linear expressions and can be used to</span>
</span><span id="Objective-1346"><a href="#Objective-1346"><span class="linenos">1346</span></a><span class="sd">        guarantee the objective remains linear.</span>
</span><span id="Objective-1347"><a href="#Objective-1347"><span class="linenos">1347</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Objective-1348"><a href="#Objective-1348"><span class="linenos">1348</span></a>
</span><span id="Objective-1349"><a href="#Objective-1349"><span class="linenos">1349</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;_model&quot;</span><span class="p">,)</span>
</span><span id="Objective-1350"><a href="#Objective-1350"><span class="linenos">1350</span></a>
</span><span id="Objective-1351"><a href="#Objective-1351"><span class="linenos">1351</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective-1352"><a href="#Objective-1352"><span class="linenos">1352</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do no invoke directly, use Model.objective.&quot;&quot;&quot;</span>
</span><span id="Objective-1353"><a href="#Objective-1353"><span class="linenos">1353</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span> <span class="o">=</span> <span class="n">model</span>
</span><span id="Objective-1354"><a href="#Objective-1354"><span class="linenos">1354</span></a>
</span><span id="Objective-1355"><a href="#Objective-1355"><span class="linenos">1355</span></a>    <span class="nd">@property</span>
</span><span id="Objective-1356"><a href="#Objective-1356"><span class="linenos">1356</span></a>    <span class="k">def</span> <span class="nf">is_maximize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Objective-1357"><a href="#Objective-1357"><span class="linenos">1357</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_is_maximize</span><span class="p">()</span>
</span><span id="Objective-1358"><a href="#Objective-1358"><span class="linenos">1358</span></a>
</span><span id="Objective-1359"><a href="#Objective-1359"><span class="linenos">1359</span></a>    <span class="nd">@is_maximize</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Objective-1360"><a href="#Objective-1360"><span class="linenos">1360</span></a>    <span class="k">def</span> <span class="nf">is_maximize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">is_maximize</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective-1361"><a href="#Objective-1361"><span class="linenos">1361</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_is_maximize</span><span class="p">(</span><span class="n">is_maximize</span><span class="p">)</span>
</span><span id="Objective-1362"><a href="#Objective-1362"><span class="linenos">1362</span></a>
</span><span id="Objective-1363"><a href="#Objective-1363"><span class="linenos">1363</span></a>    <span class="nd">@property</span>
</span><span id="Objective-1364"><a href="#Objective-1364"><span class="linenos">1364</span></a>    <span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Objective-1365"><a href="#Objective-1365"><span class="linenos">1365</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_objective_offset</span><span class="p">()</span>
</span><span id="Objective-1366"><a href="#Objective-1366"><span class="linenos">1366</span></a>
</span><span id="Objective-1367"><a href="#Objective-1367"><span class="linenos">1367</span></a>    <span class="nd">@offset</span><span class="o">.</span><span class="n">setter</span>
</span><span id="Objective-1368"><a href="#Objective-1368"><span class="linenos">1368</span></a>    <span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective-1369"><a href="#Objective-1369"><span class="linenos">1369</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_objective_offset</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="Objective-1370"><a href="#Objective-1370"><span class="linenos">1370</span></a>
</span><span id="Objective-1371"><a href="#Objective-1371"><span class="linenos">1371</span></a>    <span class="nd">@property</span>
</span><span id="Objective-1372"><a href="#Objective-1372"><span class="linenos">1372</span></a>    <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Model&quot;</span><span class="p">:</span>
</span><span id="Objective-1373"><a href="#Objective-1373"><span class="linenos">1373</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
</span><span id="Objective-1374"><a href="#Objective-1374"><span class="linenos">1374</span></a>
</span><span id="Objective-1375"><a href="#Objective-1375"><span class="linenos">1375</span></a>    <span class="k">def</span> <span class="nf">set_linear_coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">coef</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective-1376"><a href="#Objective-1376"><span class="linenos">1376</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="Objective-1377"><a href="#Objective-1377"><span class="linenos">1377</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_linear_objective_coefficient</span><span class="p">(</span><span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">coef</span><span class="p">)</span>
</span><span id="Objective-1378"><a href="#Objective-1378"><span class="linenos">1378</span></a>
</span><span id="Objective-1379"><a href="#Objective-1379"><span class="linenos">1379</span></a>    <span class="k">def</span> <span class="nf">get_linear_coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Objective-1380"><a href="#Objective-1380"><span class="linenos">1380</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="Objective-1381"><a href="#Objective-1381"><span class="linenos">1381</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_objective_coefficient</span><span class="p">(</span><span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Objective-1382"><a href="#Objective-1382"><span class="linenos">1382</span></a>
</span><span id="Objective-1383"><a href="#Objective-1383"><span class="linenos">1383</span></a>    <span class="k">def</span> <span class="nf">linear_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearTerm</span><span class="p">]:</span>
</span><span id="Objective-1384"><a href="#Objective-1384"><span class="linenos">1384</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields variable coefficient pairs for variables with nonzero objective coefficient in undefined order.&quot;&quot;&quot;</span>
</span><span id="Objective-1385"><a href="#Objective-1385"><span class="linenos">1385</span></a>        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">linear_objective_terms</span><span class="p">()</span>
</span><span id="Objective-1386"><a href="#Objective-1386"><span class="linenos">1386</span></a>
</span><span id="Objective-1387"><a href="#Objective-1387"><span class="linenos">1387</span></a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective-1388"><a href="#Objective-1388"><span class="linenos">1388</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds the provided expression `objective` to the objective function.</span>
</span><span id="Objective-1389"><a href="#Objective-1389"><span class="linenos">1389</span></a>
</span><span id="Objective-1390"><a href="#Objective-1390"><span class="linenos">1390</span></a><span class="sd">        To ensure the objective remains linear through type checks, use</span>
</span><span id="Objective-1391"><a href="#Objective-1391"><span class="linenos">1391</span></a><span class="sd">        add_linear().</span>
</span><span id="Objective-1392"><a href="#Objective-1392"><span class="linenos">1392</span></a>
</span><span id="Objective-1393"><a href="#Objective-1393"><span class="linenos">1393</span></a><span class="sd">        Args:</span>
</span><span id="Objective-1394"><a href="#Objective-1394"><span class="linenos">1394</span></a><span class="sd">          objective: the expression to add to the objective function.</span>
</span><span id="Objective-1395"><a href="#Objective-1395"><span class="linenos">1395</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Objective-1396"><a href="#Objective-1396"><span class="linenos">1396</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Objective-1397"><a href="#Objective-1397"><span class="linenos">1397</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">add_linear</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="Objective-1398"><a href="#Objective-1398"><span class="linenos">1398</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="Objective-1399"><a href="#Objective-1399"><span class="linenos">1399</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">add_quadratic</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="Objective-1400"><a href="#Objective-1400"><span class="linenos">1400</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Objective-1401"><a href="#Objective-1401"><span class="linenos">1401</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="Objective-1402"><a href="#Objective-1402"><span class="linenos">1402</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="Objective-1403"><a href="#Objective-1403"><span class="linenos">1403</span></a>                <span class="sa">f</span><span class="s2">&quot;Objective.add(): </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="Objective-1404"><a href="#Objective-1404"><span class="linenos">1404</span></a>            <span class="p">)</span>
</span><span id="Objective-1405"><a href="#Objective-1405"><span class="linenos">1405</span></a>
</span><span id="Objective-1406"><a href="#Objective-1406"><span class="linenos">1406</span></a>    <span class="k">def</span> <span class="nf">add_linear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective-1407"><a href="#Objective-1407"><span class="linenos">1407</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds the provided linear expression `objective` to the objective function.&quot;&quot;&quot;</span>
</span><span id="Objective-1408"><a href="#Objective-1408"><span class="linenos">1408</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Objective-1409"><a href="#Objective-1409"><span class="linenos">1409</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="Objective-1410"><a href="#Objective-1410"><span class="linenos">1410</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="Objective-1411"><a href="#Objective-1411"><span class="linenos">1411</span></a>                <span class="sa">f</span><span class="s2">&quot;Objective.add_linear(): </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="Objective-1412"><a href="#Objective-1412"><span class="linenos">1412</span></a>            <span class="p">)</span>
</span><span id="Objective-1413"><a href="#Objective-1413"><span class="linenos">1413</span></a>        <span class="n">objective_expr</span> <span class="o">=</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="Objective-1414"><a href="#Objective-1414"><span class="linenos">1414</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="Objective-1415"><a href="#Objective-1415"><span class="linenos">1415</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Objective-1416"><a href="#Objective-1416"><span class="linenos">1416</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_coefficient</span><span class="p">(</span>
</span><span id="Objective-1417"><a href="#Objective-1417"><span class="linenos">1417</span></a>                <span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_linear_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">+</span> <span class="n">coefficient</span>
</span><span id="Objective-1418"><a href="#Objective-1418"><span class="linenos">1418</span></a>            <span class="p">)</span>
</span><span id="Objective-1419"><a href="#Objective-1419"><span class="linenos">1419</span></a>
</span><span id="Objective-1420"><a href="#Objective-1420"><span class="linenos">1420</span></a>    <span class="k">def</span> <span class="nf">add_quadratic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective-1421"><a href="#Objective-1421"><span class="linenos">1421</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds the provided quadratic expression `objective` to the objective function.&quot;&quot;&quot;</span>
</span><span id="Objective-1422"><a href="#Objective-1422"><span class="linenos">1422</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">QuadraticBase</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Objective-1423"><a href="#Objective-1423"><span class="linenos">1423</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="Objective-1424"><a href="#Objective-1424"><span class="linenos">1424</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="Objective-1425"><a href="#Objective-1425"><span class="linenos">1425</span></a>                <span class="sa">f</span><span class="s2">&quot;Objective.add(): </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="Objective-1426"><a href="#Objective-1426"><span class="linenos">1426</span></a>            <span class="p">)</span>
</span><span id="Objective-1427"><a href="#Objective-1427"><span class="linenos">1427</span></a>        <span class="n">objective_expr</span> <span class="o">=</span> <span class="n">as_flat_quadratic_expression</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="Objective-1428"><a href="#Objective-1428"><span class="linenos">1428</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="Objective-1429"><a href="#Objective-1429"><span class="linenos">1429</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">linear_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Objective-1430"><a href="#Objective-1430"><span class="linenos">1430</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_coefficient</span><span class="p">(</span>
</span><span id="Objective-1431"><a href="#Objective-1431"><span class="linenos">1431</span></a>                <span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_linear_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">+</span> <span class="n">coefficient</span>
</span><span id="Objective-1432"><a href="#Objective-1432"><span class="linenos">1432</span></a>            <span class="p">)</span>
</span><span id="Objective-1433"><a href="#Objective-1433"><span class="linenos">1433</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Objective-1434"><a href="#Objective-1434"><span class="linenos">1434</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_quadratic_coefficient</span><span class="p">(</span>
</span><span id="Objective-1435"><a href="#Objective-1435"><span class="linenos">1435</span></a>                <span class="n">key</span><span class="o">.</span><span class="n">first_var</span><span class="p">,</span>
</span><span id="Objective-1436"><a href="#Objective-1436"><span class="linenos">1436</span></a>                <span class="n">key</span><span class="o">.</span><span class="n">second_var</span><span class="p">,</span>
</span><span id="Objective-1437"><a href="#Objective-1437"><span class="linenos">1437</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">get_quadratic_coefficient</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">first_var</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">second_var</span><span class="p">)</span>
</span><span id="Objective-1438"><a href="#Objective-1438"><span class="linenos">1438</span></a>                <span class="o">+</span> <span class="n">coefficient</span><span class="p">,</span>
</span><span id="Objective-1439"><a href="#Objective-1439"><span class="linenos">1439</span></a>            <span class="p">)</span>
</span><span id="Objective-1440"><a href="#Objective-1440"><span class="linenos">1440</span></a>
</span><span id="Objective-1441"><a href="#Objective-1441"><span class="linenos">1441</span></a>    <span class="k">def</span> <span class="nf">set_quadratic_coefficient</span><span class="p">(</span>
</span><span id="Objective-1442"><a href="#Objective-1442"><span class="linenos">1442</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">first_variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">second_variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">coef</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="Objective-1443"><a href="#Objective-1443"><span class="linenos">1443</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective-1444"><a href="#Objective-1444"><span class="linenos">1444</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">first_variable</span><span class="p">)</span>
</span><span id="Objective-1445"><a href="#Objective-1445"><span class="linenos">1445</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">second_variable</span><span class="p">)</span>
</span><span id="Objective-1446"><a href="#Objective-1446"><span class="linenos">1446</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_quadratic_objective_coefficient</span><span class="p">(</span>
</span><span id="Objective-1447"><a href="#Objective-1447"><span class="linenos">1447</span></a>            <span class="n">first_variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">second_variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">coef</span>
</span><span id="Objective-1448"><a href="#Objective-1448"><span class="linenos">1448</span></a>        <span class="p">)</span>
</span><span id="Objective-1449"><a href="#Objective-1449"><span class="linenos">1449</span></a>
</span><span id="Objective-1450"><a href="#Objective-1450"><span class="linenos">1450</span></a>    <span class="k">def</span> <span class="nf">get_quadratic_coefficient</span><span class="p">(</span>
</span><span id="Objective-1451"><a href="#Objective-1451"><span class="linenos">1451</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">first_variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">second_variable</span><span class="p">:</span> <span class="n">Variable</span>
</span><span id="Objective-1452"><a href="#Objective-1452"><span class="linenos">1452</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Objective-1453"><a href="#Objective-1453"><span class="linenos">1453</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">first_variable</span><span class="p">)</span>
</span><span id="Objective-1454"><a href="#Objective-1454"><span class="linenos">1454</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">second_variable</span><span class="p">)</span>
</span><span id="Objective-1455"><a href="#Objective-1455"><span class="linenos">1455</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_quadratic_objective_coefficient</span><span class="p">(</span>
</span><span id="Objective-1456"><a href="#Objective-1456"><span class="linenos">1456</span></a>            <span class="n">first_variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">second_variable</span><span class="o">.</span><span class="n">id</span>
</span><span id="Objective-1457"><a href="#Objective-1457"><span class="linenos">1457</span></a>        <span class="p">)</span>
</span><span id="Objective-1458"><a href="#Objective-1458"><span class="linenos">1458</span></a>
</span><span id="Objective-1459"><a href="#Objective-1459"><span class="linenos">1459</span></a>    <span class="k">def</span> <span class="nf">quadratic_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">QuadraticTerm</span><span class="p">]:</span>
</span><span id="Objective-1460"><a href="#Objective-1460"><span class="linenos">1460</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields quadratic terms with nonzero objective coefficient in undefined order.&quot;&quot;&quot;</span>
</span><span id="Objective-1461"><a href="#Objective-1461"><span class="linenos">1461</span></a>        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">quadratic_objective_terms</span><span class="p">()</span>
</span><span id="Objective-1462"><a href="#Objective-1462"><span class="linenos">1462</span></a>
</span><span id="Objective-1463"><a href="#Objective-1463"><span class="linenos">1463</span></a>    <span class="k">def</span> <span class="nf">as_linear_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearExpression</span><span class="p">:</span>
</span><span id="Objective-1464"><a href="#Objective-1464"><span class="linenos">1464</span></a>        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">()):</span>
</span><span id="Objective-1465"><a href="#Objective-1465"><span class="linenos">1465</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Cannot get a quadratic objective as a linear expression&quot;</span><span class="p">)</span>
</span><span id="Objective-1466"><a href="#Objective-1466"><span class="linenos">1466</span></a>        <span class="k">return</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">+</span> <span class="n">LinearSum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linear_terms</span><span class="p">()))</span>
</span><span id="Objective-1467"><a href="#Objective-1467"><span class="linenos">1467</span></a>
</span><span id="Objective-1468"><a href="#Objective-1468"><span class="linenos">1468</span></a>    <span class="k">def</span> <span class="nf">as_quadratic_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QuadraticExpression</span><span class="p">:</span>
</span><span id="Objective-1469"><a href="#Objective-1469"><span class="linenos">1469</span></a>        <span class="k">return</span> <span class="n">as_flat_quadratic_expression</span><span class="p">(</span>
</span><span id="Objective-1470"><a href="#Objective-1470"><span class="linenos">1470</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">offset</span>
</span><span id="Objective-1471"><a href="#Objective-1471"><span class="linenos">1471</span></a>            <span class="o">+</span> <span class="n">LinearSum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linear_terms</span><span class="p">())</span>
</span><span id="Objective-1472"><a href="#Objective-1472"><span class="linenos">1472</span></a>            <span class="o">+</span> <span class="n">QuadraticSum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">())</span>
</span><span id="Objective-1473"><a href="#Objective-1473"><span class="linenos">1473</span></a>        <span class="p">)</span>
</span><span id="Objective-1474"><a href="#Objective-1474"><span class="linenos">1474</span></a>
</span><span id="Objective-1475"><a href="#Objective-1475"><span class="linenos">1475</span></a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective-1476"><a href="#Objective-1476"><span class="linenos">1476</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clears objective coefficients and offset. Does not change direction.&quot;&quot;&quot;</span>
</span><span id="Objective-1477"><a href="#Objective-1477"><span class="linenos">1477</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">clear_objective</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>The objective for an optimization model.</p>

<h6 id="an-objective-is-either-of-the-form">An objective is either of the form:</h6>

<blockquote>
  <p>min o + sum_{i in I} c_i * x_i + sum_{i, j in I, i &lt;= j} q_i,j * x_i * x_j</p>
</blockquote>

<p>or
  max o + sum_{i in I} c_i * x_i + sum_{(i, j) in Q} q_i,j * x_i * x_j
where x_i are the decision variables of the problem and where all pairs (i, j)
in Q satisfy i &lt;= j. The values of o, c_i and q_i,j should be finite and not
NaN.</p>

<h6 id="the-objective-can-be-configured-as-follows">The objective can be configured as follows:</h6>

<blockquote>
  <ul>
  <li>offset: a float property, o above. Should be finite and not NaN.</li>
  <li>is_maximize: a bool property, if the objective is to maximize or minimize.</li>
  <li>set_linear_coefficient and get_linear_coefficient control the c_i * x_i
  terms. The variables must be from the same model as this objective, and
  the c_i must be finite and not NaN. The coefficient for any variable not
  set is 0.0, and setting a coefficient to 0.0 removes it from I above.</li>
  <li>set_quadratic_coefficient and get_quadratic_coefficient control the
  q_i,j * x_i * x_j terms. The variables must be from the same model as this
  objective, and the q_i,j must be finite and not NaN. The coefficient for
  any pair of variables not set is 0.0, and setting a coefficient to 0.0
  removes the associated (i,j) from Q above.</li>
  </ul>
</blockquote>

<p>Every Objective is associated with a Model (defined below). Note that data
describing the objective (e.g. offset) is owned by <a href="#Model.storage">Model.storage</a>, this class
is simply a reference to that data. Do not create an Objective directly,
use <a href="#Model.objective">Model.objective</a> to access the objective instead.</p>

<p>The objective will be linear if only linear coefficients are set. This can be
useful to avoid solve-time errors with solvers that do not accept quadratic
objectives. To facilitate this linear objective guarantee we provide three
functions to add to the objective:</p>

<ul>
<li>add(), which accepts linear or quadratic expressions,</li>
<li>add_quadratic(), which also accepts linear or quadratic expressions and
can be used to signal a quadratic objective is possible, and</li>
<li>add_linear(), which only accepts linear expressions and can be used to
guarantee the objective remains linear.</li>
</ul>
</div>


                            <div id="Objective.__init__" class="classattr">
                                        <input id="Objective.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Objective</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">model</span><span class="p">:</span> <span class="n"><a href="#Model">Model</a></span></span>)</span>

                <label class="view-source-button" for="Objective.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.__init__-1351"><a href="#Objective.__init__-1351"><span class="linenos">1351</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective.__init__-1352"><a href="#Objective.__init__-1352"><span class="linenos">1352</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do no invoke directly, use Model.objective.&quot;&quot;&quot;</span>
</span><span id="Objective.__init__-1353"><a href="#Objective.__init__-1353"><span class="linenos">1353</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">:</span> <span class="s2">&quot;Model&quot;</span> <span class="o">=</span> <span class="n">model</span>
</span></pre></div>


            <div class="docstring"><p>Do no invoke directly, use <a href="#Model.objective">Model.objective</a>.</p>
</div>


                            </div>
                            <div id="Objective.is_maximize" class="classattr">
                                        <input id="Objective.is_maximize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">is_maximize</span><span class="annotation">: bool</span>

                <label class="view-source-button" for="Objective.is_maximize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.is_maximize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.is_maximize-1355"><a href="#Objective.is_maximize-1355"><span class="linenos">1355</span></a>    <span class="nd">@property</span>
</span><span id="Objective.is_maximize-1356"><a href="#Objective.is_maximize-1356"><span class="linenos">1356</span></a>    <span class="k">def</span> <span class="nf">is_maximize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Objective.is_maximize-1357"><a href="#Objective.is_maximize-1357"><span class="linenos">1357</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_is_maximize</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Objective.offset" class="classattr">
                                        <input id="Objective.offset-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">offset</span><span class="annotation">: float</span>

                <label class="view-source-button" for="Objective.offset-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.offset"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.offset-1363"><a href="#Objective.offset-1363"><span class="linenos">1363</span></a>    <span class="nd">@property</span>
</span><span id="Objective.offset-1364"><a href="#Objective.offset-1364"><span class="linenos">1364</span></a>    <span class="k">def</span> <span class="nf">offset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Objective.offset-1365"><a href="#Objective.offset-1365"><span class="linenos">1365</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_objective_offset</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Objective.model" class="classattr">
                                        <input id="Objective.model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">model</span><span class="annotation">: <a href="#Model">Model</a></span>

                <label class="view-source-button" for="Objective.model-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.model"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.model-1371"><a href="#Objective.model-1371"><span class="linenos">1371</span></a>    <span class="nd">@property</span>
</span><span id="Objective.model-1372"><a href="#Objective.model-1372"><span class="linenos">1372</span></a>    <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Model&quot;</span><span class="p">:</span>
</span><span id="Objective.model-1373"><a href="#Objective.model-1373"><span class="linenos">1373</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
</span></pre></div>


    

                            </div>
                            <div id="Objective.set_linear_coefficient" class="classattr">
                                        <input id="Objective.set_linear_coefficient-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_linear_coefficient</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">variable</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span>,</span><span class="param">	<span class="n">coef</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Objective.set_linear_coefficient-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.set_linear_coefficient"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.set_linear_coefficient-1375"><a href="#Objective.set_linear_coefficient-1375"><span class="linenos">1375</span></a>    <span class="k">def</span> <span class="nf">set_linear_coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">coef</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective.set_linear_coefficient-1376"><a href="#Objective.set_linear_coefficient-1376"><span class="linenos">1376</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="Objective.set_linear_coefficient-1377"><a href="#Objective.set_linear_coefficient-1377"><span class="linenos">1377</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_linear_objective_coefficient</span><span class="p">(</span><span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">coef</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Objective.get_linear_coefficient" class="classattr">
                                        <input id="Objective.get_linear_coefficient-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_linear_coefficient</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">variable</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span></span><span class="return-annotation">) -> <span class="nb">float</span>:</span></span>

                <label class="view-source-button" for="Objective.get_linear_coefficient-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.get_linear_coefficient"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.get_linear_coefficient-1379"><a href="#Objective.get_linear_coefficient-1379"><span class="linenos">1379</span></a>    <span class="k">def</span> <span class="nf">get_linear_coefficient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Objective.get_linear_coefficient-1380"><a href="#Objective.get_linear_coefficient-1380"><span class="linenos">1380</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="Objective.get_linear_coefficient-1381"><a href="#Objective.get_linear_coefficient-1381"><span class="linenos">1381</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_objective_coefficient</span><span class="p">(</span><span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Objective.linear_terms" class="classattr">
                                        <input id="Objective.linear_terms-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">linear_terms</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterator</span><span class="p">[</span><span class="n"><a href="#LinearTerm">LinearTerm</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Objective.linear_terms-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.linear_terms"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.linear_terms-1383"><a href="#Objective.linear_terms-1383"><span class="linenos">1383</span></a>    <span class="k">def</span> <span class="nf">linear_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearTerm</span><span class="p">]:</span>
</span><span id="Objective.linear_terms-1384"><a href="#Objective.linear_terms-1384"><span class="linenos">1384</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields variable coefficient pairs for variables with nonzero objective coefficient in undefined order.&quot;&quot;&quot;</span>
</span><span id="Objective.linear_terms-1385"><a href="#Objective.linear_terms-1385"><span class="linenos">1385</span></a>        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">linear_objective_terms</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Yields variable coefficient pairs for variables with nonzero objective coefficient in undefined order.</p>
</div>


                            </div>
                            <div id="Objective.add" class="classattr">
                                        <input id="Objective.add-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">objective</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">,</span> <span class="n"><a href="#QuadraticBase">QuadraticBase</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Objective.add-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.add"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.add-1387"><a href="#Objective.add-1387"><span class="linenos">1387</span></a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective.add-1388"><a href="#Objective.add-1388"><span class="linenos">1388</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds the provided expression `objective` to the objective function.</span>
</span><span id="Objective.add-1389"><a href="#Objective.add-1389"><span class="linenos">1389</span></a>
</span><span id="Objective.add-1390"><a href="#Objective.add-1390"><span class="linenos">1390</span></a><span class="sd">        To ensure the objective remains linear through type checks, use</span>
</span><span id="Objective.add-1391"><a href="#Objective.add-1391"><span class="linenos">1391</span></a><span class="sd">        add_linear().</span>
</span><span id="Objective.add-1392"><a href="#Objective.add-1392"><span class="linenos">1392</span></a>
</span><span id="Objective.add-1393"><a href="#Objective.add-1393"><span class="linenos">1393</span></a><span class="sd">        Args:</span>
</span><span id="Objective.add-1394"><a href="#Objective.add-1394"><span class="linenos">1394</span></a><span class="sd">          objective: the expression to add to the objective function.</span>
</span><span id="Objective.add-1395"><a href="#Objective.add-1395"><span class="linenos">1395</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Objective.add-1396"><a href="#Objective.add-1396"><span class="linenos">1396</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Objective.add-1397"><a href="#Objective.add-1397"><span class="linenos">1397</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">add_linear</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="Objective.add-1398"><a href="#Objective.add-1398"><span class="linenos">1398</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="Objective.add-1399"><a href="#Objective.add-1399"><span class="linenos">1399</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">add_quadratic</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="Objective.add-1400"><a href="#Objective.add-1400"><span class="linenos">1400</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Objective.add-1401"><a href="#Objective.add-1401"><span class="linenos">1401</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="Objective.add-1402"><a href="#Objective.add-1402"><span class="linenos">1402</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="Objective.add-1403"><a href="#Objective.add-1403"><span class="linenos">1403</span></a>                <span class="sa">f</span><span class="s2">&quot;Objective.add(): </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="Objective.add-1404"><a href="#Objective.add-1404"><span class="linenos">1404</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Adds the provided expression <code>objective</code> to the objective function.</p>

<p>To ensure the objective remains linear through type checks, use
add_linear().</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>objective:</strong>  the expression to add to the objective function.</li>
</ul>
</div>


                            </div>
                            <div id="Objective.add_linear" class="classattr">
                                        <input id="Objective.add_linear-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_linear</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">objective</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Objective.add_linear-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.add_linear"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.add_linear-1406"><a href="#Objective.add_linear-1406"><span class="linenos">1406</span></a>    <span class="k">def</span> <span class="nf">add_linear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective.add_linear-1407"><a href="#Objective.add_linear-1407"><span class="linenos">1407</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds the provided linear expression `objective` to the objective function.&quot;&quot;&quot;</span>
</span><span id="Objective.add_linear-1408"><a href="#Objective.add_linear-1408"><span class="linenos">1408</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Objective.add_linear-1409"><a href="#Objective.add_linear-1409"><span class="linenos">1409</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="Objective.add_linear-1410"><a href="#Objective.add_linear-1410"><span class="linenos">1410</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="Objective.add_linear-1411"><a href="#Objective.add_linear-1411"><span class="linenos">1411</span></a>                <span class="sa">f</span><span class="s2">&quot;Objective.add_linear(): </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="Objective.add_linear-1412"><a href="#Objective.add_linear-1412"><span class="linenos">1412</span></a>            <span class="p">)</span>
</span><span id="Objective.add_linear-1413"><a href="#Objective.add_linear-1413"><span class="linenos">1413</span></a>        <span class="n">objective_expr</span> <span class="o">=</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="Objective.add_linear-1414"><a href="#Objective.add_linear-1414"><span class="linenos">1414</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="Objective.add_linear-1415"><a href="#Objective.add_linear-1415"><span class="linenos">1415</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Objective.add_linear-1416"><a href="#Objective.add_linear-1416"><span class="linenos">1416</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_coefficient</span><span class="p">(</span>
</span><span id="Objective.add_linear-1417"><a href="#Objective.add_linear-1417"><span class="linenos">1417</span></a>                <span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_linear_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">+</span> <span class="n">coefficient</span>
</span><span id="Objective.add_linear-1418"><a href="#Objective.add_linear-1418"><span class="linenos">1418</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Adds the provided linear expression <code>objective</code> to the objective function.</p>
</div>


                            </div>
                            <div id="Objective.add_quadratic" class="classattr">
                                        <input id="Objective.add_quadratic-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_quadratic</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">objective</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">,</span> <span class="n"><a href="#QuadraticBase">QuadraticBase</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Objective.add_quadratic-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.add_quadratic"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.add_quadratic-1420"><a href="#Objective.add_quadratic-1420"><span class="linenos">1420</span></a>    <span class="k">def</span> <span class="nf">add_quadratic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective.add_quadratic-1421"><a href="#Objective.add_quadratic-1421"><span class="linenos">1421</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds the provided quadratic expression `objective` to the objective function.&quot;&quot;&quot;</span>
</span><span id="Objective.add_quadratic-1422"><a href="#Objective.add_quadratic-1422"><span class="linenos">1422</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">QuadraticBase</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Objective.add_quadratic-1423"><a href="#Objective.add_quadratic-1423"><span class="linenos">1423</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="Objective.add_quadratic-1424"><a href="#Objective.add_quadratic-1424"><span class="linenos">1424</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="Objective.add_quadratic-1425"><a href="#Objective.add_quadratic-1425"><span class="linenos">1425</span></a>                <span class="sa">f</span><span class="s2">&quot;Objective.add(): </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="Objective.add_quadratic-1426"><a href="#Objective.add_quadratic-1426"><span class="linenos">1426</span></a>            <span class="p">)</span>
</span><span id="Objective.add_quadratic-1427"><a href="#Objective.add_quadratic-1427"><span class="linenos">1427</span></a>        <span class="n">objective_expr</span> <span class="o">=</span> <span class="n">as_flat_quadratic_expression</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="Objective.add_quadratic-1428"><a href="#Objective.add_quadratic-1428"><span class="linenos">1428</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="Objective.add_quadratic-1429"><a href="#Objective.add_quadratic-1429"><span class="linenos">1429</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">linear_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Objective.add_quadratic-1430"><a href="#Objective.add_quadratic-1430"><span class="linenos">1430</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_coefficient</span><span class="p">(</span>
</span><span id="Objective.add_quadratic-1431"><a href="#Objective.add_quadratic-1431"><span class="linenos">1431</span></a>                <span class="n">var</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_linear_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">)</span> <span class="o">+</span> <span class="n">coefficient</span>
</span><span id="Objective.add_quadratic-1432"><a href="#Objective.add_quadratic-1432"><span class="linenos">1432</span></a>            <span class="p">)</span>
</span><span id="Objective.add_quadratic-1433"><a href="#Objective.add_quadratic-1433"><span class="linenos">1433</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Objective.add_quadratic-1434"><a href="#Objective.add_quadratic-1434"><span class="linenos">1434</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_quadratic_coefficient</span><span class="p">(</span>
</span><span id="Objective.add_quadratic-1435"><a href="#Objective.add_quadratic-1435"><span class="linenos">1435</span></a>                <span class="n">key</span><span class="o">.</span><span class="n">first_var</span><span class="p">,</span>
</span><span id="Objective.add_quadratic-1436"><a href="#Objective.add_quadratic-1436"><span class="linenos">1436</span></a>                <span class="n">key</span><span class="o">.</span><span class="n">second_var</span><span class="p">,</span>
</span><span id="Objective.add_quadratic-1437"><a href="#Objective.add_quadratic-1437"><span class="linenos">1437</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">get_quadratic_coefficient</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">first_var</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">second_var</span><span class="p">)</span>
</span><span id="Objective.add_quadratic-1438"><a href="#Objective.add_quadratic-1438"><span class="linenos">1438</span></a>                <span class="o">+</span> <span class="n">coefficient</span><span class="p">,</span>
</span><span id="Objective.add_quadratic-1439"><a href="#Objective.add_quadratic-1439"><span class="linenos">1439</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Adds the provided quadratic expression <code>objective</code> to the objective function.</p>
</div>


                            </div>
                            <div id="Objective.set_quadratic_coefficient" class="classattr">
                                        <input id="Objective.set_quadratic_coefficient-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_quadratic_coefficient</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">first_variable</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span>,</span><span class="param">	<span class="n">second_variable</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span>,</span><span class="param">	<span class="n">coef</span><span class="p">:</span> <span class="nb">float</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Objective.set_quadratic_coefficient-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.set_quadratic_coefficient"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.set_quadratic_coefficient-1441"><a href="#Objective.set_quadratic_coefficient-1441"><span class="linenos">1441</span></a>    <span class="k">def</span> <span class="nf">set_quadratic_coefficient</span><span class="p">(</span>
</span><span id="Objective.set_quadratic_coefficient-1442"><a href="#Objective.set_quadratic_coefficient-1442"><span class="linenos">1442</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">first_variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">second_variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">coef</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="Objective.set_quadratic_coefficient-1443"><a href="#Objective.set_quadratic_coefficient-1443"><span class="linenos">1443</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective.set_quadratic_coefficient-1444"><a href="#Objective.set_quadratic_coefficient-1444"><span class="linenos">1444</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">first_variable</span><span class="p">)</span>
</span><span id="Objective.set_quadratic_coefficient-1445"><a href="#Objective.set_quadratic_coefficient-1445"><span class="linenos">1445</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">second_variable</span><span class="p">)</span>
</span><span id="Objective.set_quadratic_coefficient-1446"><a href="#Objective.set_quadratic_coefficient-1446"><span class="linenos">1446</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">set_quadratic_objective_coefficient</span><span class="p">(</span>
</span><span id="Objective.set_quadratic_coefficient-1447"><a href="#Objective.set_quadratic_coefficient-1447"><span class="linenos">1447</span></a>            <span class="n">first_variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">second_variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">coef</span>
</span><span id="Objective.set_quadratic_coefficient-1448"><a href="#Objective.set_quadratic_coefficient-1448"><span class="linenos">1448</span></a>        <span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Objective.get_quadratic_coefficient" class="classattr">
                                        <input id="Objective.get_quadratic_coefficient-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_quadratic_coefficient</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">first_variable</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span>,</span><span class="param">	<span class="n">second_variable</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span></span><span class="return-annotation">) -> <span class="nb">float</span>:</span></span>

                <label class="view-source-button" for="Objective.get_quadratic_coefficient-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.get_quadratic_coefficient"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.get_quadratic_coefficient-1450"><a href="#Objective.get_quadratic_coefficient-1450"><span class="linenos">1450</span></a>    <span class="k">def</span> <span class="nf">get_quadratic_coefficient</span><span class="p">(</span>
</span><span id="Objective.get_quadratic_coefficient-1451"><a href="#Objective.get_quadratic_coefficient-1451"><span class="linenos">1451</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">first_variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">,</span> <span class="n">second_variable</span><span class="p">:</span> <span class="n">Variable</span>
</span><span id="Objective.get_quadratic_coefficient-1452"><a href="#Objective.get_quadratic_coefficient-1452"><span class="linenos">1452</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="Objective.get_quadratic_coefficient-1453"><a href="#Objective.get_quadratic_coefficient-1453"><span class="linenos">1453</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">first_variable</span><span class="p">)</span>
</span><span id="Objective.get_quadratic_coefficient-1454"><a href="#Objective.get_quadratic_coefficient-1454"><span class="linenos">1454</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">second_variable</span><span class="p">)</span>
</span><span id="Objective.get_quadratic_coefficient-1455"><a href="#Objective.get_quadratic_coefficient-1455"><span class="linenos">1455</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_quadratic_objective_coefficient</span><span class="p">(</span>
</span><span id="Objective.get_quadratic_coefficient-1456"><a href="#Objective.get_quadratic_coefficient-1456"><span class="linenos">1456</span></a>            <span class="n">first_variable</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">second_variable</span><span class="o">.</span><span class="n">id</span>
</span><span id="Objective.get_quadratic_coefficient-1457"><a href="#Objective.get_quadratic_coefficient-1457"><span class="linenos">1457</span></a>        <span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Objective.quadratic_terms" class="classattr">
                                        <input id="Objective.quadratic_terms-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">quadratic_terms</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterator</span><span class="p">[</span><span class="n"><a href="#QuadraticTerm">QuadraticTerm</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Objective.quadratic_terms-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.quadratic_terms"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.quadratic_terms-1459"><a href="#Objective.quadratic_terms-1459"><span class="linenos">1459</span></a>    <span class="k">def</span> <span class="nf">quadratic_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">QuadraticTerm</span><span class="p">]:</span>
</span><span id="Objective.quadratic_terms-1460"><a href="#Objective.quadratic_terms-1460"><span class="linenos">1460</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields quadratic terms with nonzero objective coefficient in undefined order.&quot;&quot;&quot;</span>
</span><span id="Objective.quadratic_terms-1461"><a href="#Objective.quadratic_terms-1461"><span class="linenos">1461</span></a>        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">quadratic_objective_terms</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Yields quadratic terms with nonzero objective coefficient in undefined order.</p>
</div>


                            </div>
                            <div id="Objective.as_linear_expression" class="classattr">
                                        <input id="Objective.as_linear_expression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">as_linear_expression</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#LinearExpression">LinearExpression</a></span>:</span></span>

                <label class="view-source-button" for="Objective.as_linear_expression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.as_linear_expression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.as_linear_expression-1463"><a href="#Objective.as_linear_expression-1463"><span class="linenos">1463</span></a>    <span class="k">def</span> <span class="nf">as_linear_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearExpression</span><span class="p">:</span>
</span><span id="Objective.as_linear_expression-1464"><a href="#Objective.as_linear_expression-1464"><span class="linenos">1464</span></a>        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">()):</span>
</span><span id="Objective.as_linear_expression-1465"><a href="#Objective.as_linear_expression-1465"><span class="linenos">1465</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Cannot get a quadratic objective as a linear expression&quot;</span><span class="p">)</span>
</span><span id="Objective.as_linear_expression-1466"><a href="#Objective.as_linear_expression-1466"><span class="linenos">1466</span></a>        <span class="k">return</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">offset</span> <span class="o">+</span> <span class="n">LinearSum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linear_terms</span><span class="p">()))</span>
</span></pre></div>


    

                            </div>
                            <div id="Objective.as_quadratic_expression" class="classattr">
                                        <input id="Objective.as_quadratic_expression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">as_quadratic_expression</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#QuadraticExpression">QuadraticExpression</a></span>:</span></span>

                <label class="view-source-button" for="Objective.as_quadratic_expression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.as_quadratic_expression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.as_quadratic_expression-1468"><a href="#Objective.as_quadratic_expression-1468"><span class="linenos">1468</span></a>    <span class="k">def</span> <span class="nf">as_quadratic_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QuadraticExpression</span><span class="p">:</span>
</span><span id="Objective.as_quadratic_expression-1469"><a href="#Objective.as_quadratic_expression-1469"><span class="linenos">1469</span></a>        <span class="k">return</span> <span class="n">as_flat_quadratic_expression</span><span class="p">(</span>
</span><span id="Objective.as_quadratic_expression-1470"><a href="#Objective.as_quadratic_expression-1470"><span class="linenos">1470</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">offset</span>
</span><span id="Objective.as_quadratic_expression-1471"><a href="#Objective.as_quadratic_expression-1471"><span class="linenos">1471</span></a>            <span class="o">+</span> <span class="n">LinearSum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linear_terms</span><span class="p">())</span>
</span><span id="Objective.as_quadratic_expression-1472"><a href="#Objective.as_quadratic_expression-1472"><span class="linenos">1472</span></a>            <span class="o">+</span> <span class="n">QuadraticSum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">())</span>
</span><span id="Objective.as_quadratic_expression-1473"><a href="#Objective.as_quadratic_expression-1473"><span class="linenos">1473</span></a>        <span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Objective.clear" class="classattr">
                                        <input id="Objective.clear-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">clear</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Objective.clear-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Objective.clear"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Objective.clear-1475"><a href="#Objective.clear-1475"><span class="linenos">1475</span></a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Objective.clear-1476"><a href="#Objective.clear-1476"><span class="linenos">1476</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clears objective coefficients and offset. Does not change direction.&quot;&quot;&quot;</span>
</span><span id="Objective.clear-1477"><a href="#Objective.clear-1477"><span class="linenos">1477</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">clear_objective</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Clears objective coefficients and offset. Does not change direction.</p>
</div>


                            </div>
                </section>
                <section id="LinearConstraintMatrixEntry">
                            <input id="LinearConstraintMatrixEntry-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LinearConstraintMatrixEntry</span><wbr>(<span class="base">typing.NamedTuple</span>):

                <label class="view-source-button" for="LinearConstraintMatrixEntry-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearConstraintMatrixEntry"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearConstraintMatrixEntry-1480"><a href="#LinearConstraintMatrixEntry-1480"><span class="linenos">1480</span></a><span class="k">class</span> <span class="nc">LinearConstraintMatrixEntry</span><span class="p">(</span><span class="n">NamedTuple</span><span class="p">):</span>
</span><span id="LinearConstraintMatrixEntry-1481"><a href="#LinearConstraintMatrixEntry-1481"><span class="linenos">1481</span></a>    <span class="n">linear_constraint</span><span class="p">:</span> <span class="n">LinearConstraint</span>
</span><span id="LinearConstraintMatrixEntry-1482"><a href="#LinearConstraintMatrixEntry-1482"><span class="linenos">1482</span></a>    <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span>
</span><span id="LinearConstraintMatrixEntry-1483"><a href="#LinearConstraintMatrixEntry-1483"><span class="linenos">1483</span></a>    <span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span>
</span></pre></div>


            <div class="docstring"><p>LinearConstraintMatrixEntry(linear_constraint, variable, coefficient)</p>
</div>


                            <div id="LinearConstraintMatrixEntry.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">LinearConstraintMatrixEntry</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">linear_constraint</span><span class="p">:</span> <span class="n"><a href="#LinearConstraint">LinearConstraint</a></span>,</span><span class="param">	<span class="n">variable</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span>,</span><span class="param">	<span class="n">coefficient</span><span class="p">:</span> <span class="nb">float</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#LinearConstraintMatrixEntry.__init__"></a>
    
            <div class="docstring"><p>Create new instance of LinearConstraintMatrixEntry(linear_constraint, variable, coefficient)</p>
</div>


                            </div>
                            <div id="LinearConstraintMatrixEntry.linear_constraint" class="classattr">
                                <div class="attr variable">
            <span class="name">linear_constraint</span><span class="annotation">: <a href="#LinearConstraint">LinearConstraint</a></span>

        
    </div>
    <a class="headerlink" href="#LinearConstraintMatrixEntry.linear_constraint"></a>
    
            <div class="docstring"><p>Alias for field number 0</p>
</div>


                            </div>
                            <div id="LinearConstraintMatrixEntry.variable" class="classattr">
                                <div class="attr variable">
            <span class="name">variable</span><span class="annotation">: <a href="#Variable">Variable</a></span>

        
    </div>
    <a class="headerlink" href="#LinearConstraintMatrixEntry.variable"></a>
    
            <div class="docstring"><p>Alias for field number 1</p>
</div>


                            </div>
                            <div id="LinearConstraintMatrixEntry.coefficient" class="classattr">
                                <div class="attr variable">
            <span class="name">coefficient</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#LinearConstraintMatrixEntry.coefficient"></a>
    
            <div class="docstring"><p>Alias for field number 2</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.tuple</dt>
                                <dd id="LinearConstraintMatrixEntry.index" class="function">index</dd>
                <dd id="LinearConstraintMatrixEntry.count" class="function">count</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="UpdateTracker">
                            <input id="UpdateTracker-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">UpdateTracker</span>:

                <label class="view-source-button" for="UpdateTracker-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UpdateTracker"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UpdateTracker-1486"><a href="#UpdateTracker-1486"><span class="linenos">1486</span></a><span class="k">class</span> <span class="nc">UpdateTracker</span><span class="p">:</span>
</span><span id="UpdateTracker-1487"><a href="#UpdateTracker-1487"><span class="linenos">1487</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Tracks updates to an optimization model from a ModelStorage.</span>
</span><span id="UpdateTracker-1488"><a href="#UpdateTracker-1488"><span class="linenos">1488</span></a>
</span><span id="UpdateTracker-1489"><a href="#UpdateTracker-1489"><span class="linenos">1489</span></a><span class="sd">    Do not instantiate directly, instead create through</span>
</span><span id="UpdateTracker-1490"><a href="#UpdateTracker-1490"><span class="linenos">1490</span></a><span class="sd">    ModelStorage.add_update_tracker().</span>
</span><span id="UpdateTracker-1491"><a href="#UpdateTracker-1491"><span class="linenos">1491</span></a>
</span><span id="UpdateTracker-1492"><a href="#UpdateTracker-1492"><span class="linenos">1492</span></a><span class="sd">    Querying an UpdateTracker after calling Model.remove_update_tracker will</span>
</span><span id="UpdateTracker-1493"><a href="#UpdateTracker-1493"><span class="linenos">1493</span></a><span class="sd">    result in a model_storage.UsedUpdateTrackerAfterRemovalError.</span>
</span><span id="UpdateTracker-1494"><a href="#UpdateTracker-1494"><span class="linenos">1494</span></a>
</span><span id="UpdateTracker-1495"><a href="#UpdateTracker-1495"><span class="linenos">1495</span></a><span class="sd">    Example:</span>
</span><span id="UpdateTracker-1496"><a href="#UpdateTracker-1496"><span class="linenos">1496</span></a><span class="sd">      mod = Model()</span>
</span><span id="UpdateTracker-1497"><a href="#UpdateTracker-1497"><span class="linenos">1497</span></a><span class="sd">      x = mod.add_variable(0.0, 1.0, True, &#39;x&#39;)</span>
</span><span id="UpdateTracker-1498"><a href="#UpdateTracker-1498"><span class="linenos">1498</span></a><span class="sd">      y = mod.add_variable(0.0, 1.0, True, &#39;y&#39;)</span>
</span><span id="UpdateTracker-1499"><a href="#UpdateTracker-1499"><span class="linenos">1499</span></a><span class="sd">      tracker = mod.add_update_tracker()</span>
</span><span id="UpdateTracker-1500"><a href="#UpdateTracker-1500"><span class="linenos">1500</span></a><span class="sd">      mod.set_variable_ub(x, 3.0)</span>
</span><span id="UpdateTracker-1501"><a href="#UpdateTracker-1501"><span class="linenos">1501</span></a><span class="sd">      tracker.export_update()</span>
</span><span id="UpdateTracker-1502"><a href="#UpdateTracker-1502"><span class="linenos">1502</span></a><span class="sd">        =&gt; &quot;variable_updates: {upper_bounds: {ids: [0], values[3.0] }&quot;</span>
</span><span id="UpdateTracker-1503"><a href="#UpdateTracker-1503"><span class="linenos">1503</span></a><span class="sd">      mod.set_variable_ub(y, 2.0)</span>
</span><span id="UpdateTracker-1504"><a href="#UpdateTracker-1504"><span class="linenos">1504</span></a><span class="sd">      tracker.export_update()</span>
</span><span id="UpdateTracker-1505"><a href="#UpdateTracker-1505"><span class="linenos">1505</span></a><span class="sd">        =&gt; &quot;variable_updates: {upper_bounds: {ids: [0, 1], values[3.0, 2.0] }&quot;</span>
</span><span id="UpdateTracker-1506"><a href="#UpdateTracker-1506"><span class="linenos">1506</span></a><span class="sd">      tracker.advance_checkpoint()</span>
</span><span id="UpdateTracker-1507"><a href="#UpdateTracker-1507"><span class="linenos">1507</span></a><span class="sd">      tracker.export_update()</span>
</span><span id="UpdateTracker-1508"><a href="#UpdateTracker-1508"><span class="linenos">1508</span></a><span class="sd">        =&gt; None</span>
</span><span id="UpdateTracker-1509"><a href="#UpdateTracker-1509"><span class="linenos">1509</span></a><span class="sd">      mod.set_variable_ub(y, 4.0)</span>
</span><span id="UpdateTracker-1510"><a href="#UpdateTracker-1510"><span class="linenos">1510</span></a><span class="sd">      tracker.export_update()</span>
</span><span id="UpdateTracker-1511"><a href="#UpdateTracker-1511"><span class="linenos">1511</span></a><span class="sd">        =&gt; &quot;variable_updates: {upper_bounds: {ids: [1], values[4.0] }&quot;</span>
</span><span id="UpdateTracker-1512"><a href="#UpdateTracker-1512"><span class="linenos">1512</span></a><span class="sd">      tracker.advance_checkpoint()</span>
</span><span id="UpdateTracker-1513"><a href="#UpdateTracker-1513"><span class="linenos">1513</span></a><span class="sd">      mod.remove_update_tracker(tracker)</span>
</span><span id="UpdateTracker-1514"><a href="#UpdateTracker-1514"><span class="linenos">1514</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="UpdateTracker-1515"><a href="#UpdateTracker-1515"><span class="linenos">1515</span></a>
</span><span id="UpdateTracker-1516"><a href="#UpdateTracker-1516"><span class="linenos">1516</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_update_tracker</span><span class="p">:</span> <span class="n">model_storage</span><span class="o">.</span><span class="n">StorageUpdateTracker</span><span class="p">):</span>
</span><span id="UpdateTracker-1517"><a href="#UpdateTracker-1517"><span class="linenos">1517</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do not invoke directly, use Model.add_update_tracker() instead.&quot;&quot;&quot;</span>
</span><span id="UpdateTracker-1518"><a href="#UpdateTracker-1518"><span class="linenos">1518</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage_update_tracker</span> <span class="o">=</span> <span class="n">storage_update_tracker</span>
</span><span id="UpdateTracker-1519"><a href="#UpdateTracker-1519"><span class="linenos">1519</span></a>
</span><span id="UpdateTracker-1520"><a href="#UpdateTracker-1520"><span class="linenos">1520</span></a>    <span class="k">def</span> <span class="nf">export_update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">model_update_pb2</span><span class="o">.</span><span class="n">ModelUpdateProto</span><span class="p">]:</span>
</span><span id="UpdateTracker-1521"><a href="#UpdateTracker-1521"><span class="linenos">1521</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns changes to the model since last call to checkpoint/creation.&quot;&quot;&quot;</span>
</span><span id="UpdateTracker-1522"><a href="#UpdateTracker-1522"><span class="linenos">1522</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_update_tracker</span><span class="o">.</span><span class="n">export_update</span><span class="p">()</span>
</span><span id="UpdateTracker-1523"><a href="#UpdateTracker-1523"><span class="linenos">1523</span></a>
</span><span id="UpdateTracker-1524"><a href="#UpdateTracker-1524"><span class="linenos">1524</span></a>    <span class="k">def</span> <span class="nf">advance_checkpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="UpdateTracker-1525"><a href="#UpdateTracker-1525"><span class="linenos">1525</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Track changes to the model only after this function call.&quot;&quot;&quot;</span>
</span><span id="UpdateTracker-1526"><a href="#UpdateTracker-1526"><span class="linenos">1526</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_update_tracker</span><span class="o">.</span><span class="n">advance_checkpoint</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Tracks updates to an optimization model from a ModelStorage.</p>

<p>Do not instantiate directly, instead create through
ModelStorage.add_update_tracker().</p>

<p>Querying an UpdateTracker after calling <a href="#Model.remove_update_tracker">Model.remove_update_tracker</a> will
result in a model_storage.UsedUpdateTrackerAfterRemovalError.</p>

<h6 id="example">Example:</h6>

<blockquote>
  <p>mod = Model()
  x = mod.add_variable(0.0, 1.0, True, 'x')
  y = mod.add_variable(0.0, 1.0, True, 'y')
  tracker = mod.add_update_tracker()
  mod.set_variable_ub(x, 3.0)
  tracker.export_update()
    =&gt; "variable_updates: {upper_bounds: {ids: [0], values[3.0] }"
  mod.set_variable_ub(y, 2.0)
  tracker.export_update()
    =&gt; "variable_updates: {upper_bounds: {ids: [0, 1], values[3.0, 2.0] }"
  tracker.advance_checkpoint()
  tracker.export_update()
    =&gt; None
  mod.set_variable_ub(y, 4.0)
  tracker.export_update()
    =&gt; "variable_updates: {upper_bounds: {ids: [1], values[4.0] }"
  tracker.advance_checkpoint()
  mod.remove_update_tracker(tracker)</p>
</blockquote>
</div>


                            <div id="UpdateTracker.__init__" class="classattr">
                                        <input id="UpdateTracker.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">UpdateTracker</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">storage_update_tracker</span><span class="p">:</span> <span class="n"><a href="model_storage.html#StorageUpdateTracker">ortools.math_opt.python.model_storage.StorageUpdateTracker</a></span></span>)</span>

                <label class="view-source-button" for="UpdateTracker.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UpdateTracker.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UpdateTracker.__init__-1516"><a href="#UpdateTracker.__init__-1516"><span class="linenos">1516</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_update_tracker</span><span class="p">:</span> <span class="n">model_storage</span><span class="o">.</span><span class="n">StorageUpdateTracker</span><span class="p">):</span>
</span><span id="UpdateTracker.__init__-1517"><a href="#UpdateTracker.__init__-1517"><span class="linenos">1517</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Do not invoke directly, use Model.add_update_tracker() instead.&quot;&quot;&quot;</span>
</span><span id="UpdateTracker.__init__-1518"><a href="#UpdateTracker.__init__-1518"><span class="linenos">1518</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage_update_tracker</span> <span class="o">=</span> <span class="n">storage_update_tracker</span>
</span></pre></div>


            <div class="docstring"><p>Do not invoke directly, use <a href="#Model.add_update_tracker">Model.add_update_tracker()</a> instead.</p>
</div>


                            </div>
                            <div id="UpdateTracker.storage_update_tracker" class="classattr">
                                <div class="attr variable">
            <span class="name">storage_update_tracker</span>

        
    </div>
    <a class="headerlink" href="#UpdateTracker.storage_update_tracker"></a>
    
    

                            </div>
                            <div id="UpdateTracker.export_update" class="classattr">
                                        <input id="UpdateTracker.export_update-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">export_update</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="../model_update_pb2.html#ModelUpdateProto">ortools.math_opt.model_update_pb2.ModelUpdateProto</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="UpdateTracker.export_update-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UpdateTracker.export_update"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UpdateTracker.export_update-1520"><a href="#UpdateTracker.export_update-1520"><span class="linenos">1520</span></a>    <span class="k">def</span> <span class="nf">export_update</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">model_update_pb2</span><span class="o">.</span><span class="n">ModelUpdateProto</span><span class="p">]:</span>
</span><span id="UpdateTracker.export_update-1521"><a href="#UpdateTracker.export_update-1521"><span class="linenos">1521</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns changes to the model since last call to checkpoint/creation.&quot;&quot;&quot;</span>
</span><span id="UpdateTracker.export_update-1522"><a href="#UpdateTracker.export_update-1522"><span class="linenos">1522</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_update_tracker</span><span class="o">.</span><span class="n">export_update</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Returns changes to the model since last call to checkpoint/creation.</p>
</div>


                            </div>
                            <div id="UpdateTracker.advance_checkpoint" class="classattr">
                                        <input id="UpdateTracker.advance_checkpoint-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">advance_checkpoint</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="UpdateTracker.advance_checkpoint-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#UpdateTracker.advance_checkpoint"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="UpdateTracker.advance_checkpoint-1524"><a href="#UpdateTracker.advance_checkpoint-1524"><span class="linenos">1524</span></a>    <span class="k">def</span> <span class="nf">advance_checkpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="UpdateTracker.advance_checkpoint-1525"><a href="#UpdateTracker.advance_checkpoint-1525"><span class="linenos">1525</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Track changes to the model only after this function call.&quot;&quot;&quot;</span>
</span><span id="UpdateTracker.advance_checkpoint-1526"><a href="#UpdateTracker.advance_checkpoint-1526"><span class="linenos">1526</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage_update_tracker</span><span class="o">.</span><span class="n">advance_checkpoint</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Track changes to the model only after this function call.</p>
</div>


                            </div>
                </section>
                <section id="Model">
                            <input id="Model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Model</span>:

                <label class="view-source-button" for="Model-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model-1529"><a href="#Model-1529"><span class="linenos">1529</span></a><span class="k">class</span> <span class="nc">Model</span><span class="p">:</span>
</span><span id="Model-1530"><a href="#Model-1530"><span class="linenos">1530</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An optimization model.</span>
</span><span id="Model-1531"><a href="#Model-1531"><span class="linenos">1531</span></a>
</span><span id="Model-1532"><a href="#Model-1532"><span class="linenos">1532</span></a><span class="sd">    The objective function of the model can be linear or quadratic, and some</span>
</span><span id="Model-1533"><a href="#Model-1533"><span class="linenos">1533</span></a><span class="sd">    solvers can only handle linear objective functions. For this reason Model has</span>
</span><span id="Model-1534"><a href="#Model-1534"><span class="linenos">1534</span></a><span class="sd">    three versions of all objective setting functions:</span>
</span><span id="Model-1535"><a href="#Model-1535"><span class="linenos">1535</span></a><span class="sd">      * A generic one (e.g. maximize()), which accepts linear or quadratic</span>
</span><span id="Model-1536"><a href="#Model-1536"><span class="linenos">1536</span></a><span class="sd">        expressions,</span>
</span><span id="Model-1537"><a href="#Model-1537"><span class="linenos">1537</span></a><span class="sd">      * a quadratic version (e.g. maximize_quadratic_objective()), which also</span>
</span><span id="Model-1538"><a href="#Model-1538"><span class="linenos">1538</span></a><span class="sd">        accepts linear or quadratic expressions and can be used to signal a</span>
</span><span id="Model-1539"><a href="#Model-1539"><span class="linenos">1539</span></a><span class="sd">        quadratic objective is possible, and</span>
</span><span id="Model-1540"><a href="#Model-1540"><span class="linenos">1540</span></a><span class="sd">      * a linear version (e.g. maximize_linear_objective()), which only accepts</span>
</span><span id="Model-1541"><a href="#Model-1541"><span class="linenos">1541</span></a><span class="sd">        linear expressions and can be used to avoid solve time errors for solvers</span>
</span><span id="Model-1542"><a href="#Model-1542"><span class="linenos">1542</span></a><span class="sd">        that do not accept quadratic objectives.</span>
</span><span id="Model-1543"><a href="#Model-1543"><span class="linenos">1543</span></a>
</span><span id="Model-1544"><a href="#Model-1544"><span class="linenos">1544</span></a><span class="sd">    Attributes:</span>
</span><span id="Model-1545"><a href="#Model-1545"><span class="linenos">1545</span></a><span class="sd">      name: A description of the problem, can be empty.</span>
</span><span id="Model-1546"><a href="#Model-1546"><span class="linenos">1546</span></a><span class="sd">      objective: A function to maximize or minimize.</span>
</span><span id="Model-1547"><a href="#Model-1547"><span class="linenos">1547</span></a><span class="sd">      storage: Implementation detail, do not access directly.</span>
</span><span id="Model-1548"><a href="#Model-1548"><span class="linenos">1548</span></a><span class="sd">      _variable_ids: Maps variable ids to Variable objects.</span>
</span><span id="Model-1549"><a href="#Model-1549"><span class="linenos">1549</span></a><span class="sd">      _linear_constraint_ids: Maps linear constraint ids to LinearConstraint</span>
</span><span id="Model-1550"><a href="#Model-1550"><span class="linenos">1550</span></a><span class="sd">        objects.</span>
</span><span id="Model-1551"><a href="#Model-1551"><span class="linenos">1551</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Model-1552"><a href="#Model-1552"><span class="linenos">1552</span></a>
</span><span id="Model-1553"><a href="#Model-1553"><span class="linenos">1553</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;storage&quot;</span><span class="p">,</span> <span class="s2">&quot;_variable_ids&quot;</span><span class="p">,</span> <span class="s2">&quot;_linear_constraint_ids&quot;</span><span class="p">,</span> <span class="s2">&quot;_objective&quot;</span>
</span><span id="Model-1554"><a href="#Model-1554"><span class="linenos">1554</span></a>
</span><span id="Model-1555"><a href="#Model-1555"><span class="linenos">1555</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="Model-1556"><a href="#Model-1556"><span class="linenos">1556</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Model-1557"><a href="#Model-1557"><span class="linenos">1557</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Model-1558"><a href="#Model-1558"><span class="linenos">1558</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Model-1559"><a href="#Model-1559"><span class="linenos">1559</span></a>        <span class="n">storage_class</span><span class="p">:</span> <span class="n">StorageClass</span> <span class="o">=</span> <span class="n">hash_model_storage</span><span class="o">.</span><span class="n">HashModelStorage</span><span class="p">,</span>
</span><span id="Model-1560"><a href="#Model-1560"><span class="linenos">1560</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model-1561"><a href="#Model-1561"><span class="linenos">1561</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span> <span class="o">=</span> <span class="n">storage_class</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Model-1562"><a href="#Model-1562"><span class="linenos">1562</span></a>        <span class="c1"># Weak references are used to eliminate reference cycles (so that Model will</span>
</span><span id="Model-1563"><a href="#Model-1563"><span class="linenos">1563</span></a>        <span class="c1"># be destroyed when we reach zero references, instead of relying on GC cycle</span>
</span><span id="Model-1564"><a href="#Model-1564"><span class="linenos">1564</span></a>        <span class="c1"># detection). Do not access a variable or constraint from these maps</span>
</span><span id="Model-1565"><a href="#Model-1565"><span class="linenos">1565</span></a>        <span class="c1"># directly, as they may no longer exist, use _get_or_make_variable() and</span>
</span><span id="Model-1566"><a href="#Model-1566"><span class="linenos">1566</span></a>        <span class="c1"># _get_or_make_linear_constraint() defined below instead.</span>
</span><span id="Model-1567"><a href="#Model-1567"><span class="linenos">1567</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_variable_ids</span><span class="p">:</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakValueDictionary</span><span class="p">[</span>
</span><span id="Model-1568"><a href="#Model-1568"><span class="linenos">1568</span></a>            <span class="nb">int</span><span class="p">,</span> <span class="n">Variable</span>
</span><span id="Model-1569"><a href="#Model-1569"><span class="linenos">1569</span></a>        <span class="p">]</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakValueDictionary</span><span class="p">()</span>
</span><span id="Model-1570"><a href="#Model-1570"><span class="linenos">1570</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_linear_constraint_ids</span><span class="p">:</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakValueDictionary</span><span class="p">[</span>
</span><span id="Model-1571"><a href="#Model-1571"><span class="linenos">1571</span></a>            <span class="nb">int</span><span class="p">,</span> <span class="n">LinearConstraint</span>
</span><span id="Model-1572"><a href="#Model-1572"><span class="linenos">1572</span></a>        <span class="p">]</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakValueDictionary</span><span class="p">()</span>
</span><span id="Model-1573"><a href="#Model-1573"><span class="linenos">1573</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="p">:</span> <span class="n">Objective</span> <span class="o">=</span> <span class="n">Objective</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Model-1574"><a href="#Model-1574"><span class="linenos">1574</span></a>
</span><span id="Model-1575"><a href="#Model-1575"><span class="linenos">1575</span></a>    <span class="nd">@property</span>
</span><span id="Model-1576"><a href="#Model-1576"><span class="linenos">1576</span></a>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Model-1577"><a href="#Model-1577"><span class="linenos">1577</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">name</span>
</span><span id="Model-1578"><a href="#Model-1578"><span class="linenos">1578</span></a>
</span><span id="Model-1579"><a href="#Model-1579"><span class="linenos">1579</span></a>    <span class="nd">@property</span>
</span><span id="Model-1580"><a href="#Model-1580"><span class="linenos">1580</span></a>    <span class="k">def</span> <span class="nf">objective</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Objective</span><span class="p">:</span>
</span><span id="Model-1581"><a href="#Model-1581"><span class="linenos">1581</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span>
</span><span id="Model-1582"><a href="#Model-1582"><span class="linenos">1582</span></a>
</span><span id="Model-1583"><a href="#Model-1583"><span class="linenos">1583</span></a>    <span class="k">def</span> <span class="nf">add_variable</span><span class="p">(</span>
</span><span id="Model-1584"><a href="#Model-1584"><span class="linenos">1584</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Model-1585"><a href="#Model-1585"><span class="linenos">1585</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Model-1586"><a href="#Model-1586"><span class="linenos">1586</span></a>        <span class="n">lb</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span>
</span><span id="Model-1587"><a href="#Model-1587"><span class="linenos">1587</span></a>        <span class="n">ub</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span>
</span><span id="Model-1588"><a href="#Model-1588"><span class="linenos">1588</span></a>        <span class="n">is_integer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Model-1589"><a href="#Model-1589"><span class="linenos">1589</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Model-1590"><a href="#Model-1590"><span class="linenos">1590</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="Model-1591"><a href="#Model-1591"><span class="linenos">1591</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a decision variable to the optimization model.</span>
</span><span id="Model-1592"><a href="#Model-1592"><span class="linenos">1592</span></a>
</span><span id="Model-1593"><a href="#Model-1593"><span class="linenos">1593</span></a><span class="sd">        Args:</span>
</span><span id="Model-1594"><a href="#Model-1594"><span class="linenos">1594</span></a><span class="sd">          lb: The new variable must take at least this value (a lower bound).</span>
</span><span id="Model-1595"><a href="#Model-1595"><span class="linenos">1595</span></a><span class="sd">          ub: The new variable must be at most this value (an upper bound).</span>
</span><span id="Model-1596"><a href="#Model-1596"><span class="linenos">1596</span></a><span class="sd">          is_integer: Indicates if the variable can only take integer values</span>
</span><span id="Model-1597"><a href="#Model-1597"><span class="linenos">1597</span></a><span class="sd">            (otherwise, the variable can take any continuous value).</span>
</span><span id="Model-1598"><a href="#Model-1598"><span class="linenos">1598</span></a><span class="sd">          name: For debugging purposes only, but nonempty names must be distinct.</span>
</span><span id="Model-1599"><a href="#Model-1599"><span class="linenos">1599</span></a>
</span><span id="Model-1600"><a href="#Model-1600"><span class="linenos">1600</span></a><span class="sd">        Returns:</span>
</span><span id="Model-1601"><a href="#Model-1601"><span class="linenos">1601</span></a><span class="sd">          A reference to the new decision variable.</span>
</span><span id="Model-1602"><a href="#Model-1602"><span class="linenos">1602</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Model-1603"><a href="#Model-1603"><span class="linenos">1603</span></a>        <span class="n">variable_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">is_integer</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="Model-1604"><a href="#Model-1604"><span class="linenos">1604</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">Variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_id</span><span class="p">)</span>
</span><span id="Model-1605"><a href="#Model-1605"><span class="linenos">1605</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_variable_ids</span><span class="p">[</span><span class="n">variable_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="Model-1606"><a href="#Model-1606"><span class="linenos">1606</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="Model-1607"><a href="#Model-1607"><span class="linenos">1607</span></a>
</span><span id="Model-1608"><a href="#Model-1608"><span class="linenos">1608</span></a>    <span class="k">def</span> <span class="nf">add_integer_variable</span><span class="p">(</span>
</span><span id="Model-1609"><a href="#Model-1609"><span class="linenos">1609</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">lb</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">ub</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="Model-1610"><a href="#Model-1610"><span class="linenos">1610</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="Model-1611"><a href="#Model-1611"><span class="linenos">1611</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">is_integer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</span><span id="Model-1612"><a href="#Model-1612"><span class="linenos">1612</span></a>
</span><span id="Model-1613"><a href="#Model-1613"><span class="linenos">1613</span></a>    <span class="k">def</span> <span class="nf">add_binary_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="Model-1614"><a href="#Model-1614"><span class="linenos">1614</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="n">lb</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">is_integer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</span><span id="Model-1615"><a href="#Model-1615"><span class="linenos">1615</span></a>
</span><span id="Model-1616"><a href="#Model-1616"><span class="linenos">1616</span></a>    <span class="k">def</span> <span class="nf">get_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="Model-1617"><a href="#Model-1617"><span class="linenos">1617</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the Variable for the id var_id, or raises KeyError.&quot;&quot;&quot;</span>
</span><span id="Model-1618"><a href="#Model-1618"><span class="linenos">1618</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">variable_exists</span><span class="p">(</span><span class="n">var_id</span><span class="p">):</span>
</span><span id="Model-1619"><a href="#Model-1619"><span class="linenos">1619</span></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;variable does not exist with id </span><span class="si">{</span><span class="n">var_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Model-1620"><a href="#Model-1620"><span class="linenos">1620</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">var_id</span><span class="p">)</span>
</span><span id="Model-1621"><a href="#Model-1621"><span class="linenos">1621</span></a>
</span><span id="Model-1622"><a href="#Model-1622"><span class="linenos">1622</span></a>    <span class="k">def</span> <span class="nf">delete_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model-1623"><a href="#Model-1623"><span class="linenos">1623</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="Model-1624"><a href="#Model-1624"><span class="linenos">1624</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">delete_variable</span><span class="p">(</span><span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Model-1625"><a href="#Model-1625"><span class="linenos">1625</span></a>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_variable_ids</span><span class="p">[</span><span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="Model-1626"><a href="#Model-1626"><span class="linenos">1626</span></a>
</span><span id="Model-1627"><a href="#Model-1627"><span class="linenos">1627</span></a>    <span class="k">def</span> <span class="nf">variables</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Variable</span><span class="p">]:</span>
</span><span id="Model-1628"><a href="#Model-1628"><span class="linenos">1628</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the variables in the order of creation.&quot;&quot;&quot;</span>
</span><span id="Model-1629"><a href="#Model-1629"><span class="linenos">1629</span></a>        <span class="k">for</span> <span class="n">var_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variables</span><span class="p">():</span>
</span><span id="Model-1630"><a href="#Model-1630"><span class="linenos">1630</span></a>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">var_id</span><span class="p">)</span>
</span><span id="Model-1631"><a href="#Model-1631"><span class="linenos">1631</span></a>
</span><span id="Model-1632"><a href="#Model-1632"><span class="linenos">1632</span></a>    <span class="k">def</span> <span class="nf">maximize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model-1633"><a href="#Model-1633"><span class="linenos">1633</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to maximize the provided expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model-1634"><a href="#Model-1634"><span class="linenos">1634</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Model-1635"><a href="#Model-1635"><span class="linenos">1635</span></a>
</span><span id="Model-1636"><a href="#Model-1636"><span class="linenos">1636</span></a>    <span class="k">def</span> <span class="nf">maximize_linear_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model-1637"><a href="#Model-1637"><span class="linenos">1637</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to maximize the provided linear expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model-1638"><a href="#Model-1638"><span class="linenos">1638</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Model-1639"><a href="#Model-1639"><span class="linenos">1639</span></a>
</span><span id="Model-1640"><a href="#Model-1640"><span class="linenos">1640</span></a>    <span class="k">def</span> <span class="nf">maximize_quadratic_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model-1641"><a href="#Model-1641"><span class="linenos">1641</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to maximize the provided quadratic expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model-1642"><a href="#Model-1642"><span class="linenos">1642</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_quadratic_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Model-1643"><a href="#Model-1643"><span class="linenos">1643</span></a>
</span><span id="Model-1644"><a href="#Model-1644"><span class="linenos">1644</span></a>    <span class="k">def</span> <span class="nf">minimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model-1645"><a href="#Model-1645"><span class="linenos">1645</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to minimize the provided expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model-1646"><a href="#Model-1646"><span class="linenos">1646</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Model-1647"><a href="#Model-1647"><span class="linenos">1647</span></a>
</span><span id="Model-1648"><a href="#Model-1648"><span class="linenos">1648</span></a>    <span class="k">def</span> <span class="nf">minimize_linear_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model-1649"><a href="#Model-1649"><span class="linenos">1649</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to minimize the provided linear expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model-1650"><a href="#Model-1650"><span class="linenos">1650</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Model-1651"><a href="#Model-1651"><span class="linenos">1651</span></a>
</span><span id="Model-1652"><a href="#Model-1652"><span class="linenos">1652</span></a>    <span class="k">def</span> <span class="nf">minimize_quadratic_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model-1653"><a href="#Model-1653"><span class="linenos">1653</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to minimize the provided quadratic expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model-1654"><a href="#Model-1654"><span class="linenos">1654</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_quadratic_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Model-1655"><a href="#Model-1655"><span class="linenos">1655</span></a>
</span><span id="Model-1656"><a href="#Model-1656"><span class="linenos">1656</span></a>    <span class="k">def</span> <span class="nf">set_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">is_maximize</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model-1657"><a href="#Model-1657"><span class="linenos">1657</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to optimize the provided expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model-1658"><a href="#Model-1658"><span class="linenos">1658</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Model-1659"><a href="#Model-1659"><span class="linenos">1659</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="n">is_maximize</span><span class="p">)</span>
</span><span id="Model-1660"><a href="#Model-1660"><span class="linenos">1660</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="Model-1661"><a href="#Model-1661"><span class="linenos">1661</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_quadratic_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="n">is_maximize</span><span class="p">)</span>
</span><span id="Model-1662"><a href="#Model-1662"><span class="linenos">1662</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Model-1663"><a href="#Model-1663"><span class="linenos">1663</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="Model-1664"><a href="#Model-1664"><span class="linenos">1664</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="Model-1665"><a href="#Model-1665"><span class="linenos">1665</span></a>                <span class="sa">f</span><span class="s2">&quot;set_objective: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="Model-1666"><a href="#Model-1666"><span class="linenos">1666</span></a>            <span class="p">)</span>
</span><span id="Model-1667"><a href="#Model-1667"><span class="linenos">1667</span></a>
</span><span id="Model-1668"><a href="#Model-1668"><span class="linenos">1668</span></a>    <span class="k">def</span> <span class="nf">set_linear_objective</span><span class="p">(</span>
</span><span id="Model-1669"><a href="#Model-1669"><span class="linenos">1669</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">is_maximize</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="Model-1670"><a href="#Model-1670"><span class="linenos">1670</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model-1671"><a href="#Model-1671"><span class="linenos">1671</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to optimize the provided linear expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model-1672"><a href="#Model-1672"><span class="linenos">1672</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Model-1673"><a href="#Model-1673"><span class="linenos">1673</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="Model-1674"><a href="#Model-1674"><span class="linenos">1674</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="Model-1675"><a href="#Model-1675"><span class="linenos">1675</span></a>                <span class="sa">f</span><span class="s2">&quot;set_linear_objective: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="Model-1676"><a href="#Model-1676"><span class="linenos">1676</span></a>            <span class="p">)</span>
</span><span id="Model-1677"><a href="#Model-1677"><span class="linenos">1677</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">clear_objective</span><span class="p">()</span>
</span><span id="Model-1678"><a href="#Model-1678"><span class="linenos">1678</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">is_maximize</span> <span class="o">=</span> <span class="n">is_maximize</span>
</span><span id="Model-1679"><a href="#Model-1679"><span class="linenos">1679</span></a>        <span class="n">objective_expr</span> <span class="o">=</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="Model-1680"><a href="#Model-1680"><span class="linenos">1680</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="Model-1681"><a href="#Model-1681"><span class="linenos">1681</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Model-1682"><a href="#Model-1682"><span class="linenos">1682</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">set_linear_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">)</span>
</span><span id="Model-1683"><a href="#Model-1683"><span class="linenos">1683</span></a>
</span><span id="Model-1684"><a href="#Model-1684"><span class="linenos">1684</span></a>    <span class="k">def</span> <span class="nf">set_quadratic_objective</span><span class="p">(</span>
</span><span id="Model-1685"><a href="#Model-1685"><span class="linenos">1685</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">is_maximize</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="Model-1686"><a href="#Model-1686"><span class="linenos">1686</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model-1687"><a href="#Model-1687"><span class="linenos">1687</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to optimize the provided linear expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model-1688"><a href="#Model-1688"><span class="linenos">1688</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">QuadraticBase</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Model-1689"><a href="#Model-1689"><span class="linenos">1689</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="Model-1690"><a href="#Model-1690"><span class="linenos">1690</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="Model-1691"><a href="#Model-1691"><span class="linenos">1691</span></a>                <span class="sa">f</span><span class="s2">&quot;set_quadratic_objective: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="Model-1692"><a href="#Model-1692"><span class="linenos">1692</span></a>            <span class="p">)</span>
</span><span id="Model-1693"><a href="#Model-1693"><span class="linenos">1693</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">clear_objective</span><span class="p">()</span>
</span><span id="Model-1694"><a href="#Model-1694"><span class="linenos">1694</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">is_maximize</span> <span class="o">=</span> <span class="n">is_maximize</span>
</span><span id="Model-1695"><a href="#Model-1695"><span class="linenos">1695</span></a>        <span class="n">objective_expr</span> <span class="o">=</span> <span class="n">as_flat_quadratic_expression</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="Model-1696"><a href="#Model-1696"><span class="linenos">1696</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="Model-1697"><a href="#Model-1697"><span class="linenos">1697</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">linear_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Model-1698"><a href="#Model-1698"><span class="linenos">1698</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">set_linear_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">)</span>
</span><span id="Model-1699"><a href="#Model-1699"><span class="linenos">1699</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Model-1700"><a href="#Model-1700"><span class="linenos">1700</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">set_quadratic_coefficient</span><span class="p">(</span>
</span><span id="Model-1701"><a href="#Model-1701"><span class="linenos">1701</span></a>                <span class="n">key</span><span class="o">.</span><span class="n">first_var</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">second_var</span><span class="p">,</span> <span class="n">coefficient</span>
</span><span id="Model-1702"><a href="#Model-1702"><span class="linenos">1702</span></a>            <span class="p">)</span>
</span><span id="Model-1703"><a href="#Model-1703"><span class="linenos">1703</span></a>
</span><span id="Model-1704"><a href="#Model-1704"><span class="linenos">1704</span></a>    <span class="c1"># TODO(b/227214976): Update the note below and link to pytype bug number.</span>
</span><span id="Model-1705"><a href="#Model-1705"><span class="linenos">1705</span></a>    <span class="c1"># Note: bounded_expr&#39;s type includes bool only as a workaround to a pytype</span>
</span><span id="Model-1706"><a href="#Model-1706"><span class="linenos">1706</span></a>    <span class="c1"># issue. Passing a bool for bounded_expr will raise an error in runtime.</span>
</span><span id="Model-1707"><a href="#Model-1707"><span class="linenos">1707</span></a>    <span class="k">def</span> <span class="nf">add_linear_constraint</span><span class="p">(</span>
</span><span id="Model-1708"><a href="#Model-1708"><span class="linenos">1708</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Model-1709"><a href="#Model-1709"><span class="linenos">1709</span></a>        <span class="n">bounded_expr</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">BoundedLinearTypes</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Model-1710"><a href="#Model-1710"><span class="linenos">1710</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Model-1711"><a href="#Model-1711"><span class="linenos">1711</span></a>        <span class="n">lb</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Model-1712"><a href="#Model-1712"><span class="linenos">1712</span></a>        <span class="n">ub</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Model-1713"><a href="#Model-1713"><span class="linenos">1713</span></a>        <span class="n">expr</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">LinearTypes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Model-1714"><a href="#Model-1714"><span class="linenos">1714</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Model-1715"><a href="#Model-1715"><span class="linenos">1715</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearConstraint</span><span class="p">:</span>
</span><span id="Model-1716"><a href="#Model-1716"><span class="linenos">1716</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a linear constraint to the optimization model.</span>
</span><span id="Model-1717"><a href="#Model-1717"><span class="linenos">1717</span></a>
</span><span id="Model-1718"><a href="#Model-1718"><span class="linenos">1718</span></a><span class="sd">        The simplest way to specify the constraint is by passing a one-sided or</span>
</span><span id="Model-1719"><a href="#Model-1719"><span class="linenos">1719</span></a><span class="sd">        two-sided linear inequality as in:</span>
</span><span id="Model-1720"><a href="#Model-1720"><span class="linenos">1720</span></a><span class="sd">          * add_linear_constraint(x + y + 1.0 &lt;= 2.0),</span>
</span><span id="Model-1721"><a href="#Model-1721"><span class="linenos">1721</span></a><span class="sd">          * add_linear_constraint(x + y &gt;= 2.0), or</span>
</span><span id="Model-1722"><a href="#Model-1722"><span class="linenos">1722</span></a><span class="sd">          * add_linear_constraint((1.0 &lt;= x + y) &lt;= 2.0).</span>
</span><span id="Model-1723"><a href="#Model-1723"><span class="linenos">1723</span></a>
</span><span id="Model-1724"><a href="#Model-1724"><span class="linenos">1724</span></a><span class="sd">        Note the extra parenthesis for two-sided linear inequalities, which is</span>
</span><span id="Model-1725"><a href="#Model-1725"><span class="linenos">1725</span></a><span class="sd">        required due to some language limitations (see</span>
</span><span id="Model-1726"><a href="#Model-1726"><span class="linenos">1726</span></a><span class="sd">        https://peps.python.org/pep-0335/ and https://peps.python.org/pep-0535/).</span>
</span><span id="Model-1727"><a href="#Model-1727"><span class="linenos">1727</span></a><span class="sd">        If the parenthesis are omitted, a TypeError will be raised explaining the</span>
</span><span id="Model-1728"><a href="#Model-1728"><span class="linenos">1728</span></a><span class="sd">        issue (if this error was not raised the first inequality would have been</span>
</span><span id="Model-1729"><a href="#Model-1729"><span class="linenos">1729</span></a><span class="sd">        silently ignored because of the noted language limitations).</span>
</span><span id="Model-1730"><a href="#Model-1730"><span class="linenos">1730</span></a>
</span><span id="Model-1731"><a href="#Model-1731"><span class="linenos">1731</span></a><span class="sd">        The second way to specify the constraint is by setting lb, ub, and/o expr as</span>
</span><span id="Model-1732"><a href="#Model-1732"><span class="linenos">1732</span></a><span class="sd">        in:</span>
</span><span id="Model-1733"><a href="#Model-1733"><span class="linenos">1733</span></a><span class="sd">          * add_linear_constraint(expr=x + y + 1.0, ub=2.0),</span>
</span><span id="Model-1734"><a href="#Model-1734"><span class="linenos">1734</span></a><span class="sd">          * add_linear_constraint(expr=x + y, lb=2.0),</span>
</span><span id="Model-1735"><a href="#Model-1735"><span class="linenos">1735</span></a><span class="sd">          * add_linear_constraint(expr=x + y, lb=1.0, ub=2.0), or</span>
</span><span id="Model-1736"><a href="#Model-1736"><span class="linenos">1736</span></a><span class="sd">          * add_linear_constraint(lb=1.0).</span>
</span><span id="Model-1737"><a href="#Model-1737"><span class="linenos">1737</span></a><span class="sd">        Omitting lb is equivalent to setting it to -math.inf and omiting ub is</span>
</span><span id="Model-1738"><a href="#Model-1738"><span class="linenos">1738</span></a><span class="sd">        equivalent to setting it to math.inf.</span>
</span><span id="Model-1739"><a href="#Model-1739"><span class="linenos">1739</span></a>
</span><span id="Model-1740"><a href="#Model-1740"><span class="linenos">1740</span></a><span class="sd">        These two alternatives are exclusive and a combined call like:</span>
</span><span id="Model-1741"><a href="#Model-1741"><span class="linenos">1741</span></a><span class="sd">          * add_linear_constraint(x + y &lt;= 2.0, lb=1.0), or</span>
</span><span id="Model-1742"><a href="#Model-1742"><span class="linenos">1742</span></a><span class="sd">          * add_linear_constraint(x + y &lt;= 2.0, ub=math.inf)</span>
</span><span id="Model-1743"><a href="#Model-1743"><span class="linenos">1743</span></a><span class="sd">        will raise a ValueError. A ValueError is also raised if expr&#39;s offset is</span>
</span><span id="Model-1744"><a href="#Model-1744"><span class="linenos">1744</span></a><span class="sd">        infinite.</span>
</span><span id="Model-1745"><a href="#Model-1745"><span class="linenos">1745</span></a>
</span><span id="Model-1746"><a href="#Model-1746"><span class="linenos">1746</span></a><span class="sd">        Args:</span>
</span><span id="Model-1747"><a href="#Model-1747"><span class="linenos">1747</span></a><span class="sd">          bounded_expr: a linear inequality describing the constraint. Cannot be</span>
</span><span id="Model-1748"><a href="#Model-1748"><span class="linenos">1748</span></a><span class="sd">            specified together with lb, ub, or expr.</span>
</span><span id="Model-1749"><a href="#Model-1749"><span class="linenos">1749</span></a><span class="sd">          lb: The constraint&#39;s lower bound if bounded_expr is omitted (if both</span>
</span><span id="Model-1750"><a href="#Model-1750"><span class="linenos">1750</span></a><span class="sd">            bounder_expr and lb are omitted, the lower bound is -math.inf).</span>
</span><span id="Model-1751"><a href="#Model-1751"><span class="linenos">1751</span></a><span class="sd">          ub: The constraint&#39;s upper bound if bounded_expr is omitted (if both</span>
</span><span id="Model-1752"><a href="#Model-1752"><span class="linenos">1752</span></a><span class="sd">            bounder_expr and ub are omitted, the upper bound is math.inf).</span>
</span><span id="Model-1753"><a href="#Model-1753"><span class="linenos">1753</span></a><span class="sd">          expr: The constraint&#39;s linear expression if bounded_expr is omitted.</span>
</span><span id="Model-1754"><a href="#Model-1754"><span class="linenos">1754</span></a><span class="sd">          name: For debugging purposes only, but nonempty names must be distinct.</span>
</span><span id="Model-1755"><a href="#Model-1755"><span class="linenos">1755</span></a>
</span><span id="Model-1756"><a href="#Model-1756"><span class="linenos">1756</span></a><span class="sd">        Returns:</span>
</span><span id="Model-1757"><a href="#Model-1757"><span class="linenos">1757</span></a><span class="sd">          A reference to the new linear constraint.</span>
</span><span id="Model-1758"><a href="#Model-1758"><span class="linenos">1758</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Model-1759"><a href="#Model-1759"><span class="linenos">1759</span></a>        <span class="n">normalized_inequality</span> <span class="o">=</span> <span class="n">as_normalized_linear_inequality</span><span class="p">(</span>
</span><span id="Model-1760"><a href="#Model-1760"><span class="linenos">1760</span></a>            <span class="n">bounded_expr</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="n">expr</span>
</span><span id="Model-1761"><a href="#Model-1761"><span class="linenos">1761</span></a>        <span class="p">)</span>
</span><span id="Model-1762"><a href="#Model-1762"><span class="linenos">1762</span></a>        <span class="n">lin_con_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">add_linear_constraint</span><span class="p">(</span>
</span><span id="Model-1763"><a href="#Model-1763"><span class="linenos">1763</span></a>            <span class="n">normalized_inequality</span><span class="o">.</span><span class="n">lb</span><span class="p">,</span> <span class="n">normalized_inequality</span><span class="o">.</span><span class="n">ub</span><span class="p">,</span> <span class="n">name</span>
</span><span id="Model-1764"><a href="#Model-1764"><span class="linenos">1764</span></a>        <span class="p">)</span>
</span><span id="Model-1765"><a href="#Model-1765"><span class="linenos">1765</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">LinearConstraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin_con_id</span><span class="p">)</span>
</span><span id="Model-1766"><a href="#Model-1766"><span class="linenos">1766</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_linear_constraint_ids</span><span class="p">[</span><span class="n">lin_con_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="Model-1767"><a href="#Model-1767"><span class="linenos">1767</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">normalized_inequality</span><span class="o">.</span><span class="n">coefficients</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Model-1768"><a href="#Model-1768"><span class="linenos">1768</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">set_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">)</span>
</span><span id="Model-1769"><a href="#Model-1769"><span class="linenos">1769</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="Model-1770"><a href="#Model-1770"><span class="linenos">1770</span></a>
</span><span id="Model-1771"><a href="#Model-1771"><span class="linenos">1771</span></a>    <span class="k">def</span> <span class="nf">get_linear_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin_con_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearConstraint</span><span class="p">:</span>
</span><span id="Model-1772"><a href="#Model-1772"><span class="linenos">1772</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the LinearConstraint for the id lin_con_id.&quot;&quot;&quot;</span>
</span><span id="Model-1773"><a href="#Model-1773"><span class="linenos">1773</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">linear_constraint_exists</span><span class="p">(</span><span class="n">lin_con_id</span><span class="p">):</span>
</span><span id="Model-1774"><a href="#Model-1774"><span class="linenos">1774</span></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;linear constraint does not exist with id </span><span class="si">{</span><span class="n">lin_con_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Model-1775"><a href="#Model-1775"><span class="linenos">1775</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_linear_constraint</span><span class="p">(</span><span class="n">lin_con_id</span><span class="p">)</span>
</span><span id="Model-1776"><a href="#Model-1776"><span class="linenos">1776</span></a>
</span><span id="Model-1777"><a href="#Model-1777"><span class="linenos">1777</span></a>    <span class="k">def</span> <span class="nf">delete_linear_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_constraint</span><span class="p">:</span> <span class="n">LinearConstraint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model-1778"><a href="#Model-1778"><span class="linenos">1778</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">linear_constraint</span><span class="p">)</span>
</span><span id="Model-1779"><a href="#Model-1779"><span class="linenos">1779</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">delete_linear_constraint</span><span class="p">(</span><span class="n">linear_constraint</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Model-1780"><a href="#Model-1780"><span class="linenos">1780</span></a>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear_constraint_ids</span><span class="p">[</span><span class="n">linear_constraint</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="Model-1781"><a href="#Model-1781"><span class="linenos">1781</span></a>
</span><span id="Model-1782"><a href="#Model-1782"><span class="linenos">1782</span></a>    <span class="k">def</span> <span class="nf">linear_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearConstraint</span><span class="p">]:</span>
</span><span id="Model-1783"><a href="#Model-1783"><span class="linenos">1783</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the linear constraints in the order of creation.&quot;&quot;&quot;</span>
</span><span id="Model-1784"><a href="#Model-1784"><span class="linenos">1784</span></a>        <span class="k">for</span> <span class="n">lin_con_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraints</span><span class="p">():</span>
</span><span id="Model-1785"><a href="#Model-1785"><span class="linenos">1785</span></a>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_linear_constraint</span><span class="p">(</span><span class="n">lin_con_id</span><span class="p">)</span>
</span><span id="Model-1786"><a href="#Model-1786"><span class="linenos">1786</span></a>
</span><span id="Model-1787"><a href="#Model-1787"><span class="linenos">1787</span></a>    <span class="k">def</span> <span class="nf">row_nonzeros</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_constraint</span><span class="p">:</span> <span class="n">LinearConstraint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Variable</span><span class="p">]:</span>
</span><span id="Model-1788"><a href="#Model-1788"><span class="linenos">1788</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the variables with nonzero coefficient for this linear constraint.&quot;&quot;&quot;</span>
</span><span id="Model-1789"><a href="#Model-1789"><span class="linenos">1789</span></a>        <span class="k">for</span> <span class="n">var_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variables_for_linear_constraint</span><span class="p">(</span>
</span><span id="Model-1790"><a href="#Model-1790"><span class="linenos">1790</span></a>            <span class="n">linear_constraint</span><span class="o">.</span><span class="n">id</span>
</span><span id="Model-1791"><a href="#Model-1791"><span class="linenos">1791</span></a>        <span class="p">):</span>
</span><span id="Model-1792"><a href="#Model-1792"><span class="linenos">1792</span></a>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">var_id</span><span class="p">)</span>
</span><span id="Model-1793"><a href="#Model-1793"><span class="linenos">1793</span></a>
</span><span id="Model-1794"><a href="#Model-1794"><span class="linenos">1794</span></a>    <span class="k">def</span> <span class="nf">column_nonzeros</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearConstraint</span><span class="p">]:</span>
</span><span id="Model-1795"><a href="#Model-1795"><span class="linenos">1795</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the linear constraints with nonzero coefficient for this variable.&quot;&quot;&quot;</span>
</span><span id="Model-1796"><a href="#Model-1796"><span class="linenos">1796</span></a>        <span class="k">for</span> <span class="n">lin_con_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraints_with_variable</span><span class="p">(</span>
</span><span id="Model-1797"><a href="#Model-1797"><span class="linenos">1797</span></a>            <span class="n">variable</span><span class="o">.</span><span class="n">id</span>
</span><span id="Model-1798"><a href="#Model-1798"><span class="linenos">1798</span></a>        <span class="p">):</span>
</span><span id="Model-1799"><a href="#Model-1799"><span class="linenos">1799</span></a>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_linear_constraint</span><span class="p">(</span><span class="n">lin_con_id</span><span class="p">)</span>
</span><span id="Model-1800"><a href="#Model-1800"><span class="linenos">1800</span></a>
</span><span id="Model-1801"><a href="#Model-1801"><span class="linenos">1801</span></a>    <span class="k">def</span> <span class="nf">linear_objective_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearTerm</span><span class="p">]:</span>
</span><span id="Model-1802"><a href="#Model-1802"><span class="linenos">1802</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields variable coefficient pairs for variables with nonzero objective coefficient in undefined order.&quot;&quot;&quot;</span>
</span><span id="Model-1803"><a href="#Model-1803"><span class="linenos">1803</span></a>        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_objective_coefficients</span><span class="p">():</span>
</span><span id="Model-1804"><a href="#Model-1804"><span class="linenos">1804</span></a>            <span class="k">yield</span> <span class="n">LinearTerm</span><span class="p">(</span>
</span><span id="Model-1805"><a href="#Model-1805"><span class="linenos">1805</span></a>                <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">variable_id</span><span class="p">),</span>
</span><span id="Model-1806"><a href="#Model-1806"><span class="linenos">1806</span></a>                <span class="n">coefficient</span><span class="o">=</span><span class="n">term</span><span class="o">.</span><span class="n">coefficient</span><span class="p">,</span>
</span><span id="Model-1807"><a href="#Model-1807"><span class="linenos">1807</span></a>            <span class="p">)</span>
</span><span id="Model-1808"><a href="#Model-1808"><span class="linenos">1808</span></a>
</span><span id="Model-1809"><a href="#Model-1809"><span class="linenos">1809</span></a>    <span class="k">def</span> <span class="nf">quadratic_objective_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">QuadraticTerm</span><span class="p">]:</span>
</span><span id="Model-1810"><a href="#Model-1810"><span class="linenos">1810</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the quadratic terms with nonzero objective coefficient in undefined order.&quot;&quot;&quot;</span>
</span><span id="Model-1811"><a href="#Model-1811"><span class="linenos">1811</span></a>        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_quadratic_objective_coefficients</span><span class="p">():</span>
</span><span id="Model-1812"><a href="#Model-1812"><span class="linenos">1812</span></a>            <span class="n">var1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">id_key</span><span class="o">.</span><span class="n">id1</span><span class="p">)</span>
</span><span id="Model-1813"><a href="#Model-1813"><span class="linenos">1813</span></a>            <span class="n">var2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">id_key</span><span class="o">.</span><span class="n">id2</span><span class="p">)</span>
</span><span id="Model-1814"><a href="#Model-1814"><span class="linenos">1814</span></a>            <span class="k">yield</span> <span class="n">QuadraticTerm</span><span class="p">(</span>
</span><span id="Model-1815"><a href="#Model-1815"><span class="linenos">1815</span></a>                <span class="n">key</span><span class="o">=</span><span class="n">QuadraticTermKey</span><span class="p">(</span><span class="n">var1</span><span class="p">,</span> <span class="n">var2</span><span class="p">),</span> <span class="n">coefficient</span><span class="o">=</span><span class="n">term</span><span class="o">.</span><span class="n">coefficient</span>
</span><span id="Model-1816"><a href="#Model-1816"><span class="linenos">1816</span></a>            <span class="p">)</span>
</span><span id="Model-1817"><a href="#Model-1817"><span class="linenos">1817</span></a>
</span><span id="Model-1818"><a href="#Model-1818"><span class="linenos">1818</span></a>    <span class="k">def</span> <span class="nf">linear_constraint_matrix_entries</span><span class="p">(</span>
</span><span id="Model-1819"><a href="#Model-1819"><span class="linenos">1819</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Model-1820"><a href="#Model-1820"><span class="linenos">1820</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearConstraintMatrixEntry</span><span class="p">]:</span>
</span><span id="Model-1821"><a href="#Model-1821"><span class="linenos">1821</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the nonzero elements of the linear constraint matrix in undefined order.&quot;&quot;&quot;</span>
</span><span id="Model-1822"><a href="#Model-1822"><span class="linenos">1822</span></a>        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_matrix_entries</span><span class="p">():</span>
</span><span id="Model-1823"><a href="#Model-1823"><span class="linenos">1823</span></a>            <span class="k">yield</span> <span class="n">LinearConstraintMatrixEntry</span><span class="p">(</span>
</span><span id="Model-1824"><a href="#Model-1824"><span class="linenos">1824</span></a>                <span class="n">linear_constraint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_linear_constraint</span><span class="p">(</span>
</span><span id="Model-1825"><a href="#Model-1825"><span class="linenos">1825</span></a>                    <span class="n">entry</span><span class="o">.</span><span class="n">linear_constraint_id</span>
</span><span id="Model-1826"><a href="#Model-1826"><span class="linenos">1826</span></a>                <span class="p">),</span>
</span><span id="Model-1827"><a href="#Model-1827"><span class="linenos">1827</span></a>                <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">variable_id</span><span class="p">),</span>
</span><span id="Model-1828"><a href="#Model-1828"><span class="linenos">1828</span></a>                <span class="n">coefficient</span><span class="o">=</span><span class="n">entry</span><span class="o">.</span><span class="n">coefficient</span><span class="p">,</span>
</span><span id="Model-1829"><a href="#Model-1829"><span class="linenos">1829</span></a>            <span class="p">)</span>
</span><span id="Model-1830"><a href="#Model-1830"><span class="linenos">1830</span></a>
</span><span id="Model-1831"><a href="#Model-1831"><span class="linenos">1831</span></a>    <span class="k">def</span> <span class="nf">export_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">model_pb2</span><span class="o">.</span><span class="n">ModelProto</span><span class="p">:</span>
</span><span id="Model-1832"><a href="#Model-1832"><span class="linenos">1832</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">export_model</span><span class="p">()</span>
</span><span id="Model-1833"><a href="#Model-1833"><span class="linenos">1833</span></a>
</span><span id="Model-1834"><a href="#Model-1834"><span class="linenos">1834</span></a>    <span class="k">def</span> <span class="nf">add_update_tracker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UpdateTracker</span><span class="p">:</span>
</span><span id="Model-1835"><a href="#Model-1835"><span class="linenos">1835</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates an UpdateTracker registered on this model to view changes.&quot;&quot;&quot;</span>
</span><span id="Model-1836"><a href="#Model-1836"><span class="linenos">1836</span></a>        <span class="k">return</span> <span class="n">UpdateTracker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">add_update_tracker</span><span class="p">())</span>
</span><span id="Model-1837"><a href="#Model-1837"><span class="linenos">1837</span></a>
</span><span id="Model-1838"><a href="#Model-1838"><span class="linenos">1838</span></a>    <span class="k">def</span> <span class="nf">remove_update_tracker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tracker</span><span class="p">:</span> <span class="n">UpdateTracker</span><span class="p">):</span>
</span><span id="Model-1839"><a href="#Model-1839"><span class="linenos">1839</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stops tracker from getting updates on changes to this model.</span>
</span><span id="Model-1840"><a href="#Model-1840"><span class="linenos">1840</span></a>
</span><span id="Model-1841"><a href="#Model-1841"><span class="linenos">1841</span></a><span class="sd">        An error will be raised if tracker was not created by this Model or if</span>
</span><span id="Model-1842"><a href="#Model-1842"><span class="linenos">1842</span></a><span class="sd">        tracker has been previously removed.</span>
</span><span id="Model-1843"><a href="#Model-1843"><span class="linenos">1843</span></a>
</span><span id="Model-1844"><a href="#Model-1844"><span class="linenos">1844</span></a><span class="sd">        Using (via checkpoint or update) an UpdateTracker after it has been removed</span>
</span><span id="Model-1845"><a href="#Model-1845"><span class="linenos">1845</span></a><span class="sd">        will result in an error.</span>
</span><span id="Model-1846"><a href="#Model-1846"><span class="linenos">1846</span></a>
</span><span id="Model-1847"><a href="#Model-1847"><span class="linenos">1847</span></a><span class="sd">        Args:</span>
</span><span id="Model-1848"><a href="#Model-1848"><span class="linenos">1848</span></a><span class="sd">          tracker: The UpdateTracker to unregister.</span>
</span><span id="Model-1849"><a href="#Model-1849"><span class="linenos">1849</span></a>
</span><span id="Model-1850"><a href="#Model-1850"><span class="linenos">1850</span></a><span class="sd">        Raises:</span>
</span><span id="Model-1851"><a href="#Model-1851"><span class="linenos">1851</span></a><span class="sd">          KeyError: The tracker was created by another model or was already removed.</span>
</span><span id="Model-1852"><a href="#Model-1852"><span class="linenos">1852</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Model-1853"><a href="#Model-1853"><span class="linenos">1853</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">remove_update_tracker</span><span class="p">(</span><span class="n">tracker</span><span class="o">.</span><span class="n">storage_update_tracker</span><span class="p">)</span>
</span><span id="Model-1854"><a href="#Model-1854"><span class="linenos">1854</span></a>
</span><span id="Model-1855"><a href="#Model-1855"><span class="linenos">1855</span></a>    <span class="k">def</span> <span class="nf">check_compatible</span><span class="p">(</span>
</span><span id="Model-1856"><a href="#Model-1856"><span class="linenos">1856</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">var_or_constraint</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="n">LinearConstraint</span><span class="p">]</span>
</span><span id="Model-1857"><a href="#Model-1857"><span class="linenos">1857</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model-1858"><a href="#Model-1858"><span class="linenos">1858</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Raises a ValueError if the model of var_or_constraint is not self.&quot;&quot;&quot;</span>
</span><span id="Model-1859"><a href="#Model-1859"><span class="linenos">1859</span></a>        <span class="k">if</span> <span class="n">var_or_constraint</span><span class="o">.</span><span class="n">model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span>
</span><span id="Model-1860"><a href="#Model-1860"><span class="linenos">1860</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Model-1861"><a href="#Model-1861"><span class="linenos">1861</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">var_or_constraint</span><span class="si">}</span><span class="s2"> is from model </span><span class="si">{</span><span class="n">var_or_constraint</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2"> and&quot;</span>
</span><span id="Model-1862"><a href="#Model-1862"><span class="linenos">1862</span></a>                <span class="sa">f</span><span class="s2">&quot; cannot be used with model </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Model-1863"><a href="#Model-1863"><span class="linenos">1863</span></a>            <span class="p">)</span>
</span><span id="Model-1864"><a href="#Model-1864"><span class="linenos">1864</span></a>
</span><span id="Model-1865"><a href="#Model-1865"><span class="linenos">1865</span></a>    <span class="k">def</span> <span class="nf">_get_or_make_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="Model-1866"><a href="#Model-1866"><span class="linenos">1866</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_variable_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">variable_id</span><span class="p">)</span>
</span><span id="Model-1867"><a href="#Model-1867"><span class="linenos">1867</span></a>        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
</span><span id="Model-1868"><a href="#Model-1868"><span class="linenos">1868</span></a>            <span class="k">return</span> <span class="n">result</span>
</span><span id="Model-1869"><a href="#Model-1869"><span class="linenos">1869</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">Variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_id</span><span class="p">)</span>
</span><span id="Model-1870"><a href="#Model-1870"><span class="linenos">1870</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_variable_ids</span><span class="p">[</span><span class="n">variable_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="Model-1871"><a href="#Model-1871"><span class="linenos">1871</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="Model-1872"><a href="#Model-1872"><span class="linenos">1872</span></a>
</span><span id="Model-1873"><a href="#Model-1873"><span class="linenos">1873</span></a>    <span class="k">def</span> <span class="nf">_get_or_make_linear_constraint</span><span class="p">(</span>
</span><span id="Model-1874"><a href="#Model-1874"><span class="linenos">1874</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">linear_constraint_id</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="Model-1875"><a href="#Model-1875"><span class="linenos">1875</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearConstraint</span><span class="p">:</span>
</span><span id="Model-1876"><a href="#Model-1876"><span class="linenos">1876</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear_constraint_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">linear_constraint_id</span><span class="p">)</span>
</span><span id="Model-1877"><a href="#Model-1877"><span class="linenos">1877</span></a>        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
</span><span id="Model-1878"><a href="#Model-1878"><span class="linenos">1878</span></a>            <span class="k">return</span> <span class="n">result</span>
</span><span id="Model-1879"><a href="#Model-1879"><span class="linenos">1879</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">LinearConstraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_constraint_id</span><span class="p">)</span>
</span><span id="Model-1880"><a href="#Model-1880"><span class="linenos">1880</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_linear_constraint_ids</span><span class="p">[</span><span class="n">linear_constraint_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="Model-1881"><a href="#Model-1881"><span class="linenos">1881</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>An optimization model.</p>

<p>The objective function of the model can be linear or quadratic, and some
solvers can only handle linear objective functions. For this reason Model has
three versions of all objective setting functions:</p>

<ul>
<li>A generic one (e.g. maximize()), which accepts linear or quadratic
expressions,</li>
<li>a quadratic version (e.g. maximize_quadratic_objective()), which also
accepts linear or quadratic expressions and can be used to signal a
quadratic objective is possible, and</li>
<li>a linear version (e.g. maximize_linear_objective()), which only accepts
linear expressions and can be used to avoid solve time errors for solvers
that do not accept quadratic objectives.</li>
</ul>

<h6 id="attributes">Attributes:</h6>

<ul>
<li><strong>name:</strong>  A description of the problem, can be empty.</li>
<li><strong>objective:</strong>  A function to maximize or minimize.</li>
<li><strong>storage:</strong>  Implementation detail, do not access directly.</li>
<li><strong>_variable_ids:</strong>  Maps variable ids to Variable objects.</li>
<li><strong>_linear_constraint_ids:</strong>  Maps linear constraint ids to LinearConstraint
objects.</li>
</ul>
</div>


                            <div id="Model.__init__" class="classattr">
                                        <input id="Model.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Model</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	storage_class: Type[~ModelStorageImpl] = &lt;class &#x27;<a href="hash_model_storage.html#HashModelStorage">ortools.math_opt.python.hash_model_storage.HashModelStorage</a>&#x27;&gt;</span>)</span>

                <label class="view-source-button" for="Model.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.__init__-1555"><a href="#Model.__init__-1555"><span class="linenos">1555</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="Model.__init__-1556"><a href="#Model.__init__-1556"><span class="linenos">1556</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Model.__init__-1557"><a href="#Model.__init__-1557"><span class="linenos">1557</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Model.__init__-1558"><a href="#Model.__init__-1558"><span class="linenos">1558</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Model.__init__-1559"><a href="#Model.__init__-1559"><span class="linenos">1559</span></a>        <span class="n">storage_class</span><span class="p">:</span> <span class="n">StorageClass</span> <span class="o">=</span> <span class="n">hash_model_storage</span><span class="o">.</span><span class="n">HashModelStorage</span><span class="p">,</span>
</span><span id="Model.__init__-1560"><a href="#Model.__init__-1560"><span class="linenos">1560</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model.__init__-1561"><a href="#Model.__init__-1561"><span class="linenos">1561</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span> <span class="o">=</span> <span class="n">storage_class</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Model.__init__-1562"><a href="#Model.__init__-1562"><span class="linenos">1562</span></a>        <span class="c1"># Weak references are used to eliminate reference cycles (so that Model will</span>
</span><span id="Model.__init__-1563"><a href="#Model.__init__-1563"><span class="linenos">1563</span></a>        <span class="c1"># be destroyed when we reach zero references, instead of relying on GC cycle</span>
</span><span id="Model.__init__-1564"><a href="#Model.__init__-1564"><span class="linenos">1564</span></a>        <span class="c1"># detection). Do not access a variable or constraint from these maps</span>
</span><span id="Model.__init__-1565"><a href="#Model.__init__-1565"><span class="linenos">1565</span></a>        <span class="c1"># directly, as they may no longer exist, use _get_or_make_variable() and</span>
</span><span id="Model.__init__-1566"><a href="#Model.__init__-1566"><span class="linenos">1566</span></a>        <span class="c1"># _get_or_make_linear_constraint() defined below instead.</span>
</span><span id="Model.__init__-1567"><a href="#Model.__init__-1567"><span class="linenos">1567</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_variable_ids</span><span class="p">:</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakValueDictionary</span><span class="p">[</span>
</span><span id="Model.__init__-1568"><a href="#Model.__init__-1568"><span class="linenos">1568</span></a>            <span class="nb">int</span><span class="p">,</span> <span class="n">Variable</span>
</span><span id="Model.__init__-1569"><a href="#Model.__init__-1569"><span class="linenos">1569</span></a>        <span class="p">]</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakValueDictionary</span><span class="p">()</span>
</span><span id="Model.__init__-1570"><a href="#Model.__init__-1570"><span class="linenos">1570</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_linear_constraint_ids</span><span class="p">:</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakValueDictionary</span><span class="p">[</span>
</span><span id="Model.__init__-1571"><a href="#Model.__init__-1571"><span class="linenos">1571</span></a>            <span class="nb">int</span><span class="p">,</span> <span class="n">LinearConstraint</span>
</span><span id="Model.__init__-1572"><a href="#Model.__init__-1572"><span class="linenos">1572</span></a>        <span class="p">]</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakValueDictionary</span><span class="p">()</span>
</span><span id="Model.__init__-1573"><a href="#Model.__init__-1573"><span class="linenos">1573</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="p">:</span> <span class="n">Objective</span> <span class="o">=</span> <span class="n">Objective</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Model.storage" class="classattr">
                                <div class="attr variable">
            <span class="name">storage</span><span class="annotation">: <a href="model_storage.html#ModelStorage">ortools.math_opt.python.model_storage.ModelStorage</a></span>

        
    </div>
    <a class="headerlink" href="#Model.storage"></a>
    
    

                            </div>
                            <div id="Model.name" class="classattr">
                                        <input id="Model.name-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

                <label class="view-source-button" for="Model.name-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.name"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.name-1575"><a href="#Model.name-1575"><span class="linenos">1575</span></a>    <span class="nd">@property</span>
</span><span id="Model.name-1576"><a href="#Model.name-1576"><span class="linenos">1576</span></a>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Model.name-1577"><a href="#Model.name-1577"><span class="linenos">1577</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">name</span>
</span></pre></div>


    

                            </div>
                            <div id="Model.objective" class="classattr">
                                        <input id="Model.objective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">objective</span><span class="annotation">: <a href="#Objective">Objective</a></span>

                <label class="view-source-button" for="Model.objective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.objective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.objective-1579"><a href="#Model.objective-1579"><span class="linenos">1579</span></a>    <span class="nd">@property</span>
</span><span id="Model.objective-1580"><a href="#Model.objective-1580"><span class="linenos">1580</span></a>    <span class="k">def</span> <span class="nf">objective</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Objective</span><span class="p">:</span>
</span><span id="Model.objective-1581"><a href="#Model.objective-1581"><span class="linenos">1581</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span>
</span></pre></div>


    

                            </div>
                            <div id="Model.add_variable" class="classattr">
                                        <input id="Model.add_variable-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_variable</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">lb</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="o">-</span><span class="n">inf</span>,</span><span class="param">	<span class="n">ub</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">inf</span>,</span><span class="param">	<span class="n">is_integer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">) -> <span class="n"><a href="#Variable">Variable</a></span>:</span></span>

                <label class="view-source-button" for="Model.add_variable-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.add_variable"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.add_variable-1583"><a href="#Model.add_variable-1583"><span class="linenos">1583</span></a>    <span class="k">def</span> <span class="nf">add_variable</span><span class="p">(</span>
</span><span id="Model.add_variable-1584"><a href="#Model.add_variable-1584"><span class="linenos">1584</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Model.add_variable-1585"><a href="#Model.add_variable-1585"><span class="linenos">1585</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Model.add_variable-1586"><a href="#Model.add_variable-1586"><span class="linenos">1586</span></a>        <span class="n">lb</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span>
</span><span id="Model.add_variable-1587"><a href="#Model.add_variable-1587"><span class="linenos">1587</span></a>        <span class="n">ub</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span>
</span><span id="Model.add_variable-1588"><a href="#Model.add_variable-1588"><span class="linenos">1588</span></a>        <span class="n">is_integer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Model.add_variable-1589"><a href="#Model.add_variable-1589"><span class="linenos">1589</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Model.add_variable-1590"><a href="#Model.add_variable-1590"><span class="linenos">1590</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="Model.add_variable-1591"><a href="#Model.add_variable-1591"><span class="linenos">1591</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a decision variable to the optimization model.</span>
</span><span id="Model.add_variable-1592"><a href="#Model.add_variable-1592"><span class="linenos">1592</span></a>
</span><span id="Model.add_variable-1593"><a href="#Model.add_variable-1593"><span class="linenos">1593</span></a><span class="sd">        Args:</span>
</span><span id="Model.add_variable-1594"><a href="#Model.add_variable-1594"><span class="linenos">1594</span></a><span class="sd">          lb: The new variable must take at least this value (a lower bound).</span>
</span><span id="Model.add_variable-1595"><a href="#Model.add_variable-1595"><span class="linenos">1595</span></a><span class="sd">          ub: The new variable must be at most this value (an upper bound).</span>
</span><span id="Model.add_variable-1596"><a href="#Model.add_variable-1596"><span class="linenos">1596</span></a><span class="sd">          is_integer: Indicates if the variable can only take integer values</span>
</span><span id="Model.add_variable-1597"><a href="#Model.add_variable-1597"><span class="linenos">1597</span></a><span class="sd">            (otherwise, the variable can take any continuous value).</span>
</span><span id="Model.add_variable-1598"><a href="#Model.add_variable-1598"><span class="linenos">1598</span></a><span class="sd">          name: For debugging purposes only, but nonempty names must be distinct.</span>
</span><span id="Model.add_variable-1599"><a href="#Model.add_variable-1599"><span class="linenos">1599</span></a>
</span><span id="Model.add_variable-1600"><a href="#Model.add_variable-1600"><span class="linenos">1600</span></a><span class="sd">        Returns:</span>
</span><span id="Model.add_variable-1601"><a href="#Model.add_variable-1601"><span class="linenos">1601</span></a><span class="sd">          A reference to the new decision variable.</span>
</span><span id="Model.add_variable-1602"><a href="#Model.add_variable-1602"><span class="linenos">1602</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Model.add_variable-1603"><a href="#Model.add_variable-1603"><span class="linenos">1603</span></a>        <span class="n">variable_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="p">,</span> <span class="n">is_integer</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</span><span id="Model.add_variable-1604"><a href="#Model.add_variable-1604"><span class="linenos">1604</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">Variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_id</span><span class="p">)</span>
</span><span id="Model.add_variable-1605"><a href="#Model.add_variable-1605"><span class="linenos">1605</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_variable_ids</span><span class="p">[</span><span class="n">variable_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="Model.add_variable-1606"><a href="#Model.add_variable-1606"><span class="linenos">1606</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Adds a decision variable to the optimization model.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>lb:</strong>  The new variable must take at least this value (a lower bound).</li>
<li><strong>ub:</strong>  The new variable must be at most this value (an upper bound).</li>
<li><strong>is_integer:</strong>  Indicates if the variable can only take integer values
(otherwise, the variable can take any continuous value).</li>
<li><strong>name:</strong>  For debugging purposes only, but nonempty names must be distinct.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>A reference to the new decision variable.</p>
</blockquote>
</div>


                            </div>
                            <div id="Model.add_integer_variable" class="classattr">
                                        <input id="Model.add_integer_variable-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_integer_variable</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">lb</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="o">-</span><span class="n">inf</span>,</span><span class="param">	<span class="n">ub</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">inf</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">) -> <span class="n"><a href="#Variable">Variable</a></span>:</span></span>

                <label class="view-source-button" for="Model.add_integer_variable-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.add_integer_variable"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.add_integer_variable-1608"><a href="#Model.add_integer_variable-1608"><span class="linenos">1608</span></a>    <span class="k">def</span> <span class="nf">add_integer_variable</span><span class="p">(</span>
</span><span id="Model.add_integer_variable-1609"><a href="#Model.add_integer_variable-1609"><span class="linenos">1609</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">lb</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">ub</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="Model.add_integer_variable-1610"><a href="#Model.add_integer_variable-1610"><span class="linenos">1610</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="Model.add_integer_variable-1611"><a href="#Model.add_integer_variable-1611"><span class="linenos">1611</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">is_integer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Model.add_binary_variable" class="classattr">
                                        <input id="Model.add_binary_variable-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_binary_variable</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">*</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">) -> <span class="n"><a href="#Variable">Variable</a></span>:</span></span>

                <label class="view-source-button" for="Model.add_binary_variable-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.add_binary_variable"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.add_binary_variable-1613"><a href="#Model.add_binary_variable-1613"><span class="linenos">1613</span></a>    <span class="k">def</span> <span class="nf">add_binary_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="Model.add_binary_variable-1614"><a href="#Model.add_binary_variable-1614"><span class="linenos">1614</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_variable</span><span class="p">(</span><span class="n">lb</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">is_integer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Model.get_variable" class="classattr">
                                        <input id="Model.get_variable-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_variable</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">var_id</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="n"><a href="#Variable">Variable</a></span>:</span></span>

                <label class="view-source-button" for="Model.get_variable-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.get_variable"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.get_variable-1616"><a href="#Model.get_variable-1616"><span class="linenos">1616</span></a>    <span class="k">def</span> <span class="nf">get_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">var_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Variable</span><span class="p">:</span>
</span><span id="Model.get_variable-1617"><a href="#Model.get_variable-1617"><span class="linenos">1617</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the Variable for the id var_id, or raises KeyError.&quot;&quot;&quot;</span>
</span><span id="Model.get_variable-1618"><a href="#Model.get_variable-1618"><span class="linenos">1618</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">variable_exists</span><span class="p">(</span><span class="n">var_id</span><span class="p">):</span>
</span><span id="Model.get_variable-1619"><a href="#Model.get_variable-1619"><span class="linenos">1619</span></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;variable does not exist with id </span><span class="si">{</span><span class="n">var_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Model.get_variable-1620"><a href="#Model.get_variable-1620"><span class="linenos">1620</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">var_id</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns the Variable for the id var_id, or raises KeyError.</p>
</div>


                            </div>
                            <div id="Model.delete_variable" class="classattr">
                                        <input id="Model.delete_variable-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delete_variable</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">variable</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Model.delete_variable-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.delete_variable"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.delete_variable-1622"><a href="#Model.delete_variable-1622"><span class="linenos">1622</span></a>    <span class="k">def</span> <span class="nf">delete_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model.delete_variable-1623"><a href="#Model.delete_variable-1623"><span class="linenos">1623</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
</span><span id="Model.delete_variable-1624"><a href="#Model.delete_variable-1624"><span class="linenos">1624</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">delete_variable</span><span class="p">(</span><span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Model.delete_variable-1625"><a href="#Model.delete_variable-1625"><span class="linenos">1625</span></a>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_variable_ids</span><span class="p">[</span><span class="n">variable</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span></pre></div>


    

                            </div>
                            <div id="Model.variables" class="classattr">
                                        <input id="Model.variables-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">variables</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterator</span><span class="p">[</span><span class="n"><a href="#Variable">Variable</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Model.variables-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.variables"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.variables-1627"><a href="#Model.variables-1627"><span class="linenos">1627</span></a>    <span class="k">def</span> <span class="nf">variables</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Variable</span><span class="p">]:</span>
</span><span id="Model.variables-1628"><a href="#Model.variables-1628"><span class="linenos">1628</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the variables in the order of creation.&quot;&quot;&quot;</span>
</span><span id="Model.variables-1629"><a href="#Model.variables-1629"><span class="linenos">1629</span></a>        <span class="k">for</span> <span class="n">var_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variables</span><span class="p">():</span>
</span><span id="Model.variables-1630"><a href="#Model.variables-1630"><span class="linenos">1630</span></a>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">var_id</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Yields the variables in the order of creation.</p>
</div>


                            </div>
                            <div id="Model.maximize" class="classattr">
                                        <input id="Model.maximize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">maximize</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">objective</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">,</span> <span class="n"><a href="#QuadraticBase">QuadraticBase</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Model.maximize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.maximize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.maximize-1632"><a href="#Model.maximize-1632"><span class="linenos">1632</span></a>    <span class="k">def</span> <span class="nf">maximize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model.maximize-1633"><a href="#Model.maximize-1633"><span class="linenos">1633</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to maximize the provided expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model.maximize-1634"><a href="#Model.maximize-1634"><span class="linenos">1634</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Sets the objective to maximize the provided expression <code><a href="#Model.objective">objective</a></code>.</p>
</div>


                            </div>
                            <div id="Model.maximize_linear_objective" class="classattr">
                                        <input id="Model.maximize_linear_objective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">maximize_linear_objective</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">objective</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Model.maximize_linear_objective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.maximize_linear_objective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.maximize_linear_objective-1636"><a href="#Model.maximize_linear_objective-1636"><span class="linenos">1636</span></a>    <span class="k">def</span> <span class="nf">maximize_linear_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model.maximize_linear_objective-1637"><a href="#Model.maximize_linear_objective-1637"><span class="linenos">1637</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to maximize the provided linear expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model.maximize_linear_objective-1638"><a href="#Model.maximize_linear_objective-1638"><span class="linenos">1638</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Sets the objective to maximize the provided linear expression <code><a href="#Model.objective">objective</a></code>.</p>
</div>


                            </div>
                            <div id="Model.maximize_quadratic_objective" class="classattr">
                                        <input id="Model.maximize_quadratic_objective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">maximize_quadratic_objective</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">objective</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">,</span> <span class="n"><a href="#QuadraticBase">QuadraticBase</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Model.maximize_quadratic_objective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.maximize_quadratic_objective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.maximize_quadratic_objective-1640"><a href="#Model.maximize_quadratic_objective-1640"><span class="linenos">1640</span></a>    <span class="k">def</span> <span class="nf">maximize_quadratic_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model.maximize_quadratic_objective-1641"><a href="#Model.maximize_quadratic_objective-1641"><span class="linenos">1641</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to maximize the provided quadratic expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model.maximize_quadratic_objective-1642"><a href="#Model.maximize_quadratic_objective-1642"><span class="linenos">1642</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_quadratic_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Sets the objective to maximize the provided quadratic expression <code><a href="#Model.objective">objective</a></code>.</p>
</div>


                            </div>
                            <div id="Model.minimize" class="classattr">
                                        <input id="Model.minimize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">minimize</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">objective</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">,</span> <span class="n"><a href="#QuadraticBase">QuadraticBase</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Model.minimize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.minimize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.minimize-1644"><a href="#Model.minimize-1644"><span class="linenos">1644</span></a>    <span class="k">def</span> <span class="nf">minimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model.minimize-1645"><a href="#Model.minimize-1645"><span class="linenos">1645</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to minimize the provided expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model.minimize-1646"><a href="#Model.minimize-1646"><span class="linenos">1646</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Sets the objective to minimize the provided expression <code><a href="#Model.objective">objective</a></code>.</p>
</div>


                            </div>
                            <div id="Model.minimize_linear_objective" class="classattr">
                                        <input id="Model.minimize_linear_objective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">minimize_linear_objective</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">objective</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Model.minimize_linear_objective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.minimize_linear_objective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.minimize_linear_objective-1648"><a href="#Model.minimize_linear_objective-1648"><span class="linenos">1648</span></a>    <span class="k">def</span> <span class="nf">minimize_linear_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model.minimize_linear_objective-1649"><a href="#Model.minimize_linear_objective-1649"><span class="linenos">1649</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to minimize the provided linear expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model.minimize_linear_objective-1650"><a href="#Model.minimize_linear_objective-1650"><span class="linenos">1650</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Sets the objective to minimize the provided linear expression <code><a href="#Model.objective">objective</a></code>.</p>
</div>


                            </div>
                            <div id="Model.minimize_quadratic_objective" class="classattr">
                                        <input id="Model.minimize_quadratic_objective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">minimize_quadratic_objective</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">objective</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">,</span> <span class="n"><a href="#QuadraticBase">QuadraticBase</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Model.minimize_quadratic_objective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.minimize_quadratic_objective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.minimize_quadratic_objective-1652"><a href="#Model.minimize_quadratic_objective-1652"><span class="linenos">1652</span></a>    <span class="k">def</span> <span class="nf">minimize_quadratic_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model.minimize_quadratic_objective-1653"><a href="#Model.minimize_quadratic_objective-1653"><span class="linenos">1653</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to minimize the provided quadratic expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model.minimize_quadratic_objective-1654"><a href="#Model.minimize_quadratic_objective-1654"><span class="linenos">1654</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_quadratic_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Sets the objective to minimize the provided quadratic expression <code><a href="#Model.objective">objective</a></code>.</p>
</div>


                            </div>
                            <div id="Model.set_objective" class="classattr">
                                        <input id="Model.set_objective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_objective</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">objective</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">,</span> <span class="n"><a href="#QuadraticBase">QuadraticBase</a></span><span class="p">]</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">is_maximize</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Model.set_objective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.set_objective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.set_objective-1656"><a href="#Model.set_objective-1656"><span class="linenos">1656</span></a>    <span class="k">def</span> <span class="nf">set_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">is_maximize</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model.set_objective-1657"><a href="#Model.set_objective-1657"><span class="linenos">1657</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to optimize the provided expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model.set_objective-1658"><a href="#Model.set_objective-1658"><span class="linenos">1658</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Model.set_objective-1659"><a href="#Model.set_objective-1659"><span class="linenos">1659</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_linear_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="n">is_maximize</span><span class="p">)</span>
</span><span id="Model.set_objective-1660"><a href="#Model.set_objective-1660"><span class="linenos">1660</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="Model.set_objective-1661"><a href="#Model.set_objective-1661"><span class="linenos">1661</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">set_quadratic_objective</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">is_maximize</span><span class="o">=</span><span class="n">is_maximize</span><span class="p">)</span>
</span><span id="Model.set_objective-1662"><a href="#Model.set_objective-1662"><span class="linenos">1662</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Model.set_objective-1663"><a href="#Model.set_objective-1663"><span class="linenos">1663</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="Model.set_objective-1664"><a href="#Model.set_objective-1664"><span class="linenos">1664</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="Model.set_objective-1665"><a href="#Model.set_objective-1665"><span class="linenos">1665</span></a>                <span class="sa">f</span><span class="s2">&quot;set_objective: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="Model.set_objective-1666"><a href="#Model.set_objective-1666"><span class="linenos">1666</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Sets the objective to optimize the provided expression <code><a href="#Model.objective">objective</a></code>.</p>
</div>


                            </div>
                            <div id="Model.set_linear_objective" class="classattr">
                                        <input id="Model.set_linear_objective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_linear_objective</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">objective</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">]</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">is_maximize</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Model.set_linear_objective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.set_linear_objective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.set_linear_objective-1668"><a href="#Model.set_linear_objective-1668"><span class="linenos">1668</span></a>    <span class="k">def</span> <span class="nf">set_linear_objective</span><span class="p">(</span>
</span><span id="Model.set_linear_objective-1669"><a href="#Model.set_linear_objective-1669"><span class="linenos">1669</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">is_maximize</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="Model.set_linear_objective-1670"><a href="#Model.set_linear_objective-1670"><span class="linenos">1670</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model.set_linear_objective-1671"><a href="#Model.set_linear_objective-1671"><span class="linenos">1671</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to optimize the provided linear expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model.set_linear_objective-1672"><a href="#Model.set_linear_objective-1672"><span class="linenos">1672</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Model.set_linear_objective-1673"><a href="#Model.set_linear_objective-1673"><span class="linenos">1673</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="Model.set_linear_objective-1674"><a href="#Model.set_linear_objective-1674"><span class="linenos">1674</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="Model.set_linear_objective-1675"><a href="#Model.set_linear_objective-1675"><span class="linenos">1675</span></a>                <span class="sa">f</span><span class="s2">&quot;set_linear_objective: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="Model.set_linear_objective-1676"><a href="#Model.set_linear_objective-1676"><span class="linenos">1676</span></a>            <span class="p">)</span>
</span><span id="Model.set_linear_objective-1677"><a href="#Model.set_linear_objective-1677"><span class="linenos">1677</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">clear_objective</span><span class="p">()</span>
</span><span id="Model.set_linear_objective-1678"><a href="#Model.set_linear_objective-1678"><span class="linenos">1678</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">is_maximize</span> <span class="o">=</span> <span class="n">is_maximize</span>
</span><span id="Model.set_linear_objective-1679"><a href="#Model.set_linear_objective-1679"><span class="linenos">1679</span></a>        <span class="n">objective_expr</span> <span class="o">=</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="Model.set_linear_objective-1680"><a href="#Model.set_linear_objective-1680"><span class="linenos">1680</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="Model.set_linear_objective-1681"><a href="#Model.set_linear_objective-1681"><span class="linenos">1681</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Model.set_linear_objective-1682"><a href="#Model.set_linear_objective-1682"><span class="linenos">1682</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">set_linear_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Sets the objective to optimize the provided linear expression <code><a href="#Model.objective">objective</a></code>.</p>
</div>


                            </div>
                            <div id="Model.set_quadratic_objective" class="classattr">
                                        <input id="Model.set_quadratic_objective-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_quadratic_objective</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">objective</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">,</span> <span class="n"><a href="#QuadraticBase">QuadraticBase</a></span><span class="p">]</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">is_maximize</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Model.set_quadratic_objective-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.set_quadratic_objective"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.set_quadratic_objective-1684"><a href="#Model.set_quadratic_objective-1684"><span class="linenos">1684</span></a>    <span class="k">def</span> <span class="nf">set_quadratic_objective</span><span class="p">(</span>
</span><span id="Model.set_quadratic_objective-1685"><a href="#Model.set_quadratic_objective-1685"><span class="linenos">1685</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">is_maximize</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="Model.set_quadratic_objective-1686"><a href="#Model.set_quadratic_objective-1686"><span class="linenos">1686</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model.set_quadratic_objective-1687"><a href="#Model.set_quadratic_objective-1687"><span class="linenos">1687</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the objective to optimize the provided linear expression `objective`.&quot;&quot;&quot;</span>
</span><span id="Model.set_quadratic_objective-1688"><a href="#Model.set_quadratic_objective-1688"><span class="linenos">1688</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="p">(</span><span class="n">QuadraticBase</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="Model.set_quadratic_objective-1689"><a href="#Model.set_quadratic_objective-1689"><span class="linenos">1689</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="Model.set_quadratic_objective-1690"><a href="#Model.set_quadratic_objective-1690"><span class="linenos">1690</span></a>                <span class="s2">&quot;unsupported type in objective argument for &quot;</span>
</span><span id="Model.set_quadratic_objective-1691"><a href="#Model.set_quadratic_objective-1691"><span class="linenos">1691</span></a>                <span class="sa">f</span><span class="s2">&quot;set_quadratic_objective: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="Model.set_quadratic_objective-1692"><a href="#Model.set_quadratic_objective-1692"><span class="linenos">1692</span></a>            <span class="p">)</span>
</span><span id="Model.set_quadratic_objective-1693"><a href="#Model.set_quadratic_objective-1693"><span class="linenos">1693</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">clear_objective</span><span class="p">()</span>
</span><span id="Model.set_quadratic_objective-1694"><a href="#Model.set_quadratic_objective-1694"><span class="linenos">1694</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">is_maximize</span> <span class="o">=</span> <span class="n">is_maximize</span>
</span><span id="Model.set_quadratic_objective-1695"><a href="#Model.set_quadratic_objective-1695"><span class="linenos">1695</span></a>        <span class="n">objective_expr</span> <span class="o">=</span> <span class="n">as_flat_quadratic_expression</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
</span><span id="Model.set_quadratic_objective-1696"><a href="#Model.set_quadratic_objective-1696"><span class="linenos">1696</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="Model.set_quadratic_objective-1697"><a href="#Model.set_quadratic_objective-1697"><span class="linenos">1697</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">linear_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Model.set_quadratic_objective-1698"><a href="#Model.set_quadratic_objective-1698"><span class="linenos">1698</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">set_linear_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">)</span>
</span><span id="Model.set_quadratic_objective-1699"><a href="#Model.set_quadratic_objective-1699"><span class="linenos">1699</span></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">objective_expr</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Model.set_quadratic_objective-1700"><a href="#Model.set_quadratic_objective-1700"><span class="linenos">1700</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_objective</span><span class="o">.</span><span class="n">set_quadratic_coefficient</span><span class="p">(</span>
</span><span id="Model.set_quadratic_objective-1701"><a href="#Model.set_quadratic_objective-1701"><span class="linenos">1701</span></a>                <span class="n">key</span><span class="o">.</span><span class="n">first_var</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">second_var</span><span class="p">,</span> <span class="n">coefficient</span>
</span><span id="Model.set_quadratic_objective-1702"><a href="#Model.set_quadratic_objective-1702"><span class="linenos">1702</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Sets the objective to optimize the provided linear expression <code><a href="#Model.objective">objective</a></code>.</p>
</div>


                            </div>
                            <div id="Model.add_linear_constraint" class="classattr">
                                        <input id="Model.add_linear_constraint-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_linear_constraint</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">bounded_expr</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n"><a href="#LowerBoundedLinearExpression">LowerBoundedLinearExpression</a></span><span class="p">,</span> <span class="n"><a href="#UpperBoundedLinearExpression">UpperBoundedLinearExpression</a></span><span class="p">,</span> <span class="n"><a href="#BoundedLinearExpression">BoundedLinearExpression</a></span><span class="p">,</span> <span class="n"><a href="#VarEqVar">VarEqVar</a></span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">lb</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">ub</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">expr</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></span><span class="return-annotation">) -> <span class="n"><a href="#LinearConstraint">LinearConstraint</a></span>:</span></span>

                <label class="view-source-button" for="Model.add_linear_constraint-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.add_linear_constraint"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.add_linear_constraint-1707"><a href="#Model.add_linear_constraint-1707"><span class="linenos">1707</span></a>    <span class="k">def</span> <span class="nf">add_linear_constraint</span><span class="p">(</span>
</span><span id="Model.add_linear_constraint-1708"><a href="#Model.add_linear_constraint-1708"><span class="linenos">1708</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Model.add_linear_constraint-1709"><a href="#Model.add_linear_constraint-1709"><span class="linenos">1709</span></a>        <span class="n">bounded_expr</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">BoundedLinearTypes</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Model.add_linear_constraint-1710"><a href="#Model.add_linear_constraint-1710"><span class="linenos">1710</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="Model.add_linear_constraint-1711"><a href="#Model.add_linear_constraint-1711"><span class="linenos">1711</span></a>        <span class="n">lb</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Model.add_linear_constraint-1712"><a href="#Model.add_linear_constraint-1712"><span class="linenos">1712</span></a>        <span class="n">ub</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Model.add_linear_constraint-1713"><a href="#Model.add_linear_constraint-1713"><span class="linenos">1713</span></a>        <span class="n">expr</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">LinearTypes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Model.add_linear_constraint-1714"><a href="#Model.add_linear_constraint-1714"><span class="linenos">1714</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="Model.add_linear_constraint-1715"><a href="#Model.add_linear_constraint-1715"><span class="linenos">1715</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearConstraint</span><span class="p">:</span>
</span><span id="Model.add_linear_constraint-1716"><a href="#Model.add_linear_constraint-1716"><span class="linenos">1716</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a linear constraint to the optimization model.</span>
</span><span id="Model.add_linear_constraint-1717"><a href="#Model.add_linear_constraint-1717"><span class="linenos">1717</span></a>
</span><span id="Model.add_linear_constraint-1718"><a href="#Model.add_linear_constraint-1718"><span class="linenos">1718</span></a><span class="sd">        The simplest way to specify the constraint is by passing a one-sided or</span>
</span><span id="Model.add_linear_constraint-1719"><a href="#Model.add_linear_constraint-1719"><span class="linenos">1719</span></a><span class="sd">        two-sided linear inequality as in:</span>
</span><span id="Model.add_linear_constraint-1720"><a href="#Model.add_linear_constraint-1720"><span class="linenos">1720</span></a><span class="sd">          * add_linear_constraint(x + y + 1.0 &lt;= 2.0),</span>
</span><span id="Model.add_linear_constraint-1721"><a href="#Model.add_linear_constraint-1721"><span class="linenos">1721</span></a><span class="sd">          * add_linear_constraint(x + y &gt;= 2.0), or</span>
</span><span id="Model.add_linear_constraint-1722"><a href="#Model.add_linear_constraint-1722"><span class="linenos">1722</span></a><span class="sd">          * add_linear_constraint((1.0 &lt;= x + y) &lt;= 2.0).</span>
</span><span id="Model.add_linear_constraint-1723"><a href="#Model.add_linear_constraint-1723"><span class="linenos">1723</span></a>
</span><span id="Model.add_linear_constraint-1724"><a href="#Model.add_linear_constraint-1724"><span class="linenos">1724</span></a><span class="sd">        Note the extra parenthesis for two-sided linear inequalities, which is</span>
</span><span id="Model.add_linear_constraint-1725"><a href="#Model.add_linear_constraint-1725"><span class="linenos">1725</span></a><span class="sd">        required due to some language limitations (see</span>
</span><span id="Model.add_linear_constraint-1726"><a href="#Model.add_linear_constraint-1726"><span class="linenos">1726</span></a><span class="sd">        https://peps.python.org/pep-0335/ and https://peps.python.org/pep-0535/).</span>
</span><span id="Model.add_linear_constraint-1727"><a href="#Model.add_linear_constraint-1727"><span class="linenos">1727</span></a><span class="sd">        If the parenthesis are omitted, a TypeError will be raised explaining the</span>
</span><span id="Model.add_linear_constraint-1728"><a href="#Model.add_linear_constraint-1728"><span class="linenos">1728</span></a><span class="sd">        issue (if this error was not raised the first inequality would have been</span>
</span><span id="Model.add_linear_constraint-1729"><a href="#Model.add_linear_constraint-1729"><span class="linenos">1729</span></a><span class="sd">        silently ignored because of the noted language limitations).</span>
</span><span id="Model.add_linear_constraint-1730"><a href="#Model.add_linear_constraint-1730"><span class="linenos">1730</span></a>
</span><span id="Model.add_linear_constraint-1731"><a href="#Model.add_linear_constraint-1731"><span class="linenos">1731</span></a><span class="sd">        The second way to specify the constraint is by setting lb, ub, and/o expr as</span>
</span><span id="Model.add_linear_constraint-1732"><a href="#Model.add_linear_constraint-1732"><span class="linenos">1732</span></a><span class="sd">        in:</span>
</span><span id="Model.add_linear_constraint-1733"><a href="#Model.add_linear_constraint-1733"><span class="linenos">1733</span></a><span class="sd">          * add_linear_constraint(expr=x + y + 1.0, ub=2.0),</span>
</span><span id="Model.add_linear_constraint-1734"><a href="#Model.add_linear_constraint-1734"><span class="linenos">1734</span></a><span class="sd">          * add_linear_constraint(expr=x + y, lb=2.0),</span>
</span><span id="Model.add_linear_constraint-1735"><a href="#Model.add_linear_constraint-1735"><span class="linenos">1735</span></a><span class="sd">          * add_linear_constraint(expr=x + y, lb=1.0, ub=2.0), or</span>
</span><span id="Model.add_linear_constraint-1736"><a href="#Model.add_linear_constraint-1736"><span class="linenos">1736</span></a><span class="sd">          * add_linear_constraint(lb=1.0).</span>
</span><span id="Model.add_linear_constraint-1737"><a href="#Model.add_linear_constraint-1737"><span class="linenos">1737</span></a><span class="sd">        Omitting lb is equivalent to setting it to -math.inf and omiting ub is</span>
</span><span id="Model.add_linear_constraint-1738"><a href="#Model.add_linear_constraint-1738"><span class="linenos">1738</span></a><span class="sd">        equivalent to setting it to math.inf.</span>
</span><span id="Model.add_linear_constraint-1739"><a href="#Model.add_linear_constraint-1739"><span class="linenos">1739</span></a>
</span><span id="Model.add_linear_constraint-1740"><a href="#Model.add_linear_constraint-1740"><span class="linenos">1740</span></a><span class="sd">        These two alternatives are exclusive and a combined call like:</span>
</span><span id="Model.add_linear_constraint-1741"><a href="#Model.add_linear_constraint-1741"><span class="linenos">1741</span></a><span class="sd">          * add_linear_constraint(x + y &lt;= 2.0, lb=1.0), or</span>
</span><span id="Model.add_linear_constraint-1742"><a href="#Model.add_linear_constraint-1742"><span class="linenos">1742</span></a><span class="sd">          * add_linear_constraint(x + y &lt;= 2.0, ub=math.inf)</span>
</span><span id="Model.add_linear_constraint-1743"><a href="#Model.add_linear_constraint-1743"><span class="linenos">1743</span></a><span class="sd">        will raise a ValueError. A ValueError is also raised if expr&#39;s offset is</span>
</span><span id="Model.add_linear_constraint-1744"><a href="#Model.add_linear_constraint-1744"><span class="linenos">1744</span></a><span class="sd">        infinite.</span>
</span><span id="Model.add_linear_constraint-1745"><a href="#Model.add_linear_constraint-1745"><span class="linenos">1745</span></a>
</span><span id="Model.add_linear_constraint-1746"><a href="#Model.add_linear_constraint-1746"><span class="linenos">1746</span></a><span class="sd">        Args:</span>
</span><span id="Model.add_linear_constraint-1747"><a href="#Model.add_linear_constraint-1747"><span class="linenos">1747</span></a><span class="sd">          bounded_expr: a linear inequality describing the constraint. Cannot be</span>
</span><span id="Model.add_linear_constraint-1748"><a href="#Model.add_linear_constraint-1748"><span class="linenos">1748</span></a><span class="sd">            specified together with lb, ub, or expr.</span>
</span><span id="Model.add_linear_constraint-1749"><a href="#Model.add_linear_constraint-1749"><span class="linenos">1749</span></a><span class="sd">          lb: The constraint&#39;s lower bound if bounded_expr is omitted (if both</span>
</span><span id="Model.add_linear_constraint-1750"><a href="#Model.add_linear_constraint-1750"><span class="linenos">1750</span></a><span class="sd">            bounder_expr and lb are omitted, the lower bound is -math.inf).</span>
</span><span id="Model.add_linear_constraint-1751"><a href="#Model.add_linear_constraint-1751"><span class="linenos">1751</span></a><span class="sd">          ub: The constraint&#39;s upper bound if bounded_expr is omitted (if both</span>
</span><span id="Model.add_linear_constraint-1752"><a href="#Model.add_linear_constraint-1752"><span class="linenos">1752</span></a><span class="sd">            bounder_expr and ub are omitted, the upper bound is math.inf).</span>
</span><span id="Model.add_linear_constraint-1753"><a href="#Model.add_linear_constraint-1753"><span class="linenos">1753</span></a><span class="sd">          expr: The constraint&#39;s linear expression if bounded_expr is omitted.</span>
</span><span id="Model.add_linear_constraint-1754"><a href="#Model.add_linear_constraint-1754"><span class="linenos">1754</span></a><span class="sd">          name: For debugging purposes only, but nonempty names must be distinct.</span>
</span><span id="Model.add_linear_constraint-1755"><a href="#Model.add_linear_constraint-1755"><span class="linenos">1755</span></a>
</span><span id="Model.add_linear_constraint-1756"><a href="#Model.add_linear_constraint-1756"><span class="linenos">1756</span></a><span class="sd">        Returns:</span>
</span><span id="Model.add_linear_constraint-1757"><a href="#Model.add_linear_constraint-1757"><span class="linenos">1757</span></a><span class="sd">          A reference to the new linear constraint.</span>
</span><span id="Model.add_linear_constraint-1758"><a href="#Model.add_linear_constraint-1758"><span class="linenos">1758</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Model.add_linear_constraint-1759"><a href="#Model.add_linear_constraint-1759"><span class="linenos">1759</span></a>        <span class="n">normalized_inequality</span> <span class="o">=</span> <span class="n">as_normalized_linear_inequality</span><span class="p">(</span>
</span><span id="Model.add_linear_constraint-1760"><a href="#Model.add_linear_constraint-1760"><span class="linenos">1760</span></a>            <span class="n">bounded_expr</span><span class="p">,</span> <span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="n">expr</span>
</span><span id="Model.add_linear_constraint-1761"><a href="#Model.add_linear_constraint-1761"><span class="linenos">1761</span></a>        <span class="p">)</span>
</span><span id="Model.add_linear_constraint-1762"><a href="#Model.add_linear_constraint-1762"><span class="linenos">1762</span></a>        <span class="n">lin_con_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">add_linear_constraint</span><span class="p">(</span>
</span><span id="Model.add_linear_constraint-1763"><a href="#Model.add_linear_constraint-1763"><span class="linenos">1763</span></a>            <span class="n">normalized_inequality</span><span class="o">.</span><span class="n">lb</span><span class="p">,</span> <span class="n">normalized_inequality</span><span class="o">.</span><span class="n">ub</span><span class="p">,</span> <span class="n">name</span>
</span><span id="Model.add_linear_constraint-1764"><a href="#Model.add_linear_constraint-1764"><span class="linenos">1764</span></a>        <span class="p">)</span>
</span><span id="Model.add_linear_constraint-1765"><a href="#Model.add_linear_constraint-1765"><span class="linenos">1765</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">LinearConstraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin_con_id</span><span class="p">)</span>
</span><span id="Model.add_linear_constraint-1766"><a href="#Model.add_linear_constraint-1766"><span class="linenos">1766</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_linear_constraint_ids</span><span class="p">[</span><span class="n">lin_con_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
</span><span id="Model.add_linear_constraint-1767"><a href="#Model.add_linear_constraint-1767"><span class="linenos">1767</span></a>        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span> <span class="ow">in</span> <span class="n">normalized_inequality</span><span class="o">.</span><span class="n">coefficients</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Model.add_linear_constraint-1768"><a href="#Model.add_linear_constraint-1768"><span class="linenos">1768</span></a>            <span class="n">result</span><span class="o">.</span><span class="n">set_coefficient</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">coefficient</span><span class="p">)</span>
</span><span id="Model.add_linear_constraint-1769"><a href="#Model.add_linear_constraint-1769"><span class="linenos">1769</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Adds a linear constraint to the optimization model.</p>

<p>The simplest way to specify the constraint is by passing a one-sided or
two-sided linear inequality as in:</p>

<ul>
<li>add_linear_constraint(x + y + 1.0 &lt;= 2.0),</li>
<li>add_linear_constraint(x + y &gt;= 2.0), or</li>
<li>add_linear_constraint((1.0 &lt;= x + y) &lt;= 2.0).</li>
</ul>

<p>Note the extra parenthesis for two-sided linear inequalities, which is
required due to some language limitations (see
<a href="https://peps.python.org/pep-0335/">https://peps.python.org/pep-0335/</a> and https://peps.python.org/pep-0535/).
If the parenthesis are omitted, a TypeError will be raised explaining the
issue (if this error was not raised the first inequality would have been
silently ignored because of the noted language limitations).</p>

<p>The second way to specify the constraint is by setting lb, ub, and/o expr as
in:</p>

<ul>
<li>add_linear_constraint(expr=x + y + 1.0, ub=2.0),</li>
<li>add_linear_constraint(expr=x + y, lb=2.0),</li>
<li>add_linear_constraint(expr=x + y, lb=1.0, ub=2.0), or</li>
<li>add_linear_constraint(lb=1.0).
Omitting lb is equivalent to setting it to -math.inf and omiting ub is
equivalent to setting it to math.inf.</li>
</ul>

<h6 id="these-two-alternatives-are-exclusive-and-a-combined-call-like">These two alternatives are exclusive and a combined call like:</h6>

<blockquote>
  <ul>
  <li>add_linear_constraint(x + y &lt;= 2.0, lb=1.0), or</li>
  <li>add_linear_constraint(x + y &lt;= 2.0, ub=math.inf)</li>
  </ul>
</blockquote>

<p>will raise a ValueError. A ValueError is also raised if expr's offset is
infinite.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>bounded_expr:</strong>  a linear inequality describing the constraint. Cannot be
specified together with lb, ub, or expr.</li>
<li><strong>lb:</strong>  The constraint's lower bound if bounded_expr is omitted (if both
bounder_expr and lb are omitted, the lower bound is -math.inf).</li>
<li><strong>ub:</strong>  The constraint's upper bound if bounded_expr is omitted (if both
bounder_expr and ub are omitted, the upper bound is math.inf).</li>
<li><strong>expr:</strong>  The constraint's linear expression if bounded_expr is omitted.</li>
<li><strong>name:</strong>  For debugging purposes only, but nonempty names must be distinct.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>A reference to the new linear constraint.</p>
</blockquote>
</div>


                            </div>
                            <div id="Model.get_linear_constraint" class="classattr">
                                        <input id="Model.get_linear_constraint-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_linear_constraint</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">lin_con_id</span><span class="p">:</span> <span class="nb">int</span></span><span class="return-annotation">) -> <span class="n"><a href="#LinearConstraint">LinearConstraint</a></span>:</span></span>

                <label class="view-source-button" for="Model.get_linear_constraint-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.get_linear_constraint"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.get_linear_constraint-1771"><a href="#Model.get_linear_constraint-1771"><span class="linenos">1771</span></a>    <span class="k">def</span> <span class="nf">get_linear_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lin_con_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearConstraint</span><span class="p">:</span>
</span><span id="Model.get_linear_constraint-1772"><a href="#Model.get_linear_constraint-1772"><span class="linenos">1772</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the LinearConstraint for the id lin_con_id.&quot;&quot;&quot;</span>
</span><span id="Model.get_linear_constraint-1773"><a href="#Model.get_linear_constraint-1773"><span class="linenos">1773</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">linear_constraint_exists</span><span class="p">(</span><span class="n">lin_con_id</span><span class="p">):</span>
</span><span id="Model.get_linear_constraint-1774"><a href="#Model.get_linear_constraint-1774"><span class="linenos">1774</span></a>            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;linear constraint does not exist with id </span><span class="si">{</span><span class="n">lin_con_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Model.get_linear_constraint-1775"><a href="#Model.get_linear_constraint-1775"><span class="linenos">1775</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_linear_constraint</span><span class="p">(</span><span class="n">lin_con_id</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Returns the LinearConstraint for the id lin_con_id.</p>
</div>


                            </div>
                            <div id="Model.delete_linear_constraint" class="classattr">
                                        <input id="Model.delete_linear_constraint-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">delete_linear_constraint</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">linear_constraint</span><span class="p">:</span> <span class="n"><a href="#LinearConstraint">LinearConstraint</a></span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Model.delete_linear_constraint-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.delete_linear_constraint"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.delete_linear_constraint-1777"><a href="#Model.delete_linear_constraint-1777"><span class="linenos">1777</span></a>    <span class="k">def</span> <span class="nf">delete_linear_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_constraint</span><span class="p">:</span> <span class="n">LinearConstraint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model.delete_linear_constraint-1778"><a href="#Model.delete_linear_constraint-1778"><span class="linenos">1778</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">check_compatible</span><span class="p">(</span><span class="n">linear_constraint</span><span class="p">)</span>
</span><span id="Model.delete_linear_constraint-1779"><a href="#Model.delete_linear_constraint-1779"><span class="linenos">1779</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">delete_linear_constraint</span><span class="p">(</span><span class="n">linear_constraint</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="Model.delete_linear_constraint-1780"><a href="#Model.delete_linear_constraint-1780"><span class="linenos">1780</span></a>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear_constraint_ids</span><span class="p">[</span><span class="n">linear_constraint</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span></pre></div>


    

                            </div>
                            <div id="Model.linear_constraints" class="classattr">
                                        <input id="Model.linear_constraints-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">linear_constraints</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterator</span><span class="p">[</span><span class="n"><a href="#LinearConstraint">LinearConstraint</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Model.linear_constraints-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.linear_constraints"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.linear_constraints-1782"><a href="#Model.linear_constraints-1782"><span class="linenos">1782</span></a>    <span class="k">def</span> <span class="nf">linear_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearConstraint</span><span class="p">]:</span>
</span><span id="Model.linear_constraints-1783"><a href="#Model.linear_constraints-1783"><span class="linenos">1783</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the linear constraints in the order of creation.&quot;&quot;&quot;</span>
</span><span id="Model.linear_constraints-1784"><a href="#Model.linear_constraints-1784"><span class="linenos">1784</span></a>        <span class="k">for</span> <span class="n">lin_con_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraints</span><span class="p">():</span>
</span><span id="Model.linear_constraints-1785"><a href="#Model.linear_constraints-1785"><span class="linenos">1785</span></a>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_linear_constraint</span><span class="p">(</span><span class="n">lin_con_id</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Yields the linear constraints in the order of creation.</p>
</div>


                            </div>
                            <div id="Model.row_nonzeros" class="classattr">
                                        <input id="Model.row_nonzeros-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">row_nonzeros</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">linear_constraint</span><span class="p">:</span> <span class="n"><a href="#LinearConstraint">LinearConstraint</a></span></span><span class="return-annotation">) -> <span class="n">Iterator</span><span class="p">[</span><span class="n"><a href="#Variable">Variable</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Model.row_nonzeros-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.row_nonzeros"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.row_nonzeros-1787"><a href="#Model.row_nonzeros-1787"><span class="linenos">1787</span></a>    <span class="k">def</span> <span class="nf">row_nonzeros</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linear_constraint</span><span class="p">:</span> <span class="n">LinearConstraint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Variable</span><span class="p">]:</span>
</span><span id="Model.row_nonzeros-1788"><a href="#Model.row_nonzeros-1788"><span class="linenos">1788</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the variables with nonzero coefficient for this linear constraint.&quot;&quot;&quot;</span>
</span><span id="Model.row_nonzeros-1789"><a href="#Model.row_nonzeros-1789"><span class="linenos">1789</span></a>        <span class="k">for</span> <span class="n">var_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_variables_for_linear_constraint</span><span class="p">(</span>
</span><span id="Model.row_nonzeros-1790"><a href="#Model.row_nonzeros-1790"><span class="linenos">1790</span></a>            <span class="n">linear_constraint</span><span class="o">.</span><span class="n">id</span>
</span><span id="Model.row_nonzeros-1791"><a href="#Model.row_nonzeros-1791"><span class="linenos">1791</span></a>        <span class="p">):</span>
</span><span id="Model.row_nonzeros-1792"><a href="#Model.row_nonzeros-1792"><span class="linenos">1792</span></a>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">var_id</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Yields the variables with nonzero coefficient for this linear constraint.</p>
</div>


                            </div>
                            <div id="Model.column_nonzeros" class="classattr">
                                        <input id="Model.column_nonzeros-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">column_nonzeros</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">variable</span><span class="p">:</span> <span class="n"><a href="#Variable">Variable</a></span></span><span class="return-annotation">) -> <span class="n">Iterator</span><span class="p">[</span><span class="n"><a href="#LinearConstraint">LinearConstraint</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Model.column_nonzeros-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.column_nonzeros"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.column_nonzeros-1794"><a href="#Model.column_nonzeros-1794"><span class="linenos">1794</span></a>    <span class="k">def</span> <span class="nf">column_nonzeros</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">:</span> <span class="n">Variable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearConstraint</span><span class="p">]:</span>
</span><span id="Model.column_nonzeros-1795"><a href="#Model.column_nonzeros-1795"><span class="linenos">1795</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the linear constraints with nonzero coefficient for this variable.&quot;&quot;&quot;</span>
</span><span id="Model.column_nonzeros-1796"><a href="#Model.column_nonzeros-1796"><span class="linenos">1796</span></a>        <span class="k">for</span> <span class="n">lin_con_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraints_with_variable</span><span class="p">(</span>
</span><span id="Model.column_nonzeros-1797"><a href="#Model.column_nonzeros-1797"><span class="linenos">1797</span></a>            <span class="n">variable</span><span class="o">.</span><span class="n">id</span>
</span><span id="Model.column_nonzeros-1798"><a href="#Model.column_nonzeros-1798"><span class="linenos">1798</span></a>        <span class="p">):</span>
</span><span id="Model.column_nonzeros-1799"><a href="#Model.column_nonzeros-1799"><span class="linenos">1799</span></a>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_linear_constraint</span><span class="p">(</span><span class="n">lin_con_id</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Yields the linear constraints with nonzero coefficient for this variable.</p>
</div>


                            </div>
                            <div id="Model.linear_objective_terms" class="classattr">
                                        <input id="Model.linear_objective_terms-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">linear_objective_terms</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterator</span><span class="p">[</span><span class="n"><a href="#LinearTerm">LinearTerm</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Model.linear_objective_terms-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.linear_objective_terms"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.linear_objective_terms-1801"><a href="#Model.linear_objective_terms-1801"><span class="linenos">1801</span></a>    <span class="k">def</span> <span class="nf">linear_objective_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearTerm</span><span class="p">]:</span>
</span><span id="Model.linear_objective_terms-1802"><a href="#Model.linear_objective_terms-1802"><span class="linenos">1802</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields variable coefficient pairs for variables with nonzero objective coefficient in undefined order.&quot;&quot;&quot;</span>
</span><span id="Model.linear_objective_terms-1803"><a href="#Model.linear_objective_terms-1803"><span class="linenos">1803</span></a>        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_objective_coefficients</span><span class="p">():</span>
</span><span id="Model.linear_objective_terms-1804"><a href="#Model.linear_objective_terms-1804"><span class="linenos">1804</span></a>            <span class="k">yield</span> <span class="n">LinearTerm</span><span class="p">(</span>
</span><span id="Model.linear_objective_terms-1805"><a href="#Model.linear_objective_terms-1805"><span class="linenos">1805</span></a>                <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">variable_id</span><span class="p">),</span>
</span><span id="Model.linear_objective_terms-1806"><a href="#Model.linear_objective_terms-1806"><span class="linenos">1806</span></a>                <span class="n">coefficient</span><span class="o">=</span><span class="n">term</span><span class="o">.</span><span class="n">coefficient</span><span class="p">,</span>
</span><span id="Model.linear_objective_terms-1807"><a href="#Model.linear_objective_terms-1807"><span class="linenos">1807</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Yields variable coefficient pairs for variables with nonzero objective coefficient in undefined order.</p>
</div>


                            </div>
                            <div id="Model.quadratic_objective_terms" class="classattr">
                                        <input id="Model.quadratic_objective_terms-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">quadratic_objective_terms</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterator</span><span class="p">[</span><span class="n"><a href="#QuadraticTerm">QuadraticTerm</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Model.quadratic_objective_terms-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.quadratic_objective_terms"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.quadratic_objective_terms-1809"><a href="#Model.quadratic_objective_terms-1809"><span class="linenos">1809</span></a>    <span class="k">def</span> <span class="nf">quadratic_objective_terms</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">QuadraticTerm</span><span class="p">]:</span>
</span><span id="Model.quadratic_objective_terms-1810"><a href="#Model.quadratic_objective_terms-1810"><span class="linenos">1810</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the quadratic terms with nonzero objective coefficient in undefined order.&quot;&quot;&quot;</span>
</span><span id="Model.quadratic_objective_terms-1811"><a href="#Model.quadratic_objective_terms-1811"><span class="linenos">1811</span></a>        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_quadratic_objective_coefficients</span><span class="p">():</span>
</span><span id="Model.quadratic_objective_terms-1812"><a href="#Model.quadratic_objective_terms-1812"><span class="linenos">1812</span></a>            <span class="n">var1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">id_key</span><span class="o">.</span><span class="n">id1</span><span class="p">)</span>
</span><span id="Model.quadratic_objective_terms-1813"><a href="#Model.quadratic_objective_terms-1813"><span class="linenos">1813</span></a>            <span class="n">var2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">term</span><span class="o">.</span><span class="n">id_key</span><span class="o">.</span><span class="n">id2</span><span class="p">)</span>
</span><span id="Model.quadratic_objective_terms-1814"><a href="#Model.quadratic_objective_terms-1814"><span class="linenos">1814</span></a>            <span class="k">yield</span> <span class="n">QuadraticTerm</span><span class="p">(</span>
</span><span id="Model.quadratic_objective_terms-1815"><a href="#Model.quadratic_objective_terms-1815"><span class="linenos">1815</span></a>                <span class="n">key</span><span class="o">=</span><span class="n">QuadraticTermKey</span><span class="p">(</span><span class="n">var1</span><span class="p">,</span> <span class="n">var2</span><span class="p">),</span> <span class="n">coefficient</span><span class="o">=</span><span class="n">term</span><span class="o">.</span><span class="n">coefficient</span>
</span><span id="Model.quadratic_objective_terms-1816"><a href="#Model.quadratic_objective_terms-1816"><span class="linenos">1816</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Yields the quadratic terms with nonzero objective coefficient in undefined order.</p>
</div>


                            </div>
                            <div id="Model.linear_constraint_matrix_entries" class="classattr">
                                        <input id="Model.linear_constraint_matrix_entries-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">linear_constraint_matrix_entries</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">Iterator</span><span class="p">[</span><span class="n"><a href="#LinearConstraintMatrixEntry">LinearConstraintMatrixEntry</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Model.linear_constraint_matrix_entries-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.linear_constraint_matrix_entries"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.linear_constraint_matrix_entries-1818"><a href="#Model.linear_constraint_matrix_entries-1818"><span class="linenos">1818</span></a>    <span class="k">def</span> <span class="nf">linear_constraint_matrix_entries</span><span class="p">(</span>
</span><span id="Model.linear_constraint_matrix_entries-1819"><a href="#Model.linear_constraint_matrix_entries-1819"><span class="linenos">1819</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Model.linear_constraint_matrix_entries-1820"><a href="#Model.linear_constraint_matrix_entries-1820"><span class="linenos">1820</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">LinearConstraintMatrixEntry</span><span class="p">]:</span>
</span><span id="Model.linear_constraint_matrix_entries-1821"><a href="#Model.linear_constraint_matrix_entries-1821"><span class="linenos">1821</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Yields the nonzero elements of the linear constraint matrix in undefined order.&quot;&quot;&quot;</span>
</span><span id="Model.linear_constraint_matrix_entries-1822"><a href="#Model.linear_constraint_matrix_entries-1822"><span class="linenos">1822</span></a>        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">get_linear_constraint_matrix_entries</span><span class="p">():</span>
</span><span id="Model.linear_constraint_matrix_entries-1823"><a href="#Model.linear_constraint_matrix_entries-1823"><span class="linenos">1823</span></a>            <span class="k">yield</span> <span class="n">LinearConstraintMatrixEntry</span><span class="p">(</span>
</span><span id="Model.linear_constraint_matrix_entries-1824"><a href="#Model.linear_constraint_matrix_entries-1824"><span class="linenos">1824</span></a>                <span class="n">linear_constraint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_linear_constraint</span><span class="p">(</span>
</span><span id="Model.linear_constraint_matrix_entries-1825"><a href="#Model.linear_constraint_matrix_entries-1825"><span class="linenos">1825</span></a>                    <span class="n">entry</span><span class="o">.</span><span class="n">linear_constraint_id</span>
</span><span id="Model.linear_constraint_matrix_entries-1826"><a href="#Model.linear_constraint_matrix_entries-1826"><span class="linenos">1826</span></a>                <span class="p">),</span>
</span><span id="Model.linear_constraint_matrix_entries-1827"><a href="#Model.linear_constraint_matrix_entries-1827"><span class="linenos">1827</span></a>                <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_or_make_variable</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">variable_id</span><span class="p">),</span>
</span><span id="Model.linear_constraint_matrix_entries-1828"><a href="#Model.linear_constraint_matrix_entries-1828"><span class="linenos">1828</span></a>                <span class="n">coefficient</span><span class="o">=</span><span class="n">entry</span><span class="o">.</span><span class="n">coefficient</span><span class="p">,</span>
</span><span id="Model.linear_constraint_matrix_entries-1829"><a href="#Model.linear_constraint_matrix_entries-1829"><span class="linenos">1829</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Yields the nonzero elements of the linear constraint matrix in undefined order.</p>
</div>


                            </div>
                            <div id="Model.export_model" class="classattr">
                                        <input id="Model.export_model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">export_model</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="../model_pb2.html#ModelProto">ortools.math_opt.model_pb2.ModelProto</a></span>:</span></span>

                <label class="view-source-button" for="Model.export_model-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.export_model"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.export_model-1831"><a href="#Model.export_model-1831"><span class="linenos">1831</span></a>    <span class="k">def</span> <span class="nf">export_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">model_pb2</span><span class="o">.</span><span class="n">ModelProto</span><span class="p">:</span>
</span><span id="Model.export_model-1832"><a href="#Model.export_model-1832"><span class="linenos">1832</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">export_model</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="Model.add_update_tracker" class="classattr">
                                        <input id="Model.add_update_tracker-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_update_tracker</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n"><a href="#UpdateTracker">UpdateTracker</a></span>:</span></span>

                <label class="view-source-button" for="Model.add_update_tracker-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.add_update_tracker"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.add_update_tracker-1834"><a href="#Model.add_update_tracker-1834"><span class="linenos">1834</span></a>    <span class="k">def</span> <span class="nf">add_update_tracker</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UpdateTracker</span><span class="p">:</span>
</span><span id="Model.add_update_tracker-1835"><a href="#Model.add_update_tracker-1835"><span class="linenos">1835</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates an UpdateTracker registered on this model to view changes.&quot;&quot;&quot;</span>
</span><span id="Model.add_update_tracker-1836"><a href="#Model.add_update_tracker-1836"><span class="linenos">1836</span></a>        <span class="k">return</span> <span class="n">UpdateTracker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">add_update_tracker</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Creates an UpdateTracker registered on this model to view changes.</p>
</div>


                            </div>
                            <div id="Model.remove_update_tracker" class="classattr">
                                        <input id="Model.remove_update_tracker-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove_update_tracker</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">tracker</span><span class="p">:</span> <span class="n"><a href="#UpdateTracker">UpdateTracker</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Model.remove_update_tracker-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.remove_update_tracker"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.remove_update_tracker-1838"><a href="#Model.remove_update_tracker-1838"><span class="linenos">1838</span></a>    <span class="k">def</span> <span class="nf">remove_update_tracker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tracker</span><span class="p">:</span> <span class="n">UpdateTracker</span><span class="p">):</span>
</span><span id="Model.remove_update_tracker-1839"><a href="#Model.remove_update_tracker-1839"><span class="linenos">1839</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Stops tracker from getting updates on changes to this model.</span>
</span><span id="Model.remove_update_tracker-1840"><a href="#Model.remove_update_tracker-1840"><span class="linenos">1840</span></a>
</span><span id="Model.remove_update_tracker-1841"><a href="#Model.remove_update_tracker-1841"><span class="linenos">1841</span></a><span class="sd">        An error will be raised if tracker was not created by this Model or if</span>
</span><span id="Model.remove_update_tracker-1842"><a href="#Model.remove_update_tracker-1842"><span class="linenos">1842</span></a><span class="sd">        tracker has been previously removed.</span>
</span><span id="Model.remove_update_tracker-1843"><a href="#Model.remove_update_tracker-1843"><span class="linenos">1843</span></a>
</span><span id="Model.remove_update_tracker-1844"><a href="#Model.remove_update_tracker-1844"><span class="linenos">1844</span></a><span class="sd">        Using (via checkpoint or update) an UpdateTracker after it has been removed</span>
</span><span id="Model.remove_update_tracker-1845"><a href="#Model.remove_update_tracker-1845"><span class="linenos">1845</span></a><span class="sd">        will result in an error.</span>
</span><span id="Model.remove_update_tracker-1846"><a href="#Model.remove_update_tracker-1846"><span class="linenos">1846</span></a>
</span><span id="Model.remove_update_tracker-1847"><a href="#Model.remove_update_tracker-1847"><span class="linenos">1847</span></a><span class="sd">        Args:</span>
</span><span id="Model.remove_update_tracker-1848"><a href="#Model.remove_update_tracker-1848"><span class="linenos">1848</span></a><span class="sd">          tracker: The UpdateTracker to unregister.</span>
</span><span id="Model.remove_update_tracker-1849"><a href="#Model.remove_update_tracker-1849"><span class="linenos">1849</span></a>
</span><span id="Model.remove_update_tracker-1850"><a href="#Model.remove_update_tracker-1850"><span class="linenos">1850</span></a><span class="sd">        Raises:</span>
</span><span id="Model.remove_update_tracker-1851"><a href="#Model.remove_update_tracker-1851"><span class="linenos">1851</span></a><span class="sd">          KeyError: The tracker was created by another model or was already removed.</span>
</span><span id="Model.remove_update_tracker-1852"><a href="#Model.remove_update_tracker-1852"><span class="linenos">1852</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Model.remove_update_tracker-1853"><a href="#Model.remove_update_tracker-1853"><span class="linenos">1853</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">remove_update_tracker</span><span class="p">(</span><span class="n">tracker</span><span class="o">.</span><span class="n">storage_update_tracker</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Stops tracker from getting updates on changes to this model.</p>

<p>An error will be raised if tracker was not created by this Model or if
tracker has been previously removed.</p>

<p>Using (via checkpoint or update) an UpdateTracker after it has been removed
will result in an error.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>tracker:</strong>  The UpdateTracker to unregister.</li>
</ul>

<h6 id="raises">Raises:</h6>

<ul>
<li><strong>KeyError:</strong>  The tracker was created by another model or was already removed.</li>
</ul>
</div>


                            </div>
                            <div id="Model.check_compatible" class="classattr">
                                        <input id="Model.check_compatible-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">check_compatible</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">var_or_constraint</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="#Variable">Variable</a></span><span class="p">,</span> <span class="n"><a href="#LinearConstraint">LinearConstraint</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Model.check_compatible-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Model.check_compatible"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Model.check_compatible-1855"><a href="#Model.check_compatible-1855"><span class="linenos">1855</span></a>    <span class="k">def</span> <span class="nf">check_compatible</span><span class="p">(</span>
</span><span id="Model.check_compatible-1856"><a href="#Model.check_compatible-1856"><span class="linenos">1856</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">var_or_constraint</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="n">LinearConstraint</span><span class="p">]</span>
</span><span id="Model.check_compatible-1857"><a href="#Model.check_compatible-1857"><span class="linenos">1857</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Model.check_compatible-1858"><a href="#Model.check_compatible-1858"><span class="linenos">1858</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Raises a ValueError if the model of var_or_constraint is not self.&quot;&quot;&quot;</span>
</span><span id="Model.check_compatible-1859"><a href="#Model.check_compatible-1859"><span class="linenos">1859</span></a>        <span class="k">if</span> <span class="n">var_or_constraint</span><span class="o">.</span><span class="n">model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span>
</span><span id="Model.check_compatible-1860"><a href="#Model.check_compatible-1860"><span class="linenos">1860</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="Model.check_compatible-1861"><a href="#Model.check_compatible-1861"><span class="linenos">1861</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">var_or_constraint</span><span class="si">}</span><span class="s2"> is from model </span><span class="si">{</span><span class="n">var_or_constraint</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2"> and&quot;</span>
</span><span id="Model.check_compatible-1862"><a href="#Model.check_compatible-1862"><span class="linenos">1862</span></a>                <span class="sa">f</span><span class="s2">&quot; cannot be used with model </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Model.check_compatible-1863"><a href="#Model.check_compatible-1863"><span class="linenos">1863</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Raises a ValueError if the model of var_or_constraint is not self.</p>
</div>


                            </div>
                </section>
                <section id="LinearSum">
                            <input id="LinearSum-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LinearSum</span><wbr>(<span class="base"><a href="#LinearBase">LinearBase</a></span>):

                <label class="view-source-button" for="LinearSum-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearSum"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearSum-1884"><a href="#LinearSum-1884"><span class="linenos">1884</span></a><span class="k">class</span> <span class="nc">LinearSum</span><span class="p">(</span><span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearSum-1885"><a href="#LinearSum-1885"><span class="linenos">1885</span></a>    <span class="c1"># TODO(b/216492143): consider what details to move elsewhere and/or replace</span>
</span><span id="LinearSum-1886"><a href="#LinearSum-1886"><span class="linenos">1886</span></a>    <span class="c1"># by examples, and do complexity analysis.</span>
</span><span id="LinearSum-1887"><a href="#LinearSum-1887"><span class="linenos">1887</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A deferred sum of LinearBase objects.</span>
</span><span id="LinearSum-1888"><a href="#LinearSum-1888"><span class="linenos">1888</span></a>
</span><span id="LinearSum-1889"><a href="#LinearSum-1889"><span class="linenos">1889</span></a><span class="sd">    LinearSum objects are automatically created when two linear objects are added</span>
</span><span id="LinearSum-1890"><a href="#LinearSum-1890"><span class="linenos">1890</span></a><span class="sd">    and, as noted in the documentation for Linear, can reduce the inefficiencies.</span>
</span><span id="LinearSum-1891"><a href="#LinearSum-1891"><span class="linenos">1891</span></a><span class="sd">    In particular, they are created when calling sum(iterable) when iterable is</span>
</span><span id="LinearSum-1892"><a href="#LinearSum-1892"><span class="linenos">1892</span></a><span class="sd">    an Iterable[LinearTypes]. However, using LinearSum(iterable) instead</span>
</span><span id="LinearSum-1893"><a href="#LinearSum-1893"><span class="linenos">1893</span></a><span class="sd">    can result in additional performance improvements:</span>
</span><span id="LinearSum-1894"><a href="#LinearSum-1894"><span class="linenos">1894</span></a>
</span><span id="LinearSum-1895"><a href="#LinearSum-1895"><span class="linenos">1895</span></a><span class="sd">      * sum(iterable): creates a nested set of LinearSum objects (e.g.</span>
</span><span id="LinearSum-1896"><a href="#LinearSum-1896"><span class="linenos">1896</span></a><span class="sd">        `sum([a, b, c])` is `LinearSum(0, LinearSum(a, LinearSum(b, c)))`).</span>
</span><span id="LinearSum-1897"><a href="#LinearSum-1897"><span class="linenos">1897</span></a><span class="sd">      * LinearSum(iterable): creates a single LinearSum that saves a tuple with</span>
</span><span id="LinearSum-1898"><a href="#LinearSum-1898"><span class="linenos">1898</span></a><span class="sd">        all the LinearTypes objects in iterable (e.g.</span>
</span><span id="LinearSum-1899"><a href="#LinearSum-1899"><span class="linenos">1899</span></a><span class="sd">        `LinearSum([a, b, c])` does not create additional objects).</span>
</span><span id="LinearSum-1900"><a href="#LinearSum-1900"><span class="linenos">1900</span></a>
</span><span id="LinearSum-1901"><a href="#LinearSum-1901"><span class="linenos">1901</span></a><span class="sd">    This class is immutable.</span>
</span><span id="LinearSum-1902"><a href="#LinearSum-1902"><span class="linenos">1902</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="LinearSum-1903"><a href="#LinearSum-1903"><span class="linenos">1903</span></a>
</span><span id="LinearSum-1904"><a href="#LinearSum-1904"><span class="linenos">1904</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;__weakref__&quot;</span><span class="p">,</span> <span class="s2">&quot;_elements&quot;</span>
</span><span id="LinearSum-1905"><a href="#LinearSum-1905"><span class="linenos">1905</span></a>
</span><span id="LinearSum-1906"><a href="#LinearSum-1906"><span class="linenos">1906</span></a>    <span class="c1"># Potentially unsafe use of Iterable argument is handled by immediate local</span>
</span><span id="LinearSum-1907"><a href="#LinearSum-1907"><span class="linenos">1907</span></a>    <span class="c1"># storage as tuple.</span>
</span><span id="LinearSum-1908"><a href="#LinearSum-1908"><span class="linenos">1908</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterable</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">LinearTypes</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearSum-1909"><a href="#LinearSum-1909"><span class="linenos">1909</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a LinearSum object. A copy of iterable is saved as a tuple.&quot;&quot;&quot;</span>
</span><span id="LinearSum-1910"><a href="#LinearSum-1910"><span class="linenos">1910</span></a>
</span><span id="LinearSum-1911"><a href="#LinearSum-1911"><span class="linenos">1911</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
</span><span id="LinearSum-1912"><a href="#LinearSum-1912"><span class="linenos">1912</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span><span class="p">:</span>
</span><span id="LinearSum-1913"><a href="#LinearSum-1913"><span class="linenos">1913</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="LinearSum-1914"><a href="#LinearSum-1914"><span class="linenos">1914</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="LinearSum-1915"><a href="#LinearSum-1915"><span class="linenos">1915</span></a>                    <span class="s2">&quot;unsupported type in iterable argument for &quot;</span>
</span><span id="LinearSum-1916"><a href="#LinearSum-1916"><span class="linenos">1916</span></a>                    <span class="sa">f</span><span class="s2">&quot;LinearSum: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="LinearSum-1917"><a href="#LinearSum-1917"><span class="linenos">1917</span></a>                <span class="p">)</span>
</span><span id="LinearSum-1918"><a href="#LinearSum-1918"><span class="linenos">1918</span></a>
</span><span id="LinearSum-1919"><a href="#LinearSum-1919"><span class="linenos">1919</span></a>    <span class="nd">@property</span>
</span><span id="LinearSum-1920"><a href="#LinearSum-1920"><span class="linenos">1920</span></a>    <span class="k">def</span> <span class="nf">elements</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">LinearTypes</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
</span><span id="LinearSum-1921"><a href="#LinearSum-1921"><span class="linenos">1921</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span>
</span><span id="LinearSum-1922"><a href="#LinearSum-1922"><span class="linenos">1922</span></a>
</span><span id="LinearSum-1923"><a href="#LinearSum-1923"><span class="linenos">1923</span></a>    <span class="k">def</span> <span class="nf">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="LinearSum-1924"><a href="#LinearSum-1924"><span class="linenos">1924</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="LinearSum-1925"><a href="#LinearSum-1925"><span class="linenos">1925</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="LinearSum-1926"><a href="#LinearSum-1926"><span class="linenos">1926</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_ProcessedElements</span><span class="p">,</span>
</span><span id="LinearSum-1927"><a href="#LinearSum-1927"><span class="linenos">1927</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_ToProcessElements</span><span class="p">,</span>
</span><span id="LinearSum-1928"><a href="#LinearSum-1928"><span class="linenos">1928</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearSum-1929"><a href="#LinearSum-1929"><span class="linenos">1929</span></a>        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span><span class="p">:</span>
</span><span id="LinearSum-1930"><a href="#LinearSum-1930"><span class="linenos">1930</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="LinearSum-1931"><a href="#LinearSum-1931"><span class="linenos">1931</span></a>                <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">scale</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">term</span><span class="p">)</span>
</span><span id="LinearSum-1932"><a href="#LinearSum-1932"><span class="linenos">1932</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="LinearSum-1933"><a href="#LinearSum-1933"><span class="linenos">1933</span></a>                <span class="n">target_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
</span><span id="LinearSum-1934"><a href="#LinearSum-1934"><span class="linenos">1934</span></a>
</span><span id="LinearSum-1935"><a href="#LinearSum-1935"><span class="linenos">1935</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearSum-1936"><a href="#LinearSum-1936"><span class="linenos">1936</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="LinearSum-1937"><a href="#LinearSum-1937"><span class="linenos">1937</span></a>
</span><span id="LinearSum-1938"><a href="#LinearSum-1938"><span class="linenos">1938</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearSum-1939"><a href="#LinearSum-1939"><span class="linenos">1939</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;LinearSum((&quot;</span>
</span><span id="LinearSum-1940"><a href="#LinearSum-1940"><span class="linenos">1940</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">linear</span><span class="p">)</span> <span class="k">for</span> <span class="n">linear</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span><span class="p">)</span>
</span><span id="LinearSum-1941"><a href="#LinearSum-1941"><span class="linenos">1941</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;))&quot;</span>
</span><span id="LinearSum-1942"><a href="#LinearSum-1942"><span class="linenos">1942</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>A deferred sum of LinearBase objects.</p>

<p>LinearSum objects are automatically created when two linear objects are added
and, as noted in the documentation for Linear, can reduce the inefficiencies.
In particular, they are created when calling sum(iterable) when iterable is
an Iterable[LinearTypes]. However, using LinearSum(iterable) instead
can result in additional performance improvements:</p>

<ul>
<li>sum(iterable): creates a nested set of LinearSum objects (e.g.
<code>sum([a, b, c])</code> is <code>LinearSum(0, LinearSum(a, LinearSum(b, c)))</code>).</li>
<li>LinearSum(iterable): creates a single LinearSum that saves a tuple with
all the LinearTypes objects in iterable (e.g.
<code>LinearSum([a, b, c])</code> does not create additional objects).</li>
</ul>

<p>This class is immutable.</p>
</div>


                            <div id="LinearSum.__init__" class="classattr">
                                        <input id="LinearSum.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">LinearSum</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">iterable</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">]]</span></span>)</span>

                <label class="view-source-button" for="LinearSum.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearSum.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearSum.__init__-1908"><a href="#LinearSum.__init__-1908"><span class="linenos">1908</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterable</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">LinearTypes</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearSum.__init__-1909"><a href="#LinearSum.__init__-1909"><span class="linenos">1909</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a LinearSum object. A copy of iterable is saved as a tuple.&quot;&quot;&quot;</span>
</span><span id="LinearSum.__init__-1910"><a href="#LinearSum.__init__-1910"><span class="linenos">1910</span></a>
</span><span id="LinearSum.__init__-1911"><a href="#LinearSum.__init__-1911"><span class="linenos">1911</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
</span><span id="LinearSum.__init__-1912"><a href="#LinearSum.__init__-1912"><span class="linenos">1912</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span><span class="p">:</span>
</span><span id="LinearSum.__init__-1913"><a href="#LinearSum.__init__-1913"><span class="linenos">1913</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="LinearSum.__init__-1914"><a href="#LinearSum.__init__-1914"><span class="linenos">1914</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="LinearSum.__init__-1915"><a href="#LinearSum.__init__-1915"><span class="linenos">1915</span></a>                    <span class="s2">&quot;unsupported type in iterable argument for &quot;</span>
</span><span id="LinearSum.__init__-1916"><a href="#LinearSum.__init__-1916"><span class="linenos">1916</span></a>                    <span class="sa">f</span><span class="s2">&quot;LinearSum: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="LinearSum.__init__-1917"><a href="#LinearSum.__init__-1917"><span class="linenos">1917</span></a>                <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Creates a LinearSum object. A copy of iterable is saved as a tuple.</p>
</div>


                            </div>
                            <div id="LinearSum.elements" class="classattr">
                                        <input id="LinearSum.elements-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">elements</span><span class="annotation">: Tuple[Union[int, float, <a href="#LinearBase">LinearBase</a>], ...]</span>

                <label class="view-source-button" for="LinearSum.elements-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearSum.elements"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearSum.elements-1919"><a href="#LinearSum.elements-1919"><span class="linenos">1919</span></a>    <span class="nd">@property</span>
</span><span id="LinearSum.elements-1920"><a href="#LinearSum.elements-1920"><span class="linenos">1920</span></a>    <span class="k">def</span> <span class="nf">elements</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">LinearTypes</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
</span><span id="LinearSum.elements-1921"><a href="#LinearSum.elements-1921"><span class="linenos">1921</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="QuadraticSum">
                            <input id="QuadraticSum-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">QuadraticSum</span><wbr>(<span class="base"><a href="#QuadraticBase">QuadraticBase</a></span>):

                <label class="view-source-button" for="QuadraticSum-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticSum"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticSum-1945"><a href="#QuadraticSum-1945"><span class="linenos">1945</span></a><span class="k">class</span> <span class="nc">QuadraticSum</span><span class="p">(</span><span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="QuadraticSum-1946"><a href="#QuadraticSum-1946"><span class="linenos">1946</span></a>    <span class="c1"># TODO(b/216492143): consider what details to move elsewhere and/or replace</span>
</span><span id="QuadraticSum-1947"><a href="#QuadraticSum-1947"><span class="linenos">1947</span></a>    <span class="c1"># by examples, and do complexity analysis.</span>
</span><span id="QuadraticSum-1948"><a href="#QuadraticSum-1948"><span class="linenos">1948</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A deferred sum of QuadraticTypes objects.</span>
</span><span id="QuadraticSum-1949"><a href="#QuadraticSum-1949"><span class="linenos">1949</span></a>
</span><span id="QuadraticSum-1950"><a href="#QuadraticSum-1950"><span class="linenos">1950</span></a><span class="sd">    QuadraticSum objects are automatically created when a quadratic object is</span>
</span><span id="QuadraticSum-1951"><a href="#QuadraticSum-1951"><span class="linenos">1951</span></a><span class="sd">    added to quadratic or linear objects and, as has performance optimizations</span>
</span><span id="QuadraticSum-1952"><a href="#QuadraticSum-1952"><span class="linenos">1952</span></a><span class="sd">    similar to LinearSum.</span>
</span><span id="QuadraticSum-1953"><a href="#QuadraticSum-1953"><span class="linenos">1953</span></a>
</span><span id="QuadraticSum-1954"><a href="#QuadraticSum-1954"><span class="linenos">1954</span></a><span class="sd">    This class is immutable.</span>
</span><span id="QuadraticSum-1955"><a href="#QuadraticSum-1955"><span class="linenos">1955</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="QuadraticSum-1956"><a href="#QuadraticSum-1956"><span class="linenos">1956</span></a>
</span><span id="QuadraticSum-1957"><a href="#QuadraticSum-1957"><span class="linenos">1957</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;__weakref__&quot;</span><span class="p">,</span> <span class="s2">&quot;_elements&quot;</span>
</span><span id="QuadraticSum-1958"><a href="#QuadraticSum-1958"><span class="linenos">1958</span></a>
</span><span id="QuadraticSum-1959"><a href="#QuadraticSum-1959"><span class="linenos">1959</span></a>    <span class="c1"># Potentially unsafe use of Iterable argument is handled by immediate local</span>
</span><span id="QuadraticSum-1960"><a href="#QuadraticSum-1960"><span class="linenos">1960</span></a>    <span class="c1"># storage as tuple.</span>
</span><span id="QuadraticSum-1961"><a href="#QuadraticSum-1961"><span class="linenos">1961</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterable</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">QuadraticTypes</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="QuadraticSum-1962"><a href="#QuadraticSum-1962"><span class="linenos">1962</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a QuadraticSum object. A copy of iterable is saved as a tuple.&quot;&quot;&quot;</span>
</span><span id="QuadraticSum-1963"><a href="#QuadraticSum-1963"><span class="linenos">1963</span></a>
</span><span id="QuadraticSum-1964"><a href="#QuadraticSum-1964"><span class="linenos">1964</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
</span><span id="QuadraticSum-1965"><a href="#QuadraticSum-1965"><span class="linenos">1965</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span><span class="p">:</span>
</span><span id="QuadraticSum-1966"><a href="#QuadraticSum-1966"><span class="linenos">1966</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="QuadraticSum-1967"><a href="#QuadraticSum-1967"><span class="linenos">1967</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="QuadraticSum-1968"><a href="#QuadraticSum-1968"><span class="linenos">1968</span></a>                    <span class="s2">&quot;unsupported type in iterable argument for &quot;</span>
</span><span id="QuadraticSum-1969"><a href="#QuadraticSum-1969"><span class="linenos">1969</span></a>                    <span class="sa">f</span><span class="s2">&quot;QuadraticSum: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="QuadraticSum-1970"><a href="#QuadraticSum-1970"><span class="linenos">1970</span></a>                <span class="p">)</span>
</span><span id="QuadraticSum-1971"><a href="#QuadraticSum-1971"><span class="linenos">1971</span></a>
</span><span id="QuadraticSum-1972"><a href="#QuadraticSum-1972"><span class="linenos">1972</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticSum-1973"><a href="#QuadraticSum-1973"><span class="linenos">1973</span></a>    <span class="k">def</span> <span class="nf">elements</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">QuadraticTypes</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
</span><span id="QuadraticSum-1974"><a href="#QuadraticSum-1974"><span class="linenos">1974</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span>
</span><span id="QuadraticSum-1975"><a href="#QuadraticSum-1975"><span class="linenos">1975</span></a>
</span><span id="QuadraticSum-1976"><a href="#QuadraticSum-1976"><span class="linenos">1976</span></a>    <span class="k">def</span> <span class="nf">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="QuadraticSum-1977"><a href="#QuadraticSum-1977"><span class="linenos">1977</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="QuadraticSum-1978"><a href="#QuadraticSum-1978"><span class="linenos">1978</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="QuadraticSum-1979"><a href="#QuadraticSum-1979"><span class="linenos">1979</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_QuadraticProcessedElements</span><span class="p">,</span>
</span><span id="QuadraticSum-1980"><a href="#QuadraticSum-1980"><span class="linenos">1980</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_QuadraticToProcessElements</span><span class="p">,</span>
</span><span id="QuadraticSum-1981"><a href="#QuadraticSum-1981"><span class="linenos">1981</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="QuadraticSum-1982"><a href="#QuadraticSum-1982"><span class="linenos">1982</span></a>        <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span><span class="p">:</span>
</span><span id="QuadraticSum-1983"><a href="#QuadraticSum-1983"><span class="linenos">1983</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="QuadraticSum-1984"><a href="#QuadraticSum-1984"><span class="linenos">1984</span></a>                <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="n">scale</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">term</span><span class="p">)</span>
</span><span id="QuadraticSum-1985"><a href="#QuadraticSum-1985"><span class="linenos">1985</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="QuadraticSum-1986"><a href="#QuadraticSum-1986"><span class="linenos">1986</span></a>                <span class="n">target_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
</span><span id="QuadraticSum-1987"><a href="#QuadraticSum-1987"><span class="linenos">1987</span></a>
</span><span id="QuadraticSum-1988"><a href="#QuadraticSum-1988"><span class="linenos">1988</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="QuadraticSum-1989"><a href="#QuadraticSum-1989"><span class="linenos">1989</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">as_flat_quadratic_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="QuadraticSum-1990"><a href="#QuadraticSum-1990"><span class="linenos">1990</span></a>
</span><span id="QuadraticSum-1991"><a href="#QuadraticSum-1991"><span class="linenos">1991</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="QuadraticSum-1992"><a href="#QuadraticSum-1992"><span class="linenos">1992</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;QuadraticSum((&quot;</span>
</span><span id="QuadraticSum-1993"><a href="#QuadraticSum-1993"><span class="linenos">1993</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">element</span><span class="p">)</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span><span class="p">)</span>
</span><span id="QuadraticSum-1994"><a href="#QuadraticSum-1994"><span class="linenos">1994</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="s2">&quot;))&quot;</span>
</span><span id="QuadraticSum-1995"><a href="#QuadraticSum-1995"><span class="linenos">1995</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>A deferred sum of QuadraticTypes objects.</p>

<p>QuadraticSum objects are automatically created when a quadratic object is
added to quadratic or linear objects and, as has performance optimizations
similar to LinearSum.</p>

<p>This class is immutable.</p>
</div>


                            <div id="QuadraticSum.__init__" class="classattr">
                                        <input id="QuadraticSum.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">QuadraticSum</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">iterable</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">,</span> <span class="n"><a href="#QuadraticBase">QuadraticBase</a></span><span class="p">]]</span></span>)</span>

                <label class="view-source-button" for="QuadraticSum.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticSum.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticSum.__init__-1961"><a href="#QuadraticSum.__init__-1961"><span class="linenos">1961</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterable</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">QuadraticTypes</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="QuadraticSum.__init__-1962"><a href="#QuadraticSum.__init__-1962"><span class="linenos">1962</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a QuadraticSum object. A copy of iterable is saved as a tuple.&quot;&quot;&quot;</span>
</span><span id="QuadraticSum.__init__-1963"><a href="#QuadraticSum.__init__-1963"><span class="linenos">1963</span></a>
</span><span id="QuadraticSum.__init__-1964"><a href="#QuadraticSum.__init__-1964"><span class="linenos">1964</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
</span><span id="QuadraticSum.__init__-1965"><a href="#QuadraticSum.__init__-1965"><span class="linenos">1965</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span><span class="p">:</span>
</span><span id="QuadraticSum.__init__-1966"><a href="#QuadraticSum.__init__-1966"><span class="linenos">1966</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="QuadraticSum.__init__-1967"><a href="#QuadraticSum.__init__-1967"><span class="linenos">1967</span></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="QuadraticSum.__init__-1968"><a href="#QuadraticSum.__init__-1968"><span class="linenos">1968</span></a>                    <span class="s2">&quot;unsupported type in iterable argument for &quot;</span>
</span><span id="QuadraticSum.__init__-1969"><a href="#QuadraticSum.__init__-1969"><span class="linenos">1969</span></a>                    <span class="sa">f</span><span class="s2">&quot;QuadraticSum: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="QuadraticSum.__init__-1970"><a href="#QuadraticSum.__init__-1970"><span class="linenos">1970</span></a>                <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Creates a QuadraticSum object. A copy of iterable is saved as a tuple.</p>
</div>


                            </div>
                            <div id="QuadraticSum.elements" class="classattr">
                                        <input id="QuadraticSum.elements-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">elements</span><span class="annotation">: Tuple[Union[int, float, <a href="#LinearBase">LinearBase</a>, <a href="#QuadraticBase">QuadraticBase</a>], ...]</span>

                <label class="view-source-button" for="QuadraticSum.elements-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticSum.elements"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticSum.elements-1972"><a href="#QuadraticSum.elements-1972"><span class="linenos">1972</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticSum.elements-1973"><a href="#QuadraticSum.elements-1973"><span class="linenos">1973</span></a>    <span class="k">def</span> <span class="nf">elements</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">QuadraticTypes</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
</span><span id="QuadraticSum.elements-1974"><a href="#QuadraticSum.elements-1974"><span class="linenos">1974</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elements</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="LinearProduct">
                            <input id="LinearProduct-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LinearProduct</span><wbr>(<span class="base"><a href="#LinearBase">LinearBase</a></span>):

                <label class="view-source-button" for="LinearProduct-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearProduct"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearProduct-1998"><a href="#LinearProduct-1998"><span class="linenos">1998</span></a><span class="k">class</span> <span class="nc">LinearProduct</span><span class="p">(</span><span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearProduct-1999"><a href="#LinearProduct-1999"><span class="linenos">1999</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A deferred multiplication computation for linear expressions.</span>
</span><span id="LinearProduct-2000"><a href="#LinearProduct-2000"><span class="linenos">2000</span></a>
</span><span id="LinearProduct-2001"><a href="#LinearProduct-2001"><span class="linenos">2001</span></a><span class="sd">    This class is immutable.</span>
</span><span id="LinearProduct-2002"><a href="#LinearProduct-2002"><span class="linenos">2002</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="LinearProduct-2003"><a href="#LinearProduct-2003"><span class="linenos">2003</span></a>
</span><span id="LinearProduct-2004"><a href="#LinearProduct-2004"><span class="linenos">2004</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_scalar&quot;</span><span class="p">,</span> <span class="s2">&quot;_linear&quot;</span>
</span><span id="LinearProduct-2005"><a href="#LinearProduct-2005"><span class="linenos">2005</span></a>
</span><span id="LinearProduct-2006"><a href="#LinearProduct-2006"><span class="linenos">2006</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">linear</span><span class="p">:</span> <span class="n">LinearBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearProduct-2007"><a href="#LinearProduct-2007"><span class="linenos">2007</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scalar</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
</span><span id="LinearProduct-2008"><a href="#LinearProduct-2008"><span class="linenos">2008</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="LinearProduct-2009"><a href="#LinearProduct-2009"><span class="linenos">2009</span></a>                <span class="s2">&quot;unsupported type for scalar argument in &quot;</span>
</span><span id="LinearProduct-2010"><a href="#LinearProduct-2010"><span class="linenos">2010</span></a>                <span class="sa">f</span><span class="s2">&quot;LinearProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="LinearProduct-2011"><a href="#LinearProduct-2011"><span class="linenos">2011</span></a>            <span class="p">)</span>
</span><span id="LinearProduct-2012"><a href="#LinearProduct-2012"><span class="linenos">2012</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">linear</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearProduct-2013"><a href="#LinearProduct-2013"><span class="linenos">2013</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="LinearProduct-2014"><a href="#LinearProduct-2014"><span class="linenos">2014</span></a>                <span class="s2">&quot;unsupported type for linear argument in &quot;</span>
</span><span id="LinearProduct-2015"><a href="#LinearProduct-2015"><span class="linenos">2015</span></a>                <span class="sa">f</span><span class="s2">&quot;LinearProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">linear</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="LinearProduct-2016"><a href="#LinearProduct-2016"><span class="linenos">2016</span></a>            <span class="p">)</span>
</span><span id="LinearProduct-2017"><a href="#LinearProduct-2017"><span class="linenos">2017</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span>
</span><span id="LinearProduct-2018"><a href="#LinearProduct-2018"><span class="linenos">2018</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_linear</span><span class="p">:</span> <span class="n">LinearBase</span> <span class="o">=</span> <span class="n">linear</span>
</span><span id="LinearProduct-2019"><a href="#LinearProduct-2019"><span class="linenos">2019</span></a>
</span><span id="LinearProduct-2020"><a href="#LinearProduct-2020"><span class="linenos">2020</span></a>    <span class="nd">@property</span>
</span><span id="LinearProduct-2021"><a href="#LinearProduct-2021"><span class="linenos">2021</span></a>    <span class="k">def</span> <span class="nf">scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LinearProduct-2022"><a href="#LinearProduct-2022"><span class="linenos">2022</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span>
</span><span id="LinearProduct-2023"><a href="#LinearProduct-2023"><span class="linenos">2023</span></a>
</span><span id="LinearProduct-2024"><a href="#LinearProduct-2024"><span class="linenos">2024</span></a>    <span class="nd">@property</span>
</span><span id="LinearProduct-2025"><a href="#LinearProduct-2025"><span class="linenos">2025</span></a>    <span class="k">def</span> <span class="nf">linear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearBase</span><span class="p">:</span>
</span><span id="LinearProduct-2026"><a href="#LinearProduct-2026"><span class="linenos">2026</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear</span>
</span><span id="LinearProduct-2027"><a href="#LinearProduct-2027"><span class="linenos">2027</span></a>
</span><span id="LinearProduct-2028"><a href="#LinearProduct-2028"><span class="linenos">2028</span></a>    <span class="k">def</span> <span class="nf">_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="LinearProduct-2029"><a href="#LinearProduct-2029"><span class="linenos">2029</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="LinearProduct-2030"><a href="#LinearProduct-2030"><span class="linenos">2030</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="LinearProduct-2031"><a href="#LinearProduct-2031"><span class="linenos">2031</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_ProcessedElements</span><span class="p">,</span>
</span><span id="LinearProduct-2032"><a href="#LinearProduct-2032"><span class="linenos">2032</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_ToProcessElements</span><span class="p">,</span>
</span><span id="LinearProduct-2033"><a href="#LinearProduct-2033"><span class="linenos">2033</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearProduct-2034"><a href="#LinearProduct-2034"><span class="linenos">2034</span></a>        <span class="n">target_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_linear</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span> <span class="o">*</span> <span class="n">scale</span><span class="p">)</span>
</span><span id="LinearProduct-2035"><a href="#LinearProduct-2035"><span class="linenos">2035</span></a>
</span><span id="LinearProduct-2036"><a href="#LinearProduct-2036"><span class="linenos">2036</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearProduct-2037"><a href="#LinearProduct-2037"><span class="linenos">2037</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="LinearProduct-2038"><a href="#LinearProduct-2038"><span class="linenos">2038</span></a>
</span><span id="LinearProduct-2039"><a href="#LinearProduct-2039"><span class="linenos">2039</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearProduct-2040"><a href="#LinearProduct-2040"><span class="linenos">2040</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;LinearProduct(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span><span class="si">!r}</span><span class="s2">, &quot;</span>
</span><span id="LinearProduct-2041"><a href="#LinearProduct-2041"><span class="linenos">2041</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_linear</span><span class="si">!r}</span><span class="s2">)&quot;</span>
</span><span id="LinearProduct-2042"><a href="#LinearProduct-2042"><span class="linenos">2042</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>A deferred multiplication computation for linear expressions.</p>

<p>This class is immutable.</p>
</div>


                            <div id="LinearProduct.__init__" class="classattr">
                                        <input id="LinearProduct.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">LinearProduct</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">scalar</span><span class="p">:</span> <span class="nb">float</span>, </span><span class="param"><span class="n">linear</span><span class="p">:</span> <span class="n"><a href="#LinearBase">LinearBase</a></span></span>)</span>

                <label class="view-source-button" for="LinearProduct.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearProduct.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearProduct.__init__-2006"><a href="#LinearProduct.__init__-2006"><span class="linenos">2006</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">linear</span><span class="p">:</span> <span class="n">LinearBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearProduct.__init__-2007"><a href="#LinearProduct.__init__-2007"><span class="linenos">2007</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scalar</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
</span><span id="LinearProduct.__init__-2008"><a href="#LinearProduct.__init__-2008"><span class="linenos">2008</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="LinearProduct.__init__-2009"><a href="#LinearProduct.__init__-2009"><span class="linenos">2009</span></a>                <span class="s2">&quot;unsupported type for scalar argument in &quot;</span>
</span><span id="LinearProduct.__init__-2010"><a href="#LinearProduct.__init__-2010"><span class="linenos">2010</span></a>                <span class="sa">f</span><span class="s2">&quot;LinearProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="LinearProduct.__init__-2011"><a href="#LinearProduct.__init__-2011"><span class="linenos">2011</span></a>            <span class="p">)</span>
</span><span id="LinearProduct.__init__-2012"><a href="#LinearProduct.__init__-2012"><span class="linenos">2012</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">linear</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearProduct.__init__-2013"><a href="#LinearProduct.__init__-2013"><span class="linenos">2013</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="LinearProduct.__init__-2014"><a href="#LinearProduct.__init__-2014"><span class="linenos">2014</span></a>                <span class="s2">&quot;unsupported type for linear argument in &quot;</span>
</span><span id="LinearProduct.__init__-2015"><a href="#LinearProduct.__init__-2015"><span class="linenos">2015</span></a>                <span class="sa">f</span><span class="s2">&quot;LinearProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">linear</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="LinearProduct.__init__-2016"><a href="#LinearProduct.__init__-2016"><span class="linenos">2016</span></a>            <span class="p">)</span>
</span><span id="LinearProduct.__init__-2017"><a href="#LinearProduct.__init__-2017"><span class="linenos">2017</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span>
</span><span id="LinearProduct.__init__-2018"><a href="#LinearProduct.__init__-2018"><span class="linenos">2018</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_linear</span><span class="p">:</span> <span class="n">LinearBase</span> <span class="o">=</span> <span class="n">linear</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearProduct.scalar" class="classattr">
                                        <input id="LinearProduct.scalar-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">scalar</span><span class="annotation">: float</span>

                <label class="view-source-button" for="LinearProduct.scalar-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearProduct.scalar"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearProduct.scalar-2020"><a href="#LinearProduct.scalar-2020"><span class="linenos">2020</span></a>    <span class="nd">@property</span>
</span><span id="LinearProduct.scalar-2021"><a href="#LinearProduct.scalar-2021"><span class="linenos">2021</span></a>    <span class="k">def</span> <span class="nf">scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="LinearProduct.scalar-2022"><a href="#LinearProduct.scalar-2022"><span class="linenos">2022</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearProduct.linear" class="classattr">
                                        <input id="LinearProduct.linear-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">linear</span><span class="annotation">: <a href="#LinearBase">LinearBase</a></span>

                <label class="view-source-button" for="LinearProduct.linear-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearProduct.linear"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearProduct.linear-2024"><a href="#LinearProduct.linear-2024"><span class="linenos">2024</span></a>    <span class="nd">@property</span>
</span><span id="LinearProduct.linear-2025"><a href="#LinearProduct.linear-2025"><span class="linenos">2025</span></a>    <span class="k">def</span> <span class="nf">linear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearBase</span><span class="p">:</span>
</span><span id="LinearProduct.linear-2026"><a href="#LinearProduct.linear-2026"><span class="linenos">2026</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linear</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="QuadraticProduct">
                            <input id="QuadraticProduct-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">QuadraticProduct</span><wbr>(<span class="base"><a href="#QuadraticBase">QuadraticBase</a></span>):

                <label class="view-source-button" for="QuadraticProduct-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticProduct"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticProduct-2045"><a href="#QuadraticProduct-2045"><span class="linenos">2045</span></a><span class="k">class</span> <span class="nc">QuadraticProduct</span><span class="p">(</span><span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="QuadraticProduct-2046"><a href="#QuadraticProduct-2046"><span class="linenos">2046</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A deferred multiplication computation for quadratic expressions.</span>
</span><span id="QuadraticProduct-2047"><a href="#QuadraticProduct-2047"><span class="linenos">2047</span></a>
</span><span id="QuadraticProduct-2048"><a href="#QuadraticProduct-2048"><span class="linenos">2048</span></a><span class="sd">    This class is immutable.</span>
</span><span id="QuadraticProduct-2049"><a href="#QuadraticProduct-2049"><span class="linenos">2049</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="QuadraticProduct-2050"><a href="#QuadraticProduct-2050"><span class="linenos">2050</span></a>
</span><span id="QuadraticProduct-2051"><a href="#QuadraticProduct-2051"><span class="linenos">2051</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_scalar&quot;</span><span class="p">,</span> <span class="s2">&quot;_quadratic&quot;</span>
</span><span id="QuadraticProduct-2052"><a href="#QuadraticProduct-2052"><span class="linenos">2052</span></a>
</span><span id="QuadraticProduct-2053"><a href="#QuadraticProduct-2053"><span class="linenos">2053</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">quadratic</span><span class="p">:</span> <span class="n">QuadraticBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="QuadraticProduct-2054"><a href="#QuadraticProduct-2054"><span class="linenos">2054</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scalar</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
</span><span id="QuadraticProduct-2055"><a href="#QuadraticProduct-2055"><span class="linenos">2055</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="QuadraticProduct-2056"><a href="#QuadraticProduct-2056"><span class="linenos">2056</span></a>                <span class="s2">&quot;unsupported type for scalar argument in &quot;</span>
</span><span id="QuadraticProduct-2057"><a href="#QuadraticProduct-2057"><span class="linenos">2057</span></a>                <span class="sa">f</span><span class="s2">&quot;QuadraticProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="QuadraticProduct-2058"><a href="#QuadraticProduct-2058"><span class="linenos">2058</span></a>            <span class="p">)</span>
</span><span id="QuadraticProduct-2059"><a href="#QuadraticProduct-2059"><span class="linenos">2059</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">quadratic</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="QuadraticProduct-2060"><a href="#QuadraticProduct-2060"><span class="linenos">2060</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="QuadraticProduct-2061"><a href="#QuadraticProduct-2061"><span class="linenos">2061</span></a>                <span class="s2">&quot;unsupported type for linear argument in &quot;</span>
</span><span id="QuadraticProduct-2062"><a href="#QuadraticProduct-2062"><span class="linenos">2062</span></a>                <span class="sa">f</span><span class="s2">&quot;QuadraticProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">quadratic</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="QuadraticProduct-2063"><a href="#QuadraticProduct-2063"><span class="linenos">2063</span></a>            <span class="p">)</span>
</span><span id="QuadraticProduct-2064"><a href="#QuadraticProduct-2064"><span class="linenos">2064</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span>
</span><span id="QuadraticProduct-2065"><a href="#QuadraticProduct-2065"><span class="linenos">2065</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic</span><span class="p">:</span> <span class="n">QuadraticBase</span> <span class="o">=</span> <span class="n">quadratic</span>
</span><span id="QuadraticProduct-2066"><a href="#QuadraticProduct-2066"><span class="linenos">2066</span></a>
</span><span id="QuadraticProduct-2067"><a href="#QuadraticProduct-2067"><span class="linenos">2067</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticProduct-2068"><a href="#QuadraticProduct-2068"><span class="linenos">2068</span></a>    <span class="k">def</span> <span class="nf">scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="QuadraticProduct-2069"><a href="#QuadraticProduct-2069"><span class="linenos">2069</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span>
</span><span id="QuadraticProduct-2070"><a href="#QuadraticProduct-2070"><span class="linenos">2070</span></a>
</span><span id="QuadraticProduct-2071"><a href="#QuadraticProduct-2071"><span class="linenos">2071</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticProduct-2072"><a href="#QuadraticProduct-2072"><span class="linenos">2072</span></a>    <span class="k">def</span> <span class="nf">quadratic</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QuadraticBase</span><span class="p">:</span>
</span><span id="QuadraticProduct-2073"><a href="#QuadraticProduct-2073"><span class="linenos">2073</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic</span>
</span><span id="QuadraticProduct-2074"><a href="#QuadraticProduct-2074"><span class="linenos">2074</span></a>
</span><span id="QuadraticProduct-2075"><a href="#QuadraticProduct-2075"><span class="linenos">2075</span></a>    <span class="k">def</span> <span class="nf">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="QuadraticProduct-2076"><a href="#QuadraticProduct-2076"><span class="linenos">2076</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="QuadraticProduct-2077"><a href="#QuadraticProduct-2077"><span class="linenos">2077</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="QuadraticProduct-2078"><a href="#QuadraticProduct-2078"><span class="linenos">2078</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_QuadraticProcessedElements</span><span class="p">,</span>
</span><span id="QuadraticProduct-2079"><a href="#QuadraticProduct-2079"><span class="linenos">2079</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_QuadraticToProcessElements</span><span class="p">,</span>
</span><span id="QuadraticProduct-2080"><a href="#QuadraticProduct-2080"><span class="linenos">2080</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="QuadraticProduct-2081"><a href="#QuadraticProduct-2081"><span class="linenos">2081</span></a>        <span class="n">target_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_quadratic</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span> <span class="o">*</span> <span class="n">scale</span><span class="p">)</span>
</span><span id="QuadraticProduct-2082"><a href="#QuadraticProduct-2082"><span class="linenos">2082</span></a>
</span><span id="QuadraticProduct-2083"><a href="#QuadraticProduct-2083"><span class="linenos">2083</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="QuadraticProduct-2084"><a href="#QuadraticProduct-2084"><span class="linenos">2084</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">as_flat_quadratic_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="QuadraticProduct-2085"><a href="#QuadraticProduct-2085"><span class="linenos">2085</span></a>
</span><span id="QuadraticProduct-2086"><a href="#QuadraticProduct-2086"><span class="linenos">2086</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="QuadraticProduct-2087"><a href="#QuadraticProduct-2087"><span class="linenos">2087</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;QuadraticProduct(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_quadratic</span><span class="si">!r}</span><span class="s2">)&quot;</span>
</span></pre></div>


            <div class="docstring"><p>A deferred multiplication computation for quadratic expressions.</p>

<p>This class is immutable.</p>
</div>


                            <div id="QuadraticProduct.__init__" class="classattr">
                                        <input id="QuadraticProduct.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">QuadraticProduct</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">scalar</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">quadratic</span><span class="p">:</span> <span class="n"><a href="#QuadraticBase">QuadraticBase</a></span></span>)</span>

                <label class="view-source-button" for="QuadraticProduct.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticProduct.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticProduct.__init__-2053"><a href="#QuadraticProduct.__init__-2053"><span class="linenos">2053</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scalar</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">quadratic</span><span class="p">:</span> <span class="n">QuadraticBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="QuadraticProduct.__init__-2054"><a href="#QuadraticProduct.__init__-2054"><span class="linenos">2054</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scalar</span><span class="p">,</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
</span><span id="QuadraticProduct.__init__-2055"><a href="#QuadraticProduct.__init__-2055"><span class="linenos">2055</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="QuadraticProduct.__init__-2056"><a href="#QuadraticProduct.__init__-2056"><span class="linenos">2056</span></a>                <span class="s2">&quot;unsupported type for scalar argument in &quot;</span>
</span><span id="QuadraticProduct.__init__-2057"><a href="#QuadraticProduct.__init__-2057"><span class="linenos">2057</span></a>                <span class="sa">f</span><span class="s2">&quot;QuadraticProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="QuadraticProduct.__init__-2058"><a href="#QuadraticProduct.__init__-2058"><span class="linenos">2058</span></a>            <span class="p">)</span>
</span><span id="QuadraticProduct.__init__-2059"><a href="#QuadraticProduct.__init__-2059"><span class="linenos">2059</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">quadratic</span><span class="p">,</span> <span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="QuadraticProduct.__init__-2060"><a href="#QuadraticProduct.__init__-2060"><span class="linenos">2060</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="QuadraticProduct.__init__-2061"><a href="#QuadraticProduct.__init__-2061"><span class="linenos">2061</span></a>                <span class="s2">&quot;unsupported type for linear argument in &quot;</span>
</span><span id="QuadraticProduct.__init__-2062"><a href="#QuadraticProduct.__init__-2062"><span class="linenos">2062</span></a>                <span class="sa">f</span><span class="s2">&quot;QuadraticProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">quadratic</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="QuadraticProduct.__init__-2063"><a href="#QuadraticProduct.__init__-2063"><span class="linenos">2063</span></a>            <span class="p">)</span>
</span><span id="QuadraticProduct.__init__-2064"><a href="#QuadraticProduct.__init__-2064"><span class="linenos">2064</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">scalar</span><span class="p">)</span>
</span><span id="QuadraticProduct.__init__-2065"><a href="#QuadraticProduct.__init__-2065"><span class="linenos">2065</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic</span><span class="p">:</span> <span class="n">QuadraticBase</span> <span class="o">=</span> <span class="n">quadratic</span>
</span></pre></div>


    

                            </div>
                            <div id="QuadraticProduct.scalar" class="classattr">
                                        <input id="QuadraticProduct.scalar-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">scalar</span><span class="annotation">: float</span>

                <label class="view-source-button" for="QuadraticProduct.scalar-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticProduct.scalar"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticProduct.scalar-2067"><a href="#QuadraticProduct.scalar-2067"><span class="linenos">2067</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticProduct.scalar-2068"><a href="#QuadraticProduct.scalar-2068"><span class="linenos">2068</span></a>    <span class="k">def</span> <span class="nf">scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
</span><span id="QuadraticProduct.scalar-2069"><a href="#QuadraticProduct.scalar-2069"><span class="linenos">2069</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scalar</span>
</span></pre></div>


    

                            </div>
                            <div id="QuadraticProduct.quadratic" class="classattr">
                                        <input id="QuadraticProduct.quadratic-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">quadratic</span><span class="annotation">: <a href="#QuadraticBase">QuadraticBase</a></span>

                <label class="view-source-button" for="QuadraticProduct.quadratic-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#QuadraticProduct.quadratic"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="QuadraticProduct.quadratic-2071"><a href="#QuadraticProduct.quadratic-2071"><span class="linenos">2071</span></a>    <span class="nd">@property</span>
</span><span id="QuadraticProduct.quadratic-2072"><a href="#QuadraticProduct.quadratic-2072"><span class="linenos">2072</span></a>    <span class="k">def</span> <span class="nf">quadratic</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QuadraticBase</span><span class="p">:</span>
</span><span id="QuadraticProduct.quadratic-2073"><a href="#QuadraticProduct.quadratic-2073"><span class="linenos">2073</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_quadratic</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="LinearLinearProduct">
                            <input id="LinearLinearProduct-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LinearLinearProduct</span><wbr>(<span class="base"><a href="#QuadraticBase">QuadraticBase</a></span>):

                <label class="view-source-button" for="LinearLinearProduct-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearLinearProduct"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearLinearProduct-2090"><a href="#LinearLinearProduct-2090"><span class="linenos">2090</span></a><span class="k">class</span> <span class="nc">LinearLinearProduct</span><span class="p">(</span><span class="n">QuadraticBase</span><span class="p">):</span>
</span><span id="LinearLinearProduct-2091"><a href="#LinearLinearProduct-2091"><span class="linenos">2091</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A deferred multiplication of two linear expressions.</span>
</span><span id="LinearLinearProduct-2092"><a href="#LinearLinearProduct-2092"><span class="linenos">2092</span></a>
</span><span id="LinearLinearProduct-2093"><a href="#LinearLinearProduct-2093"><span class="linenos">2093</span></a><span class="sd">    This class is immutable.</span>
</span><span id="LinearLinearProduct-2094"><a href="#LinearLinearProduct-2094"><span class="linenos">2094</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="LinearLinearProduct-2095"><a href="#LinearLinearProduct-2095"><span class="linenos">2095</span></a>
</span><span id="LinearLinearProduct-2096"><a href="#LinearLinearProduct-2096"><span class="linenos">2096</span></a>    <span class="vm">__slots__</span> <span class="o">=</span> <span class="s2">&quot;_first_linear&quot;</span><span class="p">,</span> <span class="s2">&quot;_second_linear&quot;</span>
</span><span id="LinearLinearProduct-2097"><a href="#LinearLinearProduct-2097"><span class="linenos">2097</span></a>
</span><span id="LinearLinearProduct-2098"><a href="#LinearLinearProduct-2098"><span class="linenos">2098</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_linear</span><span class="p">:</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="n">second_linear</span><span class="p">:</span> <span class="n">LinearBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearLinearProduct-2099"><a href="#LinearLinearProduct-2099"><span class="linenos">2099</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first_linear</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearLinearProduct-2100"><a href="#LinearLinearProduct-2100"><span class="linenos">2100</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="LinearLinearProduct-2101"><a href="#LinearLinearProduct-2101"><span class="linenos">2101</span></a>                <span class="s2">&quot;unsupported type for first_linear argument in &quot;</span>
</span><span id="LinearLinearProduct-2102"><a href="#LinearLinearProduct-2102"><span class="linenos">2102</span></a>                <span class="sa">f</span><span class="s2">&quot;LinearLinearProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">first_linear</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="LinearLinearProduct-2103"><a href="#LinearLinearProduct-2103"><span class="linenos">2103</span></a>            <span class="p">)</span>
</span><span id="LinearLinearProduct-2104"><a href="#LinearLinearProduct-2104"><span class="linenos">2104</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">second_linear</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearLinearProduct-2105"><a href="#LinearLinearProduct-2105"><span class="linenos">2105</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="LinearLinearProduct-2106"><a href="#LinearLinearProduct-2106"><span class="linenos">2106</span></a>                <span class="s2">&quot;unsupported type for second_linear argument in &quot;</span>
</span><span id="LinearLinearProduct-2107"><a href="#LinearLinearProduct-2107"><span class="linenos">2107</span></a>                <span class="sa">f</span><span class="s2">&quot;LinearLinearProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">second_linear</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="LinearLinearProduct-2108"><a href="#LinearLinearProduct-2108"><span class="linenos">2108</span></a>            <span class="p">)</span>
</span><span id="LinearLinearProduct-2109"><a href="#LinearLinearProduct-2109"><span class="linenos">2109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_first_linear</span><span class="p">:</span> <span class="n">LinearBase</span> <span class="o">=</span> <span class="n">first_linear</span>
</span><span id="LinearLinearProduct-2110"><a href="#LinearLinearProduct-2110"><span class="linenos">2110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_second_linear</span><span class="p">:</span> <span class="n">LinearBase</span> <span class="o">=</span> <span class="n">second_linear</span>
</span><span id="LinearLinearProduct-2111"><a href="#LinearLinearProduct-2111"><span class="linenos">2111</span></a>
</span><span id="LinearLinearProduct-2112"><a href="#LinearLinearProduct-2112"><span class="linenos">2112</span></a>    <span class="nd">@property</span>
</span><span id="LinearLinearProduct-2113"><a href="#LinearLinearProduct-2113"><span class="linenos">2113</span></a>    <span class="k">def</span> <span class="nf">first_linear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearBase</span><span class="p">:</span>
</span><span id="LinearLinearProduct-2114"><a href="#LinearLinearProduct-2114"><span class="linenos">2114</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_linear</span>
</span><span id="LinearLinearProduct-2115"><a href="#LinearLinearProduct-2115"><span class="linenos">2115</span></a>
</span><span id="LinearLinearProduct-2116"><a href="#LinearLinearProduct-2116"><span class="linenos">2116</span></a>    <span class="nd">@property</span>
</span><span id="LinearLinearProduct-2117"><a href="#LinearLinearProduct-2117"><span class="linenos">2117</span></a>    <span class="k">def</span> <span class="nf">second_linear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearBase</span><span class="p">:</span>
</span><span id="LinearLinearProduct-2118"><a href="#LinearLinearProduct-2118"><span class="linenos">2118</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_linear</span>
</span><span id="LinearLinearProduct-2119"><a href="#LinearLinearProduct-2119"><span class="linenos">2119</span></a>
</span><span id="LinearLinearProduct-2120"><a href="#LinearLinearProduct-2120"><span class="linenos">2120</span></a>    <span class="k">def</span> <span class="nf">_quadratic_flatten_once_and_add_to</span><span class="p">(</span>
</span><span id="LinearLinearProduct-2121"><a href="#LinearLinearProduct-2121"><span class="linenos">2121</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="LinearLinearProduct-2122"><a href="#LinearLinearProduct-2122"><span class="linenos">2122</span></a>        <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="LinearLinearProduct-2123"><a href="#LinearLinearProduct-2123"><span class="linenos">2123</span></a>        <span class="n">processed_elements</span><span class="p">:</span> <span class="n">_QuadraticProcessedElements</span><span class="p">,</span>
</span><span id="LinearLinearProduct-2124"><a href="#LinearLinearProduct-2124"><span class="linenos">2124</span></a>        <span class="n">target_stack</span><span class="p">:</span> <span class="n">_QuadraticToProcessElements</span><span class="p">,</span>
</span><span id="LinearLinearProduct-2125"><a href="#LinearLinearProduct-2125"><span class="linenos">2125</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearLinearProduct-2126"><a href="#LinearLinearProduct-2126"><span class="linenos">2126</span></a>        <span class="c1"># A recursion is avoided here because as_flat_linear_expression() must never</span>
</span><span id="LinearLinearProduct-2127"><a href="#LinearLinearProduct-2127"><span class="linenos">2127</span></a>        <span class="c1"># call _quadratic_flatten_once_and_add_to().</span>
</span><span id="LinearLinearProduct-2128"><a href="#LinearLinearProduct-2128"><span class="linenos">2128</span></a>        <span class="n">first_expression</span> <span class="o">=</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_first_linear</span><span class="p">)</span>
</span><span id="LinearLinearProduct-2129"><a href="#LinearLinearProduct-2129"><span class="linenos">2129</span></a>        <span class="n">second_expression</span> <span class="o">=</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_second_linear</span><span class="p">)</span>
</span><span id="LinearLinearProduct-2130"><a href="#LinearLinearProduct-2130"><span class="linenos">2130</span></a>        <span class="n">processed_elements</span><span class="o">.</span><span class="n">offset</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="LinearLinearProduct-2131"><a href="#LinearLinearProduct-2131"><span class="linenos">2131</span></a>            <span class="n">first_expression</span><span class="o">.</span><span class="n">offset</span> <span class="o">*</span> <span class="n">second_expression</span><span class="o">.</span><span class="n">offset</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="LinearLinearProduct-2132"><a href="#LinearLinearProduct-2132"><span class="linenos">2132</span></a>        <span class="p">)</span>
</span><span id="LinearLinearProduct-2133"><a href="#LinearLinearProduct-2133"><span class="linenos">2133</span></a>        <span class="k">for</span> <span class="n">first_var</span><span class="p">,</span> <span class="n">first_val</span> <span class="ow">in</span> <span class="n">first_expression</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="LinearLinearProduct-2134"><a href="#LinearLinearProduct-2134"><span class="linenos">2134</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="n">first_var</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="LinearLinearProduct-2135"><a href="#LinearLinearProduct-2135"><span class="linenos">2135</span></a>                <span class="n">second_expression</span><span class="o">.</span><span class="n">offset</span> <span class="o">*</span> <span class="n">first_val</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="LinearLinearProduct-2136"><a href="#LinearLinearProduct-2136"><span class="linenos">2136</span></a>            <span class="p">)</span>
</span><span id="LinearLinearProduct-2137"><a href="#LinearLinearProduct-2137"><span class="linenos">2137</span></a>        <span class="k">for</span> <span class="n">second_var</span><span class="p">,</span> <span class="n">second_val</span> <span class="ow">in</span> <span class="n">second_expression</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="LinearLinearProduct-2138"><a href="#LinearLinearProduct-2138"><span class="linenos">2138</span></a>            <span class="n">processed_elements</span><span class="o">.</span><span class="n">terms</span><span class="p">[</span><span class="n">second_var</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span>
</span><span id="LinearLinearProduct-2139"><a href="#LinearLinearProduct-2139"><span class="linenos">2139</span></a>                <span class="n">first_expression</span><span class="o">.</span><span class="n">offset</span> <span class="o">*</span> <span class="n">second_val</span> <span class="o">*</span> <span class="n">scale</span>
</span><span id="LinearLinearProduct-2140"><a href="#LinearLinearProduct-2140"><span class="linenos">2140</span></a>            <span class="p">)</span>
</span><span id="LinearLinearProduct-2141"><a href="#LinearLinearProduct-2141"><span class="linenos">2141</span></a>
</span><span id="LinearLinearProduct-2142"><a href="#LinearLinearProduct-2142"><span class="linenos">2142</span></a>        <span class="k">for</span> <span class="n">first_var</span><span class="p">,</span> <span class="n">first_val</span> <span class="ow">in</span> <span class="n">first_expression</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="LinearLinearProduct-2143"><a href="#LinearLinearProduct-2143"><span class="linenos">2143</span></a>            <span class="k">for</span> <span class="n">second_var</span><span class="p">,</span> <span class="n">second_val</span> <span class="ow">in</span> <span class="n">second_expression</span><span class="o">.</span><span class="n">terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="LinearLinearProduct-2144"><a href="#LinearLinearProduct-2144"><span class="linenos">2144</span></a>                <span class="n">processed_elements</span><span class="o">.</span><span class="n">quadratic_terms</span><span class="p">[</span>
</span><span id="LinearLinearProduct-2145"><a href="#LinearLinearProduct-2145"><span class="linenos">2145</span></a>                    <span class="n">QuadraticTermKey</span><span class="p">(</span><span class="n">first_var</span><span class="p">,</span> <span class="n">second_var</span><span class="p">)</span>
</span><span id="LinearLinearProduct-2146"><a href="#LinearLinearProduct-2146"><span class="linenos">2146</span></a>                <span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="n">first_val</span> <span class="o">*</span> <span class="n">second_val</span> <span class="o">*</span> <span class="n">scale</span><span class="p">)</span>
</span><span id="LinearLinearProduct-2147"><a href="#LinearLinearProduct-2147"><span class="linenos">2147</span></a>
</span><span id="LinearLinearProduct-2148"><a href="#LinearLinearProduct-2148"><span class="linenos">2148</span></a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearLinearProduct-2149"><a href="#LinearLinearProduct-2149"><span class="linenos">2149</span></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">as_flat_quadratic_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="LinearLinearProduct-2150"><a href="#LinearLinearProduct-2150"><span class="linenos">2150</span></a>
</span><span id="LinearLinearProduct-2151"><a href="#LinearLinearProduct-2151"><span class="linenos">2151</span></a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="LinearLinearProduct-2152"><a href="#LinearLinearProduct-2152"><span class="linenos">2152</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="s2">&quot;LinearLinearProduct(&quot;</span>
</span><span id="LinearLinearProduct-2153"><a href="#LinearLinearProduct-2153"><span class="linenos">2153</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_first_linear</span><span class="si">!r}</span><span class="s2">, &quot;</span>
</span><span id="LinearLinearProduct-2154"><a href="#LinearLinearProduct-2154"><span class="linenos">2154</span></a>        <span class="n">result</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_second_linear</span><span class="si">!r}</span><span class="s2">)&quot;</span>
</span><span id="LinearLinearProduct-2155"><a href="#LinearLinearProduct-2155"><span class="linenos">2155</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>A deferred multiplication of two linear expressions.</p>

<p>This class is immutable.</p>
</div>


                            <div id="LinearLinearProduct.__init__" class="classattr">
                                        <input id="LinearLinearProduct.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">LinearLinearProduct</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">first_linear</span><span class="p">:</span> <span class="n"><a href="#LinearBase">LinearBase</a></span>,</span><span class="param">	<span class="n">second_linear</span><span class="p">:</span> <span class="n"><a href="#LinearBase">LinearBase</a></span></span>)</span>

                <label class="view-source-button" for="LinearLinearProduct.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearLinearProduct.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearLinearProduct.__init__-2098"><a href="#LinearLinearProduct.__init__-2098"><span class="linenos">2098</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_linear</span><span class="p">:</span> <span class="n">LinearBase</span><span class="p">,</span> <span class="n">second_linear</span><span class="p">:</span> <span class="n">LinearBase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="LinearLinearProduct.__init__-2099"><a href="#LinearLinearProduct.__init__-2099"><span class="linenos">2099</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">first_linear</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearLinearProduct.__init__-2100"><a href="#LinearLinearProduct.__init__-2100"><span class="linenos">2100</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="LinearLinearProduct.__init__-2101"><a href="#LinearLinearProduct.__init__-2101"><span class="linenos">2101</span></a>                <span class="s2">&quot;unsupported type for first_linear argument in &quot;</span>
</span><span id="LinearLinearProduct.__init__-2102"><a href="#LinearLinearProduct.__init__-2102"><span class="linenos">2102</span></a>                <span class="sa">f</span><span class="s2">&quot;LinearLinearProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">first_linear</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="LinearLinearProduct.__init__-2103"><a href="#LinearLinearProduct.__init__-2103"><span class="linenos">2103</span></a>            <span class="p">)</span>
</span><span id="LinearLinearProduct.__init__-2104"><a href="#LinearLinearProduct.__init__-2104"><span class="linenos">2104</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">second_linear</span><span class="p">,</span> <span class="n">LinearBase</span><span class="p">):</span>
</span><span id="LinearLinearProduct.__init__-2105"><a href="#LinearLinearProduct.__init__-2105"><span class="linenos">2105</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="LinearLinearProduct.__init__-2106"><a href="#LinearLinearProduct.__init__-2106"><span class="linenos">2106</span></a>                <span class="s2">&quot;unsupported type for second_linear argument in &quot;</span>
</span><span id="LinearLinearProduct.__init__-2107"><a href="#LinearLinearProduct.__init__-2107"><span class="linenos">2107</span></a>                <span class="sa">f</span><span class="s2">&quot;LinearLinearProduct: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">second_linear</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="LinearLinearProduct.__init__-2108"><a href="#LinearLinearProduct.__init__-2108"><span class="linenos">2108</span></a>            <span class="p">)</span>
</span><span id="LinearLinearProduct.__init__-2109"><a href="#LinearLinearProduct.__init__-2109"><span class="linenos">2109</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_first_linear</span><span class="p">:</span> <span class="n">LinearBase</span> <span class="o">=</span> <span class="n">first_linear</span>
</span><span id="LinearLinearProduct.__init__-2110"><a href="#LinearLinearProduct.__init__-2110"><span class="linenos">2110</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_second_linear</span><span class="p">:</span> <span class="n">LinearBase</span> <span class="o">=</span> <span class="n">second_linear</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearLinearProduct.first_linear" class="classattr">
                                        <input id="LinearLinearProduct.first_linear-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">first_linear</span><span class="annotation">: <a href="#LinearBase">LinearBase</a></span>

                <label class="view-source-button" for="LinearLinearProduct.first_linear-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearLinearProduct.first_linear"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearLinearProduct.first_linear-2112"><a href="#LinearLinearProduct.first_linear-2112"><span class="linenos">2112</span></a>    <span class="nd">@property</span>
</span><span id="LinearLinearProduct.first_linear-2113"><a href="#LinearLinearProduct.first_linear-2113"><span class="linenos">2113</span></a>    <span class="k">def</span> <span class="nf">first_linear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearBase</span><span class="p">:</span>
</span><span id="LinearLinearProduct.first_linear-2114"><a href="#LinearLinearProduct.first_linear-2114"><span class="linenos">2114</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_linear</span>
</span></pre></div>


    

                            </div>
                            <div id="LinearLinearProduct.second_linear" class="classattr">
                                        <input id="LinearLinearProduct.second_linear-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">second_linear</span><span class="annotation">: <a href="#LinearBase">LinearBase</a></span>

                <label class="view-source-button" for="LinearLinearProduct.second_linear-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LinearLinearProduct.second_linear"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LinearLinearProduct.second_linear-2116"><a href="#LinearLinearProduct.second_linear-2116"><span class="linenos">2116</span></a>    <span class="nd">@property</span>
</span><span id="LinearLinearProduct.second_linear-2117"><a href="#LinearLinearProduct.second_linear-2117"><span class="linenos">2117</span></a>    <span class="k">def</span> <span class="nf">second_linear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearBase</span><span class="p">:</span>
</span><span id="LinearLinearProduct.second_linear-2118"><a href="#LinearLinearProduct.second_linear-2118"><span class="linenos">2118</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_second_linear</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="as_flat_linear_expression">
                            <input id="as_flat_linear_expression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">as_flat_linear_expression</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n"><a href="#LinearExpression">LinearExpression</a></span>:</span></span>

                <label class="view-source-button" for="as_flat_linear_expression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#as_flat_linear_expression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="as_flat_linear_expression-2158"><a href="#as_flat_linear_expression-2158"><span class="linenos">2158</span></a><span class="k">def</span> <span class="nf">as_flat_linear_expression</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LinearExpression</span><span class="p">:</span>
</span><span id="as_flat_linear_expression-2159"><a href="#as_flat_linear_expression-2159"><span class="linenos">2159</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts floats, ints and Linear objects to a LinearExpression.&quot;&quot;&quot;</span>
</span><span id="as_flat_linear_expression-2160"><a href="#as_flat_linear_expression-2160"><span class="linenos">2160</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">LinearExpression</span><span class="p">):</span>
</span><span id="as_flat_linear_expression-2161"><a href="#as_flat_linear_expression-2161"><span class="linenos">2161</span></a>        <span class="k">return</span> <span class="n">value</span>
</span><span id="as_flat_linear_expression-2162"><a href="#as_flat_linear_expression-2162"><span class="linenos">2162</span></a>    <span class="k">return</span> <span class="n">LinearExpression</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Converts floats, ints and Linear objects to a LinearExpression.</p>
</div>


                </section>
                <section id="as_flat_quadratic_expression">
                            <input id="as_flat_quadratic_expression-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">as_flat_quadratic_expression</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">value</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">,</span> <span class="n"><a href="#QuadraticBase">QuadraticBase</a></span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n"><a href="#QuadraticExpression">QuadraticExpression</a></span>:</span></span>

                <label class="view-source-button" for="as_flat_quadratic_expression-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#as_flat_quadratic_expression"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="as_flat_quadratic_expression-2165"><a href="#as_flat_quadratic_expression-2165"><span class="linenos">2165</span></a><span class="k">def</span> <span class="nf">as_flat_quadratic_expression</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="n">QuadraticTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">QuadraticExpression</span><span class="p">:</span>
</span><span id="as_flat_quadratic_expression-2166"><a href="#as_flat_quadratic_expression-2166"><span class="linenos">2166</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts floats, ints, LinearBase and QuadraticBase objects to a QuadraticExpression.&quot;&quot;&quot;</span>
</span><span id="as_flat_quadratic_expression-2167"><a href="#as_flat_quadratic_expression-2167"><span class="linenos">2167</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">QuadraticExpression</span><span class="p">):</span>
</span><span id="as_flat_quadratic_expression-2168"><a href="#as_flat_quadratic_expression-2168"><span class="linenos">2168</span></a>        <span class="k">return</span> <span class="n">value</span>
</span><span id="as_flat_quadratic_expression-2169"><a href="#as_flat_quadratic_expression-2169"><span class="linenos">2169</span></a>    <span class="k">return</span> <span class="n">QuadraticExpression</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Converts floats, ints, LinearBase and QuadraticBase objects to a QuadraticExpression.</p>
</div>


                </section>
                <section id="NormalizedLinearInequality">
                            <input id="NormalizedLinearInequality-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclasses.dataclass</div>

    <span class="def">class</span>
    <span class="name">NormalizedLinearInequality</span>:

                <label class="view-source-button" for="NormalizedLinearInequality-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NormalizedLinearInequality"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NormalizedLinearInequality-2172"><a href="#NormalizedLinearInequality-2172"><span class="linenos">2172</span></a><span class="nd">@dataclasses</span><span class="o">.</span><span class="n">dataclass</span>
</span><span id="NormalizedLinearInequality-2173"><a href="#NormalizedLinearInequality-2173"><span class="linenos">2173</span></a><span class="k">class</span> <span class="nc">NormalizedLinearInequality</span><span class="p">:</span>
</span><span id="NormalizedLinearInequality-2174"><a href="#NormalizedLinearInequality-2174"><span class="linenos">2174</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents an inequality lb &lt;= expr &lt;= ub where expr&#39;s offset is zero.</span>
</span><span id="NormalizedLinearInequality-2175"><a href="#NormalizedLinearInequality-2175"><span class="linenos">2175</span></a>
</span><span id="NormalizedLinearInequality-2176"><a href="#NormalizedLinearInequality-2176"><span class="linenos">2176</span></a><span class="sd">    The inequality is of the form:</span>
</span><span id="NormalizedLinearInequality-2177"><a href="#NormalizedLinearInequality-2177"><span class="linenos">2177</span></a><span class="sd">        lb &lt;= sum_{x in V} coefficients[x] * x &lt;= ub</span>
</span><span id="NormalizedLinearInequality-2178"><a href="#NormalizedLinearInequality-2178"><span class="linenos">2178</span></a><span class="sd">    where V is the set of keys of coefficients.</span>
</span><span id="NormalizedLinearInequality-2179"><a href="#NormalizedLinearInequality-2179"><span class="linenos">2179</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="NormalizedLinearInequality-2180"><a href="#NormalizedLinearInequality-2180"><span class="linenos">2180</span></a>
</span><span id="NormalizedLinearInequality-2181"><a href="#NormalizedLinearInequality-2181"><span class="linenos">2181</span></a>    <span class="n">lb</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="NormalizedLinearInequality-2182"><a href="#NormalizedLinearInequality-2182"><span class="linenos">2182</span></a>    <span class="n">ub</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="NormalizedLinearInequality-2183"><a href="#NormalizedLinearInequality-2183"><span class="linenos">2183</span></a>    <span class="n">coefficients</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="n">Variable</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span>
</span><span id="NormalizedLinearInequality-2184"><a href="#NormalizedLinearInequality-2184"><span class="linenos">2184</span></a>
</span><span id="NormalizedLinearInequality-2185"><a href="#NormalizedLinearInequality-2185"><span class="linenos">2185</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">lb</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ub</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="NormalizedLinearInequality-2186"><a href="#NormalizedLinearInequality-2186"><span class="linenos">2186</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Raises a ValueError if expr&#39;s offset is infinite.&quot;&quot;&quot;</span>
</span><span id="NormalizedLinearInequality-2187"><a href="#NormalizedLinearInequality-2187"><span class="linenos">2187</span></a>        <span class="n">flat_expr</span> <span class="o">=</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="NormalizedLinearInequality-2188"><a href="#NormalizedLinearInequality-2188"><span class="linenos">2188</span></a>        <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">flat_expr</span><span class="o">.</span><span class="n">offset</span><span class="p">):</span>
</span><span id="NormalizedLinearInequality-2189"><a href="#NormalizedLinearInequality-2189"><span class="linenos">2189</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="NormalizedLinearInequality-2190"><a href="#NormalizedLinearInequality-2190"><span class="linenos">2190</span></a>                <span class="s2">&quot;Trying to create a linear constraint whose expression has an&quot;</span>
</span><span id="NormalizedLinearInequality-2191"><a href="#NormalizedLinearInequality-2191"><span class="linenos">2191</span></a>                <span class="s2">&quot; infinite offset.&quot;</span>
</span><span id="NormalizedLinearInequality-2192"><a href="#NormalizedLinearInequality-2192"><span class="linenos">2192</span></a>            <span class="p">)</span>
</span><span id="NormalizedLinearInequality-2193"><a href="#NormalizedLinearInequality-2193"><span class="linenos">2193</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">lb</span> <span class="o">=</span> <span class="n">lb</span> <span class="o">-</span> <span class="n">flat_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="NormalizedLinearInequality-2194"><a href="#NormalizedLinearInequality-2194"><span class="linenos">2194</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ub</span> <span class="o">=</span> <span class="n">ub</span> <span class="o">-</span> <span class="n">flat_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="NormalizedLinearInequality-2195"><a href="#NormalizedLinearInequality-2195"><span class="linenos">2195</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="n">flat_expr</span><span class="o">.</span><span class="n">terms</span>
</span></pre></div>


            <div class="docstring"><p>Represents an inequality lb &lt;= expr &lt;= ub where expr's offset is zero.</p>

<h6 id="the-inequality-is-of-the-form">The inequality is of the form:</h6>

<blockquote>
  <p>lb &lt;= sum_{x in V} coefficients[x] * x &lt;= ub</p>
</blockquote>

<p>where V is the set of keys of coefficients.</p>
</div>


                            <div id="NormalizedLinearInequality.__init__" class="classattr">
                                        <input id="NormalizedLinearInequality.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">NormalizedLinearInequality</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">lb</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">ub</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">expr</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">]</span></span>)</span>

                <label class="view-source-button" for="NormalizedLinearInequality.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#NormalizedLinearInequality.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="NormalizedLinearInequality.__init__-2185"><a href="#NormalizedLinearInequality.__init__-2185"><span class="linenos">2185</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">lb</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">ub</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">expr</span><span class="p">:</span> <span class="n">LinearTypes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="NormalizedLinearInequality.__init__-2186"><a href="#NormalizedLinearInequality.__init__-2186"><span class="linenos">2186</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Raises a ValueError if expr&#39;s offset is infinite.&quot;&quot;&quot;</span>
</span><span id="NormalizedLinearInequality.__init__-2187"><a href="#NormalizedLinearInequality.__init__-2187"><span class="linenos">2187</span></a>        <span class="n">flat_expr</span> <span class="o">=</span> <span class="n">as_flat_linear_expression</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</span><span id="NormalizedLinearInequality.__init__-2188"><a href="#NormalizedLinearInequality.__init__-2188"><span class="linenos">2188</span></a>        <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">flat_expr</span><span class="o">.</span><span class="n">offset</span><span class="p">):</span>
</span><span id="NormalizedLinearInequality.__init__-2189"><a href="#NormalizedLinearInequality.__init__-2189"><span class="linenos">2189</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
</span><span id="NormalizedLinearInequality.__init__-2190"><a href="#NormalizedLinearInequality.__init__-2190"><span class="linenos">2190</span></a>                <span class="s2">&quot;Trying to create a linear constraint whose expression has an&quot;</span>
</span><span id="NormalizedLinearInequality.__init__-2191"><a href="#NormalizedLinearInequality.__init__-2191"><span class="linenos">2191</span></a>                <span class="s2">&quot; infinite offset.&quot;</span>
</span><span id="NormalizedLinearInequality.__init__-2192"><a href="#NormalizedLinearInequality.__init__-2192"><span class="linenos">2192</span></a>            <span class="p">)</span>
</span><span id="NormalizedLinearInequality.__init__-2193"><a href="#NormalizedLinearInequality.__init__-2193"><span class="linenos">2193</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">lb</span> <span class="o">=</span> <span class="n">lb</span> <span class="o">-</span> <span class="n">flat_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="NormalizedLinearInequality.__init__-2194"><a href="#NormalizedLinearInequality.__init__-2194"><span class="linenos">2194</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ub</span> <span class="o">=</span> <span class="n">ub</span> <span class="o">-</span> <span class="n">flat_expr</span><span class="o">.</span><span class="n">offset</span>
</span><span id="NormalizedLinearInequality.__init__-2195"><a href="#NormalizedLinearInequality.__init__-2195"><span class="linenos">2195</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">=</span> <span class="n">flat_expr</span><span class="o">.</span><span class="n">terms</span>
</span></pre></div>


            <div class="docstring"><p>Raises a ValueError if expr's offset is infinite.</p>
</div>


                            </div>
                            <div id="NormalizedLinearInequality.lb" class="classattr">
                                <div class="attr variable">
            <span class="name">lb</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#NormalizedLinearInequality.lb"></a>
    
    

                            </div>
                            <div id="NormalizedLinearInequality.ub" class="classattr">
                                <div class="attr variable">
            <span class="name">ub</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#NormalizedLinearInequality.ub"></a>
    
    

                            </div>
                            <div id="NormalizedLinearInequality.coefficients" class="classattr">
                                <div class="attr variable">
            <span class="name">coefficients</span><span class="annotation">: Mapping[<a href="#Variable">Variable</a>, float]</span>

        
    </div>
    <a class="headerlink" href="#NormalizedLinearInequality.coefficients"></a>
    
    

                            </div>
                </section>
                <section id="as_normalized_linear_inequality">
                            <input id="as_normalized_linear_inequality-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">as_normalized_linear_inequality</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">bounded_expr</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n"><a href="#LowerBoundedLinearExpression">LowerBoundedLinearExpression</a></span><span class="p">,</span> <span class="n"><a href="#UpperBoundedLinearExpression">UpperBoundedLinearExpression</a></span><span class="p">,</span> <span class="n"><a href="#BoundedLinearExpression">BoundedLinearExpression</a></span><span class="p">,</span> <span class="n"><a href="#VarEqVar">VarEqVar</a></span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">lb</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">ub</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">expr</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="n"><a href="#LinearBase">LinearBase</a></span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n"><a href="#NormalizedLinearInequality">NormalizedLinearInequality</a></span>:</span></span>

                <label class="view-source-button" for="as_normalized_linear_inequality-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#as_normalized_linear_inequality"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="as_normalized_linear_inequality-2201"><a href="#as_normalized_linear_inequality-2201"><span class="linenos">2201</span></a><span class="k">def</span> <span class="nf">as_normalized_linear_inequality</span><span class="p">(</span>
</span><span id="as_normalized_linear_inequality-2202"><a href="#as_normalized_linear_inequality-2202"><span class="linenos">2202</span></a>    <span class="n">bounded_expr</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="n">BoundedLinearTypes</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="as_normalized_linear_inequality-2203"><a href="#as_normalized_linear_inequality-2203"><span class="linenos">2203</span></a>    <span class="o">*</span><span class="p">,</span>
</span><span id="as_normalized_linear_inequality-2204"><a href="#as_normalized_linear_inequality-2204"><span class="linenos">2204</span></a>    <span class="n">lb</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="as_normalized_linear_inequality-2205"><a href="#as_normalized_linear_inequality-2205"><span class="linenos">2205</span></a>    <span class="n">ub</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="as_normalized_linear_inequality-2206"><a href="#as_normalized_linear_inequality-2206"><span class="linenos">2206</span></a>    <span class="n">expr</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">LinearTypes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="as_normalized_linear_inequality-2207"><a href="#as_normalized_linear_inequality-2207"><span class="linenos">2207</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NormalizedLinearInequality</span><span class="p">:</span>
</span><span id="as_normalized_linear_inequality-2208"><a href="#as_normalized_linear_inequality-2208"><span class="linenos">2208</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts a linear constraint to a NormalizedLinearInequality.</span>
</span><span id="as_normalized_linear_inequality-2209"><a href="#as_normalized_linear_inequality-2209"><span class="linenos">2209</span></a>
</span><span id="as_normalized_linear_inequality-2210"><a href="#as_normalized_linear_inequality-2210"><span class="linenos">2210</span></a><span class="sd">    The simplest way to specify the constraint is by passing a one-sided or</span>
</span><span id="as_normalized_linear_inequality-2211"><a href="#as_normalized_linear_inequality-2211"><span class="linenos">2211</span></a><span class="sd">    two-sided linear inequality as in:</span>
</span><span id="as_normalized_linear_inequality-2212"><a href="#as_normalized_linear_inequality-2212"><span class="linenos">2212</span></a><span class="sd">      * as_normalized_linear_inequality(x + y + 1.0 &lt;= 2.0),</span>
</span><span id="as_normalized_linear_inequality-2213"><a href="#as_normalized_linear_inequality-2213"><span class="linenos">2213</span></a><span class="sd">      * as_normalized_linear_inequality(x + y &gt;= 2.0), or</span>
</span><span id="as_normalized_linear_inequality-2214"><a href="#as_normalized_linear_inequality-2214"><span class="linenos">2214</span></a><span class="sd">      * as_normalized_linear_inequality((1.0 &lt;= x + y) &lt;= 2.0).</span>
</span><span id="as_normalized_linear_inequality-2215"><a href="#as_normalized_linear_inequality-2215"><span class="linenos">2215</span></a>
</span><span id="as_normalized_linear_inequality-2216"><a href="#as_normalized_linear_inequality-2216"><span class="linenos">2216</span></a><span class="sd">    Note the extra parenthesis for two-sided linear inequalities, which is</span>
</span><span id="as_normalized_linear_inequality-2217"><a href="#as_normalized_linear_inequality-2217"><span class="linenos">2217</span></a><span class="sd">    required due to some language limitations (see</span>
</span><span id="as_normalized_linear_inequality-2218"><a href="#as_normalized_linear_inequality-2218"><span class="linenos">2218</span></a><span class="sd">    https://peps.python.org/pep-0335/ and https://peps.python.org/pep-0535/).</span>
</span><span id="as_normalized_linear_inequality-2219"><a href="#as_normalized_linear_inequality-2219"><span class="linenos">2219</span></a><span class="sd">    If the parenthesis are omitted, a TypeError will be raised explaining the</span>
</span><span id="as_normalized_linear_inequality-2220"><a href="#as_normalized_linear_inequality-2220"><span class="linenos">2220</span></a><span class="sd">    issue (if this error was not raised the first inequality would have been</span>
</span><span id="as_normalized_linear_inequality-2221"><a href="#as_normalized_linear_inequality-2221"><span class="linenos">2221</span></a><span class="sd">    silently ignored because of the noted language limitations).</span>
</span><span id="as_normalized_linear_inequality-2222"><a href="#as_normalized_linear_inequality-2222"><span class="linenos">2222</span></a>
</span><span id="as_normalized_linear_inequality-2223"><a href="#as_normalized_linear_inequality-2223"><span class="linenos">2223</span></a><span class="sd">    The second way to specify the constraint is by setting lb, ub, and/o expr as</span>
</span><span id="as_normalized_linear_inequality-2224"><a href="#as_normalized_linear_inequality-2224"><span class="linenos">2224</span></a><span class="sd">    in:</span>
</span><span id="as_normalized_linear_inequality-2225"><a href="#as_normalized_linear_inequality-2225"><span class="linenos">2225</span></a><span class="sd">      * as_normalized_linear_inequality(expr=x + y + 1.0, ub=2.0),</span>
</span><span id="as_normalized_linear_inequality-2226"><a href="#as_normalized_linear_inequality-2226"><span class="linenos">2226</span></a><span class="sd">      * as_normalized_linear_inequality(expr=x + y, lb=2.0),</span>
</span><span id="as_normalized_linear_inequality-2227"><a href="#as_normalized_linear_inequality-2227"><span class="linenos">2227</span></a><span class="sd">      * as_normalized_linear_inequality(expr=x + y, lb=1.0, ub=2.0), or</span>
</span><span id="as_normalized_linear_inequality-2228"><a href="#as_normalized_linear_inequality-2228"><span class="linenos">2228</span></a><span class="sd">      * as_normalized_linear_inequality(lb=1.0).</span>
</span><span id="as_normalized_linear_inequality-2229"><a href="#as_normalized_linear_inequality-2229"><span class="linenos">2229</span></a><span class="sd">    Omitting lb is equivalent to setting it to -math.inf and omiting ub is</span>
</span><span id="as_normalized_linear_inequality-2230"><a href="#as_normalized_linear_inequality-2230"><span class="linenos">2230</span></a><span class="sd">    equivalent to setting it to math.inf.</span>
</span><span id="as_normalized_linear_inequality-2231"><a href="#as_normalized_linear_inequality-2231"><span class="linenos">2231</span></a>
</span><span id="as_normalized_linear_inequality-2232"><a href="#as_normalized_linear_inequality-2232"><span class="linenos">2232</span></a><span class="sd">    These two alternatives are exclusive and a combined call like:</span>
</span><span id="as_normalized_linear_inequality-2233"><a href="#as_normalized_linear_inequality-2233"><span class="linenos">2233</span></a><span class="sd">      * as_normalized_linear_inequality(x + y &lt;= 2.0, lb=1.0), or</span>
</span><span id="as_normalized_linear_inequality-2234"><a href="#as_normalized_linear_inequality-2234"><span class="linenos">2234</span></a><span class="sd">      * as_normalized_linear_inequality(x + y &lt;= 2.0, ub=math.inf)</span>
</span><span id="as_normalized_linear_inequality-2235"><a href="#as_normalized_linear_inequality-2235"><span class="linenos">2235</span></a><span class="sd">    will raise a ValueError. A ValueError is also raised if expr&#39;s offset is</span>
</span><span id="as_normalized_linear_inequality-2236"><a href="#as_normalized_linear_inequality-2236"><span class="linenos">2236</span></a><span class="sd">    infinite.</span>
</span><span id="as_normalized_linear_inequality-2237"><a href="#as_normalized_linear_inequality-2237"><span class="linenos">2237</span></a>
</span><span id="as_normalized_linear_inequality-2238"><a href="#as_normalized_linear_inequality-2238"><span class="linenos">2238</span></a><span class="sd">    Args:</span>
</span><span id="as_normalized_linear_inequality-2239"><a href="#as_normalized_linear_inequality-2239"><span class="linenos">2239</span></a><span class="sd">      bounded_expr: a linear inequality describing the constraint. Cannot be</span>
</span><span id="as_normalized_linear_inequality-2240"><a href="#as_normalized_linear_inequality-2240"><span class="linenos">2240</span></a><span class="sd">        specified together with lb, ub, or expr.</span>
</span><span id="as_normalized_linear_inequality-2241"><a href="#as_normalized_linear_inequality-2241"><span class="linenos">2241</span></a><span class="sd">      lb: The constraint&#39;s lower bound if bounded_expr is omitted (if both</span>
</span><span id="as_normalized_linear_inequality-2242"><a href="#as_normalized_linear_inequality-2242"><span class="linenos">2242</span></a><span class="sd">        bounder_expr and lb are omitted, the lower bound is -math.inf).</span>
</span><span id="as_normalized_linear_inequality-2243"><a href="#as_normalized_linear_inequality-2243"><span class="linenos">2243</span></a><span class="sd">      ub: The constraint&#39;s upper bound if bounded_expr is omitted (if both</span>
</span><span id="as_normalized_linear_inequality-2244"><a href="#as_normalized_linear_inequality-2244"><span class="linenos">2244</span></a><span class="sd">        bounder_expr and ub are omitted, the upper bound is math.inf).</span>
</span><span id="as_normalized_linear_inequality-2245"><a href="#as_normalized_linear_inequality-2245"><span class="linenos">2245</span></a><span class="sd">      expr: The constraint&#39;s linear expression if bounded_expr is omitted.</span>
</span><span id="as_normalized_linear_inequality-2246"><a href="#as_normalized_linear_inequality-2246"><span class="linenos">2246</span></a>
</span><span id="as_normalized_linear_inequality-2247"><a href="#as_normalized_linear_inequality-2247"><span class="linenos">2247</span></a><span class="sd">    Returns:</span>
</span><span id="as_normalized_linear_inequality-2248"><a href="#as_normalized_linear_inequality-2248"><span class="linenos">2248</span></a><span class="sd">      A NormalizedLinearInequality representing the linear constraint.</span>
</span><span id="as_normalized_linear_inequality-2249"><a href="#as_normalized_linear_inequality-2249"><span class="linenos">2249</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="as_normalized_linear_inequality-2250"><a href="#as_normalized_linear_inequality-2250"><span class="linenos">2250</span></a>    <span class="k">if</span> <span class="n">bounded_expr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="as_normalized_linear_inequality-2251"><a href="#as_normalized_linear_inequality-2251"><span class="linenos">2251</span></a>        <span class="k">if</span> <span class="n">lb</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="as_normalized_linear_inequality-2252"><a href="#as_normalized_linear_inequality-2252"><span class="linenos">2252</span></a>            <span class="n">lb</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span>
</span><span id="as_normalized_linear_inequality-2253"><a href="#as_normalized_linear_inequality-2253"><span class="linenos">2253</span></a>        <span class="k">if</span> <span class="n">ub</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="as_normalized_linear_inequality-2254"><a href="#as_normalized_linear_inequality-2254"><span class="linenos">2254</span></a>            <span class="n">ub</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span>
</span><span id="as_normalized_linear_inequality-2255"><a href="#as_normalized_linear_inequality-2255"><span class="linenos">2255</span></a>        <span class="k">if</span> <span class="n">expr</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="as_normalized_linear_inequality-2256"><a href="#as_normalized_linear_inequality-2256"><span class="linenos">2256</span></a>            <span class="k">return</span> <span class="n">NormalizedLinearInequality</span><span class="p">(</span><span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="as_normalized_linear_inequality-2257"><a href="#as_normalized_linear_inequality-2257"><span class="linenos">2257</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="p">(</span><span class="n">LinearBase</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
</span><span id="as_normalized_linear_inequality-2258"><a href="#as_normalized_linear_inequality-2258"><span class="linenos">2258</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="as_normalized_linear_inequality-2259"><a href="#as_normalized_linear_inequality-2259"><span class="linenos">2259</span></a>                <span class="sa">f</span><span class="s2">&quot;unsupported type for expr argument: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="as_normalized_linear_inequality-2260"><a href="#as_normalized_linear_inequality-2260"><span class="linenos">2260</span></a>            <span class="p">)</span>
</span><span id="as_normalized_linear_inequality-2261"><a href="#as_normalized_linear_inequality-2261"><span class="linenos">2261</span></a>        <span class="k">return</span> <span class="n">NormalizedLinearInequality</span><span class="p">(</span><span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="n">expr</span><span class="p">)</span>
</span><span id="as_normalized_linear_inequality-2262"><a href="#as_normalized_linear_inequality-2262"><span class="linenos">2262</span></a>
</span><span id="as_normalized_linear_inequality-2263"><a href="#as_normalized_linear_inequality-2263"><span class="linenos">2263</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bounded_expr</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="as_normalized_linear_inequality-2264"><a href="#as_normalized_linear_inequality-2264"><span class="linenos">2264</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="as_normalized_linear_inequality-2265"><a href="#as_normalized_linear_inequality-2265"><span class="linenos">2265</span></a>            <span class="s2">&quot;unsupported type for bounded_expr argument:&quot;</span>
</span><span id="as_normalized_linear_inequality-2266"><a href="#as_normalized_linear_inequality-2266"><span class="linenos">2266</span></a>            <span class="s2">&quot; bool. This error can occur when trying to add != constraints &quot;</span>
</span><span id="as_normalized_linear_inequality-2267"><a href="#as_normalized_linear_inequality-2267"><span class="linenos">2267</span></a>            <span class="s2">&quot;(which are not supported) or inequalities/equalities with constant &quot;</span>
</span><span id="as_normalized_linear_inequality-2268"><a href="#as_normalized_linear_inequality-2268"><span class="linenos">2268</span></a>            <span class="s2">&quot;left-hand-side and right-hand-side (which are redundant or make a &quot;</span>
</span><span id="as_normalized_linear_inequality-2269"><a href="#as_normalized_linear_inequality-2269"><span class="linenos">2269</span></a>            <span class="s2">&quot;model infeasible).&quot;</span>
</span><span id="as_normalized_linear_inequality-2270"><a href="#as_normalized_linear_inequality-2270"><span class="linenos">2270</span></a>        <span class="p">)</span>
</span><span id="as_normalized_linear_inequality-2271"><a href="#as_normalized_linear_inequality-2271"><span class="linenos">2271</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="as_normalized_linear_inequality-2272"><a href="#as_normalized_linear_inequality-2272"><span class="linenos">2272</span></a>        <span class="n">bounded_expr</span><span class="p">,</span>
</span><span id="as_normalized_linear_inequality-2273"><a href="#as_normalized_linear_inequality-2273"><span class="linenos">2273</span></a>        <span class="p">(</span>
</span><span id="as_normalized_linear_inequality-2274"><a href="#as_normalized_linear_inequality-2274"><span class="linenos">2274</span></a>            <span class="n">LowerBoundedLinearExpression</span><span class="p">,</span>
</span><span id="as_normalized_linear_inequality-2275"><a href="#as_normalized_linear_inequality-2275"><span class="linenos">2275</span></a>            <span class="n">UpperBoundedLinearExpression</span><span class="p">,</span>
</span><span id="as_normalized_linear_inequality-2276"><a href="#as_normalized_linear_inequality-2276"><span class="linenos">2276</span></a>            <span class="n">BoundedLinearExpression</span><span class="p">,</span>
</span><span id="as_normalized_linear_inequality-2277"><a href="#as_normalized_linear_inequality-2277"><span class="linenos">2277</span></a>            <span class="n">VarEqVar</span><span class="p">,</span>
</span><span id="as_normalized_linear_inequality-2278"><a href="#as_normalized_linear_inequality-2278"><span class="linenos">2278</span></a>        <span class="p">),</span>
</span><span id="as_normalized_linear_inequality-2279"><a href="#as_normalized_linear_inequality-2279"><span class="linenos">2279</span></a>    <span class="p">):</span>
</span><span id="as_normalized_linear_inequality-2280"><a href="#as_normalized_linear_inequality-2280"><span class="linenos">2280</span></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
</span><span id="as_normalized_linear_inequality-2281"><a href="#as_normalized_linear_inequality-2281"><span class="linenos">2281</span></a>            <span class="sa">f</span><span class="s2">&quot;unsupported type for bounded_expr: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">bounded_expr</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">!r}</span><span class="s2">&quot;</span>
</span><span id="as_normalized_linear_inequality-2282"><a href="#as_normalized_linear_inequality-2282"><span class="linenos">2282</span></a>        <span class="p">)</span>
</span><span id="as_normalized_linear_inequality-2283"><a href="#as_normalized_linear_inequality-2283"><span class="linenos">2283</span></a>    <span class="k">if</span> <span class="n">lb</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="as_normalized_linear_inequality-2284"><a href="#as_normalized_linear_inequality-2284"><span class="linenos">2284</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;lb cannot be specified together with a linear inequality&quot;</span><span class="p">)</span>
</span><span id="as_normalized_linear_inequality-2285"><a href="#as_normalized_linear_inequality-2285"><span class="linenos">2285</span></a>    <span class="k">if</span> <span class="n">ub</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="as_normalized_linear_inequality-2286"><a href="#as_normalized_linear_inequality-2286"><span class="linenos">2286</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;ub cannot be specified together with a linear inequality&quot;</span><span class="p">)</span>
</span><span id="as_normalized_linear_inequality-2287"><a href="#as_normalized_linear_inequality-2287"><span class="linenos">2287</span></a>    <span class="k">if</span> <span class="n">expr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="as_normalized_linear_inequality-2288"><a href="#as_normalized_linear_inequality-2288"><span class="linenos">2288</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;expr cannot be specified together with a linear inequality&quot;</span><span class="p">)</span>
</span><span id="as_normalized_linear_inequality-2289"><a href="#as_normalized_linear_inequality-2289"><span class="linenos">2289</span></a>
</span><span id="as_normalized_linear_inequality-2290"><a href="#as_normalized_linear_inequality-2290"><span class="linenos">2290</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bounded_expr</span><span class="p">,</span> <span class="n">VarEqVar</span><span class="p">):</span>
</span><span id="as_normalized_linear_inequality-2291"><a href="#as_normalized_linear_inequality-2291"><span class="linenos">2291</span></a>        <span class="k">return</span> <span class="n">NormalizedLinearInequality</span><span class="p">(</span>
</span><span id="as_normalized_linear_inequality-2292"><a href="#as_normalized_linear_inequality-2292"><span class="linenos">2292</span></a>            <span class="n">lb</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span id="as_normalized_linear_inequality-2293"><a href="#as_normalized_linear_inequality-2293"><span class="linenos">2293</span></a>            <span class="n">ub</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span id="as_normalized_linear_inequality-2294"><a href="#as_normalized_linear_inequality-2294"><span class="linenos">2294</span></a>            <span class="n">expr</span><span class="o">=</span><span class="n">bounded_expr</span><span class="o">.</span><span class="n">first_variable</span> <span class="o">-</span> <span class="n">bounded_expr</span><span class="o">.</span><span class="n">second_variable</span><span class="p">,</span>
</span><span id="as_normalized_linear_inequality-2295"><a href="#as_normalized_linear_inequality-2295"><span class="linenos">2295</span></a>        <span class="p">)</span>
</span><span id="as_normalized_linear_inequality-2296"><a href="#as_normalized_linear_inequality-2296"><span class="linenos">2296</span></a>
</span><span id="as_normalized_linear_inequality-2297"><a href="#as_normalized_linear_inequality-2297"><span class="linenos">2297</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="as_normalized_linear_inequality-2298"><a href="#as_normalized_linear_inequality-2298"><span class="linenos">2298</span></a>        <span class="n">bounded_expr</span><span class="p">,</span> <span class="p">(</span><span class="n">LowerBoundedLinearExpression</span><span class="p">,</span> <span class="n">BoundedLinearExpression</span><span class="p">)</span>
</span><span id="as_normalized_linear_inequality-2299"><a href="#as_normalized_linear_inequality-2299"><span class="linenos">2299</span></a>    <span class="p">):</span>
</span><span id="as_normalized_linear_inequality-2300"><a href="#as_normalized_linear_inequality-2300"><span class="linenos">2300</span></a>        <span class="n">lb</span> <span class="o">=</span> <span class="n">bounded_expr</span><span class="o">.</span><span class="n">lower_bound</span>
</span><span id="as_normalized_linear_inequality-2301"><a href="#as_normalized_linear_inequality-2301"><span class="linenos">2301</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="as_normalized_linear_inequality-2302"><a href="#as_normalized_linear_inequality-2302"><span class="linenos">2302</span></a>        <span class="n">lb</span> <span class="o">=</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">inf</span>
</span><span id="as_normalized_linear_inequality-2303"><a href="#as_normalized_linear_inequality-2303"><span class="linenos">2303</span></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span>
</span><span id="as_normalized_linear_inequality-2304"><a href="#as_normalized_linear_inequality-2304"><span class="linenos">2304</span></a>        <span class="n">bounded_expr</span><span class="p">,</span> <span class="p">(</span><span class="n">UpperBoundedLinearExpression</span><span class="p">,</span> <span class="n">BoundedLinearExpression</span><span class="p">)</span>
</span><span id="as_normalized_linear_inequality-2305"><a href="#as_normalized_linear_inequality-2305"><span class="linenos">2305</span></a>    <span class="p">):</span>
</span><span id="as_normalized_linear_inequality-2306"><a href="#as_normalized_linear_inequality-2306"><span class="linenos">2306</span></a>        <span class="n">ub</span> <span class="o">=</span> <span class="n">bounded_expr</span><span class="o">.</span><span class="n">upper_bound</span>
</span><span id="as_normalized_linear_inequality-2307"><a href="#as_normalized_linear_inequality-2307"><span class="linenos">2307</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="as_normalized_linear_inequality-2308"><a href="#as_normalized_linear_inequality-2308"><span class="linenos">2308</span></a>        <span class="n">ub</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span>
</span><span id="as_normalized_linear_inequality-2309"><a href="#as_normalized_linear_inequality-2309"><span class="linenos">2309</span></a>    <span class="k">return</span> <span class="n">NormalizedLinearInequality</span><span class="p">(</span><span class="n">lb</span><span class="o">=</span><span class="n">lb</span><span class="p">,</span> <span class="n">ub</span><span class="o">=</span><span class="n">ub</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="n">bounded_expr</span><span class="o">.</span><span class="n">expression</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Converts a linear constraint to a NormalizedLinearInequality.</p>

<p>The simplest way to specify the constraint is by passing a one-sided or
two-sided linear inequality as in:</p>

<ul>
<li>as_normalized_linear_inequality(x + y + 1.0 &lt;= 2.0),</li>
<li>as_normalized_linear_inequality(x + y &gt;= 2.0), or</li>
<li>as_normalized_linear_inequality((1.0 &lt;= x + y) &lt;= 2.0).</li>
</ul>

<p>Note the extra parenthesis for two-sided linear inequalities, which is
required due to some language limitations (see
<a href="https://peps.python.org/pep-0335/">https://peps.python.org/pep-0335/</a> and https://peps.python.org/pep-0535/).
If the parenthesis are omitted, a TypeError will be raised explaining the
issue (if this error was not raised the first inequality would have been
silently ignored because of the noted language limitations).</p>

<p>The second way to specify the constraint is by setting lb, ub, and/o expr as
in:</p>

<ul>
<li>as_normalized_linear_inequality(expr=x + y + 1.0, ub=2.0),</li>
<li>as_normalized_linear_inequality(expr=x + y, lb=2.0),</li>
<li>as_normalized_linear_inequality(expr=x + y, lb=1.0, ub=2.0), or</li>
<li>as_normalized_linear_inequality(lb=1.0).
Omitting lb is equivalent to setting it to -math.inf and omiting ub is
equivalent to setting it to math.inf.</li>
</ul>

<h6 id="these-two-alternatives-are-exclusive-and-a-combined-call-like">These two alternatives are exclusive and a combined call like:</h6>

<blockquote>
  <ul>
  <li>as_normalized_linear_inequality(x + y &lt;= 2.0, lb=1.0), or</li>
  <li>as_normalized_linear_inequality(x + y &lt;= 2.0, ub=math.inf)</li>
  </ul>
</blockquote>

<p>will raise a ValueError. A ValueError is also raised if expr's offset is
infinite.</p>

<h6 id="arguments">Arguments:</h6>

<ul>
<li><strong>bounded_expr:</strong>  a linear inequality describing the constraint. Cannot be
specified together with lb, ub, or expr.</li>
<li><strong>lb:</strong>  The constraint's lower bound if bounded_expr is omitted (if both
bounder_expr and lb are omitted, the lower bound is -math.inf).</li>
<li><strong>ub:</strong>  The constraint's upper bound if bounded_expr is omitted (if both
bounder_expr and ub are omitted, the upper bound is math.inf).</li>
<li><strong>expr:</strong>  The constraint's linear expression if bounded_expr is omitted.</li>
</ul>

<h6 id="returns">Returns:</h6>

<blockquote>
  <p>A NormalizedLinearInequality representing the linear constraint.</p>
</blockquote>
</div>


                </section>
    </main>
</body>
</html>